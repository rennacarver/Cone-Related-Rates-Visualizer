(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))w(T);new MutationObserver(T=>{for(const L of T)if(L.type==="childList")for(const G of L.addedNodes)G.tagName==="LINK"&&G.rel==="modulepreload"&&w(G)}).observe(document,{childList:!0,subtree:!0});function a(T){const L={};return T.integrity&&(L.integrity=T.integrity),T.referrerPolicy&&(L.referrerPolicy=T.referrerPolicy),T.crossOrigin==="use-credentials"?L.credentials="include":T.crossOrigin==="anonymous"?L.credentials="omit":L.credentials="same-origin",L}function w(T){if(T.ep)return;T.ep=!0;const L=a(T);fetch(T.href,L)}})();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const jc="179",Vi={ROTATE:0,DOLLY:1,PAN:2},qi={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Du=0,yl=1,ku=2,Cd=1,Pu=2,Lr=3,ei=0,Yn=1,Br=2,Jr=0,Qi=1,vl=2,bl=3,xl=4,Lu=5,fi=100,Bu=101,Fu=102,Ou=103,Ru=104,Nu=200,Uu=201,qu=202,zu=203,$s=204,ec=205,Gu=206,Vu=207,Qu=208,ju=209,Hu=210,Yu=211,Wu=212,Xu=213,Ku=214,tc=0,nc=1,rc=2,Wi=3,ic=4,oc=5,ac=6,sc=7,Td=0,Ju=1,Zu=2,Zr=0,$u=1,ep=2,tp=3,np=4,rp=5,ip=6,op=7,Dd=300,Xi=301,Ki=302,cc=303,lc=304,Ka=306,dc=1e3,mi=1001,uc=1002,yr=1003,ap=1004,aa=1005,cr=1006,hs=1007,yi=1008,wr=1009,kd=1010,Pd=1011,Fo=1012,Hc=1013,bi=1014,Fr=1015,jo=1016,Yc=1017,Wc=1018,Oo=1020,Ld=35902,Bd=1021,Fd=1022,gr=1023,Ro=1026,No=1027,Od=1028,Xc=1029,Rd=1030,Kc=1031,Jc=1033,Ba=33776,Fa=33777,Oa=33778,Ra=33779,pc=35840,hc=35841,fc=35842,gc=35843,mc=36196,yc=37492,vc=37496,bc=37808,xc=37809,wc=37810,Ac=37811,Ec=37812,_c=37813,Mc=37814,Sc=37815,Ic=37816,Cc=37817,Tc=37818,Dc=37819,kc=37820,Pc=37821,Na=36492,Lc=36494,Bc=36495,Nd=36283,Fc=36284,Oc=36285,Rc=36286,sp=3200,cp=3201,lp=0,dp=1,Kr="",ar="srgb",Ji="srgb-linear",za="linear",pn="srgb",Si=7680,wl=519,up=512,pp=513,hp=514,Ud=515,fp=516,gp=517,mp=518,yp=519,Al=35044,El="300 es",br=2e3,Ga=2001;class Ei{addEventListener(e,a){this._listeners===void 0&&(this._listeners={});const w=this._listeners;w[e]===void 0&&(w[e]=[]),w[e].indexOf(a)===-1&&w[e].push(a)}hasEventListener(e,a){const w=this._listeners;return w===void 0?!1:w[e]!==void 0&&w[e].indexOf(a)!==-1}removeEventListener(e,a){const w=this._listeners;if(w===void 0)return;const T=w[e];if(T!==void 0){const L=T.indexOf(a);L!==-1&&T.splice(L,1)}}dispatchEvent(e){const a=this._listeners;if(a===void 0)return;const w=a[e.type];if(w!==void 0){e.target=this;const T=w.slice(0);for(let L=0,G=T.length;L<G;L++)T[L].call(this,e);e.target=null}}}const Un=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],ko=Math.PI/180,Nc=180/Math.PI;function Ho(){const _=Math.random()*4294967295|0,e=Math.random()*4294967295|0,a=Math.random()*4294967295|0,w=Math.random()*4294967295|0;return(Un[_&255]+Un[_>>8&255]+Un[_>>16&255]+Un[_>>24&255]+"-"+Un[e&255]+Un[e>>8&255]+"-"+Un[e>>16&15|64]+Un[e>>24&255]+"-"+Un[a&63|128]+Un[a>>8&255]+"-"+Un[a>>16&255]+Un[a>>24&255]+Un[w&255]+Un[w>>8&255]+Un[w>>16&255]+Un[w>>24&255]).toLowerCase()}function $t(_,e,a){return Math.max(e,Math.min(a,_))}function vp(_,e){return(_%e+e)%e}function fs(_,e,a){return(1-a)*_+a*e}function vo(_,e){switch(e.constructor){case Float32Array:return _;case Uint32Array:return _/4294967295;case Uint16Array:return _/65535;case Uint8Array:return _/255;case Int32Array:return Math.max(_/2147483647,-1);case Int16Array:return Math.max(_/32767,-1);case Int8Array:return Math.max(_/127,-1);default:throw new Error("Invalid component type.")}}function jn(_,e){switch(e.constructor){case Float32Array:return _;case Uint32Array:return Math.round(_*4294967295);case Uint16Array:return Math.round(_*65535);case Uint8Array:return Math.round(_*255);case Int32Array:return Math.round(_*2147483647);case Int16Array:return Math.round(_*32767);case Int8Array:return Math.round(_*127);default:throw new Error("Invalid component type.")}}const bp={DEG2RAD:ko};class Yt{constructor(e=0,a=0){Yt.prototype.isVector2=!0,this.x=e,this.y=a}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,a){return this.x=e,this.y=a,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,a){switch(e){case 0:this.x=a;break;case 1:this.y=a;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,a){return this.x=e.x+a.x,this.y=e.y+a.y,this}addScaledVector(e,a){return this.x+=e.x*a,this.y+=e.y*a,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,a){return this.x=e.x-a.x,this.y=e.y-a.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const a=this.x,w=this.y,T=e.elements;return this.x=T[0]*a+T[3]*w+T[6],this.y=T[1]*a+T[4]*w+T[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,a){return this.x=$t(this.x,e.x,a.x),this.y=$t(this.y,e.y,a.y),this}clampScalar(e,a){return this.x=$t(this.x,e,a),this.y=$t(this.y,e,a),this}clampLength(e,a){const w=this.length();return this.divideScalar(w||1).multiplyScalar($t(w,e,a))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const a=Math.sqrt(this.lengthSq()*e.lengthSq());if(a===0)return Math.PI/2;const w=this.dot(e)/a;return Math.acos($t(w,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const a=this.x-e.x,w=this.y-e.y;return a*a+w*w}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,a){return this.x+=(e.x-this.x)*a,this.y+=(e.y-this.y)*a,this}lerpVectors(e,a,w){return this.x=e.x+(a.x-e.x)*w,this.y=e.y+(a.y-e.y)*w,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,a=0){return this.x=e[a],this.y=e[a+1],this}toArray(e=[],a=0){return e[a]=this.x,e[a+1]=this.y,e}fromBufferAttribute(e,a){return this.x=e.getX(a),this.y=e.getY(a),this}rotateAround(e,a){const w=Math.cos(a),T=Math.sin(a),L=this.x-e.x,G=this.y-e.y;return this.x=L*w-G*T+e.x,this.y=L*T+G*w+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class xi{constructor(e=0,a=0,w=0,T=1){this.isQuaternion=!0,this._x=e,this._y=a,this._z=w,this._w=T}static slerpFlat(e,a,w,T,L,G,Y){let ce=w[T+0],P=w[T+1],S=w[T+2],c=w[T+3];const x=L[G+0],t=L[G+1],l=L[G+2],n=L[G+3];if(Y===0){e[a+0]=ce,e[a+1]=P,e[a+2]=S,e[a+3]=c;return}if(Y===1){e[a+0]=x,e[a+1]=t,e[a+2]=l,e[a+3]=n;return}if(c!==n||ce!==x||P!==t||S!==l){let i=1-Y;const s=ce*x+P*t+S*l+c*n,g=s>=0?1:-1,d=1-s*s;if(d>Number.EPSILON){const f=Math.sqrt(d),y=Math.atan2(f,s*g);i=Math.sin(i*y)/f,Y=Math.sin(Y*y)/f}const u=Y*g;if(ce=ce*i+x*u,P=P*i+t*u,S=S*i+l*u,c=c*i+n*u,i===1-Y){const f=1/Math.sqrt(ce*ce+P*P+S*S+c*c);ce*=f,P*=f,S*=f,c*=f}}e[a]=ce,e[a+1]=P,e[a+2]=S,e[a+3]=c}static multiplyQuaternionsFlat(e,a,w,T,L,G){const Y=w[T],ce=w[T+1],P=w[T+2],S=w[T+3],c=L[G],x=L[G+1],t=L[G+2],l=L[G+3];return e[a]=Y*l+S*c+ce*t-P*x,e[a+1]=ce*l+S*x+P*c-Y*t,e[a+2]=P*l+S*t+Y*x-ce*c,e[a+3]=S*l-Y*c-ce*x-P*t,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,a,w,T){return this._x=e,this._y=a,this._z=w,this._w=T,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,a=!0){const w=e._x,T=e._y,L=e._z,G=e._order,Y=Math.cos,ce=Math.sin,P=Y(w/2),S=Y(T/2),c=Y(L/2),x=ce(w/2),t=ce(T/2),l=ce(L/2);switch(G){case"XYZ":this._x=x*S*c+P*t*l,this._y=P*t*c-x*S*l,this._z=P*S*l+x*t*c,this._w=P*S*c-x*t*l;break;case"YXZ":this._x=x*S*c+P*t*l,this._y=P*t*c-x*S*l,this._z=P*S*l-x*t*c,this._w=P*S*c+x*t*l;break;case"ZXY":this._x=x*S*c-P*t*l,this._y=P*t*c+x*S*l,this._z=P*S*l+x*t*c,this._w=P*S*c-x*t*l;break;case"ZYX":this._x=x*S*c-P*t*l,this._y=P*t*c+x*S*l,this._z=P*S*l-x*t*c,this._w=P*S*c+x*t*l;break;case"YZX":this._x=x*S*c+P*t*l,this._y=P*t*c+x*S*l,this._z=P*S*l-x*t*c,this._w=P*S*c-x*t*l;break;case"XZY":this._x=x*S*c-P*t*l,this._y=P*t*c-x*S*l,this._z=P*S*l+x*t*c,this._w=P*S*c+x*t*l;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+G)}return a===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,a){const w=a/2,T=Math.sin(w);return this._x=e.x*T,this._y=e.y*T,this._z=e.z*T,this._w=Math.cos(w),this._onChangeCallback(),this}setFromRotationMatrix(e){const a=e.elements,w=a[0],T=a[4],L=a[8],G=a[1],Y=a[5],ce=a[9],P=a[2],S=a[6],c=a[10],x=w+Y+c;if(x>0){const t=.5/Math.sqrt(x+1);this._w=.25/t,this._x=(S-ce)*t,this._y=(L-P)*t,this._z=(G-T)*t}else if(w>Y&&w>c){const t=2*Math.sqrt(1+w-Y-c);this._w=(S-ce)/t,this._x=.25*t,this._y=(T+G)/t,this._z=(L+P)/t}else if(Y>c){const t=2*Math.sqrt(1+Y-w-c);this._w=(L-P)/t,this._x=(T+G)/t,this._y=.25*t,this._z=(ce+S)/t}else{const t=2*Math.sqrt(1+c-w-Y);this._w=(G-T)/t,this._x=(L+P)/t,this._y=(ce+S)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(e,a){let w=e.dot(a)+1;return w<1e-8?(w=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=w):(this._x=0,this._y=-e.z,this._z=e.y,this._w=w)):(this._x=e.y*a.z-e.z*a.y,this._y=e.z*a.x-e.x*a.z,this._z=e.x*a.y-e.y*a.x,this._w=w),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs($t(this.dot(e),-1,1)))}rotateTowards(e,a){const w=this.angleTo(e);if(w===0)return this;const T=Math.min(1,a/w);return this.slerp(e,T),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,a){const w=e._x,T=e._y,L=e._z,G=e._w,Y=a._x,ce=a._y,P=a._z,S=a._w;return this._x=w*S+G*Y+T*P-L*ce,this._y=T*S+G*ce+L*Y-w*P,this._z=L*S+G*P+w*ce-T*Y,this._w=G*S-w*Y-T*ce-L*P,this._onChangeCallback(),this}slerp(e,a){if(a===0)return this;if(a===1)return this.copy(e);const w=this._x,T=this._y,L=this._z,G=this._w;let Y=G*e._w+w*e._x+T*e._y+L*e._z;if(Y<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,Y=-Y):this.copy(e),Y>=1)return this._w=G,this._x=w,this._y=T,this._z=L,this;const ce=1-Y*Y;if(ce<=Number.EPSILON){const t=1-a;return this._w=t*G+a*this._w,this._x=t*w+a*this._x,this._y=t*T+a*this._y,this._z=t*L+a*this._z,this.normalize(),this}const P=Math.sqrt(ce),S=Math.atan2(P,Y),c=Math.sin((1-a)*S)/P,x=Math.sin(a*S)/P;return this._w=G*c+this._w*x,this._x=w*c+this._x*x,this._y=T*c+this._y*x,this._z=L*c+this._z*x,this._onChangeCallback(),this}slerpQuaternions(e,a,w){return this.copy(e).slerp(a,w)}random(){const e=2*Math.PI*Math.random(),a=2*Math.PI*Math.random(),w=Math.random(),T=Math.sqrt(1-w),L=Math.sqrt(w);return this.set(T*Math.sin(e),T*Math.cos(e),L*Math.sin(a),L*Math.cos(a))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,a=0){return this._x=e[a],this._y=e[a+1],this._z=e[a+2],this._w=e[a+3],this._onChangeCallback(),this}toArray(e=[],a=0){return e[a]=this._x,e[a+1]=this._y,e[a+2]=this._z,e[a+3]=this._w,e}fromBufferAttribute(e,a){return this._x=e.getX(a),this._y=e.getY(a),this._z=e.getZ(a),this._w=e.getW(a),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Je{constructor(e=0,a=0,w=0){Je.prototype.isVector3=!0,this.x=e,this.y=a,this.z=w}set(e,a,w){return w===void 0&&(w=this.z),this.x=e,this.y=a,this.z=w,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,a){switch(e){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,a){return this.x=e.x+a.x,this.y=e.y+a.y,this.z=e.z+a.z,this}addScaledVector(e,a){return this.x+=e.x*a,this.y+=e.y*a,this.z+=e.z*a,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,a){return this.x=e.x-a.x,this.y=e.y-a.y,this.z=e.z-a.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,a){return this.x=e.x*a.x,this.y=e.y*a.y,this.z=e.z*a.z,this}applyEuler(e){return this.applyQuaternion(_l.setFromEuler(e))}applyAxisAngle(e,a){return this.applyQuaternion(_l.setFromAxisAngle(e,a))}applyMatrix3(e){const a=this.x,w=this.y,T=this.z,L=e.elements;return this.x=L[0]*a+L[3]*w+L[6]*T,this.y=L[1]*a+L[4]*w+L[7]*T,this.z=L[2]*a+L[5]*w+L[8]*T,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const a=this.x,w=this.y,T=this.z,L=e.elements,G=1/(L[3]*a+L[7]*w+L[11]*T+L[15]);return this.x=(L[0]*a+L[4]*w+L[8]*T+L[12])*G,this.y=(L[1]*a+L[5]*w+L[9]*T+L[13])*G,this.z=(L[2]*a+L[6]*w+L[10]*T+L[14])*G,this}applyQuaternion(e){const a=this.x,w=this.y,T=this.z,L=e.x,G=e.y,Y=e.z,ce=e.w,P=2*(G*T-Y*w),S=2*(Y*a-L*T),c=2*(L*w-G*a);return this.x=a+ce*P+G*c-Y*S,this.y=w+ce*S+Y*P-L*c,this.z=T+ce*c+L*S-G*P,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const a=this.x,w=this.y,T=this.z,L=e.elements;return this.x=L[0]*a+L[4]*w+L[8]*T,this.y=L[1]*a+L[5]*w+L[9]*T,this.z=L[2]*a+L[6]*w+L[10]*T,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,a){return this.x=$t(this.x,e.x,a.x),this.y=$t(this.y,e.y,a.y),this.z=$t(this.z,e.z,a.z),this}clampScalar(e,a){return this.x=$t(this.x,e,a),this.y=$t(this.y,e,a),this.z=$t(this.z,e,a),this}clampLength(e,a){const w=this.length();return this.divideScalar(w||1).multiplyScalar($t(w,e,a))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,a){return this.x+=(e.x-this.x)*a,this.y+=(e.y-this.y)*a,this.z+=(e.z-this.z)*a,this}lerpVectors(e,a,w){return this.x=e.x+(a.x-e.x)*w,this.y=e.y+(a.y-e.y)*w,this.z=e.z+(a.z-e.z)*w,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,a){const w=e.x,T=e.y,L=e.z,G=a.x,Y=a.y,ce=a.z;return this.x=T*ce-L*Y,this.y=L*G-w*ce,this.z=w*Y-T*G,this}projectOnVector(e){const a=e.lengthSq();if(a===0)return this.set(0,0,0);const w=e.dot(this)/a;return this.copy(e).multiplyScalar(w)}projectOnPlane(e){return gs.copy(this).projectOnVector(e),this.sub(gs)}reflect(e){return this.sub(gs.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const a=Math.sqrt(this.lengthSq()*e.lengthSq());if(a===0)return Math.PI/2;const w=this.dot(e)/a;return Math.acos($t(w,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const a=this.x-e.x,w=this.y-e.y,T=this.z-e.z;return a*a+w*w+T*T}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,a,w){const T=Math.sin(a)*e;return this.x=T*Math.sin(w),this.y=Math.cos(a)*e,this.z=T*Math.cos(w),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,a,w){return this.x=e*Math.sin(a),this.y=w,this.z=e*Math.cos(a),this}setFromMatrixPosition(e){const a=e.elements;return this.x=a[12],this.y=a[13],this.z=a[14],this}setFromMatrixScale(e){const a=this.setFromMatrixColumn(e,0).length(),w=this.setFromMatrixColumn(e,1).length(),T=this.setFromMatrixColumn(e,2).length();return this.x=a,this.y=w,this.z=T,this}setFromMatrixColumn(e,a){return this.fromArray(e.elements,a*4)}setFromMatrix3Column(e,a){return this.fromArray(e.elements,a*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,a=0){return this.x=e[a],this.y=e[a+1],this.z=e[a+2],this}toArray(e=[],a=0){return e[a]=this.x,e[a+1]=this.y,e[a+2]=this.z,e}fromBufferAttribute(e,a){return this.x=e.getX(a),this.y=e.getY(a),this.z=e.getZ(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,a=Math.random()*2-1,w=Math.sqrt(1-a*a);return this.x=w*Math.cos(e),this.y=a,this.z=w*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gs=new Je,_l=new xi;class Wt{constructor(e,a,w,T,L,G,Y,ce,P){Wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,a,w,T,L,G,Y,ce,P)}set(e,a,w,T,L,G,Y,ce,P){const S=this.elements;return S[0]=e,S[1]=T,S[2]=Y,S[3]=a,S[4]=L,S[5]=ce,S[6]=w,S[7]=G,S[8]=P,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const a=this.elements,w=e.elements;return a[0]=w[0],a[1]=w[1],a[2]=w[2],a[3]=w[3],a[4]=w[4],a[5]=w[5],a[6]=w[6],a[7]=w[7],a[8]=w[8],this}extractBasis(e,a,w){return e.setFromMatrix3Column(this,0),a.setFromMatrix3Column(this,1),w.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const a=e.elements;return this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,a){const w=e.elements,T=a.elements,L=this.elements,G=w[0],Y=w[3],ce=w[6],P=w[1],S=w[4],c=w[7],x=w[2],t=w[5],l=w[8],n=T[0],i=T[3],s=T[6],g=T[1],d=T[4],u=T[7],f=T[2],y=T[5],h=T[8];return L[0]=G*n+Y*g+ce*f,L[3]=G*i+Y*d+ce*y,L[6]=G*s+Y*u+ce*h,L[1]=P*n+S*g+c*f,L[4]=P*i+S*d+c*y,L[7]=P*s+S*u+c*h,L[2]=x*n+t*g+l*f,L[5]=x*i+t*d+l*y,L[8]=x*s+t*u+l*h,this}multiplyScalar(e){const a=this.elements;return a[0]*=e,a[3]*=e,a[6]*=e,a[1]*=e,a[4]*=e,a[7]*=e,a[2]*=e,a[5]*=e,a[8]*=e,this}determinant(){const e=this.elements,a=e[0],w=e[1],T=e[2],L=e[3],G=e[4],Y=e[5],ce=e[6],P=e[7],S=e[8];return a*G*S-a*Y*P-w*L*S+w*Y*ce+T*L*P-T*G*ce}invert(){const e=this.elements,a=e[0],w=e[1],T=e[2],L=e[3],G=e[4],Y=e[5],ce=e[6],P=e[7],S=e[8],c=S*G-Y*P,x=Y*ce-S*L,t=P*L-G*ce,l=a*c+w*x+T*t;if(l===0)return this.set(0,0,0,0,0,0,0,0,0);const n=1/l;return e[0]=c*n,e[1]=(T*P-S*w)*n,e[2]=(Y*w-T*G)*n,e[3]=x*n,e[4]=(S*a-T*ce)*n,e[5]=(T*L-Y*a)*n,e[6]=t*n,e[7]=(w*ce-P*a)*n,e[8]=(G*a-w*L)*n,this}transpose(){let e;const a=this.elements;return e=a[1],a[1]=a[3],a[3]=e,e=a[2],a[2]=a[6],a[6]=e,e=a[5],a[5]=a[7],a[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const a=this.elements;return e[0]=a[0],e[1]=a[3],e[2]=a[6],e[3]=a[1],e[4]=a[4],e[5]=a[7],e[6]=a[2],e[7]=a[5],e[8]=a[8],this}setUvTransform(e,a,w,T,L,G,Y){const ce=Math.cos(L),P=Math.sin(L);return this.set(w*ce,w*P,-w*(ce*G+P*Y)+G+e,-T*P,T*ce,-T*(-P*G+ce*Y)+Y+a,0,0,1),this}scale(e,a){return this.premultiply(ms.makeScale(e,a)),this}rotate(e){return this.premultiply(ms.makeRotation(-e)),this}translate(e,a){return this.premultiply(ms.makeTranslation(e,a)),this}makeTranslation(e,a){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,a,0,0,1),this}makeRotation(e){const a=Math.cos(e),w=Math.sin(e);return this.set(a,-w,0,w,a,0,0,0,1),this}makeScale(e,a){return this.set(e,0,0,0,a,0,0,0,1),this}equals(e){const a=this.elements,w=e.elements;for(let T=0;T<9;T++)if(a[T]!==w[T])return!1;return!0}fromArray(e,a=0){for(let w=0;w<9;w++)this.elements[w]=e[w+a];return this}toArray(e=[],a=0){const w=this.elements;return e[a]=w[0],e[a+1]=w[1],e[a+2]=w[2],e[a+3]=w[3],e[a+4]=w[4],e[a+5]=w[5],e[a+6]=w[6],e[a+7]=w[7],e[a+8]=w[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ms=new Wt;function qd(_){for(let e=_.length-1;e>=0;--e)if(_[e]>=65535)return!0;return!1}function Va(_){return document.createElementNS("http://www.w3.org/1999/xhtml",_)}function xp(){const _=Va("canvas");return _.style.display="block",_}const Ml={};function ji(_){_ in Ml||(Ml[_]=!0,console.warn(_))}function wp(_,e,a){return new Promise(function(w,T){function L(){switch(_.clientWaitSync(e,_.SYNC_FLUSH_COMMANDS_BIT,0)){case _.WAIT_FAILED:T();break;case _.TIMEOUT_EXPIRED:setTimeout(L,a);break;default:w()}}setTimeout(L,a)})}const Sl=new Wt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Il=new Wt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Ap(){const _={enabled:!0,workingColorSpace:Ji,spaces:{},convert:function(T,L,G){return this.enabled===!1||L===G||!L||!G||(this.spaces[L].transfer===pn&&(T.r=Or(T.r),T.g=Or(T.g),T.b=Or(T.b)),this.spaces[L].primaries!==this.spaces[G].primaries&&(T.applyMatrix3(this.spaces[L].toXYZ),T.applyMatrix3(this.spaces[G].fromXYZ)),this.spaces[G].transfer===pn&&(T.r=Hi(T.r),T.g=Hi(T.g),T.b=Hi(T.b))),T},workingToColorSpace:function(T,L){return this.convert(T,this.workingColorSpace,L)},colorSpaceToWorking:function(T,L){return this.convert(T,L,this.workingColorSpace)},getPrimaries:function(T){return this.spaces[T].primaries},getTransfer:function(T){return T===Kr?za:this.spaces[T].transfer},getLuminanceCoefficients:function(T,L=this.workingColorSpace){return T.fromArray(this.spaces[L].luminanceCoefficients)},define:function(T){Object.assign(this.spaces,T)},_getMatrix:function(T,L,G){return T.copy(this.spaces[L].toXYZ).multiply(this.spaces[G].fromXYZ)},_getDrawingBufferColorSpace:function(T){return this.spaces[T].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(T=this.workingColorSpace){return this.spaces[T].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(T,L){return ji("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),_.workingToColorSpace(T,L)},toWorkingColorSpace:function(T,L){return ji("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),_.colorSpaceToWorking(T,L)}},e=[.64,.33,.3,.6,.15,.06],a=[.2126,.7152,.0722],w=[.3127,.329];return _.define({[Ji]:{primaries:e,whitePoint:w,transfer:za,toXYZ:Sl,fromXYZ:Il,luminanceCoefficients:a,workingColorSpaceConfig:{unpackColorSpace:ar},outputColorSpaceConfig:{drawingBufferColorSpace:ar}},[ar]:{primaries:e,whitePoint:w,transfer:pn,toXYZ:Sl,fromXYZ:Il,luminanceCoefficients:a,outputColorSpaceConfig:{drawingBufferColorSpace:ar}}}),_}const an=Ap();function Or(_){return _<.04045?_*.0773993808:Math.pow(_*.9478672986+.0521327014,2.4)}function Hi(_){return _<.0031308?_*12.92:1.055*Math.pow(_,.41666)-.055}let Ii;class Ep{static getDataURL(e,a="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let w;if(e instanceof HTMLCanvasElement)w=e;else{Ii===void 0&&(Ii=Va("canvas")),Ii.width=e.width,Ii.height=e.height;const T=Ii.getContext("2d");e instanceof ImageData?T.putImageData(e,0,0):T.drawImage(e,0,0,e.width,e.height),w=Ii}return w.toDataURL(a)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const a=Va("canvas");a.width=e.width,a.height=e.height;const w=a.getContext("2d");w.drawImage(e,0,0,e.width,e.height);const T=w.getImageData(0,0,e.width,e.height),L=T.data;for(let G=0;G<L.length;G++)L[G]=Or(L[G]/255)*255;return w.putImageData(T,0,0),a}else if(e.data){const a=e.data.slice(0);for(let w=0;w<a.length;w++)a instanceof Uint8Array||a instanceof Uint8ClampedArray?a[w]=Math.floor(Or(a[w]/255)*255):a[w]=Or(a[w]);return{data:a,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let _p=0;class Zc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_p++}),this.uuid=Ho(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const a=this.data;return a instanceof HTMLVideoElement?e.set(a.videoWidth,a.videoHeight,0):a instanceof VideoFrame?e.set(a.displayHeight,a.displayWidth,0):a!==null?e.set(a.width,a.height,a.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const a=e===void 0||typeof e=="string";if(!a&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const w={uuid:this.uuid,url:""},T=this.data;if(T!==null){let L;if(Array.isArray(T)){L=[];for(let G=0,Y=T.length;G<Y;G++)T[G].isDataTexture?L.push(ys(T[G].image)):L.push(ys(T[G]))}else L=ys(T);w.url=L}return a||(e.images[this.uuid]=w),w}}function ys(_){return typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_ instanceof ImageBitmap?Ep.getDataURL(_):_.data?{data:Array.from(_.data),width:_.width,height:_.height,type:_.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Mp=0;const vs=new Je;class Qn extends Ei{constructor(e=Qn.DEFAULT_IMAGE,a=Qn.DEFAULT_MAPPING,w=mi,T=mi,L=cr,G=yi,Y=gr,ce=wr,P=Qn.DEFAULT_ANISOTROPY,S=Kr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Mp++}),this.uuid=Ho(),this.name="",this.source=new Zc(e),this.mipmaps=[],this.mapping=a,this.channel=0,this.wrapS=w,this.wrapT=T,this.magFilter=L,this.minFilter=G,this.anisotropy=P,this.format=Y,this.internalFormat=null,this.type=ce,this.offset=new Yt(0,0),this.repeat=new Yt(1,1),this.center=new Yt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=S,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(vs).x}get height(){return this.source.getSize(vs).y}get depth(){return this.source.getSize(vs).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,a){this.updateRanges.push({start:e,count:a})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const a in e){const w=e[a];if(w===void 0){console.warn(`THREE.Texture.setValues(): parameter '${a}' has value of undefined.`);continue}const T=this[a];if(T===void 0){console.warn(`THREE.Texture.setValues(): property '${a}' does not exist.`);continue}T&&w&&T.isVector2&&w.isVector2||T&&w&&T.isVector3&&w.isVector3||T&&w&&T.isMatrix3&&w.isMatrix3?T.copy(w):this[a]=w}}toJSON(e){const a=e===void 0||typeof e=="string";if(!a&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const w={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(w.userData=this.userData),a||(e.textures[this.uuid]=w),w}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Dd)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case dc:e.x=e.x-Math.floor(e.x);break;case mi:e.x=e.x<0?0:1;break;case uc:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case dc:e.y=e.y-Math.floor(e.y);break;case mi:e.y=e.y<0?0:1;break;case uc:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Qn.DEFAULT_IMAGE=null;Qn.DEFAULT_MAPPING=Dd;Qn.DEFAULT_ANISOTROPY=1;class fn{constructor(e=0,a=0,w=0,T=1){fn.prototype.isVector4=!0,this.x=e,this.y=a,this.z=w,this.w=T}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,a,w,T){return this.x=e,this.y=a,this.z=w,this.w=T,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,a){switch(e){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;case 3:this.w=a;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,a){return this.x=e.x+a.x,this.y=e.y+a.y,this.z=e.z+a.z,this.w=e.w+a.w,this}addScaledVector(e,a){return this.x+=e.x*a,this.y+=e.y*a,this.z+=e.z*a,this.w+=e.w*a,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,a){return this.x=e.x-a.x,this.y=e.y-a.y,this.z=e.z-a.z,this.w=e.w-a.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const a=this.x,w=this.y,T=this.z,L=this.w,G=e.elements;return this.x=G[0]*a+G[4]*w+G[8]*T+G[12]*L,this.y=G[1]*a+G[5]*w+G[9]*T+G[13]*L,this.z=G[2]*a+G[6]*w+G[10]*T+G[14]*L,this.w=G[3]*a+G[7]*w+G[11]*T+G[15]*L,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const a=Math.sqrt(1-e.w*e.w);return a<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/a,this.y=e.y/a,this.z=e.z/a),this}setAxisAngleFromRotationMatrix(e){let a,w,T,L;const ce=e.elements,P=ce[0],S=ce[4],c=ce[8],x=ce[1],t=ce[5],l=ce[9],n=ce[2],i=ce[6],s=ce[10];if(Math.abs(S-x)<.01&&Math.abs(c-n)<.01&&Math.abs(l-i)<.01){if(Math.abs(S+x)<.1&&Math.abs(c+n)<.1&&Math.abs(l+i)<.1&&Math.abs(P+t+s-3)<.1)return this.set(1,0,0,0),this;a=Math.PI;const d=(P+1)/2,u=(t+1)/2,f=(s+1)/2,y=(S+x)/4,h=(c+n)/4,p=(l+i)/4;return d>u&&d>f?d<.01?(w=0,T=.707106781,L=.707106781):(w=Math.sqrt(d),T=y/w,L=h/w):u>f?u<.01?(w=.707106781,T=0,L=.707106781):(T=Math.sqrt(u),w=y/T,L=p/T):f<.01?(w=.707106781,T=.707106781,L=0):(L=Math.sqrt(f),w=h/L,T=p/L),this.set(w,T,L,a),this}let g=Math.sqrt((i-l)*(i-l)+(c-n)*(c-n)+(x-S)*(x-S));return Math.abs(g)<.001&&(g=1),this.x=(i-l)/g,this.y=(c-n)/g,this.z=(x-S)/g,this.w=Math.acos((P+t+s-1)/2),this}setFromMatrixPosition(e){const a=e.elements;return this.x=a[12],this.y=a[13],this.z=a[14],this.w=a[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,a){return this.x=$t(this.x,e.x,a.x),this.y=$t(this.y,e.y,a.y),this.z=$t(this.z,e.z,a.z),this.w=$t(this.w,e.w,a.w),this}clampScalar(e,a){return this.x=$t(this.x,e,a),this.y=$t(this.y,e,a),this.z=$t(this.z,e,a),this.w=$t(this.w,e,a),this}clampLength(e,a){const w=this.length();return this.divideScalar(w||1).multiplyScalar($t(w,e,a))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,a){return this.x+=(e.x-this.x)*a,this.y+=(e.y-this.y)*a,this.z+=(e.z-this.z)*a,this.w+=(e.w-this.w)*a,this}lerpVectors(e,a,w){return this.x=e.x+(a.x-e.x)*w,this.y=e.y+(a.y-e.y)*w,this.z=e.z+(a.z-e.z)*w,this.w=e.w+(a.w-e.w)*w,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,a=0){return this.x=e[a],this.y=e[a+1],this.z=e[a+2],this.w=e[a+3],this}toArray(e=[],a=0){return e[a]=this.x,e[a+1]=this.y,e[a+2]=this.z,e[a+3]=this.w,e}fromBufferAttribute(e,a){return this.x=e.getX(a),this.y=e.getY(a),this.z=e.getZ(a),this.w=e.getW(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Sp extends Ei{constructor(e=1,a=1,w={}){super(),w=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:cr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},w),this.isRenderTarget=!0,this.width=e,this.height=a,this.depth=w.depth,this.scissor=new fn(0,0,e,a),this.scissorTest=!1,this.viewport=new fn(0,0,e,a);const T={width:e,height:a,depth:w.depth},L=new Qn(T);this.textures=[];const G=w.count;for(let Y=0;Y<G;Y++)this.textures[Y]=L.clone(),this.textures[Y].isRenderTargetTexture=!0,this.textures[Y].renderTarget=this;this._setTextureOptions(w),this.depthBuffer=w.depthBuffer,this.stencilBuffer=w.stencilBuffer,this.resolveDepthBuffer=w.resolveDepthBuffer,this.resolveStencilBuffer=w.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=w.depthTexture,this.samples=w.samples,this.multiview=w.multiview}_setTextureOptions(e={}){const a={minFilter:cr,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(a.mapping=e.mapping),e.wrapS!==void 0&&(a.wrapS=e.wrapS),e.wrapT!==void 0&&(a.wrapT=e.wrapT),e.wrapR!==void 0&&(a.wrapR=e.wrapR),e.magFilter!==void 0&&(a.magFilter=e.magFilter),e.minFilter!==void 0&&(a.minFilter=e.minFilter),e.format!==void 0&&(a.format=e.format),e.type!==void 0&&(a.type=e.type),e.anisotropy!==void 0&&(a.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(a.colorSpace=e.colorSpace),e.flipY!==void 0&&(a.flipY=e.flipY),e.generateMipmaps!==void 0&&(a.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(a.internalFormat=e.internalFormat);for(let w=0;w<this.textures.length;w++)this.textures[w].setValues(a)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,a,w=1){if(this.width!==e||this.height!==a||this.depth!==w){this.width=e,this.height=a,this.depth=w;for(let T=0,L=this.textures.length;T<L;T++)this.textures[T].image.width=e,this.textures[T].image.height=a,this.textures[T].image.depth=w,this.textures[T].isArrayTexture=this.textures[T].image.depth>1;this.dispose()}this.viewport.set(0,0,e,a),this.scissor.set(0,0,e,a)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let a=0,w=e.textures.length;a<w;a++){this.textures[a]=e.textures[a].clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;const T=Object.assign({},e.textures[a].image);this.textures[a].source=new Zc(T)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class wi extends Sp{constructor(e=1,a=1,w={}){super(e,a,w),this.isWebGLRenderTarget=!0}}class zd extends Qn{constructor(e=null,a=1,w=1,T=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:a,height:w,depth:T},this.magFilter=yr,this.minFilter=yr,this.wrapR=mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Ip extends Qn{constructor(e=null,a=1,w=1,T=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:a,height:w,depth:T},this.magFilter=yr,this.minFilter=yr,this.wrapR=mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class no{constructor(e=new Je(1/0,1/0,1/0),a=new Je(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=a}set(e,a){return this.min.copy(e),this.max.copy(a),this}setFromArray(e){this.makeEmpty();for(let a=0,w=e.length;a<w;a+=3)this.expandByPoint(pr.fromArray(e,a));return this}setFromBufferAttribute(e){this.makeEmpty();for(let a=0,w=e.count;a<w;a++)this.expandByPoint(pr.fromBufferAttribute(e,a));return this}setFromPoints(e){this.makeEmpty();for(let a=0,w=e.length;a<w;a++)this.expandByPoint(e[a]);return this}setFromCenterAndSize(e,a){const w=pr.copy(a).multiplyScalar(.5);return this.min.copy(e).sub(w),this.max.copy(e).add(w),this}setFromObject(e,a=!1){return this.makeEmpty(),this.expandByObject(e,a)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,a=!1){e.updateWorldMatrix(!1,!1);const w=e.geometry;if(w!==void 0){const L=w.getAttribute("position");if(a===!0&&L!==void 0&&e.isInstancedMesh!==!0)for(let G=0,Y=L.count;G<Y;G++)e.isMesh===!0?e.getVertexPosition(G,pr):pr.fromBufferAttribute(L,G),pr.applyMatrix4(e.matrixWorld),this.expandByPoint(pr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),sa.copy(e.boundingBox)):(w.boundingBox===null&&w.computeBoundingBox(),sa.copy(w.boundingBox)),sa.applyMatrix4(e.matrixWorld),this.union(sa)}const T=e.children;for(let L=0,G=T.length;L<G;L++)this.expandByObject(T[L],a);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,a){return a.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,pr),pr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let a,w;return e.normal.x>0?(a=e.normal.x*this.min.x,w=e.normal.x*this.max.x):(a=e.normal.x*this.max.x,w=e.normal.x*this.min.x),e.normal.y>0?(a+=e.normal.y*this.min.y,w+=e.normal.y*this.max.y):(a+=e.normal.y*this.max.y,w+=e.normal.y*this.min.y),e.normal.z>0?(a+=e.normal.z*this.min.z,w+=e.normal.z*this.max.z):(a+=e.normal.z*this.max.z,w+=e.normal.z*this.min.z),a<=-e.constant&&w>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(bo),ca.subVectors(this.max,bo),Ci.subVectors(e.a,bo),Ti.subVectors(e.b,bo),Di.subVectors(e.c,bo),Vr.subVectors(Ti,Ci),Qr.subVectors(Di,Ti),ai.subVectors(Ci,Di);let a=[0,-Vr.z,Vr.y,0,-Qr.z,Qr.y,0,-ai.z,ai.y,Vr.z,0,-Vr.x,Qr.z,0,-Qr.x,ai.z,0,-ai.x,-Vr.y,Vr.x,0,-Qr.y,Qr.x,0,-ai.y,ai.x,0];return!bs(a,Ci,Ti,Di,ca)||(a=[1,0,0,0,1,0,0,0,1],!bs(a,Ci,Ti,Di,ca))?!1:(la.crossVectors(Vr,Qr),a=[la.x,la.y,la.z],bs(a,Ci,Ti,Di,ca))}clampPoint(e,a){return a.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,pr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(pr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Cr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Cr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Cr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Cr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Cr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Cr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Cr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Cr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Cr),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Cr=[new Je,new Je,new Je,new Je,new Je,new Je,new Je,new Je],pr=new Je,sa=new no,Ci=new Je,Ti=new Je,Di=new Je,Vr=new Je,Qr=new Je,ai=new Je,bo=new Je,ca=new Je,la=new Je,si=new Je;function bs(_,e,a,w,T){for(let L=0,G=_.length-3;L<=G;L+=3){si.fromArray(_,L);const Y=T.x*Math.abs(si.x)+T.y*Math.abs(si.y)+T.z*Math.abs(si.z),ce=e.dot(si),P=a.dot(si),S=w.dot(si);if(Math.max(-Math.max(ce,P,S),Math.min(ce,P,S))>Y)return!1}return!0}const Cp=new no,xo=new Je,xs=new Je;class Ja{constructor(e=new Je,a=-1){this.isSphere=!0,this.center=e,this.radius=a}set(e,a){return this.center.copy(e),this.radius=a,this}setFromPoints(e,a){const w=this.center;a!==void 0?w.copy(a):Cp.setFromPoints(e).getCenter(w);let T=0;for(let L=0,G=e.length;L<G;L++)T=Math.max(T,w.distanceToSquared(e[L]));return this.radius=Math.sqrt(T),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const a=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=a*a}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,a){const w=this.center.distanceToSquared(e);return a.copy(e),w>this.radius*this.radius&&(a.sub(this.center).normalize(),a.multiplyScalar(this.radius).add(this.center)),a}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;xo.subVectors(e,this.center);const a=xo.lengthSq();if(a>this.radius*this.radius){const w=Math.sqrt(a),T=(w-this.radius)*.5;this.center.addScaledVector(xo,T/w),this.radius+=T}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(xs.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(xo.copy(e.center).add(xs)),this.expandByPoint(xo.copy(e.center).sub(xs))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Tr=new Je,ws=new Je,da=new Je,jr=new Je,As=new Je,ua=new Je,Es=new Je;class $c{constructor(e=new Je,a=new Je(0,0,-1)){this.origin=e,this.direction=a}set(e,a){return this.origin.copy(e),this.direction.copy(a),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,a){return a.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Tr)),this}closestPointToPoint(e,a){a.subVectors(e,this.origin);const w=a.dot(this.direction);return w<0?a.copy(this.origin):a.copy(this.origin).addScaledVector(this.direction,w)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const a=Tr.subVectors(e,this.origin).dot(this.direction);return a<0?this.origin.distanceToSquared(e):(Tr.copy(this.origin).addScaledVector(this.direction,a),Tr.distanceToSquared(e))}distanceSqToSegment(e,a,w,T){ws.copy(e).add(a).multiplyScalar(.5),da.copy(a).sub(e).normalize(),jr.copy(this.origin).sub(ws);const L=e.distanceTo(a)*.5,G=-this.direction.dot(da),Y=jr.dot(this.direction),ce=-jr.dot(da),P=jr.lengthSq(),S=Math.abs(1-G*G);let c,x,t,l;if(S>0)if(c=G*ce-Y,x=G*Y-ce,l=L*S,c>=0)if(x>=-l)if(x<=l){const n=1/S;c*=n,x*=n,t=c*(c+G*x+2*Y)+x*(G*c+x+2*ce)+P}else x=L,c=Math.max(0,-(G*x+Y)),t=-c*c+x*(x+2*ce)+P;else x=-L,c=Math.max(0,-(G*x+Y)),t=-c*c+x*(x+2*ce)+P;else x<=-l?(c=Math.max(0,-(-G*L+Y)),x=c>0?-L:Math.min(Math.max(-L,-ce),L),t=-c*c+x*(x+2*ce)+P):x<=l?(c=0,x=Math.min(Math.max(-L,-ce),L),t=x*(x+2*ce)+P):(c=Math.max(0,-(G*L+Y)),x=c>0?L:Math.min(Math.max(-L,-ce),L),t=-c*c+x*(x+2*ce)+P);else x=G>0?-L:L,c=Math.max(0,-(G*x+Y)),t=-c*c+x*(x+2*ce)+P;return w&&w.copy(this.origin).addScaledVector(this.direction,c),T&&T.copy(ws).addScaledVector(da,x),t}intersectSphere(e,a){Tr.subVectors(e.center,this.origin);const w=Tr.dot(this.direction),T=Tr.dot(Tr)-w*w,L=e.radius*e.radius;if(T>L)return null;const G=Math.sqrt(L-T),Y=w-G,ce=w+G;return ce<0?null:Y<0?this.at(ce,a):this.at(Y,a)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const a=e.normal.dot(this.direction);if(a===0)return e.distanceToPoint(this.origin)===0?0:null;const w=-(this.origin.dot(e.normal)+e.constant)/a;return w>=0?w:null}intersectPlane(e,a){const w=this.distanceToPlane(e);return w===null?null:this.at(w,a)}intersectsPlane(e){const a=e.distanceToPoint(this.origin);return a===0||e.normal.dot(this.direction)*a<0}intersectBox(e,a){let w,T,L,G,Y,ce;const P=1/this.direction.x,S=1/this.direction.y,c=1/this.direction.z,x=this.origin;return P>=0?(w=(e.min.x-x.x)*P,T=(e.max.x-x.x)*P):(w=(e.max.x-x.x)*P,T=(e.min.x-x.x)*P),S>=0?(L=(e.min.y-x.y)*S,G=(e.max.y-x.y)*S):(L=(e.max.y-x.y)*S,G=(e.min.y-x.y)*S),w>G||L>T||((L>w||isNaN(w))&&(w=L),(G<T||isNaN(T))&&(T=G),c>=0?(Y=(e.min.z-x.z)*c,ce=(e.max.z-x.z)*c):(Y=(e.max.z-x.z)*c,ce=(e.min.z-x.z)*c),w>ce||Y>T)||((Y>w||w!==w)&&(w=Y),(ce<T||T!==T)&&(T=ce),T<0)?null:this.at(w>=0?w:T,a)}intersectsBox(e){return this.intersectBox(e,Tr)!==null}intersectTriangle(e,a,w,T,L){As.subVectors(a,e),ua.subVectors(w,e),Es.crossVectors(As,ua);let G=this.direction.dot(Es),Y;if(G>0){if(T)return null;Y=1}else if(G<0)Y=-1,G=-G;else return null;jr.subVectors(this.origin,e);const ce=Y*this.direction.dot(ua.crossVectors(jr,ua));if(ce<0)return null;const P=Y*this.direction.dot(As.cross(jr));if(P<0||ce+P>G)return null;const S=-Y*jr.dot(Es);return S<0?null:this.at(S/G,L)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class wn{constructor(e,a,w,T,L,G,Y,ce,P,S,c,x,t,l,n,i){wn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,a,w,T,L,G,Y,ce,P,S,c,x,t,l,n,i)}set(e,a,w,T,L,G,Y,ce,P,S,c,x,t,l,n,i){const s=this.elements;return s[0]=e,s[4]=a,s[8]=w,s[12]=T,s[1]=L,s[5]=G,s[9]=Y,s[13]=ce,s[2]=P,s[6]=S,s[10]=c,s[14]=x,s[3]=t,s[7]=l,s[11]=n,s[15]=i,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new wn().fromArray(this.elements)}copy(e){const a=this.elements,w=e.elements;return a[0]=w[0],a[1]=w[1],a[2]=w[2],a[3]=w[3],a[4]=w[4],a[5]=w[5],a[6]=w[6],a[7]=w[7],a[8]=w[8],a[9]=w[9],a[10]=w[10],a[11]=w[11],a[12]=w[12],a[13]=w[13],a[14]=w[14],a[15]=w[15],this}copyPosition(e){const a=this.elements,w=e.elements;return a[12]=w[12],a[13]=w[13],a[14]=w[14],this}setFromMatrix3(e){const a=e.elements;return this.set(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0,0,0,0,1),this}extractBasis(e,a,w){return e.setFromMatrixColumn(this,0),a.setFromMatrixColumn(this,1),w.setFromMatrixColumn(this,2),this}makeBasis(e,a,w){return this.set(e.x,a.x,w.x,0,e.y,a.y,w.y,0,e.z,a.z,w.z,0,0,0,0,1),this}extractRotation(e){const a=this.elements,w=e.elements,T=1/ki.setFromMatrixColumn(e,0).length(),L=1/ki.setFromMatrixColumn(e,1).length(),G=1/ki.setFromMatrixColumn(e,2).length();return a[0]=w[0]*T,a[1]=w[1]*T,a[2]=w[2]*T,a[3]=0,a[4]=w[4]*L,a[5]=w[5]*L,a[6]=w[6]*L,a[7]=0,a[8]=w[8]*G,a[9]=w[9]*G,a[10]=w[10]*G,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromEuler(e){const a=this.elements,w=e.x,T=e.y,L=e.z,G=Math.cos(w),Y=Math.sin(w),ce=Math.cos(T),P=Math.sin(T),S=Math.cos(L),c=Math.sin(L);if(e.order==="XYZ"){const x=G*S,t=G*c,l=Y*S,n=Y*c;a[0]=ce*S,a[4]=-ce*c,a[8]=P,a[1]=t+l*P,a[5]=x-n*P,a[9]=-Y*ce,a[2]=n-x*P,a[6]=l+t*P,a[10]=G*ce}else if(e.order==="YXZ"){const x=ce*S,t=ce*c,l=P*S,n=P*c;a[0]=x+n*Y,a[4]=l*Y-t,a[8]=G*P,a[1]=G*c,a[5]=G*S,a[9]=-Y,a[2]=t*Y-l,a[6]=n+x*Y,a[10]=G*ce}else if(e.order==="ZXY"){const x=ce*S,t=ce*c,l=P*S,n=P*c;a[0]=x-n*Y,a[4]=-G*c,a[8]=l+t*Y,a[1]=t+l*Y,a[5]=G*S,a[9]=n-x*Y,a[2]=-G*P,a[6]=Y,a[10]=G*ce}else if(e.order==="ZYX"){const x=G*S,t=G*c,l=Y*S,n=Y*c;a[0]=ce*S,a[4]=l*P-t,a[8]=x*P+n,a[1]=ce*c,a[5]=n*P+x,a[9]=t*P-l,a[2]=-P,a[6]=Y*ce,a[10]=G*ce}else if(e.order==="YZX"){const x=G*ce,t=G*P,l=Y*ce,n=Y*P;a[0]=ce*S,a[4]=n-x*c,a[8]=l*c+t,a[1]=c,a[5]=G*S,a[9]=-Y*S,a[2]=-P*S,a[6]=t*c+l,a[10]=x-n*c}else if(e.order==="XZY"){const x=G*ce,t=G*P,l=Y*ce,n=Y*P;a[0]=ce*S,a[4]=-c,a[8]=P*S,a[1]=x*c+n,a[5]=G*S,a[9]=t*c-l,a[2]=l*c-t,a[6]=Y*S,a[10]=n*c+x}return a[3]=0,a[7]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Tp,e,Dp)}lookAt(e,a,w){const T=this.elements;return Kn.subVectors(e,a),Kn.lengthSq()===0&&(Kn.z=1),Kn.normalize(),Hr.crossVectors(w,Kn),Hr.lengthSq()===0&&(Math.abs(w.z)===1?Kn.x+=1e-4:Kn.z+=1e-4,Kn.normalize(),Hr.crossVectors(w,Kn)),Hr.normalize(),pa.crossVectors(Kn,Hr),T[0]=Hr.x,T[4]=pa.x,T[8]=Kn.x,T[1]=Hr.y,T[5]=pa.y,T[9]=Kn.y,T[2]=Hr.z,T[6]=pa.z,T[10]=Kn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,a){const w=e.elements,T=a.elements,L=this.elements,G=w[0],Y=w[4],ce=w[8],P=w[12],S=w[1],c=w[5],x=w[9],t=w[13],l=w[2],n=w[6],i=w[10],s=w[14],g=w[3],d=w[7],u=w[11],f=w[15],y=T[0],h=T[4],p=T[8],r=T[12],o=T[1],m=T[5],b=T[9],E=T[13],M=T[2],D=T[6],A=T[10],v=T[14],k=T[3],J=T[7],X=T[11],te=T[15];return L[0]=G*y+Y*o+ce*M+P*k,L[4]=G*h+Y*m+ce*D+P*J,L[8]=G*p+Y*b+ce*A+P*X,L[12]=G*r+Y*E+ce*v+P*te,L[1]=S*y+c*o+x*M+t*k,L[5]=S*h+c*m+x*D+t*J,L[9]=S*p+c*b+x*A+t*X,L[13]=S*r+c*E+x*v+t*te,L[2]=l*y+n*o+i*M+s*k,L[6]=l*h+n*m+i*D+s*J,L[10]=l*p+n*b+i*A+s*X,L[14]=l*r+n*E+i*v+s*te,L[3]=g*y+d*o+u*M+f*k,L[7]=g*h+d*m+u*D+f*J,L[11]=g*p+d*b+u*A+f*X,L[15]=g*r+d*E+u*v+f*te,this}multiplyScalar(e){const a=this.elements;return a[0]*=e,a[4]*=e,a[8]*=e,a[12]*=e,a[1]*=e,a[5]*=e,a[9]*=e,a[13]*=e,a[2]*=e,a[6]*=e,a[10]*=e,a[14]*=e,a[3]*=e,a[7]*=e,a[11]*=e,a[15]*=e,this}determinant(){const e=this.elements,a=e[0],w=e[4],T=e[8],L=e[12],G=e[1],Y=e[5],ce=e[9],P=e[13],S=e[2],c=e[6],x=e[10],t=e[14],l=e[3],n=e[7],i=e[11],s=e[15];return l*(+L*ce*c-T*P*c-L*Y*x+w*P*x+T*Y*t-w*ce*t)+n*(+a*ce*t-a*P*x+L*G*x-T*G*t+T*P*S-L*ce*S)+i*(+a*P*c-a*Y*t-L*G*c+w*G*t+L*Y*S-w*P*S)+s*(-T*Y*S-a*ce*c+a*Y*x+T*G*c-w*G*x+w*ce*S)}transpose(){const e=this.elements;let a;return a=e[1],e[1]=e[4],e[4]=a,a=e[2],e[2]=e[8],e[8]=a,a=e[6],e[6]=e[9],e[9]=a,a=e[3],e[3]=e[12],e[12]=a,a=e[7],e[7]=e[13],e[13]=a,a=e[11],e[11]=e[14],e[14]=a,this}setPosition(e,a,w){const T=this.elements;return e.isVector3?(T[12]=e.x,T[13]=e.y,T[14]=e.z):(T[12]=e,T[13]=a,T[14]=w),this}invert(){const e=this.elements,a=e[0],w=e[1],T=e[2],L=e[3],G=e[4],Y=e[5],ce=e[6],P=e[7],S=e[8],c=e[9],x=e[10],t=e[11],l=e[12],n=e[13],i=e[14],s=e[15],g=c*i*P-n*x*P+n*ce*t-Y*i*t-c*ce*s+Y*x*s,d=l*x*P-S*i*P-l*ce*t+G*i*t+S*ce*s-G*x*s,u=S*n*P-l*c*P+l*Y*t-G*n*t-S*Y*s+G*c*s,f=l*c*ce-S*n*ce-l*Y*x+G*n*x+S*Y*i-G*c*i,y=a*g+w*d+T*u+L*f;if(y===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const h=1/y;return e[0]=g*h,e[1]=(n*x*L-c*i*L-n*T*t+w*i*t+c*T*s-w*x*s)*h,e[2]=(Y*i*L-n*ce*L+n*T*P-w*i*P-Y*T*s+w*ce*s)*h,e[3]=(c*ce*L-Y*x*L-c*T*P+w*x*P+Y*T*t-w*ce*t)*h,e[4]=d*h,e[5]=(S*i*L-l*x*L+l*T*t-a*i*t-S*T*s+a*x*s)*h,e[6]=(l*ce*L-G*i*L-l*T*P+a*i*P+G*T*s-a*ce*s)*h,e[7]=(G*x*L-S*ce*L+S*T*P-a*x*P-G*T*t+a*ce*t)*h,e[8]=u*h,e[9]=(l*c*L-S*n*L-l*w*t+a*n*t+S*w*s-a*c*s)*h,e[10]=(G*n*L-l*Y*L+l*w*P-a*n*P-G*w*s+a*Y*s)*h,e[11]=(S*Y*L-G*c*L-S*w*P+a*c*P+G*w*t-a*Y*t)*h,e[12]=f*h,e[13]=(S*n*T-l*c*T+l*w*x-a*n*x-S*w*i+a*c*i)*h,e[14]=(l*Y*T-G*n*T-l*w*ce+a*n*ce+G*w*i-a*Y*i)*h,e[15]=(G*c*T-S*Y*T+S*w*ce-a*c*ce-G*w*x+a*Y*x)*h,this}scale(e){const a=this.elements,w=e.x,T=e.y,L=e.z;return a[0]*=w,a[4]*=T,a[8]*=L,a[1]*=w,a[5]*=T,a[9]*=L,a[2]*=w,a[6]*=T,a[10]*=L,a[3]*=w,a[7]*=T,a[11]*=L,this}getMaxScaleOnAxis(){const e=this.elements,a=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],w=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],T=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(a,w,T))}makeTranslation(e,a,w){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,a,0,0,1,w,0,0,0,1),this}makeRotationX(e){const a=Math.cos(e),w=Math.sin(e);return this.set(1,0,0,0,0,a,-w,0,0,w,a,0,0,0,0,1),this}makeRotationY(e){const a=Math.cos(e),w=Math.sin(e);return this.set(a,0,w,0,0,1,0,0,-w,0,a,0,0,0,0,1),this}makeRotationZ(e){const a=Math.cos(e),w=Math.sin(e);return this.set(a,-w,0,0,w,a,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,a){const w=Math.cos(a),T=Math.sin(a),L=1-w,G=e.x,Y=e.y,ce=e.z,P=L*G,S=L*Y;return this.set(P*G+w,P*Y-T*ce,P*ce+T*Y,0,P*Y+T*ce,S*Y+w,S*ce-T*G,0,P*ce-T*Y,S*ce+T*G,L*ce*ce+w,0,0,0,0,1),this}makeScale(e,a,w){return this.set(e,0,0,0,0,a,0,0,0,0,w,0,0,0,0,1),this}makeShear(e,a,w,T,L,G){return this.set(1,w,L,0,e,1,G,0,a,T,1,0,0,0,0,1),this}compose(e,a,w){const T=this.elements,L=a._x,G=a._y,Y=a._z,ce=a._w,P=L+L,S=G+G,c=Y+Y,x=L*P,t=L*S,l=L*c,n=G*S,i=G*c,s=Y*c,g=ce*P,d=ce*S,u=ce*c,f=w.x,y=w.y,h=w.z;return T[0]=(1-(n+s))*f,T[1]=(t+u)*f,T[2]=(l-d)*f,T[3]=0,T[4]=(t-u)*y,T[5]=(1-(x+s))*y,T[6]=(i+g)*y,T[7]=0,T[8]=(l+d)*h,T[9]=(i-g)*h,T[10]=(1-(x+n))*h,T[11]=0,T[12]=e.x,T[13]=e.y,T[14]=e.z,T[15]=1,this}decompose(e,a,w){const T=this.elements;let L=ki.set(T[0],T[1],T[2]).length();const G=ki.set(T[4],T[5],T[6]).length(),Y=ki.set(T[8],T[9],T[10]).length();this.determinant()<0&&(L=-L),e.x=T[12],e.y=T[13],e.z=T[14],hr.copy(this);const P=1/L,S=1/G,c=1/Y;return hr.elements[0]*=P,hr.elements[1]*=P,hr.elements[2]*=P,hr.elements[4]*=S,hr.elements[5]*=S,hr.elements[6]*=S,hr.elements[8]*=c,hr.elements[9]*=c,hr.elements[10]*=c,a.setFromRotationMatrix(hr),w.x=L,w.y=G,w.z=Y,this}makePerspective(e,a,w,T,L,G,Y=br,ce=!1){const P=this.elements,S=2*L/(a-e),c=2*L/(w-T),x=(a+e)/(a-e),t=(w+T)/(w-T);let l,n;if(ce)l=L/(G-L),n=G*L/(G-L);else if(Y===br)l=-(G+L)/(G-L),n=-2*G*L/(G-L);else if(Y===Ga)l=-G/(G-L),n=-G*L/(G-L);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+Y);return P[0]=S,P[4]=0,P[8]=x,P[12]=0,P[1]=0,P[5]=c,P[9]=t,P[13]=0,P[2]=0,P[6]=0,P[10]=l,P[14]=n,P[3]=0,P[7]=0,P[11]=-1,P[15]=0,this}makeOrthographic(e,a,w,T,L,G,Y=br,ce=!1){const P=this.elements,S=2/(a-e),c=2/(w-T),x=-(a+e)/(a-e),t=-(w+T)/(w-T);let l,n;if(ce)l=1/(G-L),n=G/(G-L);else if(Y===br)l=-2/(G-L),n=-(G+L)/(G-L);else if(Y===Ga)l=-1/(G-L),n=-L/(G-L);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+Y);return P[0]=S,P[4]=0,P[8]=0,P[12]=x,P[1]=0,P[5]=c,P[9]=0,P[13]=t,P[2]=0,P[6]=0,P[10]=l,P[14]=n,P[3]=0,P[7]=0,P[11]=0,P[15]=1,this}equals(e){const a=this.elements,w=e.elements;for(let T=0;T<16;T++)if(a[T]!==w[T])return!1;return!0}fromArray(e,a=0){for(let w=0;w<16;w++)this.elements[w]=e[w+a];return this}toArray(e=[],a=0){const w=this.elements;return e[a]=w[0],e[a+1]=w[1],e[a+2]=w[2],e[a+3]=w[3],e[a+4]=w[4],e[a+5]=w[5],e[a+6]=w[6],e[a+7]=w[7],e[a+8]=w[8],e[a+9]=w[9],e[a+10]=w[10],e[a+11]=w[11],e[a+12]=w[12],e[a+13]=w[13],e[a+14]=w[14],e[a+15]=w[15],e}}const ki=new Je,hr=new wn,Tp=new Je(0,0,0),Dp=new Je(1,1,1),Hr=new Je,pa=new Je,Kn=new Je,Cl=new wn,Tl=new xi;class Nr{constructor(e=0,a=0,w=0,T=Nr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=a,this._z=w,this._order=T}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,a,w,T=this._order){return this._x=e,this._y=a,this._z=w,this._order=T,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,a=this._order,w=!0){const T=e.elements,L=T[0],G=T[4],Y=T[8],ce=T[1],P=T[5],S=T[9],c=T[2],x=T[6],t=T[10];switch(a){case"XYZ":this._y=Math.asin($t(Y,-1,1)),Math.abs(Y)<.9999999?(this._x=Math.atan2(-S,t),this._z=Math.atan2(-G,L)):(this._x=Math.atan2(x,P),this._z=0);break;case"YXZ":this._x=Math.asin(-$t(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(Y,t),this._z=Math.atan2(ce,P)):(this._y=Math.atan2(-c,L),this._z=0);break;case"ZXY":this._x=Math.asin($t(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-c,t),this._z=Math.atan2(-G,P)):(this._y=0,this._z=Math.atan2(ce,L));break;case"ZYX":this._y=Math.asin(-$t(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(x,t),this._z=Math.atan2(ce,L)):(this._x=0,this._z=Math.atan2(-G,P));break;case"YZX":this._z=Math.asin($t(ce,-1,1)),Math.abs(ce)<.9999999?(this._x=Math.atan2(-S,P),this._y=Math.atan2(-c,L)):(this._x=0,this._y=Math.atan2(Y,t));break;case"XZY":this._z=Math.asin(-$t(G,-1,1)),Math.abs(G)<.9999999?(this._x=Math.atan2(x,P),this._y=Math.atan2(Y,L)):(this._x=Math.atan2(-S,t),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+a)}return this._order=a,w===!0&&this._onChangeCallback(),this}setFromQuaternion(e,a,w){return Cl.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Cl,a,w)}setFromVector3(e,a=this._order){return this.set(e.x,e.y,e.z,a)}reorder(e){return Tl.setFromEuler(this),this.setFromQuaternion(Tl,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],a=0){return e[a]=this._x,e[a+1]=this._y,e[a+2]=this._z,e[a+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Nr.DEFAULT_ORDER="XYZ";class Gd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let kp=0;const Dl=new Je,Pi=new xi,Dr=new wn,ha=new Je,wo=new Je,Pp=new Je,Lp=new xi,kl=new Je(1,0,0),Pl=new Je(0,1,0),Ll=new Je(0,0,1),Bl={type:"added"},Bp={type:"removed"},Li={type:"childadded",child:null},_s={type:"childremoved",child:null};class Bn extends Ei{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:kp++}),this.uuid=Ho(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bn.DEFAULT_UP.clone();const e=new Je,a=new Nr,w=new xi,T=new Je(1,1,1);function L(){w.setFromEuler(a,!1)}function G(){a.setFromQuaternion(w,void 0,!1)}a._onChange(L),w._onChange(G),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:a},quaternion:{configurable:!0,enumerable:!0,value:w},scale:{configurable:!0,enumerable:!0,value:T},modelViewMatrix:{value:new wn},normalMatrix:{value:new Wt}}),this.matrix=new wn,this.matrixWorld=new wn,this.matrixAutoUpdate=Bn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Gd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,a){this.quaternion.setFromAxisAngle(e,a)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,a){return Pi.setFromAxisAngle(e,a),this.quaternion.multiply(Pi),this}rotateOnWorldAxis(e,a){return Pi.setFromAxisAngle(e,a),this.quaternion.premultiply(Pi),this}rotateX(e){return this.rotateOnAxis(kl,e)}rotateY(e){return this.rotateOnAxis(Pl,e)}rotateZ(e){return this.rotateOnAxis(Ll,e)}translateOnAxis(e,a){return Dl.copy(e).applyQuaternion(this.quaternion),this.position.add(Dl.multiplyScalar(a)),this}translateX(e){return this.translateOnAxis(kl,e)}translateY(e){return this.translateOnAxis(Pl,e)}translateZ(e){return this.translateOnAxis(Ll,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Dr.copy(this.matrixWorld).invert())}lookAt(e,a,w){e.isVector3?ha.copy(e):ha.set(e,a,w);const T=this.parent;this.updateWorldMatrix(!0,!1),wo.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Dr.lookAt(wo,ha,this.up):Dr.lookAt(ha,wo,this.up),this.quaternion.setFromRotationMatrix(Dr),T&&(Dr.extractRotation(T.matrixWorld),Pi.setFromRotationMatrix(Dr),this.quaternion.premultiply(Pi.invert()))}add(e){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.add(arguments[a]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Bl),Li.child=e,this.dispatchEvent(Li),Li.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let w=0;w<arguments.length;w++)this.remove(arguments[w]);return this}const a=this.children.indexOf(e);return a!==-1&&(e.parent=null,this.children.splice(a,1),e.dispatchEvent(Bp),_s.child=e,this.dispatchEvent(_s),_s.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Dr.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Dr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Dr),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Bl),Li.child=e,this.dispatchEvent(Li),Li.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,a){if(this[e]===a)return this;for(let w=0,T=this.children.length;w<T;w++){const G=this.children[w].getObjectByProperty(e,a);if(G!==void 0)return G}}getObjectsByProperty(e,a,w=[]){this[e]===a&&w.push(this);const T=this.children;for(let L=0,G=T.length;L<G;L++)T[L].getObjectsByProperty(e,a,w);return w}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wo,e,Pp),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wo,Lp,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const a=this.matrixWorld.elements;return e.set(a[8],a[9],a[10]).normalize()}raycast(){}traverse(e){e(this);const a=this.children;for(let w=0,T=a.length;w<T;w++)a[w].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const a=this.children;for(let w=0,T=a.length;w<T;w++)a[w].traverseVisible(e)}traverseAncestors(e){const a=this.parent;a!==null&&(e(a),a.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const a=this.children;for(let w=0,T=a.length;w<T;w++)a[w].updateMatrixWorld(e)}updateWorldMatrix(e,a){const w=this.parent;if(e===!0&&w!==null&&w.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),a===!0){const T=this.children;for(let L=0,G=T.length;L<G;L++)T[L].updateWorldMatrix(!1,!0)}}toJSON(e){const a=e===void 0||typeof e=="string",w={};a&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},w.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const T={};T.uuid=this.uuid,T.type=this.type,this.name!==""&&(T.name=this.name),this.castShadow===!0&&(T.castShadow=!0),this.receiveShadow===!0&&(T.receiveShadow=!0),this.visible===!1&&(T.visible=!1),this.frustumCulled===!1&&(T.frustumCulled=!1),this.renderOrder!==0&&(T.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(T.userData=this.userData),T.layers=this.layers.mask,T.matrix=this.matrix.toArray(),T.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(T.matrixAutoUpdate=!1),this.isInstancedMesh&&(T.type="InstancedMesh",T.count=this.count,T.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(T.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(T.type="BatchedMesh",T.perObjectFrustumCulled=this.perObjectFrustumCulled,T.sortObjects=this.sortObjects,T.drawRanges=this._drawRanges,T.reservedRanges=this._reservedRanges,T.geometryInfo=this._geometryInfo.map(Y=>({...Y,boundingBox:Y.boundingBox?Y.boundingBox.toJSON():void 0,boundingSphere:Y.boundingSphere?Y.boundingSphere.toJSON():void 0})),T.instanceInfo=this._instanceInfo.map(Y=>({...Y})),T.availableInstanceIds=this._availableInstanceIds.slice(),T.availableGeometryIds=this._availableGeometryIds.slice(),T.nextIndexStart=this._nextIndexStart,T.nextVertexStart=this._nextVertexStart,T.geometryCount=this._geometryCount,T.maxInstanceCount=this._maxInstanceCount,T.maxVertexCount=this._maxVertexCount,T.maxIndexCount=this._maxIndexCount,T.geometryInitialized=this._geometryInitialized,T.matricesTexture=this._matricesTexture.toJSON(e),T.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(T.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(T.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(T.boundingBox=this.boundingBox.toJSON()));function L(Y,ce){return Y[ce.uuid]===void 0&&(Y[ce.uuid]=ce.toJSON(e)),ce.uuid}if(this.isScene)this.background&&(this.background.isColor?T.background=this.background.toJSON():this.background.isTexture&&(T.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(T.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){T.geometry=L(e.geometries,this.geometry);const Y=this.geometry.parameters;if(Y!==void 0&&Y.shapes!==void 0){const ce=Y.shapes;if(Array.isArray(ce))for(let P=0,S=ce.length;P<S;P++){const c=ce[P];L(e.shapes,c)}else L(e.shapes,ce)}}if(this.isSkinnedMesh&&(T.bindMode=this.bindMode,T.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(L(e.skeletons,this.skeleton),T.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const Y=[];for(let ce=0,P=this.material.length;ce<P;ce++)Y.push(L(e.materials,this.material[ce]));T.material=Y}else T.material=L(e.materials,this.material);if(this.children.length>0){T.children=[];for(let Y=0;Y<this.children.length;Y++)T.children.push(this.children[Y].toJSON(e).object)}if(this.animations.length>0){T.animations=[];for(let Y=0;Y<this.animations.length;Y++){const ce=this.animations[Y];T.animations.push(L(e.animations,ce))}}if(a){const Y=G(e.geometries),ce=G(e.materials),P=G(e.textures),S=G(e.images),c=G(e.shapes),x=G(e.skeletons),t=G(e.animations),l=G(e.nodes);Y.length>0&&(w.geometries=Y),ce.length>0&&(w.materials=ce),P.length>0&&(w.textures=P),S.length>0&&(w.images=S),c.length>0&&(w.shapes=c),x.length>0&&(w.skeletons=x),t.length>0&&(w.animations=t),l.length>0&&(w.nodes=l)}return w.object=T,w;function G(Y){const ce=[];for(const P in Y){const S=Y[P];delete S.metadata,ce.push(S)}return ce}}clone(e){return new this.constructor().copy(this,e)}copy(e,a=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),a===!0)for(let w=0;w<e.children.length;w++){const T=e.children[w];this.add(T.clone())}return this}}Bn.DEFAULT_UP=new Je(0,1,0);Bn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const fr=new Je,kr=new Je,Ms=new Je,Pr=new Je,Bi=new Je,Fi=new Je,Fl=new Je,Ss=new Je,Is=new Je,Cs=new Je,Ts=new fn,Ds=new fn,ks=new fn;class sr{constructor(e=new Je,a=new Je,w=new Je){this.a=e,this.b=a,this.c=w}static getNormal(e,a,w,T){T.subVectors(w,a),fr.subVectors(e,a),T.cross(fr);const L=T.lengthSq();return L>0?T.multiplyScalar(1/Math.sqrt(L)):T.set(0,0,0)}static getBarycoord(e,a,w,T,L){fr.subVectors(T,a),kr.subVectors(w,a),Ms.subVectors(e,a);const G=fr.dot(fr),Y=fr.dot(kr),ce=fr.dot(Ms),P=kr.dot(kr),S=kr.dot(Ms),c=G*P-Y*Y;if(c===0)return L.set(0,0,0),null;const x=1/c,t=(P*ce-Y*S)*x,l=(G*S-Y*ce)*x;return L.set(1-t-l,l,t)}static containsPoint(e,a,w,T){return this.getBarycoord(e,a,w,T,Pr)===null?!1:Pr.x>=0&&Pr.y>=0&&Pr.x+Pr.y<=1}static getInterpolation(e,a,w,T,L,G,Y,ce){return this.getBarycoord(e,a,w,T,Pr)===null?(ce.x=0,ce.y=0,"z"in ce&&(ce.z=0),"w"in ce&&(ce.w=0),null):(ce.setScalar(0),ce.addScaledVector(L,Pr.x),ce.addScaledVector(G,Pr.y),ce.addScaledVector(Y,Pr.z),ce)}static getInterpolatedAttribute(e,a,w,T,L,G){return Ts.setScalar(0),Ds.setScalar(0),ks.setScalar(0),Ts.fromBufferAttribute(e,a),Ds.fromBufferAttribute(e,w),ks.fromBufferAttribute(e,T),G.setScalar(0),G.addScaledVector(Ts,L.x),G.addScaledVector(Ds,L.y),G.addScaledVector(ks,L.z),G}static isFrontFacing(e,a,w,T){return fr.subVectors(w,a),kr.subVectors(e,a),fr.cross(kr).dot(T)<0}set(e,a,w){return this.a.copy(e),this.b.copy(a),this.c.copy(w),this}setFromPointsAndIndices(e,a,w,T){return this.a.copy(e[a]),this.b.copy(e[w]),this.c.copy(e[T]),this}setFromAttributeAndIndices(e,a,w,T){return this.a.fromBufferAttribute(e,a),this.b.fromBufferAttribute(e,w),this.c.fromBufferAttribute(e,T),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return fr.subVectors(this.c,this.b),kr.subVectors(this.a,this.b),fr.cross(kr).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return sr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,a){return sr.getBarycoord(e,this.a,this.b,this.c,a)}getInterpolation(e,a,w,T,L){return sr.getInterpolation(e,this.a,this.b,this.c,a,w,T,L)}containsPoint(e){return sr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return sr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,a){const w=this.a,T=this.b,L=this.c;let G,Y;Bi.subVectors(T,w),Fi.subVectors(L,w),Ss.subVectors(e,w);const ce=Bi.dot(Ss),P=Fi.dot(Ss);if(ce<=0&&P<=0)return a.copy(w);Is.subVectors(e,T);const S=Bi.dot(Is),c=Fi.dot(Is);if(S>=0&&c<=S)return a.copy(T);const x=ce*c-S*P;if(x<=0&&ce>=0&&S<=0)return G=ce/(ce-S),a.copy(w).addScaledVector(Bi,G);Cs.subVectors(e,L);const t=Bi.dot(Cs),l=Fi.dot(Cs);if(l>=0&&t<=l)return a.copy(L);const n=t*P-ce*l;if(n<=0&&P>=0&&l<=0)return Y=P/(P-l),a.copy(w).addScaledVector(Fi,Y);const i=S*l-t*c;if(i<=0&&c-S>=0&&t-l>=0)return Fl.subVectors(L,T),Y=(c-S)/(c-S+(t-l)),a.copy(T).addScaledVector(Fl,Y);const s=1/(i+n+x);return G=n*s,Y=x*s,a.copy(w).addScaledVector(Bi,G).addScaledVector(Fi,Y)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Vd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Yr={h:0,s:0,l:0},fa={h:0,s:0,l:0};function Ps(_,e,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?_+(e-_)*6*a:a<1/2?e:a<2/3?_+(e-_)*6*(2/3-a):_}class rn{constructor(e,a,w){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,a,w)}set(e,a,w){if(a===void 0&&w===void 0){const T=e;T&&T.isColor?this.copy(T):typeof T=="number"?this.setHex(T):typeof T=="string"&&this.setStyle(T)}else this.setRGB(e,a,w);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,a=ar){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,an.colorSpaceToWorking(this,a),this}setRGB(e,a,w,T=an.workingColorSpace){return this.r=e,this.g=a,this.b=w,an.colorSpaceToWorking(this,T),this}setHSL(e,a,w,T=an.workingColorSpace){if(e=vp(e,1),a=$t(a,0,1),w=$t(w,0,1),a===0)this.r=this.g=this.b=w;else{const L=w<=.5?w*(1+a):w+a-w*a,G=2*w-L;this.r=Ps(G,L,e+1/3),this.g=Ps(G,L,e),this.b=Ps(G,L,e-1/3)}return an.colorSpaceToWorking(this,T),this}setStyle(e,a=ar){function w(L){L!==void 0&&parseFloat(L)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let T;if(T=/^(\w+)\(([^\)]*)\)/.exec(e)){let L;const G=T[1],Y=T[2];switch(G){case"rgb":case"rgba":if(L=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(Y))return w(L[4]),this.setRGB(Math.min(255,parseInt(L[1],10))/255,Math.min(255,parseInt(L[2],10))/255,Math.min(255,parseInt(L[3],10))/255,a);if(L=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(Y))return w(L[4]),this.setRGB(Math.min(100,parseInt(L[1],10))/100,Math.min(100,parseInt(L[2],10))/100,Math.min(100,parseInt(L[3],10))/100,a);break;case"hsl":case"hsla":if(L=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(Y))return w(L[4]),this.setHSL(parseFloat(L[1])/360,parseFloat(L[2])/100,parseFloat(L[3])/100,a);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(T=/^\#([A-Fa-f\d]+)$/.exec(e)){const L=T[1],G=L.length;if(G===3)return this.setRGB(parseInt(L.charAt(0),16)/15,parseInt(L.charAt(1),16)/15,parseInt(L.charAt(2),16)/15,a);if(G===6)return this.setHex(parseInt(L,16),a);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,a);return this}setColorName(e,a=ar){const w=Vd[e.toLowerCase()];return w!==void 0?this.setHex(w,a):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Or(e.r),this.g=Or(e.g),this.b=Or(e.b),this}copyLinearToSRGB(e){return this.r=Hi(e.r),this.g=Hi(e.g),this.b=Hi(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ar){return an.workingToColorSpace(qn.copy(this),e),Math.round($t(qn.r*255,0,255))*65536+Math.round($t(qn.g*255,0,255))*256+Math.round($t(qn.b*255,0,255))}getHexString(e=ar){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,a=an.workingColorSpace){an.workingToColorSpace(qn.copy(this),a);const w=qn.r,T=qn.g,L=qn.b,G=Math.max(w,T,L),Y=Math.min(w,T,L);let ce,P;const S=(Y+G)/2;if(Y===G)ce=0,P=0;else{const c=G-Y;switch(P=S<=.5?c/(G+Y):c/(2-G-Y),G){case w:ce=(T-L)/c+(T<L?6:0);break;case T:ce=(L-w)/c+2;break;case L:ce=(w-T)/c+4;break}ce/=6}return e.h=ce,e.s=P,e.l=S,e}getRGB(e,a=an.workingColorSpace){return an.workingToColorSpace(qn.copy(this),a),e.r=qn.r,e.g=qn.g,e.b=qn.b,e}getStyle(e=ar){an.workingToColorSpace(qn.copy(this),e);const a=qn.r,w=qn.g,T=qn.b;return e!==ar?`color(${e} ${a.toFixed(3)} ${w.toFixed(3)} ${T.toFixed(3)})`:`rgb(${Math.round(a*255)},${Math.round(w*255)},${Math.round(T*255)})`}offsetHSL(e,a,w){return this.getHSL(Yr),this.setHSL(Yr.h+e,Yr.s+a,Yr.l+w)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,a){return this.r=e.r+a.r,this.g=e.g+a.g,this.b=e.b+a.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,a){return this.r+=(e.r-this.r)*a,this.g+=(e.g-this.g)*a,this.b+=(e.b-this.b)*a,this}lerpColors(e,a,w){return this.r=e.r+(a.r-e.r)*w,this.g=e.g+(a.g-e.g)*w,this.b=e.b+(a.b-e.b)*w,this}lerpHSL(e,a){this.getHSL(Yr),e.getHSL(fa);const w=fs(Yr.h,fa.h,a),T=fs(Yr.s,fa.s,a),L=fs(Yr.l,fa.l,a);return this.setHSL(w,T,L),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const a=this.r,w=this.g,T=this.b,L=e.elements;return this.r=L[0]*a+L[3]*w+L[6]*T,this.g=L[1]*a+L[4]*w+L[7]*T,this.b=L[2]*a+L[5]*w+L[8]*T,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,a=0){return this.r=e[a],this.g=e[a+1],this.b=e[a+2],this}toArray(e=[],a=0){return e[a]=this.r,e[a+1]=this.g,e[a+2]=this.b,e}fromBufferAttribute(e,a){return this.r=e.getX(a),this.g=e.getY(a),this.b=e.getZ(a),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const qn=new rn;rn.NAMES=Vd;let Fp=0;class Yo extends Ei{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Fp++}),this.uuid=Ho(),this.name="",this.type="Material",this.blending=Qi,this.side=ei,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=$s,this.blendDst=ec,this.blendEquation=fi,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new rn(0,0,0),this.blendAlpha=0,this.depthFunc=Wi,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=wl,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Si,this.stencilZFail=Si,this.stencilZPass=Si,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const a in e){const w=e[a];if(w===void 0){console.warn(`THREE.Material: parameter '${a}' has value of undefined.`);continue}const T=this[a];if(T===void 0){console.warn(`THREE.Material: '${a}' is not a property of THREE.${this.type}.`);continue}T&&T.isColor?T.set(w):T&&T.isVector3&&w&&w.isVector3?T.copy(w):this[a]=w}}toJSON(e){const a=e===void 0||typeof e=="string";a&&(e={textures:{},images:{}});const w={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};w.uuid=this.uuid,w.type=this.type,this.name!==""&&(w.name=this.name),this.color&&this.color.isColor&&(w.color=this.color.getHex()),this.roughness!==void 0&&(w.roughness=this.roughness),this.metalness!==void 0&&(w.metalness=this.metalness),this.sheen!==void 0&&(w.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(w.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(w.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(w.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(w.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(w.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(w.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(w.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(w.shininess=this.shininess),this.clearcoat!==void 0&&(w.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(w.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(w.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(w.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(w.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,w.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(w.dispersion=this.dispersion),this.iridescence!==void 0&&(w.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(w.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(w.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(w.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(w.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(w.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(w.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(w.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(w.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(w.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(w.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(w.lightMap=this.lightMap.toJSON(e).uuid,w.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(w.aoMap=this.aoMap.toJSON(e).uuid,w.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(w.bumpMap=this.bumpMap.toJSON(e).uuid,w.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(w.normalMap=this.normalMap.toJSON(e).uuid,w.normalMapType=this.normalMapType,w.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(w.displacementMap=this.displacementMap.toJSON(e).uuid,w.displacementScale=this.displacementScale,w.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(w.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(w.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(w.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(w.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(w.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(w.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(w.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(w.combine=this.combine)),this.envMapRotation!==void 0&&(w.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(w.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(w.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(w.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(w.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(w.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(w.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(w.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(w.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(w.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(w.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(w.size=this.size),this.shadowSide!==null&&(w.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(w.sizeAttenuation=this.sizeAttenuation),this.blending!==Qi&&(w.blending=this.blending),this.side!==ei&&(w.side=this.side),this.vertexColors===!0&&(w.vertexColors=!0),this.opacity<1&&(w.opacity=this.opacity),this.transparent===!0&&(w.transparent=!0),this.blendSrc!==$s&&(w.blendSrc=this.blendSrc),this.blendDst!==ec&&(w.blendDst=this.blendDst),this.blendEquation!==fi&&(w.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(w.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(w.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(w.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(w.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(w.blendAlpha=this.blendAlpha),this.depthFunc!==Wi&&(w.depthFunc=this.depthFunc),this.depthTest===!1&&(w.depthTest=this.depthTest),this.depthWrite===!1&&(w.depthWrite=this.depthWrite),this.colorWrite===!1&&(w.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(w.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==wl&&(w.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(w.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(w.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Si&&(w.stencilFail=this.stencilFail),this.stencilZFail!==Si&&(w.stencilZFail=this.stencilZFail),this.stencilZPass!==Si&&(w.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(w.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(w.rotation=this.rotation),this.polygonOffset===!0&&(w.polygonOffset=!0),this.polygonOffsetFactor!==0&&(w.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(w.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(w.linewidth=this.linewidth),this.dashSize!==void 0&&(w.dashSize=this.dashSize),this.gapSize!==void 0&&(w.gapSize=this.gapSize),this.scale!==void 0&&(w.scale=this.scale),this.dithering===!0&&(w.dithering=!0),this.alphaTest>0&&(w.alphaTest=this.alphaTest),this.alphaHash===!0&&(w.alphaHash=!0),this.alphaToCoverage===!0&&(w.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(w.premultipliedAlpha=!0),this.forceSinglePass===!0&&(w.forceSinglePass=!0),this.wireframe===!0&&(w.wireframe=!0),this.wireframeLinewidth>1&&(w.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(w.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(w.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(w.flatShading=!0),this.visible===!1&&(w.visible=!1),this.toneMapped===!1&&(w.toneMapped=!1),this.fog===!1&&(w.fog=!1),Object.keys(this.userData).length>0&&(w.userData=this.userData);function T(L){const G=[];for(const Y in L){const ce=L[Y];delete ce.metadata,G.push(ce)}return G}if(a){const L=T(e.textures),G=T(e.images);L.length>0&&(w.textures=L),G.length>0&&(w.images=G)}return w}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const a=e.clippingPlanes;let w=null;if(a!==null){const T=a.length;w=new Array(T);for(let L=0;L!==T;++L)w[L]=a[L].clone()}return this.clippingPlanes=w,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Za extends Yo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new rn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Nr,this.combine=Td,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const En=new Je,ga=new Yt;let Op=0;class xr{constructor(e,a,w=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Op++}),this.name="",this.array=e,this.itemSize=a,this.count=e!==void 0?e.length/a:0,this.normalized=w,this.usage=Al,this.updateRanges=[],this.gpuType=Fr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,a){this.updateRanges.push({start:e,count:a})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,a,w){e*=this.itemSize,w*=a.itemSize;for(let T=0,L=this.itemSize;T<L;T++)this.array[e+T]=a.array[w+T];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let a=0,w=this.count;a<w;a++)ga.fromBufferAttribute(this,a),ga.applyMatrix3(e),this.setXY(a,ga.x,ga.y);else if(this.itemSize===3)for(let a=0,w=this.count;a<w;a++)En.fromBufferAttribute(this,a),En.applyMatrix3(e),this.setXYZ(a,En.x,En.y,En.z);return this}applyMatrix4(e){for(let a=0,w=this.count;a<w;a++)En.fromBufferAttribute(this,a),En.applyMatrix4(e),this.setXYZ(a,En.x,En.y,En.z);return this}applyNormalMatrix(e){for(let a=0,w=this.count;a<w;a++)En.fromBufferAttribute(this,a),En.applyNormalMatrix(e),this.setXYZ(a,En.x,En.y,En.z);return this}transformDirection(e){for(let a=0,w=this.count;a<w;a++)En.fromBufferAttribute(this,a),En.transformDirection(e),this.setXYZ(a,En.x,En.y,En.z);return this}set(e,a=0){return this.array.set(e,a),this}getComponent(e,a){let w=this.array[e*this.itemSize+a];return this.normalized&&(w=vo(w,this.array)),w}setComponent(e,a,w){return this.normalized&&(w=jn(w,this.array)),this.array[e*this.itemSize+a]=w,this}getX(e){let a=this.array[e*this.itemSize];return this.normalized&&(a=vo(a,this.array)),a}setX(e,a){return this.normalized&&(a=jn(a,this.array)),this.array[e*this.itemSize]=a,this}getY(e){let a=this.array[e*this.itemSize+1];return this.normalized&&(a=vo(a,this.array)),a}setY(e,a){return this.normalized&&(a=jn(a,this.array)),this.array[e*this.itemSize+1]=a,this}getZ(e){let a=this.array[e*this.itemSize+2];return this.normalized&&(a=vo(a,this.array)),a}setZ(e,a){return this.normalized&&(a=jn(a,this.array)),this.array[e*this.itemSize+2]=a,this}getW(e){let a=this.array[e*this.itemSize+3];return this.normalized&&(a=vo(a,this.array)),a}setW(e,a){return this.normalized&&(a=jn(a,this.array)),this.array[e*this.itemSize+3]=a,this}setXY(e,a,w){return e*=this.itemSize,this.normalized&&(a=jn(a,this.array),w=jn(w,this.array)),this.array[e+0]=a,this.array[e+1]=w,this}setXYZ(e,a,w,T){return e*=this.itemSize,this.normalized&&(a=jn(a,this.array),w=jn(w,this.array),T=jn(T,this.array)),this.array[e+0]=a,this.array[e+1]=w,this.array[e+2]=T,this}setXYZW(e,a,w,T,L){return e*=this.itemSize,this.normalized&&(a=jn(a,this.array),w=jn(w,this.array),T=jn(T,this.array),L=jn(L,this.array)),this.array[e+0]=a,this.array[e+1]=w,this.array[e+2]=T,this.array[e+3]=L,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Al&&(e.usage=this.usage),e}}class Qd extends xr{constructor(e,a,w){super(new Uint16Array(e),a,w)}}class jd extends xr{constructor(e,a,w){super(new Uint32Array(e),a,w)}}class er extends xr{constructor(e,a,w){super(new Float32Array(e),a,w)}}let Rp=0;const or=new wn,Ls=new Bn,Oi=new Je,Jn=new no,Ao=new no,Pn=new Je;class Ar extends Ei{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Rp++}),this.uuid=Ho(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(qd(e)?jd:Qd)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,a){return this.attributes[e]=a,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,a,w=0){this.groups.push({start:e,count:a,materialIndex:w})}clearGroups(){this.groups=[]}setDrawRange(e,a){this.drawRange.start=e,this.drawRange.count=a}applyMatrix4(e){const a=this.attributes.position;a!==void 0&&(a.applyMatrix4(e),a.needsUpdate=!0);const w=this.attributes.normal;if(w!==void 0){const L=new Wt().getNormalMatrix(e);w.applyNormalMatrix(L),w.needsUpdate=!0}const T=this.attributes.tangent;return T!==void 0&&(T.transformDirection(e),T.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return or.makeRotationFromQuaternion(e),this.applyMatrix4(or),this}rotateX(e){return or.makeRotationX(e),this.applyMatrix4(or),this}rotateY(e){return or.makeRotationY(e),this.applyMatrix4(or),this}rotateZ(e){return or.makeRotationZ(e),this.applyMatrix4(or),this}translate(e,a,w){return or.makeTranslation(e,a,w),this.applyMatrix4(or),this}scale(e,a,w){return or.makeScale(e,a,w),this.applyMatrix4(or),this}lookAt(e){return Ls.lookAt(e),Ls.updateMatrix(),this.applyMatrix4(Ls.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Oi).negate(),this.translate(Oi.x,Oi.y,Oi.z),this}setFromPoints(e){const a=this.getAttribute("position");if(a===void 0){const w=[];for(let T=0,L=e.length;T<L;T++){const G=e[T];w.push(G.x,G.y,G.z||0)}this.setAttribute("position",new er(w,3))}else{const w=Math.min(e.length,a.count);for(let T=0;T<w;T++){const L=e[T];a.setXYZ(T,L.x,L.y,L.z||0)}e.length>a.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),a.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new no);const e=this.attributes.position,a=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Je(-1/0,-1/0,-1/0),new Je(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),a)for(let w=0,T=a.length;w<T;w++){const L=a[w];Jn.setFromBufferAttribute(L),this.morphTargetsRelative?(Pn.addVectors(this.boundingBox.min,Jn.min),this.boundingBox.expandByPoint(Pn),Pn.addVectors(this.boundingBox.max,Jn.max),this.boundingBox.expandByPoint(Pn)):(this.boundingBox.expandByPoint(Jn.min),this.boundingBox.expandByPoint(Jn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ja);const e=this.attributes.position,a=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Je,1/0);return}if(e){const w=this.boundingSphere.center;if(Jn.setFromBufferAttribute(e),a)for(let L=0,G=a.length;L<G;L++){const Y=a[L];Ao.setFromBufferAttribute(Y),this.morphTargetsRelative?(Pn.addVectors(Jn.min,Ao.min),Jn.expandByPoint(Pn),Pn.addVectors(Jn.max,Ao.max),Jn.expandByPoint(Pn)):(Jn.expandByPoint(Ao.min),Jn.expandByPoint(Ao.max))}Jn.getCenter(w);let T=0;for(let L=0,G=e.count;L<G;L++)Pn.fromBufferAttribute(e,L),T=Math.max(T,w.distanceToSquared(Pn));if(a)for(let L=0,G=a.length;L<G;L++){const Y=a[L],ce=this.morphTargetsRelative;for(let P=0,S=Y.count;P<S;P++)Pn.fromBufferAttribute(Y,P),ce&&(Oi.fromBufferAttribute(e,P),Pn.add(Oi)),T=Math.max(T,w.distanceToSquared(Pn))}this.boundingSphere.radius=Math.sqrt(T),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,a=this.attributes;if(e===null||a.position===void 0||a.normal===void 0||a.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const w=a.position,T=a.normal,L=a.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new xr(new Float32Array(4*w.count),4));const G=this.getAttribute("tangent"),Y=[],ce=[];for(let p=0;p<w.count;p++)Y[p]=new Je,ce[p]=new Je;const P=new Je,S=new Je,c=new Je,x=new Yt,t=new Yt,l=new Yt,n=new Je,i=new Je;function s(p,r,o){P.fromBufferAttribute(w,p),S.fromBufferAttribute(w,r),c.fromBufferAttribute(w,o),x.fromBufferAttribute(L,p),t.fromBufferAttribute(L,r),l.fromBufferAttribute(L,o),S.sub(P),c.sub(P),t.sub(x),l.sub(x);const m=1/(t.x*l.y-l.x*t.y);isFinite(m)&&(n.copy(S).multiplyScalar(l.y).addScaledVector(c,-t.y).multiplyScalar(m),i.copy(c).multiplyScalar(t.x).addScaledVector(S,-l.x).multiplyScalar(m),Y[p].add(n),Y[r].add(n),Y[o].add(n),ce[p].add(i),ce[r].add(i),ce[o].add(i))}let g=this.groups;g.length===0&&(g=[{start:0,count:e.count}]);for(let p=0,r=g.length;p<r;++p){const o=g[p],m=o.start,b=o.count;for(let E=m,M=m+b;E<M;E+=3)s(e.getX(E+0),e.getX(E+1),e.getX(E+2))}const d=new Je,u=new Je,f=new Je,y=new Je;function h(p){f.fromBufferAttribute(T,p),y.copy(f);const r=Y[p];d.copy(r),d.sub(f.multiplyScalar(f.dot(r))).normalize(),u.crossVectors(y,r);const m=u.dot(ce[p])<0?-1:1;G.setXYZW(p,d.x,d.y,d.z,m)}for(let p=0,r=g.length;p<r;++p){const o=g[p],m=o.start,b=o.count;for(let E=m,M=m+b;E<M;E+=3)h(e.getX(E+0)),h(e.getX(E+1)),h(e.getX(E+2))}}computeVertexNormals(){const e=this.index,a=this.getAttribute("position");if(a!==void 0){let w=this.getAttribute("normal");if(w===void 0)w=new xr(new Float32Array(a.count*3),3),this.setAttribute("normal",w);else for(let x=0,t=w.count;x<t;x++)w.setXYZ(x,0,0,0);const T=new Je,L=new Je,G=new Je,Y=new Je,ce=new Je,P=new Je,S=new Je,c=new Je;if(e)for(let x=0,t=e.count;x<t;x+=3){const l=e.getX(x+0),n=e.getX(x+1),i=e.getX(x+2);T.fromBufferAttribute(a,l),L.fromBufferAttribute(a,n),G.fromBufferAttribute(a,i),S.subVectors(G,L),c.subVectors(T,L),S.cross(c),Y.fromBufferAttribute(w,l),ce.fromBufferAttribute(w,n),P.fromBufferAttribute(w,i),Y.add(S),ce.add(S),P.add(S),w.setXYZ(l,Y.x,Y.y,Y.z),w.setXYZ(n,ce.x,ce.y,ce.z),w.setXYZ(i,P.x,P.y,P.z)}else for(let x=0,t=a.count;x<t;x+=3)T.fromBufferAttribute(a,x+0),L.fromBufferAttribute(a,x+1),G.fromBufferAttribute(a,x+2),S.subVectors(G,L),c.subVectors(T,L),S.cross(c),w.setXYZ(x+0,S.x,S.y,S.z),w.setXYZ(x+1,S.x,S.y,S.z),w.setXYZ(x+2,S.x,S.y,S.z);this.normalizeNormals(),w.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let a=0,w=e.count;a<w;a++)Pn.fromBufferAttribute(e,a),Pn.normalize(),e.setXYZ(a,Pn.x,Pn.y,Pn.z)}toNonIndexed(){function e(Y,ce){const P=Y.array,S=Y.itemSize,c=Y.normalized,x=new P.constructor(ce.length*S);let t=0,l=0;for(let n=0,i=ce.length;n<i;n++){Y.isInterleavedBufferAttribute?t=ce[n]*Y.data.stride+Y.offset:t=ce[n]*S;for(let s=0;s<S;s++)x[l++]=P[t++]}return new xr(x,S,c)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const a=new Ar,w=this.index.array,T=this.attributes;for(const Y in T){const ce=T[Y],P=e(ce,w);a.setAttribute(Y,P)}const L=this.morphAttributes;for(const Y in L){const ce=[],P=L[Y];for(let S=0,c=P.length;S<c;S++){const x=P[S],t=e(x,w);ce.push(t)}a.morphAttributes[Y]=ce}a.morphTargetsRelative=this.morphTargetsRelative;const G=this.groups;for(let Y=0,ce=G.length;Y<ce;Y++){const P=G[Y];a.addGroup(P.start,P.count,P.materialIndex)}return a}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const ce=this.parameters;for(const P in ce)ce[P]!==void 0&&(e[P]=ce[P]);return e}e.data={attributes:{}};const a=this.index;a!==null&&(e.data.index={type:a.array.constructor.name,array:Array.prototype.slice.call(a.array)});const w=this.attributes;for(const ce in w){const P=w[ce];e.data.attributes[ce]=P.toJSON(e.data)}const T={};let L=!1;for(const ce in this.morphAttributes){const P=this.morphAttributes[ce],S=[];for(let c=0,x=P.length;c<x;c++){const t=P[c];S.push(t.toJSON(e.data))}S.length>0&&(T[ce]=S,L=!0)}L&&(e.data.morphAttributes=T,e.data.morphTargetsRelative=this.morphTargetsRelative);const G=this.groups;G.length>0&&(e.data.groups=JSON.parse(JSON.stringify(G)));const Y=this.boundingSphere;return Y!==null&&(e.data.boundingSphere=Y.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const a={};this.name=e.name;const w=e.index;w!==null&&this.setIndex(w.clone());const T=e.attributes;for(const P in T){const S=T[P];this.setAttribute(P,S.clone(a))}const L=e.morphAttributes;for(const P in L){const S=[],c=L[P];for(let x=0,t=c.length;x<t;x++)S.push(c[x].clone(a));this.morphAttributes[P]=S}this.morphTargetsRelative=e.morphTargetsRelative;const G=e.groups;for(let P=0,S=G.length;P<S;P++){const c=G[P];this.addGroup(c.start,c.count,c.materialIndex)}const Y=e.boundingBox;Y!==null&&(this.boundingBox=Y.clone());const ce=e.boundingSphere;return ce!==null&&(this.boundingSphere=ce.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ol=new wn,ci=new $c,ma=new Ja,Rl=new Je,ya=new Je,va=new Je,ba=new Je,Bs=new Je,xa=new Je,Nl=new Je,wa=new Je;class mr extends Bn{constructor(e=new Ar,a=new Za){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=a,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,a){return super.copy(e,a),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const a=this.geometry.morphAttributes,w=Object.keys(a);if(w.length>0){const T=a[w[0]];if(T!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let L=0,G=T.length;L<G;L++){const Y=T[L].name||String(L);this.morphTargetInfluences.push(0),this.morphTargetDictionary[Y]=L}}}}getVertexPosition(e,a){const w=this.geometry,T=w.attributes.position,L=w.morphAttributes.position,G=w.morphTargetsRelative;a.fromBufferAttribute(T,e);const Y=this.morphTargetInfluences;if(L&&Y){xa.set(0,0,0);for(let ce=0,P=L.length;ce<P;ce++){const S=Y[ce],c=L[ce];S!==0&&(Bs.fromBufferAttribute(c,e),G?xa.addScaledVector(Bs,S):xa.addScaledVector(Bs.sub(a),S))}a.add(xa)}return a}raycast(e,a){const w=this.geometry,T=this.material,L=this.matrixWorld;T!==void 0&&(w.boundingSphere===null&&w.computeBoundingSphere(),ma.copy(w.boundingSphere),ma.applyMatrix4(L),ci.copy(e.ray).recast(e.near),!(ma.containsPoint(ci.origin)===!1&&(ci.intersectSphere(ma,Rl)===null||ci.origin.distanceToSquared(Rl)>(e.far-e.near)**2))&&(Ol.copy(L).invert(),ci.copy(e.ray).applyMatrix4(Ol),!(w.boundingBox!==null&&ci.intersectsBox(w.boundingBox)===!1)&&this._computeIntersections(e,a,ci)))}_computeIntersections(e,a,w){let T;const L=this.geometry,G=this.material,Y=L.index,ce=L.attributes.position,P=L.attributes.uv,S=L.attributes.uv1,c=L.attributes.normal,x=L.groups,t=L.drawRange;if(Y!==null)if(Array.isArray(G))for(let l=0,n=x.length;l<n;l++){const i=x[l],s=G[i.materialIndex],g=Math.max(i.start,t.start),d=Math.min(Y.count,Math.min(i.start+i.count,t.start+t.count));for(let u=g,f=d;u<f;u+=3){const y=Y.getX(u),h=Y.getX(u+1),p=Y.getX(u+2);T=Aa(this,s,e,w,P,S,c,y,h,p),T&&(T.faceIndex=Math.floor(u/3),T.face.materialIndex=i.materialIndex,a.push(T))}}else{const l=Math.max(0,t.start),n=Math.min(Y.count,t.start+t.count);for(let i=l,s=n;i<s;i+=3){const g=Y.getX(i),d=Y.getX(i+1),u=Y.getX(i+2);T=Aa(this,G,e,w,P,S,c,g,d,u),T&&(T.faceIndex=Math.floor(i/3),a.push(T))}}else if(ce!==void 0)if(Array.isArray(G))for(let l=0,n=x.length;l<n;l++){const i=x[l],s=G[i.materialIndex],g=Math.max(i.start,t.start),d=Math.min(ce.count,Math.min(i.start+i.count,t.start+t.count));for(let u=g,f=d;u<f;u+=3){const y=u,h=u+1,p=u+2;T=Aa(this,s,e,w,P,S,c,y,h,p),T&&(T.faceIndex=Math.floor(u/3),T.face.materialIndex=i.materialIndex,a.push(T))}}else{const l=Math.max(0,t.start),n=Math.min(ce.count,t.start+t.count);for(let i=l,s=n;i<s;i+=3){const g=i,d=i+1,u=i+2;T=Aa(this,G,e,w,P,S,c,g,d,u),T&&(T.faceIndex=Math.floor(i/3),a.push(T))}}}}function Np(_,e,a,w,T,L,G,Y){let ce;if(e.side===Yn?ce=w.intersectTriangle(G,L,T,!0,Y):ce=w.intersectTriangle(T,L,G,e.side===ei,Y),ce===null)return null;wa.copy(Y),wa.applyMatrix4(_.matrixWorld);const P=a.ray.origin.distanceTo(wa);return P<a.near||P>a.far?null:{distance:P,point:wa.clone(),object:_}}function Aa(_,e,a,w,T,L,G,Y,ce,P){_.getVertexPosition(Y,ya),_.getVertexPosition(ce,va),_.getVertexPosition(P,ba);const S=Np(_,e,a,w,ya,va,ba,Nl);if(S){const c=new Je;sr.getBarycoord(Nl,ya,va,ba,c),T&&(S.uv=sr.getInterpolatedAttribute(T,Y,ce,P,c,new Yt)),L&&(S.uv1=sr.getInterpolatedAttribute(L,Y,ce,P,c,new Yt)),G&&(S.normal=sr.getInterpolatedAttribute(G,Y,ce,P,c,new Je),S.normal.dot(w.direction)>0&&S.normal.multiplyScalar(-1));const x={a:Y,b:ce,c:P,normal:new Je,materialIndex:0};sr.getNormal(ya,va,ba,x.normal),S.face=x,S.barycoord=c}return S}class Wo extends Ar{constructor(e=1,a=1,w=1,T=1,L=1,G=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:a,depth:w,widthSegments:T,heightSegments:L,depthSegments:G};const Y=this;T=Math.floor(T),L=Math.floor(L),G=Math.floor(G);const ce=[],P=[],S=[],c=[];let x=0,t=0;l("z","y","x",-1,-1,w,a,e,G,L,0),l("z","y","x",1,-1,w,a,-e,G,L,1),l("x","z","y",1,1,e,w,a,T,G,2),l("x","z","y",1,-1,e,w,-a,T,G,3),l("x","y","z",1,-1,e,a,w,T,L,4),l("x","y","z",-1,-1,e,a,-w,T,L,5),this.setIndex(ce),this.setAttribute("position",new er(P,3)),this.setAttribute("normal",new er(S,3)),this.setAttribute("uv",new er(c,2));function l(n,i,s,g,d,u,f,y,h,p,r){const o=u/h,m=f/p,b=u/2,E=f/2,M=y/2,D=h+1,A=p+1;let v=0,k=0;const J=new Je;for(let X=0;X<A;X++){const te=X*m-E;for(let H=0;H<D;H++){const z=H*o-b;J[n]=z*g,J[i]=te*d,J[s]=M,P.push(J.x,J.y,J.z),J[n]=0,J[i]=0,J[s]=y>0?1:-1,S.push(J.x,J.y,J.z),c.push(H/h),c.push(1-X/p),v+=1}}for(let X=0;X<p;X++)for(let te=0;te<h;te++){const H=x+te+D*X,z=x+te+D*(X+1),B=x+(te+1)+D*(X+1),F=x+(te+1)+D*X;ce.push(H,z,F),ce.push(z,B,F),k+=6}Y.addGroup(t,k,r),t+=k,x+=v}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Zi(_){const e={};for(const a in _){e[a]={};for(const w in _[a]){const T=_[a][w];T&&(T.isColor||T.isMatrix3||T.isMatrix4||T.isVector2||T.isVector3||T.isVector4||T.isTexture||T.isQuaternion)?T.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[a][w]=null):e[a][w]=T.clone():Array.isArray(T)?e[a][w]=T.slice():e[a][w]=T}}return e}function Vn(_){const e={};for(let a=0;a<_.length;a++){const w=Zi(_[a]);for(const T in w)e[T]=w[T]}return e}function Up(_){const e=[];for(let a=0;a<_.length;a++)e.push(_[a].clone());return e}function Hd(_){const e=_.getRenderTarget();return e===null?_.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:an.workingColorSpace}const qp={clone:Zi,merge:Vn};var zp=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Gp=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ti extends Yo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=zp,this.fragmentShader=Gp,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Zi(e.uniforms),this.uniformsGroups=Up(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const a=super.toJSON(e);a.glslVersion=this.glslVersion,a.uniforms={};for(const T in this.uniforms){const G=this.uniforms[T].value;G&&G.isTexture?a.uniforms[T]={type:"t",value:G.toJSON(e).uuid}:G&&G.isColor?a.uniforms[T]={type:"c",value:G.getHex()}:G&&G.isVector2?a.uniforms[T]={type:"v2",value:G.toArray()}:G&&G.isVector3?a.uniforms[T]={type:"v3",value:G.toArray()}:G&&G.isVector4?a.uniforms[T]={type:"v4",value:G.toArray()}:G&&G.isMatrix3?a.uniforms[T]={type:"m3",value:G.toArray()}:G&&G.isMatrix4?a.uniforms[T]={type:"m4",value:G.toArray()}:a.uniforms[T]={value:G}}Object.keys(this.defines).length>0&&(a.defines=this.defines),a.vertexShader=this.vertexShader,a.fragmentShader=this.fragmentShader,a.lights=this.lights,a.clipping=this.clipping;const w={};for(const T in this.extensions)this.extensions[T]===!0&&(w[T]=!0);return Object.keys(w).length>0&&(a.extensions=w),a}}class Yd extends Bn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new wn,this.projectionMatrix=new wn,this.projectionMatrixInverse=new wn,this.coordinateSystem=br,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,a){return super.copy(e,a),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,a){super.updateWorldMatrix(e,a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Wr=new Je,Ul=new Yt,ql=new Yt;class Zn extends Yd{constructor(e=50,a=1,w=.1,T=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=w,this.far=T,this.focus=10,this.aspect=a,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,a){return super.copy(e,a),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const a=.5*this.getFilmHeight()/e;this.fov=Nc*2*Math.atan(a),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ko*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Nc*2*Math.atan(Math.tan(ko*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,a,w){Wr.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),a.set(Wr.x,Wr.y).multiplyScalar(-e/Wr.z),Wr.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),w.set(Wr.x,Wr.y).multiplyScalar(-e/Wr.z)}getViewSize(e,a){return this.getViewBounds(e,Ul,ql),a.subVectors(ql,Ul)}setViewOffset(e,a,w,T,L,G){this.aspect=e/a,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=a,this.view.offsetX=w,this.view.offsetY=T,this.view.width=L,this.view.height=G,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let a=e*Math.tan(ko*.5*this.fov)/this.zoom,w=2*a,T=this.aspect*w,L=-.5*T;const G=this.view;if(this.view!==null&&this.view.enabled){const ce=G.fullWidth,P=G.fullHeight;L+=G.offsetX*T/ce,a-=G.offsetY*w/P,T*=G.width/ce,w*=G.height/P}const Y=this.filmOffset;Y!==0&&(L+=e*Y/this.getFilmWidth()),this.projectionMatrix.makePerspective(L,L+T,a,a-w,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const a=super.toJSON(e);return a.object.fov=this.fov,a.object.zoom=this.zoom,a.object.near=this.near,a.object.far=this.far,a.object.focus=this.focus,a.object.aspect=this.aspect,this.view!==null&&(a.object.view=Object.assign({},this.view)),a.object.filmGauge=this.filmGauge,a.object.filmOffset=this.filmOffset,a}}const Ri=-90,Ni=1;class Vp extends Bn{constructor(e,a,w){super(),this.type="CubeCamera",this.renderTarget=w,this.coordinateSystem=null,this.activeMipmapLevel=0;const T=new Zn(Ri,Ni,e,a);T.layers=this.layers,this.add(T);const L=new Zn(Ri,Ni,e,a);L.layers=this.layers,this.add(L);const G=new Zn(Ri,Ni,e,a);G.layers=this.layers,this.add(G);const Y=new Zn(Ri,Ni,e,a);Y.layers=this.layers,this.add(Y);const ce=new Zn(Ri,Ni,e,a);ce.layers=this.layers,this.add(ce);const P=new Zn(Ri,Ni,e,a);P.layers=this.layers,this.add(P)}updateCoordinateSystem(){const e=this.coordinateSystem,a=this.children.concat(),[w,T,L,G,Y,ce]=a;for(const P of a)this.remove(P);if(e===br)w.up.set(0,1,0),w.lookAt(1,0,0),T.up.set(0,1,0),T.lookAt(-1,0,0),L.up.set(0,0,-1),L.lookAt(0,1,0),G.up.set(0,0,1),G.lookAt(0,-1,0),Y.up.set(0,1,0),Y.lookAt(0,0,1),ce.up.set(0,1,0),ce.lookAt(0,0,-1);else if(e===Ga)w.up.set(0,-1,0),w.lookAt(-1,0,0),T.up.set(0,-1,0),T.lookAt(1,0,0),L.up.set(0,0,1),L.lookAt(0,1,0),G.up.set(0,0,-1),G.lookAt(0,-1,0),Y.up.set(0,-1,0),Y.lookAt(0,0,1),ce.up.set(0,-1,0),ce.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const P of a)this.add(P),P.updateMatrixWorld()}update(e,a){this.parent===null&&this.updateMatrixWorld();const{renderTarget:w,activeMipmapLevel:T}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[L,G,Y,ce,P,S]=this.children,c=e.getRenderTarget(),x=e.getActiveCubeFace(),t=e.getActiveMipmapLevel(),l=e.xr.enabled;e.xr.enabled=!1;const n=w.texture.generateMipmaps;w.texture.generateMipmaps=!1,e.setRenderTarget(w,0,T),e.render(a,L),e.setRenderTarget(w,1,T),e.render(a,G),e.setRenderTarget(w,2,T),e.render(a,Y),e.setRenderTarget(w,3,T),e.render(a,ce),e.setRenderTarget(w,4,T),e.render(a,P),w.texture.generateMipmaps=n,e.setRenderTarget(w,5,T),e.render(a,S),e.setRenderTarget(c,x,t),e.xr.enabled=l,w.texture.needsPMREMUpdate=!0}}class Wd extends Qn{constructor(e=[],a=Xi,w,T,L,G,Y,ce,P,S){super(e,a,w,T,L,G,Y,ce,P,S),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Qp extends wi{constructor(e=1,a={}){super(e,e,a),this.isWebGLCubeRenderTarget=!0;const w={width:e,height:e,depth:1},T=[w,w,w,w,w,w];this.texture=new Wd(T),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,a){this.texture.type=a.type,this.texture.colorSpace=a.colorSpace,this.texture.generateMipmaps=a.generateMipmaps,this.texture.minFilter=a.minFilter,this.texture.magFilter=a.magFilter;const w={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},T=new Wo(5,5,5),L=new ti({name:"CubemapFromEquirect",uniforms:Zi(w.uniforms),vertexShader:w.vertexShader,fragmentShader:w.fragmentShader,side:Yn,blending:Jr});L.uniforms.tEquirect.value=a;const G=new mr(T,L),Y=a.minFilter;return a.minFilter===yi&&(a.minFilter=cr),new Vp(1,10,this).update(e,G),a.minFilter=Y,G.geometry.dispose(),G.material.dispose(),this}clear(e,a=!0,w=!0,T=!0){const L=e.getRenderTarget();for(let G=0;G<6;G++)e.setRenderTarget(this,G),e.clear(a,w,T);e.setRenderTarget(L)}}class zi extends Bn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const jp={type:"move"};class Fs{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new zi,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new zi,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Je,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Je),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new zi,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Je,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Je),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const a=this._hand;if(a)for(const w of e.hand.values())this._getHandJoint(a,w)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,a,w){let T=null,L=null,G=null;const Y=this._targetRay,ce=this._grip,P=this._hand;if(e&&a.session.visibilityState!=="visible-blurred"){if(P&&e.hand){G=!0;for(const n of e.hand.values()){const i=a.getJointPose(n,w),s=this._getHandJoint(P,n);i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,s.jointRadius=i.radius),s.visible=i!==null}const S=P.joints["index-finger-tip"],c=P.joints["thumb-tip"],x=S.position.distanceTo(c.position),t=.02,l=.005;P.inputState.pinching&&x>t+l?(P.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!P.inputState.pinching&&x<=t-l&&(P.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else ce!==null&&e.gripSpace&&(L=a.getPose(e.gripSpace,w),L!==null&&(ce.matrix.fromArray(L.transform.matrix),ce.matrix.decompose(ce.position,ce.rotation,ce.scale),ce.matrixWorldNeedsUpdate=!0,L.linearVelocity?(ce.hasLinearVelocity=!0,ce.linearVelocity.copy(L.linearVelocity)):ce.hasLinearVelocity=!1,L.angularVelocity?(ce.hasAngularVelocity=!0,ce.angularVelocity.copy(L.angularVelocity)):ce.hasAngularVelocity=!1));Y!==null&&(T=a.getPose(e.targetRaySpace,w),T===null&&L!==null&&(T=L),T!==null&&(Y.matrix.fromArray(T.transform.matrix),Y.matrix.decompose(Y.position,Y.rotation,Y.scale),Y.matrixWorldNeedsUpdate=!0,T.linearVelocity?(Y.hasLinearVelocity=!0,Y.linearVelocity.copy(T.linearVelocity)):Y.hasLinearVelocity=!1,T.angularVelocity?(Y.hasAngularVelocity=!0,Y.angularVelocity.copy(T.angularVelocity)):Y.hasAngularVelocity=!1,this.dispatchEvent(jp)))}return Y!==null&&(Y.visible=T!==null),ce!==null&&(ce.visible=L!==null),P!==null&&(P.visible=G!==null),this}_getHandJoint(e,a){if(e.joints[a.jointName]===void 0){const w=new zi;w.matrixAutoUpdate=!1,w.visible=!1,e.joints[a.jointName]=w,e.add(w)}return e.joints[a.jointName]}}class Hp extends Bn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Nr,this.environmentIntensity=1,this.environmentRotation=new Nr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,a){return super.copy(e,a),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const a=super.toJSON(e);return this.fog!==null&&(a.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(a.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(a.object.backgroundIntensity=this.backgroundIntensity),a.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(a.object.environmentIntensity=this.environmentIntensity),a.object.environmentRotation=this.environmentRotation.toArray(),a}}const Os=new Je,Yp=new Je,Wp=new Wt;class Xr{constructor(e=new Je(1,0,0),a=0){this.isPlane=!0,this.normal=e,this.constant=a}set(e,a){return this.normal.copy(e),this.constant=a,this}setComponents(e,a,w,T){return this.normal.set(e,a,w),this.constant=T,this}setFromNormalAndCoplanarPoint(e,a){return this.normal.copy(e),this.constant=-a.dot(this.normal),this}setFromCoplanarPoints(e,a,w){const T=Os.subVectors(w,a).cross(Yp.subVectors(e,a)).normalize();return this.setFromNormalAndCoplanarPoint(T,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,a){return a.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,a){const w=e.delta(Os),T=this.normal.dot(w);if(T===0)return this.distanceToPoint(e.start)===0?a.copy(e.start):null;const L=-(e.start.dot(this.normal)+this.constant)/T;return L<0||L>1?null:a.copy(e.start).addScaledVector(w,L)}intersectsLine(e){const a=this.distanceToPoint(e.start),w=this.distanceToPoint(e.end);return a<0&&w>0||w<0&&a>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,a){const w=a||Wp.getNormalMatrix(e),T=this.coplanarPoint(Os).applyMatrix4(e),L=this.normal.applyMatrix3(w).normalize();return this.constant=-T.dot(L),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const li=new Ja,Xp=new Yt(.5,.5),Ea=new Je;class el{constructor(e=new Xr,a=new Xr,w=new Xr,T=new Xr,L=new Xr,G=new Xr){this.planes=[e,a,w,T,L,G]}set(e,a,w,T,L,G){const Y=this.planes;return Y[0].copy(e),Y[1].copy(a),Y[2].copy(w),Y[3].copy(T),Y[4].copy(L),Y[5].copy(G),this}copy(e){const a=this.planes;for(let w=0;w<6;w++)a[w].copy(e.planes[w]);return this}setFromProjectionMatrix(e,a=br,w=!1){const T=this.planes,L=e.elements,G=L[0],Y=L[1],ce=L[2],P=L[3],S=L[4],c=L[5],x=L[6],t=L[7],l=L[8],n=L[9],i=L[10],s=L[11],g=L[12],d=L[13],u=L[14],f=L[15];if(T[0].setComponents(P-G,t-S,s-l,f-g).normalize(),T[1].setComponents(P+G,t+S,s+l,f+g).normalize(),T[2].setComponents(P+Y,t+c,s+n,f+d).normalize(),T[3].setComponents(P-Y,t-c,s-n,f-d).normalize(),w)T[4].setComponents(ce,x,i,u).normalize(),T[5].setComponents(P-ce,t-x,s-i,f-u).normalize();else if(T[4].setComponents(P-ce,t-x,s-i,f-u).normalize(),a===br)T[5].setComponents(P+ce,t+x,s+i,f+u).normalize();else if(a===Ga)T[5].setComponents(ce,x,i,u).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+a);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),li.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const a=e.geometry;a.boundingSphere===null&&a.computeBoundingSphere(),li.copy(a.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(li)}intersectsSprite(e){li.center.set(0,0,0);const a=Xp.distanceTo(e.center);return li.radius=.7071067811865476+a,li.applyMatrix4(e.matrixWorld),this.intersectsSphere(li)}intersectsSphere(e){const a=this.planes,w=e.center,T=-e.radius;for(let L=0;L<6;L++)if(a[L].distanceToPoint(w)<T)return!1;return!0}intersectsBox(e){const a=this.planes;for(let w=0;w<6;w++){const T=a[w];if(Ea.x=T.normal.x>0?e.max.x:e.min.x,Ea.y=T.normal.y>0?e.max.y:e.min.y,Ea.z=T.normal.z>0?e.max.z:e.min.z,T.distanceToPoint(Ea)<0)return!1}return!0}containsPoint(e){const a=this.planes;for(let w=0;w<6;w++)if(a[w].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class tl extends Yo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new rn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Qa=new Je,ja=new Je,zl=new wn,Eo=new $c,_a=new Ja,Rs=new Je,Gl=new Je;class Kp extends Bn{constructor(e=new Ar,a=new tl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=a,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,a){return super.copy(e,a),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const a=e.attributes.position,w=[0];for(let T=1,L=a.count;T<L;T++)Qa.fromBufferAttribute(a,T-1),ja.fromBufferAttribute(a,T),w[T]=w[T-1],w[T]+=Qa.distanceTo(ja);e.setAttribute("lineDistance",new er(w,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,a){const w=this.geometry,T=this.matrixWorld,L=e.params.Line.threshold,G=w.drawRange;if(w.boundingSphere===null&&w.computeBoundingSphere(),_a.copy(w.boundingSphere),_a.applyMatrix4(T),_a.radius+=L,e.ray.intersectsSphere(_a)===!1)return;zl.copy(T).invert(),Eo.copy(e.ray).applyMatrix4(zl);const Y=L/((this.scale.x+this.scale.y+this.scale.z)/3),ce=Y*Y,P=this.isLineSegments?2:1,S=w.index,x=w.attributes.position;if(S!==null){const t=Math.max(0,G.start),l=Math.min(S.count,G.start+G.count);for(let n=t,i=l-1;n<i;n+=P){const s=S.getX(n),g=S.getX(n+1),d=Ma(this,e,Eo,ce,s,g,n);d&&a.push(d)}if(this.isLineLoop){const n=S.getX(l-1),i=S.getX(t),s=Ma(this,e,Eo,ce,n,i,l-1);s&&a.push(s)}}else{const t=Math.max(0,G.start),l=Math.min(x.count,G.start+G.count);for(let n=t,i=l-1;n<i;n+=P){const s=Ma(this,e,Eo,ce,n,n+1,n);s&&a.push(s)}if(this.isLineLoop){const n=Ma(this,e,Eo,ce,l-1,t,l-1);n&&a.push(n)}}}updateMorphTargets(){const a=this.geometry.morphAttributes,w=Object.keys(a);if(w.length>0){const T=a[w[0]];if(T!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let L=0,G=T.length;L<G;L++){const Y=T[L].name||String(L);this.morphTargetInfluences.push(0),this.morphTargetDictionary[Y]=L}}}}}function Ma(_,e,a,w,T,L,G){const Y=_.geometry.attributes.position;if(Qa.fromBufferAttribute(Y,T),ja.fromBufferAttribute(Y,L),a.distanceSqToSegment(Qa,ja,Rs,Gl)>w)return;Rs.applyMatrix4(_.matrixWorld);const P=e.ray.origin.distanceTo(Rs);if(!(P<e.near||P>e.far))return{distance:P,point:Gl.clone().applyMatrix4(_.matrixWorld),index:G,face:null,faceIndex:null,barycoord:null,object:_}}const Vl=new Je,Ql=new Je;class Xd extends Kp{constructor(e,a){super(e,a),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const a=e.attributes.position,w=[];for(let T=0,L=a.count;T<L;T+=2)Vl.fromBufferAttribute(a,T),Ql.fromBufferAttribute(a,T+1),w[T]=T===0?0:w[T-1],w[T+1]=w[T]+Vl.distanceTo(Ql);e.setAttribute("lineDistance",new er(w,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Kd extends Qn{constructor(e,a,w,T,L=cr,G=cr,Y,ce,P){super(e,a,w,T,L,G,Y,ce,P),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const S=this;function c(){S.needsUpdate=!0,S._requestVideoFrameCallbackId=e.requestVideoFrameCallback(c)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(c))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class Jd extends Qn{constructor(e,a,w=bi,T,L,G,Y=yr,ce=yr,P,S=Ro,c=1){if(S!==Ro&&S!==No)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const x={width:e,height:a,depth:c};super(x,T,L,G,Y,ce,S,w,P),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Zc(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const a=super.toJSON(e);return this.compareFunction!==null&&(a.compareFunction=this.compareFunction),a}}class nl extends Ar{constructor(e=1,a=1,w=1,T=32,L=1,G=!1,Y=0,ce=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:a,height:w,radialSegments:T,heightSegments:L,openEnded:G,thetaStart:Y,thetaLength:ce};const P=this;T=Math.floor(T),L=Math.floor(L);const S=[],c=[],x=[],t=[];let l=0;const n=[],i=w/2;let s=0;g(),G===!1&&(e>0&&d(!0),a>0&&d(!1)),this.setIndex(S),this.setAttribute("position",new er(c,3)),this.setAttribute("normal",new er(x,3)),this.setAttribute("uv",new er(t,2));function g(){const u=new Je,f=new Je;let y=0;const h=(a-e)/w;for(let p=0;p<=L;p++){const r=[],o=p/L,m=o*(a-e)+e;for(let b=0;b<=T;b++){const E=b/T,M=E*ce+Y,D=Math.sin(M),A=Math.cos(M);f.x=m*D,f.y=-o*w+i,f.z=m*A,c.push(f.x,f.y,f.z),u.set(D,h,A).normalize(),x.push(u.x,u.y,u.z),t.push(E,1-o),r.push(l++)}n.push(r)}for(let p=0;p<T;p++)for(let r=0;r<L;r++){const o=n[r][p],m=n[r+1][p],b=n[r+1][p+1],E=n[r][p+1];(e>0||r!==0)&&(S.push(o,m,E),y+=3),(a>0||r!==L-1)&&(S.push(m,b,E),y+=3)}P.addGroup(s,y,0),s+=y}function d(u){const f=l,y=new Yt,h=new Je;let p=0;const r=u===!0?e:a,o=u===!0?1:-1;for(let b=1;b<=T;b++)c.push(0,i*o,0),x.push(0,o,0),t.push(.5,.5),l++;const m=l;for(let b=0;b<=T;b++){const M=b/T*ce+Y,D=Math.cos(M),A=Math.sin(M);h.x=r*A,h.y=i*o,h.z=r*D,c.push(h.x,h.y,h.z),x.push(0,o,0),y.x=D*.5+.5,y.y=A*.5*o+.5,t.push(y.x,y.y),l++}for(let b=0;b<T;b++){const E=f+b,M=m+b;u===!0?S.push(M,M+1,E):S.push(M+1,M,E),p+=3}P.addGroup(s,p,u===!0?1:2),s+=p}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class $i extends nl{constructor(e=1,a=1,w=32,T=1,L=!1,G=0,Y=Math.PI*2){super(0,e,a,w,T,L,G,Y),this.type="ConeGeometry",this.parameters={radius:e,height:a,radialSegments:w,heightSegments:T,openEnded:L,thetaStart:G,thetaLength:Y}}static fromJSON(e){return new $i(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}const Sa=new Je,Ia=new Je,Ns=new Je,Ca=new sr;class Ha extends Ar{constructor(e=null,a=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:a},e!==null){const T=Math.pow(10,4),L=Math.cos(ko*a),G=e.getIndex(),Y=e.getAttribute("position"),ce=G?G.count:Y.count,P=[0,0,0],S=["a","b","c"],c=new Array(3),x={},t=[];for(let l=0;l<ce;l+=3){G?(P[0]=G.getX(l),P[1]=G.getX(l+1),P[2]=G.getX(l+2)):(P[0]=l,P[1]=l+1,P[2]=l+2);const{a:n,b:i,c:s}=Ca;if(n.fromBufferAttribute(Y,P[0]),i.fromBufferAttribute(Y,P[1]),s.fromBufferAttribute(Y,P[2]),Ca.getNormal(Ns),c[0]=`${Math.round(n.x*T)},${Math.round(n.y*T)},${Math.round(n.z*T)}`,c[1]=`${Math.round(i.x*T)},${Math.round(i.y*T)},${Math.round(i.z*T)}`,c[2]=`${Math.round(s.x*T)},${Math.round(s.y*T)},${Math.round(s.z*T)}`,!(c[0]===c[1]||c[1]===c[2]||c[2]===c[0]))for(let g=0;g<3;g++){const d=(g+1)%3,u=c[g],f=c[d],y=Ca[S[g]],h=Ca[S[d]],p=`${u}_${f}`,r=`${f}_${u}`;r in x&&x[r]?(Ns.dot(x[r].normal)<=L&&(t.push(y.x,y.y,y.z),t.push(h.x,h.y,h.z)),x[r]=null):p in x||(x[p]={index0:P[g],index1:P[d],normal:Ns.clone()})}}for(const l in x)if(x[l]){const{index0:n,index1:i}=x[l];Sa.fromBufferAttribute(Y,n),Ia.fromBufferAttribute(Y,i),t.push(Sa.x,Sa.y,Sa.z),t.push(Ia.x,Ia.y,Ia.z)}this.setAttribute("position",new er(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class $a extends Ar{constructor(e=1,a=1,w=1,T=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:a,widthSegments:w,heightSegments:T};const L=e/2,G=a/2,Y=Math.floor(w),ce=Math.floor(T),P=Y+1,S=ce+1,c=e/Y,x=a/ce,t=[],l=[],n=[],i=[];for(let s=0;s<S;s++){const g=s*x-G;for(let d=0;d<P;d++){const u=d*c-L;l.push(u,-g,0),n.push(0,0,1),i.push(d/Y),i.push(1-s/ce)}}for(let s=0;s<ce;s++)for(let g=0;g<Y;g++){const d=g+P*s,u=g+P*(s+1),f=g+1+P*(s+1),y=g+1+P*s;t.push(d,u,y),t.push(u,f,y)}this.setIndex(t),this.setAttribute("position",new er(l,3)),this.setAttribute("normal",new er(n,3)),this.setAttribute("uv",new er(i,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $a(e.width,e.height,e.widthSegments,e.heightSegments)}}class Jp extends Yo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=sp,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Zp extends Yo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class rl extends Bn{constructor(e,a=1){super(),this.isLight=!0,this.type="Light",this.color=new rn(e),this.intensity=a}dispose(){}copy(e,a){return super.copy(e,a),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const a=super.toJSON(e);return a.object.color=this.color.getHex(),a.object.intensity=this.intensity,this.groundColor!==void 0&&(a.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(a.object.distance=this.distance),this.angle!==void 0&&(a.object.angle=this.angle),this.decay!==void 0&&(a.object.decay=this.decay),this.penumbra!==void 0&&(a.object.penumbra=this.penumbra),this.shadow!==void 0&&(a.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(a.object.target=this.target.uuid),a}}const Us=new wn,jl=new Je,Hl=new Je;class Zd{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Yt(512,512),this.mapType=wr,this.map=null,this.mapPass=null,this.matrix=new wn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new el,this._frameExtents=new Yt(1,1),this._viewportCount=1,this._viewports=[new fn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const a=this.camera,w=this.matrix;jl.setFromMatrixPosition(e.matrixWorld),a.position.copy(jl),Hl.setFromMatrixPosition(e.target.matrixWorld),a.lookAt(Hl),a.updateMatrixWorld(),Us.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Us,a.coordinateSystem,a.reversedDepth),a.reversedDepth?w.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):w.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),w.multiply(Us)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}const Yl=new wn,_o=new Je,qs=new Je;class $p extends Zd{constructor(){super(new Zn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Yt(4,2),this._viewportCount=6,this._viewports=[new fn(2,1,1,1),new fn(0,1,1,1),new fn(3,1,1,1),new fn(1,1,1,1),new fn(3,0,1,1),new fn(1,0,1,1)],this._cubeDirections=[new Je(1,0,0),new Je(-1,0,0),new Je(0,0,1),new Je(0,0,-1),new Je(0,1,0),new Je(0,-1,0)],this._cubeUps=[new Je(0,1,0),new Je(0,1,0),new Je(0,1,0),new Je(0,1,0),new Je(0,0,1),new Je(0,0,-1)]}updateMatrices(e,a=0){const w=this.camera,T=this.matrix,L=e.distance||w.far;L!==w.far&&(w.far=L,w.updateProjectionMatrix()),_o.setFromMatrixPosition(e.matrixWorld),w.position.copy(_o),qs.copy(w.position),qs.add(this._cubeDirections[a]),w.up.copy(this._cubeUps[a]),w.lookAt(qs),w.updateMatrixWorld(),T.makeTranslation(-_o.x,-_o.y,-_o.z),Yl.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Yl,w.coordinateSystem,w.reversedDepth)}}class eh extends rl{constructor(e,a,w=0,T=2){super(e,a),this.isPointLight=!0,this.type="PointLight",this.distance=w,this.decay=T,this.shadow=new $p}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,a){return super.copy(e,a),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class $d extends Yd{constructor(e=-1,a=1,w=1,T=-1,L=.1,G=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=a,this.top=w,this.bottom=T,this.near=L,this.far=G,this.updateProjectionMatrix()}copy(e,a){return super.copy(e,a),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,a,w,T,L,G){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=a,this.view.offsetX=w,this.view.offsetY=T,this.view.width=L,this.view.height=G,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),a=(this.top-this.bottom)/(2*this.zoom),w=(this.right+this.left)/2,T=(this.top+this.bottom)/2;let L=w-e,G=w+e,Y=T+a,ce=T-a;if(this.view!==null&&this.view.enabled){const P=(this.right-this.left)/this.view.fullWidth/this.zoom,S=(this.top-this.bottom)/this.view.fullHeight/this.zoom;L+=P*this.view.offsetX,G=L+P*this.view.width,Y-=S*this.view.offsetY,ce=Y-S*this.view.height}this.projectionMatrix.makeOrthographic(L,G,Y,ce,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const a=super.toJSON(e);return a.object.zoom=this.zoom,a.object.left=this.left,a.object.right=this.right,a.object.top=this.top,a.object.bottom=this.bottom,a.object.near=this.near,a.object.far=this.far,this.view!==null&&(a.object.view=Object.assign({},this.view)),a}}class th extends Zd{constructor(){super(new $d(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class nh extends rl{constructor(e,a){super(e,a),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.target=new Bn,this.shadow=new th}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class rh extends rl{constructor(e,a){super(e,a),this.isAmbientLight=!0,this.type="AmbientLight"}}class ih extends Zn{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class Wl{constructor(e=1,a=0,w=0){this.radius=e,this.phi=a,this.theta=w}set(e,a,w){return this.radius=e,this.phi=a,this.theta=w,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=$t(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,a,w){return this.radius=Math.sqrt(e*e+a*a+w*w),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,w),this.phi=Math.acos($t(a/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class oh extends Ei{constructor(e,a=null){super(),this.object=e,this.domElement=a,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function Xl(_,e,a,w){const T=ah(w);switch(a){case Bd:return _*e;case Od:return _*e/T.components*T.byteLength;case Xc:return _*e/T.components*T.byteLength;case Rd:return _*e*2/T.components*T.byteLength;case Kc:return _*e*2/T.components*T.byteLength;case Fd:return _*e*3/T.components*T.byteLength;case gr:return _*e*4/T.components*T.byteLength;case Jc:return _*e*4/T.components*T.byteLength;case Ba:case Fa:return Math.floor((_+3)/4)*Math.floor((e+3)/4)*8;case Oa:case Ra:return Math.floor((_+3)/4)*Math.floor((e+3)/4)*16;case hc:case gc:return Math.max(_,16)*Math.max(e,8)/4;case pc:case fc:return Math.max(_,8)*Math.max(e,8)/2;case mc:case yc:return Math.floor((_+3)/4)*Math.floor((e+3)/4)*8;case vc:return Math.floor((_+3)/4)*Math.floor((e+3)/4)*16;case bc:return Math.floor((_+3)/4)*Math.floor((e+3)/4)*16;case xc:return Math.floor((_+4)/5)*Math.floor((e+3)/4)*16;case wc:return Math.floor((_+4)/5)*Math.floor((e+4)/5)*16;case Ac:return Math.floor((_+5)/6)*Math.floor((e+4)/5)*16;case Ec:return Math.floor((_+5)/6)*Math.floor((e+5)/6)*16;case _c:return Math.floor((_+7)/8)*Math.floor((e+4)/5)*16;case Mc:return Math.floor((_+7)/8)*Math.floor((e+5)/6)*16;case Sc:return Math.floor((_+7)/8)*Math.floor((e+7)/8)*16;case Ic:return Math.floor((_+9)/10)*Math.floor((e+4)/5)*16;case Cc:return Math.floor((_+9)/10)*Math.floor((e+5)/6)*16;case Tc:return Math.floor((_+9)/10)*Math.floor((e+7)/8)*16;case Dc:return Math.floor((_+9)/10)*Math.floor((e+9)/10)*16;case kc:return Math.floor((_+11)/12)*Math.floor((e+9)/10)*16;case Pc:return Math.floor((_+11)/12)*Math.floor((e+11)/12)*16;case Na:case Lc:case Bc:return Math.ceil(_/4)*Math.ceil(e/4)*16;case Nd:case Fc:return Math.ceil(_/4)*Math.ceil(e/4)*8;case Oc:case Rc:return Math.ceil(_/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${a} format.`)}function ah(_){switch(_){case wr:case kd:return{byteLength:1,components:1};case Fo:case Pd:case jo:return{byteLength:2,components:1};case Yc:case Wc:return{byteLength:2,components:4};case bi:case Hc:case Fr:return{byteLength:4,components:1};case Ld:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${_}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:jc}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=jc);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function eu(){let _=null,e=!1,a=null,w=null;function T(L,G){a(L,G),w=_.requestAnimationFrame(T)}return{start:function(){e!==!0&&a!==null&&(w=_.requestAnimationFrame(T),e=!0)},stop:function(){_.cancelAnimationFrame(w),e=!1},setAnimationLoop:function(L){a=L},setContext:function(L){_=L}}}function sh(_){const e=new WeakMap;function a(Y,ce){const P=Y.array,S=Y.usage,c=P.byteLength,x=_.createBuffer();_.bindBuffer(ce,x),_.bufferData(ce,P,S),Y.onUploadCallback();let t;if(P instanceof Float32Array)t=_.FLOAT;else if(typeof Float16Array<"u"&&P instanceof Float16Array)t=_.HALF_FLOAT;else if(P instanceof Uint16Array)Y.isFloat16BufferAttribute?t=_.HALF_FLOAT:t=_.UNSIGNED_SHORT;else if(P instanceof Int16Array)t=_.SHORT;else if(P instanceof Uint32Array)t=_.UNSIGNED_INT;else if(P instanceof Int32Array)t=_.INT;else if(P instanceof Int8Array)t=_.BYTE;else if(P instanceof Uint8Array)t=_.UNSIGNED_BYTE;else if(P instanceof Uint8ClampedArray)t=_.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+P);return{buffer:x,type:t,bytesPerElement:P.BYTES_PER_ELEMENT,version:Y.version,size:c}}function w(Y,ce,P){const S=ce.array,c=ce.updateRanges;if(_.bindBuffer(P,Y),c.length===0)_.bufferSubData(P,0,S);else{c.sort((t,l)=>t.start-l.start);let x=0;for(let t=1;t<c.length;t++){const l=c[x],n=c[t];n.start<=l.start+l.count+1?l.count=Math.max(l.count,n.start+n.count-l.start):(++x,c[x]=n)}c.length=x+1;for(let t=0,l=c.length;t<l;t++){const n=c[t];_.bufferSubData(P,n.start*S.BYTES_PER_ELEMENT,S,n.start,n.count)}ce.clearUpdateRanges()}ce.onUploadCallback()}function T(Y){return Y.isInterleavedBufferAttribute&&(Y=Y.data),e.get(Y)}function L(Y){Y.isInterleavedBufferAttribute&&(Y=Y.data);const ce=e.get(Y);ce&&(_.deleteBuffer(ce.buffer),e.delete(Y))}function G(Y,ce){if(Y.isInterleavedBufferAttribute&&(Y=Y.data),Y.isGLBufferAttribute){const S=e.get(Y);(!S||S.version<Y.version)&&e.set(Y,{buffer:Y.buffer,type:Y.type,bytesPerElement:Y.elementSize,version:Y.version});return}const P=e.get(Y);if(P===void 0)e.set(Y,a(Y,ce));else if(P.version<Y.version){if(P.size!==Y.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");w(P.buffer,Y,ce),P.version=Y.version}}return{get:T,remove:L,update:G}}var ch=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,lh=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,dh=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,uh=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ph=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,hh=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,fh=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,gh=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,mh=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,yh=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,vh=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,bh=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,xh=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,wh=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Ah=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Eh=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,_h=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Mh=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Sh=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Ih=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Ch=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Th=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Dh=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,kh=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Ph=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Lh=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Bh=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Fh=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Oh=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Rh=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Nh="gl_FragColor = linearToOutputTexel( gl_FragColor );",Uh=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,qh=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,zh=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Gh=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Vh=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Qh=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,jh=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Hh=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Yh=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Wh=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Xh=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Kh=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Jh=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Zh=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,$h=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ef=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,tf=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,nf=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,rf=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,of=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,af=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,sf=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,cf=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lf=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,df=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,uf=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,pf=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hf=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,ff=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,gf=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,mf=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,yf=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,vf=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bf=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,xf=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,wf=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Af=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Ef=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,_f=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Mf=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Sf=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,If=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Cf=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Tf=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Df=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,kf=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Pf=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Lf=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Bf=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Ff=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Of=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Rf=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Nf=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Uf=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,qf=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,zf=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Gf=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Vf=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Qf=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSEDEPTHBUF
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSEDEPTHBUF
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare , distribution.x );
		#endif
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,jf=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Hf=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Yf=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Wf=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Xf=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Kf=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Jf=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Zf=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,$f=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,eg=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tg=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,ng=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,rg=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,ig=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,og=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ag=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,sg=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const cg=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,lg=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dg=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ug=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pg=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hg=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fg=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,gg=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSEDEPTHBUF
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,mg=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,yg=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vg=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,bg=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xg=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wg=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ag=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Eg=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_g=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Mg=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Sg=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Ig=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Cg=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Tg=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Dg=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kg=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Pg=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Lg=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Bg=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Fg=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Og=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Rg=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ng=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ug=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,qg=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zg=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Jt={alphahash_fragment:ch,alphahash_pars_fragment:lh,alphamap_fragment:dh,alphamap_pars_fragment:uh,alphatest_fragment:ph,alphatest_pars_fragment:hh,aomap_fragment:fh,aomap_pars_fragment:gh,batching_pars_vertex:mh,batching_vertex:yh,begin_vertex:vh,beginnormal_vertex:bh,bsdfs:xh,iridescence_fragment:wh,bumpmap_pars_fragment:Ah,clipping_planes_fragment:Eh,clipping_planes_pars_fragment:_h,clipping_planes_pars_vertex:Mh,clipping_planes_vertex:Sh,color_fragment:Ih,color_pars_fragment:Ch,color_pars_vertex:Th,color_vertex:Dh,common:kh,cube_uv_reflection_fragment:Ph,defaultnormal_vertex:Lh,displacementmap_pars_vertex:Bh,displacementmap_vertex:Fh,emissivemap_fragment:Oh,emissivemap_pars_fragment:Rh,colorspace_fragment:Nh,colorspace_pars_fragment:Uh,envmap_fragment:qh,envmap_common_pars_fragment:zh,envmap_pars_fragment:Gh,envmap_pars_vertex:Vh,envmap_physical_pars_fragment:ef,envmap_vertex:Qh,fog_vertex:jh,fog_pars_vertex:Hh,fog_fragment:Yh,fog_pars_fragment:Wh,gradientmap_pars_fragment:Xh,lightmap_pars_fragment:Kh,lights_lambert_fragment:Jh,lights_lambert_pars_fragment:Zh,lights_pars_begin:$h,lights_toon_fragment:tf,lights_toon_pars_fragment:nf,lights_phong_fragment:rf,lights_phong_pars_fragment:of,lights_physical_fragment:af,lights_physical_pars_fragment:sf,lights_fragment_begin:cf,lights_fragment_maps:lf,lights_fragment_end:df,logdepthbuf_fragment:uf,logdepthbuf_pars_fragment:pf,logdepthbuf_pars_vertex:hf,logdepthbuf_vertex:ff,map_fragment:gf,map_pars_fragment:mf,map_particle_fragment:yf,map_particle_pars_fragment:vf,metalnessmap_fragment:bf,metalnessmap_pars_fragment:xf,morphinstance_vertex:wf,morphcolor_vertex:Af,morphnormal_vertex:Ef,morphtarget_pars_vertex:_f,morphtarget_vertex:Mf,normal_fragment_begin:Sf,normal_fragment_maps:If,normal_pars_fragment:Cf,normal_pars_vertex:Tf,normal_vertex:Df,normalmap_pars_fragment:kf,clearcoat_normal_fragment_begin:Pf,clearcoat_normal_fragment_maps:Lf,clearcoat_pars_fragment:Bf,iridescence_pars_fragment:Ff,opaque_fragment:Of,packing:Rf,premultiplied_alpha_fragment:Nf,project_vertex:Uf,dithering_fragment:qf,dithering_pars_fragment:zf,roughnessmap_fragment:Gf,roughnessmap_pars_fragment:Vf,shadowmap_pars_fragment:Qf,shadowmap_pars_vertex:jf,shadowmap_vertex:Hf,shadowmask_pars_fragment:Yf,skinbase_vertex:Wf,skinning_pars_vertex:Xf,skinning_vertex:Kf,skinnormal_vertex:Jf,specularmap_fragment:Zf,specularmap_pars_fragment:$f,tonemapping_fragment:eg,tonemapping_pars_fragment:tg,transmission_fragment:ng,transmission_pars_fragment:rg,uv_pars_fragment:ig,uv_pars_vertex:og,uv_vertex:ag,worldpos_vertex:sg,background_vert:cg,background_frag:lg,backgroundCube_vert:dg,backgroundCube_frag:ug,cube_vert:pg,cube_frag:hg,depth_vert:fg,depth_frag:gg,distanceRGBA_vert:mg,distanceRGBA_frag:yg,equirect_vert:vg,equirect_frag:bg,linedashed_vert:xg,linedashed_frag:wg,meshbasic_vert:Ag,meshbasic_frag:Eg,meshlambert_vert:_g,meshlambert_frag:Mg,meshmatcap_vert:Sg,meshmatcap_frag:Ig,meshnormal_vert:Cg,meshnormal_frag:Tg,meshphong_vert:Dg,meshphong_frag:kg,meshphysical_vert:Pg,meshphysical_frag:Lg,meshtoon_vert:Bg,meshtoon_frag:Fg,points_vert:Og,points_frag:Rg,shadow_vert:Ng,shadow_frag:Ug,sprite_vert:qg,sprite_frag:zg},wt={common:{diffuse:{value:new rn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Wt}},envmap:{envMap:{value:null},envMapRotation:{value:new Wt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Wt},normalScale:{value:new Yt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new rn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0},uvTransform:{value:new Wt}},sprite:{diffuse:{value:new rn(16777215)},opacity:{value:1},center:{value:new Yt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}}},vr={basic:{uniforms:Vn([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.fog]),vertexShader:Jt.meshbasic_vert,fragmentShader:Jt.meshbasic_frag},lambert:{uniforms:Vn([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new rn(0)}}]),vertexShader:Jt.meshlambert_vert,fragmentShader:Jt.meshlambert_frag},phong:{uniforms:Vn([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new rn(0)},specular:{value:new rn(1118481)},shininess:{value:30}}]),vertexShader:Jt.meshphong_vert,fragmentShader:Jt.meshphong_frag},standard:{uniforms:Vn([wt.common,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.roughnessmap,wt.metalnessmap,wt.fog,wt.lights,{emissive:{value:new rn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Jt.meshphysical_vert,fragmentShader:Jt.meshphysical_frag},toon:{uniforms:Vn([wt.common,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.gradientmap,wt.fog,wt.lights,{emissive:{value:new rn(0)}}]),vertexShader:Jt.meshtoon_vert,fragmentShader:Jt.meshtoon_frag},matcap:{uniforms:Vn([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,{matcap:{value:null}}]),vertexShader:Jt.meshmatcap_vert,fragmentShader:Jt.meshmatcap_frag},points:{uniforms:Vn([wt.points,wt.fog]),vertexShader:Jt.points_vert,fragmentShader:Jt.points_frag},dashed:{uniforms:Vn([wt.common,wt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Jt.linedashed_vert,fragmentShader:Jt.linedashed_frag},depth:{uniforms:Vn([wt.common,wt.displacementmap]),vertexShader:Jt.depth_vert,fragmentShader:Jt.depth_frag},normal:{uniforms:Vn([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,{opacity:{value:1}}]),vertexShader:Jt.meshnormal_vert,fragmentShader:Jt.meshnormal_frag},sprite:{uniforms:Vn([wt.sprite,wt.fog]),vertexShader:Jt.sprite_vert,fragmentShader:Jt.sprite_frag},background:{uniforms:{uvTransform:{value:new Wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Jt.background_vert,fragmentShader:Jt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Wt}},vertexShader:Jt.backgroundCube_vert,fragmentShader:Jt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Jt.cube_vert,fragmentShader:Jt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Jt.equirect_vert,fragmentShader:Jt.equirect_frag},distanceRGBA:{uniforms:Vn([wt.common,wt.displacementmap,{referencePosition:{value:new Je},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Jt.distanceRGBA_vert,fragmentShader:Jt.distanceRGBA_frag},shadow:{uniforms:Vn([wt.lights,wt.fog,{color:{value:new rn(0)},opacity:{value:1}}]),vertexShader:Jt.shadow_vert,fragmentShader:Jt.shadow_frag}};vr.physical={uniforms:Vn([vr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Wt},clearcoatNormalScale:{value:new Yt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Wt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Wt},sheen:{value:0},sheenColor:{value:new rn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Wt},transmissionSamplerSize:{value:new Yt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Wt},attenuationDistance:{value:0},attenuationColor:{value:new rn(0)},specularColor:{value:new rn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Wt},anisotropyVector:{value:new Yt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Wt}}]),vertexShader:Jt.meshphysical_vert,fragmentShader:Jt.meshphysical_frag};const Ta={r:0,b:0,g:0},di=new Nr,Gg=new wn;function Vg(_,e,a,w,T,L,G){const Y=new rn(0);let ce=L===!0?0:1,P,S,c=null,x=0,t=null;function l(d){let u=d.isScene===!0?d.background:null;return u&&u.isTexture&&(u=(d.backgroundBlurriness>0?a:e).get(u)),u}function n(d){let u=!1;const f=l(d);f===null?s(Y,ce):f&&f.isColor&&(s(f,1),u=!0);const y=_.xr.getEnvironmentBlendMode();y==="additive"?w.buffers.color.setClear(0,0,0,1,G):y==="alpha-blend"&&w.buffers.color.setClear(0,0,0,0,G),(_.autoClear||u)&&(w.buffers.depth.setTest(!0),w.buffers.depth.setMask(!0),w.buffers.color.setMask(!0),_.clear(_.autoClearColor,_.autoClearDepth,_.autoClearStencil))}function i(d,u){const f=l(u);f&&(f.isCubeTexture||f.mapping===Ka)?(S===void 0&&(S=new mr(new Wo(1,1,1),new ti({name:"BackgroundCubeMaterial",uniforms:Zi(vr.backgroundCube.uniforms),vertexShader:vr.backgroundCube.vertexShader,fragmentShader:vr.backgroundCube.fragmentShader,side:Yn,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),S.geometry.deleteAttribute("normal"),S.geometry.deleteAttribute("uv"),S.onBeforeRender=function(y,h,p){this.matrixWorld.copyPosition(p.matrixWorld)},Object.defineProperty(S.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),T.update(S)),di.copy(u.backgroundRotation),di.x*=-1,di.y*=-1,di.z*=-1,f.isCubeTexture&&f.isRenderTargetTexture===!1&&(di.y*=-1,di.z*=-1),S.material.uniforms.envMap.value=f,S.material.uniforms.flipEnvMap.value=f.isCubeTexture&&f.isRenderTargetTexture===!1?-1:1,S.material.uniforms.backgroundBlurriness.value=u.backgroundBlurriness,S.material.uniforms.backgroundIntensity.value=u.backgroundIntensity,S.material.uniforms.backgroundRotation.value.setFromMatrix4(Gg.makeRotationFromEuler(di)),S.material.toneMapped=an.getTransfer(f.colorSpace)!==pn,(c!==f||x!==f.version||t!==_.toneMapping)&&(S.material.needsUpdate=!0,c=f,x=f.version,t=_.toneMapping),S.layers.enableAll(),d.unshift(S,S.geometry,S.material,0,0,null)):f&&f.isTexture&&(P===void 0&&(P=new mr(new $a(2,2),new ti({name:"BackgroundMaterial",uniforms:Zi(vr.background.uniforms),vertexShader:vr.background.vertexShader,fragmentShader:vr.background.fragmentShader,side:ei,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),P.geometry.deleteAttribute("normal"),Object.defineProperty(P.material,"map",{get:function(){return this.uniforms.t2D.value}}),T.update(P)),P.material.uniforms.t2D.value=f,P.material.uniforms.backgroundIntensity.value=u.backgroundIntensity,P.material.toneMapped=an.getTransfer(f.colorSpace)!==pn,f.matrixAutoUpdate===!0&&f.updateMatrix(),P.material.uniforms.uvTransform.value.copy(f.matrix),(c!==f||x!==f.version||t!==_.toneMapping)&&(P.material.needsUpdate=!0,c=f,x=f.version,t=_.toneMapping),P.layers.enableAll(),d.unshift(P,P.geometry,P.material,0,0,null))}function s(d,u){d.getRGB(Ta,Hd(_)),w.buffers.color.setClear(Ta.r,Ta.g,Ta.b,u,G)}function g(){S!==void 0&&(S.geometry.dispose(),S.material.dispose(),S=void 0),P!==void 0&&(P.geometry.dispose(),P.material.dispose(),P=void 0)}return{getClearColor:function(){return Y},setClearColor:function(d,u=1){Y.set(d),ce=u,s(Y,ce)},getClearAlpha:function(){return ce},setClearAlpha:function(d){ce=d,s(Y,ce)},render:n,addToRenderList:i,dispose:g}}function Qg(_,e){const a=_.getParameter(_.MAX_VERTEX_ATTRIBS),w={},T=x(null);let L=T,G=!1;function Y(o,m,b,E,M){let D=!1;const A=c(E,b,m);L!==A&&(L=A,P(L.object)),D=t(o,E,b,M),D&&l(o,E,b,M),M!==null&&e.update(M,_.ELEMENT_ARRAY_BUFFER),(D||G)&&(G=!1,u(o,m,b,E),M!==null&&_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,e.get(M).buffer))}function ce(){return _.createVertexArray()}function P(o){return _.bindVertexArray(o)}function S(o){return _.deleteVertexArray(o)}function c(o,m,b){const E=b.wireframe===!0;let M=w[o.id];M===void 0&&(M={},w[o.id]=M);let D=M[m.id];D===void 0&&(D={},M[m.id]=D);let A=D[E];return A===void 0&&(A=x(ce()),D[E]=A),A}function x(o){const m=[],b=[],E=[];for(let M=0;M<a;M++)m[M]=0,b[M]=0,E[M]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:m,enabledAttributes:b,attributeDivisors:E,object:o,attributes:{},index:null}}function t(o,m,b,E){const M=L.attributes,D=m.attributes;let A=0;const v=b.getAttributes();for(const k in v)if(v[k].location>=0){const X=M[k];let te=D[k];if(te===void 0&&(k==="instanceMatrix"&&o.instanceMatrix&&(te=o.instanceMatrix),k==="instanceColor"&&o.instanceColor&&(te=o.instanceColor)),X===void 0||X.attribute!==te||te&&X.data!==te.data)return!0;A++}return L.attributesNum!==A||L.index!==E}function l(o,m,b,E){const M={},D=m.attributes;let A=0;const v=b.getAttributes();for(const k in v)if(v[k].location>=0){let X=D[k];X===void 0&&(k==="instanceMatrix"&&o.instanceMatrix&&(X=o.instanceMatrix),k==="instanceColor"&&o.instanceColor&&(X=o.instanceColor));const te={};te.attribute=X,X&&X.data&&(te.data=X.data),M[k]=te,A++}L.attributes=M,L.attributesNum=A,L.index=E}function n(){const o=L.newAttributes;for(let m=0,b=o.length;m<b;m++)o[m]=0}function i(o){s(o,0)}function s(o,m){const b=L.newAttributes,E=L.enabledAttributes,M=L.attributeDivisors;b[o]=1,E[o]===0&&(_.enableVertexAttribArray(o),E[o]=1),M[o]!==m&&(_.vertexAttribDivisor(o,m),M[o]=m)}function g(){const o=L.newAttributes,m=L.enabledAttributes;for(let b=0,E=m.length;b<E;b++)m[b]!==o[b]&&(_.disableVertexAttribArray(b),m[b]=0)}function d(o,m,b,E,M,D,A){A===!0?_.vertexAttribIPointer(o,m,b,M,D):_.vertexAttribPointer(o,m,b,E,M,D)}function u(o,m,b,E){n();const M=E.attributes,D=b.getAttributes(),A=m.defaultAttributeValues;for(const v in D){const k=D[v];if(k.location>=0){let J=M[v];if(J===void 0&&(v==="instanceMatrix"&&o.instanceMatrix&&(J=o.instanceMatrix),v==="instanceColor"&&o.instanceColor&&(J=o.instanceColor)),J!==void 0){const X=J.normalized,te=J.itemSize,H=e.get(J);if(H===void 0)continue;const z=H.buffer,B=H.type,F=H.bytesPerElement,$=B===_.INT||B===_.UNSIGNED_INT||J.gpuType===Hc;if(J.isInterleavedBufferAttribute){const re=J.data,K=re.stride,ue=J.offset;if(re.isInstancedInterleavedBuffer){for(let ie=0;ie<k.locationSize;ie++)s(k.location+ie,re.meshPerAttribute);o.isInstancedMesh!==!0&&E._maxInstanceCount===void 0&&(E._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let ie=0;ie<k.locationSize;ie++)i(k.location+ie);_.bindBuffer(_.ARRAY_BUFFER,z);for(let ie=0;ie<k.locationSize;ie++)d(k.location+ie,te/k.locationSize,B,X,K*F,(ue+te/k.locationSize*ie)*F,$)}else{if(J.isInstancedBufferAttribute){for(let re=0;re<k.locationSize;re++)s(k.location+re,J.meshPerAttribute);o.isInstancedMesh!==!0&&E._maxInstanceCount===void 0&&(E._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let re=0;re<k.locationSize;re++)i(k.location+re);_.bindBuffer(_.ARRAY_BUFFER,z);for(let re=0;re<k.locationSize;re++)d(k.location+re,te/k.locationSize,B,X,te*F,te/k.locationSize*re*F,$)}}else if(A!==void 0){const X=A[v];if(X!==void 0)switch(X.length){case 2:_.vertexAttrib2fv(k.location,X);break;case 3:_.vertexAttrib3fv(k.location,X);break;case 4:_.vertexAttrib4fv(k.location,X);break;default:_.vertexAttrib1fv(k.location,X)}}}}g()}function f(){p();for(const o in w){const m=w[o];for(const b in m){const E=m[b];for(const M in E)S(E[M].object),delete E[M];delete m[b]}delete w[o]}}function y(o){if(w[o.id]===void 0)return;const m=w[o.id];for(const b in m){const E=m[b];for(const M in E)S(E[M].object),delete E[M];delete m[b]}delete w[o.id]}function h(o){for(const m in w){const b=w[m];if(b[o.id]===void 0)continue;const E=b[o.id];for(const M in E)S(E[M].object),delete E[M];delete b[o.id]}}function p(){r(),G=!0,L!==T&&(L=T,P(L.object))}function r(){T.geometry=null,T.program=null,T.wireframe=!1}return{setup:Y,reset:p,resetDefaultState:r,dispose:f,releaseStatesOfGeometry:y,releaseStatesOfProgram:h,initAttributes:n,enableAttribute:i,disableUnusedAttributes:g}}function jg(_,e,a){let w;function T(P){w=P}function L(P,S){_.drawArrays(w,P,S),a.update(S,w,1)}function G(P,S,c){c!==0&&(_.drawArraysInstanced(w,P,S,c),a.update(S,w,c))}function Y(P,S,c){if(c===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(w,P,0,S,0,c);let t=0;for(let l=0;l<c;l++)t+=S[l];a.update(t,w,1)}function ce(P,S,c,x){if(c===0)return;const t=e.get("WEBGL_multi_draw");if(t===null)for(let l=0;l<P.length;l++)G(P[l],S[l],x[l]);else{t.multiDrawArraysInstancedWEBGL(w,P,0,S,0,x,0,c);let l=0;for(let n=0;n<c;n++)l+=S[n]*x[n];a.update(l,w,1)}}this.setMode=T,this.render=L,this.renderInstances=G,this.renderMultiDraw=Y,this.renderMultiDrawInstances=ce}function Hg(_,e,a,w){let T;function L(){if(T!==void 0)return T;if(e.has("EXT_texture_filter_anisotropic")===!0){const h=e.get("EXT_texture_filter_anisotropic");T=_.getParameter(h.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else T=0;return T}function G(h){return!(h!==gr&&w.convert(h)!==_.getParameter(_.IMPLEMENTATION_COLOR_READ_FORMAT))}function Y(h){const p=h===jo&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(h!==wr&&w.convert(h)!==_.getParameter(_.IMPLEMENTATION_COLOR_READ_TYPE)&&h!==Fr&&!p)}function ce(h){if(h==="highp"){if(_.getShaderPrecisionFormat(_.VERTEX_SHADER,_.HIGH_FLOAT).precision>0&&_.getShaderPrecisionFormat(_.FRAGMENT_SHADER,_.HIGH_FLOAT).precision>0)return"highp";h="mediump"}return h==="mediump"&&_.getShaderPrecisionFormat(_.VERTEX_SHADER,_.MEDIUM_FLOAT).precision>0&&_.getShaderPrecisionFormat(_.FRAGMENT_SHADER,_.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let P=a.precision!==void 0?a.precision:"highp";const S=ce(P);S!==P&&(console.warn("THREE.WebGLRenderer:",P,"not supported, using",S,"instead."),P=S);const c=a.logarithmicDepthBuffer===!0,x=a.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),t=_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS),l=_.getParameter(_.MAX_VERTEX_TEXTURE_IMAGE_UNITS),n=_.getParameter(_.MAX_TEXTURE_SIZE),i=_.getParameter(_.MAX_CUBE_MAP_TEXTURE_SIZE),s=_.getParameter(_.MAX_VERTEX_ATTRIBS),g=_.getParameter(_.MAX_VERTEX_UNIFORM_VECTORS),d=_.getParameter(_.MAX_VARYING_VECTORS),u=_.getParameter(_.MAX_FRAGMENT_UNIFORM_VECTORS),f=l>0,y=_.getParameter(_.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:L,getMaxPrecision:ce,textureFormatReadable:G,textureTypeReadable:Y,precision:P,logarithmicDepthBuffer:c,reversedDepthBuffer:x,maxTextures:t,maxVertexTextures:l,maxTextureSize:n,maxCubemapSize:i,maxAttributes:s,maxVertexUniforms:g,maxVaryings:d,maxFragmentUniforms:u,vertexTextures:f,maxSamples:y}}function Yg(_){const e=this;let a=null,w=0,T=!1,L=!1;const G=new Xr,Y=new Wt,ce={value:null,needsUpdate:!1};this.uniform=ce,this.numPlanes=0,this.numIntersection=0,this.init=function(c,x){const t=c.length!==0||x||w!==0||T;return T=x,w=c.length,t},this.beginShadows=function(){L=!0,S(null)},this.endShadows=function(){L=!1},this.setGlobalState=function(c,x){a=S(c,x,0)},this.setState=function(c,x,t){const l=c.clippingPlanes,n=c.clipIntersection,i=c.clipShadows,s=_.get(c);if(!T||l===null||l.length===0||L&&!i)L?S(null):P();else{const g=L?0:w,d=g*4;let u=s.clippingState||null;ce.value=u,u=S(l,x,d,t);for(let f=0;f!==d;++f)u[f]=a[f];s.clippingState=u,this.numIntersection=n?this.numPlanes:0,this.numPlanes+=g}};function P(){ce.value!==a&&(ce.value=a,ce.needsUpdate=w>0),e.numPlanes=w,e.numIntersection=0}function S(c,x,t,l){const n=c!==null?c.length:0;let i=null;if(n!==0){if(i=ce.value,l!==!0||i===null){const s=t+n*4,g=x.matrixWorldInverse;Y.getNormalMatrix(g),(i===null||i.length<s)&&(i=new Float32Array(s));for(let d=0,u=t;d!==n;++d,u+=4)G.copy(c[d]).applyMatrix4(g,Y),G.normal.toArray(i,u),i[u+3]=G.constant}ce.value=i,ce.needsUpdate=!0}return e.numPlanes=n,e.numIntersection=0,i}}function Wg(_){let e=new WeakMap;function a(G,Y){return Y===cc?G.mapping=Xi:Y===lc&&(G.mapping=Ki),G}function w(G){if(G&&G.isTexture){const Y=G.mapping;if(Y===cc||Y===lc)if(e.has(G)){const ce=e.get(G).texture;return a(ce,G.mapping)}else{const ce=G.image;if(ce&&ce.height>0){const P=new Qp(ce.height);return P.fromEquirectangularTexture(_,G),e.set(G,P),G.addEventListener("dispose",T),a(P.texture,G.mapping)}else return null}}return G}function T(G){const Y=G.target;Y.removeEventListener("dispose",T);const ce=e.get(Y);ce!==void 0&&(e.delete(Y),ce.dispose())}function L(){e=new WeakMap}return{get:w,dispose:L}}const Gi=4,Kl=[.125,.215,.35,.446,.526,.582],gi=20,zs=new $d,Jl=new rn;let Gs=null,Vs=0,Qs=0,js=!1;const pi=(1+Math.sqrt(5))/2,Ui=1/pi,Zl=[new Je(-pi,Ui,0),new Je(pi,Ui,0),new Je(-Ui,0,pi),new Je(Ui,0,pi),new Je(0,pi,-Ui),new Je(0,pi,Ui),new Je(-1,1,-1),new Je(1,1,-1),new Je(-1,1,1),new Je(1,1,1)],Xg=new Je;class $l{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,a=0,w=.1,T=100,L={}){const{size:G=256,position:Y=Xg}=L;Gs=this._renderer.getRenderTarget(),Vs=this._renderer.getActiveCubeFace(),Qs=this._renderer.getActiveMipmapLevel(),js=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(G);const ce=this._allocateTargets();return ce.depthBuffer=!0,this._sceneToCubeUV(e,w,T,ce,Y),a>0&&this._blur(ce,0,0,a),this._applyPMREM(ce),this._cleanup(ce),ce}fromEquirectangular(e,a=null){return this._fromTexture(e,a)}fromCubemap(e,a=null){return this._fromTexture(e,a)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=nd(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=td(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Gs,Vs,Qs),this._renderer.xr.enabled=js,e.scissorTest=!1,Da(e,0,0,e.width,e.height)}_fromTexture(e,a){e.mapping===Xi||e.mapping===Ki?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Gs=this._renderer.getRenderTarget(),Vs=this._renderer.getActiveCubeFace(),Qs=this._renderer.getActiveMipmapLevel(),js=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const w=a||this._allocateTargets();return this._textureToCubeUV(e,w),this._applyPMREM(w),this._cleanup(w),w}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),a=4*this._cubeSize,w={magFilter:cr,minFilter:cr,generateMipmaps:!1,type:jo,format:gr,colorSpace:Ji,depthBuffer:!1},T=ed(e,a,w);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==a){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=ed(e,a,w);const{_lodMax:L}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Kg(L)),this._blurMaterial=Jg(L,e,a)}return T}_compileMaterial(e){const a=new mr(this._lodPlanes[0],e);this._renderer.compile(a,zs)}_sceneToCubeUV(e,a,w,T,L){const ce=new Zn(90,1,a,w),P=[1,-1,1,1,1,1],S=[1,1,1,-1,-1,-1],c=this._renderer,x=c.autoClear,t=c.toneMapping;c.getClearColor(Jl),c.toneMapping=Zr,c.autoClear=!1,c.state.buffers.depth.getReversed()&&(c.setRenderTarget(T),c.clearDepth(),c.setRenderTarget(null));const n=new Za({name:"PMREM.Background",side:Yn,depthWrite:!1,depthTest:!1}),i=new mr(new Wo,n);let s=!1;const g=e.background;g?g.isColor&&(n.color.copy(g),e.background=null,s=!0):(n.color.copy(Jl),s=!0);for(let d=0;d<6;d++){const u=d%3;u===0?(ce.up.set(0,P[d],0),ce.position.set(L.x,L.y,L.z),ce.lookAt(L.x+S[d],L.y,L.z)):u===1?(ce.up.set(0,0,P[d]),ce.position.set(L.x,L.y,L.z),ce.lookAt(L.x,L.y+S[d],L.z)):(ce.up.set(0,P[d],0),ce.position.set(L.x,L.y,L.z),ce.lookAt(L.x,L.y,L.z+S[d]));const f=this._cubeSize;Da(T,u*f,d>2?f:0,f,f),c.setRenderTarget(T),s&&c.render(i,ce),c.render(e,ce)}i.geometry.dispose(),i.material.dispose(),c.toneMapping=t,c.autoClear=x,e.background=g}_textureToCubeUV(e,a){const w=this._renderer,T=e.mapping===Xi||e.mapping===Ki;T?(this._cubemapMaterial===null&&(this._cubemapMaterial=nd()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=td());const L=T?this._cubemapMaterial:this._equirectMaterial,G=new mr(this._lodPlanes[0],L),Y=L.uniforms;Y.envMap.value=e;const ce=this._cubeSize;Da(a,0,0,3*ce,2*ce),w.setRenderTarget(a),w.render(G,zs)}_applyPMREM(e){const a=this._renderer,w=a.autoClear;a.autoClear=!1;const T=this._lodPlanes.length;for(let L=1;L<T;L++){const G=Math.sqrt(this._sigmas[L]*this._sigmas[L]-this._sigmas[L-1]*this._sigmas[L-1]),Y=Zl[(T-L-1)%Zl.length];this._blur(e,L-1,L,G,Y)}a.autoClear=w}_blur(e,a,w,T,L){const G=this._pingPongRenderTarget;this._halfBlur(e,G,a,w,T,"latitudinal",L),this._halfBlur(G,e,w,w,T,"longitudinal",L)}_halfBlur(e,a,w,T,L,G,Y){const ce=this._renderer,P=this._blurMaterial;G!=="latitudinal"&&G!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const S=3,c=new mr(this._lodPlanes[T],P),x=P.uniforms,t=this._sizeLods[w]-1,l=isFinite(L)?Math.PI/(2*t):2*Math.PI/(2*gi-1),n=L/l,i=isFinite(L)?1+Math.floor(S*n):gi;i>gi&&console.warn(`sigmaRadians, ${L}, is too large and will clip, as it requested ${i} samples when the maximum is set to ${gi}`);const s=[];let g=0;for(let h=0;h<gi;++h){const p=h/n,r=Math.exp(-p*p/2);s.push(r),h===0?g+=r:h<i&&(g+=2*r)}for(let h=0;h<s.length;h++)s[h]=s[h]/g;x.envMap.value=e.texture,x.samples.value=i,x.weights.value=s,x.latitudinal.value=G==="latitudinal",Y&&(x.poleAxis.value=Y);const{_lodMax:d}=this;x.dTheta.value=l,x.mipInt.value=d-w;const u=this._sizeLods[T],f=3*u*(T>d-Gi?T-d+Gi:0),y=4*(this._cubeSize-u);Da(a,f,y,3*u,2*u),ce.setRenderTarget(a),ce.render(c,zs)}}function Kg(_){const e=[],a=[],w=[];let T=_;const L=_-Gi+1+Kl.length;for(let G=0;G<L;G++){const Y=Math.pow(2,T);a.push(Y);let ce=1/Y;G>_-Gi?ce=Kl[G-_+Gi-1]:G===0&&(ce=0),w.push(ce);const P=1/(Y-2),S=-P,c=1+P,x=[S,S,c,S,c,c,S,S,c,c,S,c],t=6,l=6,n=3,i=2,s=1,g=new Float32Array(n*l*t),d=new Float32Array(i*l*t),u=new Float32Array(s*l*t);for(let y=0;y<t;y++){const h=y%3*2/3-1,p=y>2?0:-1,r=[h,p,0,h+2/3,p,0,h+2/3,p+1,0,h,p,0,h+2/3,p+1,0,h,p+1,0];g.set(r,n*l*y),d.set(x,i*l*y);const o=[y,y,y,y,y,y];u.set(o,s*l*y)}const f=new Ar;f.setAttribute("position",new xr(g,n)),f.setAttribute("uv",new xr(d,i)),f.setAttribute("faceIndex",new xr(u,s)),e.push(f),T>Gi&&T--}return{lodPlanes:e,sizeLods:a,sigmas:w}}function ed(_,e,a){const w=new wi(_,e,a);return w.texture.mapping=Ka,w.texture.name="PMREM.cubeUv",w.scissorTest=!0,w}function Da(_,e,a,w,T){_.viewport.set(e,a,w,T),_.scissor.set(e,a,w,T)}function Jg(_,e,a){const w=new Float32Array(gi),T=new Je(0,1,0);return new ti({name:"SphericalGaussianBlur",defines:{n:gi,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/a,CUBEUV_MAX_MIP:`${_}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:w},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:T}},vertexShader:il(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Jr,depthTest:!1,depthWrite:!1})}function td(){return new ti({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:il(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Jr,depthTest:!1,depthWrite:!1})}function nd(){return new ti({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:il(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Jr,depthTest:!1,depthWrite:!1})}function il(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Zg(_){let e=new WeakMap,a=null;function w(Y){if(Y&&Y.isTexture){const ce=Y.mapping,P=ce===cc||ce===lc,S=ce===Xi||ce===Ki;if(P||S){let c=e.get(Y);const x=c!==void 0?c.texture.pmremVersion:0;if(Y.isRenderTargetTexture&&Y.pmremVersion!==x)return a===null&&(a=new $l(_)),c=P?a.fromEquirectangular(Y,c):a.fromCubemap(Y,c),c.texture.pmremVersion=Y.pmremVersion,e.set(Y,c),c.texture;if(c!==void 0)return c.texture;{const t=Y.image;return P&&t&&t.height>0||S&&t&&T(t)?(a===null&&(a=new $l(_)),c=P?a.fromEquirectangular(Y):a.fromCubemap(Y),c.texture.pmremVersion=Y.pmremVersion,e.set(Y,c),Y.addEventListener("dispose",L),c.texture):null}}}return Y}function T(Y){let ce=0;const P=6;for(let S=0;S<P;S++)Y[S]!==void 0&&ce++;return ce===P}function L(Y){const ce=Y.target;ce.removeEventListener("dispose",L);const P=e.get(ce);P!==void 0&&(e.delete(ce),P.dispose())}function G(){e=new WeakMap,a!==null&&(a.dispose(),a=null)}return{get:w,dispose:G}}function $g(_){const e={};function a(w){if(e[w]!==void 0)return e[w];let T;switch(w){case"WEBGL_depth_texture":T=_.getExtension("WEBGL_depth_texture")||_.getExtension("MOZ_WEBGL_depth_texture")||_.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":T=_.getExtension("EXT_texture_filter_anisotropic")||_.getExtension("MOZ_EXT_texture_filter_anisotropic")||_.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":T=_.getExtension("WEBGL_compressed_texture_s3tc")||_.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":T=_.getExtension("WEBGL_compressed_texture_pvrtc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:T=_.getExtension(w)}return e[w]=T,T}return{has:function(w){return a(w)!==null},init:function(){a("EXT_color_buffer_float"),a("WEBGL_clip_cull_distance"),a("OES_texture_float_linear"),a("EXT_color_buffer_half_float"),a("WEBGL_multisampled_render_to_texture"),a("WEBGL_render_shared_exponent")},get:function(w){const T=a(w);return T===null&&ji("THREE.WebGLRenderer: "+w+" extension not supported."),T}}}function em(_,e,a,w){const T={},L=new WeakMap;function G(c){const x=c.target;x.index!==null&&e.remove(x.index);for(const l in x.attributes)e.remove(x.attributes[l]);x.removeEventListener("dispose",G),delete T[x.id];const t=L.get(x);t&&(e.remove(t),L.delete(x)),w.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,a.memory.geometries--}function Y(c,x){return T[x.id]===!0||(x.addEventListener("dispose",G),T[x.id]=!0,a.memory.geometries++),x}function ce(c){const x=c.attributes;for(const t in x)e.update(x[t],_.ARRAY_BUFFER)}function P(c){const x=[],t=c.index,l=c.attributes.position;let n=0;if(t!==null){const g=t.array;n=t.version;for(let d=0,u=g.length;d<u;d+=3){const f=g[d+0],y=g[d+1],h=g[d+2];x.push(f,y,y,h,h,f)}}else if(l!==void 0){const g=l.array;n=l.version;for(let d=0,u=g.length/3-1;d<u;d+=3){const f=d+0,y=d+1,h=d+2;x.push(f,y,y,h,h,f)}}else return;const i=new(qd(x)?jd:Qd)(x,1);i.version=n;const s=L.get(c);s&&e.remove(s),L.set(c,i)}function S(c){const x=L.get(c);if(x){const t=c.index;t!==null&&x.version<t.version&&P(c)}else P(c);return L.get(c)}return{get:Y,update:ce,getWireframeAttribute:S}}function tm(_,e,a){let w;function T(x){w=x}let L,G;function Y(x){L=x.type,G=x.bytesPerElement}function ce(x,t){_.drawElements(w,t,L,x*G),a.update(t,w,1)}function P(x,t,l){l!==0&&(_.drawElementsInstanced(w,t,L,x*G,l),a.update(t,w,l))}function S(x,t,l){if(l===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(w,t,0,L,x,0,l);let i=0;for(let s=0;s<l;s++)i+=t[s];a.update(i,w,1)}function c(x,t,l,n){if(l===0)return;const i=e.get("WEBGL_multi_draw");if(i===null)for(let s=0;s<x.length;s++)P(x[s]/G,t[s],n[s]);else{i.multiDrawElementsInstancedWEBGL(w,t,0,L,x,0,n,0,l);let s=0;for(let g=0;g<l;g++)s+=t[g]*n[g];a.update(s,w,1)}}this.setMode=T,this.setIndex=Y,this.render=ce,this.renderInstances=P,this.renderMultiDraw=S,this.renderMultiDrawInstances=c}function nm(_){const e={geometries:0,textures:0},a={frame:0,calls:0,triangles:0,points:0,lines:0};function w(L,G,Y){switch(a.calls++,G){case _.TRIANGLES:a.triangles+=Y*(L/3);break;case _.LINES:a.lines+=Y*(L/2);break;case _.LINE_STRIP:a.lines+=Y*(L-1);break;case _.LINE_LOOP:a.lines+=Y*L;break;case _.POINTS:a.points+=Y*L;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",G);break}}function T(){a.calls=0,a.triangles=0,a.points=0,a.lines=0}return{memory:e,render:a,programs:null,autoReset:!0,reset:T,update:w}}function rm(_,e,a){const w=new WeakMap,T=new fn;function L(G,Y,ce){const P=G.morphTargetInfluences,S=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,c=S!==void 0?S.length:0;let x=w.get(Y);if(x===void 0||x.count!==c){let o=function(){p.dispose(),w.delete(Y),Y.removeEventListener("dispose",o)};var t=o;x!==void 0&&x.texture.dispose();const l=Y.morphAttributes.position!==void 0,n=Y.morphAttributes.normal!==void 0,i=Y.morphAttributes.color!==void 0,s=Y.morphAttributes.position||[],g=Y.morphAttributes.normal||[],d=Y.morphAttributes.color||[];let u=0;l===!0&&(u=1),n===!0&&(u=2),i===!0&&(u=3);let f=Y.attributes.position.count*u,y=1;f>e.maxTextureSize&&(y=Math.ceil(f/e.maxTextureSize),f=e.maxTextureSize);const h=new Float32Array(f*y*4*c),p=new zd(h,f,y,c);p.type=Fr,p.needsUpdate=!0;const r=u*4;for(let m=0;m<c;m++){const b=s[m],E=g[m],M=d[m],D=f*y*4*m;for(let A=0;A<b.count;A++){const v=A*r;l===!0&&(T.fromBufferAttribute(b,A),h[D+v+0]=T.x,h[D+v+1]=T.y,h[D+v+2]=T.z,h[D+v+3]=0),n===!0&&(T.fromBufferAttribute(E,A),h[D+v+4]=T.x,h[D+v+5]=T.y,h[D+v+6]=T.z,h[D+v+7]=0),i===!0&&(T.fromBufferAttribute(M,A),h[D+v+8]=T.x,h[D+v+9]=T.y,h[D+v+10]=T.z,h[D+v+11]=M.itemSize===4?T.w:1)}}x={count:c,texture:p,size:new Yt(f,y)},w.set(Y,x),Y.addEventListener("dispose",o)}if(G.isInstancedMesh===!0&&G.morphTexture!==null)ce.getUniforms().setValue(_,"morphTexture",G.morphTexture,a);else{let l=0;for(let i=0;i<P.length;i++)l+=P[i];const n=Y.morphTargetsRelative?1:1-l;ce.getUniforms().setValue(_,"morphTargetBaseInfluence",n),ce.getUniforms().setValue(_,"morphTargetInfluences",P)}ce.getUniforms().setValue(_,"morphTargetsTexture",x.texture,a),ce.getUniforms().setValue(_,"morphTargetsTextureSize",x.size)}return{update:L}}function im(_,e,a,w){let T=new WeakMap;function L(ce){const P=w.render.frame,S=ce.geometry,c=e.get(ce,S);if(T.get(c)!==P&&(e.update(c),T.set(c,P)),ce.isInstancedMesh&&(ce.hasEventListener("dispose",Y)===!1&&ce.addEventListener("dispose",Y),T.get(ce)!==P&&(a.update(ce.instanceMatrix,_.ARRAY_BUFFER),ce.instanceColor!==null&&a.update(ce.instanceColor,_.ARRAY_BUFFER),T.set(ce,P))),ce.isSkinnedMesh){const x=ce.skeleton;T.get(x)!==P&&(x.update(),T.set(x,P))}return c}function G(){T=new WeakMap}function Y(ce){const P=ce.target;P.removeEventListener("dispose",Y),a.remove(P.instanceMatrix),P.instanceColor!==null&&a.remove(P.instanceColor)}return{update:L,dispose:G}}const tu=new Qn,rd=new Jd(1,1),nu=new zd,ru=new Ip,iu=new Wd,id=[],od=[],ad=new Float32Array(16),sd=new Float32Array(9),cd=new Float32Array(4);function ro(_,e,a){const w=_[0];if(w<=0||w>0)return _;const T=e*a;let L=id[T];if(L===void 0&&(L=new Float32Array(T),id[T]=L),e!==0){w.toArray(L,0);for(let G=1,Y=0;G!==e;++G)Y+=a,_[G].toArray(L,Y)}return L}function Tn(_,e){if(_.length!==e.length)return!1;for(let a=0,w=_.length;a<w;a++)if(_[a]!==e[a])return!1;return!0}function Dn(_,e){for(let a=0,w=e.length;a<w;a++)_[a]=e[a]}function es(_,e){let a=od[e];a===void 0&&(a=new Int32Array(e),od[e]=a);for(let w=0;w!==e;++w)a[w]=_.allocateTextureUnit();return a}function om(_,e){const a=this.cache;a[0]!==e&&(_.uniform1f(this.addr,e),a[0]=e)}function am(_,e){const a=this.cache;if(e.x!==void 0)(a[0]!==e.x||a[1]!==e.y)&&(_.uniform2f(this.addr,e.x,e.y),a[0]=e.x,a[1]=e.y);else{if(Tn(a,e))return;_.uniform2fv(this.addr,e),Dn(a,e)}}function sm(_,e){const a=this.cache;if(e.x!==void 0)(a[0]!==e.x||a[1]!==e.y||a[2]!==e.z)&&(_.uniform3f(this.addr,e.x,e.y,e.z),a[0]=e.x,a[1]=e.y,a[2]=e.z);else if(e.r!==void 0)(a[0]!==e.r||a[1]!==e.g||a[2]!==e.b)&&(_.uniform3f(this.addr,e.r,e.g,e.b),a[0]=e.r,a[1]=e.g,a[2]=e.b);else{if(Tn(a,e))return;_.uniform3fv(this.addr,e),Dn(a,e)}}function cm(_,e){const a=this.cache;if(e.x!==void 0)(a[0]!==e.x||a[1]!==e.y||a[2]!==e.z||a[3]!==e.w)&&(_.uniform4f(this.addr,e.x,e.y,e.z,e.w),a[0]=e.x,a[1]=e.y,a[2]=e.z,a[3]=e.w);else{if(Tn(a,e))return;_.uniform4fv(this.addr,e),Dn(a,e)}}function lm(_,e){const a=this.cache,w=e.elements;if(w===void 0){if(Tn(a,e))return;_.uniformMatrix2fv(this.addr,!1,e),Dn(a,e)}else{if(Tn(a,w))return;cd.set(w),_.uniformMatrix2fv(this.addr,!1,cd),Dn(a,w)}}function dm(_,e){const a=this.cache,w=e.elements;if(w===void 0){if(Tn(a,e))return;_.uniformMatrix3fv(this.addr,!1,e),Dn(a,e)}else{if(Tn(a,w))return;sd.set(w),_.uniformMatrix3fv(this.addr,!1,sd),Dn(a,w)}}function um(_,e){const a=this.cache,w=e.elements;if(w===void 0){if(Tn(a,e))return;_.uniformMatrix4fv(this.addr,!1,e),Dn(a,e)}else{if(Tn(a,w))return;ad.set(w),_.uniformMatrix4fv(this.addr,!1,ad),Dn(a,w)}}function pm(_,e){const a=this.cache;a[0]!==e&&(_.uniform1i(this.addr,e),a[0]=e)}function hm(_,e){const a=this.cache;if(e.x!==void 0)(a[0]!==e.x||a[1]!==e.y)&&(_.uniform2i(this.addr,e.x,e.y),a[0]=e.x,a[1]=e.y);else{if(Tn(a,e))return;_.uniform2iv(this.addr,e),Dn(a,e)}}function fm(_,e){const a=this.cache;if(e.x!==void 0)(a[0]!==e.x||a[1]!==e.y||a[2]!==e.z)&&(_.uniform3i(this.addr,e.x,e.y,e.z),a[0]=e.x,a[1]=e.y,a[2]=e.z);else{if(Tn(a,e))return;_.uniform3iv(this.addr,e),Dn(a,e)}}function gm(_,e){const a=this.cache;if(e.x!==void 0)(a[0]!==e.x||a[1]!==e.y||a[2]!==e.z||a[3]!==e.w)&&(_.uniform4i(this.addr,e.x,e.y,e.z,e.w),a[0]=e.x,a[1]=e.y,a[2]=e.z,a[3]=e.w);else{if(Tn(a,e))return;_.uniform4iv(this.addr,e),Dn(a,e)}}function mm(_,e){const a=this.cache;a[0]!==e&&(_.uniform1ui(this.addr,e),a[0]=e)}function ym(_,e){const a=this.cache;if(e.x!==void 0)(a[0]!==e.x||a[1]!==e.y)&&(_.uniform2ui(this.addr,e.x,e.y),a[0]=e.x,a[1]=e.y);else{if(Tn(a,e))return;_.uniform2uiv(this.addr,e),Dn(a,e)}}function vm(_,e){const a=this.cache;if(e.x!==void 0)(a[0]!==e.x||a[1]!==e.y||a[2]!==e.z)&&(_.uniform3ui(this.addr,e.x,e.y,e.z),a[0]=e.x,a[1]=e.y,a[2]=e.z);else{if(Tn(a,e))return;_.uniform3uiv(this.addr,e),Dn(a,e)}}function bm(_,e){const a=this.cache;if(e.x!==void 0)(a[0]!==e.x||a[1]!==e.y||a[2]!==e.z||a[3]!==e.w)&&(_.uniform4ui(this.addr,e.x,e.y,e.z,e.w),a[0]=e.x,a[1]=e.y,a[2]=e.z,a[3]=e.w);else{if(Tn(a,e))return;_.uniform4uiv(this.addr,e),Dn(a,e)}}function xm(_,e,a){const w=this.cache,T=a.allocateTextureUnit();w[0]!==T&&(_.uniform1i(this.addr,T),w[0]=T);let L;this.type===_.SAMPLER_2D_SHADOW?(rd.compareFunction=Ud,L=rd):L=tu,a.setTexture2D(e||L,T)}function wm(_,e,a){const w=this.cache,T=a.allocateTextureUnit();w[0]!==T&&(_.uniform1i(this.addr,T),w[0]=T),a.setTexture3D(e||ru,T)}function Am(_,e,a){const w=this.cache,T=a.allocateTextureUnit();w[0]!==T&&(_.uniform1i(this.addr,T),w[0]=T),a.setTextureCube(e||iu,T)}function Em(_,e,a){const w=this.cache,T=a.allocateTextureUnit();w[0]!==T&&(_.uniform1i(this.addr,T),w[0]=T),a.setTexture2DArray(e||nu,T)}function _m(_){switch(_){case 5126:return om;case 35664:return am;case 35665:return sm;case 35666:return cm;case 35674:return lm;case 35675:return dm;case 35676:return um;case 5124:case 35670:return pm;case 35667:case 35671:return hm;case 35668:case 35672:return fm;case 35669:case 35673:return gm;case 5125:return mm;case 36294:return ym;case 36295:return vm;case 36296:return bm;case 35678:case 36198:case 36298:case 36306:case 35682:return xm;case 35679:case 36299:case 36307:return wm;case 35680:case 36300:case 36308:case 36293:return Am;case 36289:case 36303:case 36311:case 36292:return Em}}function Mm(_,e){_.uniform1fv(this.addr,e)}function Sm(_,e){const a=ro(e,this.size,2);_.uniform2fv(this.addr,a)}function Im(_,e){const a=ro(e,this.size,3);_.uniform3fv(this.addr,a)}function Cm(_,e){const a=ro(e,this.size,4);_.uniform4fv(this.addr,a)}function Tm(_,e){const a=ro(e,this.size,4);_.uniformMatrix2fv(this.addr,!1,a)}function Dm(_,e){const a=ro(e,this.size,9);_.uniformMatrix3fv(this.addr,!1,a)}function km(_,e){const a=ro(e,this.size,16);_.uniformMatrix4fv(this.addr,!1,a)}function Pm(_,e){_.uniform1iv(this.addr,e)}function Lm(_,e){_.uniform2iv(this.addr,e)}function Bm(_,e){_.uniform3iv(this.addr,e)}function Fm(_,e){_.uniform4iv(this.addr,e)}function Om(_,e){_.uniform1uiv(this.addr,e)}function Rm(_,e){_.uniform2uiv(this.addr,e)}function Nm(_,e){_.uniform3uiv(this.addr,e)}function Um(_,e){_.uniform4uiv(this.addr,e)}function qm(_,e,a){const w=this.cache,T=e.length,L=es(a,T);Tn(w,L)||(_.uniform1iv(this.addr,L),Dn(w,L));for(let G=0;G!==T;++G)a.setTexture2D(e[G]||tu,L[G])}function zm(_,e,a){const w=this.cache,T=e.length,L=es(a,T);Tn(w,L)||(_.uniform1iv(this.addr,L),Dn(w,L));for(let G=0;G!==T;++G)a.setTexture3D(e[G]||ru,L[G])}function Gm(_,e,a){const w=this.cache,T=e.length,L=es(a,T);Tn(w,L)||(_.uniform1iv(this.addr,L),Dn(w,L));for(let G=0;G!==T;++G)a.setTextureCube(e[G]||iu,L[G])}function Vm(_,e,a){const w=this.cache,T=e.length,L=es(a,T);Tn(w,L)||(_.uniform1iv(this.addr,L),Dn(w,L));for(let G=0;G!==T;++G)a.setTexture2DArray(e[G]||nu,L[G])}function Qm(_){switch(_){case 5126:return Mm;case 35664:return Sm;case 35665:return Im;case 35666:return Cm;case 35674:return Tm;case 35675:return Dm;case 35676:return km;case 5124:case 35670:return Pm;case 35667:case 35671:return Lm;case 35668:case 35672:return Bm;case 35669:case 35673:return Fm;case 5125:return Om;case 36294:return Rm;case 36295:return Nm;case 36296:return Um;case 35678:case 36198:case 36298:case 36306:case 35682:return qm;case 35679:case 36299:case 36307:return zm;case 35680:case 36300:case 36308:case 36293:return Gm;case 36289:case 36303:case 36311:case 36292:return Vm}}class jm{constructor(e,a,w){this.id=e,this.addr=w,this.cache=[],this.type=a.type,this.setValue=_m(a.type)}}class Hm{constructor(e,a,w){this.id=e,this.addr=w,this.cache=[],this.type=a.type,this.size=a.size,this.setValue=Qm(a.type)}}class Ym{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,a,w){const T=this.seq;for(let L=0,G=T.length;L!==G;++L){const Y=T[L];Y.setValue(e,a[Y.id],w)}}}const Hs=/(\w+)(\])?(\[|\.)?/g;function ld(_,e){_.seq.push(e),_.map[e.id]=e}function Wm(_,e,a){const w=_.name,T=w.length;for(Hs.lastIndex=0;;){const L=Hs.exec(w),G=Hs.lastIndex;let Y=L[1];const ce=L[2]==="]",P=L[3];if(ce&&(Y=Y|0),P===void 0||P==="["&&G+2===T){ld(a,P===void 0?new jm(Y,_,e):new Hm(Y,_,e));break}else{let c=a.map[Y];c===void 0&&(c=new Ym(Y),ld(a,c)),a=c}}}class Ua{constructor(e,a){this.seq=[],this.map={};const w=e.getProgramParameter(a,e.ACTIVE_UNIFORMS);for(let T=0;T<w;++T){const L=e.getActiveUniform(a,T),G=e.getUniformLocation(a,L.name);Wm(L,G,this)}}setValue(e,a,w,T){const L=this.map[a];L!==void 0&&L.setValue(e,w,T)}setOptional(e,a,w){const T=a[w];T!==void 0&&this.setValue(e,w,T)}static upload(e,a,w,T){for(let L=0,G=a.length;L!==G;++L){const Y=a[L],ce=w[Y.id];ce.needsUpdate!==!1&&Y.setValue(e,ce.value,T)}}static seqWithValue(e,a){const w=[];for(let T=0,L=e.length;T!==L;++T){const G=e[T];G.id in a&&w.push(G)}return w}}function dd(_,e,a){const w=_.createShader(e);return _.shaderSource(w,a),_.compileShader(w),w}const Xm=37297;let Km=0;function Jm(_,e){const a=_.split(`
`),w=[],T=Math.max(e-6,0),L=Math.min(e+6,a.length);for(let G=T;G<L;G++){const Y=G+1;w.push(`${Y===e?">":" "} ${Y}: ${a[G]}`)}return w.join(`
`)}const ud=new Wt;function Zm(_){an._getMatrix(ud,an.workingColorSpace,_);const e=`mat3( ${ud.elements.map(a=>a.toFixed(4))} )`;switch(an.getTransfer(_)){case za:return[e,"LinearTransferOETF"];case pn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",_),[e,"LinearTransferOETF"]}}function pd(_,e,a){const w=_.getShaderParameter(e,_.COMPILE_STATUS),L=(_.getShaderInfoLog(e)||"").trim();if(w&&L==="")return"";const G=/ERROR: 0:(\d+)/.exec(L);if(G){const Y=parseInt(G[1]);return a.toUpperCase()+`

`+L+`

`+Jm(_.getShaderSource(e),Y)}else return L}function $m(_,e){const a=Zm(e);return[`vec4 ${_}( vec4 value ) {`,`	return ${a[1]}( vec4( value.rgb * ${a[0]}, value.a ) );`,"}"].join(`
`)}function ey(_,e){let a;switch(e){case $u:a="Linear";break;case ep:a="Reinhard";break;case tp:a="Cineon";break;case np:a="ACESFilmic";break;case ip:a="AgX";break;case op:a="Neutral";break;case rp:a="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),a="Linear"}return"vec3 "+_+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}const ka=new Je;function ty(){an.getLuminanceCoefficients(ka);const _=ka.x.toFixed(4),e=ka.y.toFixed(4),a=ka.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${_}, ${e}, ${a} );`,"	return dot( weights, rgb );","}"].join(`
`)}function ny(_){return[_.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",_.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Mo).join(`
`)}function ry(_){const e=[];for(const a in _){const w=_[a];w!==!1&&e.push("#define "+a+" "+w)}return e.join(`
`)}function iy(_,e){const a={},w=_.getProgramParameter(e,_.ACTIVE_ATTRIBUTES);for(let T=0;T<w;T++){const L=_.getActiveAttrib(e,T),G=L.name;let Y=1;L.type===_.FLOAT_MAT2&&(Y=2),L.type===_.FLOAT_MAT3&&(Y=3),L.type===_.FLOAT_MAT4&&(Y=4),a[G]={type:L.type,location:_.getAttribLocation(e,G),locationSize:Y}}return a}function Mo(_){return _!==""}function hd(_,e){const a=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return _.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,a).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function fd(_,e){return _.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const oy=/^[ \t]*#include +<([\w\d./]+)>/gm;function Uc(_){return _.replace(oy,sy)}const ay=new Map;function sy(_,e){let a=Jt[e];if(a===void 0){const w=ay.get(e);if(w!==void 0)a=Jt[w],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,w);else throw new Error("Can not resolve #include <"+e+">")}return Uc(a)}const cy=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function gd(_){return _.replace(cy,ly)}function ly(_,e,a,w){let T="";for(let L=parseInt(e);L<parseInt(a);L++)T+=w.replace(/\[\s*i\s*\]/g,"[ "+L+" ]").replace(/UNROLLED_LOOP_INDEX/g,L);return T}function md(_){let e=`precision ${_.precision} float;
	precision ${_.precision} int;
	precision ${_.precision} sampler2D;
	precision ${_.precision} samplerCube;
	precision ${_.precision} sampler3D;
	precision ${_.precision} sampler2DArray;
	precision ${_.precision} sampler2DShadow;
	precision ${_.precision} samplerCubeShadow;
	precision ${_.precision} sampler2DArrayShadow;
	precision ${_.precision} isampler2D;
	precision ${_.precision} isampler3D;
	precision ${_.precision} isamplerCube;
	precision ${_.precision} isampler2DArray;
	precision ${_.precision} usampler2D;
	precision ${_.precision} usampler3D;
	precision ${_.precision} usamplerCube;
	precision ${_.precision} usampler2DArray;
	`;return _.precision==="highp"?e+=`
#define HIGH_PRECISION`:_.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:_.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function dy(_){let e="SHADOWMAP_TYPE_BASIC";return _.shadowMapType===Cd?e="SHADOWMAP_TYPE_PCF":_.shadowMapType===Pu?e="SHADOWMAP_TYPE_PCF_SOFT":_.shadowMapType===Lr&&(e="SHADOWMAP_TYPE_VSM"),e}function uy(_){let e="ENVMAP_TYPE_CUBE";if(_.envMap)switch(_.envMapMode){case Xi:case Ki:e="ENVMAP_TYPE_CUBE";break;case Ka:e="ENVMAP_TYPE_CUBE_UV";break}return e}function py(_){let e="ENVMAP_MODE_REFLECTION";if(_.envMap)switch(_.envMapMode){case Ki:e="ENVMAP_MODE_REFRACTION";break}return e}function hy(_){let e="ENVMAP_BLENDING_NONE";if(_.envMap)switch(_.combine){case Td:e="ENVMAP_BLENDING_MULTIPLY";break;case Ju:e="ENVMAP_BLENDING_MIX";break;case Zu:e="ENVMAP_BLENDING_ADD";break}return e}function fy(_){const e=_.envMapCubeUVHeight;if(e===null)return null;const a=Math.log2(e)-2,w=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,a),112)),texelHeight:w,maxMip:a}}function gy(_,e,a,w){const T=_.getContext(),L=a.defines;let G=a.vertexShader,Y=a.fragmentShader;const ce=dy(a),P=uy(a),S=py(a),c=hy(a),x=fy(a),t=ny(a),l=ry(L),n=T.createProgram();let i,s,g=a.glslVersion?"#version "+a.glslVersion+`
`:"";a.isRawShaderMaterial?(i=["#define SHADER_TYPE "+a.shaderType,"#define SHADER_NAME "+a.shaderName,l].filter(Mo).join(`
`),i.length>0&&(i+=`
`),s=["#define SHADER_TYPE "+a.shaderType,"#define SHADER_NAME "+a.shaderName,l].filter(Mo).join(`
`),s.length>0&&(s+=`
`)):(i=[md(a),"#define SHADER_TYPE "+a.shaderType,"#define SHADER_NAME "+a.shaderName,l,a.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",a.batching?"#define USE_BATCHING":"",a.batchingColor?"#define USE_BATCHING_COLOR":"",a.instancing?"#define USE_INSTANCING":"",a.instancingColor?"#define USE_INSTANCING_COLOR":"",a.instancingMorph?"#define USE_INSTANCING_MORPH":"",a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+S:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",a.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",a.displacementMap?"#define USE_DISPLACEMENTMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.anisotropy?"#define USE_ANISOTROPY":"",a.anisotropyMap?"#define USE_ANISOTROPYMAP":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",a.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",a.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.alphaHash?"#define USE_ALPHAHASH":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",a.mapUv?"#define MAP_UV "+a.mapUv:"",a.alphaMapUv?"#define ALPHAMAP_UV "+a.alphaMapUv:"",a.lightMapUv?"#define LIGHTMAP_UV "+a.lightMapUv:"",a.aoMapUv?"#define AOMAP_UV "+a.aoMapUv:"",a.emissiveMapUv?"#define EMISSIVEMAP_UV "+a.emissiveMapUv:"",a.bumpMapUv?"#define BUMPMAP_UV "+a.bumpMapUv:"",a.normalMapUv?"#define NORMALMAP_UV "+a.normalMapUv:"",a.displacementMapUv?"#define DISPLACEMENTMAP_UV "+a.displacementMapUv:"",a.metalnessMapUv?"#define METALNESSMAP_UV "+a.metalnessMapUv:"",a.roughnessMapUv?"#define ROUGHNESSMAP_UV "+a.roughnessMapUv:"",a.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+a.anisotropyMapUv:"",a.clearcoatMapUv?"#define CLEARCOATMAP_UV "+a.clearcoatMapUv:"",a.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+a.clearcoatNormalMapUv:"",a.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+a.clearcoatRoughnessMapUv:"",a.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+a.iridescenceMapUv:"",a.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+a.iridescenceThicknessMapUv:"",a.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+a.sheenColorMapUv:"",a.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+a.sheenRoughnessMapUv:"",a.specularMapUv?"#define SPECULARMAP_UV "+a.specularMapUv:"",a.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+a.specularColorMapUv:"",a.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+a.specularIntensityMapUv:"",a.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+a.transmissionMapUv:"",a.thicknessMapUv?"#define THICKNESSMAP_UV "+a.thicknessMapUv:"",a.vertexTangents&&a.flatShading===!1?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUv1s?"#define USE_UV1":"",a.vertexUv2s?"#define USE_UV2":"",a.vertexUv3s?"#define USE_UV3":"",a.pointsUvs?"#define USE_POINTS_UV":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&a.flatShading===!1?"#define USE_MORPHNORMALS":"",a.morphColors?"#define USE_MORPHCOLORS":"",a.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+a.morphTextureStride:"",a.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+a.morphTargetsCount:"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+ce:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.numLightProbes>0?"#define USE_LIGHT_PROBES":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Mo).join(`
`),s=[md(a),"#define SHADER_TYPE "+a.shaderType,"#define SHADER_NAME "+a.shaderName,l,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+P:"",a.envMap?"#define "+S:"",a.envMap?"#define "+c:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",a.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.anisotropy?"#define USE_ANISOTROPY":"",a.anisotropyMap?"#define USE_ANISOTROPYMAP":"",a.clearcoat?"#define USE_CLEARCOAT":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.dispersion?"#define USE_DISPERSION":"",a.iridescence?"#define USE_IRIDESCENCE":"",a.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",a.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",a.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.alphaTest?"#define USE_ALPHATEST":"",a.alphaHash?"#define USE_ALPHAHASH":"",a.sheen?"#define USE_SHEEN":"",a.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.vertexTangents&&a.flatShading===!1?"#define USE_TANGENT":"",a.vertexColors||a.instancingColor||a.batchingColor?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUv1s?"#define USE_UV1":"",a.vertexUv2s?"#define USE_UV2":"",a.vertexUv3s?"#define USE_UV3":"",a.pointsUvs?"#define USE_POINTS_UV":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+ce:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.numLightProbes>0?"#define USE_LIGHT_PROBES":"",a.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",a.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",a.toneMapping!==Zr?"#define TONE_MAPPING":"",a.toneMapping!==Zr?Jt.tonemapping_pars_fragment:"",a.toneMapping!==Zr?ey("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.opaque?"#define OPAQUE":"",Jt.colorspace_pars_fragment,$m("linearToOutputTexel",a.outputColorSpace),ty(),a.useDepthPacking?"#define DEPTH_PACKING "+a.depthPacking:"",`
`].filter(Mo).join(`
`)),G=Uc(G),G=hd(G,a),G=fd(G,a),Y=Uc(Y),Y=hd(Y,a),Y=fd(Y,a),G=gd(G),Y=gd(Y),a.isRawShaderMaterial!==!0&&(g=`#version 300 es
`,i=[t,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+i,s=["#define varying in",a.glslVersion===El?"":"layout(location = 0) out highp vec4 pc_fragColor;",a.glslVersion===El?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+s);const d=g+i+G,u=g+s+Y,f=dd(T,T.VERTEX_SHADER,d),y=dd(T,T.FRAGMENT_SHADER,u);T.attachShader(n,f),T.attachShader(n,y),a.index0AttributeName!==void 0?T.bindAttribLocation(n,0,a.index0AttributeName):a.morphTargets===!0&&T.bindAttribLocation(n,0,"position"),T.linkProgram(n);function h(m){if(_.debug.checkShaderErrors){const b=T.getProgramInfoLog(n)||"",E=T.getShaderInfoLog(f)||"",M=T.getShaderInfoLog(y)||"",D=b.trim(),A=E.trim(),v=M.trim();let k=!0,J=!0;if(T.getProgramParameter(n,T.LINK_STATUS)===!1)if(k=!1,typeof _.debug.onShaderError=="function")_.debug.onShaderError(T,n,f,y);else{const X=pd(T,f,"vertex"),te=pd(T,y,"fragment");console.error("THREE.WebGLProgram: Shader Error "+T.getError()+" - VALIDATE_STATUS "+T.getProgramParameter(n,T.VALIDATE_STATUS)+`

Material Name: `+m.name+`
Material Type: `+m.type+`

Program Info Log: `+D+`
`+X+`
`+te)}else D!==""?console.warn("THREE.WebGLProgram: Program Info Log:",D):(A===""||v==="")&&(J=!1);J&&(m.diagnostics={runnable:k,programLog:D,vertexShader:{log:A,prefix:i},fragmentShader:{log:v,prefix:s}})}T.deleteShader(f),T.deleteShader(y),p=new Ua(T,n),r=iy(T,n)}let p;this.getUniforms=function(){return p===void 0&&h(this),p};let r;this.getAttributes=function(){return r===void 0&&h(this),r};let o=a.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return o===!1&&(o=T.getProgramParameter(n,Xm)),o},this.destroy=function(){w.releaseStatesOfProgram(this),T.deleteProgram(n),this.program=void 0},this.type=a.shaderType,this.name=a.shaderName,this.id=Km++,this.cacheKey=e,this.usedTimes=1,this.program=n,this.vertexShader=f,this.fragmentShader=y,this}let my=0;class yy{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const a=e.vertexShader,w=e.fragmentShader,T=this._getShaderStage(a),L=this._getShaderStage(w),G=this._getShaderCacheForMaterial(e);return G.has(T)===!1&&(G.add(T),T.usedTimes++),G.has(L)===!1&&(G.add(L),L.usedTimes++),this}remove(e){const a=this.materialCache.get(e);for(const w of a)w.usedTimes--,w.usedTimes===0&&this.shaderCache.delete(w.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const a=this.materialCache;let w=a.get(e);return w===void 0&&(w=new Set,a.set(e,w)),w}_getShaderStage(e){const a=this.shaderCache;let w=a.get(e);return w===void 0&&(w=new vy(e),a.set(e,w)),w}}class vy{constructor(e){this.id=my++,this.code=e,this.usedTimes=0}}function by(_,e,a,w,T,L,G){const Y=new Gd,ce=new yy,P=new Set,S=[],c=T.logarithmicDepthBuffer,x=T.vertexTextures;let t=T.precision;const l={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function n(r){return P.add(r),r===0?"uv":`uv${r}`}function i(r,o,m,b,E){const M=b.fog,D=E.geometry,A=r.isMeshStandardMaterial?b.environment:null,v=(r.isMeshStandardMaterial?a:e).get(r.envMap||A),k=v&&v.mapping===Ka?v.image.height:null,J=l[r.type];r.precision!==null&&(t=T.getMaxPrecision(r.precision),t!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",t,"instead."));const X=D.morphAttributes.position||D.morphAttributes.normal||D.morphAttributes.color,te=X!==void 0?X.length:0;let H=0;D.morphAttributes.position!==void 0&&(H=1),D.morphAttributes.normal!==void 0&&(H=2),D.morphAttributes.color!==void 0&&(H=3);let z,B,F,$;if(J){const at=vr[J];z=at.vertexShader,B=at.fragmentShader}else z=r.vertexShader,B=r.fragmentShader,ce.update(r),F=ce.getVertexShaderID(r),$=ce.getFragmentShaderID(r);const re=_.getRenderTarget(),K=_.state.buffers.depth.getReversed(),ue=E.isInstancedMesh===!0,ie=E.isBatchedMesh===!0,Q=!!r.map,pe=!!r.matcap,ee=!!v,ae=!!r.aoMap,le=!!r.lightMap,me=!!r.bumpMap,Ae=!!r.normalMap,Be=!!r.displacementMap,Fe=!!r.emissiveMap,Le=!!r.metalnessMap,ze=!!r.roughnessMap,We=r.anisotropy>0,Z=r.clearcoat>0,C=r.dispersion>0,oe=r.iridescence>0,ge=r.sheen>0,_e=r.transmission>0,De=We&&!!r.anisotropyMap,je=Z&&!!r.clearcoatMap,Ie=Z&&!!r.clearcoatNormalMap,Oe=Z&&!!r.clearcoatRoughnessMap,N=oe&&!!r.iridescenceMap,Pe=oe&&!!r.iridescenceThicknessMap,Xe=ge&&!!r.sheenColorMap,$e=ge&&!!r.sheenRoughnessMap,ht=!!r.specularMap,ye=!!r.specularColorMap,Ue=!!r.specularIntensityMap,we=_e&&!!r.transmissionMap,Te=_e&&!!r.thicknessMap,qe=!!r.gradientMap,He=!!r.alphaMap,Se=r.alphaTest>0,Ce=!!r.alphaHash,Re=!!r.extensions;let Ve=Zr;r.toneMapped&&(re===null||re.isXRRenderTarget===!0)&&(Ve=_.toneMapping);const rt={shaderID:J,shaderType:r.type,shaderName:r.name,vertexShader:z,fragmentShader:B,defines:r.defines,customVertexShaderID:F,customFragmentShaderID:$,isRawShaderMaterial:r.isRawShaderMaterial===!0,glslVersion:r.glslVersion,precision:t,batching:ie,batchingColor:ie&&E._colorsTexture!==null,instancing:ue,instancingColor:ue&&E.instanceColor!==null,instancingMorph:ue&&E.morphTexture!==null,supportsVertexTextures:x,outputColorSpace:re===null?_.outputColorSpace:re.isXRRenderTarget===!0?re.texture.colorSpace:Ji,alphaToCoverage:!!r.alphaToCoverage,map:Q,matcap:pe,envMap:ee,envMapMode:ee&&v.mapping,envMapCubeUVHeight:k,aoMap:ae,lightMap:le,bumpMap:me,normalMap:Ae,displacementMap:x&&Be,emissiveMap:Fe,normalMapObjectSpace:Ae&&r.normalMapType===dp,normalMapTangentSpace:Ae&&r.normalMapType===lp,metalnessMap:Le,roughnessMap:ze,anisotropy:We,anisotropyMap:De,clearcoat:Z,clearcoatMap:je,clearcoatNormalMap:Ie,clearcoatRoughnessMap:Oe,dispersion:C,iridescence:oe,iridescenceMap:N,iridescenceThicknessMap:Pe,sheen:ge,sheenColorMap:Xe,sheenRoughnessMap:$e,specularMap:ht,specularColorMap:ye,specularIntensityMap:Ue,transmission:_e,transmissionMap:we,thicknessMap:Te,gradientMap:qe,opaque:r.transparent===!1&&r.blending===Qi&&r.alphaToCoverage===!1,alphaMap:He,alphaTest:Se,alphaHash:Ce,combine:r.combine,mapUv:Q&&n(r.map.channel),aoMapUv:ae&&n(r.aoMap.channel),lightMapUv:le&&n(r.lightMap.channel),bumpMapUv:me&&n(r.bumpMap.channel),normalMapUv:Ae&&n(r.normalMap.channel),displacementMapUv:Be&&n(r.displacementMap.channel),emissiveMapUv:Fe&&n(r.emissiveMap.channel),metalnessMapUv:Le&&n(r.metalnessMap.channel),roughnessMapUv:ze&&n(r.roughnessMap.channel),anisotropyMapUv:De&&n(r.anisotropyMap.channel),clearcoatMapUv:je&&n(r.clearcoatMap.channel),clearcoatNormalMapUv:Ie&&n(r.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Oe&&n(r.clearcoatRoughnessMap.channel),iridescenceMapUv:N&&n(r.iridescenceMap.channel),iridescenceThicknessMapUv:Pe&&n(r.iridescenceThicknessMap.channel),sheenColorMapUv:Xe&&n(r.sheenColorMap.channel),sheenRoughnessMapUv:$e&&n(r.sheenRoughnessMap.channel),specularMapUv:ht&&n(r.specularMap.channel),specularColorMapUv:ye&&n(r.specularColorMap.channel),specularIntensityMapUv:Ue&&n(r.specularIntensityMap.channel),transmissionMapUv:we&&n(r.transmissionMap.channel),thicknessMapUv:Te&&n(r.thicknessMap.channel),alphaMapUv:He&&n(r.alphaMap.channel),vertexTangents:!!D.attributes.tangent&&(Ae||We),vertexColors:r.vertexColors,vertexAlphas:r.vertexColors===!0&&!!D.attributes.color&&D.attributes.color.itemSize===4,pointsUvs:E.isPoints===!0&&!!D.attributes.uv&&(Q||He),fog:!!M,useFog:r.fog===!0,fogExp2:!!M&&M.isFogExp2,flatShading:r.flatShading===!0&&r.wireframe===!1,sizeAttenuation:r.sizeAttenuation===!0,logarithmicDepthBuffer:c,reversedDepthBuffer:K,skinning:E.isSkinnedMesh===!0,morphTargets:D.morphAttributes.position!==void 0,morphNormals:D.morphAttributes.normal!==void 0,morphColors:D.morphAttributes.color!==void 0,morphTargetsCount:te,morphTextureStride:H,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:G.numPlanes,numClipIntersection:G.numIntersection,dithering:r.dithering,shadowMapEnabled:_.shadowMap.enabled&&m.length>0,shadowMapType:_.shadowMap.type,toneMapping:Ve,decodeVideoTexture:Q&&r.map.isVideoTexture===!0&&an.getTransfer(r.map.colorSpace)===pn,decodeVideoTextureEmissive:Fe&&r.emissiveMap.isVideoTexture===!0&&an.getTransfer(r.emissiveMap.colorSpace)===pn,premultipliedAlpha:r.premultipliedAlpha,doubleSided:r.side===Br,flipSided:r.side===Yn,useDepthPacking:r.depthPacking>=0,depthPacking:r.depthPacking||0,index0AttributeName:r.index0AttributeName,extensionClipCullDistance:Re&&r.extensions.clipCullDistance===!0&&w.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Re&&r.extensions.multiDraw===!0||ie)&&w.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:w.has("KHR_parallel_shader_compile"),customProgramCacheKey:r.customProgramCacheKey()};return rt.vertexUv1s=P.has(1),rt.vertexUv2s=P.has(2),rt.vertexUv3s=P.has(3),P.clear(),rt}function s(r){const o=[];if(r.shaderID?o.push(r.shaderID):(o.push(r.customVertexShaderID),o.push(r.customFragmentShaderID)),r.defines!==void 0)for(const m in r.defines)o.push(m),o.push(r.defines[m]);return r.isRawShaderMaterial===!1&&(g(o,r),d(o,r),o.push(_.outputColorSpace)),o.push(r.customProgramCacheKey),o.join()}function g(r,o){r.push(o.precision),r.push(o.outputColorSpace),r.push(o.envMapMode),r.push(o.envMapCubeUVHeight),r.push(o.mapUv),r.push(o.alphaMapUv),r.push(o.lightMapUv),r.push(o.aoMapUv),r.push(o.bumpMapUv),r.push(o.normalMapUv),r.push(o.displacementMapUv),r.push(o.emissiveMapUv),r.push(o.metalnessMapUv),r.push(o.roughnessMapUv),r.push(o.anisotropyMapUv),r.push(o.clearcoatMapUv),r.push(o.clearcoatNormalMapUv),r.push(o.clearcoatRoughnessMapUv),r.push(o.iridescenceMapUv),r.push(o.iridescenceThicknessMapUv),r.push(o.sheenColorMapUv),r.push(o.sheenRoughnessMapUv),r.push(o.specularMapUv),r.push(o.specularColorMapUv),r.push(o.specularIntensityMapUv),r.push(o.transmissionMapUv),r.push(o.thicknessMapUv),r.push(o.combine),r.push(o.fogExp2),r.push(o.sizeAttenuation),r.push(o.morphTargetsCount),r.push(o.morphAttributeCount),r.push(o.numDirLights),r.push(o.numPointLights),r.push(o.numSpotLights),r.push(o.numSpotLightMaps),r.push(o.numHemiLights),r.push(o.numRectAreaLights),r.push(o.numDirLightShadows),r.push(o.numPointLightShadows),r.push(o.numSpotLightShadows),r.push(o.numSpotLightShadowsWithMaps),r.push(o.numLightProbes),r.push(o.shadowMapType),r.push(o.toneMapping),r.push(o.numClippingPlanes),r.push(o.numClipIntersection),r.push(o.depthPacking)}function d(r,o){Y.disableAll(),o.supportsVertexTextures&&Y.enable(0),o.instancing&&Y.enable(1),o.instancingColor&&Y.enable(2),o.instancingMorph&&Y.enable(3),o.matcap&&Y.enable(4),o.envMap&&Y.enable(5),o.normalMapObjectSpace&&Y.enable(6),o.normalMapTangentSpace&&Y.enable(7),o.clearcoat&&Y.enable(8),o.iridescence&&Y.enable(9),o.alphaTest&&Y.enable(10),o.vertexColors&&Y.enable(11),o.vertexAlphas&&Y.enable(12),o.vertexUv1s&&Y.enable(13),o.vertexUv2s&&Y.enable(14),o.vertexUv3s&&Y.enable(15),o.vertexTangents&&Y.enable(16),o.anisotropy&&Y.enable(17),o.alphaHash&&Y.enable(18),o.batching&&Y.enable(19),o.dispersion&&Y.enable(20),o.batchingColor&&Y.enable(21),o.gradientMap&&Y.enable(22),r.push(Y.mask),Y.disableAll(),o.fog&&Y.enable(0),o.useFog&&Y.enable(1),o.flatShading&&Y.enable(2),o.logarithmicDepthBuffer&&Y.enable(3),o.reversedDepthBuffer&&Y.enable(4),o.skinning&&Y.enable(5),o.morphTargets&&Y.enable(6),o.morphNormals&&Y.enable(7),o.morphColors&&Y.enable(8),o.premultipliedAlpha&&Y.enable(9),o.shadowMapEnabled&&Y.enable(10),o.doubleSided&&Y.enable(11),o.flipSided&&Y.enable(12),o.useDepthPacking&&Y.enable(13),o.dithering&&Y.enable(14),o.transmission&&Y.enable(15),o.sheen&&Y.enable(16),o.opaque&&Y.enable(17),o.pointsUvs&&Y.enable(18),o.decodeVideoTexture&&Y.enable(19),o.decodeVideoTextureEmissive&&Y.enable(20),o.alphaToCoverage&&Y.enable(21),r.push(Y.mask)}function u(r){const o=l[r.type];let m;if(o){const b=vr[o];m=qp.clone(b.uniforms)}else m=r.uniforms;return m}function f(r,o){let m;for(let b=0,E=S.length;b<E;b++){const M=S[b];if(M.cacheKey===o){m=M,++m.usedTimes;break}}return m===void 0&&(m=new gy(_,o,r,L),S.push(m)),m}function y(r){if(--r.usedTimes===0){const o=S.indexOf(r);S[o]=S[S.length-1],S.pop(),r.destroy()}}function h(r){ce.remove(r)}function p(){ce.dispose()}return{getParameters:i,getProgramCacheKey:s,getUniforms:u,acquireProgram:f,releaseProgram:y,releaseShaderCache:h,programs:S,dispose:p}}function xy(){let _=new WeakMap;function e(G){return _.has(G)}function a(G){let Y=_.get(G);return Y===void 0&&(Y={},_.set(G,Y)),Y}function w(G){_.delete(G)}function T(G,Y,ce){_.get(G)[Y]=ce}function L(){_=new WeakMap}return{has:e,get:a,remove:w,update:T,dispose:L}}function wy(_,e){return _.groupOrder!==e.groupOrder?_.groupOrder-e.groupOrder:_.renderOrder!==e.renderOrder?_.renderOrder-e.renderOrder:_.material.id!==e.material.id?_.material.id-e.material.id:_.z!==e.z?_.z-e.z:_.id-e.id}function yd(_,e){return _.groupOrder!==e.groupOrder?_.groupOrder-e.groupOrder:_.renderOrder!==e.renderOrder?_.renderOrder-e.renderOrder:_.z!==e.z?e.z-_.z:_.id-e.id}function vd(){const _=[];let e=0;const a=[],w=[],T=[];function L(){e=0,a.length=0,w.length=0,T.length=0}function G(c,x,t,l,n,i){let s=_[e];return s===void 0?(s={id:c.id,object:c,geometry:x,material:t,groupOrder:l,renderOrder:c.renderOrder,z:n,group:i},_[e]=s):(s.id=c.id,s.object=c,s.geometry=x,s.material=t,s.groupOrder=l,s.renderOrder=c.renderOrder,s.z=n,s.group=i),e++,s}function Y(c,x,t,l,n,i){const s=G(c,x,t,l,n,i);t.transmission>0?w.push(s):t.transparent===!0?T.push(s):a.push(s)}function ce(c,x,t,l,n,i){const s=G(c,x,t,l,n,i);t.transmission>0?w.unshift(s):t.transparent===!0?T.unshift(s):a.unshift(s)}function P(c,x){a.length>1&&a.sort(c||wy),w.length>1&&w.sort(x||yd),T.length>1&&T.sort(x||yd)}function S(){for(let c=e,x=_.length;c<x;c++){const t=_[c];if(t.id===null)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}}return{opaque:a,transmissive:w,transparent:T,init:L,push:Y,unshift:ce,finish:S,sort:P}}function Ay(){let _=new WeakMap;function e(w,T){const L=_.get(w);let G;return L===void 0?(G=new vd,_.set(w,[G])):T>=L.length?(G=new vd,L.push(G)):G=L[T],G}function a(){_=new WeakMap}return{get:e,dispose:a}}function Ey(){const _={};return{get:function(e){if(_[e.id]!==void 0)return _[e.id];let a;switch(e.type){case"DirectionalLight":a={direction:new Je,color:new rn};break;case"SpotLight":a={position:new Je,direction:new Je,color:new rn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":a={position:new Je,color:new rn,distance:0,decay:0};break;case"HemisphereLight":a={direction:new Je,skyColor:new rn,groundColor:new rn};break;case"RectAreaLight":a={color:new rn,position:new Je,halfWidth:new Je,halfHeight:new Je};break}return _[e.id]=a,a}}}function _y(){const _={};return{get:function(e){if(_[e.id]!==void 0)return _[e.id];let a;switch(e.type){case"DirectionalLight":a={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yt};break;case"SpotLight":a={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yt};break;case"PointLight":a={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yt,shadowCameraNear:1,shadowCameraFar:1e3};break}return _[e.id]=a,a}}}let My=0;function Sy(_,e){return(e.castShadow?2:0)-(_.castShadow?2:0)+(e.map?1:0)-(_.map?1:0)}function Iy(_){const e=new Ey,a=_y(),w={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let P=0;P<9;P++)w.probe.push(new Je);const T=new Je,L=new wn,G=new wn;function Y(P){let S=0,c=0,x=0;for(let r=0;r<9;r++)w.probe[r].set(0,0,0);let t=0,l=0,n=0,i=0,s=0,g=0,d=0,u=0,f=0,y=0,h=0;P.sort(Sy);for(let r=0,o=P.length;r<o;r++){const m=P[r],b=m.color,E=m.intensity,M=m.distance,D=m.shadow&&m.shadow.map?m.shadow.map.texture:null;if(m.isAmbientLight)S+=b.r*E,c+=b.g*E,x+=b.b*E;else if(m.isLightProbe){for(let A=0;A<9;A++)w.probe[A].addScaledVector(m.sh.coefficients[A],E);h++}else if(m.isDirectionalLight){const A=e.get(m);if(A.color.copy(m.color).multiplyScalar(m.intensity),m.castShadow){const v=m.shadow,k=a.get(m);k.shadowIntensity=v.intensity,k.shadowBias=v.bias,k.shadowNormalBias=v.normalBias,k.shadowRadius=v.radius,k.shadowMapSize=v.mapSize,w.directionalShadow[t]=k,w.directionalShadowMap[t]=D,w.directionalShadowMatrix[t]=m.shadow.matrix,g++}w.directional[t]=A,t++}else if(m.isSpotLight){const A=e.get(m);A.position.setFromMatrixPosition(m.matrixWorld),A.color.copy(b).multiplyScalar(E),A.distance=M,A.coneCos=Math.cos(m.angle),A.penumbraCos=Math.cos(m.angle*(1-m.penumbra)),A.decay=m.decay,w.spot[n]=A;const v=m.shadow;if(m.map&&(w.spotLightMap[f]=m.map,f++,v.updateMatrices(m),m.castShadow&&y++),w.spotLightMatrix[n]=v.matrix,m.castShadow){const k=a.get(m);k.shadowIntensity=v.intensity,k.shadowBias=v.bias,k.shadowNormalBias=v.normalBias,k.shadowRadius=v.radius,k.shadowMapSize=v.mapSize,w.spotShadow[n]=k,w.spotShadowMap[n]=D,u++}n++}else if(m.isRectAreaLight){const A=e.get(m);A.color.copy(b).multiplyScalar(E),A.halfWidth.set(m.width*.5,0,0),A.halfHeight.set(0,m.height*.5,0),w.rectArea[i]=A,i++}else if(m.isPointLight){const A=e.get(m);if(A.color.copy(m.color).multiplyScalar(m.intensity),A.distance=m.distance,A.decay=m.decay,m.castShadow){const v=m.shadow,k=a.get(m);k.shadowIntensity=v.intensity,k.shadowBias=v.bias,k.shadowNormalBias=v.normalBias,k.shadowRadius=v.radius,k.shadowMapSize=v.mapSize,k.shadowCameraNear=v.camera.near,k.shadowCameraFar=v.camera.far,w.pointShadow[l]=k,w.pointShadowMap[l]=D,w.pointShadowMatrix[l]=m.shadow.matrix,d++}w.point[l]=A,l++}else if(m.isHemisphereLight){const A=e.get(m);A.skyColor.copy(m.color).multiplyScalar(E),A.groundColor.copy(m.groundColor).multiplyScalar(E),w.hemi[s]=A,s++}}i>0&&(_.has("OES_texture_float_linear")===!0?(w.rectAreaLTC1=wt.LTC_FLOAT_1,w.rectAreaLTC2=wt.LTC_FLOAT_2):(w.rectAreaLTC1=wt.LTC_HALF_1,w.rectAreaLTC2=wt.LTC_HALF_2)),w.ambient[0]=S,w.ambient[1]=c,w.ambient[2]=x;const p=w.hash;(p.directionalLength!==t||p.pointLength!==l||p.spotLength!==n||p.rectAreaLength!==i||p.hemiLength!==s||p.numDirectionalShadows!==g||p.numPointShadows!==d||p.numSpotShadows!==u||p.numSpotMaps!==f||p.numLightProbes!==h)&&(w.directional.length=t,w.spot.length=n,w.rectArea.length=i,w.point.length=l,w.hemi.length=s,w.directionalShadow.length=g,w.directionalShadowMap.length=g,w.pointShadow.length=d,w.pointShadowMap.length=d,w.spotShadow.length=u,w.spotShadowMap.length=u,w.directionalShadowMatrix.length=g,w.pointShadowMatrix.length=d,w.spotLightMatrix.length=u+f-y,w.spotLightMap.length=f,w.numSpotLightShadowsWithMaps=y,w.numLightProbes=h,p.directionalLength=t,p.pointLength=l,p.spotLength=n,p.rectAreaLength=i,p.hemiLength=s,p.numDirectionalShadows=g,p.numPointShadows=d,p.numSpotShadows=u,p.numSpotMaps=f,p.numLightProbes=h,w.version=My++)}function ce(P,S){let c=0,x=0,t=0,l=0,n=0;const i=S.matrixWorldInverse;for(let s=0,g=P.length;s<g;s++){const d=P[s];if(d.isDirectionalLight){const u=w.directional[c];u.direction.setFromMatrixPosition(d.matrixWorld),T.setFromMatrixPosition(d.target.matrixWorld),u.direction.sub(T),u.direction.transformDirection(i),c++}else if(d.isSpotLight){const u=w.spot[t];u.position.setFromMatrixPosition(d.matrixWorld),u.position.applyMatrix4(i),u.direction.setFromMatrixPosition(d.matrixWorld),T.setFromMatrixPosition(d.target.matrixWorld),u.direction.sub(T),u.direction.transformDirection(i),t++}else if(d.isRectAreaLight){const u=w.rectArea[l];u.position.setFromMatrixPosition(d.matrixWorld),u.position.applyMatrix4(i),G.identity(),L.copy(d.matrixWorld),L.premultiply(i),G.extractRotation(L),u.halfWidth.set(d.width*.5,0,0),u.halfHeight.set(0,d.height*.5,0),u.halfWidth.applyMatrix4(G),u.halfHeight.applyMatrix4(G),l++}else if(d.isPointLight){const u=w.point[x];u.position.setFromMatrixPosition(d.matrixWorld),u.position.applyMatrix4(i),x++}else if(d.isHemisphereLight){const u=w.hemi[n];u.direction.setFromMatrixPosition(d.matrixWorld),u.direction.transformDirection(i),n++}}}return{setup:Y,setupView:ce,state:w}}function bd(_){const e=new Iy(_),a=[],w=[];function T(S){P.camera=S,a.length=0,w.length=0}function L(S){a.push(S)}function G(S){w.push(S)}function Y(){e.setup(a)}function ce(S){e.setupView(a,S)}const P={lightsArray:a,shadowsArray:w,camera:null,lights:e,transmissionRenderTarget:{}};return{init:T,state:P,setupLights:Y,setupLightsView:ce,pushLight:L,pushShadow:G}}function Cy(_){let e=new WeakMap;function a(T,L=0){const G=e.get(T);let Y;return G===void 0?(Y=new bd(_),e.set(T,[Y])):L>=G.length?(Y=new bd(_),G.push(Y)):Y=G[L],Y}function w(){e=new WeakMap}return{get:a,dispose:w}}const Ty=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Dy=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ky(_,e,a){let w=new el;const T=new Yt,L=new Yt,G=new fn,Y=new Jp({depthPacking:cp}),ce=new Zp,P={},S=a.maxTextureSize,c={[ei]:Yn,[Yn]:ei,[Br]:Br},x=new ti({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Yt},radius:{value:4}},vertexShader:Ty,fragmentShader:Dy}),t=x.clone();t.defines.HORIZONTAL_PASS=1;const l=new Ar;l.setAttribute("position",new xr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const n=new mr(l,x),i=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Cd;let s=this.type;this.render=function(y,h,p){if(i.enabled===!1||i.autoUpdate===!1&&i.needsUpdate===!1||y.length===0)return;const r=_.getRenderTarget(),o=_.getActiveCubeFace(),m=_.getActiveMipmapLevel(),b=_.state;b.setBlending(Jr),b.buffers.depth.getReversed()?b.buffers.color.setClear(0,0,0,0):b.buffers.color.setClear(1,1,1,1),b.buffers.depth.setTest(!0),b.setScissorTest(!1);const E=s!==Lr&&this.type===Lr,M=s===Lr&&this.type!==Lr;for(let D=0,A=y.length;D<A;D++){const v=y[D],k=v.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",v,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;T.copy(k.mapSize);const J=k.getFrameExtents();if(T.multiply(J),L.copy(k.mapSize),(T.x>S||T.y>S)&&(T.x>S&&(L.x=Math.floor(S/J.x),T.x=L.x*J.x,k.mapSize.x=L.x),T.y>S&&(L.y=Math.floor(S/J.y),T.y=L.y*J.y,k.mapSize.y=L.y)),k.map===null||E===!0||M===!0){const te=this.type!==Lr?{minFilter:yr,magFilter:yr}:{};k.map!==null&&k.map.dispose(),k.map=new wi(T.x,T.y,te),k.map.texture.name=v.name+".shadowMap",k.camera.updateProjectionMatrix()}_.setRenderTarget(k.map),_.clear();const X=k.getViewportCount();for(let te=0;te<X;te++){const H=k.getViewport(te);G.set(L.x*H.x,L.y*H.y,L.x*H.z,L.y*H.w),b.viewport(G),k.updateMatrices(v,te),w=k.getFrustum(),u(h,p,k.camera,v,this.type)}k.isPointLightShadow!==!0&&this.type===Lr&&g(k,p),k.needsUpdate=!1}s=this.type,i.needsUpdate=!1,_.setRenderTarget(r,o,m)};function g(y,h){const p=e.update(n);x.defines.VSM_SAMPLES!==y.blurSamples&&(x.defines.VSM_SAMPLES=y.blurSamples,t.defines.VSM_SAMPLES=y.blurSamples,x.needsUpdate=!0,t.needsUpdate=!0),y.mapPass===null&&(y.mapPass=new wi(T.x,T.y)),x.uniforms.shadow_pass.value=y.map.texture,x.uniforms.resolution.value=y.mapSize,x.uniforms.radius.value=y.radius,_.setRenderTarget(y.mapPass),_.clear(),_.renderBufferDirect(h,null,p,x,n,null),t.uniforms.shadow_pass.value=y.mapPass.texture,t.uniforms.resolution.value=y.mapSize,t.uniforms.radius.value=y.radius,_.setRenderTarget(y.map),_.clear(),_.renderBufferDirect(h,null,p,t,n,null)}function d(y,h,p,r){let o=null;const m=p.isPointLight===!0?y.customDistanceMaterial:y.customDepthMaterial;if(m!==void 0)o=m;else if(o=p.isPointLight===!0?ce:Y,_.localClippingEnabled&&h.clipShadows===!0&&Array.isArray(h.clippingPlanes)&&h.clippingPlanes.length!==0||h.displacementMap&&h.displacementScale!==0||h.alphaMap&&h.alphaTest>0||h.map&&h.alphaTest>0||h.alphaToCoverage===!0){const b=o.uuid,E=h.uuid;let M=P[b];M===void 0&&(M={},P[b]=M);let D=M[E];D===void 0&&(D=o.clone(),M[E]=D,h.addEventListener("dispose",f)),o=D}if(o.visible=h.visible,o.wireframe=h.wireframe,r===Lr?o.side=h.shadowSide!==null?h.shadowSide:h.side:o.side=h.shadowSide!==null?h.shadowSide:c[h.side],o.alphaMap=h.alphaMap,o.alphaTest=h.alphaToCoverage===!0?.5:h.alphaTest,o.map=h.map,o.clipShadows=h.clipShadows,o.clippingPlanes=h.clippingPlanes,o.clipIntersection=h.clipIntersection,o.displacementMap=h.displacementMap,o.displacementScale=h.displacementScale,o.displacementBias=h.displacementBias,o.wireframeLinewidth=h.wireframeLinewidth,o.linewidth=h.linewidth,p.isPointLight===!0&&o.isMeshDistanceMaterial===!0){const b=_.properties.get(o);b.light=p}return o}function u(y,h,p,r,o){if(y.visible===!1)return;if(y.layers.test(h.layers)&&(y.isMesh||y.isLine||y.isPoints)&&(y.castShadow||y.receiveShadow&&o===Lr)&&(!y.frustumCulled||w.intersectsObject(y))){y.modelViewMatrix.multiplyMatrices(p.matrixWorldInverse,y.matrixWorld);const E=e.update(y),M=y.material;if(Array.isArray(M)){const D=E.groups;for(let A=0,v=D.length;A<v;A++){const k=D[A],J=M[k.materialIndex];if(J&&J.visible){const X=d(y,J,r,o);y.onBeforeShadow(_,y,h,p,E,X,k),_.renderBufferDirect(p,null,E,X,y,k),y.onAfterShadow(_,y,h,p,E,X,k)}}}else if(M.visible){const D=d(y,M,r,o);y.onBeforeShadow(_,y,h,p,E,D,null),_.renderBufferDirect(p,null,E,D,y,null),y.onAfterShadow(_,y,h,p,E,D,null)}}const b=y.children;for(let E=0,M=b.length;E<M;E++)u(b[E],h,p,r,o)}function f(y){y.target.removeEventListener("dispose",f);for(const p in P){const r=P[p],o=y.target.uuid;o in r&&(r[o].dispose(),delete r[o])}}}const Py={[tc]:nc,[rc]:ac,[ic]:sc,[Wi]:oc,[nc]:tc,[ac]:rc,[sc]:ic,[oc]:Wi};function Ly(_,e){function a(){let we=!1;const Te=new fn;let qe=null;const He=new fn(0,0,0,0);return{setMask:function(Se){qe!==Se&&!we&&(_.colorMask(Se,Se,Se,Se),qe=Se)},setLocked:function(Se){we=Se},setClear:function(Se,Ce,Re,Ve,rt){rt===!0&&(Se*=Ve,Ce*=Ve,Re*=Ve),Te.set(Se,Ce,Re,Ve),He.equals(Te)===!1&&(_.clearColor(Se,Ce,Re,Ve),He.copy(Te))},reset:function(){we=!1,qe=null,He.set(-1,0,0,0)}}}function w(){let we=!1,Te=!1,qe=null,He=null,Se=null;return{setReversed:function(Ce){if(Te!==Ce){const Re=e.get("EXT_clip_control");Ce?Re.clipControlEXT(Re.LOWER_LEFT_EXT,Re.ZERO_TO_ONE_EXT):Re.clipControlEXT(Re.LOWER_LEFT_EXT,Re.NEGATIVE_ONE_TO_ONE_EXT),Te=Ce;const Ve=Se;Se=null,this.setClear(Ve)}},getReversed:function(){return Te},setTest:function(Ce){Ce?re(_.DEPTH_TEST):K(_.DEPTH_TEST)},setMask:function(Ce){qe!==Ce&&!we&&(_.depthMask(Ce),qe=Ce)},setFunc:function(Ce){if(Te&&(Ce=Py[Ce]),He!==Ce){switch(Ce){case tc:_.depthFunc(_.NEVER);break;case nc:_.depthFunc(_.ALWAYS);break;case rc:_.depthFunc(_.LESS);break;case Wi:_.depthFunc(_.LEQUAL);break;case ic:_.depthFunc(_.EQUAL);break;case oc:_.depthFunc(_.GEQUAL);break;case ac:_.depthFunc(_.GREATER);break;case sc:_.depthFunc(_.NOTEQUAL);break;default:_.depthFunc(_.LEQUAL)}He=Ce}},setLocked:function(Ce){we=Ce},setClear:function(Ce){Se!==Ce&&(Te&&(Ce=1-Ce),_.clearDepth(Ce),Se=Ce)},reset:function(){we=!1,qe=null,He=null,Se=null,Te=!1}}}function T(){let we=!1,Te=null,qe=null,He=null,Se=null,Ce=null,Re=null,Ve=null,rt=null;return{setTest:function(at){we||(at?re(_.STENCIL_TEST):K(_.STENCIL_TEST))},setMask:function(at){Te!==at&&!we&&(_.stencilMask(at),Te=at)},setFunc:function(at,yt,Pt){(qe!==at||He!==yt||Se!==Pt)&&(_.stencilFunc(at,yt,Pt),qe=at,He=yt,Se=Pt)},setOp:function(at,yt,Pt){(Ce!==at||Re!==yt||Ve!==Pt)&&(_.stencilOp(at,yt,Pt),Ce=at,Re=yt,Ve=Pt)},setLocked:function(at){we=at},setClear:function(at){rt!==at&&(_.clearStencil(at),rt=at)},reset:function(){we=!1,Te=null,qe=null,He=null,Se=null,Ce=null,Re=null,Ve=null,rt=null}}}const L=new a,G=new w,Y=new T,ce=new WeakMap,P=new WeakMap;let S={},c={},x=new WeakMap,t=[],l=null,n=!1,i=null,s=null,g=null,d=null,u=null,f=null,y=null,h=new rn(0,0,0),p=0,r=!1,o=null,m=null,b=null,E=null,M=null;const D=_.getParameter(_.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let A=!1,v=0;const k=_.getParameter(_.VERSION);k.indexOf("WebGL")!==-1?(v=parseFloat(/^WebGL (\d)/.exec(k)[1]),A=v>=1):k.indexOf("OpenGL ES")!==-1&&(v=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),A=v>=2);let J=null,X={};const te=_.getParameter(_.SCISSOR_BOX),H=_.getParameter(_.VIEWPORT),z=new fn().fromArray(te),B=new fn().fromArray(H);function F(we,Te,qe,He){const Se=new Uint8Array(4),Ce=_.createTexture();_.bindTexture(we,Ce),_.texParameteri(we,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(we,_.TEXTURE_MAG_FILTER,_.NEAREST);for(let Re=0;Re<qe;Re++)we===_.TEXTURE_3D||we===_.TEXTURE_2D_ARRAY?_.texImage3D(Te,0,_.RGBA,1,1,He,0,_.RGBA,_.UNSIGNED_BYTE,Se):_.texImage2D(Te+Re,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,Se);return Ce}const $={};$[_.TEXTURE_2D]=F(_.TEXTURE_2D,_.TEXTURE_2D,1),$[_.TEXTURE_CUBE_MAP]=F(_.TEXTURE_CUBE_MAP,_.TEXTURE_CUBE_MAP_POSITIVE_X,6),$[_.TEXTURE_2D_ARRAY]=F(_.TEXTURE_2D_ARRAY,_.TEXTURE_2D_ARRAY,1,1),$[_.TEXTURE_3D]=F(_.TEXTURE_3D,_.TEXTURE_3D,1,1),L.setClear(0,0,0,1),G.setClear(1),Y.setClear(0),re(_.DEPTH_TEST),G.setFunc(Wi),me(!1),Ae(yl),re(_.CULL_FACE),ae(Jr);function re(we){S[we]!==!0&&(_.enable(we),S[we]=!0)}function K(we){S[we]!==!1&&(_.disable(we),S[we]=!1)}function ue(we,Te){return c[we]!==Te?(_.bindFramebuffer(we,Te),c[we]=Te,we===_.DRAW_FRAMEBUFFER&&(c[_.FRAMEBUFFER]=Te),we===_.FRAMEBUFFER&&(c[_.DRAW_FRAMEBUFFER]=Te),!0):!1}function ie(we,Te){let qe=t,He=!1;if(we){qe=x.get(Te),qe===void 0&&(qe=[],x.set(Te,qe));const Se=we.textures;if(qe.length!==Se.length||qe[0]!==_.COLOR_ATTACHMENT0){for(let Ce=0,Re=Se.length;Ce<Re;Ce++)qe[Ce]=_.COLOR_ATTACHMENT0+Ce;qe.length=Se.length,He=!0}}else qe[0]!==_.BACK&&(qe[0]=_.BACK,He=!0);He&&_.drawBuffers(qe)}function Q(we){return l!==we?(_.useProgram(we),l=we,!0):!1}const pe={[fi]:_.FUNC_ADD,[Bu]:_.FUNC_SUBTRACT,[Fu]:_.FUNC_REVERSE_SUBTRACT};pe[Ou]=_.MIN,pe[Ru]=_.MAX;const ee={[Nu]:_.ZERO,[Uu]:_.ONE,[qu]:_.SRC_COLOR,[$s]:_.SRC_ALPHA,[Hu]:_.SRC_ALPHA_SATURATE,[Qu]:_.DST_COLOR,[Gu]:_.DST_ALPHA,[zu]:_.ONE_MINUS_SRC_COLOR,[ec]:_.ONE_MINUS_SRC_ALPHA,[ju]:_.ONE_MINUS_DST_COLOR,[Vu]:_.ONE_MINUS_DST_ALPHA,[Yu]:_.CONSTANT_COLOR,[Wu]:_.ONE_MINUS_CONSTANT_COLOR,[Xu]:_.CONSTANT_ALPHA,[Ku]:_.ONE_MINUS_CONSTANT_ALPHA};function ae(we,Te,qe,He,Se,Ce,Re,Ve,rt,at){if(we===Jr){n===!0&&(K(_.BLEND),n=!1);return}if(n===!1&&(re(_.BLEND),n=!0),we!==Lu){if(we!==i||at!==r){if((s!==fi||u!==fi)&&(_.blendEquation(_.FUNC_ADD),s=fi,u=fi),at)switch(we){case Qi:_.blendFuncSeparate(_.ONE,_.ONE_MINUS_SRC_ALPHA,_.ONE,_.ONE_MINUS_SRC_ALPHA);break;case vl:_.blendFunc(_.ONE,_.ONE);break;case bl:_.blendFuncSeparate(_.ZERO,_.ONE_MINUS_SRC_COLOR,_.ZERO,_.ONE);break;case xl:_.blendFuncSeparate(_.DST_COLOR,_.ONE_MINUS_SRC_ALPHA,_.ZERO,_.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",we);break}else switch(we){case Qi:_.blendFuncSeparate(_.SRC_ALPHA,_.ONE_MINUS_SRC_ALPHA,_.ONE,_.ONE_MINUS_SRC_ALPHA);break;case vl:_.blendFuncSeparate(_.SRC_ALPHA,_.ONE,_.ONE,_.ONE);break;case bl:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case xl:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",we);break}g=null,d=null,f=null,y=null,h.set(0,0,0),p=0,i=we,r=at}return}Se=Se||Te,Ce=Ce||qe,Re=Re||He,(Te!==s||Se!==u)&&(_.blendEquationSeparate(pe[Te],pe[Se]),s=Te,u=Se),(qe!==g||He!==d||Ce!==f||Re!==y)&&(_.blendFuncSeparate(ee[qe],ee[He],ee[Ce],ee[Re]),g=qe,d=He,f=Ce,y=Re),(Ve.equals(h)===!1||rt!==p)&&(_.blendColor(Ve.r,Ve.g,Ve.b,rt),h.copy(Ve),p=rt),i=we,r=!1}function le(we,Te){we.side===Br?K(_.CULL_FACE):re(_.CULL_FACE);let qe=we.side===Yn;Te&&(qe=!qe),me(qe),we.blending===Qi&&we.transparent===!1?ae(Jr):ae(we.blending,we.blendEquation,we.blendSrc,we.blendDst,we.blendEquationAlpha,we.blendSrcAlpha,we.blendDstAlpha,we.blendColor,we.blendAlpha,we.premultipliedAlpha),G.setFunc(we.depthFunc),G.setTest(we.depthTest),G.setMask(we.depthWrite),L.setMask(we.colorWrite);const He=we.stencilWrite;Y.setTest(He),He&&(Y.setMask(we.stencilWriteMask),Y.setFunc(we.stencilFunc,we.stencilRef,we.stencilFuncMask),Y.setOp(we.stencilFail,we.stencilZFail,we.stencilZPass)),Fe(we.polygonOffset,we.polygonOffsetFactor,we.polygonOffsetUnits),we.alphaToCoverage===!0?re(_.SAMPLE_ALPHA_TO_COVERAGE):K(_.SAMPLE_ALPHA_TO_COVERAGE)}function me(we){o!==we&&(we?_.frontFace(_.CW):_.frontFace(_.CCW),o=we)}function Ae(we){we!==Du?(re(_.CULL_FACE),we!==m&&(we===yl?_.cullFace(_.BACK):we===ku?_.cullFace(_.FRONT):_.cullFace(_.FRONT_AND_BACK))):K(_.CULL_FACE),m=we}function Be(we){we!==b&&(A&&_.lineWidth(we),b=we)}function Fe(we,Te,qe){we?(re(_.POLYGON_OFFSET_FILL),(E!==Te||M!==qe)&&(_.polygonOffset(Te,qe),E=Te,M=qe)):K(_.POLYGON_OFFSET_FILL)}function Le(we){we?re(_.SCISSOR_TEST):K(_.SCISSOR_TEST)}function ze(we){we===void 0&&(we=_.TEXTURE0+D-1),J!==we&&(_.activeTexture(we),J=we)}function We(we,Te,qe){qe===void 0&&(J===null?qe=_.TEXTURE0+D-1:qe=J);let He=X[qe];He===void 0&&(He={type:void 0,texture:void 0},X[qe]=He),(He.type!==we||He.texture!==Te)&&(J!==qe&&(_.activeTexture(qe),J=qe),_.bindTexture(we,Te||$[we]),He.type=we,He.texture=Te)}function Z(){const we=X[J];we!==void 0&&we.type!==void 0&&(_.bindTexture(we.type,null),we.type=void 0,we.texture=void 0)}function C(){try{_.compressedTexImage2D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function oe(){try{_.compressedTexImage3D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function ge(){try{_.texSubImage2D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function _e(){try{_.texSubImage3D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function De(){try{_.compressedTexSubImage2D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function je(){try{_.compressedTexSubImage3D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function Ie(){try{_.texStorage2D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function Oe(){try{_.texStorage3D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function N(){try{_.texImage2D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function Pe(){try{_.texImage3D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function Xe(we){z.equals(we)===!1&&(_.scissor(we.x,we.y,we.z,we.w),z.copy(we))}function $e(we){B.equals(we)===!1&&(_.viewport(we.x,we.y,we.z,we.w),B.copy(we))}function ht(we,Te){let qe=P.get(Te);qe===void 0&&(qe=new WeakMap,P.set(Te,qe));let He=qe.get(we);He===void 0&&(He=_.getUniformBlockIndex(Te,we.name),qe.set(we,He))}function ye(we,Te){const He=P.get(Te).get(we);ce.get(Te)!==He&&(_.uniformBlockBinding(Te,He,we.__bindingPointIndex),ce.set(Te,He))}function Ue(){_.disable(_.BLEND),_.disable(_.CULL_FACE),_.disable(_.DEPTH_TEST),_.disable(_.POLYGON_OFFSET_FILL),_.disable(_.SCISSOR_TEST),_.disable(_.STENCIL_TEST),_.disable(_.SAMPLE_ALPHA_TO_COVERAGE),_.blendEquation(_.FUNC_ADD),_.blendFunc(_.ONE,_.ZERO),_.blendFuncSeparate(_.ONE,_.ZERO,_.ONE,_.ZERO),_.blendColor(0,0,0,0),_.colorMask(!0,!0,!0,!0),_.clearColor(0,0,0,0),_.depthMask(!0),_.depthFunc(_.LESS),G.setReversed(!1),_.clearDepth(1),_.stencilMask(4294967295),_.stencilFunc(_.ALWAYS,0,4294967295),_.stencilOp(_.KEEP,_.KEEP,_.KEEP),_.clearStencil(0),_.cullFace(_.BACK),_.frontFace(_.CCW),_.polygonOffset(0,0),_.activeTexture(_.TEXTURE0),_.bindFramebuffer(_.FRAMEBUFFER,null),_.bindFramebuffer(_.DRAW_FRAMEBUFFER,null),_.bindFramebuffer(_.READ_FRAMEBUFFER,null),_.useProgram(null),_.lineWidth(1),_.scissor(0,0,_.canvas.width,_.canvas.height),_.viewport(0,0,_.canvas.width,_.canvas.height),S={},J=null,X={},c={},x=new WeakMap,t=[],l=null,n=!1,i=null,s=null,g=null,d=null,u=null,f=null,y=null,h=new rn(0,0,0),p=0,r=!1,o=null,m=null,b=null,E=null,M=null,z.set(0,0,_.canvas.width,_.canvas.height),B.set(0,0,_.canvas.width,_.canvas.height),L.reset(),G.reset(),Y.reset()}return{buffers:{color:L,depth:G,stencil:Y},enable:re,disable:K,bindFramebuffer:ue,drawBuffers:ie,useProgram:Q,setBlending:ae,setMaterial:le,setFlipSided:me,setCullFace:Ae,setLineWidth:Be,setPolygonOffset:Fe,setScissorTest:Le,activeTexture:ze,bindTexture:We,unbindTexture:Z,compressedTexImage2D:C,compressedTexImage3D:oe,texImage2D:N,texImage3D:Pe,updateUBOMapping:ht,uniformBlockBinding:ye,texStorage2D:Ie,texStorage3D:Oe,texSubImage2D:ge,texSubImage3D:_e,compressedTexSubImage2D:De,compressedTexSubImage3D:je,scissor:Xe,viewport:$e,reset:Ue}}function By(_,e,a,w,T,L,G){const Y=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,ce=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),P=new Yt,S=new WeakMap;let c;const x=new WeakMap;let t=!1;try{t=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function l(Z,C){return t?new OffscreenCanvas(Z,C):Va("canvas")}function n(Z,C,oe){let ge=1;const _e=We(Z);if((_e.width>oe||_e.height>oe)&&(ge=oe/Math.max(_e.width,_e.height)),ge<1)if(typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Z instanceof ImageBitmap||typeof VideoFrame<"u"&&Z instanceof VideoFrame){const De=Math.floor(ge*_e.width),je=Math.floor(ge*_e.height);c===void 0&&(c=l(De,je));const Ie=C?l(De,je):c;return Ie.width=De,Ie.height=je,Ie.getContext("2d").drawImage(Z,0,0,De,je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+_e.width+"x"+_e.height+") to ("+De+"x"+je+")."),Ie}else return"data"in Z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+_e.width+"x"+_e.height+")."),Z;return Z}function i(Z){return Z.generateMipmaps}function s(Z){_.generateMipmap(Z)}function g(Z){return Z.isWebGLCubeRenderTarget?_.TEXTURE_CUBE_MAP:Z.isWebGL3DRenderTarget?_.TEXTURE_3D:Z.isWebGLArrayRenderTarget||Z.isCompressedArrayTexture?_.TEXTURE_2D_ARRAY:_.TEXTURE_2D}function d(Z,C,oe,ge,_e=!1){if(Z!==null){if(_[Z]!==void 0)return _[Z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Z+"'")}let De=C;if(C===_.RED&&(oe===_.FLOAT&&(De=_.R32F),oe===_.HALF_FLOAT&&(De=_.R16F),oe===_.UNSIGNED_BYTE&&(De=_.R8)),C===_.RED_INTEGER&&(oe===_.UNSIGNED_BYTE&&(De=_.R8UI),oe===_.UNSIGNED_SHORT&&(De=_.R16UI),oe===_.UNSIGNED_INT&&(De=_.R32UI),oe===_.BYTE&&(De=_.R8I),oe===_.SHORT&&(De=_.R16I),oe===_.INT&&(De=_.R32I)),C===_.RG&&(oe===_.FLOAT&&(De=_.RG32F),oe===_.HALF_FLOAT&&(De=_.RG16F),oe===_.UNSIGNED_BYTE&&(De=_.RG8)),C===_.RG_INTEGER&&(oe===_.UNSIGNED_BYTE&&(De=_.RG8UI),oe===_.UNSIGNED_SHORT&&(De=_.RG16UI),oe===_.UNSIGNED_INT&&(De=_.RG32UI),oe===_.BYTE&&(De=_.RG8I),oe===_.SHORT&&(De=_.RG16I),oe===_.INT&&(De=_.RG32I)),C===_.RGB_INTEGER&&(oe===_.UNSIGNED_BYTE&&(De=_.RGB8UI),oe===_.UNSIGNED_SHORT&&(De=_.RGB16UI),oe===_.UNSIGNED_INT&&(De=_.RGB32UI),oe===_.BYTE&&(De=_.RGB8I),oe===_.SHORT&&(De=_.RGB16I),oe===_.INT&&(De=_.RGB32I)),C===_.RGBA_INTEGER&&(oe===_.UNSIGNED_BYTE&&(De=_.RGBA8UI),oe===_.UNSIGNED_SHORT&&(De=_.RGBA16UI),oe===_.UNSIGNED_INT&&(De=_.RGBA32UI),oe===_.BYTE&&(De=_.RGBA8I),oe===_.SHORT&&(De=_.RGBA16I),oe===_.INT&&(De=_.RGBA32I)),C===_.RGB&&oe===_.UNSIGNED_INT_5_9_9_9_REV&&(De=_.RGB9_E5),C===_.RGBA){const je=_e?za:an.getTransfer(ge);oe===_.FLOAT&&(De=_.RGBA32F),oe===_.HALF_FLOAT&&(De=_.RGBA16F),oe===_.UNSIGNED_BYTE&&(De=je===pn?_.SRGB8_ALPHA8:_.RGBA8),oe===_.UNSIGNED_SHORT_4_4_4_4&&(De=_.RGBA4),oe===_.UNSIGNED_SHORT_5_5_5_1&&(De=_.RGB5_A1)}return(De===_.R16F||De===_.R32F||De===_.RG16F||De===_.RG32F||De===_.RGBA16F||De===_.RGBA32F)&&e.get("EXT_color_buffer_float"),De}function u(Z,C){let oe;return Z?C===null||C===bi||C===Oo?oe=_.DEPTH24_STENCIL8:C===Fr?oe=_.DEPTH32F_STENCIL8:C===Fo&&(oe=_.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):C===null||C===bi||C===Oo?oe=_.DEPTH_COMPONENT24:C===Fr?oe=_.DEPTH_COMPONENT32F:C===Fo&&(oe=_.DEPTH_COMPONENT16),oe}function f(Z,C){return i(Z)===!0||Z.isFramebufferTexture&&Z.minFilter!==yr&&Z.minFilter!==cr?Math.log2(Math.max(C.width,C.height))+1:Z.mipmaps!==void 0&&Z.mipmaps.length>0?Z.mipmaps.length:Z.isCompressedTexture&&Array.isArray(Z.image)?C.mipmaps.length:1}function y(Z){const C=Z.target;C.removeEventListener("dispose",y),p(C),C.isVideoTexture&&S.delete(C)}function h(Z){const C=Z.target;C.removeEventListener("dispose",h),o(C)}function p(Z){const C=w.get(Z);if(C.__webglInit===void 0)return;const oe=Z.source,ge=x.get(oe);if(ge){const _e=ge[C.__cacheKey];_e.usedTimes--,_e.usedTimes===0&&r(Z),Object.keys(ge).length===0&&x.delete(oe)}w.remove(Z)}function r(Z){const C=w.get(Z);_.deleteTexture(C.__webglTexture);const oe=Z.source,ge=x.get(oe);delete ge[C.__cacheKey],G.memory.textures--}function o(Z){const C=w.get(Z);if(Z.depthTexture&&(Z.depthTexture.dispose(),w.remove(Z.depthTexture)),Z.isWebGLCubeRenderTarget)for(let ge=0;ge<6;ge++){if(Array.isArray(C.__webglFramebuffer[ge]))for(let _e=0;_e<C.__webglFramebuffer[ge].length;_e++)_.deleteFramebuffer(C.__webglFramebuffer[ge][_e]);else _.deleteFramebuffer(C.__webglFramebuffer[ge]);C.__webglDepthbuffer&&_.deleteRenderbuffer(C.__webglDepthbuffer[ge])}else{if(Array.isArray(C.__webglFramebuffer))for(let ge=0;ge<C.__webglFramebuffer.length;ge++)_.deleteFramebuffer(C.__webglFramebuffer[ge]);else _.deleteFramebuffer(C.__webglFramebuffer);if(C.__webglDepthbuffer&&_.deleteRenderbuffer(C.__webglDepthbuffer),C.__webglMultisampledFramebuffer&&_.deleteFramebuffer(C.__webglMultisampledFramebuffer),C.__webglColorRenderbuffer)for(let ge=0;ge<C.__webglColorRenderbuffer.length;ge++)C.__webglColorRenderbuffer[ge]&&_.deleteRenderbuffer(C.__webglColorRenderbuffer[ge]);C.__webglDepthRenderbuffer&&_.deleteRenderbuffer(C.__webglDepthRenderbuffer)}const oe=Z.textures;for(let ge=0,_e=oe.length;ge<_e;ge++){const De=w.get(oe[ge]);De.__webglTexture&&(_.deleteTexture(De.__webglTexture),G.memory.textures--),w.remove(oe[ge])}w.remove(Z)}let m=0;function b(){m=0}function E(){const Z=m;return Z>=T.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Z+" texture units while this GPU supports only "+T.maxTextures),m+=1,Z}function M(Z){const C=[];return C.push(Z.wrapS),C.push(Z.wrapT),C.push(Z.wrapR||0),C.push(Z.magFilter),C.push(Z.minFilter),C.push(Z.anisotropy),C.push(Z.internalFormat),C.push(Z.format),C.push(Z.type),C.push(Z.generateMipmaps),C.push(Z.premultiplyAlpha),C.push(Z.flipY),C.push(Z.unpackAlignment),C.push(Z.colorSpace),C.join()}function D(Z,C){const oe=w.get(Z);if(Z.isVideoTexture&&Le(Z),Z.isRenderTargetTexture===!1&&Z.isExternalTexture!==!0&&Z.version>0&&oe.__version!==Z.version){const ge=Z.image;if(ge===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{$(oe,Z,C);return}}else Z.isExternalTexture&&(oe.__webglTexture=Z.sourceTexture?Z.sourceTexture:null);a.bindTexture(_.TEXTURE_2D,oe.__webglTexture,_.TEXTURE0+C)}function A(Z,C){const oe=w.get(Z);if(Z.isRenderTargetTexture===!1&&Z.version>0&&oe.__version!==Z.version){$(oe,Z,C);return}a.bindTexture(_.TEXTURE_2D_ARRAY,oe.__webglTexture,_.TEXTURE0+C)}function v(Z,C){const oe=w.get(Z);if(Z.isRenderTargetTexture===!1&&Z.version>0&&oe.__version!==Z.version){$(oe,Z,C);return}a.bindTexture(_.TEXTURE_3D,oe.__webglTexture,_.TEXTURE0+C)}function k(Z,C){const oe=w.get(Z);if(Z.version>0&&oe.__version!==Z.version){re(oe,Z,C);return}a.bindTexture(_.TEXTURE_CUBE_MAP,oe.__webglTexture,_.TEXTURE0+C)}const J={[dc]:_.REPEAT,[mi]:_.CLAMP_TO_EDGE,[uc]:_.MIRRORED_REPEAT},X={[yr]:_.NEAREST,[ap]:_.NEAREST_MIPMAP_NEAREST,[aa]:_.NEAREST_MIPMAP_LINEAR,[cr]:_.LINEAR,[hs]:_.LINEAR_MIPMAP_NEAREST,[yi]:_.LINEAR_MIPMAP_LINEAR},te={[up]:_.NEVER,[yp]:_.ALWAYS,[pp]:_.LESS,[Ud]:_.LEQUAL,[hp]:_.EQUAL,[mp]:_.GEQUAL,[fp]:_.GREATER,[gp]:_.NOTEQUAL};function H(Z,C){if(C.type===Fr&&e.has("OES_texture_float_linear")===!1&&(C.magFilter===cr||C.magFilter===hs||C.magFilter===aa||C.magFilter===yi||C.minFilter===cr||C.minFilter===hs||C.minFilter===aa||C.minFilter===yi)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),_.texParameteri(Z,_.TEXTURE_WRAP_S,J[C.wrapS]),_.texParameteri(Z,_.TEXTURE_WRAP_T,J[C.wrapT]),(Z===_.TEXTURE_3D||Z===_.TEXTURE_2D_ARRAY)&&_.texParameteri(Z,_.TEXTURE_WRAP_R,J[C.wrapR]),_.texParameteri(Z,_.TEXTURE_MAG_FILTER,X[C.magFilter]),_.texParameteri(Z,_.TEXTURE_MIN_FILTER,X[C.minFilter]),C.compareFunction&&(_.texParameteri(Z,_.TEXTURE_COMPARE_MODE,_.COMPARE_REF_TO_TEXTURE),_.texParameteri(Z,_.TEXTURE_COMPARE_FUNC,te[C.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(C.magFilter===yr||C.minFilter!==aa&&C.minFilter!==yi||C.type===Fr&&e.has("OES_texture_float_linear")===!1)return;if(C.anisotropy>1||w.get(C).__currentAnisotropy){const oe=e.get("EXT_texture_filter_anisotropic");_.texParameterf(Z,oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(C.anisotropy,T.getMaxAnisotropy())),w.get(C).__currentAnisotropy=C.anisotropy}}}function z(Z,C){let oe=!1;Z.__webglInit===void 0&&(Z.__webglInit=!0,C.addEventListener("dispose",y));const ge=C.source;let _e=x.get(ge);_e===void 0&&(_e={},x.set(ge,_e));const De=M(C);if(De!==Z.__cacheKey){_e[De]===void 0&&(_e[De]={texture:_.createTexture(),usedTimes:0},G.memory.textures++,oe=!0),_e[De].usedTimes++;const je=_e[Z.__cacheKey];je!==void 0&&(_e[Z.__cacheKey].usedTimes--,je.usedTimes===0&&r(C)),Z.__cacheKey=De,Z.__webglTexture=_e[De].texture}return oe}function B(Z,C,oe){return Math.floor(Math.floor(Z/oe)/C)}function F(Z,C,oe,ge){const De=Z.updateRanges;if(De.length===0)a.texSubImage2D(_.TEXTURE_2D,0,0,0,C.width,C.height,oe,ge,C.data);else{De.sort((Pe,Xe)=>Pe.start-Xe.start);let je=0;for(let Pe=1;Pe<De.length;Pe++){const Xe=De[je],$e=De[Pe],ht=Xe.start+Xe.count,ye=B($e.start,C.width,4),Ue=B(Xe.start,C.width,4);$e.start<=ht+1&&ye===Ue&&B($e.start+$e.count-1,C.width,4)===ye?Xe.count=Math.max(Xe.count,$e.start+$e.count-Xe.start):(++je,De[je]=$e)}De.length=je+1;const Ie=_.getParameter(_.UNPACK_ROW_LENGTH),Oe=_.getParameter(_.UNPACK_SKIP_PIXELS),N=_.getParameter(_.UNPACK_SKIP_ROWS);_.pixelStorei(_.UNPACK_ROW_LENGTH,C.width);for(let Pe=0,Xe=De.length;Pe<Xe;Pe++){const $e=De[Pe],ht=Math.floor($e.start/4),ye=Math.ceil($e.count/4),Ue=ht%C.width,we=Math.floor(ht/C.width),Te=ye,qe=1;_.pixelStorei(_.UNPACK_SKIP_PIXELS,Ue),_.pixelStorei(_.UNPACK_SKIP_ROWS,we),a.texSubImage2D(_.TEXTURE_2D,0,Ue,we,Te,qe,oe,ge,C.data)}Z.clearUpdateRanges(),_.pixelStorei(_.UNPACK_ROW_LENGTH,Ie),_.pixelStorei(_.UNPACK_SKIP_PIXELS,Oe),_.pixelStorei(_.UNPACK_SKIP_ROWS,N)}}function $(Z,C,oe){let ge=_.TEXTURE_2D;(C.isDataArrayTexture||C.isCompressedArrayTexture)&&(ge=_.TEXTURE_2D_ARRAY),C.isData3DTexture&&(ge=_.TEXTURE_3D);const _e=z(Z,C),De=C.source;a.bindTexture(ge,Z.__webglTexture,_.TEXTURE0+oe);const je=w.get(De);if(De.version!==je.__version||_e===!0){a.activeTexture(_.TEXTURE0+oe);const Ie=an.getPrimaries(an.workingColorSpace),Oe=C.colorSpace===Kr?null:an.getPrimaries(C.colorSpace),N=C.colorSpace===Kr||Ie===Oe?_.NONE:_.BROWSER_DEFAULT_WEBGL;_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,C.flipY),_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C.premultiplyAlpha),_.pixelStorei(_.UNPACK_ALIGNMENT,C.unpackAlignment),_.pixelStorei(_.UNPACK_COLORSPACE_CONVERSION_WEBGL,N);let Pe=n(C.image,!1,T.maxTextureSize);Pe=ze(C,Pe);const Xe=L.convert(C.format,C.colorSpace),$e=L.convert(C.type);let ht=d(C.internalFormat,Xe,$e,C.colorSpace,C.isVideoTexture);H(ge,C);let ye;const Ue=C.mipmaps,we=C.isVideoTexture!==!0,Te=je.__version===void 0||_e===!0,qe=De.dataReady,He=f(C,Pe);if(C.isDepthTexture)ht=u(C.format===No,C.type),Te&&(we?a.texStorage2D(_.TEXTURE_2D,1,ht,Pe.width,Pe.height):a.texImage2D(_.TEXTURE_2D,0,ht,Pe.width,Pe.height,0,Xe,$e,null));else if(C.isDataTexture)if(Ue.length>0){we&&Te&&a.texStorage2D(_.TEXTURE_2D,He,ht,Ue[0].width,Ue[0].height);for(let Se=0,Ce=Ue.length;Se<Ce;Se++)ye=Ue[Se],we?qe&&a.texSubImage2D(_.TEXTURE_2D,Se,0,0,ye.width,ye.height,Xe,$e,ye.data):a.texImage2D(_.TEXTURE_2D,Se,ht,ye.width,ye.height,0,Xe,$e,ye.data);C.generateMipmaps=!1}else we?(Te&&a.texStorage2D(_.TEXTURE_2D,He,ht,Pe.width,Pe.height),qe&&F(C,Pe,Xe,$e)):a.texImage2D(_.TEXTURE_2D,0,ht,Pe.width,Pe.height,0,Xe,$e,Pe.data);else if(C.isCompressedTexture)if(C.isCompressedArrayTexture){we&&Te&&a.texStorage3D(_.TEXTURE_2D_ARRAY,He,ht,Ue[0].width,Ue[0].height,Pe.depth);for(let Se=0,Ce=Ue.length;Se<Ce;Se++)if(ye=Ue[Se],C.format!==gr)if(Xe!==null)if(we){if(qe)if(C.layerUpdates.size>0){const Re=Xl(ye.width,ye.height,C.format,C.type);for(const Ve of C.layerUpdates){const rt=ye.data.subarray(Ve*Re/ye.data.BYTES_PER_ELEMENT,(Ve+1)*Re/ye.data.BYTES_PER_ELEMENT);a.compressedTexSubImage3D(_.TEXTURE_2D_ARRAY,Se,0,0,Ve,ye.width,ye.height,1,Xe,rt)}C.clearLayerUpdates()}else a.compressedTexSubImage3D(_.TEXTURE_2D_ARRAY,Se,0,0,0,ye.width,ye.height,Pe.depth,Xe,ye.data)}else a.compressedTexImage3D(_.TEXTURE_2D_ARRAY,Se,ht,ye.width,ye.height,Pe.depth,0,ye.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else we?qe&&a.texSubImage3D(_.TEXTURE_2D_ARRAY,Se,0,0,0,ye.width,ye.height,Pe.depth,Xe,$e,ye.data):a.texImage3D(_.TEXTURE_2D_ARRAY,Se,ht,ye.width,ye.height,Pe.depth,0,Xe,$e,ye.data)}else{we&&Te&&a.texStorage2D(_.TEXTURE_2D,He,ht,Ue[0].width,Ue[0].height);for(let Se=0,Ce=Ue.length;Se<Ce;Se++)ye=Ue[Se],C.format!==gr?Xe!==null?we?qe&&a.compressedTexSubImage2D(_.TEXTURE_2D,Se,0,0,ye.width,ye.height,Xe,ye.data):a.compressedTexImage2D(_.TEXTURE_2D,Se,ht,ye.width,ye.height,0,ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?qe&&a.texSubImage2D(_.TEXTURE_2D,Se,0,0,ye.width,ye.height,Xe,$e,ye.data):a.texImage2D(_.TEXTURE_2D,Se,ht,ye.width,ye.height,0,Xe,$e,ye.data)}else if(C.isDataArrayTexture)if(we){if(Te&&a.texStorage3D(_.TEXTURE_2D_ARRAY,He,ht,Pe.width,Pe.height,Pe.depth),qe)if(C.layerUpdates.size>0){const Se=Xl(Pe.width,Pe.height,C.format,C.type);for(const Ce of C.layerUpdates){const Re=Pe.data.subarray(Ce*Se/Pe.data.BYTES_PER_ELEMENT,(Ce+1)*Se/Pe.data.BYTES_PER_ELEMENT);a.texSubImage3D(_.TEXTURE_2D_ARRAY,0,0,0,Ce,Pe.width,Pe.height,1,Xe,$e,Re)}C.clearLayerUpdates()}else a.texSubImage3D(_.TEXTURE_2D_ARRAY,0,0,0,0,Pe.width,Pe.height,Pe.depth,Xe,$e,Pe.data)}else a.texImage3D(_.TEXTURE_2D_ARRAY,0,ht,Pe.width,Pe.height,Pe.depth,0,Xe,$e,Pe.data);else if(C.isData3DTexture)we?(Te&&a.texStorage3D(_.TEXTURE_3D,He,ht,Pe.width,Pe.height,Pe.depth),qe&&a.texSubImage3D(_.TEXTURE_3D,0,0,0,0,Pe.width,Pe.height,Pe.depth,Xe,$e,Pe.data)):a.texImage3D(_.TEXTURE_3D,0,ht,Pe.width,Pe.height,Pe.depth,0,Xe,$e,Pe.data);else if(C.isFramebufferTexture){if(Te)if(we)a.texStorage2D(_.TEXTURE_2D,He,ht,Pe.width,Pe.height);else{let Se=Pe.width,Ce=Pe.height;for(let Re=0;Re<He;Re++)a.texImage2D(_.TEXTURE_2D,Re,ht,Se,Ce,0,Xe,$e,null),Se>>=1,Ce>>=1}}else if(Ue.length>0){if(we&&Te){const Se=We(Ue[0]);a.texStorage2D(_.TEXTURE_2D,He,ht,Se.width,Se.height)}for(let Se=0,Ce=Ue.length;Se<Ce;Se++)ye=Ue[Se],we?qe&&a.texSubImage2D(_.TEXTURE_2D,Se,0,0,Xe,$e,ye):a.texImage2D(_.TEXTURE_2D,Se,ht,Xe,$e,ye);C.generateMipmaps=!1}else if(we){if(Te){const Se=We(Pe);a.texStorage2D(_.TEXTURE_2D,He,ht,Se.width,Se.height)}qe&&a.texSubImage2D(_.TEXTURE_2D,0,0,0,Xe,$e,Pe)}else a.texImage2D(_.TEXTURE_2D,0,ht,Xe,$e,Pe);i(C)&&s(ge),je.__version=De.version,C.onUpdate&&C.onUpdate(C)}Z.__version=C.version}function re(Z,C,oe){if(C.image.length!==6)return;const ge=z(Z,C),_e=C.source;a.bindTexture(_.TEXTURE_CUBE_MAP,Z.__webglTexture,_.TEXTURE0+oe);const De=w.get(_e);if(_e.version!==De.__version||ge===!0){a.activeTexture(_.TEXTURE0+oe);const je=an.getPrimaries(an.workingColorSpace),Ie=C.colorSpace===Kr?null:an.getPrimaries(C.colorSpace),Oe=C.colorSpace===Kr||je===Ie?_.NONE:_.BROWSER_DEFAULT_WEBGL;_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,C.flipY),_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C.premultiplyAlpha),_.pixelStorei(_.UNPACK_ALIGNMENT,C.unpackAlignment),_.pixelStorei(_.UNPACK_COLORSPACE_CONVERSION_WEBGL,Oe);const N=C.isCompressedTexture||C.image[0].isCompressedTexture,Pe=C.image[0]&&C.image[0].isDataTexture,Xe=[];for(let Ce=0;Ce<6;Ce++)!N&&!Pe?Xe[Ce]=n(C.image[Ce],!0,T.maxCubemapSize):Xe[Ce]=Pe?C.image[Ce].image:C.image[Ce],Xe[Ce]=ze(C,Xe[Ce]);const $e=Xe[0],ht=L.convert(C.format,C.colorSpace),ye=L.convert(C.type),Ue=d(C.internalFormat,ht,ye,C.colorSpace),we=C.isVideoTexture!==!0,Te=De.__version===void 0||ge===!0,qe=_e.dataReady;let He=f(C,$e);H(_.TEXTURE_CUBE_MAP,C);let Se;if(N){we&&Te&&a.texStorage2D(_.TEXTURE_CUBE_MAP,He,Ue,$e.width,$e.height);for(let Ce=0;Ce<6;Ce++){Se=Xe[Ce].mipmaps;for(let Re=0;Re<Se.length;Re++){const Ve=Se[Re];C.format!==gr?ht!==null?we?qe&&a.compressedTexSubImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Re,0,0,Ve.width,Ve.height,ht,Ve.data):a.compressedTexImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Re,Ue,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):we?qe&&a.texSubImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Re,0,0,Ve.width,Ve.height,ht,ye,Ve.data):a.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Re,Ue,Ve.width,Ve.height,0,ht,ye,Ve.data)}}}else{if(Se=C.mipmaps,we&&Te){Se.length>0&&He++;const Ce=We(Xe[0]);a.texStorage2D(_.TEXTURE_CUBE_MAP,He,Ue,Ce.width,Ce.height)}for(let Ce=0;Ce<6;Ce++)if(Pe){we?qe&&a.texSubImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,0,0,Xe[Ce].width,Xe[Ce].height,ht,ye,Xe[Ce].data):a.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,Ue,Xe[Ce].width,Xe[Ce].height,0,ht,ye,Xe[Ce].data);for(let Re=0;Re<Se.length;Re++){const rt=Se[Re].image[Ce].image;we?qe&&a.texSubImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Re+1,0,0,rt.width,rt.height,ht,ye,rt.data):a.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Re+1,Ue,rt.width,rt.height,0,ht,ye,rt.data)}}else{we?qe&&a.texSubImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,0,0,ht,ye,Xe[Ce]):a.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,Ue,ht,ye,Xe[Ce]);for(let Re=0;Re<Se.length;Re++){const Ve=Se[Re];we?qe&&a.texSubImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Re+1,0,0,ht,ye,Ve.image[Ce]):a.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Re+1,Ue,ht,ye,Ve.image[Ce])}}}i(C)&&s(_.TEXTURE_CUBE_MAP),De.__version=_e.version,C.onUpdate&&C.onUpdate(C)}Z.__version=C.version}function K(Z,C,oe,ge,_e,De){const je=L.convert(oe.format,oe.colorSpace),Ie=L.convert(oe.type),Oe=d(oe.internalFormat,je,Ie,oe.colorSpace),N=w.get(C),Pe=w.get(oe);if(Pe.__renderTarget=C,!N.__hasExternalTextures){const Xe=Math.max(1,C.width>>De),$e=Math.max(1,C.height>>De);_e===_.TEXTURE_3D||_e===_.TEXTURE_2D_ARRAY?a.texImage3D(_e,De,Oe,Xe,$e,C.depth,0,je,Ie,null):a.texImage2D(_e,De,Oe,Xe,$e,0,je,Ie,null)}a.bindFramebuffer(_.FRAMEBUFFER,Z),Fe(C)?Y.framebufferTexture2DMultisampleEXT(_.FRAMEBUFFER,ge,_e,Pe.__webglTexture,0,Be(C)):(_e===_.TEXTURE_2D||_e>=_.TEXTURE_CUBE_MAP_POSITIVE_X&&_e<=_.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&_.framebufferTexture2D(_.FRAMEBUFFER,ge,_e,Pe.__webglTexture,De),a.bindFramebuffer(_.FRAMEBUFFER,null)}function ue(Z,C,oe){if(_.bindRenderbuffer(_.RENDERBUFFER,Z),C.depthBuffer){const ge=C.depthTexture,_e=ge&&ge.isDepthTexture?ge.type:null,De=u(C.stencilBuffer,_e),je=C.stencilBuffer?_.DEPTH_STENCIL_ATTACHMENT:_.DEPTH_ATTACHMENT,Ie=Be(C);Fe(C)?Y.renderbufferStorageMultisampleEXT(_.RENDERBUFFER,Ie,De,C.width,C.height):oe?_.renderbufferStorageMultisample(_.RENDERBUFFER,Ie,De,C.width,C.height):_.renderbufferStorage(_.RENDERBUFFER,De,C.width,C.height),_.framebufferRenderbuffer(_.FRAMEBUFFER,je,_.RENDERBUFFER,Z)}else{const ge=C.textures;for(let _e=0;_e<ge.length;_e++){const De=ge[_e],je=L.convert(De.format,De.colorSpace),Ie=L.convert(De.type),Oe=d(De.internalFormat,je,Ie,De.colorSpace),N=Be(C);oe&&Fe(C)===!1?_.renderbufferStorageMultisample(_.RENDERBUFFER,N,Oe,C.width,C.height):Fe(C)?Y.renderbufferStorageMultisampleEXT(_.RENDERBUFFER,N,Oe,C.width,C.height):_.renderbufferStorage(_.RENDERBUFFER,Oe,C.width,C.height)}}_.bindRenderbuffer(_.RENDERBUFFER,null)}function ie(Z,C){if(C&&C.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(a.bindFramebuffer(_.FRAMEBUFFER,Z),!(C.depthTexture&&C.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ge=w.get(C.depthTexture);ge.__renderTarget=C,(!ge.__webglTexture||C.depthTexture.image.width!==C.width||C.depthTexture.image.height!==C.height)&&(C.depthTexture.image.width=C.width,C.depthTexture.image.height=C.height,C.depthTexture.needsUpdate=!0),D(C.depthTexture,0);const _e=ge.__webglTexture,De=Be(C);if(C.depthTexture.format===Ro)Fe(C)?Y.framebufferTexture2DMultisampleEXT(_.FRAMEBUFFER,_.DEPTH_ATTACHMENT,_.TEXTURE_2D,_e,0,De):_.framebufferTexture2D(_.FRAMEBUFFER,_.DEPTH_ATTACHMENT,_.TEXTURE_2D,_e,0);else if(C.depthTexture.format===No)Fe(C)?Y.framebufferTexture2DMultisampleEXT(_.FRAMEBUFFER,_.DEPTH_STENCIL_ATTACHMENT,_.TEXTURE_2D,_e,0,De):_.framebufferTexture2D(_.FRAMEBUFFER,_.DEPTH_STENCIL_ATTACHMENT,_.TEXTURE_2D,_e,0);else throw new Error("Unknown depthTexture format")}function Q(Z){const C=w.get(Z),oe=Z.isWebGLCubeRenderTarget===!0;if(C.__boundDepthTexture!==Z.depthTexture){const ge=Z.depthTexture;if(C.__depthDisposeCallback&&C.__depthDisposeCallback(),ge){const _e=()=>{delete C.__boundDepthTexture,delete C.__depthDisposeCallback,ge.removeEventListener("dispose",_e)};ge.addEventListener("dispose",_e),C.__depthDisposeCallback=_e}C.__boundDepthTexture=ge}if(Z.depthTexture&&!C.__autoAllocateDepthBuffer){if(oe)throw new Error("target.depthTexture not supported in Cube render targets");const ge=Z.texture.mipmaps;ge&&ge.length>0?ie(C.__webglFramebuffer[0],Z):ie(C.__webglFramebuffer,Z)}else if(oe){C.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)if(a.bindFramebuffer(_.FRAMEBUFFER,C.__webglFramebuffer[ge]),C.__webglDepthbuffer[ge]===void 0)C.__webglDepthbuffer[ge]=_.createRenderbuffer(),ue(C.__webglDepthbuffer[ge],Z,!1);else{const _e=Z.stencilBuffer?_.DEPTH_STENCIL_ATTACHMENT:_.DEPTH_ATTACHMENT,De=C.__webglDepthbuffer[ge];_.bindRenderbuffer(_.RENDERBUFFER,De),_.framebufferRenderbuffer(_.FRAMEBUFFER,_e,_.RENDERBUFFER,De)}}else{const ge=Z.texture.mipmaps;if(ge&&ge.length>0?a.bindFramebuffer(_.FRAMEBUFFER,C.__webglFramebuffer[0]):a.bindFramebuffer(_.FRAMEBUFFER,C.__webglFramebuffer),C.__webglDepthbuffer===void 0)C.__webglDepthbuffer=_.createRenderbuffer(),ue(C.__webglDepthbuffer,Z,!1);else{const _e=Z.stencilBuffer?_.DEPTH_STENCIL_ATTACHMENT:_.DEPTH_ATTACHMENT,De=C.__webglDepthbuffer;_.bindRenderbuffer(_.RENDERBUFFER,De),_.framebufferRenderbuffer(_.FRAMEBUFFER,_e,_.RENDERBUFFER,De)}}a.bindFramebuffer(_.FRAMEBUFFER,null)}function pe(Z,C,oe){const ge=w.get(Z);C!==void 0&&K(ge.__webglFramebuffer,Z,Z.texture,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,0),oe!==void 0&&Q(Z)}function ee(Z){const C=Z.texture,oe=w.get(Z),ge=w.get(C);Z.addEventListener("dispose",h);const _e=Z.textures,De=Z.isWebGLCubeRenderTarget===!0,je=_e.length>1;if(je||(ge.__webglTexture===void 0&&(ge.__webglTexture=_.createTexture()),ge.__version=C.version,G.memory.textures++),De){oe.__webglFramebuffer=[];for(let Ie=0;Ie<6;Ie++)if(C.mipmaps&&C.mipmaps.length>0){oe.__webglFramebuffer[Ie]=[];for(let Oe=0;Oe<C.mipmaps.length;Oe++)oe.__webglFramebuffer[Ie][Oe]=_.createFramebuffer()}else oe.__webglFramebuffer[Ie]=_.createFramebuffer()}else{if(C.mipmaps&&C.mipmaps.length>0){oe.__webglFramebuffer=[];for(let Ie=0;Ie<C.mipmaps.length;Ie++)oe.__webglFramebuffer[Ie]=_.createFramebuffer()}else oe.__webglFramebuffer=_.createFramebuffer();if(je)for(let Ie=0,Oe=_e.length;Ie<Oe;Ie++){const N=w.get(_e[Ie]);N.__webglTexture===void 0&&(N.__webglTexture=_.createTexture(),G.memory.textures++)}if(Z.samples>0&&Fe(Z)===!1){oe.__webglMultisampledFramebuffer=_.createFramebuffer(),oe.__webglColorRenderbuffer=[],a.bindFramebuffer(_.FRAMEBUFFER,oe.__webglMultisampledFramebuffer);for(let Ie=0;Ie<_e.length;Ie++){const Oe=_e[Ie];oe.__webglColorRenderbuffer[Ie]=_.createRenderbuffer(),_.bindRenderbuffer(_.RENDERBUFFER,oe.__webglColorRenderbuffer[Ie]);const N=L.convert(Oe.format,Oe.colorSpace),Pe=L.convert(Oe.type),Xe=d(Oe.internalFormat,N,Pe,Oe.colorSpace,Z.isXRRenderTarget===!0),$e=Be(Z);_.renderbufferStorageMultisample(_.RENDERBUFFER,$e,Xe,Z.width,Z.height),_.framebufferRenderbuffer(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0+Ie,_.RENDERBUFFER,oe.__webglColorRenderbuffer[Ie])}_.bindRenderbuffer(_.RENDERBUFFER,null),Z.depthBuffer&&(oe.__webglDepthRenderbuffer=_.createRenderbuffer(),ue(oe.__webglDepthRenderbuffer,Z,!0)),a.bindFramebuffer(_.FRAMEBUFFER,null)}}if(De){a.bindTexture(_.TEXTURE_CUBE_MAP,ge.__webglTexture),H(_.TEXTURE_CUBE_MAP,C);for(let Ie=0;Ie<6;Ie++)if(C.mipmaps&&C.mipmaps.length>0)for(let Oe=0;Oe<C.mipmaps.length;Oe++)K(oe.__webglFramebuffer[Ie][Oe],Z,C,_.COLOR_ATTACHMENT0,_.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Oe);else K(oe.__webglFramebuffer[Ie],Z,C,_.COLOR_ATTACHMENT0,_.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0);i(C)&&s(_.TEXTURE_CUBE_MAP),a.unbindTexture()}else if(je){for(let Ie=0,Oe=_e.length;Ie<Oe;Ie++){const N=_e[Ie],Pe=w.get(N);let Xe=_.TEXTURE_2D;(Z.isWebGL3DRenderTarget||Z.isWebGLArrayRenderTarget)&&(Xe=Z.isWebGL3DRenderTarget?_.TEXTURE_3D:_.TEXTURE_2D_ARRAY),a.bindTexture(Xe,Pe.__webglTexture),H(Xe,N),K(oe.__webglFramebuffer,Z,N,_.COLOR_ATTACHMENT0+Ie,Xe,0),i(N)&&s(Xe)}a.unbindTexture()}else{let Ie=_.TEXTURE_2D;if((Z.isWebGL3DRenderTarget||Z.isWebGLArrayRenderTarget)&&(Ie=Z.isWebGL3DRenderTarget?_.TEXTURE_3D:_.TEXTURE_2D_ARRAY),a.bindTexture(Ie,ge.__webglTexture),H(Ie,C),C.mipmaps&&C.mipmaps.length>0)for(let Oe=0;Oe<C.mipmaps.length;Oe++)K(oe.__webglFramebuffer[Oe],Z,C,_.COLOR_ATTACHMENT0,Ie,Oe);else K(oe.__webglFramebuffer,Z,C,_.COLOR_ATTACHMENT0,Ie,0);i(C)&&s(Ie),a.unbindTexture()}Z.depthBuffer&&Q(Z)}function ae(Z){const C=Z.textures;for(let oe=0,ge=C.length;oe<ge;oe++){const _e=C[oe];if(i(_e)){const De=g(Z),je=w.get(_e).__webglTexture;a.bindTexture(De,je),s(De),a.unbindTexture()}}}const le=[],me=[];function Ae(Z){if(Z.samples>0){if(Fe(Z)===!1){const C=Z.textures,oe=Z.width,ge=Z.height;let _e=_.COLOR_BUFFER_BIT;const De=Z.stencilBuffer?_.DEPTH_STENCIL_ATTACHMENT:_.DEPTH_ATTACHMENT,je=w.get(Z),Ie=C.length>1;if(Ie)for(let N=0;N<C.length;N++)a.bindFramebuffer(_.FRAMEBUFFER,je.__webglMultisampledFramebuffer),_.framebufferRenderbuffer(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0+N,_.RENDERBUFFER,null),a.bindFramebuffer(_.FRAMEBUFFER,je.__webglFramebuffer),_.framebufferTexture2D(_.DRAW_FRAMEBUFFER,_.COLOR_ATTACHMENT0+N,_.TEXTURE_2D,null,0);a.bindFramebuffer(_.READ_FRAMEBUFFER,je.__webglMultisampledFramebuffer);const Oe=Z.texture.mipmaps;Oe&&Oe.length>0?a.bindFramebuffer(_.DRAW_FRAMEBUFFER,je.__webglFramebuffer[0]):a.bindFramebuffer(_.DRAW_FRAMEBUFFER,je.__webglFramebuffer);for(let N=0;N<C.length;N++){if(Z.resolveDepthBuffer&&(Z.depthBuffer&&(_e|=_.DEPTH_BUFFER_BIT),Z.stencilBuffer&&Z.resolveStencilBuffer&&(_e|=_.STENCIL_BUFFER_BIT)),Ie){_.framebufferRenderbuffer(_.READ_FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.RENDERBUFFER,je.__webglColorRenderbuffer[N]);const Pe=w.get(C[N]).__webglTexture;_.framebufferTexture2D(_.DRAW_FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,Pe,0)}_.blitFramebuffer(0,0,oe,ge,0,0,oe,ge,_e,_.NEAREST),ce===!0&&(le.length=0,me.length=0,le.push(_.COLOR_ATTACHMENT0+N),Z.depthBuffer&&Z.resolveDepthBuffer===!1&&(le.push(De),me.push(De),_.invalidateFramebuffer(_.DRAW_FRAMEBUFFER,me)),_.invalidateFramebuffer(_.READ_FRAMEBUFFER,le))}if(a.bindFramebuffer(_.READ_FRAMEBUFFER,null),a.bindFramebuffer(_.DRAW_FRAMEBUFFER,null),Ie)for(let N=0;N<C.length;N++){a.bindFramebuffer(_.FRAMEBUFFER,je.__webglMultisampledFramebuffer),_.framebufferRenderbuffer(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0+N,_.RENDERBUFFER,je.__webglColorRenderbuffer[N]);const Pe=w.get(C[N]).__webglTexture;a.bindFramebuffer(_.FRAMEBUFFER,je.__webglFramebuffer),_.framebufferTexture2D(_.DRAW_FRAMEBUFFER,_.COLOR_ATTACHMENT0+N,_.TEXTURE_2D,Pe,0)}a.bindFramebuffer(_.DRAW_FRAMEBUFFER,je.__webglMultisampledFramebuffer)}else if(Z.depthBuffer&&Z.resolveDepthBuffer===!1&&ce){const C=Z.stencilBuffer?_.DEPTH_STENCIL_ATTACHMENT:_.DEPTH_ATTACHMENT;_.invalidateFramebuffer(_.DRAW_FRAMEBUFFER,[C])}}}function Be(Z){return Math.min(T.maxSamples,Z.samples)}function Fe(Z){const C=w.get(Z);return Z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&C.__useRenderToTexture!==!1}function Le(Z){const C=G.render.frame;S.get(Z)!==C&&(S.set(Z,C),Z.update())}function ze(Z,C){const oe=Z.colorSpace,ge=Z.format,_e=Z.type;return Z.isCompressedTexture===!0||Z.isVideoTexture===!0||oe!==Ji&&oe!==Kr&&(an.getTransfer(oe)===pn?(ge!==gr||_e!==wr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",oe)),C}function We(Z){return typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement?(P.width=Z.naturalWidth||Z.width,P.height=Z.naturalHeight||Z.height):typeof VideoFrame<"u"&&Z instanceof VideoFrame?(P.width=Z.displayWidth,P.height=Z.displayHeight):(P.width=Z.width,P.height=Z.height),P}this.allocateTextureUnit=E,this.resetTextureUnits=b,this.setTexture2D=D,this.setTexture2DArray=A,this.setTexture3D=v,this.setTextureCube=k,this.rebindTextures=pe,this.setupRenderTarget=ee,this.updateRenderTargetMipmap=ae,this.updateMultisampleRenderTarget=Ae,this.setupDepthRenderbuffer=Q,this.setupFrameBufferTexture=K,this.useMultisampledRTT=Fe}function Fy(_,e){function a(w,T=Kr){let L;const G=an.getTransfer(T);if(w===wr)return _.UNSIGNED_BYTE;if(w===Yc)return _.UNSIGNED_SHORT_4_4_4_4;if(w===Wc)return _.UNSIGNED_SHORT_5_5_5_1;if(w===Ld)return _.UNSIGNED_INT_5_9_9_9_REV;if(w===kd)return _.BYTE;if(w===Pd)return _.SHORT;if(w===Fo)return _.UNSIGNED_SHORT;if(w===Hc)return _.INT;if(w===bi)return _.UNSIGNED_INT;if(w===Fr)return _.FLOAT;if(w===jo)return _.HALF_FLOAT;if(w===Bd)return _.ALPHA;if(w===Fd)return _.RGB;if(w===gr)return _.RGBA;if(w===Ro)return _.DEPTH_COMPONENT;if(w===No)return _.DEPTH_STENCIL;if(w===Od)return _.RED;if(w===Xc)return _.RED_INTEGER;if(w===Rd)return _.RG;if(w===Kc)return _.RG_INTEGER;if(w===Jc)return _.RGBA_INTEGER;if(w===Ba||w===Fa||w===Oa||w===Ra)if(G===pn)if(L=e.get("WEBGL_compressed_texture_s3tc_srgb"),L!==null){if(w===Ba)return L.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(w===Fa)return L.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(w===Oa)return L.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(w===Ra)return L.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(L=e.get("WEBGL_compressed_texture_s3tc"),L!==null){if(w===Ba)return L.COMPRESSED_RGB_S3TC_DXT1_EXT;if(w===Fa)return L.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(w===Oa)return L.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(w===Ra)return L.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(w===pc||w===hc||w===fc||w===gc)if(L=e.get("WEBGL_compressed_texture_pvrtc"),L!==null){if(w===pc)return L.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(w===hc)return L.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(w===fc)return L.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(w===gc)return L.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(w===mc||w===yc||w===vc)if(L=e.get("WEBGL_compressed_texture_etc"),L!==null){if(w===mc||w===yc)return G===pn?L.COMPRESSED_SRGB8_ETC2:L.COMPRESSED_RGB8_ETC2;if(w===vc)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:L.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(w===bc||w===xc||w===wc||w===Ac||w===Ec||w===_c||w===Mc||w===Sc||w===Ic||w===Cc||w===Tc||w===Dc||w===kc||w===Pc)if(L=e.get("WEBGL_compressed_texture_astc"),L!==null){if(w===bc)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:L.COMPRESSED_RGBA_ASTC_4x4_KHR;if(w===xc)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:L.COMPRESSED_RGBA_ASTC_5x4_KHR;if(w===wc)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:L.COMPRESSED_RGBA_ASTC_5x5_KHR;if(w===Ac)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:L.COMPRESSED_RGBA_ASTC_6x5_KHR;if(w===Ec)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:L.COMPRESSED_RGBA_ASTC_6x6_KHR;if(w===_c)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:L.COMPRESSED_RGBA_ASTC_8x5_KHR;if(w===Mc)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:L.COMPRESSED_RGBA_ASTC_8x6_KHR;if(w===Sc)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:L.COMPRESSED_RGBA_ASTC_8x8_KHR;if(w===Ic)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:L.COMPRESSED_RGBA_ASTC_10x5_KHR;if(w===Cc)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:L.COMPRESSED_RGBA_ASTC_10x6_KHR;if(w===Tc)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:L.COMPRESSED_RGBA_ASTC_10x8_KHR;if(w===Dc)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:L.COMPRESSED_RGBA_ASTC_10x10_KHR;if(w===kc)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:L.COMPRESSED_RGBA_ASTC_12x10_KHR;if(w===Pc)return G===pn?L.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:L.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(w===Na||w===Lc||w===Bc)if(L=e.get("EXT_texture_compression_bptc"),L!==null){if(w===Na)return G===pn?L.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:L.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(w===Lc)return L.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(w===Bc)return L.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(w===Nd||w===Fc||w===Oc||w===Rc)if(L=e.get("EXT_texture_compression_rgtc"),L!==null){if(w===Na)return L.COMPRESSED_RED_RGTC1_EXT;if(w===Fc)return L.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(w===Oc)return L.COMPRESSED_RED_GREEN_RGTC2_EXT;if(w===Rc)return L.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return w===Oo?_.UNSIGNED_INT_24_8:_[w]!==void 0?_[w]:null}return{convert:a}}class ou extends Qn{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}}const Oy=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Ry=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Ny{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,a){if(this.texture===null){const w=new ou(e.texture);(e.depthNear!==a.depthNear||e.depthFar!==a.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=w}}getMesh(e){if(this.texture!==null&&this.mesh===null){const a=e.cameras[0].viewport,w=new ti({vertexShader:Oy,fragmentShader:Ry,uniforms:{depthColor:{value:this.texture},depthWidth:{value:a.z},depthHeight:{value:a.w}}});this.mesh=new mr(new $a(20,20),w)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Uy extends Ei{constructor(e,a){super();const w=this;let T=null,L=1,G=null,Y="local-floor",ce=1,P=null,S=null,c=null,x=null,t=null,l=null;const n=new Ny,i={},s=a.getContextAttributes();let g=null,d=null;const u=[],f=[],y=new Yt;let h=null;const p=new Zn;p.viewport=new fn;const r=new Zn;r.viewport=new fn;const o=[p,r],m=new ih;let b=null,E=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(F){let $=u[F];return $===void 0&&($=new Fs,u[F]=$),$.getTargetRaySpace()},this.getControllerGrip=function(F){let $=u[F];return $===void 0&&($=new Fs,u[F]=$),$.getGripSpace()},this.getHand=function(F){let $=u[F];return $===void 0&&($=new Fs,u[F]=$),$.getHandSpace()};function M(F){const $=f.indexOf(F.inputSource);if($===-1)return;const re=u[$];re!==void 0&&(re.update(F.inputSource,F.frame,P||G),re.dispatchEvent({type:F.type,data:F.inputSource}))}function D(){T.removeEventListener("select",M),T.removeEventListener("selectstart",M),T.removeEventListener("selectend",M),T.removeEventListener("squeeze",M),T.removeEventListener("squeezestart",M),T.removeEventListener("squeezeend",M),T.removeEventListener("end",D),T.removeEventListener("inputsourceschange",A);for(let F=0;F<u.length;F++){const $=f[F];$!==null&&(f[F]=null,u[F].disconnect($))}b=null,E=null,n.reset();for(const F in i)delete i[F];e.setRenderTarget(g),t=null,x=null,c=null,T=null,d=null,B.stop(),w.isPresenting=!1,e.setPixelRatio(h),e.setSize(y.width,y.height,!1),w.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(F){L=F,w.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(F){Y=F,w.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return P||G},this.setReferenceSpace=function(F){P=F},this.getBaseLayer=function(){return x!==null?x:t},this.getBinding=function(){return c},this.getFrame=function(){return l},this.getSession=function(){return T},this.setSession=async function(F){if(T=F,T!==null){if(g=e.getRenderTarget(),T.addEventListener("select",M),T.addEventListener("selectstart",M),T.addEventListener("selectend",M),T.addEventListener("squeeze",M),T.addEventListener("squeezestart",M),T.addEventListener("squeezeend",M),T.addEventListener("end",D),T.addEventListener("inputsourceschange",A),s.xrCompatible!==!0&&await a.makeXRCompatible(),h=e.getPixelRatio(),e.getSize(y),typeof XRWebGLBinding<"u"&&(c=new XRWebGLBinding(T,a)),c!==null&&"createProjectionLayer"in XRWebGLBinding.prototype){let re=null,K=null,ue=null;s.depth&&(ue=s.stencil?a.DEPTH24_STENCIL8:a.DEPTH_COMPONENT24,re=s.stencil?No:Ro,K=s.stencil?Oo:bi);const ie={colorFormat:a.RGBA8,depthFormat:ue,scaleFactor:L};x=c.createProjectionLayer(ie),T.updateRenderState({layers:[x]}),e.setPixelRatio(1),e.setSize(x.textureWidth,x.textureHeight,!1),d=new wi(x.textureWidth,x.textureHeight,{format:gr,type:wr,depthTexture:new Jd(x.textureWidth,x.textureHeight,K,void 0,void 0,void 0,void 0,void 0,void 0,re),stencilBuffer:s.stencil,colorSpace:e.outputColorSpace,samples:s.antialias?4:0,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}else{const re={antialias:s.antialias,alpha:!0,depth:s.depth,stencil:s.stencil,framebufferScaleFactor:L};t=new XRWebGLLayer(T,a,re),T.updateRenderState({baseLayer:t}),e.setPixelRatio(1),e.setSize(t.framebufferWidth,t.framebufferHeight,!1),d=new wi(t.framebufferWidth,t.framebufferHeight,{format:gr,type:wr,colorSpace:e.outputColorSpace,stencilBuffer:s.stencil,resolveDepthBuffer:t.ignoreDepthValues===!1,resolveStencilBuffer:t.ignoreDepthValues===!1})}d.isXRRenderTarget=!0,this.setFoveation(ce),P=null,G=await T.requestReferenceSpace(Y),B.setContext(T),B.start(),w.isPresenting=!0,w.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(T!==null)return T.environmentBlendMode},this.getDepthTexture=function(){return n.getDepthTexture()};function A(F){for(let $=0;$<F.removed.length;$++){const re=F.removed[$],K=f.indexOf(re);K>=0&&(f[K]=null,u[K].disconnect(re))}for(let $=0;$<F.added.length;$++){const re=F.added[$];let K=f.indexOf(re);if(K===-1){for(let ie=0;ie<u.length;ie++)if(ie>=f.length){f.push(re),K=ie;break}else if(f[ie]===null){f[ie]=re,K=ie;break}if(K===-1)break}const ue=u[K];ue&&ue.connect(re)}}const v=new Je,k=new Je;function J(F,$,re){v.setFromMatrixPosition($.matrixWorld),k.setFromMatrixPosition(re.matrixWorld);const K=v.distanceTo(k),ue=$.projectionMatrix.elements,ie=re.projectionMatrix.elements,Q=ue[14]/(ue[10]-1),pe=ue[14]/(ue[10]+1),ee=(ue[9]+1)/ue[5],ae=(ue[9]-1)/ue[5],le=(ue[8]-1)/ue[0],me=(ie[8]+1)/ie[0],Ae=Q*le,Be=Q*me,Fe=K/(-le+me),Le=Fe*-le;if($.matrixWorld.decompose(F.position,F.quaternion,F.scale),F.translateX(Le),F.translateZ(Fe),F.matrixWorld.compose(F.position,F.quaternion,F.scale),F.matrixWorldInverse.copy(F.matrixWorld).invert(),ue[10]===-1)F.projectionMatrix.copy($.projectionMatrix),F.projectionMatrixInverse.copy($.projectionMatrixInverse);else{const ze=Q+Fe,We=pe+Fe,Z=Ae-Le,C=Be+(K-Le),oe=ee*pe/We*ze,ge=ae*pe/We*ze;F.projectionMatrix.makePerspective(Z,C,oe,ge,ze,We),F.projectionMatrixInverse.copy(F.projectionMatrix).invert()}}function X(F,$){$===null?F.matrixWorld.copy(F.matrix):F.matrixWorld.multiplyMatrices($.matrixWorld,F.matrix),F.matrixWorldInverse.copy(F.matrixWorld).invert()}this.updateCamera=function(F){if(T===null)return;let $=F.near,re=F.far;n.texture!==null&&(n.depthNear>0&&($=n.depthNear),n.depthFar>0&&(re=n.depthFar)),m.near=r.near=p.near=$,m.far=r.far=p.far=re,(b!==m.near||E!==m.far)&&(T.updateRenderState({depthNear:m.near,depthFar:m.far}),b=m.near,E=m.far),m.layers.mask=F.layers.mask|6,p.layers.mask=m.layers.mask&3,r.layers.mask=m.layers.mask&5;const K=F.parent,ue=m.cameras;X(m,K);for(let ie=0;ie<ue.length;ie++)X(ue[ie],K);ue.length===2?J(m,p,r):m.projectionMatrix.copy(p.projectionMatrix),te(F,m,K)};function te(F,$,re){re===null?F.matrix.copy($.matrixWorld):(F.matrix.copy(re.matrixWorld),F.matrix.invert(),F.matrix.multiply($.matrixWorld)),F.matrix.decompose(F.position,F.quaternion,F.scale),F.updateMatrixWorld(!0),F.projectionMatrix.copy($.projectionMatrix),F.projectionMatrixInverse.copy($.projectionMatrixInverse),F.isPerspectiveCamera&&(F.fov=Nc*2*Math.atan(1/F.projectionMatrix.elements[5]),F.zoom=1)}this.getCamera=function(){return m},this.getFoveation=function(){if(!(x===null&&t===null))return ce},this.setFoveation=function(F){ce=F,x!==null&&(x.fixedFoveation=F),t!==null&&t.fixedFoveation!==void 0&&(t.fixedFoveation=F)},this.hasDepthSensing=function(){return n.texture!==null},this.getDepthSensingMesh=function(){return n.getMesh(m)},this.getCameraTexture=function(F){return i[F]};let H=null;function z(F,$){if(S=$.getViewerPose(P||G),l=$,S!==null){const re=S.views;t!==null&&(e.setRenderTargetFramebuffer(d,t.framebuffer),e.setRenderTarget(d));let K=!1;re.length!==m.cameras.length&&(m.cameras.length=0,K=!0);for(let pe=0;pe<re.length;pe++){const ee=re[pe];let ae=null;if(t!==null)ae=t.getViewport(ee);else{const me=c.getViewSubImage(x,ee);ae=me.viewport,pe===0&&(e.setRenderTargetTextures(d,me.colorTexture,me.depthStencilTexture),e.setRenderTarget(d))}let le=o[pe];le===void 0&&(le=new Zn,le.layers.enable(pe),le.viewport=new fn,o[pe]=le),le.matrix.fromArray(ee.transform.matrix),le.matrix.decompose(le.position,le.quaternion,le.scale),le.projectionMatrix.fromArray(ee.projectionMatrix),le.projectionMatrixInverse.copy(le.projectionMatrix).invert(),le.viewport.set(ae.x,ae.y,ae.width,ae.height),pe===0&&(m.matrix.copy(le.matrix),m.matrix.decompose(m.position,m.quaternion,m.scale)),K===!0&&m.cameras.push(le)}const ue=T.enabledFeatures;if(ue&&ue.includes("depth-sensing")&&T.depthUsage=="gpu-optimized"&&c){const pe=c.getDepthInformation(re[0]);pe&&pe.isValid&&pe.texture&&n.init(pe,T.renderState)}if(ue&&ue.includes("camera-access")&&(e.state.unbindTexture(),c))for(let pe=0;pe<re.length;pe++){const ee=re[pe].camera;if(ee){let ae=i[ee];ae||(ae=new ou,i[ee]=ae);const le=c.getCameraImage(ee);ae.sourceTexture=le}}}for(let re=0;re<u.length;re++){const K=f[re],ue=u[re];K!==null&&ue!==void 0&&ue.update(K,$,P||G)}H&&H(F,$),$.detectedPlanes&&w.dispatchEvent({type:"planesdetected",data:$}),l=null}const B=new eu;B.setAnimationLoop(z),this.setAnimationLoop=function(F){H=F},this.dispose=function(){}}}const ui=new Nr,qy=new wn;function zy(_,e){function a(i,s){i.matrixAutoUpdate===!0&&i.updateMatrix(),s.value.copy(i.matrix)}function w(i,s){s.color.getRGB(i.fogColor.value,Hd(_)),s.isFog?(i.fogNear.value=s.near,i.fogFar.value=s.far):s.isFogExp2&&(i.fogDensity.value=s.density)}function T(i,s,g,d,u){s.isMeshBasicMaterial||s.isMeshLambertMaterial?L(i,s):s.isMeshToonMaterial?(L(i,s),c(i,s)):s.isMeshPhongMaterial?(L(i,s),S(i,s)):s.isMeshStandardMaterial?(L(i,s),x(i,s),s.isMeshPhysicalMaterial&&t(i,s,u)):s.isMeshMatcapMaterial?(L(i,s),l(i,s)):s.isMeshDepthMaterial?L(i,s):s.isMeshDistanceMaterial?(L(i,s),n(i,s)):s.isMeshNormalMaterial?L(i,s):s.isLineBasicMaterial?(G(i,s),s.isLineDashedMaterial&&Y(i,s)):s.isPointsMaterial?ce(i,s,g,d):s.isSpriteMaterial?P(i,s):s.isShadowMaterial?(i.color.value.copy(s.color),i.opacity.value=s.opacity):s.isShaderMaterial&&(s.uniformsNeedUpdate=!1)}function L(i,s){i.opacity.value=s.opacity,s.color&&i.diffuse.value.copy(s.color),s.emissive&&i.emissive.value.copy(s.emissive).multiplyScalar(s.emissiveIntensity),s.map&&(i.map.value=s.map,a(s.map,i.mapTransform)),s.alphaMap&&(i.alphaMap.value=s.alphaMap,a(s.alphaMap,i.alphaMapTransform)),s.bumpMap&&(i.bumpMap.value=s.bumpMap,a(s.bumpMap,i.bumpMapTransform),i.bumpScale.value=s.bumpScale,s.side===Yn&&(i.bumpScale.value*=-1)),s.normalMap&&(i.normalMap.value=s.normalMap,a(s.normalMap,i.normalMapTransform),i.normalScale.value.copy(s.normalScale),s.side===Yn&&i.normalScale.value.negate()),s.displacementMap&&(i.displacementMap.value=s.displacementMap,a(s.displacementMap,i.displacementMapTransform),i.displacementScale.value=s.displacementScale,i.displacementBias.value=s.displacementBias),s.emissiveMap&&(i.emissiveMap.value=s.emissiveMap,a(s.emissiveMap,i.emissiveMapTransform)),s.specularMap&&(i.specularMap.value=s.specularMap,a(s.specularMap,i.specularMapTransform)),s.alphaTest>0&&(i.alphaTest.value=s.alphaTest);const g=e.get(s),d=g.envMap,u=g.envMapRotation;d&&(i.envMap.value=d,ui.copy(u),ui.x*=-1,ui.y*=-1,ui.z*=-1,d.isCubeTexture&&d.isRenderTargetTexture===!1&&(ui.y*=-1,ui.z*=-1),i.envMapRotation.value.setFromMatrix4(qy.makeRotationFromEuler(ui)),i.flipEnvMap.value=d.isCubeTexture&&d.isRenderTargetTexture===!1?-1:1,i.reflectivity.value=s.reflectivity,i.ior.value=s.ior,i.refractionRatio.value=s.refractionRatio),s.lightMap&&(i.lightMap.value=s.lightMap,i.lightMapIntensity.value=s.lightMapIntensity,a(s.lightMap,i.lightMapTransform)),s.aoMap&&(i.aoMap.value=s.aoMap,i.aoMapIntensity.value=s.aoMapIntensity,a(s.aoMap,i.aoMapTransform))}function G(i,s){i.diffuse.value.copy(s.color),i.opacity.value=s.opacity,s.map&&(i.map.value=s.map,a(s.map,i.mapTransform))}function Y(i,s){i.dashSize.value=s.dashSize,i.totalSize.value=s.dashSize+s.gapSize,i.scale.value=s.scale}function ce(i,s,g,d){i.diffuse.value.copy(s.color),i.opacity.value=s.opacity,i.size.value=s.size*g,i.scale.value=d*.5,s.map&&(i.map.value=s.map,a(s.map,i.uvTransform)),s.alphaMap&&(i.alphaMap.value=s.alphaMap,a(s.alphaMap,i.alphaMapTransform)),s.alphaTest>0&&(i.alphaTest.value=s.alphaTest)}function P(i,s){i.diffuse.value.copy(s.color),i.opacity.value=s.opacity,i.rotation.value=s.rotation,s.map&&(i.map.value=s.map,a(s.map,i.mapTransform)),s.alphaMap&&(i.alphaMap.value=s.alphaMap,a(s.alphaMap,i.alphaMapTransform)),s.alphaTest>0&&(i.alphaTest.value=s.alphaTest)}function S(i,s){i.specular.value.copy(s.specular),i.shininess.value=Math.max(s.shininess,1e-4)}function c(i,s){s.gradientMap&&(i.gradientMap.value=s.gradientMap)}function x(i,s){i.metalness.value=s.metalness,s.metalnessMap&&(i.metalnessMap.value=s.metalnessMap,a(s.metalnessMap,i.metalnessMapTransform)),i.roughness.value=s.roughness,s.roughnessMap&&(i.roughnessMap.value=s.roughnessMap,a(s.roughnessMap,i.roughnessMapTransform)),s.envMap&&(i.envMapIntensity.value=s.envMapIntensity)}function t(i,s,g){i.ior.value=s.ior,s.sheen>0&&(i.sheenColor.value.copy(s.sheenColor).multiplyScalar(s.sheen),i.sheenRoughness.value=s.sheenRoughness,s.sheenColorMap&&(i.sheenColorMap.value=s.sheenColorMap,a(s.sheenColorMap,i.sheenColorMapTransform)),s.sheenRoughnessMap&&(i.sheenRoughnessMap.value=s.sheenRoughnessMap,a(s.sheenRoughnessMap,i.sheenRoughnessMapTransform))),s.clearcoat>0&&(i.clearcoat.value=s.clearcoat,i.clearcoatRoughness.value=s.clearcoatRoughness,s.clearcoatMap&&(i.clearcoatMap.value=s.clearcoatMap,a(s.clearcoatMap,i.clearcoatMapTransform)),s.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap.value=s.clearcoatRoughnessMap,a(s.clearcoatRoughnessMap,i.clearcoatRoughnessMapTransform)),s.clearcoatNormalMap&&(i.clearcoatNormalMap.value=s.clearcoatNormalMap,a(s.clearcoatNormalMap,i.clearcoatNormalMapTransform),i.clearcoatNormalScale.value.copy(s.clearcoatNormalScale),s.side===Yn&&i.clearcoatNormalScale.value.negate())),s.dispersion>0&&(i.dispersion.value=s.dispersion),s.iridescence>0&&(i.iridescence.value=s.iridescence,i.iridescenceIOR.value=s.iridescenceIOR,i.iridescenceThicknessMinimum.value=s.iridescenceThicknessRange[0],i.iridescenceThicknessMaximum.value=s.iridescenceThicknessRange[1],s.iridescenceMap&&(i.iridescenceMap.value=s.iridescenceMap,a(s.iridescenceMap,i.iridescenceMapTransform)),s.iridescenceThicknessMap&&(i.iridescenceThicknessMap.value=s.iridescenceThicknessMap,a(s.iridescenceThicknessMap,i.iridescenceThicknessMapTransform))),s.transmission>0&&(i.transmission.value=s.transmission,i.transmissionSamplerMap.value=g.texture,i.transmissionSamplerSize.value.set(g.width,g.height),s.transmissionMap&&(i.transmissionMap.value=s.transmissionMap,a(s.transmissionMap,i.transmissionMapTransform)),i.thickness.value=s.thickness,s.thicknessMap&&(i.thicknessMap.value=s.thicknessMap,a(s.thicknessMap,i.thicknessMapTransform)),i.attenuationDistance.value=s.attenuationDistance,i.attenuationColor.value.copy(s.attenuationColor)),s.anisotropy>0&&(i.anisotropyVector.value.set(s.anisotropy*Math.cos(s.anisotropyRotation),s.anisotropy*Math.sin(s.anisotropyRotation)),s.anisotropyMap&&(i.anisotropyMap.value=s.anisotropyMap,a(s.anisotropyMap,i.anisotropyMapTransform))),i.specularIntensity.value=s.specularIntensity,i.specularColor.value.copy(s.specularColor),s.specularColorMap&&(i.specularColorMap.value=s.specularColorMap,a(s.specularColorMap,i.specularColorMapTransform)),s.specularIntensityMap&&(i.specularIntensityMap.value=s.specularIntensityMap,a(s.specularIntensityMap,i.specularIntensityMapTransform))}function l(i,s){s.matcap&&(i.matcap.value=s.matcap)}function n(i,s){const g=e.get(s).light;i.referencePosition.value.setFromMatrixPosition(g.matrixWorld),i.nearDistance.value=g.shadow.camera.near,i.farDistance.value=g.shadow.camera.far}return{refreshFogUniforms:w,refreshMaterialUniforms:T}}function Gy(_,e,a,w){let T={},L={},G=[];const Y=_.getParameter(_.MAX_UNIFORM_BUFFER_BINDINGS);function ce(g,d){const u=d.program;w.uniformBlockBinding(g,u)}function P(g,d){let u=T[g.id];u===void 0&&(l(g),u=S(g),T[g.id]=u,g.addEventListener("dispose",i));const f=d.program;w.updateUBOMapping(g,f);const y=e.render.frame;L[g.id]!==y&&(x(g),L[g.id]=y)}function S(g){const d=c();g.__bindingPointIndex=d;const u=_.createBuffer(),f=g.__size,y=g.usage;return _.bindBuffer(_.UNIFORM_BUFFER,u),_.bufferData(_.UNIFORM_BUFFER,f,y),_.bindBuffer(_.UNIFORM_BUFFER,null),_.bindBufferBase(_.UNIFORM_BUFFER,d,u),u}function c(){for(let g=0;g<Y;g++)if(G.indexOf(g)===-1)return G.push(g),g;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(g){const d=T[g.id],u=g.uniforms,f=g.__cache;_.bindBuffer(_.UNIFORM_BUFFER,d);for(let y=0,h=u.length;y<h;y++){const p=Array.isArray(u[y])?u[y]:[u[y]];for(let r=0,o=p.length;r<o;r++){const m=p[r];if(t(m,y,r,f)===!0){const b=m.__offset,E=Array.isArray(m.value)?m.value:[m.value];let M=0;for(let D=0;D<E.length;D++){const A=E[D],v=n(A);typeof A=="number"||typeof A=="boolean"?(m.__data[0]=A,_.bufferSubData(_.UNIFORM_BUFFER,b+M,m.__data)):A.isMatrix3?(m.__data[0]=A.elements[0],m.__data[1]=A.elements[1],m.__data[2]=A.elements[2],m.__data[3]=0,m.__data[4]=A.elements[3],m.__data[5]=A.elements[4],m.__data[6]=A.elements[5],m.__data[7]=0,m.__data[8]=A.elements[6],m.__data[9]=A.elements[7],m.__data[10]=A.elements[8],m.__data[11]=0):(A.toArray(m.__data,M),M+=v.storage/Float32Array.BYTES_PER_ELEMENT)}_.bufferSubData(_.UNIFORM_BUFFER,b,m.__data)}}}_.bindBuffer(_.UNIFORM_BUFFER,null)}function t(g,d,u,f){const y=g.value,h=d+"_"+u;if(f[h]===void 0)return typeof y=="number"||typeof y=="boolean"?f[h]=y:f[h]=y.clone(),!0;{const p=f[h];if(typeof y=="number"||typeof y=="boolean"){if(p!==y)return f[h]=y,!0}else if(p.equals(y)===!1)return p.copy(y),!0}return!1}function l(g){const d=g.uniforms;let u=0;const f=16;for(let h=0,p=d.length;h<p;h++){const r=Array.isArray(d[h])?d[h]:[d[h]];for(let o=0,m=r.length;o<m;o++){const b=r[o],E=Array.isArray(b.value)?b.value:[b.value];for(let M=0,D=E.length;M<D;M++){const A=E[M],v=n(A),k=u%f,J=k%v.boundary,X=k+J;u+=J,X!==0&&f-X<v.storage&&(u+=f-X),b.__data=new Float32Array(v.storage/Float32Array.BYTES_PER_ELEMENT),b.__offset=u,u+=v.storage}}}const y=u%f;return y>0&&(u+=f-y),g.__size=u,g.__cache={},this}function n(g){const d={boundary:0,storage:0};return typeof g=="number"||typeof g=="boolean"?(d.boundary=4,d.storage=4):g.isVector2?(d.boundary=8,d.storage=8):g.isVector3||g.isColor?(d.boundary=16,d.storage=12):g.isVector4?(d.boundary=16,d.storage=16):g.isMatrix3?(d.boundary=48,d.storage=48):g.isMatrix4?(d.boundary=64,d.storage=64):g.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",g),d}function i(g){const d=g.target;d.removeEventListener("dispose",i);const u=G.indexOf(d.__bindingPointIndex);G.splice(u,1),_.deleteBuffer(T[d.id]),delete T[d.id],delete L[d.id]}function s(){for(const g in T)_.deleteBuffer(T[g]);G=[],T={},L={}}return{bind:ce,update:P,dispose:s}}class Vy{constructor(e={}){const{canvas:a=xp(),context:w=null,depth:T=!0,stencil:L=!1,alpha:G=!1,antialias:Y=!1,premultipliedAlpha:ce=!0,preserveDrawingBuffer:P=!1,powerPreference:S="default",failIfMajorPerformanceCaveat:c=!1,reversedDepthBuffer:x=!1}=e;this.isWebGLRenderer=!0;let t;if(w!==null){if(typeof WebGLRenderingContext<"u"&&w instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");t=w.getContextAttributes().alpha}else t=G;const l=new Uint32Array(4),n=new Int32Array(4);let i=null,s=null;const g=[],d=[];this.domElement=a,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Zr,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const u=this;let f=!1;this._outputColorSpace=ar;let y=0,h=0,p=null,r=-1,o=null;const m=new fn,b=new fn;let E=null;const M=new rn(0);let D=0,A=a.width,v=a.height,k=1,J=null,X=null;const te=new fn(0,0,A,v),H=new fn(0,0,A,v);let z=!1;const B=new el;let F=!1,$=!1;const re=new wn,K=new Je,ue=new fn,ie={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Q=!1;function pe(){return p===null?k:1}let ee=w;function ae(O,de){return a.getContext(O,de)}try{const O={alpha:!0,depth:T,stencil:L,antialias:Y,premultipliedAlpha:ce,preserveDrawingBuffer:P,powerPreference:S,failIfMajorPerformanceCaveat:c};if("setAttribute"in a&&a.setAttribute("data-engine",`three.js r${jc}`),a.addEventListener("webglcontextlost",qe,!1),a.addEventListener("webglcontextrestored",He,!1),a.addEventListener("webglcontextcreationerror",Se,!1),ee===null){const de="webgl2";if(ee=ae(de,O),ee===null)throw ae(de)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}let le,me,Ae,Be,Fe,Le,ze,We,Z,C,oe,ge,_e,De,je,Ie,Oe,N,Pe,Xe,$e,ht,ye,Ue;function we(){le=new $g(ee),le.init(),ht=new Fy(ee,le),me=new Hg(ee,le,e,ht),Ae=new Ly(ee,le),me.reversedDepthBuffer&&x&&Ae.buffers.depth.setReversed(!0),Be=new nm(ee),Fe=new xy,Le=new By(ee,le,Ae,Fe,me,ht,Be),ze=new Wg(u),We=new Zg(u),Z=new sh(ee),ye=new Qg(ee,Z),C=new em(ee,Z,Be,ye),oe=new im(ee,C,Z,Be),Pe=new rm(ee,me,Le),Ie=new Yg(Fe),ge=new by(u,ze,We,le,me,ye,Ie),_e=new zy(u,Fe),De=new Ay,je=new Cy(le),N=new Vg(u,ze,We,Ae,oe,t,ce),Oe=new ky(u,oe,me),Ue=new Gy(ee,Be,me,Ae),Xe=new jg(ee,le,Be),$e=new tm(ee,le,Be),Be.programs=ge.programs,u.capabilities=me,u.extensions=le,u.properties=Fe,u.renderLists=De,u.shadowMap=Oe,u.state=Ae,u.info=Be}we();const Te=new Uy(u,ee);this.xr=Te,this.getContext=function(){return ee},this.getContextAttributes=function(){return ee.getContextAttributes()},this.forceContextLoss=function(){const O=le.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){const O=le.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(O){O!==void 0&&(k=O,this.setSize(A,v,!1))},this.getSize=function(O){return O.set(A,v)},this.setSize=function(O,de,j=!0){if(Te.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}A=O,v=de,a.width=Math.floor(O*k),a.height=Math.floor(de*k),j===!0&&(a.style.width=O+"px",a.style.height=de+"px"),this.setViewport(0,0,O,de)},this.getDrawingBufferSize=function(O){return O.set(A*k,v*k).floor()},this.setDrawingBufferSize=function(O,de,j){A=O,v=de,k=j,a.width=Math.floor(O*j),a.height=Math.floor(de*j),this.setViewport(0,0,O,de)},this.getCurrentViewport=function(O){return O.copy(m)},this.getViewport=function(O){return O.copy(te)},this.setViewport=function(O,de,j,xe){O.isVector4?te.set(O.x,O.y,O.z,O.w):te.set(O,de,j,xe),Ae.viewport(m.copy(te).multiplyScalar(k).round())},this.getScissor=function(O){return O.copy(H)},this.setScissor=function(O,de,j,xe){O.isVector4?H.set(O.x,O.y,O.z,O.w):H.set(O,de,j,xe),Ae.scissor(b.copy(H).multiplyScalar(k).round())},this.getScissorTest=function(){return z},this.setScissorTest=function(O){Ae.setScissorTest(z=O)},this.setOpaqueSort=function(O){J=O},this.setTransparentSort=function(O){X=O},this.getClearColor=function(O){return O.copy(N.getClearColor())},this.setClearColor=function(){N.setClearColor(...arguments)},this.getClearAlpha=function(){return N.getClearAlpha()},this.setClearAlpha=function(){N.setClearAlpha(...arguments)},this.clear=function(O=!0,de=!0,j=!0){let xe=0;if(O){let be=!1;if(p!==null){const Ne=p.texture.format;be=Ne===Jc||Ne===Kc||Ne===Xc}if(be){const Ne=p.texture.type,Ye=Ne===wr||Ne===bi||Ne===Fo||Ne===Oo||Ne===Yc||Ne===Wc,tt=N.getClearColor(),ot=N.getClearAlpha(),ct=tt.r,ut=tt.g,ft=tt.b;Ye?(l[0]=ct,l[1]=ut,l[2]=ft,l[3]=ot,ee.clearBufferuiv(ee.COLOR,0,l)):(n[0]=ct,n[1]=ut,n[2]=ft,n[3]=ot,ee.clearBufferiv(ee.COLOR,0,n))}else xe|=ee.COLOR_BUFFER_BIT}de&&(xe|=ee.DEPTH_BUFFER_BIT),j&&(xe|=ee.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ee.clear(xe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){a.removeEventListener("webglcontextlost",qe,!1),a.removeEventListener("webglcontextrestored",He,!1),a.removeEventListener("webglcontextcreationerror",Se,!1),N.dispose(),De.dispose(),je.dispose(),Fe.dispose(),ze.dispose(),We.dispose(),oe.dispose(),ye.dispose(),Ue.dispose(),ge.dispose(),Te.dispose(),Te.removeEventListener("sessionstart",Pt),Te.removeEventListener("sessionend",vt),At.stop()};function qe(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),f=!0}function He(){console.log("THREE.WebGLRenderer: Context Restored."),f=!1;const O=Be.autoReset,de=Oe.enabled,j=Oe.autoUpdate,xe=Oe.needsUpdate,be=Oe.type;we(),Be.autoReset=O,Oe.enabled=de,Oe.autoUpdate=j,Oe.needsUpdate=xe,Oe.type=be}function Se(O){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",O.statusMessage)}function Ce(O){const de=O.target;de.removeEventListener("dispose",Ce),Re(de)}function Re(O){Ve(O),Fe.remove(O)}function Ve(O){const de=Fe.get(O).programs;de!==void 0&&(de.forEach(function(j){ge.releaseProgram(j)}),O.isShaderMaterial&&ge.releaseShaderCache(O))}this.renderBufferDirect=function(O,de,j,xe,be,Ne){de===null&&(de=ie);const Ye=be.isMesh&&be.matrixWorld.determinant()<0,tt=sn(O,de,j,xe,be);Ae.setMaterial(xe,Ye);let ot=j.index,ct=1;if(xe.wireframe===!0){if(ot=C.getWireframeAttribute(j),ot===void 0)return;ct=2}const ut=j.drawRange,ft=j.attributes.position;let xt=ut.start*ct,_t=(ut.start+ut.count)*ct;Ne!==null&&(xt=Math.max(xt,Ne.start*ct),_t=Math.min(_t,(Ne.start+Ne.count)*ct)),ot!==null?(xt=Math.max(xt,0),_t=Math.min(_t,ot.count)):ft!=null&&(xt=Math.max(xt,0),_t=Math.min(_t,ft.count));const It=_t-xt;if(It<0||It===1/0)return;ye.setup(be,xe,tt,j,ot);let kt,Et=Xe;if(ot!==null&&(kt=Z.get(ot),Et=$e,Et.setIndex(kt)),be.isMesh)xe.wireframe===!0?(Ae.setLineWidth(xe.wireframeLinewidth*pe()),Et.setMode(ee.LINES)):Et.setMode(ee.TRIANGLES);else if(be.isLine){let gt=xe.linewidth;gt===void 0&&(gt=1),Ae.setLineWidth(gt*pe()),be.isLineSegments?Et.setMode(ee.LINES):be.isLineLoop?Et.setMode(ee.LINE_LOOP):Et.setMode(ee.LINE_STRIP)}else be.isPoints?Et.setMode(ee.POINTS):be.isSprite&&Et.setMode(ee.TRIANGLES);if(be.isBatchedMesh)if(be._multiDrawInstances!==null)ji("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Et.renderMultiDrawInstances(be._multiDrawStarts,be._multiDrawCounts,be._multiDrawCount,be._multiDrawInstances);else if(le.get("WEBGL_multi_draw"))Et.renderMultiDraw(be._multiDrawStarts,be._multiDrawCounts,be._multiDrawCount);else{const gt=be._multiDrawStarts,Qt=be._multiDrawCounts,Rt=be._multiDrawCount,yn=ot?Z.get(ot).bytesPerElement:1,Tt=Fe.get(xe).currentProgram.getUniforms();for(let cn=0;cn<Rt;cn++)Tt.setValue(ee,"_gl_DrawID",cn),Et.render(gt[cn]/yn,Qt[cn])}else if(be.isInstancedMesh)Et.renderInstances(xt,It,be.count);else if(j.isInstancedBufferGeometry){const gt=j._maxInstanceCount!==void 0?j._maxInstanceCount:1/0,Qt=Math.min(j.instanceCount,gt);Et.renderInstances(xt,It,Qt)}else Et.render(xt,It)};function rt(O,de,j){O.transparent===!0&&O.side===Br&&O.forceSinglePass===!1?(O.side=Yn,O.needsUpdate=!0,qt(O,de,j),O.side=ei,O.needsUpdate=!0,qt(O,de,j),O.side=Br):qt(O,de,j)}this.compile=function(O,de,j=null){j===null&&(j=O),s=je.get(j),s.init(de),d.push(s),j.traverseVisible(function(be){be.isLight&&be.layers.test(de.layers)&&(s.pushLight(be),be.castShadow&&s.pushShadow(be))}),O!==j&&O.traverseVisible(function(be){be.isLight&&be.layers.test(de.layers)&&(s.pushLight(be),be.castShadow&&s.pushShadow(be))}),s.setupLights();const xe=new Set;return O.traverse(function(be){if(!(be.isMesh||be.isPoints||be.isLine||be.isSprite))return;const Ne=be.material;if(Ne)if(Array.isArray(Ne))for(let Ye=0;Ye<Ne.length;Ye++){const tt=Ne[Ye];rt(tt,j,be),xe.add(tt)}else rt(Ne,j,be),xe.add(Ne)}),s=d.pop(),xe},this.compileAsync=function(O,de,j=null){const xe=this.compile(O,de,j);return new Promise(be=>{function Ne(){if(xe.forEach(function(Ye){Fe.get(Ye).currentProgram.isReady()&&xe.delete(Ye)}),xe.size===0){be(O);return}setTimeout(Ne,10)}le.get("KHR_parallel_shader_compile")!==null?Ne():setTimeout(Ne,10)})};let at=null;function yt(O){at&&at(O)}function Pt(){At.stop()}function vt(){At.start()}const At=new eu;At.setAnimationLoop(yt),typeof self<"u"&&At.setContext(self),this.setAnimationLoop=function(O){at=O,Te.setAnimationLoop(O),O===null?At.stop():At.start()},Te.addEventListener("sessionstart",Pt),Te.addEventListener("sessionend",vt),this.render=function(O,de){if(de!==void 0&&de.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(f===!0)return;if(O.matrixWorldAutoUpdate===!0&&O.updateMatrixWorld(),de.parent===null&&de.matrixWorldAutoUpdate===!0&&de.updateMatrixWorld(),Te.enabled===!0&&Te.isPresenting===!0&&(Te.cameraAutoUpdate===!0&&Te.updateCamera(de),de=Te.getCamera()),O.isScene===!0&&O.onBeforeRender(u,O,de,p),s=je.get(O,d.length),s.init(de),d.push(s),re.multiplyMatrices(de.projectionMatrix,de.matrixWorldInverse),B.setFromProjectionMatrix(re,br,de.reversedDepth),$=this.localClippingEnabled,F=Ie.init(this.clippingPlanes,$),i=De.get(O,g.length),i.init(),g.push(i),Te.enabled===!0&&Te.isPresenting===!0){const Ne=u.xr.getDepthSensingMesh();Ne!==null&&Ut(Ne,de,-1/0,u.sortObjects)}Ut(O,de,0,u.sortObjects),i.finish(),u.sortObjects===!0&&i.sort(J,X),Q=Te.enabled===!1||Te.isPresenting===!1||Te.hasDepthSensing()===!1,Q&&N.addToRenderList(i,O),this.info.render.frame++,F===!0&&Ie.beginShadows();const j=s.state.shadowsArray;Oe.render(j,O,de),F===!0&&Ie.endShadows(),this.info.autoReset===!0&&this.info.reset();const xe=i.opaque,be=i.transmissive;if(s.setupLights(),de.isArrayCamera){const Ne=de.cameras;if(be.length>0)for(let Ye=0,tt=Ne.length;Ye<tt;Ye++){const ot=Ne[Ye];on(xe,be,O,ot)}Q&&N.render(O);for(let Ye=0,tt=Ne.length;Ye<tt;Ye++){const ot=Ne[Ye];Dt(i,O,ot,ot.viewport)}}else be.length>0&&on(xe,be,O,de),Q&&N.render(O),Dt(i,O,de);p!==null&&h===0&&(Le.updateMultisampleRenderTarget(p),Le.updateRenderTargetMipmap(p)),O.isScene===!0&&O.onAfterRender(u,O,de),ye.resetDefaultState(),r=-1,o=null,d.pop(),d.length>0?(s=d[d.length-1],F===!0&&Ie.setGlobalState(u.clippingPlanes,s.state.camera)):s=null,g.pop(),g.length>0?i=g[g.length-1]:i=null};function Ut(O,de,j,xe){if(O.visible===!1)return;if(O.layers.test(de.layers)){if(O.isGroup)j=O.renderOrder;else if(O.isLOD)O.autoUpdate===!0&&O.update(de);else if(O.isLight)s.pushLight(O),O.castShadow&&s.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||B.intersectsSprite(O)){xe&&ue.setFromMatrixPosition(O.matrixWorld).applyMatrix4(re);const Ye=oe.update(O),tt=O.material;tt.visible&&i.push(O,Ye,tt,j,ue.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(!O.frustumCulled||B.intersectsObject(O))){const Ye=oe.update(O),tt=O.material;if(xe&&(O.boundingSphere!==void 0?(O.boundingSphere===null&&O.computeBoundingSphere(),ue.copy(O.boundingSphere.center)):(Ye.boundingSphere===null&&Ye.computeBoundingSphere(),ue.copy(Ye.boundingSphere.center)),ue.applyMatrix4(O.matrixWorld).applyMatrix4(re)),Array.isArray(tt)){const ot=Ye.groups;for(let ct=0,ut=ot.length;ct<ut;ct++){const ft=ot[ct],xt=tt[ft.materialIndex];xt&&xt.visible&&i.push(O,Ye,xt,j,ue.z,ft)}}else tt.visible&&i.push(O,Ye,tt,j,ue.z,null)}}const Ne=O.children;for(let Ye=0,tt=Ne.length;Ye<tt;Ye++)Ut(Ne[Ye],de,j,xe)}function Dt(O,de,j,xe){const be=O.opaque,Ne=O.transmissive,Ye=O.transparent;s.setupLightsView(j),F===!0&&Ie.setGlobalState(u.clippingPlanes,j),xe&&Ae.viewport(m.copy(xe)),be.length>0&&St(be,de,j),Ne.length>0&&St(Ne,de,j),Ye.length>0&&St(Ye,de,j),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1)}function on(O,de,j,xe){if((j.isScene===!0?j.overrideMaterial:null)!==null)return;s.state.transmissionRenderTarget[xe.id]===void 0&&(s.state.transmissionRenderTarget[xe.id]=new wi(1,1,{generateMipmaps:!0,type:le.has("EXT_color_buffer_half_float")||le.has("EXT_color_buffer_float")?jo:wr,minFilter:yi,samples:4,stencilBuffer:L,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:an.workingColorSpace}));const Ne=s.state.transmissionRenderTarget[xe.id],Ye=xe.viewport||m;Ne.setSize(Ye.z*u.transmissionResolutionScale,Ye.w*u.transmissionResolutionScale);const tt=u.getRenderTarget(),ot=u.getActiveCubeFace(),ct=u.getActiveMipmapLevel();u.setRenderTarget(Ne),u.getClearColor(M),D=u.getClearAlpha(),D<1&&u.setClearColor(16777215,.5),u.clear(),Q&&N.render(j);const ut=u.toneMapping;u.toneMapping=Zr;const ft=xe.viewport;if(xe.viewport!==void 0&&(xe.viewport=void 0),s.setupLightsView(xe),F===!0&&Ie.setGlobalState(u.clippingPlanes,xe),St(O,j,xe),Le.updateMultisampleRenderTarget(Ne),Le.updateRenderTargetMipmap(Ne),le.has("WEBGL_multisampled_render_to_texture")===!1){let xt=!1;for(let _t=0,It=de.length;_t<It;_t++){const kt=de[_t],Et=kt.object,gt=kt.geometry,Qt=kt.material,Rt=kt.group;if(Qt.side===Br&&Et.layers.test(xe.layers)){const yn=Qt.side;Qt.side=Yn,Qt.needsUpdate=!0,Xt(Et,j,xe,gt,Qt,Rt),Qt.side=yn,Qt.needsUpdate=!0,xt=!0}}xt===!0&&(Le.updateMultisampleRenderTarget(Ne),Le.updateRenderTargetMipmap(Ne))}u.setRenderTarget(tt,ot,ct),u.setClearColor(M,D),ft!==void 0&&(xe.viewport=ft),u.toneMapping=ut}function St(O,de,j){const xe=de.isScene===!0?de.overrideMaterial:null;for(let be=0,Ne=O.length;be<Ne;be++){const Ye=O[be],tt=Ye.object,ot=Ye.geometry,ct=Ye.group;let ut=Ye.material;ut.allowOverride===!0&&xe!==null&&(ut=xe),tt.layers.test(j.layers)&&Xt(tt,de,j,ot,ut,ct)}}function Xt(O,de,j,xe,be,Ne){O.onBeforeRender(u,de,j,xe,be,Ne),O.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),be.onBeforeRender(u,de,j,xe,O,Ne),be.transparent===!0&&be.side===Br&&be.forceSinglePass===!1?(be.side=Yn,be.needsUpdate=!0,u.renderBufferDirect(j,de,xe,be,O,Ne),be.side=ei,be.needsUpdate=!0,u.renderBufferDirect(j,de,xe,be,O,Ne),be.side=Br):u.renderBufferDirect(j,de,xe,be,O,Ne),O.onAfterRender(u,de,j,xe,be,Ne)}function qt(O,de,j){de.isScene!==!0&&(de=ie);const xe=Fe.get(O),be=s.state.lights,Ne=s.state.shadowsArray,Ye=be.state.version,tt=ge.getParameters(O,be.state,Ne,de,j),ot=ge.getProgramCacheKey(tt);let ct=xe.programs;xe.environment=O.isMeshStandardMaterial?de.environment:null,xe.fog=de.fog,xe.envMap=(O.isMeshStandardMaterial?We:ze).get(O.envMap||xe.environment),xe.envMapRotation=xe.environment!==null&&O.envMap===null?de.environmentRotation:O.envMapRotation,ct===void 0&&(O.addEventListener("dispose",Ce),ct=new Map,xe.programs=ct);let ut=ct.get(ot);if(ut!==void 0){if(xe.currentProgram===ut&&xe.lightsStateVersion===Ye)return Fn(O,tt),ut}else tt.uniforms=ge.getUniforms(O),O.onBeforeCompile(tt,u),ut=ge.acquireProgram(tt,ot),ct.set(ot,ut),xe.uniforms=tt.uniforms;const ft=xe.uniforms;return(!O.isShaderMaterial&&!O.isRawShaderMaterial||O.clipping===!0)&&(ft.clippingPlanes=Ie.uniform),Fn(O,tt),xe.needsLights=se(O),xe.lightsStateVersion=Ye,xe.needsLights&&(ft.ambientLightColor.value=be.state.ambient,ft.lightProbe.value=be.state.probe,ft.directionalLights.value=be.state.directional,ft.directionalLightShadows.value=be.state.directionalShadow,ft.spotLights.value=be.state.spot,ft.spotLightShadows.value=be.state.spotShadow,ft.rectAreaLights.value=be.state.rectArea,ft.ltc_1.value=be.state.rectAreaLTC1,ft.ltc_2.value=be.state.rectAreaLTC2,ft.pointLights.value=be.state.point,ft.pointLightShadows.value=be.state.pointShadow,ft.hemisphereLights.value=be.state.hemi,ft.directionalShadowMap.value=be.state.directionalShadowMap,ft.directionalShadowMatrix.value=be.state.directionalShadowMatrix,ft.spotShadowMap.value=be.state.spotShadowMap,ft.spotLightMatrix.value=be.state.spotLightMatrix,ft.spotLightMap.value=be.state.spotLightMap,ft.pointShadowMap.value=be.state.pointShadowMap,ft.pointShadowMatrix.value=be.state.pointShadowMatrix),xe.currentProgram=ut,xe.uniformsList=null,ut}function bn(O){if(O.uniformsList===null){const de=O.currentProgram.getUniforms();O.uniformsList=Ua.seqWithValue(de.seq,O.uniforms)}return O.uniformsList}function Fn(O,de){const j=Fe.get(O);j.outputColorSpace=de.outputColorSpace,j.batching=de.batching,j.batchingColor=de.batchingColor,j.instancing=de.instancing,j.instancingColor=de.instancingColor,j.instancingMorph=de.instancingMorph,j.skinning=de.skinning,j.morphTargets=de.morphTargets,j.morphNormals=de.morphNormals,j.morphColors=de.morphColors,j.morphTargetsCount=de.morphTargetsCount,j.numClippingPlanes=de.numClippingPlanes,j.numIntersection=de.numClipIntersection,j.vertexAlphas=de.vertexAlphas,j.vertexTangents=de.vertexTangents,j.toneMapping=de.toneMapping}function sn(O,de,j,xe,be){de.isScene!==!0&&(de=ie),Le.resetTextureUnits();const Ne=de.fog,Ye=xe.isMeshStandardMaterial?de.environment:null,tt=p===null?u.outputColorSpace:p.isXRRenderTarget===!0?p.texture.colorSpace:Ji,ot=(xe.isMeshStandardMaterial?We:ze).get(xe.envMap||Ye),ct=xe.vertexColors===!0&&!!j.attributes.color&&j.attributes.color.itemSize===4,ut=!!j.attributes.tangent&&(!!xe.normalMap||xe.anisotropy>0),ft=!!j.morphAttributes.position,xt=!!j.morphAttributes.normal,_t=!!j.morphAttributes.color;let It=Zr;xe.toneMapped&&(p===null||p.isXRRenderTarget===!0)&&(It=u.toneMapping);const kt=j.morphAttributes.position||j.morphAttributes.normal||j.morphAttributes.color,Et=kt!==void 0?kt.length:0,gt=Fe.get(xe),Qt=s.state.lights;if(F===!0&&($===!0||O!==o)){const Mn=O===o&&xe.id===r;Ie.setState(xe,O,Mn)}let Rt=!1;xe.version===gt.__version?(gt.needsLights&&gt.lightsStateVersion!==Qt.state.version||gt.outputColorSpace!==tt||be.isBatchedMesh&&gt.batching===!1||!be.isBatchedMesh&&gt.batching===!0||be.isBatchedMesh&&gt.batchingColor===!0&&be.colorTexture===null||be.isBatchedMesh&&gt.batchingColor===!1&&be.colorTexture!==null||be.isInstancedMesh&&gt.instancing===!1||!be.isInstancedMesh&&gt.instancing===!0||be.isSkinnedMesh&&gt.skinning===!1||!be.isSkinnedMesh&&gt.skinning===!0||be.isInstancedMesh&&gt.instancingColor===!0&&be.instanceColor===null||be.isInstancedMesh&&gt.instancingColor===!1&&be.instanceColor!==null||be.isInstancedMesh&&gt.instancingMorph===!0&&be.morphTexture===null||be.isInstancedMesh&&gt.instancingMorph===!1&&be.morphTexture!==null||gt.envMap!==ot||xe.fog===!0&&gt.fog!==Ne||gt.numClippingPlanes!==void 0&&(gt.numClippingPlanes!==Ie.numPlanes||gt.numIntersection!==Ie.numIntersection)||gt.vertexAlphas!==ct||gt.vertexTangents!==ut||gt.morphTargets!==ft||gt.morphNormals!==xt||gt.morphColors!==_t||gt.toneMapping!==It||gt.morphTargetsCount!==Et)&&(Rt=!0):(Rt=!0,gt.__version=xe.version);let yn=gt.currentProgram;Rt===!0&&(yn=qt(xe,de,be));let Tt=!1,cn=!1,Er=!1;const ln=yn.getUniforms(),kn=gt.uniforms;if(Ae.useProgram(yn.program)&&(Tt=!0,cn=!0,Er=!0),xe.id!==r&&(r=xe.id,cn=!0),Tt||o!==O){Ae.buffers.depth.getReversed()&&O.reversedDepth!==!0&&(O._reversedDepth=!0,O.updateProjectionMatrix()),ln.setValue(ee,"projectionMatrix",O.projectionMatrix),ln.setValue(ee,"viewMatrix",O.matrixWorldInverse);const Sn=ln.map.cameraPosition;Sn!==void 0&&Sn.setValue(ee,K.setFromMatrixPosition(O.matrixWorld)),me.logarithmicDepthBuffer&&ln.setValue(ee,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),(xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshLambertMaterial||xe.isMeshBasicMaterial||xe.isMeshStandardMaterial||xe.isShaderMaterial)&&ln.setValue(ee,"isOrthographic",O.isOrthographicCamera===!0),o!==O&&(o=O,cn=!0,Er=!0)}if(be.isSkinnedMesh){ln.setOptional(ee,be,"bindMatrix"),ln.setOptional(ee,be,"bindMatrixInverse");const Mn=be.skeleton;Mn&&(Mn.boneTexture===null&&Mn.computeBoneTexture(),ln.setValue(ee,"boneTexture",Mn.boneTexture,Le))}be.isBatchedMesh&&(ln.setOptional(ee,be,"batchingTexture"),ln.setValue(ee,"batchingTexture",be._matricesTexture,Le),ln.setOptional(ee,be,"batchingIdTexture"),ln.setValue(ee,"batchingIdTexture",be._indirectTexture,Le),ln.setOptional(ee,be,"batchingColorTexture"),be._colorsTexture!==null&&ln.setValue(ee,"batchingColorTexture",be._colorsTexture,Le));const On=j.morphAttributes;if((On.position!==void 0||On.normal!==void 0||On.color!==void 0)&&Pe.update(be,j,yn),(cn||gt.receiveShadow!==be.receiveShadow)&&(gt.receiveShadow=be.receiveShadow,ln.setValue(ee,"receiveShadow",be.receiveShadow)),xe.isMeshGouraudMaterial&&xe.envMap!==null&&(kn.envMap.value=ot,kn.flipEnvMap.value=ot.isCubeTexture&&ot.isRenderTargetTexture===!1?-1:1),xe.isMeshStandardMaterial&&xe.envMap===null&&de.environment!==null&&(kn.envMapIntensity.value=de.environmentIntensity),cn&&(ln.setValue(ee,"toneMappingExposure",u.toneMappingExposure),gt.needsLights&&tn(kn,Er),Ne&&xe.fog===!0&&_e.refreshFogUniforms(kn,Ne),_e.refreshMaterialUniforms(kn,xe,k,v,s.state.transmissionRenderTarget[O.id]),Ua.upload(ee,bn(gt),kn,Le)),xe.isShaderMaterial&&xe.uniformsNeedUpdate===!0&&(Ua.upload(ee,bn(gt),kn,Le),xe.uniformsNeedUpdate=!1),xe.isSpriteMaterial&&ln.setValue(ee,"center",be.center),ln.setValue(ee,"modelViewMatrix",be.modelViewMatrix),ln.setValue(ee,"normalMatrix",be.normalMatrix),ln.setValue(ee,"modelMatrix",be.matrixWorld),xe.isShaderMaterial||xe.isRawShaderMaterial){const Mn=xe.uniformsGroups;for(let Sn=0,lr=Mn.length;Sn<lr;Sn++){const Wn=Mn[Sn];Ue.update(Wn,yn),Ue.bind(Wn,yn)}}return yn}function tn(O,de){O.ambientLightColor.needsUpdate=de,O.lightProbe.needsUpdate=de,O.directionalLights.needsUpdate=de,O.directionalLightShadows.needsUpdate=de,O.pointLights.needsUpdate=de,O.pointLightShadows.needsUpdate=de,O.spotLights.needsUpdate=de,O.spotLightShadows.needsUpdate=de,O.rectAreaLights.needsUpdate=de,O.hemisphereLights.needsUpdate=de}function se(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&O.lights===!0}this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return h},this.getRenderTarget=function(){return p},this.setRenderTargetTextures=function(O,de,j){const xe=Fe.get(O);xe.__autoAllocateDepthBuffer=O.resolveDepthBuffer===!1,xe.__autoAllocateDepthBuffer===!1&&(xe.__useRenderToTexture=!1),Fe.get(O.texture).__webglTexture=de,Fe.get(O.depthTexture).__webglTexture=xe.__autoAllocateDepthBuffer?void 0:j,xe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(O,de){const j=Fe.get(O);j.__webglFramebuffer=de,j.__useDefaultFramebuffer=de===void 0};const he=ee.createFramebuffer();this.setRenderTarget=function(O,de=0,j=0){p=O,y=de,h=j;let xe=!0,be=null,Ne=!1,Ye=!1;if(O){const ot=Fe.get(O);if(ot.__useDefaultFramebuffer!==void 0)Ae.bindFramebuffer(ee.FRAMEBUFFER,null),xe=!1;else if(ot.__webglFramebuffer===void 0)Le.setupRenderTarget(O);else if(ot.__hasExternalTextures)Le.rebindTextures(O,Fe.get(O.texture).__webglTexture,Fe.get(O.depthTexture).__webglTexture);else if(O.depthBuffer){const ft=O.depthTexture;if(ot.__boundDepthTexture!==ft){if(ft!==null&&Fe.has(ft)&&(O.width!==ft.image.width||O.height!==ft.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Le.setupDepthRenderbuffer(O)}}const ct=O.texture;(ct.isData3DTexture||ct.isDataArrayTexture||ct.isCompressedArrayTexture)&&(Ye=!0);const ut=Fe.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?(Array.isArray(ut[de])?be=ut[de][j]:be=ut[de],Ne=!0):O.samples>0&&Le.useMultisampledRTT(O)===!1?be=Fe.get(O).__webglMultisampledFramebuffer:Array.isArray(ut)?be=ut[j]:be=ut,m.copy(O.viewport),b.copy(O.scissor),E=O.scissorTest}else m.copy(te).multiplyScalar(k).floor(),b.copy(H).multiplyScalar(k).floor(),E=z;if(j!==0&&(be=he),Ae.bindFramebuffer(ee.FRAMEBUFFER,be)&&xe&&Ae.drawBuffers(O,be),Ae.viewport(m),Ae.scissor(b),Ae.setScissorTest(E),Ne){const ot=Fe.get(O.texture);ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_CUBE_MAP_POSITIVE_X+de,ot.__webglTexture,j)}else if(Ye){const ot=de;for(let ct=0;ct<O.textures.length;ct++){const ut=Fe.get(O.textures[ct]);ee.framebufferTextureLayer(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0+ct,ut.__webglTexture,j,ot)}}else if(O!==null&&j!==0){const ot=Fe.get(O.texture);ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,ot.__webglTexture,j)}r=-1},this.readRenderTargetPixels=function(O,de,j,xe,be,Ne,Ye,tt=0){if(!(O&&O.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=Fe.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&Ye!==void 0&&(ot=ot[Ye]),ot){Ae.bindFramebuffer(ee.FRAMEBUFFER,ot);try{const ct=O.textures[tt],ut=ct.format,ft=ct.type;if(!me.textureFormatReadable(ut)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!me.textureTypeReadable(ft)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}de>=0&&de<=O.width-xe&&j>=0&&j<=O.height-be&&(O.textures.length>1&&ee.readBuffer(ee.COLOR_ATTACHMENT0+tt),ee.readPixels(de,j,xe,be,ht.convert(ut),ht.convert(ft),Ne))}finally{const ct=p!==null?Fe.get(p).__webglFramebuffer:null;Ae.bindFramebuffer(ee.FRAMEBUFFER,ct)}}},this.readRenderTargetPixelsAsync=async function(O,de,j,xe,be,Ne,Ye,tt=0){if(!(O&&O.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ot=Fe.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&Ye!==void 0&&(ot=ot[Ye]),ot)if(de>=0&&de<=O.width-xe&&j>=0&&j<=O.height-be){Ae.bindFramebuffer(ee.FRAMEBUFFER,ot);const ct=O.textures[tt],ut=ct.format,ft=ct.type;if(!me.textureFormatReadable(ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!me.textureTypeReadable(ft))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const xt=ee.createBuffer();ee.bindBuffer(ee.PIXEL_PACK_BUFFER,xt),ee.bufferData(ee.PIXEL_PACK_BUFFER,Ne.byteLength,ee.STREAM_READ),O.textures.length>1&&ee.readBuffer(ee.COLOR_ATTACHMENT0+tt),ee.readPixels(de,j,xe,be,ht.convert(ut),ht.convert(ft),0);const _t=p!==null?Fe.get(p).__webglFramebuffer:null;Ae.bindFramebuffer(ee.FRAMEBUFFER,_t);const It=ee.fenceSync(ee.SYNC_GPU_COMMANDS_COMPLETE,0);return ee.flush(),await wp(ee,It,4),ee.bindBuffer(ee.PIXEL_PACK_BUFFER,xt),ee.getBufferSubData(ee.PIXEL_PACK_BUFFER,0,Ne),ee.deleteBuffer(xt),ee.deleteSync(It),Ne}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(O,de=null,j=0){const xe=Math.pow(2,-j),be=Math.floor(O.image.width*xe),Ne=Math.floor(O.image.height*xe),Ye=de!==null?de.x:0,tt=de!==null?de.y:0;Le.setTexture2D(O,0),ee.copyTexSubImage2D(ee.TEXTURE_2D,j,0,0,Ye,tt,be,Ne),Ae.unbindTexture()};const U=ee.createFramebuffer(),V=ee.createFramebuffer();this.copyTextureToTexture=function(O,de,j=null,xe=null,be=0,Ne=null){Ne===null&&(be!==0?(ji("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ne=be,be=0):Ne=0);let Ye,tt,ot,ct,ut,ft,xt,_t,It;const kt=O.isCompressedTexture?O.mipmaps[Ne]:O.image;if(j!==null)Ye=j.max.x-j.min.x,tt=j.max.y-j.min.y,ot=j.isBox3?j.max.z-j.min.z:1,ct=j.min.x,ut=j.min.y,ft=j.isBox3?j.min.z:0;else{const On=Math.pow(2,-be);Ye=Math.floor(kt.width*On),tt=Math.floor(kt.height*On),O.isDataArrayTexture?ot=kt.depth:O.isData3DTexture?ot=Math.floor(kt.depth*On):ot=1,ct=0,ut=0,ft=0}xe!==null?(xt=xe.x,_t=xe.y,It=xe.z):(xt=0,_t=0,It=0);const Et=ht.convert(de.format),gt=ht.convert(de.type);let Qt;de.isData3DTexture?(Le.setTexture3D(de,0),Qt=ee.TEXTURE_3D):de.isDataArrayTexture||de.isCompressedArrayTexture?(Le.setTexture2DArray(de,0),Qt=ee.TEXTURE_2D_ARRAY):(Le.setTexture2D(de,0),Qt=ee.TEXTURE_2D),ee.pixelStorei(ee.UNPACK_FLIP_Y_WEBGL,de.flipY),ee.pixelStorei(ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),ee.pixelStorei(ee.UNPACK_ALIGNMENT,de.unpackAlignment);const Rt=ee.getParameter(ee.UNPACK_ROW_LENGTH),yn=ee.getParameter(ee.UNPACK_IMAGE_HEIGHT),Tt=ee.getParameter(ee.UNPACK_SKIP_PIXELS),cn=ee.getParameter(ee.UNPACK_SKIP_ROWS),Er=ee.getParameter(ee.UNPACK_SKIP_IMAGES);ee.pixelStorei(ee.UNPACK_ROW_LENGTH,kt.width),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,kt.height),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,ct),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,ut),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,ft);const ln=O.isDataArrayTexture||O.isData3DTexture,kn=de.isDataArrayTexture||de.isData3DTexture;if(O.isDepthTexture){const On=Fe.get(O),Mn=Fe.get(de),Sn=Fe.get(On.__renderTarget),lr=Fe.get(Mn.__renderTarget);Ae.bindFramebuffer(ee.READ_FRAMEBUFFER,Sn.__webglFramebuffer),Ae.bindFramebuffer(ee.DRAW_FRAMEBUFFER,lr.__webglFramebuffer);for(let Wn=0;Wn<ot;Wn++)ln&&(ee.framebufferTextureLayer(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,Fe.get(O).__webglTexture,be,ft+Wn),ee.framebufferTextureLayer(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,Fe.get(de).__webglTexture,Ne,It+Wn)),ee.blitFramebuffer(ct,ut,Ye,tt,xt,_t,Ye,tt,ee.DEPTH_BUFFER_BIT,ee.NEAREST);Ae.bindFramebuffer(ee.READ_FRAMEBUFFER,null),Ae.bindFramebuffer(ee.DRAW_FRAMEBUFFER,null)}else if(be!==0||O.isRenderTargetTexture||Fe.has(O)){const On=Fe.get(O),Mn=Fe.get(de);Ae.bindFramebuffer(ee.READ_FRAMEBUFFER,U),Ae.bindFramebuffer(ee.DRAW_FRAMEBUFFER,V);for(let Sn=0;Sn<ot;Sn++)ln?ee.framebufferTextureLayer(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,On.__webglTexture,be,ft+Sn):ee.framebufferTexture2D(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,On.__webglTexture,be),kn?ee.framebufferTextureLayer(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,Mn.__webglTexture,Ne,It+Sn):ee.framebufferTexture2D(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,Mn.__webglTexture,Ne),be!==0?ee.blitFramebuffer(ct,ut,Ye,tt,xt,_t,Ye,tt,ee.COLOR_BUFFER_BIT,ee.NEAREST):kn?ee.copyTexSubImage3D(Qt,Ne,xt,_t,It+Sn,ct,ut,Ye,tt):ee.copyTexSubImage2D(Qt,Ne,xt,_t,ct,ut,Ye,tt);Ae.bindFramebuffer(ee.READ_FRAMEBUFFER,null),Ae.bindFramebuffer(ee.DRAW_FRAMEBUFFER,null)}else kn?O.isDataTexture||O.isData3DTexture?ee.texSubImage3D(Qt,Ne,xt,_t,It,Ye,tt,ot,Et,gt,kt.data):de.isCompressedArrayTexture?ee.compressedTexSubImage3D(Qt,Ne,xt,_t,It,Ye,tt,ot,Et,kt.data):ee.texSubImage3D(Qt,Ne,xt,_t,It,Ye,tt,ot,Et,gt,kt):O.isDataTexture?ee.texSubImage2D(ee.TEXTURE_2D,Ne,xt,_t,Ye,tt,Et,gt,kt.data):O.isCompressedTexture?ee.compressedTexSubImage2D(ee.TEXTURE_2D,Ne,xt,_t,kt.width,kt.height,Et,kt.data):ee.texSubImage2D(ee.TEXTURE_2D,Ne,xt,_t,Ye,tt,Et,gt,kt);ee.pixelStorei(ee.UNPACK_ROW_LENGTH,Rt),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,yn),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,Tt),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,cn),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,Er),Ne===0&&de.generateMipmaps&&ee.generateMipmap(Qt),Ae.unbindTexture()},this.copyTextureToTexture3D=function(O,de,j=null,xe=null,be=0){return ji('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(O,de,j,xe,be)},this.initRenderTarget=function(O){Fe.get(O).__webglFramebuffer===void 0&&Le.setupRenderTarget(O)},this.initTexture=function(O){O.isCubeTexture?Le.setTextureCube(O,0):O.isData3DTexture?Le.setTexture3D(O,0):O.isDataArrayTexture||O.isCompressedArrayTexture?Le.setTexture2DArray(O,0):Le.setTexture2D(O,0),Ae.unbindTexture()},this.resetState=function(){y=0,h=0,p=null,Ae.reset(),ye.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return br}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const a=this.getContext();a.drawingBufferColorSpace=an._getDrawingBufferColorSpace(e),a.unpackColorSpace=an._getUnpackColorSpace()}}function Qy(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var Ys={exports:{}},xd;function jy(){return xd||(xd=1,(function(_){(function(){var e={GraphingCalculator:!0,FourFunctionCalculator:!0,ScientificCalculator:!0},a="59c0109323576627d7f9f42dd14d80bdd5d68587";(function(w){var T=document.createElement("style");T.innerHTML=`@font-face {
  font-family: Abraham;
  src: url(data:application/font-woff;base64,d09GRk9UVE8AABesAAoAAAABsHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAAGCAAAESoAAZxTwK+1TU9TLzIAAAFMAAAASAAAAGBqcY7HY21hcAAAArwAAAM/AAAM5C7FvppoZWFkAAAA9AAAAC8AAAA2C10Dp2hoZWEAAAEkAAAAHwAAACQGhwJ4aG10eAAAFzQAAAAkAAACiN3nXcBtYXhwAAABRAAAAAYAAAAGAKJQAG1ldGEAABdYAAAAUQAAAFXVMTtBbmFtZQAAAZQAAAEmAAACx11IF6xwb3N0AAAF/AAAAAwAAAAgAAMAAHgBY2BkYADh+nP6yvH8Nl8ZmJlfMADBlQ8P9BH0f3OmFGYjIJeZgQkkCgBSDwurAHgBY2BkYGBW+2/HwMD0myHl/xymX0ARVLAIAIH7BgMAAABQAACiAAB4AWNgZvrC+IWBlYGBqYtpNwMDQw+EZrzPYMjIxIAKmMEkC4QTAQQMDgy8GvbMav/tgJJGDCeBwoxghXLMcgwKQMgAAHxDCyh4AUzOuwkCYRBF4TP7frO7ghgZiBhbwGbagJFlWIAlmduFPckPN7jZx8wwHOAcXwIACJCDHbmcUbPJOUcecmE3JSc+csWBp1zbz8bcmjtzbx7Mo3kyz9awWOea5mlTtEBGyMGFvZwxcZNzNl5yYTcld35yxZW3XNvPxtyaO3NvHsyjeTLP1rBY55rm/6rGGFVDGAjCc5RcQFGws7Kxs7Gwj7pqMCaw6v3/wTwehJCE3Rm+z8B0s9rDXkWIoXiDW+Iq6DBDYXHwXigQEBH4v3wdFk4rZJT99VYxQrAz8ixrXVZV0/4xiUzE/26NEhVPgzaXJEUuyMmT6O1iMMnQx/Dc4jcz2FOUS64xsa+44T6WyWz9t3uYCjw2pgMsTk6amqn9A7mESTQAAHgBDMVlMwQBAADQt9gxY8Y3P0Bb3b2a1d3d3Vzccfx23peHIsUCVPxfRhgrCSOCJKBUgnKVqlSrUatOvQaRRk2atWjVpl2HTl269ejVp9+AQUOGxUaMGjNuwqQp02YkZs2Zt2DRkmUrVq1Zt2HTlm07du3Zd+DQkWMnTp05d+HSlWs3bt259+DRk2cvXr159+FTSlpGVk7el28FP379sU/fOE4GUBDHne1dh83BOdt/55yD78LJEBXX4BbUnIH+Y4opOIAlhOQZ/YrXjvS+EiJMhCgx4iRIkuKOe9JkyJLjgUeeeOaFV95454NP8hQoUqJMhSo16jRo0qJNhy7Qo8+AISPGTJgyY86CJSvWbNiyY8+BIyfOXIJAK15lx9uOwe/g13/dHz+//Nvq26+RWzISSn739U3+TtbCUrOI1C0qDYtJ0+LSsoS0LSkdS0nX7gS7l56lpW8ZGVhWhpaTkT3I2B5lYk8ytWeZ2YvM7VUW9iZLe5eVfcjaPmVjedlaQXZWlL2V5GBlOVpFTlaVs9XkYnX5wwI93TAAAAAQXa22bdt2O3tzyX28BV5AXAfFdQheh8V1RFxHxXVMXMfFdUJcJ8V1SlynxXUGXmfFdU5c58V1QVwXxXVJXJfFdUVcV8V1TVzXxXVDXDfhdQtet+F1B1534XUPXvfh9QBeD+H1CF6P4fUEXk/h9Qxez+H1Al4v4fUKXq/h9QZeb+H1Dl7v4fUBXh/h9Qlen+H1BV5f4fUNXt/h9QNeP+H1C16/4fUHXn/h9U9/EujaCAEAAGAg7u4CfcZmVC6X4hd4r3/qmoG6ZqiuGcVrxvGaSbxmGq+ZxWvm8ZpFvGYZr1mpa9bqmo26Zquu2alr9uqag7rmqK45qWvO6pqLuuaqrrmpa+7qmoe65qmuealr3uqaj7rm+y8pro4aAAAoCF4luLu7lIZD3F1I0mnezH3srHjLK+I9r4qPvCY+87r4yhviO2+Kn7wlfvO2+Ms7opB3RTHviVLeF+V8ICr5UFTzkajlY1HPJ6KRT0Uzn4lWPhftfCE6+VJ085Xo5WvRzzdikG/FMN+JUb4X4/wgJvlRTPOT+M/PYpZfxDy/isUS0BD9swB4AWNgZsALAAB9AAR4AVTRe3RU1RUG8O/bNzElREIAiSEPE9NoxIbm/aCyXAHkUUgoxKYBFpI7M2cyQ2bundyZSYAlVqstVowghVItlAq0gFiEghYFhTZVIxUVSSuIysMSpUBBYyFpinbIYa2u/nN/e+117t777EPEESTTql2O6TODlm1FLb/b9qhZqikaMB2QzO9NR2+G9GYYvZlxy/rn9b3ctzw+E4iX5Nj3hntSlmWCa+uGYZOAyEU5xmESpmEmZsMNP0JYhEfQjjVYj43Ygu3YjZfwCg6gA514C+/iCI7iI5xCNy6iB734mgkcxEQOZhJv5BAmcyhTOIzDOYI3cSRTeTPTOIrpzGAms3gLs5nDW5nLMazgBNaygfN4H+ezkSZddNNDRS+b6KOfC9jMAIO0aDPEFjoMM8IoW9nGB/kw27mGm7mdL3AfO3iQh3mUJ9jNC/yS/SIySIZKqmRJnnxLSmSsVMsUmSH1Mk880iyOLJIHZak8IatlrWyUZ2Wn7JH98rocki45LqflrFySK/KVEW8kGcONUUaOkW982yg3xhkTjWnGLGO20Wg01Ssn7Let7KIxhYWl35lkW5GwCniza8xm5cSSsfT1JyuwbKvg/x/NHTvt2IEJs8Ih063UQnfADLZE7YjyuAJWNOi6VrrJ8tiB2NmQctzKipjBWBA2Lc/AubDfagqokOkoK6C8kYHA8Tf5ImY4ohx/uDkUiIbddjBo+haFfMoKxZK2Jxwww77FyrFtS0Xa7IjPUcprRx2vvzVWcWFYtSpLXati+S3ltgO2FVZB/0AQUOGwaomagSZHmbEWLVEVjsSub0aqx0+YeM+kyVOmfnfa9JraGd+bOavu3u/X/6Bh9pzY9d3NKnJtQFcsGuh+PXd9Vrff7/Y77mgwanmUExvYUU2O2apMl9ujvE0+/4LmQNCyQy1OOBJtbVu4aPG1/5Wu6AzE/6sU8Qc8KrZrl6PM5th+BnYb23txZWGhpkhTrCnRlGrKNOWaCk2lpkpjalwat8ajURrvAEWFmiJNsaZEU6op05RrKjSVmiqNqXFp3BqPRml0v+JCTZGmWFOiKdWUaco1FZpKTZXG1Lg0bo1HozS6X0mhpkhTrCnRlGrKNOWaCk2lpkpjalwat8ajURovAD7GZXyc7XyCy7mCT3Ilf8ZVXM2fcw1/waf4NH/JtVzHX3E9f81nuIEbuYm/4W+5mVu4lc9yG5/j77idz3MHd/L33MXdfIEv8g/cw5f4MvdyH1/hq9zPA/wj/8QO/pmv8XW+wU6+yYP8C9/iIb7Nd/guD/M9HmEX/8q/8X0e5TF+wOP8kB/xY57gSZ7iaX7Cv/MMu/kpP+NZ/oPneJ4X+E9e5CV+zi/Ywy/5L17mFfayj/9mP//Dq/yKXwuEImJInMTLDZIg35BBkiiDJUlulCGSLEMlRYbJcBkhN8lISZWbJU1GSbpkSKZkyS2SLTlyq+TKNyVPbpPbJV/ukNHYYAAE4oAEIBGyAvEjkbAWiaORtAPJ5UjZhxHjMbITabVI70LWHGSfRK4XeeeR34o741CwEoXZKN6OsrtQcRBjG3DXadwdQvVlTLwfkwVTH8X0IahdhZmjUHcI9XVoOIa58zHvDBqb4focqg2+AizYhWAV7P2IbETbHVj0PO4vwwN78VA1Hn4DP6nBo0ewbDbaT2CFwspzWN2CNVfw9BKsM7D+p9iQjE2rsXkKtr6N5+7F9g+wsxG7uvFiAHu+wN4teHUMDuxGx1h0ZuHgJhwajXd24L1ydO3D++NxrBMf1uLjLpyag09OotuLz87jnIMLvbj0AHri0JOAngZcHozep9Cfi6tbiRLKm4yfwYRjTJzPpLNMDjPlKkcsY2oa09YzI49Z25hTxdz9vK2G+Ud4p8mCT1kYZHEPy5aw0uDYdo5L593PcPztnLiTkys49TVOn8baw5w5l3VnWG+zoY9zl/K+FDaupzuPahd9P2bzYFo5DG1juIrRDi6s4eLjXOLnDy/yR1E+0s+lD/GxBD7ezuWpfHIdV+X2ZQ35b3vXH1tXXcXvq5TcdRtFs8rohkPHCjRzndK0lrAR1iZbg6nGpzJmSUqmf1DTwQDdEn4IMoP6VWZeTP8QdGo3S5bGOKKsiUVTQjqXVTeYzKX9Z2Rdt1nMuh9dJm3f8d7PTb/t3mt4vcJp77t8EnLv+L737rnnns/9nPM95/s9vVLr//ffF4xI1fbyEmMKpeCba18x/r/Me09iYPzF7gYTfLTy9Zdk7J2uz5QYcb5Q8z2RtyoWiPPZI5dEDvQ8a9zghGEcDAZc/9TxDXzRG67/HH5s3OCEYe/w6mH/osk9rqSPLxo0uiKcE09tlsStQ6W+mOuP1YlcqPmROAt7tomcu73LuMEJwzgYDLj+qbgVX/SGk7/Hj40bnDDsHTq+4l90uNkVWfb9X+pqAiVwULbJz9pXG9WHNWMUJk59dRAo1LUdUKgrIvHwxiOxsN0kCvPdJlHkQjJItN+n+KNQOlP1ma939YTW5ddB6/KFBsPTa31wQuu3L0Drty8aDGe93jjoinHWt+yHNvF4r9QZImpoxPunCxFrO33A62oCTiQKYzBLUYCI3iyFXGhnKfluO6AwQlxIVucsJQKakNWJQmoSgVidsxN6ZHJhFPwY58jkQnIhNSEXEoVEIblQ6JGZLyQKo4FCD2AbVkjBpqLHJiUlGyckFZ8JKtfNkNSXKen2Af+LZf5wk//jVkgavtH4Qtr8z36Niy71lCnd3y9jZysK8875cwGFUV/CAyQ6rz3UCySGlWSRuM0iMUvSJBJlXWslkBj/BWX6y7Ai4ERU0dh46LCmpAk0DrbsDY9G2jBfNCE3crEtNIkLGruW1wVoDPBlL9mULWkqvoL7srDbli1p6n1J4uUlWywaLfgsGi08JX3fQGoCjdAFYTF0yY6WJ3WZcj8HIT07Wr7qfpy22iFTEs4q4SwOmMCGqmIgQVkTZ0d7BeSo2gQzmIElN2eisc+isRmSik8bX/YD06KxY/eEpOHFARpbIansaus/szw1QzSeT2aisQ+aT3c/VvPQ99NWXR4TNHbsmm90H5bVRFMM40YusmDcyOxOCDGMG6uBr+liAouvEDFBuLhx/OiazUCjfrQVF0+dqjeqAZ1RjxkjwIv00ty8GvV6NOtnXKdIFBKFXJtDBuH+FU5mqQl3lHLvEdcpfhTjQmpCLuR6e3LhzlAofP6YbnIRttMVETIFRk1k6chPRUYT48pgT298U8auPLhhAor7MqH4JQzEv3ki17pGXxOiMB81YRBJ28W5hSdRSBRGP7YgCmk7prjJhSy0EIVEIefIJv3kHOKUPpurIn/3z0Fx/tGyNzL5RXIn/0QQAKZaQvg/aQInfBHD2c8KB4MB685Yb4mQTdKjtz0lY4O/uZyD49S4kBUKaqIwmzlxZ4+Hws4q/3au++TrIpd+vkKc+d/uEzl/9m7j+qe1xh8uw2cG467BuP/Ffnzm/7jbuLiGwe/xmcG4K3LLS13iOB97V9l+/ZvrPPudXqWrDYhTV0Ti8UeHPU3OXZv/c7PuE+0y/sYL3ynxFLznQW943q03iVw+ftJ/SH/Z5QYnjOCA/zVucMIIfmLwczc4YSQ44KL+RXrf6/FEXP/OFv+N+3MDDgYDbnASuVD3CoZFzn0qZdzghGEcDAbc4IQvYhg/9kUkNg0n9bU4oKoFTC7OHYU1+a6J5TjuqmMlj3lDopCVPM46+D6RC2k7opAoZCWPHpkemTWRGKCQHpl/sJ5+jKsv2NCBlTmikLnemHhkemR6ZNZO2GKJrE4UEoWcnbDpIVuWsdEX22Ox9SZRyNiC7ebYpI2akAupCf9QPVtvEoVsvUlN2HqTCwZYdNadyhCFLPcRhWx6SBQShSz3EYW0HVPc5EIWWohCopBzZLbepM9m601yJzHJ1pust7D1JisU1IStN9l6k6032XqTrTfZVoSVPDb6IgpZyeOsg+8TuZC2IwqJQlby6JFpO7ZYIhfSI7PRFxt9cY5MFDK2IAqZ66VHJhdy7RmbHpJBiEKikBU8xoVsvcnWm3OIQjY9ZOtNopCxBVtvskkb281dqZ1xxznHaauTsVu6G3L0A2MLu/zThC3sxHntoV4p2FT0mLLm61orZexsRSF3WLNO9H7p89qa7Tkh8vKSLZKe135XSTgB4W5enDU124GTvEeis75l/4z9NsuJIZB4av3RqWSF28cdQ6WwGkNBA2UzNN75B/VX/JEvw3a6mgDsqiKgRBw0sVvvxVnQ3aDmnbn9ntvvR3LwnI0T/a/MRpw4uLV1hnFiZ5W+Fewea3XXeXrVjLWhNtZLczH4XGrCWFGcrp4felKAXnvHTdmKTEVvoLYF9bZsRaaqjUelKwKuE3JmJoaaOHuOjAbZnHCQCQdHSSTaK2w2x9Ka5TlLfJHgQ7aC58IfYA9IzIFYSd93fs8EEvG48BTxuIKHi1GDkexMDkbwKDGag3J0RaSTTbshR5kLOnY1KmtiyVNXjNNWddxoPix1JBKJsdAEEpSRaDM5RZV3q8YkZjbCnqfP9kr646XLcr1T40fXbMY7pWs/Z8cfa/UJy8SGE5HJSXx+2f36mRzAhNNzlXJODGLF6NSfiUbuPmc+kRDR58Too5B/xIr5KKKQKNRndcaH0Qc8d6GTEwkRciL7nDEIiDYnEiKMExsPHdZUxq5PbNlLwDMIICcSIhG1SQRQyAwONVHYSRX5/UcPf+vkrNjuFzfFQBOuSeT6qdwipPHgbXFZf0OvzCY8+cGH+qv4uLKZfCiJgSVbc62MtcpM5qdDK/PM8ntEagrvjNay1RigEe9VDOIMZm7onfNpzmxRyFavjBHnes6czJwz91lf1hz4stPwZQ9M78t2W1+2OHgxWoHEsgxfVl2uHln97Rjsp6sJfJmqCEAkFppYPmQT77lqfsp25BMzlZux7mbKTKXPzlSy8G5nKqHwjplKCutuIka7MZhCdOyaHxXaJSfGgEnYUl4BhfxzACE8M2MM/Wy2bq6KM5Vk00gsnH/QC2x5XWaMCHA3ZWN++iYMByEpG/NTJaEHMmLEuAE+AjFiqn4qTKoBk2mNZ2ESzngGWqiKiBEnxmAaQU5cXYguxsrzZsxTw/XA/UBOV00TvCq6Iuyrkvc2SVzzr+fQxTgHz9kMDnrf6Gdw0PuGifMPVxN54ovFcak1x7++wkRf9G1id09hDU7YmTpY1IafTdlRafaOUqzBiUbCSDpT9XOdiWPdmTnFR36bgcJko13Of8a4AaGAYKZHYZldVtIKFA7fiOX8bdmZOE0R2DGQmp29D1tUNcnqk6jNiYgVPzjgmUSPbZ/ExMmnT0hiZWlVich4+10il4p3ilxu8ERerrxf5OLIYu+D7hpX5N/bfyAy+uZCkf+0/FicT3Q8Ls41i3aLU/L83z0RBRvfEGf+8AZx5u171jscOiLOgqIz3gdrf+X6X3rC+3rFUu+Hqe96l0j+RGR0qNG/bKU/s/nrW5K+Ydk6JpU+9PXAN+yTxKdPHZ40cKc18GoYGB9YAw/dYQ18rzVw76SBt1oDt1sDH7AGXnXRGvhP1sBFfrx5tFmcawvv1dSWlUPGmlHi1YKv9zw3t68deHXs3UdHcqcCvrZIxvpfPRZ/mkBWaWXr7JIitbVVTMS+6lXMGeZJB1JwA5pVM9/OtUO60YTJEUmwUBrxenrEkMhtWwid2yvUa+rM2HMiF6GaeuLUhhXgxbB5MLCovWRTdh7s6r+nW7q/H7z4kZmoASGxSGIaaME8KZEY/ypYdm9cfTSSF99HDFNx8c9xEiLcoxPFnWK24xQ1iYYmRCE1iQCrE4WMLebeJkQhUUguJIMwtuDe7QhVh9j7kXxITRgbEoWMDf8HznRiLwAAeAFj6mJgYFzPkALCTL8Ypg0o/j0y7QeH/W+Y/SMTAwDIkfvpeAFjYGBgZIAAGRA7rTgnDcq2rFZKrSgJSy0qzszPU7JSMtQz1DNQ0lEqTk7MycxLd0tMLskvUrIyNNAzMjAxsDA0MzYyMzU2MDOsBQCPLBJ2AAAA) format('woff');
}@font-face {
  font-family: Symbola;
  src: url(data:application/font-woff;base64,d09GRgABAAAAAChwABEAAAAAQywAAoUeAAAAAAAAAAAAAAAAAAAAAAAAAABHREVGAAAncAAAACcAAAAoAOQA5kdQT1MAACeYAAAAEAAAABAAGQAMR1NVQgAAJ6gAAADFAAABKKK+thVPUy8yAAAhrAAAAE8AAABWjIaoAWNtYXAAACH8AAABFwAAAdz2W760Y3Z0IAAAJQgAAABaAAAAWhEGDTtmcGdtAAAjFAAAAbEAAAJl2bQvp2dhc3AAACdkAAAADAAAAAwAAwAHZ2x5ZgAAAYAAAB5ZAAA15ITPRN9oZWFkAAAgmAAAADYAAAA2+zj5+2hoZWEAACGMAAAAIAAAACQPEwHJaG10eAAAINAAAAC7AAABLm4VHxRsb2NhAAAf/AAAAJoAAACaHqoSHm1heHAAAB/cAAAAIAAAACACRAsCbmFtZQAAJWQAAADmAAABoCEMPvNwb3N0AAAmTAAAARYAAAGdYezlm3ByZXAAACTIAAAAQAAAAEBey7t5eJytWwl8VNW5P+dusyQzuXe2TGayzJKZyWS74U4mk4FAAoEAAQKERSBgQBAVwSgooiKyKVShCuJCtRV5lrr33mHQFltNrXvbV9e4VGy12p/i89WndYFkLu87905CQJbQ9wK599xl5p7vf/7f/3zfd24Qg9rVb5j17F2IRgZUiMoQwn7BTwt+ATu4YCDiDAoJV0yK14YS+a58l3YyHK+ti0kuZn3v60x1e99q6pP71lZJl4+fV/2IutGW2Hf5req+WGlpjPyq33B7j8isepSiD117c+4HOFzn2XVgVJfJO2lh30v6PTGEKPQpPPlZ9iAyIS8SUYrBqCJtYpGdqcByoSgbemSLlKY4ckLO728pRbgC1QwrdWndgl7FAxG6Nl6bgP7lu5wOJ83hjU1NVVXwW8BMLQ5UVgaKpzLvNs1tgv/7RPoBli3zFBZ6yli2b14VdAF1qHupUexh5ESlCMsu8uS0jUMepiJlM5gr9iMbMlXIVknJ1x6NHQBSmBJ4G3mm02FAAo9d1Ch7TvCj7u6Pgjl2t/omrnSraVvRQfwAjsK/Bw4W2Yxu9d3MgcwB9V03eepyeOrUwU/N6Ukj/ak5iDw1xwBPzRt4Kk8ZwGIwlDwOxoOYa6Om6g/Eleqbbq0DVIv6tjpfexyOUJOoSTjiNkJH1PnwzJXUIbqd86II6kApN40q5EAs7WDRcEA4LMl5okzH0jb9GElYLhNlc49i90pS2sChEKBfHJEkJYorFINZsO3ncj2+0vwkUhw2wZaCg2QyCV2FsQlEQnZHYCS2sxyMUqIKw1BJ+SxdKxVhOlQnuRwGlq73+MO5qlp8RZF6zBIKeHGJ+qE3ELJgXHRFMaZyw36P+iH9fW4iYnpC/d2wYSwe/oQpksjdvNlSV2Z6EjfCKfWFJ01ldZbNYN3Dx95ktzO/QvloMkpxwCbZLMpUTLGyn8lOKWU1A6pNVpsJ6OUWZWMPAZfhPpMdUooxkmsMjHPKyJCmMddUoRT0j7dfgDGPC36AP+YXAHqn4JfY7aHMoWg080EkQgWiUSoYolqOH5WGQpn3yThvVa/Ca9C7QKJGlKIIx7ksx+2iLPSkjRwqhzEXSA+QYDGRLQMPd8DDFY4CXJFR0HANESgBOqdDJ0JdvBa3+Jckh1/esjvgsO7y+0efN/rKxXd/4zLm/fT3xQQRqojdTnWBh+UjmRYVA/sZ+cUAjJIzYJxmFTGn95JIhLmLmBGNwqdvh+6vgJ6bUPwE7zzRU82av+jO2e+jOSf5KK7KemTWDQkuSN1DJdn/QhY0Ffhv1ZiGuM9SZo38ZiC/kocr5DrPwZFP/zOMnBVmRjZXW2VTt0KxR2S6G+2naJO5Gn5wClqwl5s8WLPJgHWEMDgolaRUt8EfofCnsGV/zxmOMJ4oZ+D6PKBBM469QXezy1EuKkazUKqQWMayKAxW5oJ/EGcIEytLRNnUk3ZyyA2u4eQVC9aMhSPFB95gcRL+57AwTkixFYJrYCNlAtcg3sATx42E+USdzy7URsI+A+d0wCjmu3yJOnrFjLbV//po9YLJV+GPvaGR6i9HhrB/BJ47MsBs/nnmpj1fvfYAtX3Pd30vYeadK55+ZuXb0b1l/7zm/TfXAIYphOhF0PtidAFKFZO+IxY1kh5KqRzovmLK4X3dYtqondWsYHvSAoe8YB8rEKKzJhPxdc0KgRVscg5YYETQEJKySZC5pJxjk3kwJJEvAeUELhiXEprWCmBB/nAcc4aBQ4anJ+92mVb8x9EN5iKONuYtNTSPHD9aXd40vomqsAWZxrqmG62cv3cxzDWGJo6D3i+D3j8EvQ+hO8ES0vsSVtM/okyEX9DntNWO3BbYZdkWFmVnD/Q3zevzAs8rHAyFh0MuOCqVZA+fDnJoHBwERSUCRvFkaOjcEhgamRP2M6Z8N4yLHLTJIbC0hFhKJ2W7kGKCpeQeqy3FOT2aw8U0CsVrw8EAZ9C0XqNVnY8B1ecM2C/VJWL0Mje+7b0dNy26228wXzOquutTfB5GUyqvUWfiPVvLPLVJm9+Lf/v1e7e8vPp8akV105U/ff+DJ1Zf1rhaXeR/SL2T+MJcYOFBQGIE+gtK1RLrQxrvwGcJA8mIWkSCiA1aHjFdpF+tFtMRFjkILg2izPWkczjtjhxervD1COkajlyUa8R0hd7K4RUXoIV07ALknoSGXCqQIGQIFILXjQTQcmqAwsa8SBWBqkIgCAVsTSaqwFNkC8Vqk5romyxwE+LynOQmjyC7knKRTQYIqwXFl4B9xKYEamAfEuQ64gkOxhchkYSkCUOkGMeAUXwkXIEDoGaJUViD2iBpSJOYAzwm38VzhmJMH1T/pe5fu63pouZxktlcnVp4/aiaWONNy/01ft/aqy9c/OxMil474vwR1y3HBZdvfPD6HX/ASx79pH3BXfGxzRc24SntV3Zgz9wrqjhMGZ+9bemNGy+pbhhRs3n6+PHtat9L0aI/k4ikARj5NrsZ+VAQ/QilvGSGzBXTgj4EnCTnizKKpYP6cQnMkKWiHOgBd0sXc6gQzmEpVRwgUBaTmMEopQLFGrD5cOSWlJCuaPHt73+jK5obFK2gm1WCpiOMHOimUu6CAFE0pSB4XM+CRCtiUtbR4i4C20jsj+M6zQ1hSsL026+a7PtYZsYI9e/1M0ThMocp8xa1no9x1KvqvSqN5z5XbAuB3zXhsFDyXBP9eoHA+fom06a+7wgDlwEDiS/G0QsoFSZ2V8RkTky7dFMFMZ2jMU0uEtOUro9FFLGsyA+WxcR0OUvEEMt1ohzUApm74RYUJFqORCIx/H4HslrBr3UqmsS0VW8hXvEAKRkO5YOaJoB9QRO4bI5gJ+6IBNmfVDxWwZamMOcq0pgnuASbwhTA5RxBNhHapWhEfFYpj4E/xwnZ6nw2HmmRayw7ZR4nXDBgxWRC14IoKRvGkTuwawWeeEj97rf3fHBh5ciRlTa+6LGLd0wdFhpx9dwrZxiLHCZh33e353KO0ts+mD2Pppapn6u3ql98dE/X8MrKEeyFN22dha+beVPLwii1NcA1jGLz+bL7vcCsfg8vQcPQXpTKIz5eqHsxoFytoxzqx1Z2iGk3SxwTyxKZGdNRXeCQJEd5otUELnKC4WWBuLFLP3SJRN2hpcQAR1dUsB3AVq4wVE1c1CekKEceARXgtbs92mQVqgYnphkzgjsUt0PT/Sx6FJm1hFoIczUAdShjxEM58NSI1gBm6qhi50x80eGvnvqqa8aePV3/2B2fmbiI5ZLrpre+jg+HGzduHJcMe64Yu21MKfXof6qH1S3qp989ie1/wpcsHLNqeeXw+uiCWeKNfV9cvKdtww0Xbf/Phc3ztrYSZrYCci+zG1EBWodSBQQ3iz5LWAoIuSwwf6XscBqDMMo2bXYj6i/wih1gcuhHDl4xw5FBx8are2Gt4b2DxAtlCzhhLoQVZi2sgGAil7gghBe5luqTwgoDJzgCcR7b/TAlBO0xSJBifvplu/rJ+YH8ZzD6VLVcVV5UO66Wyi35APeyNT6vetWmD+9Se1auxOvxbXii95f4cYclANlXPyecwIpyTKGUhVhXMKD80eysXaHN2mEOlZEwnZe9ZMBB6scSRRfTXr0V1rU9j0PNcOQj9yDtI0qlbu6hja/kE3OtsoEHqVEKc47I9u79QqHdXrHfpm2LyRYu7w8aAnBYSrYpOOm72XdzkAMfTJKowJZMwRVyEEyiJpNBKCwutdkDwer+H3yqkwRFxeUFRhJcy6KaIxcAQ/ezKCdPD5VggiiFvDMMwVKdDzgHwp/vomvDAY6EGnX22mocIbGTrw7mg171EfUIrkos7vg7jv4js2ByaOntj/1l/7Liv79aOe0n6X+9gI79CS94+G8v7P38Dt+0xdj9wsPbnt1QH4teQU24fNeVz0xx7VyTuXnykktW3PTuxsd2okFeGkQx9GOU8pHxKNPHgxFJokS8lBfTZs03IUlND8vGh7WiXNyTrtK90EjAt+jtKl4pBfw9EhkNQr44OGaVEfTLbAO9KoU5NM04fGU1Gh5mHlzTaLERKSsbRqbXomKPjk02itTkTBcrbR6AkIzzUTwiSkZnnbIIZ2PLg+9veXBN2/zOaL3fW8oZmrZPGb+mwtuu3nkY0weWzvrvZwKjbr55fEWoCbPjEtQv1bVvbYqNWLkkMavQjSeLU3+/5vXXcD7ejHPiu9Q/vNLxi83TfjH7/imbN1x07Bh6CJzzWnoqHyEVhEwQ4rEyUDYKPQz5zo/oVZA1eNDFKJVL4jpei94Ip43ZOM4rytYemZVIom3XhK2/ZePTZi0lgswiZbaROcYMs6dSCLiZrUSsjLxTA4vPzaJImKNnGpKL1pKkgVgNhGlTI0k95jZFPJ3J4bGVt5Q4rJtorqqRpCJ9H+dDzvTG7u9dOfxdSMshv4Uc8k5kR116tiYzMQxyDDmO4tT9yDvzBb/uRyZeNncrguGIzHcf/PhR/TQrMyAnbLdiMxxRBN4oC93oAGsiI5v1jieYwYf98hIiZQWS2GtZC3DfhF3s9qiR6+3yepkdnDHq7n2aGeMuidJUmcXttlBldNSTk1Ezag6C8XgYz2C300kYDzNCx+p4A9mjV062iSU20bpN6Ac2yTT0nepWTGCT+bhNVhI5msxGOGeFLOGIbAObKJM557hNJBfLOdmm45mYKVuyIDZ5e7uINcyY3qfdYB+zw0u1uC2Zd4g5FPzkeKJ05h0L9PxydS81gj0M2Zmo5a9myORNosKQFNYiynSPYiYZI61ljCTg4iTFejxp90v6lhoxVr0Gbxk7Vv0DjsMmapgw/UgHfH8XfP9w7fv9SMaiwsL3GyE1zn4/p2Wk/d+Yzf79AdhSw9Vrxo7FcfUPsN2i7o1GuZ9PJ/xZou6lSY9jaA2SKTEt6eoBQWSe3gLNKDiuGdaedETXiQivGGEsbFK6kkNBEp1LqUqtJlBJDPNImnBEwAGUXJ5M3LkSNI0VMJvnCXIkKRfaFHtQ9wWiE6AUQi1sa4lCCCS8BlaRrAX+QeYGO1d/Cgf/6BHRx7smOiy3rfaXCl9ZHBNXyFHbT2aU57JO8Z57RCebWz7jJzb11/ltsdHll+LkVetNVJjDJYdw8tLy0bEpUcY0q2J8oFP9fG7FwqqqheVz1c87A+MrZpkYgsoD6h70LeT6pA6hVQwYHVnyq9cK7I5sPOb8Ngo/6suAaF8kAp+9FxBdBYjWEkQBR17HEbCN6a2wNlNqiMZF2dUDcXma0zEUpZSLIxi6rIBhRJI5nkz+/VJcB4gimJEUOkYQpcAnFS4fEI0Jsjcph21KiZhVl37QsqKSGEBVB5rgDVgTEdZQJZCu0pHsevwUSEblFTraVItAYFRfJDC25duzOGLn3HKCY8Vc7MziGJ1CoFdfJNATTEN4LZ2h/ohcaBrxDdkcI3nKSLCa1cjWoJUBMElZcnu0WAhpsZDiBqvtIJ0yRSJpGmw25MJ0kwfJv4LsWXsDpTCRaEEyiCoT02JkOnPrq+q7s7dWcHZb8Y4/48jse0ImVyF1e9eDn20qmpBc8dDhXw1DDLpRfYLbzn6NLEDdCWgSrkapSVjLKNKl+hRqlVIhOJOKkwm2TjuXqosTqa+rh3AOkfyjYGDCLZLSE6pK6y0VclMsPSEbFE0WZakn3cChYvis1EA+K9XBIFdJcgOvtGLiQOlyDvkYUkRNlbeSO8oJDVxSqrWcHLWWwlFIUqZkk7J3Dl08WNdp0Dmq+2Bs63s5+ukQL4chVZvkglSttZs6QCQv3JoVQP1o0qBYp4E4qKEe6NQqpArHNJPAu9wmI1IuLQD42aRcKsiGpFI1AY7KknJckBuSJ5ev7MeTP0iTDfH8gdyPVCFj+ISijObPA4kiFjD7F673tRx3GceIsE3dy5rXGri2yFulbcMn53LqQvxhXkHw3qO4eYWVnbb2d4tyw2zOAwZjc5X6elUz8zd1D7vFYjpyvVBmMXGbhCNfrLGZ7E0s24QdZmFNPbXdKWZ2UQ9SbpOTeq5k1Nyqvv+2mZ1wQ+Zu/L5aCuN4o/oktxy44EVRNBmHUMp4vLaTMmlVV1MODHkhGfJyMd3CIj9cadEGqKUVBmi4mI6zqACG0Sv2l7fskhwjMVZjlgxTtAg5TycDmzeoriXn8UoDjG+5RCodkGDKCV6pAWcYrZXa5UmSPJpPt+pZQquotJ3MBW3QlRLgQnE32l9cEgprwz3Q0oY6Ty+cyQ2C4nTBMCds+6vio1pI0lUj7K8ujDWS7Gp0K9w1GYa/pRwaVUl5uCBXw7DblJrR4IBa0S0PCGA/05ieQA58vEBlcA1Up1yDq1M/PvXQZgbzQp3vxJV7Lu7cOuKCePj8A9j4wkjffPVNXLTI4xhRTW364fjSYwfTwujyOHHZz7bPveFqanqw5rwVd+9e1z6lbJqasV+p9oIiNA9ShAVoId6JUgt/oAgLS8m4LSwDNhBxOEEAlIYyrZBZoxOnoYaIekMchrhZ40yjNnrpWXplonUWudw6jVT6F4ny9J50mz72bbxcT3gT45CT0coW9XqrjVeagBRV+m0TyD1zOEK61IQ5pFcTxpm0UL7zB7rSOVhXOjXadmZ15YJz05WFRFc6+3Wl8wRdWThIV+qnQ44QHz6Z6EmbINck5Qm2JrPYMKa5xdA6c1YHoVpnFXCpEPRGOIXeNDfo9GsR5A4QJ5s855xVx8H5Iv2VFYOWh8RrSRWPlPB0LmrTpLYiR8p3Q5aivvY/H0Odly0qr1/QumNORVCeHjwwe9t1TbP3L5rxznlLV8xcchN165BkiV645qf1o5fNGxZuZ2dNGD73/Zh5bcfOZuP4adPPrx82LNk5daPfu6VvnCZUoFQPIydEyVdDjGJHRSiBZLdWZ9XzFrJqIlvFtD2bvhSLsrdH5iVSd9EqrpJSctJ6ChpY/bANtI6vsWR+M7ZZFJvHVpPfamhriy6UsXnBmDELmvvWwwaaZJ6PoKeYDmYXTN5dSEaiwkFPGBFYBDGqQdSCRiBZQdfz4wYF8KzCGI6QLOTgPy54fp6eliC4guEKxx5RWMYIF1EKU6wWvSNM0QzLnZSR4Dh2mjDT0ftHprbvAvpnT+GeYfj189TL1GVaBAI9m9vfM4ieKb1n7Gl6RsHzaXg+LoKeocE9Y6oVijZqF1kWLnLQM0Rzp++ZCcfhP2bm9v6Rvq9vEVNLbVerZ+Od+M4OtRx69hB1CHLTx/SVKyMFMw6tVS8Ht7U4lNVKlXCU3Q2simnVLkgn8bWjZo2C//S48lGjyuEXvr1W7WTs9D2QM9yLUgaS3zp03aFJGzgzB9oGB5ECgwXUjIeHym5IuQKinKctLZNKsUmCVFfOzZYKCvUSf67esvFk1Zekxx79hIcn/OqP4IIQweXbwIkNWt2dTsolejTHF4E0sD6/vlyoGaGt6DsMQZhQYoIjJul7sr4fiTH2zp/PuvCdGSNDu0K337dhz66KUBuVeGrm1RvmfFgw5tCmx25m2MwlX7yymarL0JFxj8wmoy4d+5xpAOsDaBtK8USoDbGUn+DqYtEo6B3KlSDsDGoFEY+eyUP3C3Mq0oX6EaRAeksRwCarprOylSfYkzW1MQQcAgunaTMpnyhWAax1aOVeZ1KhTHBkBHtdJGIvLNZiVr+TJ2pDSiRCkOaI/tjseokyRqbFmJ9pUL9Z7rw/5P54Gn+HeemYZ5IjE5i/4UI6TCf2qjufD+eNef6GHfjqTNO2UTnFOIEfj5YymI/cAFZ3UkX0/dpKKjru4vT9oYw5EqG+zS6Z6vcZfnCf4f7QEbiPG7iPxEW7uTuzcdE4hM5hyncYaJKNkHyJt9clBtchhzLX4xz+zYlua3v7s3iPet9Mj6uhvp4yOPbim846z/fd6HGoRzv2nv/E7NmYwhb8ivUaLAkGhxbz7+auB3uK0XCI+c9DKDS4XkUmCTDQTmSQ117UCA3ZYHsdZFf9Ra2YxF3/0EUb549shThjjLgltpltXr39wEu3tDX/6qhwSvNZYbD59rKCyt9LxZ6q+fNvVo/smBssb59S7mvI9RVPwfblz+CcJ0MX/uIsOBz9zZi/NlzcPuyy4ZfUtENEeqP6lrE3O5ZxNB11nNN4kuVhn746fMZgPs4HA4KTj0lDGWV6WOOIDnVbB2zxlb1PnfoTrU/Dz9lHfUaXOuPSfXu68GOX7uu77Yd3442P4anq7Y+pSpbXV2exmHcuONjPNaQYCgz/dfZg4qzB7bGhhBFg+dSs5QE0Ay0Cy88emp9zFEWfgNjUMwXt9GtnNf2dwUhRY88Yw2eWDQUFdt0g4PpVblmWDQvOhQ00WSL2DazdVWB9kUlXguMrd6PwwMqds24ohJix5ZE/qt8+NjtUWxsyF1zdclF90FP+ZGvY5Csw515/2+IGqqC46+GGUdPOyoveC55Wf3PvpTMrA4HK4ZNm130XnzkxHMaP+5kyr81jLb4s7/MRWVYs01gxGy0ZGiv+DdPtQycGtXOoELx8DvxQ/3R2NJjVJ7GjOYtNDJBZCfPlv2H4uSciJyDF1g8VDNV+dil59IR5Vjg7IlT5ULwK/88JuDGoiuDG0TDXtqOFaDEgd5Zs7f/MKEjfqG9Ok7FRzUPF8I3B+PQl1D109FSJW+ahc+RS5td6DscMmn0SEFXNPIviSC5efzGrTl/h1swlmNAnmW/XV7vJYjcJY04jNPt+fOCpHU/Nbrz2ulmpa9vbJ5ZvrNvJjf3rYKPrCys7Ojq8lS+LnlMJjPrOM2qm++G1uPnb0VXT2tpamwyh4nb1y0uZ5YPDD9O4pbHpOzu2jFw8q4ZYPXXA6qmgsss1TzqtZf8OGUJnQoOtPaXdfX8bKi2YRYMhGnMcIuw9DRz0prMz5LPTI8YO4omIRqLxELOdmSlZyBLaeoouNSfOxfaBNWrscEkEzQh3apqwu6e9ovb+6a3g6PHyJ+mUJA42fvZ1962bFNi9U52w/eDOlbGtj56SJQVT3/vJlpU/XWIXxz73o6sWr59TwBwePDP9ddyCiatqXOdNUS+bftmC28eVTJwNNjdnbbZD3tqO5qOlEKOf1a5z19dTAMFFzmBypumswkq7ToZl/pkRyGwbiq5mvj8lTlMHcBqPZqFOdMmpcfp/8KMhQNX7+r/nRQuHgBg+Nyc6Ja0ArzjBi8OA14AvnRKvM+St7Dnjkik8bRa7fTAO686OA1t6mqy27WzGU8h37A0mlz2ISiGGQZg3UP4ASeSAEvmxuuwrUuTIob0ET15mpLXQz4qdDs2ZmNz196kfP3l04/2fLP+Zj+Indz75aqPBEK5LTInbp+Evdm1+7ZYNBy8IRG66Ib20nS5XX/xafUvF1977uy2Xbp794tYH9+K6SYnhY2vfe/M3qnHLs080frVg04PP/gxhdKH6AZfHPo6GwSDplYgRWIoLfsEBe+egM8SftTKF0wEtp3ady/OqAa93+oSMa8J0b7ZNWuyV2daxYDCY4CxHvk4ESYvt0fdHyxPw7CA8ewM8u5j8bQkm44/9vgSJbv3ZlwHgefYg0IMemXmEquGMmQeoB3HhPZ+3SruOThRY6srMNs7OPnFHbNr397JL+741Wq3mjFOa8rra6uA42kBfbEyqS9+eLJI3H/S33HlOe+MBo9vVFu4NrgXlkxqMxqyITq9G8sKkiXCMe4Pqm2ASLax68QauyPS10cnhLnqpyRPliszM9xNtufSGC4pMhl9x1r53Dbl2RGFebaG+hG8l9WFS28kuVx9vUV9qK9crte2loZDhiVDo+1Z9D70S1Rb6Nfg8KRM58rD+FwXZnSHbPf1PC7I7bcn1tfxX4Nuei0Zv8drL3C9Ho7gB2h5HGTPG5v2f3vGhEDNH3ZLxh0LUun2+iFD0JfPrUKj3IbyG+msolNm0r0R/176F7oVnh/UoW4sGSGnMQFO0tqYdrpX69d2WAO+so6unrL+7WZw4u6w4z1YwKb95zq1t63a31Ey8oLqstrDW3dDGtczcNWmcKbx67n71M3Vr5v2fr7htxh1wJrJ6KfXlR3jbo5f8iDx7FV7MPk9HEekISXhErD9az31iUgmGx5KXfyEcf75718q1r153xd4ZRSbWXfjMHauu//Parlk/9ufluouow3f/c84Dc26vnRdr1FpLppWuJW++rEIXs88zAT6CxiJ0jOUNZI+OEGao5C9C7uTDqAAh/Y2YvidPOO89fp70FXzlRXYm4kHD+qt3A3/u8WLo6PeRCDUvGqXmh8ggM4cA6aDeA+1zwMAJqP8viqrZwyhPZ0rEdPyVHqq6PN+hbsTrHPnlRnU7XmVUXwqL9FX0VWJYsPft69tn7//roEb9G+yD358xYe7OciNepW43wvfgdepGh7oXPkjPo+fZhbDYd0vfLeL/Ao92huUAAAAAAQAAAEwIwADRAHEADAACAAEAAgAWAAABAAHJAAMABAAAAEQARABEAEQAiADDAP0BbAG3AfUCFAJDAoYC5QNEA8kEjQUKBboGVwbEB40IIwgvCI4I6wj4CVUJhQmuCjkKVwrjCzAMNg05DosO1w8kD3EPoBAfEJoQrhDCESoRqBIuEqsTNRO2FEQU4BVtFegWgRb7F48YJxilGPMZMRloGXAZmxm7GfkaNxpoGnUagRqNGqkasRrSGvIAAAABAAAAAoUeC2yUzV8PPPUCnwgAAAAAAMheFaoAAAAAyF4VqvwA/kYMygZGAAAACAAAAAAAAAAAeJxjucQQxAAETDC8iuEFEEcDcQ7zEYYiNnOGVUDxDig9mcmSgYFFmCEYiDcBcRYQRwKxDRLbC0pHMikzrASqXwXSC8NAcwuAOJ/5OkMK4yyGJUB6DosSgyrbLoZWKHYGqWNpZlAHYlWQGSwJDCYseQxGLAwM8RxADFPLGQTX449EOwOxLpq4M5RtymLPoMBWwpDKtoRBGeymVQyTWRgYBYBm6zP/ZmAAihVDMczNYD7TLIZohhwAfaU9ewB4nGNgZGBgc/vnxsDAy/eH4ZsmzykGoAgK8AYAck4E6nicY2BkbmWcwMDCwMBawSrCwMBwAkIzdTEEMX7hYWZlYmRiZAeBBgaGxUB5BwYocCtKTQXyFNRfsrn9c2NgYHNj3AUU5p3EzMAAAP7iDLEAeJyN0E9Kw0AUBvDPpG6KUPpnUUqV+LBJNdgDiBZFlOoVSjeSbgRPUOjWg3gJF13E9BJdmEF0056gm5bx67zg2sAv3xt4M/MSACUAPp1A60+u9tzaR9mtS3hnniFgVcYx+hhihCnW3tyf+WnQEE8qUpOWhBLLQMZRFq2s5Z4AXdc7YW/meuuut8rejutN2Lu01v7Y3H7Y1L7Z3jbZvGyev5rmwvTMuQlN2zTzbf69eF08ucn++xzsXn8bGm4ecH793i71aZ+GhTaNCoc0oSkd0brQAbyM5qxDHjVTOGWmiv8KQZ12d8aAeAqXzIrCFbNKNZ1DWgrXTN4hPBs3zFjhljlQuGMmNGZ9D0SZwgNzSSvWj7/ICEuFAHicXVG7blNBEN0lDwNJiB9BcrQpZhlC471xC1KiXF2EI9uN5SjSLnLBjeMCf4ALpNRE+zVjp6GkoKVBkQskPoFPQGJmHRCi2dmZnXPOnFlSjlSjT7sDT71ZIIWnTdps+ZOQatcB7kg3jpoZaQffabuV0QPXH/o3GGxGa+59EygfeEt5yGjdCdSi/eB/mK/BcJ//ZX4Gg5Y2Wp46s5AeQmC+DbczepvRpps/0zesDjejkSHFNBU3f55K+d/SQ1evwat2Ro8cXIvIF6YBWjvsItD6ix6pgY+TWIJcXhprg4kpG64yEXy8mq5qqpYZtxx8S3a2HbSp0hp5gDPslFPwcHW5opC+HVFmaYhwFjslRoiY5FDIKedO9icFyieSMOZJUjpZNq01sIy8BgZ1eZqL+9lsatt1CMt7cQTfPzeWdPCRDXUxIsRuxFIAK4iEjKryDXWeuyYG5FL/z0CUgOX03b9OBNpwbCJ+lLX1rjBWCAb+2Hzmlz13q3KdF4Xuf6qqsUqnNF94OYceL3l6LAwHjQVvPh/6hQL1elwsNGgOBGPanxz80XrqiKu8Fz6y37gisOAAAAC4Af+FsAGNAEuwCFBYsQEBjlmxRgYrWCGwEFlLsBRSWCGwgFkdsAYrXFgAsAUgRbADK0QBsAYgRbADK0RZsBQr/mIAAAObBTwFvwBSAEoAUAAtADAAOQC8AKoAnQCRACgAowA8ADIAPwClADQANwCIAHsAiwCUAHQAjgBOAGsAWABMALAAoACDAEYAeACWALcAwQBEAHEAKgCsAAB4nF2PTU4CQRBGH4JGN65dkTkBMSQsjCsTo3v/9oDDOMkI2mIInsATcBIP4cJD+bqnjWgmU/2q6qs/YJ8ZXTq9A6Dxb7nDoV7LO/Jb5q78nrlHn03mXY74yLy3VfvJnC9utTVTFtxTUnAhzVnyIs/k4HtmZKqqTJmCa72g/5R0p0YuzUVtlXqcy696i5wdcux3Yt2aRybGG8Zcqa3URQ6s9CZpYpzxV1n8097pBXvXSR37Dxhpb3gw9rN5u+vKihip0vaxbmy89NrC/mvt0qrty+N9z86q1QYzTb7vtzpeOvgGmLtAIAAAeJxtz0lOw0AQBdD/k0BiYmeeGQI3SBo5wwaBEKw4A2CRBrcUnMh2wkVAjFvEHjbcig2wRBjT7Cip9X51qVpqJBDX1z4q+K8OokMkkEQKWZiwkEMeBRRRQjnaqaKGOhpoooVlrGAVa2hjHRvYwjYOcYRjOPjAOz7xygSTTOEa93jGCxe4yDQzNLjELE1azDHPAosssYwb3OEWb3hkhVU8sIYnXOKKdTbYZCs981RH7ArtpuF4k1COpXJ+bkTX7mi7WpGZeDJ0lT8ywotJHAI9srU9bV870A61O0b0hFRnbuiaoetLnYPsqZr/ZTOQc+npJt4Twtb20oE6V2PHt6bSn0pvpE5mURdP+79fEf29gXb4DalzW4kAAAAAAAIABAAC//8AA3icY2BkYGDgYYAAJgYWIKnOwMigyeAMJF0Z3IGkJ4M3AyMAFFIBywAAAQAAAAoADAAOAAAAAAAAeJwtjjFuwkAQRd/GVhQQMbZZEBVFQBRIEEggASKlpKSktyygACFkpeECHIUD5BQ5QO4Ds8sUqzf68//sxwBlekwJ8lOxx26L9Q67z34OWELZcr3iXGZTZDlPbvIv9FsjiuGfR1KOnLnwyx8lybboMuCDbxYsWfEq/goRz6IFMtV480wZesaug7AuKccGfU9L27PKi2fCg/wW8a7pkaYDaRLTZKZXxrrvaMo1nqh2vzBX56f2cY4v1Yx3VOViIn57A23XFhoAAAA=) format('woff');
}.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover {
  width: auto;
}

.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover.dcg-bottom {
  position: absolute;
  top: 43px;
  left: -3px;
}

.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover.dcg-bottom .dcg-arrow {
  left: 23px;
}

.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover.dcg-right {
  position: absolute;
  top: -40px;
  left: 40px;
}

.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover.dcg-right .dcg-arrow {
  top: 60px;
}

.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-popover-interior {
  padding: 4px 0;
}

.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item {
  cursor: pointer;
  font-size: 80%;
  text-align: left;
  white-space: nowrap;
  opacity: 0.5;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
  filter: alpha(opacity=50);
  padding: 8px;
  line-height: 0;
}

.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item i {
  margin: 0 8px 0 4px;
  font-size: 205%;
  vertical-align: middle;
  width: 30px;
  display: inline-block;
  text-align: right;
}

.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item i.dcg-icon-new-expression {
  font-size: 210%;
}

.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item i.dcg-icon-new-table {
  font-size: 200%;
}

.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item i.dcg-icon-new-folder {
  font-size: 190%;
}

.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item.dcg-action-newexpression {
  padding: 10px 12px 4px 8px;
}

.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item.dcg-hovered {
  opacity: 0.8;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
  filter: alpha(opacity=80);
}

.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item.dcg-depressed {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}

.dcg-calculator-api-container .dcg-add-expression-dropdown.dcg-popover .dcg-new-item.dcg-disabled {
  opacity: 0.25;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=25)";
  filter: alpha(opacity=25);
}.dcg-calculator-api-container .dcg-basic-list-container {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -o-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  overflow: auto;
  border-top: 1px solid rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list {
  width: 100%;
}

.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list.dcg-projector-mode {
  font-size: 150%;
}

.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list.dcg-projector-mode .dcg-braille-input input,
.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list.dcg-projector-mode .dcg-braille-evaluation input {
  font-size: 135%;
}

.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list-placeholder {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  border-right: 1px solid rgba(0,0,0,0.2);
  border-left: 1px solid rgba(0,0,0,0.2);
  position: relative;
  overflow: hidden;
}

.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list-placeholder .dcg-answer-hint {
  -webkit-transition: opacity 1s;
  -moz-transition: opacity 1s;
  -o-transition: opacity 1s;
  -ms-transition: opacity 1s;
  transition: opacity 1s;
  padding: 10px;
  width: 200px;
  opacity: 0.7;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";
  filter: alpha(opacity=70);
  position: absolute;
  bottom: 0;
  right: 0;
  text-align: right;
  padding-right: 30px;
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAADXCAQAAAC6oBfOAAAHuElEQVR42u2daYwVRRDHWwERjFEwuBpDvDDRGBNjNDF+0E/LsRxyS0BBVA4XAmogitHgArLct/zlRhBcELlkAbkkcskpEM6FRPAEFMUTwegzwO4Ku1X95tqd6X9e9cc33dO/Nz093VXVVcZkJCMZiVHwCHLwOK7mgqqPQvyFVHHpzQSWKlOGsaANK4eWwlAOtC0CWgoj3QerKoJdKPnuwxWpcP1cR5uuoqXwittoTS1oKXRyG66dFa6J23AdLWj7cRsv3FLXp5NnLXBwHS7XAuf8h+A1C1wr1+HyVbSvkeU63AQVbqH7S6+FKtybrqNlYT/vG9dERTvo/qDsrsKN4Nx9Xyrt3Yf7TIXLdh2tsYo21v3n9iLtTGkM3lPQdriPVhMnFLg+7sN1UQdlfd5BOcl9tIbqc2vtPlwvBW2VcV+wToHr6D5ac9qPgDGYpMDluo/WQEHbx/Dc+ilwPRjgjotohxjQXlKeW3cGuD0i2nYGtM6UxqpiuB0iWiEDmrYTaMwAV0SqVDAGeaTKIGOQraDlMTy34SLaXga0+rRbHGMwUUSbw4DWklYVpC65BjCg9RHRdhkGwVkR7kkGtFki2nAGtLa0iiBjcJDUiqNaTkczoDVjniW/EOEaMaANFNHeZkCTFa/rOYbkVt615CjetaS8B5jNMSSPCWhHOdDeF59bUwY0WTPJcJoK1US0jzmG5OcC2k8caODdlObxbkplffISjiG5k9QQbAymkho4jMEgXgOH7KI2mWNIniB1TzMGhQLaKQ402XbTgAGtvYg2kAEti9SJ9yLcDwLaCg60Tby77ZnikKzCgCafM23IgCYfLxrEgFaL8rh6MdxJ3l3bNl6T1GIB7UcOtHfFt+1G3umfYoncmHeJfLuINorjbftXQJvJgfa9gLaSA03ySNjGgbZSQDvGgTZbQPuTA0222VzHgCb7kt/NgJbH60WSzetFcqeINpgBrbaINoYBrYqINoVj+v9dQJvLgXZKQFvMgSYd3FvNgSYZ7DdxoG0gPdxsDNYKaAc40CTD73EOtKW8usgCAe00B5pkZfuVA02KWX6eA02OusWQk0NxRKvOgCa7xlzLgCZba2owoE3m1WkRD0hitGm875qMdg0DmhjbLrMaqaAuZSMvCud1fJCoNSSaYHlxJ/7A6yHbmiug/RYf2JUdmRiqtYUJ2q8J0ft7RaxA+C4eMCn+xJ4Q7a1OzOkajIs2sL0YTz4mtPEi2qLA7Unh+nbGg/aUElupZcD2pBgka+OaRvZFGRMLXwptrYkLLS/KmFiiv09clho1vF4gjzicS5R9DQNEtG8CtFRDbGlqfGhaeL2uvlu6OXG2bMyIJqKxMrjj9IhE62giGitTUrx+rFgvdurTSN7aeL2P8XQUmRYwWGzj/gj72QZj0cZvpQ1it2ZFoM+KKCkdcvFziSMiXvZTsWf4iMbKQa9I1AflvPb6+6n8bdgDP+JGNJLwHGI2vw7eq+eHXXJhjVD7cARgU8R+zffegJbgyrPTn5hvL6RrBa5Svrr+du9KVKwjnuufjDoUDq4XdWT+Y1GqGTI6evx/Q8+xZVrMsiSV9LuAU/6jrZ7q3iLWnRAY7C58Ys0KnRNeDeRRW6LErwjow4qHlHh4wdM2iWcHPR2MVKKO5AQCewIHrGAdgjTaTWks7TFkxRX+ngB9aISjVrCg0Z5wKFjaTWWSrhZgnWjDKgrhXK9Eoj4TSHPs2z8LL1jB9uCxcJ/J80Fy+Ipunj5P+FqzdqewEQ+EXdjIK/ivAqxBl0cwXkrKMtQNv2Zr5l9bgpphP9h4ywo2HzdFszeSoz6us9SoJ9YY6fmOQ61gs/xPR9qNWvhNlopWYWJpYaQVbHq0KoWN/nKdY3TwCGiW3OoVESJCTSzdQrl+dtAdtuKNV5GqPmXXPcXHNjStBhrVlL+kpAyrXEOHuOTCEeHKzWnuUBvzrGAVp8HEae+RX/CPcOU8a+t1scwK9mpFaiflCbnI8ybW8p7gPkWtW1K6VaziNUe5bd9yVw70N/XjUSVgfmBTin+4Am/aEozxM/WjgZKcoqS0rQyFuWbr7lzmuo+Ea84pbTa1YgXcvAaBKxRvXyZoA3Z59T9BOyvWgUo86qw+tyt2uvjFm9IBXa1g2/Fw5VpxdqUz4yp21XLeXmp66mKTF+41lStqh0qHjmJXK/P9U1PlFvsp4FZT+YIzYmfyS38fl37Voui7SkoBapk4RNlynCz9fUm6+REjrGAzUdXEI6pvSa5l/bg77YYnfueLi517R8/eq0T0LyitO8kKNsHEK2oK9+dVTcooq3YySaGosErzUVDSXrU0BtXT7MaGmCQIOinda44P5f016mCBFay/SYpgt9jBaaJq9TDqic66/5feJjmCHkon/xY/wFusYEnLaC/GpZDLXuuvyUsdjiGe0WwliSkD0Sg01pHEhgvGnFBgYU1IFYrWLATYFjxokiyYHxBsBe4wyRZ0CAS2AHVM8kU8gWEvc3GDcUHQ2yfYdOOOiL5YWnErpQv6egYbb1wTRVvCkM1LcS9kSJxU7oRp+dLPuCpWT8UUehp3RT3RcaF0MW6Loi1J4RnjuuA52mSpxmARZfR+c8nb+HK4zRQpAC/DewOrcRbbSOL2ZyQjGckIpfwHjUChXKuem7kAAAAASUVORK5CYII=") no-repeat top 20px right 5px;
  -webkit-background-size: 15px;
  -moz-background-size: 15px;
  background-size: 15px;
  -webkit-animation: dcg-fadePulse 0.3s;
  -moz-animation: dcg-fadePulse 0.3s;
  -o-animation: dcg-fadePulse 0.3s;
  -ms-animation: dcg-fadePulse 0.3s;
  animation: dcg-fadePulse 0.3s;
}

.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list-placeholder.dcg-has-multiple-exps .dcg-type-hint,
.dcg-calculator-api-container .dcg-basic-list-container .dcg-basic-list-placeholder.dcg-has-multiple-exps .dcg-answer-hint {
  opacity: 0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
  -webkit-transition: opacity 0.3s;
  -moz-transition: opacity 0.3s;
  -o-transition: opacity 0.3s;
  -ms-transition: opacity 0.3s;
  transition: opacity 0.3s;
}

.dcg-calculator-api-container .dcg-inverted-colors .dcg-settings-dropdown .dcg-popover-interior {
  -webkit-box-shadow: none;
  box-shadow: none;
}

@-webkit-keyframes dcg-fadePulse {
  0% {
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
    -webkit-transform: scale(0.7, 0.7);
    -moz-transform: scale(0.7, 0.7);
    -o-transform: scale(0.7, 0.7);
    -ms-transform: scale(0.7, 0.7);
    transform: scale(0.7, 0.7);
  }

  50% {
    -webkit-transform: scale(1.1, 1.1);
    -moz-transform: scale(1.1, 1.1);
    -o-transform: scale(1.1, 1.1);
    -ms-transform: scale(1.1, 1.1);
    transform: scale(1.1, 1.1);
  }

  100% {
    opacity: 1;
    -ms-filter: none;
    filter: none;
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -o-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}

@keyframes dcg-fadePulse {
  0% {
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
    -webkit-transform: scale(0.7, 0.7);
    -moz-transform: scale(0.7, 0.7);
    -o-transform: scale(0.7, 0.7);
    -ms-transform: scale(0.7, 0.7);
    transform: scale(0.7, 0.7);
  }

  50% {
    -webkit-transform: scale(1.1, 1.1);
    -moz-transform: scale(1.1, 1.1);
    -o-transform: scale(1.1, 1.1);
    -ms-transform: scale(1.1, 1.1);
    transform: scale(1.1, 1.1);
  }

  100% {
    opacity: 1;
    -ms-filter: none;
    filter: none;
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -o-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}.dcg-calculator-api-container .dcg-container .dcg-basic-expression .dcg-mq-container .dcg-mq-editable-field {
  width: 100%;
}

.dcg-calculator-api-container .dcg-container .dcg-basic-expression .dcg-mq-container .dcg-mq-editable-field:after {
  position: absolute;
  top: 1px;
  right: 0;
  bottom: 1px;
}

.dcg-calculator-api-container .dcg-basic-expression {
  min-height: 56px;
  border: 1px solid rgba(0,0,0,0.2);
  margin-top: -1px;
  position: relative;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
  width: 100%;
}

.dcg-calculator-api-container .dcg-basic-expression:not(:first-of-type) {
  border-top-color: transparent;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-focused {
  border-color: #6399cb;
  -webkit-box-shadow: inset 0 0 0 1px #6399cb;
  box-shadow: inset 0 0 0 1px #6399cb;
  z-index: 1;
}

.dcg-calculator-api-container .dcg-basic-expression:first-of-type {
  margin-top: 0;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io {
  -webkit-box-lines: multiple;
  -moz-box-lines: multiple;
  -o-box-lines: multiple;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  padding: 2px;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io input {
  background: transparent;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-mq-math-mode {
  padding: 0;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-input input,
.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation input,
.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-error input {
  border: none;
  width: 100%;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-input input {
  outline: none;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation input:focus {
  outline: 1px dotted #000;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-error input {
  border: 1px solid transparent;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-error input:focus {
  color: #000;
  outline: 1px dotted #000;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-input input,
.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation input {
  font-family: Abraham, serif;
  font-size: 163%;
  padding: 8px 8px 0;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-basic-expression-error {
  font-size: 140%;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-error {
  position: absolute;
  top: -0.8em;
  right: 0;
  width: 100%;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-error textarea {
  width: 100%;
  text-align: right;
  color: #666;
  padding-right: 5px;
  font-size: 80%;
  border: none;
  resize: none;
  -webkit-animation: dcg-delayed-fadeIn 1s;
  -moz-animation: dcg-delayed-fadeIn 1s;
  -o-animation: dcg-delayed-fadeIn 1s;
  -ms-animation: dcg-delayed-fadeIn 1s;
  animation: dcg-delayed-fadeIn 1s;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-error textarea:focus {
  outline: dotted 1px #666;
  color: #000;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-input,
.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation-container,
.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-mathquill-container,
.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-output-container {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1 1 40%;
  -ms-flex: 1 1 40%;
  flex: 1 1 40%;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation-container {
  position: relative;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation input,
.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-output-container,
.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-braille-error {
  text-align: right;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-mathquill-container {
  padding: 8px;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-mathquill-container,
.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-output-container {
  font-size: 90%;
  color: #666;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-output-container {
  padding: 8px;
}

.dcg-calculator-api-container .dcg-basic-expression.dcg-braille-io .dcg-exp-output-container .dcg-basic-expression-value {
  padding-right: 8px;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-exp-mathquill-container {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  overflow: hidden;
  margin-right: 1px;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-exp-mathquill-container .dcg-mq-container {
  width: 100%;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-math-mode {
  padding: 12px 5px 12px 15px;
  outline: none !important;
  -webkit-box-shadow: none !important;
  box-shadow: none !important;
  border: 0;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-error {
  color: #e66b3c;
  font-size: 130%;
  cursor: pointer;
  -webkit-animation: dcg-delayed-fadeIn 1s;
  -moz-animation: dcg-delayed-fadeIn 1s;
  -o-animation: dcg-delayed-fadeIn 1s;
  -ms-animation: dcg-delayed-fadeIn 1s;
  animation: dcg-delayed-fadeIn 1s;
  margin-right: 15px;
  height: 24px;
  line-height: 24px;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value {
  -webkit-animation: dcg-fadeIn 0.5s;
  -moz-animation: dcg-fadeIn 0.5s;
  -o-animation: dcg-fadeIn 0.5s;
  -ms-animation: dcg-fadeIn 0.5s;
  animation: dcg-fadeIn 0.5s;
  padding-right: 5px;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value.dcg-basic-evaluation-gray .dcg-static-mathquill-view {
  color: #666;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle {
  font-size: 20px;
  display: inline-block;
  width: 29px;
  height: 29px;
  border: 2px solid #000;
  opacity: 0.5;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
  filter: alpha(opacity=50);
  color: #000;
  text-align: center;
  border-radius: 50%;
  margin: 0 5px;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle i {
  position: relative;
  top: 2px;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-hovered {
  opacity: 0.7;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";
  filter: alpha(opacity=70);
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-depressed {
  opacity: 0.9;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";
  filter: alpha(opacity=90);
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-selected {
  background: #000;
  opacity: 0.5;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
  filter: alpha(opacity=50);
  color: #fff;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-selected.dcg-hovered {
  opacity: 0.7;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";
  filter: alpha(opacity=70);
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-selected.dcg-depressed {
  opacity: 0.9;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";
  filter: alpha(opacity=90);
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-slider-container {
  height: 40px;
  width: 250px;
  max-width: 100%;
  padding-right: 3px;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-ans {
  border: 2px solid #4781b9;
  color: #4781b9;
  background-color: rgba(71,129,185,0.15);
  padding: 0.2em 0.4em;
  display: inline-block;
  border-radius: 4px;
  margin-right: 1px;
  margin-bottom: 2px;
  min-width: 30px;
  text-align: center;
  -o-text-overflow: ellipsis;
  text-overflow: ellipsis;
  vertical-align: middle;
  position: relative;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-ans sup {
  font-size: 80%;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-ans:after {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  content: 'ans';
  position: absolute;
  bottom: -0.5em;
  left: 50%;
  font-size: 60%;
  width: 1.9em;
  overflow: hidden;
  text-align: center;
  margin-left: -0.95em;
  color: #4781b9;
  border: 1px solid #4781b9;
  background: #fff;
  padding: 0;
  border-radius: 3px;
  height: 1em;
  line-height: 0.9em;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-ans.dcg-invalid {
  border-color: #e66b3c;
  background: rgba(230,107,60,0.1);
  color: #e66b3c;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-ans.dcg-invalid i {
  font-style: normal;
  font-size: 80%;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-ans.dcg-invalid:after {
  color: #e66b3c;
  border-color: #e66b3c;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-selection .dcg-mq-ans {
  background: #4781b9;
  color: #fff;
}

.dcg-calculator-api-container .dcg-basic-expression .dcg-mq-selection .dcg-mq-ans.dcg-invalid {
  background: #e66b3c;
}

.dcg-calculator-api-container .dcg-calc-basic-main.dcg-projector-mode .dcg-mq-ans:after {
  position: absolute;
  bottom: -0.3em;
  left: 50%;
  height: 0.9em;
  line-height: 0.8em;
}

.dcg-calculator-api-container .dcg-braille-toggle {
  display: inline-block;
  float: right;
}

.dcg-calculator-api-container .dcg-braille-toggle .dcg-buttons {
  float: right;
}

.dcg-calculator-api-container .dcg-toggle-button {
  padding: 8px;
  border: 1px solid #ccc;
  color: #444;
  position: relative;
  top: -3px;
  cursor: pointer;
  width: 90px;
  text-align: center;
  float: left;
}

.dcg-calculator-api-container .dcg-toggle-button:last-of-type {
  border-radius: 0px 6px 6px 0px;
}

.dcg-calculator-api-container .dcg-toggle-button:first-of-type {
  border-radius: 6px 0px 0px 6px;
}

.dcg-calculator-api-container .dcg-toggle-button.dcg-hovered {
  background: #f4f4f4;
}

.dcg-calculator-api-container .dcg-toggle-button.dcg-depressed {
  -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
  box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
}

.dcg-calculator-api-container .dcg-toggle-button.dcg-selected {
  background: #4781b9;
  color: #fff;
  border-color: transparent;
}

.dcg-calculator-api-container .dcg-calc-basic-main.dcg-projector-mode .dcg-basic-expression.dcg-braille-io .dcg-braille-error {
  font-size: 90%;
}

@-webkit-keyframes dcg-delayed-fadeIn {
  0% {
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  80% {
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  100% {
    opacity: 1;
    -ms-filter: none;
    filter: none;
  }
}

@keyframes dcg-delayed-fadeIn {
  0% {
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  80% {
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  100% {
    opacity: 1;
    -ms-filter: none;
    filter: none;
  }
}

@-webkit-keyframes dcg-fadeIn {
  0% {
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  100% {
    opacity: 1;
    -ms-filter: none;
    filter: none;
  }
}

@keyframes dcg-fadeIn {
  0% {
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  100% {
    opacity: 1;
    -ms-filter: none;
    filter: none;
  }
}.dcg-calculator-api-container table.dcg-braille-examples-table {
  border-collapse: collapse;
}

.dcg-calculator-api-container table.dcg-braille-examples-table tr:not(:last-of-type) {
  border-bottom: 1px solid rgba(0,0,0,0.2);
}

.dcg-calculator-api-container table.dcg-braille-examples-table th {
  font-family: "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
  font-weight: 500;
}

.dcg-calculator-api-container table.dcg-braille-examples-table th,
.dcg-calculator-api-container table.dcg-braille-examples-table td {
  padding: 5px 8px;
}

.dcg-calculator-api-container table.dcg-braille-examples-table th:not(:last-of-type),
.dcg-calculator-api-container table.dcg-braille-examples-table td:not(:last-of-type) {
  border-right: 1px solid rgba(0,0,0,0.2);
}

.dcg-calculator-api-container table.dcg-braille-examples-table th:not(:first-of-type),
.dcg-calculator-api-container table.dcg-braille-examples-table td:not(:first-of-type) {
  text-align: center;
}

.dcg-calculator-api-container table.dcg-braille-examples-table td {
  height: 45px;
}

.dcg-calculator-api-container table.dcg-braille-examples-table .dcg-braille-font {
  font-family: Abraham;
  font-size: 110%;
}

.dcg-calculator-api-container table.dcg-braille-examples-table .dcg-key-press {
  border: 1px solid rgba(0,0,0,0.2);
  background: rgba(255,255,255,0.6);
  border-radius: 3px;
  width: 25px;
  height: 25px;
  line-height: 23px;
  text-align: center;
  display: inline-block;
  margin-right: 2px;
  vertical-align: middle;
}.dcg-calculator-api-container .dcg-braille-io-keypad-container {
  padding-top: 4px;
}

.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad {
  color: #666;
  border-top: 1px solid rgba(0,0,0,0.2);
  padding: 10px;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
}

.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad a {
  color: #4781b9;
}

.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad a.dcg-hovered {
  color: #004f9b;
}

.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-examples-table-container {
  color: #444;
  padding: 10px 10px 0;
}

.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-examples-table-container .dcg-more-examples-link {
  text-align: center;
}

.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-examples-table-container table {
  margin-bottom: 10px;
  border: 1px solid rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-examples-table-container table th {
  background: rgba(0,0,0,0.07);
}

.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-description {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  padding: 10px 0 10px 10px;
}

.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-title {
  font-size: 130%;
  color: #333;
}

.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-info-text {
  font-size: 95%;
  margin-bottom: 10px;
  line-height: 1.5em;
}

.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-description .dcg-blue-btn {
  color: #fff;
  padding: 8px 12px;
  display: inline-block;
  border-radius: 6px;
  background: #4781b9;
  border: 1px solid #3f73a6;
  -webkit-box-shadow: inset 0 1px rgba(255,255,255,0.1), inset 0 -1px rgba(0,0,0,0.05);
  box-shadow: inset 0 1px rgba(255,255,255,0.1), inset 0 -1px rgba(0,0,0,0.05);
}

.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-description .dcg-blue-btn.dcg-hovered:not(.dcg-disabled) {
  background: #3f73a6;
  -webkit-transition: background 0.2s;
  -moz-transition: background 0.2s;
  -o-transition: background 0.2s;
  -ms-transition: background 0.2s;
  transition: background 0.2s;
}

.dcg-calculator-api-container .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-description .dcg-blue-btn.dcg-depressed:not(.dcg-disabled) {
  background: #35608a;
  border: 1px solid #35608a;
  -webkit-box-shadow: none;
  box-shadow: none;
}

.dcg-calculator-api-container .dcg-scientific-calculator .dcg-braille-io-keypad .dcg-braille-description,
.dcg-calculator-api-container .dcg-four-function-calculator .dcg-braille-io-keypad .dcg-braille-description {
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -o-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
}

.dcg-calculator-api-container .dcg-scientific-calculator .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-title,
.dcg-calculator-api-container .dcg-four-function-calculator .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-title {
  margin-bottom: 10px;
}

.dcg-calculator-api-container .dcg-scientific-calculator .dcg-braille-io-keypad .dcg-braille-description .dcg-blue-btn,
.dcg-calculator-api-container .dcg-four-function-calculator .dcg-braille-io-keypad .dcg-braille-description .dcg-blue-btn {
  margin-right: auto;
}

.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad {
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -o-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  text-align: center;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}

.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description {
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;
  -o-box-orient: horizontal;
  -webkit-box-lines: multiple;
  -moz-box-lines: multiple;
  -o-box-lines: multiple;
  -webkit-flex-flow: row wrap;
  -ms-flex-flow: row wrap;
  flex-flow: row wrap;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -o-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}

.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-title {
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description .dcg-blue-btn {
  -webkit-box-ordinal-group: 1;
  -moz-box-ordinal-group: 1;
  -o-box-ordinal-group: 1;
  -ms-flex-order: 1;
  -webkit-order: 1;
  order: 1;
  margin-left: 10px;
  margin-right: 0;
}

.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-info-text {
  -webkit-box-ordinal-group: 2;
  -moz-box-ordinal-group: 2;
  -o-box-ordinal-group: 2;
  -ms-flex-order: 2;
  -webkit-order: 2;
  order: 2;
  width: 100%;
  margin: 5px 0 0;
}

.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container th,
.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container td {
  padding: 2px 5px;
}

.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container tr:nth-of-type(3) {
  display: none;
}

.dcg-calculator-api-container .dcg-short.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad {
  height: 170px;
  padding: 3px;
}

.dcg-calculator-api-container .dcg-short.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container table {
  margin-bottom: 5px;
}

.dcg-calculator-api-container .dcg-short.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container tr:last-of-type {
  display: none;
}

.dcg-calculator-api-container .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad {
  font-size: 90%;
}

.dcg-calculator-api-container .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-more-examples-link {
  display: none;
}

.dcg-calculator-api-container .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container {
  padding-top: 0;
}

.dcg-calculator-api-container .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container td {
  height: 40px;
}.dcg-calculator-api-container .dcg-basic-settings-container {
  position: relative;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  -ms-box-flex: 1;
  box-flex: 1;
  -webkit-flex-grow: 1;
  flex-grow: 1;
}

.dcg-calculator-api-container .dcg-basic-settings-container .dcg-keypad-control-btn.dcg-selected {
  color: #333;
  background: rgba(0,0,0,0.1);
}.dcg-aria-alert {
  position: absolute;
  left: -1000px;
  top: -1000px;
  width: 1px;
  height: 1px;
  text-align: left;
  overflow: hidden;
}

.dcg-calculator-api-container .dcg-calc-basic-main-wrapper {
  height: 100%;
  width: 100%;
  position: relative;
}

.dcg-calculator-api-container .dcg-calc-basic-main {
  height: 100%;
  width: 100%;
  background: #fff;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -o-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-box-lines: single;
  -moz-box-lines: single;
  -o-box-lines: single;
  -webkit-flex-wrap: nowrap;
  -ms-flex-wrap: nowrap;
  flex-wrap: nowrap;
  border-radius: 2px;
  font-family: Arial, sans-serif;
}

.dcg-calculator-api-container .dcg-calc-basic-main * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.dcg-calculator-api-container .dcg-calc-basic-main.dcg-no-hyperlinks a[target="_blank"] {
  display: none !important;
}.dcg-calculator-api-container .dcg-settings-dropdown {
  font-size: 95%;
  color: #333;
  width: 280px;
  position: absolute;
  bottom: 50px;
  right: 5px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-settings-menu-option {
  cursor: pointer;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-settings-menu-option:not(.dcg-reverse-contrast) {
  margin-bottom: 0.5em;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-checkbox-box {
  display: inline-block;
  position: relative;
  top: 2px;
  height: 15px;
  width: 15px;
  border-radius: 3px;
  color: #127a3d;
  border: 1px solid rgba(0,0,0,0.2);
  margin-right: 10px;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-checkbox-box .dcg-icon-check {
  position: relative;
  top: -2px;
  left: 1px;
  text-shadow: -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 1px 1px 0 #fff;
  display: none;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-checkbox-container.dcg-checked .dcg-icon-check {
  display: block;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-checkbox-container.dcg-hovered .dcg-checkbox-box {
  border-color: rgba(0,0,0,0.4);
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-checkbox-container.dcg-depressed .dcg-checkbox-box {
  border-color: rgba(0,0,0,0.6);
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-braille-container .dcg-braille-options-buttons {
  margin-top: 5px;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-braille-container .dcg-braille-options-buttons .dcg-braille-option {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  padding: 5px 0;
  text-align: center;
  border: 1px solid rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-braille-container .dcg-braille-options-buttons .dcg-braille-option:not(:last-of-type) {
  border-right: 0;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-braille-container .dcg-braille-options-buttons .dcg-braille-option.dcg-selected {
  background: rgba(0,0,0,0.7);
  color: #fff;
  border-color: rgba(0,0,0,0.7);
  z-index: 1;
  position: relative;
  margin-right: -1px;
  padding-right: 1px;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-braille-container .dcg-braille-options-buttons .dcg-braille-option:first-of-type {
  border-radius: 3px 0 0 3px;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-braille-container .dcg-braille-options-buttons .dcg-braille-option:last-of-type {
  border-radius: 0 3px 3px 0;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-braille-container .dcg-braille-options-buttons .dcg-braille-option.dcg-hovered:not(.dcg-selected) {
  background: rgba(0,0,0,0.05);
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-braille-container .dcg-braille-options-buttons .dcg-braille-option.dcg-depressed:not(.dcg-selected) {
  -webkit-box-shadow: inset 0 0 3px rgba(0,0,0,0.2);
  box-shadow: inset 0 0 3px rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-modern-btn {
  border-radius: 3px;
  display: block;
  padding: 8px;
  text-align: center;
  cursor: pointer;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-modern-btn.dcg-active {
  border: 1px solid #127a3d;
  background-color: #127a3d;
  color: #fff;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-modern-btn.dcg-active.dcg-hovered {
  border-color: rgba(13,84,42,0.7);
  -webkit-box-shadow: inset 0 0 0 1px rgba(13,84,42,0.7);
  box-shadow: inset 0 0 0 1px rgba(13,84,42,0.7);
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-modern-btn.dcg-active.dcg-depressed {
  border-color: #0d542a;
  -webkit-box-shadow: inset 0 0 0 1px #0d542a;
  box-shadow: inset 0 0 0 1px #0d542a;
  background: #106d36;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-modern-btn:not(.dcg-active) {
  border: 1px solid rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-modern-btn:not(.dcg-active).dcg-hovered {
  border-color: rgba(0,0,0,0.15);
  -webkit-box-shadow: inset 0 0 0 1px rgba(0,0,0,0.15);
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.15);
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-modern-btn:not(.dcg-active).dcg-depressed {
  border-color: rgba(0,0,0,0.2);
  -webkit-box-shadow: inset 0 0 0 1px rgba(0,0,0,0.2);
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.2);
  background: rgba(0,0,0,0.05);
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-download-button.dcg-braille-equations {
  color: #127a3d;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  margin-bottom: 10px;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-download-button.dcg-braille-equations span {
  text-decoration: underline;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-download-button.dcg-braille-equations.dcg-hovered:not(.dcg-disabled) {
  color: #0d542a;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-download-button.dcg-braille-equations.dcg-depressed:not(.dcg-disabled) {
  color: #063c1c;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-download-button.dcg-braille-equations i {
  margin-right: 10px;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-six-key-info {
  display: inline-block;
  color: #999;
  text-decoration: none;
  margin-left: 0.5em;
  font-size: 85%;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-six-key-info.dcg-hovered {
  color: #666;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-six-key-info.dcg-active {
  color: #333;
}

.dcg-calculator-api-container .dcg-settings-dropdown .dcg-six-key-checkbox {
  display: inline-block;
  margin-top: 5px;
}

.dcg-calculator-api-container .dcg-settings-dropdown.dcg-popover .dcg-popover-interior {
  padding: 15px;
}

.dcg-calculator-api-container .dcg-settings-dropdown.dcg-popover .dcg-popover-interior:after {
  content: "";
  position: absolute;
  bottom: -7px;
  right: 18px;
  border-width: 7px;
  border-bottom-width: 0;
  border-style: solid;
  border-color: #fff transparent transparent;
  line-height: 0;
}

.dcg-calculator-api-container .dcg-settings-dropdown.dcg-popover .dcg-popover-interior:before {
  content: "";
  position: absolute;
  bottom: -8px;
  right: 17px;
  border-width: 8px;
  border-bottom-width: 0;
  border-style: solid;
  border-color: #ccc transparent transparent;
  line-height: 0;
}

.dcg-calculator-api-container .dcg-settings-dropdown.dcg-point-left {
  position: absolute;
  top: -30px;
  left: -280px;
}

.dcg-calculator-api-container .dcg-settings-dropdown.dcg-point-left.dcg-popover .dcg-popover-interior:after {
  content: "";
  position: absolute;
  right: -7px;
  top: 43px;
  border-width: 7px;
  border-right-width: 0;
  border-style: solid;
  border-color: transparent transparent transparent #fff;
  line-height: 0;
}

.dcg-calculator-api-container .dcg-settings-dropdown.dcg-point-left.dcg-popover .dcg-popover-interior:before {
  content: "";
  position: absolute;
  right: -8px;
  top: 42px;
  border-width: 8px;
  border-right-width: 0;
  border-style: solid;
  border-color: transparent transparent transparent #ccc;
  line-height: 0;
}

.dcg-calculator-api-container .dcg-has-background-color .dcg-settings-dropdown.dcg-popover .dcg-popover-interior:after {
  border-top-color: rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-has-background-color .dcg-settings-dropdown.dcg-popover .dcg-popover-interior:before {
  display: none;
}

.dcg-calculator-api-container .dcg-scientific-calculator.dcg-narrow .dcg-settings-dropdown.dcg-popover:not(.dcg-point-left) .dcg-popover-interior:after {
  right: 10px;
}

.dcg-calculator-api-container .dcg-scientific-calculator.dcg-narrow .dcg-settings-dropdown.dcg-popover:not(.dcg-point-left) .dcg-popover-interior:before {
  right: 9px;
}

.dcg-calculator-api-container .dcg-version-number {
  color: #666;
  font-size: 90%;
  text-align: center;
  margin-top: 15px;
}.dcg-calculator-api-container .dcg-btn-blue,
.dcg-calculator-api-container .dcg-btn-red,
.dcg-calculator-api-container .dcg-btn-light-gray,
.dcg-calculator-api-container .dcg-btn-green {
  border: none;
  -webkit-appearance: none;
  cursor: pointer;
  white-space: nowrap;
  text-decoration: none;
  display: inline-block;
  border-radius: 4px;
  padding: 0 20px;
  font: inherit;
}

.dcg-calculator-api-container .dcg-btn-red,
.dcg-calculator-api-container .dcg-btn-blue,
.dcg-calculator-api-container .dcg-btn-green {
  color: #fff;
  -webkit-box-shadow: inset 0 1px rgba(255,255,255,0.15), inset 0 -1px rgba(0,0,0,0.1);
  box-shadow: inset 0 1px rgba(255,255,255,0.15), inset 0 -1px rgba(0,0,0,0.1);
}

.dcg-calculator-api-container .dcg-btn-red {
  background: #d95f5b;
  border-color: rgba(0,0,0,0.15);
}

.dcg-calculator-api-container .dcg-btn-red.dcg-hovered {
  background: #cb605d;
}

.dcg-calculator-api-container .dcg-btn-red.dcg-depressed {
  background: #c15b58;
  -webkit-box-shadow: none;
  box-shadow: none;
}

.dcg-calculator-api-container .dcg-btn-blue {
  background: #528fc9;
  border-color: rgba(0,0,0,0.15);
}

.dcg-calculator-api-container .dcg-btn-blue.dcg-hovered {
  background: #4e88bf;
}

.dcg-calculator-api-container .dcg-btn-blue.dcg-depressed {
  background: #4a81b4;
  -webkit-box-shadow: none;
  box-shadow: none;
}

.dcg-calculator-api-container .dcg-btn-light-gray {
  -webkit-box-shadow: inset 0 1px rgba(255,255,255,0.25), inset 0 -1px rgba(0,0,0,0.02);
  box-shadow: inset 0 1px rgba(255,255,255,0.25), inset 0 -1px rgba(0,0,0,0.02);
  background: -webkit-linear-gradient(#f6f6f6, #f0f0f0);
  background: -moz-linear-gradient(#f6f6f6, #f0f0f0);
  background: -o-linear-gradient(#f6f6f6, #f0f0f0);
  background: -ms-linear-gradient(#f6f6f6, #f0f0f0);
  background: linear-gradient(#f6f6f6, #f0f0f0);
  border: 1px solid rgba(0,0,0,0.1);
}

.dcg-calculator-api-container .dcg-btn-light-gray.dcg-hovered {
  background: #ededed;
  border: 1px solid rgba(0,0,0,0.13);
}

.dcg-calculator-api-container .dcg-btn-light-gray.dcg-depressed {
  background: #e0e0e0;
  border: 1px solid rgba(0,0,0,0.15);
  -webkit-box-shadow: none;
  box-shadow: none;
}

.dcg-calculator-api-container .dcg-btn-green {
  background: #1aad57;
}

.dcg-calculator-api-container .dcg-btn-green.dcg-hovered {
  background: #179d4f;
}

.dcg-calculator-api-container .dcg-btn-green.dcg-depressed,
.dcg-calculator-api-container .dcg-btn-green.dcg-active {
  background: #148e47;
  -webkit-box-shadow: none;
  box-shadow: none;
}

.dcg-calculator-api-container .dcg-pull-right {
  float: right;
}

.dcg-calculator-api-container .dcg-pull-left {
  float: left;
}

.dcg-calculator-api-container .dcg-inverted-colors .dcg-btn-red,
.dcg-calculator-api-container .dcg-inverted-colors .dcg-btn-blue,
.dcg-calculator-api-container .dcg-inverted-colors .dcg-btn-green {
  -webkit-box-shadow: inset 0 -1px rgba(255,255,255,0.15), inset 0 1px rgba(0,0,0,0.1);
  box-shadow: inset 0 -1px rgba(255,255,255,0.15), inset 0 1px rgba(0,0,0,0.1);
}.dcg-aria-alert,
.dcg-calculator-api-container .dcg-offscreen-element {
  position: absolute;
  left: -1000px;
  top: -1000px;
  width: 1px;
  height: 1px;
  text-align: left;
  overflow: hidden;
}

.dcg-calculator-api-container .dcg-container.dcg-default-border {
  border: 1px solid rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-container a,
.dcg-calculator-api-container .dcg-container a:hover {
  text-decoration: none;
}

.dcg-calculator-api-container .dcg-container.dcg-no-graphpaper .dcg-grapher,
.dcg-calculator-api-container .dcg-container.dcg-no-graphpaper .dcg-resize-list-btn,
.dcg-calculator-api-container .dcg-container.dcg-no-graphpaper .dcg-graph-icon {
  display: none;
}

.dcg-calculator-api-container .dcg-container .dcg-grapher.dcg-scale-horizontal {
  cursor: ew-resize;
}

.dcg-calculator-api-container .dcg-container .dcg-grapher.dcg-scale-vertical {
  cursor: ns-resize;
}

.dcg-calculator-api-container .dcg-container .dcg-grapher.dcg-scale-both {
  cursor: nesw-resize;
}

.dcg-calculator-api-container .dcg-graph-outer {
  overflow: hidden;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

.dcg-calculator-api-container .dcg-container.dcg-no-expression-topbar .dcg-expression-top-bar {
  display: none;
}

.dcg-calculator-api-container .dcg-container.dcg-no-expression-topbar .dcg-exppanel-container {
  padding-top: 0;
}

.dcg-calculator-api-container .dcg-container.dcg-no-hyperlinks a[target="_blank"] {
  display: none !important;
}

.dcg-calculator-api-container .dcg-container.dcg-inverted-colors {
  filter: invert(100%);
}

.dcg-calculator-api-container .dcg-container {
  width: 100%;
  height: 100%;
  position: relative;
  background: #fff;
  z-index: 0;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  overflow: hidden;
  font-family: arial, sans-serif;
  font-size: 16px;
  color: #000;
}

.dcg-calculator-api-container .dcg-container.dcg-is-interactive {
  touch-action: none;
  -ms-touch-action: none;
}

.dcg-calculator-api-container .dcg-container.dcg-is-interactive .dcg-grapher {
  touch-action: none;
  -ms-touch-action: none;
}

.dcg-calculator-api-container .dcg-container * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.dcg-calculator-api-container .dcg-container .dcg-text-selectable {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

.dcg-calculator-api-container .dcg-expressions-branding {
  position: absolute;
  bottom: 0;
  left: 50%;
}

.dcg-calculator-api-container .dcg-graphpaper-branding {
  position: absolute;
  bottom: 0;
  right: -8px;
  display: none;
  z-index: 21;
}

.dcg-calculator-api-container .dcg-fullscreen .dcg-graphpaper-branding {
  display: block;
  opacity: 1;
  -ms-filter: none;
  filter: none;
}

.dcg-calculator-api-container .dcg-fullscreen .dcg-graphpaper-branding .dcg-powered-by,
.dcg-calculator-api-container .dcg-fullscreen .dcg-graphpaper-branding i {
  position: relative;
  text-shadow: -1px -1px 0 #fff, -1px 1px 0 #fff, 1px -1px 0 #fff, 1px 1px 0 #fff, 0 -1px 0 #fff, 0 1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff;
}

.dcg-calculator-api-container .dcg-expressions-branding,
.dcg-calculator-api-container .dcg-graphpaper-branding {
  text-align: center;
  font-size: 75%;
  width: 110px;
  margin-left: -55px;
  text-decoration: none;
  line-height: 1em;
  height: 45px;
  overflow: hidden;
}

.dcg-calculator-api-container .dcg-expressions-branding.dcg-unclickable,
.dcg-calculator-api-container .dcg-graphpaper-branding.dcg-unclickable {
  pointer-events: none;
  z-index: -1;
}

.dcg-calculator-api-container .dcg-expressions-branding .dcg-powered-by,
.dcg-calculator-api-container .dcg-graphpaper-branding .dcg-powered-by {
  color: rgba(0,0,0,0.2);
  text-decoration: none;
  -webkit-transition: color 0.3s;
  -moz-transition: color 0.3s;
  -o-transition: color 0.3s;
  -ms-transition: color 0.3s;
  transition: color 0.3s;
  display: block;
}

.dcg-calculator-api-container .dcg-expressions-branding i,
.dcg-calculator-api-container .dcg-graphpaper-branding i {
  color: rgba(0,0,0,0.2);
  font-size: 650%;
  margin-right: 2px;
  line-height: 18px;
  -webkit-transition: color 0.3s;
  -moz-transition: color 0.3s;
  -o-transition: color 0.3s;
  -ms-transition: color 0.3s;
  transition: color 0.3s;
  height: 18px;
}

.dcg-calculator-api-container .dcg-expressions-branding a,
.dcg-calculator-api-container .dcg-graphpaper-branding a,
.dcg-calculator-api-container .dcg-expressions-branding .dcg-edit-branding,
.dcg-calculator-api-container .dcg-graphpaper-branding .dcg-edit-branding {
  cursor: pointer;
  display: block;
  height: 50px;
}

.dcg-calculator-api-container .dcg-expressions-branding a.dcg-hovered .dcg-powered-by,
.dcg-calculator-api-container .dcg-graphpaper-branding a.dcg-hovered .dcg-powered-by,
.dcg-calculator-api-container .dcg-expressions-branding .dcg-edit-branding.dcg-hovered .dcg-powered-by,
.dcg-calculator-api-container .dcg-graphpaper-branding .dcg-edit-branding.dcg-hovered .dcg-powered-by {
  color: #aaa;
}

.dcg-calculator-api-container .dcg-expressions-branding a.dcg-hovered i,
.dcg-calculator-api-container .dcg-graphpaper-branding a.dcg-hovered i,
.dcg-calculator-api-container .dcg-expressions-branding .dcg-edit-branding.dcg-hovered i,
.dcg-calculator-api-container .dcg-graphpaper-branding .dcg-edit-branding.dcg-hovered i {
  color: #127a3d;
}

.dcg-calculator-api-container .dcg-narrow .dcg-graphpaper-branding {
  display: none;
}

.dcg-calculator-api-container .dcg-no-branding .dcg-expressions-branding,
.dcg-calculator-api-container .dcg-no-branding .dcg-graphpaper-branding {
  display: none;
}.dcg-calculator-api-container .dcg-container {
  text-align: left;
  -webkit-transform-origin: 0 0;
  -moz-transform-origin: 0 0;
  -o-transform-origin: 0 0;
  -ms-transform-origin: 0 0;
  transform-origin: 0 0;
}

.dcg-calculator-api-container .dcg-container pre {
  white-space: pre-wrap;
}

.dcg-calculator-api-container .dcg-container img {
  border: 0;
  outline: none;
}

.dcg-calculator-api-container .dcg-container input::-ms-clear {
  display: none;
}

.dcg-calculator-api-container .dcg-container button,
.dcg-calculator-api-container .dcg-container input,
.dcg-calculator-api-container .dcg-container select,
.dcg-calculator-api-container .dcg-container textarea {
  font-family: inherit;
}

.dcg-calculator-api-container .dcg-container button,
.dcg-calculator-api-container .dcg-container select {
  text-transform: none;
}

.dcg-calculator-api-container .dcg-container button,
.dcg-calculator-api-container .dcg-container input[type="button"],
.dcg-calculator-api-container .dcg-container input[type="reset"],
.dcg-calculator-api-container .dcg-container input[type="submit"] {
  -webkit-appearance: button;
  cursor: pointer;
}

.dcg-calculator-api-container .dcg-container button[disabled],
.dcg-calculator-api-container .dcg-container input[disabled] {
  cursor: default;
}

.dcg-calculator-api-container .dcg-container input[type="search"] {
  -webkit-appearance: textfield;
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  box-sizing: content-box;
}

.dcg-calculator-api-container .dcg-container input[type="search"]::-webkit-search-cancel-button,
.dcg-calculator-api-container .dcg-container input[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}

.dcg-calculator-api-container .dcg-container button::-moz-focus-inner,
.dcg-calculator-api-container .dcg-container input::-moz-focus-inner {
  border: 0;
  padding: 0;
}

.dcg-calculator-api-container .dcg-container table {
  border-collapse: collapse;
  border-spacing: 0;
}

.dcg-calculator-api-container .dcg-container input::-webkit-outer-spin-button,
.dcg-calculator-api-container .dcg-container input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}.dcg-calculator-api-container .dcg-component-checkbox {
  cursor: pointer;
  position: relative;
}

.dcg-calculator-api-container .dcg-component-checkbox .dcg-checkbox {
  border: 1px solid #bbb;
  margin-right: 0.5em;
  width: 1.1em;
  height: 1.1em;
  border-radius: 3px;
  vertical-align: middle;
  display: inline-block;
  position: relative;
}

.dcg-calculator-api-container .dcg-component-checkbox .dcg-checkbox i {
  display: none;
  font-size: 115%;
  position: absolute;
  top: -0.15em;
  left: 0.1em;
  text-shadow: -1px -1px 0 #fff, -1px 1px 0 #fff, 1px -1px 0 #fff, 1px 1px 0 #fff, 0 -1px 0 #fff, 0 1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff;
}

.dcg-calculator-api-container .dcg-component-checkbox .dcg-checkbox-children {
  position: relative;
  top: 0.1em;
}

.dcg-calculator-api-container .dcg-component-checkbox.dcg-hovered:not(.dcg-checked) .dcg-checkbox {
  border: 1px solid #999;
}

.dcg-calculator-api-container .dcg-component-checkbox.dcg-hovered:not(.dcg-checked) .dcg-checkbox i {
  display: block;
  color: #e2e2e2;
}

.dcg-calculator-api-container .dcg-component-checkbox.dcg-checked .dcg-checkbox i {
  display: block;
  color: #4781b9;
}

.dcg-calculator-api-container .dcg-component-checkbox.dcg-checked.dcg-hovered .dcg-checkbox {
  border: 1px solid #999;
}

.dcg-calculator-api-container .dcg-component-checkbox.dcg-disabled {
  pointer-events: none;
  opacity: 0.5;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
  filter: alpha(opacity=50);
}

.dcg-calculator-api-container .dcg-component-checkbox.dcg-disabled .dcg-checkbox {
  background: rgba(0,0,0,0.15);
}

.dcg-calculator-api-container .dcg-component-checkbox.dcg-disabled.dcg-checked i {
  display: block;
  color: #999;
}

.dcg-calculator-api-container .dcg-component-checkbox.dcg-green.dcg-checked .dcg-checkbox i {
  color: #127a3d;
}

.dcg-calculator-api-container .dcg-component-checkbox.dcg-small {
  font-size: 85%;
}.dcg-calculator-api-container .dcg-download-button.dcg-disabled {
  pointer-events: none;
}.dcg-calculator-api-container .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input {
  background: none;
  width: 100%;
  border: none;
  font-family: Abraham, serif;
  font-size: 125%;
  padding: 1px 0;
}

.dcg-calculator-api-container .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input:focus {
  outline: none;
}

.dcg-calculator-api-container .dcg-mathquill-braille-overflow-left .dcg-tooltip-hit-area-container:before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  width: 14px;
  background: -webkit-linear-gradient(right, rgba(255,255,255,0), #fff);
  background: -moz-linear-gradient(right, rgba(255,255,255,0), #fff);
  background: -o-linear-gradient(right, rgba(255,255,255,0), #fff);
  background: -ms-linear-gradient(right, rgba(255,255,255,0), #fff);
  background: linear-gradient(to left, rgba(255,255,255,0), #fff);
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-mathquill-braille-overflow-right .dcg-tooltip-hit-area-container:after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: 14px;
  background: -webkit-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: -moz-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: -o-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: -ms-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: linear-gradient(to right, rgba(255,255,255,0), #fff);
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-mathquill-braille-tooltip.dcg-latex-tooltip-positioning-container.dcg-tooltip-positioning-container.dcg-tooltip-gravity-ne-se .dcg-tooltip-arrow {
  -webkit-transform: translateX(-1.25ch) rotate(45deg);
  -moz-transform: translateX(-1.25ch) rotate(45deg);
  -o-transform: translateX(-1.25ch) rotate(45deg);
  -ms-transform: translateX(-1.25ch) rotate(45deg);
  transform: translateX(-1.25ch) rotate(45deg);
}

.dcg-calculator-api-container .dcg-mathquill-braille-tooltip.dcg-latex-tooltip-positioning-container.dcg-tooltip-positioning-container.dcg-tooltip-gravity-ne-se .dcg-tooltip-message-container {
  -webkit-transform: translateX(-1.25ch);
  -moz-transform: translateX(-1.25ch);
  -o-transform: translateX(-1.25ch);
  -ms-transform: translateX(-1.25ch);
  transform: translateX(-1.25ch);
}

.dcg-calculator-api-container .dcg-mathquill-braille-tooltip.dcg-latex-tooltip-positioning-container.dcg-tooltip-positioning-container.dcg-tooltip-gravity-nw-sw .dcg-tooltip-arrow {
  -webkit-transform: translateX(0.8ch) rotate(45deg);
  -moz-transform: translateX(0.8ch) rotate(45deg);
  -o-transform: translateX(0.8ch) rotate(45deg);
  -ms-transform: translateX(0.8ch) rotate(45deg);
  transform: translateX(0.8ch) rotate(45deg);
}

.dcg-calculator-api-container .dcg-mathquill-braille-tooltip.dcg-latex-tooltip-positioning-container.dcg-tooltip-positioning-container.dcg-tooltip-gravity-nw-sw .dcg-tooltip-message-container {
  -webkit-transform: translateX(0.8ch);
  -moz-transform: translateX(0.8ch);
  -o-transform: translateX(0.8ch);
  -ms-transform: translateX(0.8ch);
  transform: translateX(0.8ch);
}.dcg-calculator-api-container .dcg-mq-container {
  position: relative;
  display: inline-block;
}

.dcg-calculator-api-container .dcg-mq-container .dcg-mq-placeholder {
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  line-height: 1em;
  height: 1em;
  margin-top: -0.5em;
  pointer-events: none;
  font-family: Symbola, "Times New Roman", serif;
  padding-left: 2px;
  color: rgba(0,0,0,0.47);
}

.dcg-calculator-api-container .dcg-container .dcg-mq-editable-field:not(.dcg-no-fadeout) {
  position: relative;
}

.dcg-calculator-api-container .dcg-container .dcg-mq-editable-field:not(.dcg-no-fadeout):after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: 14px;
  background: -webkit-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: -moz-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: -o-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: -ms-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: linear-gradient(to right, rgba(255,255,255,0), #fff);
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-container .dcg-mq-editable-field:not(.dcg-no-fadeout) .dcg-mq-root-block {
  padding-right: 10px;
}

.dcg-calculator-api-container .dcg-container .dcg-mq-editable-field:not(.dcg-no-fadeout) .dcg-mq-root-block.dcg-mq-editing-overflow-left:before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  width: 14px;
  background: -webkit-linear-gradient(right, rgba(255,255,255,0), #fff);
  background: -moz-linear-gradient(right, rgba(255,255,255,0), #fff);
  background: -o-linear-gradient(right, rgba(255,255,255,0), #fff);
  background: -ms-linear-gradient(right, rgba(255,255,255,0), #fff);
  background: linear-gradient(to left, rgba(255,255,255,0), #fff);
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-has-background-color .dcg-mq-editable-field:after {
  display: none;
}

.dcg-calculator-api-container .dcg-has-background-color .dcg-mq-editable-field:after .dcg-mq-editing-overflow-left:before {
  display: none;
}.dcg-calculator-api-container .dcg-disable-slider {
  opacity: 0.3;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";
  filter: alpha(opacity=30);
}

.dcg-calculator-api-container .dcg-slider-interior {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  position: relative;
  top: -4px;
  margin-left: 7px;
  margin-right: 7px;
}

.dcg-calculator-api-container .dcg-slider-interior .dcg-thumb {
  cursor: pointer;
  z-index: 3;
  border-radius: 8px;
  position: absolute;
  top: -8px;
  margin-left: -19px;
  width: 38px;
  height: 38px;
}

.dcg-calculator-api-container .dcg-slider-interior .dcg-thumb:focus {
  outline: none;
}

.dcg-calculator-api-container .dcg-slider-interior .dcg-thumb:focus:after {
  position: absolute;
  top: -4px;
  left: 4px;
  content: "";
  pointer-events: none;
  border: 2px solid rgba(79,129,189,0.35);
  border-radius: 50%;
  width: 26px;
  height: 26px;
}

.dcg-calculator-api-container .dcg-slider-interior .dcg-thumb .dcg-graphic {
  position: absolute;
  top: 0;
  left: 8px;
  border-radius: 12px;
  width: 22px;
  height: 22px;
  background: rgba(79,129,189,0.35);
}

.dcg-calculator-api-container .dcg-slider-interior .dcg-thumb .dcg-center {
  position: absolute;
  top: 0;
  left: 8px;
  border-radius: 12px;
  width: 22px;
  height: 22px;
  background: #4f81bd;
  -webkit-transform: scale(0.25, 0.25);
  -moz-transform: scale(0.25, 0.25);
  -o-transform: scale(0.25, 0.25);
  -ms-transform: scale(0.25, 0.25);
  transform: scale(0.25, 0.25);
  -webkit-transition: -webkit-transform 0.2s;
  -moz-transition: -moz-transform 0.2s;
  -o-transition: -o-transform 0.2s;
  -ms-transition: -ms-transform 0.2s;
  transition: transform 0.2s;
}

.dcg-calculator-api-container .dcg-slider-interior .dcg-thumb.dcg-hovered .dcg-center,
.dcg-calculator-api-container .dcg-slider-interior .dcg-thumb.dcg-down .dcg-center {
  -webkit-transform: scale(1, 1);
  -moz-transform: scale(1, 1);
  -o-transform: scale(1, 1);
  -ms-transform: scale(1, 1);
  transform: scale(1, 1);
}

.dcg-calculator-api-container .dcg-slider-interior .dcg-zeroMarker {
  position: absolute;
  top: 2px;
  z-index: 2;
  width: 2px;
  height: 2px;
  background: rgba(0,0,0,0.3);
  border-radius: 2px;
}

.dcg-calculator-api-container .dcg-slider-interior .dcg-track {
  cursor: pointer;
  height: 22px;
  position: absolute;
  left: 0;
  right: 0;
}

.dcg-calculator-api-container .dcg-slider-interior .dcg-track .dcg-ticks {
  position: absolute;
  top: 2px;
  bottom: 0;
  width: 100%;
}

.dcg-calculator-api-container .dcg-slider-interior .dcg-track .dcg-ticks .dcg-tick {
  position: absolute;
  top: 0;
  width: 2px;
  height: 2px;
  background-color: #fff;
  margin-left: 0;
  z-index: 1;
  border-radius: 2px;
}

.dcg-calculator-api-container .dcg-slider-interior .dcg-track .dcg-graphic {
  height: 6px;
  background-color: rgba(0,0,0,0.1);
  border-radius: 3px;
  margin-bottom: 6px;
  width: 100%;
}

.dcg-calculator-api-container .dcg-slider-container .dcg-minLabel {
  padding: 10px 4px 10px 8px;
}

.dcg-calculator-api-container .dcg-slider-container .dcg-maxLabel {
  padding: 10px 8px 10px 4px;
}

.dcg-calculator-api-container .dcg-slider-container .dcg-minLabel,
.dcg-calculator-api-container .dcg-slider-container .dcg-maxLabel {
  z-index: 4;
  color: rgba(0,0,0,0.5);
  margin: -10px 0;
  min-width: 26px;
  text-align: center;
}

.dcg-calculator-api-container .dcg-slider-container .dcg-minLabel .dcg-mq-math-mode,
.dcg-calculator-api-container .dcg-slider-container .dcg-maxLabel .dcg-mq-math-mode {
  font-family: arial, sans-serif;
  cursor: pointer;
  font-size: 80%;
  position: relative;
  top: -1px;
}

.dcg-calculator-api-container .dcg-slider-container .dcg-minLabel.dcg-hovered,
.dcg-calculator-api-container .dcg-slider-container .dcg-maxLabel.dcg-hovered {
  color: #333;
}

.dcg-calculator-api-container .dcg-slider-container .dcg-minLabel.dcg-depressed,
.dcg-calculator-api-container .dcg-slider-container .dcg-maxLabel.dcg-depressed {
  color: #000;
}

.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-animate-play {
  display: none;
}

.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-animate-pause {
  display: none;
}

.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-slider-speed-container {
  display: none;
}.dcg-calculator-api-container .dcg-static-mathquill-view * {
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  user-select: text !important;
  -moz-user-selection: text !important;
}.dcg-calculator-api-container .dcg-tooltipped-error {
  color: #e66b3c;
  font-size: 22px;
  cursor: pointer;
  display: inline-block;
  width: 26px;
  height: 26px;
  text-align: center;
  -webkit-animation: dcg-delayed-fadeIn 1s;
  -moz-animation: dcg-delayed-fadeIn 1s;
  -o-animation: dcg-delayed-fadeIn 1s;
  -ms-animation: dcg-delayed-fadeIn 1s;
  animation: dcg-delayed-fadeIn 1s;
  position: relative;
  top: 3px;
}

.dcg-calculator-api-container .dcg-tooltipped-error.dcg-small {
  font-size: 14px;
  width: 16px;
  height: 16px;
  position: relative;
  top: 1px;
}

.dcg-calculator-api-container .dcg-tooltipped-error.dcg-white {
  color: #fff;
}

@-webkit-keyframes dcg-delayed-fadeIn {
  0% {
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  80% {
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  100% {
    opacity: 1;
    -ms-filter: none;
    filter: none;
  }
}

@keyframes dcg-delayed-fadeIn {
  0% {
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  80% {
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  100% {
    opacity: 1;
    -ms-filter: none;
    filter: none;
  }
}

@-webkit-keyframes dcg-fadeIn {
  0% {
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  100% {
    opacity: 1;
    -ms-filter: none;
    filter: none;
  }
}

@keyframes dcg-fadeIn {
  0% {
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  100% {
    opacity: 1;
    -ms-filter: none;
    filter: none;
  }
}.dcg-calculator-api-container .dcg-tap-container [ontap] {
  cursor: pointer;
}@font-face {
  font-family: 'dcg-icons';
  src: url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8R/5kAAAC8AAAAYGNtYXAeVsT2AAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZiisThcAAAF4AAB+NGhlYWQXs7nbAAB/rAAAADZoaGVhByoEZAAAf+QAAAAkaG10eMgMIeEAAIAIAAAB0GxvY2EnIgRwAACB2AAAAOptYXhwAIcCkAAAgsQAAAAgbmFtZZMnHvMAAILkAAABnnBvc3QAAwAAAACEhAAAACAAAwQAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADibwPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg4m///f//AAAAAAAg4gD//f//AAH/4x4EAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAADADH/xAQYA8AANAA8AEQAAAEjNTQmIyEiBh0BIyIGHQEUFjsBHgEXFSMiBh0BFBYzITI2PQE0JisBNT4BNzMyNj0BNCYjBTUzFSMiJjUhFAYrATUzFQPwpzIi/l8iMqYRGEozXRZyTlI0SRgRAdQQGEoyU01zFl01SBgQ/JJ+UhIaA0UaElJ+Aw9dIjIyIl0YEYk0SExtEltKM1IRFxcRUjRJWxJtTEoyiREYsmGNGRMSGo1hAAAABgAA/8AEAAPAAB8ALwBZAIgCXgKNAAABISIHDgEHBhURFBceARcWMyEyNz4BNzY1ETQnLgEnJhMUBiMhIiY1ETQ2MyEyFhUlFiYxFhceARcWFx4BFzAGMQ4BBw4BBzAGOQEuAScmJy4BJyYnMSYWJzcFBhQxBgcOAQcGBw4BBzEqASMwIjEiJicuAScwJjE+ATc+ATc2Nz4BNzY3BjY3FxM2FhcVOAExLgEnOAExMCI1OAExOAEnMCIjMCIjMCIjMCI1OAExMCI1OAExLgEjJgYHMCIVOAEjDgEjOAExDgEHDgEHDgEHMQ4BBzAGMTgBMSIGIzAiIyIGIyIGBzgBMQ4BBzAiMSIGIzAiFSIGBzgBMSIGIzAiMTgBIzAiMTAyMQ4BIzI2Nw4BJy4BJzgBMTAiMTgBMTgBMTAmNTAmNSImIzgBMS4BJzEuASceARcuAScwFjEuAScuAScuAScuAScuAScuASMOAQcwIhUOAQcyNjMOARUwNjUOAQcOAQcOAQcOAQcOAQc+ATcOASMyNjcOASMGJicuAScxHgEXLgEnNTAWMTgBMR4BFzgBMR4BFzAWMTgBMTgBMR4BFyImJx4BMzAyOQEwMjEyNjc4ATEwMjU4ATM+ATcyNjMwNjEyNjMwMjU+ATcxOAExOAExPgE3OAExPgE3PgE3MAYHPgE3DgEHPgE3PgE3MjYzOAExMjYzMjYzOAExNjIzIiYHNhYXLgEjHgEXHgEXHgEXHgExHgEXHgEXLgE1HgEXLgEnHgEXHgEzFjY3PgE3OAExPgE3PgE3MDY1MDYxMjYzOAExMjYzOAEzPgE3IgYHPgE3DgEHPgE3BTEOASMxIiYnLgEnMDYxPgE/AT4BNzA2OQEeARceATMyNjcwFjEeARceARc2MhcDM/2aKyUlOBAQEBA4JSUrAmYrJSU4EBAQEDglJXdfQ/2aQ19fQwJmQ1/8sQQGDA4OHxISFQsaDgIIEAgECAUCER4NEhERIA4PDAUJBD0DIAgMDg0fERATETQhAgEBAwQKBwkSCQIBBAEfLhMSEBEgEA8QAwIBQg0VJhIDBwMCAgEBAQEBAQMCBQkFCxcLAgICBQIDCAMFCAUBBQIWLBgCAQECAQECAQECBQICAwEDAQECAgIBAQIBAQMCAgINGg4NGQ0OHQ4NFwkCAwIBAQITHxAGDQcCAwICBAMCAwYDAgMCAQQBBQwFBA0GCBMJDBMIAgUHBQIBAQEDAgULBQgSCA8dEAgQCAIFAgIFAg4eEAsYCgoRCRo2FBUkEAUHBQUHBQIDBQMVKhYCChQNAwkDBg0HAgINFgoCAgIBAQIBAQMBAQICAgEBAgECBAoHCxYMAQEECgUDBQMKEwwIEAoBBgECAwIBBAMKEwoHCgcXKxMBBQIOHQwHDQgFCgQCAwEBAgYNBgEDChYNCxMIBAkECRUMEBsNAQQBCxQKFSgYAgICAQIBAQICBQkDAgMBBgsGBQcDBRIJ/rwdPSAgPx8QGw4CCBAIBAIFAgINFwsQJxoOHw8CCxQLBAcEBQICA8AQETglJSr9nComJjgREBAQOCUlKwJmKiUlOBEQ/M1DX19DAmZDX19DrwkULDAxZTQ0Mxs8HgIIDggFCAQDJEceLS0uXTAwMBQnEy0NHgIsLy9eLzAuLW42AwEFDAcCAwYBMGUyKy4uZDc2Ow0HBhz+LQIJCFUDBAQCAgICAgQEAwUCAgIDBQMDCQMBBgEXKxQCAgIFAQIBAgICAQECBQQDBAUFAwIGBQEBAQECChwQBg8GAQMCAgMEAwQGAwIDAgEDAgUJBQUJAwUEAgYFAgMHAwIBAQIBAQUJBQgSCA8bDAYKAwEBAgIBAQYJBAUDBgMTEAoeEgUHBQUJA2QCAgUBFSsUAggKAwMBAwMKBwICAQECAgMCAQECAgEBBQoEDBQLAwEFCQUCBQQKEQgECQQCAgICAgICDwwBAwgWDQYOCAQKBQEDAgEBBwwFAgEBCQ0FAw4GAwYEBgkBDwgBAQIIEwkUKRABAQIDAgMEAQICAwQBAQECCAYB9xoaHRsOIBICCBAIBAIFAgISHAwOGgwLAgkQBwEGAQEBAAAKAAD/wAQAA8AABQAtAFYAbgCLALsA6wEbATsBSwAAASc1HgEXFwYHDgEHBiMGJy4BJyYnHgEzMjY3FhceARcWMzI2Nz4BNx4BMz4BNwMOAQcGFBUuAScuASMiBw4BBwYHFAYVIiYnLgEjIgYHNjc+ATc2MzIWFyoBIyIGBw4BBw4BBycyNjcyNjE+ATcXBxQWFyE+ATUwNDU0JicuASclFBYXHgEXBSEOARUnDgEHDgEHDgEHIgYjKgExLgEnLgEnLgE1OQE1PAExPgE3PgEzMT4BMzIWFTE2FjEXDgEHDgEHDgEHIgYjKgExLgEnLgEnLgE1OQE1PAExPgE3PgEzMT4BMzYWFTE0FDEhDgEHDgEHDgEHIgYjKgExLgEnLgEnLgE1OQE1PAExPgE3PgEzMT4BMzYWFTE0FDEBISIHDgEHBhURFBceARcWMyEyNz4BNzY1ETQnLgEnJhMUBiMhIiY1ETQ2MyEyFhUDHkQZIQoECRsaTTAwNTYxME0ZGgkFCQMIDgYJFhZBKCgtLVIhHyoIBw0IBQkFoAYMAwIEBAMWMBorJyg/FxcKAgIFAgUJBQUJAwobGk0vMDUjQq4BBAEFCwMEAwICBQRABQsEAQMFCgJEPgQD/koEAwMEAwcFAVgDAwQGBf7TAYkGBQYCAwEECQUBBQIDBAIBBQUHBQUJAwICAQcEBAQDBQcFEhkBAWsCAwIDCQUBBgEEAwICBAUIBAUJAwIDAgYFAwUDBQcFExr94gIDAgMJBQEGAQMEAgEFBQcFBQkDAgMCBgUDBQMFBwUSGwIX/ZorJSU4EBAQEDglJSsCZislJTgQEBAQOCUld19D/ZpDX19DAmZDXwIJewIbPyN+NCssQBISARITQCwsMwIDBQIrJSU1EA8fHRtGKAUCAwIEAT4FDwgDBQMCAwIJCg8OMiMiKAMEAgECAQMDATMrLD8SEQ/dAwIBAQICBQF1AwECAwcFeToGDQQEDQYBAQcNCAUKAqgGDAUFCwOWBgsG0wUHBQUJAwIBAQIBAwIDCQUFCQMCAgUGDAUDBAEDGRICAtkFCAQFCQQBAQICAgMBBAkFBAYHAgEFBwwFAwMCAgIbEQEBBQgEBQkEAQECAgIDAQQJBQQGBwIBBQcMBQMDAgICGxEBAQIGEBE4JSUq/ZwqJiY4ERAQEDglJSsCZiolJTgREPzNQ19fQwJmQ19fQwAAAAYAAP/ABAADwAAkAE8AjwEEASQBNAAAJTEiJi8BBwYmJyY2PwE+ATMeAR8BEz4BMyEyFhUUBiMhAw4BIyUVFAYPAQ4BBwYUFRQGIyImNTQ2NzE+ATcjKgExFAYHFSM1NzUzFTAWMxcPASM1NDY/AT4BNTQmJy4BIyIGBw4BBx4BFRQGBw4BIyImNTQ2Nz4BMzIWFx4BFRQGBw4BDwEzMjY3NDY3NTMVJRQGBw4BIyImJy4BNTQ2Nz4BMzIWFx4BFRQGBw4BBx4BMx4BMzI2Nz4BNTQmJy4BKwEiJjU0NjcxOgEzMjY3PgE1NCYnLgEjIgYHMhYVHgEVFAYHDgEjIiYnLgE1NDY3PgEzMhYXHgEVFAYHDgEHHgEXHgEVASEiBw4BBwYVERQXHgEXFjMhMjc+ATc2NRE0Jy4BJyYTFAYjISImNRE0NjMhMhYVAS8GDAEvBwYTBAUCBxwDCwUFBgQmiQMJBwGCCgsNCP6LmAEMBgHrAwIoBwkBAgoKDAcTEQUOCTwIBgQDCwkNCxVNqQt1AwE4DhAEBQUMCAcKBQMGAQgJBAMDBwUJDAkICBYNDhcKCQoGBQMMCDQtCggBAwIV/twJCAgTDAkRCAkIAwEEBgMDBwMDAQMDAgMCAgQDBQkFBwcDAgMDAgMHBw0EBAQHAQMCBggDAwMCAgEHBQYMAwICAgMDAgEHBQMGAwIDCQgHDwgIEAgICQUFAwcDBQkDBgcB5v2aKyUlOBAQEBA4JSUrAmYrJSU4EBAQEDglJXdfQ/2aQ19fQwJmQ1/xBgdiBgUCBwYTBRUDAQEHBFQBBwUFDQgKC/7gBQbrBwMGATgIGA8JIBUJDBEEHDkcBxMNAgkNBAk3BAYCAok+CQMGAj0QIA4KDgYHBgMDBAYDAgkIBQcDBAMMCgsVCAgJCQgIGA0JEQgFDAgyAQIBCQ0EArYMEQgGBwYFBxAJAwgCAwMCAgMHAwMIAgEBAgEDAgIGBAULCAgKBQUGBQMCBQIGBQQNBgUHAwMDAwMDAQIGBQMHAwMBAwECBgUIDwUFAwMFBQ8ICA4IAwYCAQcEChAIAbcQETglJSr9nComJjgREBAQOCUlKwJmKiUlOBEQ/M1DX19DAmZDX19DAAAIAAD/wAQAA8AAHwAtAE4AZgB1AI0ArQC9AAAlFhQHDgEvAQcGIicuAT8BJyY0Nz4BHwE3NjIXHgEPAQMzMjY1NCYrASIGFRQWJzIWFRQGKwEVFAYjIiY9ASMiJjU0NjsBNTQ2MzIWHQEzAxQGBw4BIyImJy4BNTQ2Nz4BMzIWFx4BNxQGKwEiJjU0NjsBHgEVJxQGBw4BIyImJy4BNTQ2Nz4BMzIWFx4BASEiBw4BBwYVERQXHgEXFjMhMjc+ATc2NRE0Jy4BJyYTFAYjISImNRE0NjMhMhYVAxcHBwYTBzk6BhMHBgIIOjoGBgcTBjo5BxMGBwEIOYnPCg4OCs8JDg6hCQwMCVENCwkOUQoODAxRDgkKDlFCBgUFDQgGDwQFBgYFBA0ICA0FBQZZDAnPCg4NC80LDFkGBQUNCAgNBAUGBgUEDQgHDgUFBgHK/ZorJSU4EBAQEDglJSsCZislJTgQEBAQOCUld19D/ZpDX19DAmZDX8AGFAYGAgg6OgYGBhQGOjkHEwYHAQg5OQcHBhMHOQFiDgkKDg4KCQ4tDgoKDVEKDgwMUQwLCg5RCQwMCVH+IggNBQUGBgUFDQgIDAUFBgYFBg1JCg4MDAkOAgwJTwgNBQUGBgUFDQgIDAUFBgYFBg0CcRAROCUlKv2cKiYmOBEQEBA4JSUrAmYqJSU4ERD8zUNfX0MCZkNfX0MAAAAACAB1/8ADiQPAAA8AHwAvAD8ATwBwAHwAlAAAJSEiJj0BNDYzITIWHQEUBicjIiY9ATQ2OwEyFh0BFAY3ISImPQE0NjMhMhYdARQGNyEiJj0BNDYzITIWHQEWBicjIiY9ATQ2OwEyFh0BFAYTFx4BFxQGIyEiJjU+AT8BIyIGFREUFjMhMjY1ETQmKwEnIgYVFBYzMjY1NCYBETQ2MyE+ATMyFhUhMhYVERQGIyEiJjUCxv5YBQYGBQGoBQYGvPEFBgYF8QUGBkr+wAUGBgUBQAUGBn/+PAUGBgUBwgUGAQfW8QUGBgXxBQYGcA8zJQIGBf48BQYCJy8RpwYLCQgCVgYLCQinhBAWFhAQFhb+ZQ4IASQCLyAgLwEkCgwOCP0aCg7GBgUEBQYGBQQFBk8GBQQFBgYFBAUGTwYFBAUGBgUEBQZPBgUEBQYGBQQFBk8GBQQFBgYFBAUGASAtCzYjBQYGBSIzDTEJCP0NBgsJCALxBgt4FxAQFhYQDxj8OwOHCQwiLS0iDQj8eQkMDQgAAAUABAE6A/MCugAXACMALwA7AIoAABMuATEOAR0BFBY/AT4BNzI2Mz4BNS4BJxcUBiMiJjU0NjMyFhcUBiMiJjU0NjMyFjciBhUUFjMyNjU0JgUHDgEHMAYVKgEjMCIxMCIxIiYnOAExLgE9ASMiJiMuATU0Njc2MjsBNTQ2NzQ2NTA2MTA2NTAyMToBMzAyMTAyMTAWMTAyFR4BHwEWFAetAhRGTRELMRMTEgMfAhMcAhgVxCMZGCMjGBkjmCMZGSMjGRkjWRgkJBgYJCIBd6ADBgQCAQECAgIDBQMDAysDBwUTGBgTAwcFKwICAgICAgIBAgICBAIEBAOgCggCNwIBAmRFJA8FCzETFQMEBx4VFSIEORkjIxkZIyMZGSMjGRkjIyMkGBgkJBgZI1SgAwYBAQECAgMNCWkCByATEyAGAmUICgMCAQECAQIDAgEEA6AHFgoAAAAAAwAE/80D7wK+ABwAOwCNAAABIgcOAQcGFRQXHgEXFjMyNz4BNzY1NCcuAScmIxMUBisBIiY9AQcGIicuAS8BJjY3PgExMjYxMzIWFREBBw4BBzAGFSoBMTAiMTAiMSImJzgBMS4BPQEhIgYHDgEPAQYmPQE0NjMhNTQ2NzQ2NTA2MTAyNTAyMToBMzAyMTAyMTAWMTAWFR4BHwEWFA8BAQssJyc6EREREDonJy0sJyY6ERERETomJywmBgUiBgkXAwkFAwQCBgICCAQ4AgIcBwgCs5EDBgQCAQECAgMFAwMD/Y0FCgURKxUzDRFqTAJxAgICAgICAgECAgIEAgIFAqAICAsBdxAROScnLSwnJzoQERAROScnLSwnJzoREP6jBQYKBdEPAgICBQQZAwsDAh4CCgT+8QHCkQQFAgEBAwEDDQhiAwIDFRQ0DAUQJkxqZAgKAwIBAgICAgEBAgQDoAgYCA0AAAAAAgAEABUD+gNrAFEAowAAAQcOAQcwBhUqATEwIjEwIjEiJic4ATEuAT0BISIGBw4BDwEGJj0BNDYzITU0Njc0NjUwNjEwMjUwMjE6ATM6ATEwMjEwFjEwFhUeAR8BFhQPAQE3PgE3MDY1OgExOgExMDIxMhYXOAExHgEdASEyNjc+AT8BNhYdARQGIyEVFAYHFAYVMAYxMCIVMCIxKgEjKgExMCIxMCYxMCY1LgEvASY0PwED5JEDBgQCAQECAgMFAwMD/Y0FCgURKxUzDRFqTAJxAgICAgICAgECAwECBAMBBQKgCAgN/DiRAwYEAgEBAQECAwUDAwMCcQUKBBIrFTMNEWtL/ZECAgICAgICAQIDAQIEAwEFAqAICA0CiZIDBgEBAQICAwwIZQMCAxUUNAwFECZMamIICgMCAQEDAgIBAgEEA6AIGQgM/m6SAwYBAQECAgMMCGUDAgMVFDQMBRAmTGpiCAoDAgEBAwICAQIBBAOgCBkIDAAAAAACAAQAFQPxA2sAUQCjAAABBw4BBzAGFSoBMTAiMTAiMSImJzgBMS4BPQEhIgYHDgEPAQYmPQE0NjMhNTQ2NzQ2NTA2MTAyNTAyMToBMzoBMTAyMTAWMTAWFR4BHwEWFA8BEQcOAQcwIhUqATEwIjEwIjEiJic4ATEuAT0BISIGBw4BDwEGJj0BNDYzITU0Njc0NjUwNjEwNjUwMjE6ATMwMjEwMjEwFjEwMhUeAR8BFhQPAQPkkQMGBAIBAQICAwUDAwP9jQUKBRErFTMNEWpMAnECAgICAgICAQIDAQIEAwEFAqAICA2RAwYEAgEBAgIDBQMDA/2NBQoFESsVMw0RakwCcQICAgICAgIBAgICBAICBQKgCAgLAomSAwYBAQECAgMMCGUDAgMVFDQMBRAmTGpiCAoDAgEBAwICAQIBBAOgCBkIDP4qkQMGAgIDAgMMCGQCAgMVFTMNBhAmS2piCAsDAQECAgEBAgICAwOgCBkIDQAD//7/xQQAA7wAKQBEAIMAACUnLgEHDgEXFS4BJw4BBw4BBxYXHgEXFhcyFjMVFBYXFjY/AT4BJzQmJwEOARceATc2Fx4BFxYXPgE3PgE3JicuAScmBwUnLgEHDgEdASoBByIHDgEHBgcGBw4BBwYjJgYHBhYXOgEzMjc+ATc2NzY3PgE3NjcVFBYXFjY/AT4BJzQmJwP0qAoPBgYHASN0OgIFAhMnFDQzM1IbGwIBAgEGBgYQCagGBwEGBvxSHyoBAi4fAxgYTTMyNwQJBBAkFEVBQGgjIgkDrqgKDwYGBgECAQMmJ3FBQjo+OzteHh4DHy4CASkfAgQCEy8vgUtMSyElJEQfHhQGBgYQCakGBgEGBrSoCgUCAw4NXhBSTgMHAyI7GzwmJy4JCQEBagwPAwMHCKkGDggIEAYCngEvHyApAQEEAygqKk4HDgccNBlWLi8qAwMBTKkKBQIDDg1jAQ8OSUA/ZGw7OzcGBQIqHx8vAgkISUpKgjkqKjsSEgllDA8DAgYJqQYNCAgPBgAAAwBNAAgDtQN6ACkARgBmAAAlJz4BNTQnLgEnJiMiBw4BBwYVFBceARcWMzI2NxceATMyNjc+ATU0JicDFAcOAQcGIyInLgEnJjU0Nz4BNzYzMhceARcWFScjNTQmIyIGHQEjIgYVFBY7ARUUFjMyNj0BMzI2NTQmA6WQKSsfH21ISVJSSUlsHx8fH21ISVJAdzSRCBQLCxQICAgICKoWF041NDw8NDVOFxcXF041NDw8NDVOFxaHbBoTExpsEhsbEmwaExMabBIbG2aQNX5CU0hJbB8gIB9sSUhTUklIbCAfJyaSCAgICAgUCwsUCAGFOzU0TxYXFxZPNDU7PDU0ThcXFxdONDU8LmsTGhoTaxsSExpsExoaE2waExIbAAAAAgAEADcD/gNPAC8AWwAAARYGBx4BFx4BBwYmJy4BJy4BJyYGIwYnLgEnJicWNz4BNzY3Njc+ATc2JzoBFR4BJxYGBwYHDgEHBicuASMOAQcOAQcOAScmNjc+ATcuATc+ATc+ATc2FhceARcD/gZkOgcTDQYlBQUrDCM1HQseCgoaDS8tLlMiIxgyLzBYKCgjJyUlMQgHEwEBOl/VAx8VHSkqaDw9QgsYCAkiChsyJhApBQgmCA0QCjVoBQNILzF+SFiPOTRVBgGpXW4nEx0QCCEQEggDCBcOBxYBAggEBAQUDw8SBAQEFRERFholJV03OD8CJWE+Mk8bJh0eJwgIBwEFARgFDhYIBAUNESEKEB0QKmpgQ2MgIioDBSYhIGhLAAAAAAEAxQB0A0ADEwAhAAA3KgEnLgE3Ez4BNzYWFxsBPgEXHgEHAw4BBwYmLwEDDgEj8AIEAhIUA1gDEAwLGAjvmwchEBAOB7QEEQsLFQfjSAMYD3QBAx4RAdEMEgMEBwn+/gFxEA4HByEQ/lEKDQICBwj0/oMPFAAAAAEBHwCpAuEC6wAaAAABERQGIyEiJjURNDY7ATU0NjsBMhYdATMyFhUC4Q8L/nILDw8Law8LhQoPawsPAkn+egsPDwsBBwsP7goPDwpvDwsABAEfAKkC4QLrABoAHwAlACkAAAEjNTQmKwEiBh0BIyIGFREUFjMhMjY1ETQmIwUzFSM1NzUzESM1FyMRMwLHaw8LhQoPawsPDwsBjgsPDwv+i1JShVJS11JSAmNvCg8PCu4PC/75Cw8PCwGGCw+y1dUZ7v4k7u4BUwAAAAEAcgEvA2kCUQAPAAABLgEjIgYHDgEjFSE1IiYnAqckTjMxSiUubFYC90BaKAHxIz02IitJVlZEKAAAAAH+uAEvBK8CUQAiAAABIiYnLgEjIgYHDgEjIRUhMjc+ATc2Nz4BMzIWFx4BMyE1IQNmQFooJE4zMEslLmxW/kkBtzgtLEkcHRgeMBcYMx0td1sBSf63AYVEKCM9NiIrSVYNDikYGRYbJiodLVhWAAAJAS0AwQLTAvwAMwBmAJkAzQD4ASUBWAGSAcIAAAExLgEjIgYPAScuASMiBgcOARUUFh8BBw4BFRQWFx4BMzI2PwEXHgEzMjY3NjQvATc2NCcnIgYPAScuASMiBgcOARUUFh8BBw4BFRQWFx4BMzI2PwEXHgEzMjY3NjQvATc2NCcuASMDFBYXHgEzMjY/ARceATMyNjc+ATU0Ji8BNzY0Jy4BIyIGDwEnJiIHDgEVFBYfAQcOARUXMS4BIyIGDwEnJiIHDgEVFBYfAQcOARUUFhceATMyNj8BFx4BMzI2Nz4BNTQmLwE3NjQnNzEeATMyNj8BFx4BMzI2NzY0LwE3NjQnLgEjIgYPAScmIgcGFB8BBwYUFxUxHgEzMjY/ARceATMyNjc2NC8BNzY0Jy4BIzgBMSIGDwEnJiIHBhQfAQcGFBc3PgE1NCYnLgEjOAExIgYPAScuASMiBgcGFB8BBwYUFx4BMzI2PwEXHgEzMjY3NjQvAScxHgEzMjY/ARceATMyNjc+ATU0Ji8BNz4BNTQmJy4BIzgBMSIGDwEnLgEjOAExIgYHBhQfAQcGFBcXNCYnJiIPAScuASMiBgcGFB8BBwYUFx4BMzI2PwEXHgEzMjY3PgE1NCYvATc+ATUCMQIHBAQHAhcXAgcEBAYDAwMDAxYWAwMDAwIHBAQHAhcXAgcEBAYDBgYWFgYGDQQHAhcWAwcEAwcDAwICAxcXAwICAwMHAwQHAxYXAgcEBAcCBgYWFwUFAwcE9wMCAwcEAwcDFxYDBwMEBwMCAwMCFxcFBQMHAwQHAxYXBRAFAwMDAxYWAwNoAwcDBAcDFhcFEAUDAwMDFhYDAwMDAgcEBAYDFxYDBwQDBwMDAgIDFhYGBtYDBwQDBwMWFwMGBAQHAwUFFxcFBQMHBAMHAxcWBg8FBgYWFgYFAwcEAwcDFhcDBgQEBwMFBRcXBQUDBwQDBwMXFgYPBQYGFhYGURcCAwMCAwcEAwcDFxYDBwMEBwMFBRcXBQUDBwMEBwMWFwIHBAQHAgYGFugCBwQEBwIXFwIHBAQGAwMDAwMWFgMDAwMCBwQEBwIXFgMHBAMHAwUFFxcGBmgDAwUQBRcWAwcDBAcDBQUXFwUFAwcDBAcDFhcCBwQEBwIDAwMDFhcCAwJcAwMDAxYWAwMDAwIHBAQGAxcWAwcEAwcDAgMDAhcXAgMDAgYPBhYXBg8FoAMDFhYDAwMDAwYEBAcDFhcCBwQEBgMDAwMDFhYDAwMDBRAFFxYGDwYDA/5yBAYDAwMDAxYWAwMDAwIHBAQHAhcWBg8GAgMDAhcXBQUDBwMEBwMWFwIHBEUDAwMDFhYGBgIHBAQHAhcWAwcEAwcDAwMDAxYWAwMDAwMGBAQHAxYXBRAF0QIDAwIXFwIDAwIGDwYWFwYPBQMDAwMWFgYGBQ8GFhcGDwaZAwMDAxYWAwMDAwUQBRcWBg8GAgMDAhcXBQUGDwYWFwUQbhcCBwQEBwIDAwMDFhYDAwMDBQ8GFhcGDwUDAwMDFhYDAwMDBQ8GFmkDAwMDFhYDAwMDAgcEBAcCFxYDBwQDBwMDAwMDFhYDAwMDBRAFFxYGEAVFBAcCBgYWFgMDAwMFEAUXFgYPBgIDAwIXFwIDAwIDBwQDBwMXFgMGBAAAAAASAS4AxALSAvkACwAYACQAMQA9AEoAVgBkAHAAfQCJAJYAogCvALsAyADUAOEAAAEyFhUUBiMiJjU0NjciBhUUFjMyNjU0JiMFMhYVFAYjIiY1NDY3IgYVFBYzMjY1NCYjBzIWFRQGIyImNTQ2NyIGFRQWMzI2NTQmIzUyFhUUBiMiJjU0NjciBhUUFjMyNjU0JiMxFzIWFRQGIyImNTQ2NyIGFRQWMzI2NTQmIycyFhUUBiMiJjU0NjciBhUUFjMyNjU0JiMDMhYVFAYjIiY1NDY3IgYVFBYzMjY1NCYjFzIWFRQGIyImNTQ2NyIGFRQWMzI2NTQmIxcyFhUUBiMiJjU0NjciBhUUFjMyNjU0JiMBZwoQEAoLDw8LGCEhGBchIRcBMgsPDwsKEBAKFyEhFxghIRiZCw8PCwsPDwsYISEYGCEhGAsPDwsLDw8LGCEhGBghIRiZCw8PCwoQEAoXISEXGCEhGJkLDw8LCw8PCxghIRgYISEYmQoQEAoLDw8LGCEhGBchIReZCw8PCwsPDwsYISEYGCEhGJkLDw8LChAQChchIRcYISEYAa4QCgsPDwsKEB4hFxghIRgXIR4QCgsPDwsKEB4hFxghIRgXIR4QCgsPDwsKEB4hFxghIRgXIXgPCwsPDwsLDx8hGBciIRgXIh8PCwsPDwsLDx8hGBciIhcYIXgQCgsPDwsKEB4hFxghIRgXIf4eDwsLDw8LCw8fIRgXIiIXGCEfDwsLDw8LCw8fIRgXIiIXGCEfDwsLDw8LCw8fIRgXIiIXGCEACQEvAMQC0gL5AAwAGAAkADAAPABIAFQAYABsAAABHgEHDgEnLgE3PgEXBRQGIyImNTQ2MzIWBxQGIyImNTQ2MzIWJx4BBw4BJy4BNz4BFxQGIyImNTQ2MzIWJx4BBw4BJy4BNz4BAx4BBw4BJy4BNz4BFxQGIyImNTQ2MzIWFxQGIyImNTQ2MzIWAXAXHAQEJhcYGwQEJhcBYiEYFyEhFxghmSIXFyIiFxciMBccBAQmFxccBAQm4CEYFyEhFxghyRccBAQmFxccBAQmghcbAwQmFxgbBAMn4CIXFyIiFxcimSEYFyEhFxghAcsDJxcXGwMEJhcYGwQ4FyEhFxghIRgXISEXGCEhtwQmFxccBAQmFxccPBciIhcYISG3BCYYFxsEAyYYFxv+OQQmFxccBAQmFxccPBghIRgXIiIXGCEhGBciIgAAAAMA0QE3Ay8CSQA0ADgAPAAAARUjNTQmIyIGHQEUFjMyNj0BMxUUFjsBMjY9ATMVFBYzMjY9ATQmIyIGHQEjNTQmKwEiBhUXMxUjMyM1MwGEdhINDBISDA0SdhIN3w0SURINDRESDA0SURIN3w0SPUNDoyMjAipLHA0SEg12DRISDR1MDRISDUwdDRISDXYNEhINHUwNEhINHpiYAAQAgQA0A38DTAALABgAJAAxAAAlFAYjIiY1NDYzMhYTFAYjIiY1NDYzMhYVARQGIyImNTQ2MzIWEyIGFRQWMzI2NTQmIwFWPiwsPz8sLD5TPi0sPj4sLT4BMj4tLD4+LC0+OSw+PiwsPz8snyw/PywsPz8Bjiw/PywsPz8s/vMtPj4tLD4+AdQ/LCw/PywsPwAAAAAFASQAIALfA14ADwAgADEAQgBQAAABIyImPQE0NjsBMhYdARQGAyIGHQEUFjsBMjY9ATQmKwETIyImPQE0NjsBMhYdARQGIwMiBh0BFBY7ATI2PQE0JisBJSEiJjU0NjMhMhYVFAYCX7saJycauxonJtYFBwcFuwUHBwW7u7saJycauxonJhu7BQcHBbsFBwcFuwEg/nsLEBALAYULEBACISYbuxonJxq7GyYBCAcFuwUHBwW7BQf89ycauxsmJhu7GicBCAcFuwUHBwW7BQd9DwsLDw8LCw8AAAAAAQFKAP4CtgJ2ACYAAAEWFAcOASMiJi8BBw4BIyImJyY0PwEnJjQ3NjIfATc2MhcWFA8BFwK2DAwGDwgIDwZ8fAYPCAgPBgwMfHwMDAwiDXt8DCIMDAx8fAFEDCIMBgYGBnx8BgYGBgwiDHx8DCIMDAx8fAwMDCIMfHwAAAIBPAD8AsQChAAbACgAAAEiBw4BBwYVFBceARcWMzI3PgE3NjU0Jy4BJyYDIiY1NDYzMhYVFAYjAgAoJCQ1DxAQDzUkJCgoJCQ1DxAQDzUkJCgvQkIvL0JCLwKEEA81JCQoKCQkNQ8QEA81JCQoKCQkNQ8Q/stCLy9CQi8vQgAAAQFmASYCmgJaAAwAAAEUBiMiJjU0NjMyFhUCmlpAQFpaQEBaAcBAWlpAQFpaQAAAAQCd/8QD/AMjABYAAAEUBw4BBwYjIicuAScmJwEWFx4BFxYVA/woKIpcXWk0MTFaKCgjAs4iGxslCgoBwGldXIooKAoKJRsbIQLPIikoWjExNAAABQB4ADsD7gNIAAUAGAAeACQANAAAAS4BJx4BJwcnNxQyFR4BFx4BFxYUMxQWFQ8BLwE3FwMHLwE3FwMHLgEnLgEnOAExLgEnNxcD7gEBAQEBaEw/TQEGGgYFCQUBAQK0gRkmgSfRgRkmgSbQRwMHBAMFAwcaBkg/AjoDBAICBMtNQE0BAQUZBgULBQEBAQEBtIIZJ4En/v+CGSaCJ/7/RwMGAwMFAwYbBkg/AAEBTQKpArIDoQBFAAABLgEnNCY1Iy4BLwEuAQcOAQcOAQ8BMAYHDgEXMR4BFx4BFTIWFR4BMzI2Nz4BNz4BNx4BHwEwFhceATMyNjczMDQzPgEnArIDDwYCARs1HQIGFhIOEgUBAQFtAgEGEgMBDwUBAQEBBhQQEhkHAQEBDx0PDh4OAQIBBxcSEBQGAQEGGAYC+wsPBQEBARw2HAIGEAICDwUBAQFtAgEGFxMOEgUBAQEBAQYPFQgBAgEPHQ4OHg4BAgIIFBAGAQUfFwAAAAAFAEr//QO2A4MAJwBQAHgAoACsAAABNhYfAR4BFxYGBw4BBw4BBwYmJy4BNTQ2Nz4BNy4BJy4BNTQ2Nz4BAQYmLwEuAScmNjc+ATc+ATc2FhceARUUBgcOAQceARceARUUBgcOAQcTJjY/AT4BNzIWFx4BFx4BFxYGBw4BIyImJy4BJw4BBw4BIyImJy4BARYGDwEOAQciJicuAScuAScmNjc+ATMyFhceARc+ATc+ATMyFhceAQMUBiMiJjU0NjMyFgMfCAwGbQQLAQEJBhw3HAQKBQoPBAUJEgUUKhMVJhYFEgkFBQr9yQgMBm0ECwEBCQYcNxwECgUKDwQFCRIFFCoTFSYWBRIJBQUKB4oBCwZtBQoGCAoFHTYcBQsBAw4EBQsGCRAFEysSFiYVBRAKBwoGBAoBKQELBm0FCgYICgUdNhwFCwEDDgQFCwYJEAUTKxIWJhUFEAoHCgYECjk0JSQ0NCQlNAJVAQsGbQUKBggKBR02HAULAQMOBAULBgkQBRMrEhYmFQUQCgcKBgQK/tcBCwZtBAsGBwsFHTYcBAwBAw4EBQsHCQ8FFCoSFiYWBBEKBgsFBAoBAcEIDAZtBAsBCQUcNxwECgUKDwQFCRIFEysTFScVBRIJBQUK/a8IDAZtBAsBCQUcNxwECgUKDwQFCRIFEysTFScVBRIJBQUKAR8lNDQlJDQ0AAEAPv/TA8ICngAwAAABFAcOAQcGIyInLgEnJic3PgE3PgE3PgEzMhYXHgEXHgEXHgEzMjY3PgE3HgEVFhQVA8IlJXxSUVlBTEuFLy8HGQwpCR06IxAmFRYrEhUmEhMlFxErFyZAGh01HwUqBgHArWJjYg0MERFIOTlRAhJSFDyAMBggKh0hTigoUCIcKGE3OXkwAwEFMT0lAAAAAAL/1QCgBCAC2gBVAFcAAAEiBw4BBwYxDgEHDgEjIiY1NDY3PgE3PgE3PgE3PgEzMTIWFx4BHwEeATMyNjc+ATc+ATc+ATMyFhUUBgcOAQcOAQcOAQcOASMiJicuAScwJy4BJyYjJTEBVwwSEiEMCwgRCRpXRxslJRkIIyAIEAgVLhsLPzQ4RQsVJBINEEUPDhsdCBAIFS4bC0AzGyUiGgEPCRcoFQgQChtYRjdHCxYnEgwMIxITDQKNAlccHEQdHBElEDiEJRsaJAIFLkAQIxEvXCcOQ1EUIEkjGiOKODkQIxEvXCcOQyUbGiUBAgwOH1MqESUQOIROEiJPJh4eSB4eBQAABP/VAKQEIALeABEALQBPAGsAADciJjU0Njc+ATc+ARceAQcOASEiJicuAScmNjc2FhceATMyNjc+ARceAQcOASMBIiYnLgE3PgE3PgEzMhYXHgEXFgYHBiYnLgEjIgYHDgEjJSImJy4BNz4BNz4BMzIWFRQGBw4BBw4BBw4BIxUbJSUZAx0YDDMWGA4MHE0CSzdHCwkUCQ0RGBgyCwgmEBAZHQsyGBgSDBtYRv4+Bw8GGBELEB0PK0YNOEUNChEKDBAYGDIMCCATEyUPCx8RApkIDwcYDg0JFAkrRg0bJSIaAQ8JCA8JCCAQpCUbGiUBAh8uGA8NDTIXOFtPEQ8iFBgyCw0RGBFNNzgYEQsLMhg3gQElAwMLMhggMxQ8FVEUDiAUGDILDREYEE5UGxASJAQEDTMYEx4PPRQlGxolAQILDwsYEBASAAr/0QCiBCQC5ABdAHAAhACYAKwAvwDSAOcA+gFYAAA3IiYnIiYnLgEnLgEnLgEnLgEnLgEnNCY1NDY3NDY3PgE3PgE3PgE3PgE3PgE3NjIXMhYXHgEXHgEXHgEXHgEXHgEXHAEVHAEHFAYHDgEHDgEHDgEHDgEHDgEHNCIjJTQ2MzEyFhUxFAYjMTgBOQEuASUuATcxPgEXMR4BBzEOASMxIiYnIS4BNzE+ARcxHgEHMQ4BIzEiJiclJjY3MTYWFzEWBgcxDgEjMQYmJyUuATcxPgEXMR4BBzEOASMxIiYlLgE3MT4BFzEeAQcxDgEjMSImJTEmNjcxNhYXMRYGBzEOASMxIiYnJzQ2MzEyFhUxFAYjMTgBOQEuAQUqASciJicuAScuAScuAScuAScuASc0JjU8ATc0Njc+ATc+ATc+ATc+ATc+ATc2MhcyFhceARceARceARceARceARcUFhUcAQcUBgcOAQcOAQcOAQcOAQcOAQcGIiMVAwYDBAYDAwYCAwQEAQYBAgMCAQECAgEBAwECAwIBBAMCBgMDBQMDBgQGDQYDBwMDBgIDBAECBQIBAwICAQECAgICAwECBAMCBQQDBAMEBgMFBAJHJRsbJSUbGib+FxgQDAwyGBgQDAggEggNBwKEGBANCzIYGBENCCASBg4I/vQMDxgYMwsLDxgGDwcRIAj+1xgQDAwyGBgQDQggEQcNAn8YEQ0LMhgYEQ0IIBIGDf5JDA8YGDIMCw8YBg8HESAIgCQcGyUlGxwkAsYDBwMDBgQDBgEDBQMCBQECAwIBAgECAgMBAgMCAQQDAgYDAwQDBAYDBwwHAwYEAwYBAwUDAgUBAgMCAQIBAgIDAQIDAgEEAwIGAwMEAwQGAwMHA6QBAQMCAQMCAgMEAQYDAwUDAwcDAwYEAwYDBAYDAwYCAwQDAgUCAgMBAgECAQEDAgEDAggFAgIFBAMEAwMHAwMFAwMGBAMGAwQFAgMEBAEGAQIDAgEBAgI+GyUlGxslAiVoCzIYGBENCzIYEBIDAwsyGBgRDQsyGBASAwMeGDILCw4YGDMLAwMCEhKNCzIYGBENCzMYEBIEAw0wGBgRDQszGBASBB4YMwsLDxgYMgsDBBIQpRknJRsbJQElJAIDAQIDAgEEAwIGAwMEBAMGAwQGAwMHAwMHAwMGAQQEAwIFAgEDAgIBAQICAgICAwECBAMCBQQDBAMDBwMDBwMDBgQDBgMEBgEDBQMBBgECAwIBAQICAAABASYA9wLcAo8AAgAAARMlASZ0AUICj/5ooAAACAEJANUC+gKmABcAKQA7AFMAZQB9AI8AoQAAASImLwEmNjc2Mh8BHgEHDgEHDgEHBiIjEyImLwEmNjc2Fh8BFgYHDgEjJyImLwEmNjc2Fh8BFgYHDgEjFyImJy4BLwEmNjc2Fhc2FhcWBg8BDgEjNyImJyY2PwE2FhcWBg8BDgEjNyImJyY0NyY0Nz4BHwEeARUUBg8BDgEjJyImLwEuATc+AR8BHgEHDgEjJyImLwEuATc+AR8BHgEHDgEjAS8LEQIIBAYICBMJHAsIBgMKBgMKBgQFAk0LEgERAwsNDRcFEQMMDQQFAScLEQIRAwwNDRYFEQQMDQUEAkUEBgMHCQEJAwwNCxUGCxUGBwkNGwcHA3sJDwMHCQ1ICxkHBggNSQMHBakKDwMDAwMDBxkLHAgJCQgcAwcFUwUHA0ALCAYGGQxACwgHBA8IlgQHBEALCAcGGQtACwgGAw8KAk0MCx4KEgYHBQ8GGQsHBwEFCAIC/vMMCzoNFwUDDA05DRcFAQGGDQs5DRcFAwwMOg0XBAIB8QEBBAoIHgwXBQMJCwMJCwsZBw8BAT4JCAsaBiQHCQ0LGQYlAQFTCQgIEAYHEQYLCAYPBQ8ICQ8DDwQBTQMBJQYZCwwIByQGGgsICVYCAiQGGgsLCAYlBhkLCgcAAA0BCQDVAvoCqQARACMANQBHAFwAbQB+AI8ApQC2AMcA2ADpAAABIiYnJjY3PgEXHgEHDgEHKgETIiYnNSY2NzYWFxUWBgcGIiMnIiYnNSY2NzYWFxUWBgciBiMnIiYnNSY2NzYWFxUWBgcOASMTIiYnLgEnJjY3NhYXHgEXFgYHDgE3IiYnJjY3MzYWFxYGByIGIzciJicmNjczNhYXFgYHIgYjNyImJyY2NzM2FhcWBgcGIiM3IiYnJjQ3MDQxPgEXHgEVFAYHDgEjJyImJyMuATc+ARceAQcOASMnIiYnIy4BNz4BFx4BBw4BIyciJicjLgE3PgEXHgEHDgEjJyImJyMuATc+ARceAQcOASMBJgkRAwQGCAgTCQwIBwMMCAMCVgsRAgMMDA0XBQMMDAUFAR4LEQIDDAwNFwUDDAwEBQIeCxECAwwNDBcFAwsNAwUDWAQGAwcJAQMLDQoQBgIDAQcJDAQITgoPBQcIDAILGQYHCQ0BCANRCg8FBwgMAgsZBgcJDAQGA08KDwUHCAwCCxkGBwkNAQcEUQoPBQMDBhkMCAkJCAQGA1gDCAQCCwgGBxkLCwgGAw8IVwMJAwILCAYGGQwLCAcDDghYAwgEAgsIBgcZCwsIBgMPCFcDCQMCCwgGBhkMCwgHAw4IAmsMCwoSBgcCBAcZDQcJAf7PDAsCDRcFAwwNAg0WBQJkDAsCDRcFAwwMAg0XBQJmDQsCDRcEBAwNAg0XBQEB/tEBAQQJBwwZAwMFBgIFAgsZBwEBJwkICxkGBwkMDBkGAigJCAwZBgYIDQsZBwIpCQgLGQcGCQwMGQYCJgkIBw8IAgsIBgUPCgkPBAEDMQMCBhkLCwgGBhoNBgkxAwIGGQsLCAYGGg0GCTQCAgYZCwwIBwYaDQgGMQICBhkMCwgHBhoMBwgAAgEJANUC/AKpABgAHAAAJSImJy4BJwMmNjc2MhcFHgEVFAYHBQ4BIwMTNyUBmgQGAwcJAXMEBggIEwkBtAgJCQj+vgUHA0BT6v7D1QEBBAoIAZcKEgYHBPoFDwgIEASgAQEBdP7Zc7QAAAAAAQCQABADbQN0ADUAAAEVFAYjIiY9ATQmKwEDFBY7ATIWFRQGIyEiJjU0NjsBMjY1EyMiBh0BFAYjIiY9ATQ2MyEyFgNtGRESGBoSxAIZEj4RGRkR/tsSGBgSPBIZAsQSGRkREhkZEgKIERkDSqwRGRkRVhIa/XASGRkREhkZEhEZGRICkBoSVhIYGRGsERkYAAAAAAEABAAVA+8BlQBRAAAlBw4BBzAiFSoBMTAiMTAiMSImJzgBMS4BPQEhIgYHDgEPAQYmPQE0NjMhNTQ2NzQ2NTA2MTA2NTAyMToBMzAyMTAyMTAWMTAyFR4BHwEWFA8BA+SRAwYEAgEBAgIDBQMDA/2NBQoFESsVMw0RakwCcQICAgICAgIBAgICBAICBQKgCAgLs5EDBgICAwIDDAhkAgIDFRUzDQYQJktqYggLAwEBAgIBAQICAgMDoAgZCA0AAAEAC//NA/cDugBuAAAlBw4BJyY2Nz4BNw4BBwYmLwEXBw4BBwYmLwEPAQYmJy4BPwEHKgEvATc+AT8BJy4BNz4BNzMXJy4BNz4BNw4BBw4BJy4BNz4BNz4BNz4BNz4BNz4BFzY3PgE3NjsBNhYHFRQHDgEHBgcWBgcOAQcCRV8RIQwNEhwdGwUUKRURKA0cBAEEDAUKEwQJVgMQFQIGAgM7jgUQBwgCAQ4EejoPCgQEFAQFhSENCAYJFAoWRy0qJwwHAQMDCgUIGg0JEAMIGQxFbBlSXVyqRUUkAhQgAQYGQEREfQYKLggcCyVKCxANDCcqK0QXCRIIBwkNG5oEDAsBAwwORUYCDwkCBRAJaDQHBwwJCwJDGwUSCgsFARsiDSgSFy4WBBsfHBEMBg8HCBEICyEPDBQFCxwIMAcFe0RDQAYHASAUAiVHRq1dXlMbaUIMGQgAAAAAAQAO/8QD9wO8AGwAABMeARceARc2Nz4BNzY3NhceARcWFxYXHgEXFhcWFxYGBwYHDgEHBgcOAQcGJyYnLgEnJicuAScmNjc2FhceARceARceATM+ATc+ATU0JicuASciBgceARceAQcOASMqASMiBicmNjU8ATU0NjMzFiQPEh4PISIiTCsqMzIuLVEjJB8dGhstEhILDQQFBwsKEyJnRiEnKFkxMTRIPz9lJSUUAgQCAiYdHS8EBAUCDjIiKnpVUnorLTs9Kyt6UEplMBEaEwkxAwI5FRwuHC+FDwgCAhMDvAEoDxIgDRkWFR8KCQEBCAccFBQXFxwcQCUkKCowMF8tLSdJbikUDxARAQEKDx8fXTs8RgcZDRMgBAQODgoTBTJQHyg6AT8sLX5OT38rLD8BKiEUGxIJKBQTAwMeDzMVMlE1Fj4AAAkAAAFWBAACKgAYADEAowDGAUUBWgHCAfcCLAAAAS4BIyIGBw4BFRQWFx4BMzI2Nz4BNTQmJwcyFhceARUUBgcOASMiJicuATU0Njc+ATMlIgYHFS4BJyM0IiMqASMqASsBKgEjIgYrASoBIyIGIw4BBzEOAQ8BMAYHDgEHFAYxBw4BFRwBFRwBFxUwFh0BHgEXHgEfATAUMTMeARcyFhceATsBOgExMjYxMDIxMzAyMT4BNx0BHgEXMz4BPQE0JiMHFAYHDgEjIiYnMCI5AS4BJy4BJzQmNTQ2Nz4BMzIWFx4BFTc8ATUuAScuAScuAScjMCYjKgEjKgEjKgEjIgYHDgEHDgEHIgYHDgEVFBYXHgEXHgEXHgEXHgEXHgEXMhYzOgEzFjI7AToBOwE6ATMwMjE3PgE3PgE3PgE3NTY0NTQmIyIGBw4BBw4BIyImJy4BJzUuAScuATU7AT4BNzE8ATEnPgE3NT4BNz4BMzIWFx4BFx4BFSMlFRQGIyImJzU0JicuAScwIiMiBgcOAR0CMRUUBiMiJj0CMDQxLgExMCYnLgEjIgYHDgEdAQ4BIyImPQE0NjMyFhc2Mjc+ATMyFhceARcyFjMwNjE+ATc+ATM6ATMeARcUFhceARUHFAYrASImNTQ2OwEyNjU0JisBMCIxIiY1NDY7ATIWFRQGKwEiBhUUFjMxMDIxMzIWFx4BFSEUBisBIiY1NDY7ATI2NTQmKwEqATEiJjU0NjsBMhYVFAYrASIGFRQWOwE4ATsBMhYXHgEVA1wMHBERHQwLDAwLDB0RER0LDAwMDDkKEwcICAgHCBIMCxIHCAcIBwgSC/1vBQgBCRUMAQIBAQEBAgMCAQEBAQECAQEBAQEBAgEJEQgBAQEBAQEBAgIBAQYHAQEDCggDBwMDAQEDAQECAQcQCAEBAgEBAQIBDBUJAQcEBAUHCAYPBwgHEgsFCQQBBQkDBgYCAQcICBIKCxEICAfSAQYFAgYDCRULAgIBAQMBAQEBAgQCCxMJAQMBAgMBAQEBDAwDAwMJBgEDAgIFAgIDAgUJBQECAQECAQECAQEBAQEBAQIBAgEPGQoCBAIBAQEBCAYEBgICAwIIEgsLEggBAgIBAgEBA3cBBAYBgwEEAgIDAggSCgsSCAMGAgEBZAHtCQYFCAEEBAUJBQEBBgoEBQQIBgYIAQMEAQUKBgYKBAUEAQgFBggIBgQHAgEBAQYOBwsTCAEBAQEBAQIBAgEHEwsBAwEJEQcCAQgJ3hsUOQYICAY4CQwMCRkCFBwcFDgGCAgGOAkLCwkBGgUKBQ0PAh8cEzoFCAgFOQgMDAgZAQEUHR0UOAYICAY4CQwMCAEBGgUKBA0QAeIMDAwMDB0RER0MDAwMDAwdEREdDAQICAgTCwwTBwgICAcIEwsMEwgICEwHBTcICQEBAQEDCQcBAQEBAQEBAwIBAQEKFw0BAgECBAEEAgECChMIAwUDAQEBAQEBAQMDAQEKBwYBBAcBAQgFtwYIggsTCAgHAQICBgQFDQcDBgQLEwgICAgICBMLAwIDAgkQCAQIAwkMAgEGBgECAQEDAQIBDB0RCA8HCA0HAQMBAgQBAQIBAgMBAQEBAQwKAwUCAQIBAQEDAQYIAwMCBAIICAgHAgMBAQEDAgMHBAEHBQEBCwQIAwECBAIICAgIBAgFAQQCC1wFCQcGXQYLBQQEAQUEBQoGAQFbBQkIBQFcAQQKBQIEBQUEBQsGXQYHCQWJBQkFBAEBAwQHBwECAQICAQIBBwcBBwYBAgEIFQw7FBwIBgYIDAgJCx0TFB0IBgYIDAkIDAICBhgOFBwIBgYIDAgJCx0TFB0JBQYIDAgJDAICBhgOAAIARwAPA7kDcQAwAE8AAAEuASMiBg8BETQmIyIGFREnJiIHBhQfAR4BMx4BFzgBMRYyNzgBMT4BNzI2PwE2NCcTISImPQE0NjMyFh0BFBYzITI2PQE0NjMyFh0BFAYjAvoHEQkKEQeHHBQUHIcOJw4ODtgBAgECAwILGAsCAwIBAgHYDg4l/cJAWhwTFBwjGAI+GCMcFBMcWkACCQcHBweIAcAUHBwU/kGHDg4OJw7ZAQICAgEFBQECAgIB2Q4nDv4GW0DUFBwcFNQZIyMZ1BQcHBTUQFsAAAMAFABtA+wDEgAZADMARQAAJSImLwEuATU0Nj8BNhYXFgYPARceAQcOASMhIiYnJjY/AScuATc+AR8BHgEVFAYPAQ4BIwUiJiMuATcTPgEXHgEHAw4BIwEWBw8G1wcICAfXDiMLDAMNsrINAwwGEQkB1AkRBgwDDbKyDQMMCyMO1wcICAfXBg8H/scDBgMREQSfBR4RERIFngQXDt4FBbgGEQkKEQa3DAMNDiMLmJcMIw0IBwcIDSMMl5cMIw0OAgu4BhEJChEGtwUFcQEFHxECUBESBAUfEf2wDxEAAAAAAwBGAA4DuwNyADAAOgBZAAABDgEjIiYvAREUBiMiJjURBwYiJyY0PwE+ATc+ATc4ATE2Mhc4ATEeARceAR8BFhQHAzIWFyYiBz4BMwEhIiY9ATQ2MzIWHQEUFjMhMjY9ATQ2MzIWHQEOASMC+wcSCQkRB4gcFBQchw4oDg4O2QECAQIDAgsZCgIDAgECAdkODvsGDAULGQoFDAYBH/3CQFscFBMcIxkCPxgjHBQUHAFbQAJIBwcHB4f+PxMcHBMBwYcODg4nDtkBAgEBAgEGBgECAQECAdkOJw4BKgMDBgYDA/ycW0DVExwcE9UZIyMZ1RMcHBPVQFsAAAAABgAIAEgD+AM3AAwAMQBAAE8AfgCLAAAlDgEjMjY3NDAxDgEHASM1NCYnLgEjIgYHLgEjIgYHDgEdASMiBhURFBYzITI2NRE0JiU+ATMyFhcRLgEjIgYHEQU+ATMyFhcRLgEjIgYHEQEhETMRFBYXHgEzMjY3PgEzMhYXHgEXHgEzMjY3PgE3PgEzMhYXFjY3PgE1ETMRJTAiIyImJx4BFx4BFwIMAwYDBgsFAgYCAcFGDAoqYjQwWicnWjA0YioKDEYSGRkSA5oSGRn+RiBHJSdIICFIJiVGIf6bIEgnJ0ggIUgmJkghAvH8nioIBwUKBQQGBCNULipPIgIGAgMGAwMGAwIGAiJPKi5UIwkRCAcIKv5PAQEFCwQCBgIDBgO0AQIDAwEBAgECFCwLEgQREQ4ODg4REQQSCywaEv3YEhoaEgIoEhoUCgoLCv4rCQkICQHVAQoLCwr+KwkJCQkB1f21AfH+VAkQBQMDAgEODw0MAQIBAQICAQECAQwNDw4EAgUFEAkBrP4PIQQDAQIBAQEBAAAEABEADwPvA3EAJAApAC4ASQAAASM1NCYjISIGHQEjIgYVERQWOwEVFBYzITI2PQEzMjY1ETQmIyUhFSE1ASE1IRU3FAYrATU0JiMhIgYdASMiJjURNDYzITIWFREDgmsgFv4/Fx9sLUBALXIeFQHGFR5mLUBALf21AZL+bgGZ/m0BktMTDWUfFf46FR5yDRMTDQMEDRMCfb4XHx8XvUAt/tMtQDUVHh4VNUAtASwuP6enp/04g4OIDRM1FR8fFTUTDQEsDhISDv7UAAAIAEj/8wPCA40AAQAEABUAJgAvADgAQQBKAAABMSUxFQcnJiIHAQYUHwEWMjcBNjQnDwEGIi8BJjQ/ATYyHwEWFAc3FRcnNwcnFwcTFRcnNwcnFwclFTcvAQ8BHwE3MzcHJxcHNxcCHQFCJRkOKQ/9bQ4OGQ8pDgKTDg4PngQKBCYEBJ0ECwQmBAQpMhoaMjIaG2FALQ4wQC0N/tIuLhANLS4QeAEySTcRM0k3ApieAWkZDg79bQ4qDhkODgKTDykOLp4EBCYECwOeBAQmBAsDfQEaMjIaGzMy/u8BDS9ALA0vQMgBEA0tLhANLdo3ETJIOBEyAAAAAAEA4P/VAxoDqwAfAAABByIGFxMWBg8BBiYnAy4BDwEGJjUDNDY3NhYXARYGBwMT5gUDAbYDBghTCA8DtQIHAqIJDA0EBQMHBwIgCAQLAbcTBwP+fQgOAykDBQcBggMCA6IIBg0C0QYHAgEBBf4nCAwCAAAABAAzAKYDwgLGABsANABTAHUAAAEiJicuATc+ATc+ATc+ARceAQcOAQcOAQcOASMDIiYnJjY3NhYXHgEXPgE3PgEXHgEHDgEjAyImJy4BJw4BBw4BJy4BNz4BMzoBMx4BFxYGBw4BIwEiJicmNjc+ATc+ATc+ATc+ARceAQcOAQcUBhUOAQcOASMDYgULBRUPCAsRBgUGAgooFBUPCAEGBAYSCggbELc6Th0LDhMTKgsdIwUDDQkNLBIRBg8bNBvrDhgHFhwFAxQQCywREwkNE0ArAQQBMkUWCwsTBw8G/p4LGAgOBRIDDQsCAQIBCAQIKRUVEAkFBwMCDBsTCBIIAbcDAggpFRgrEAwNBRUPCAooFAQOCBAsGRAT/u9bNBQqCwsNEzUhAgILDREGDw0sESAjAVoNDSYaAgITGBMJDQssEh4/A0wmEyoLBQT+xgoKESsOAxUZBAMCBRAHFBEKCCkVDRAFAgEEGC8OBQYAAAABAFoAqwOvAsQAQAAAAQ4BBw4BBw4BIyoBIyYnLgEnJicuAQcOAQcOAQcOAQcuASc+ATc2Nz4BNzYzMTIXHgEXFhceATMyNjc+ATceARcDrw0VDRMnFQtEPAEGASUcHC8WFRgQPCMjMxAUJxQFEw0QFgYMGA0XFhYxHR0lKB4fMhYXGBA7ISA5EBs0IBAbBgIRGjgdKVMgEUoCFBRDLCwyI5QCAYsgKlIgCBYNHUMlGDMbMy0tQhMTFBVFLi40IZCQIT1tIx1AJQAAAAAFAE8ADwOxA3MAVABeAGgAcgB8AAABBwYiJzgBIy4BPQEjFTMyFg8BBiIvASY2OwE1IxUUBi8CJjQ/AzYWHQEzNSMiJic4ATEmND8BNjIfARYUBzgBMQ4BKwEVMzU0Njc2Mh8BFhQHJTEHIiYnHgE7ATcOASsBNTM+ATcTLgE9ATMVHgEXNQ4BHQEjNTQ2NwOxxAIFAgIDBbokCwwEUQQOA1EDCwsktQsGjTULCzMEiwYLtSYGDAECAlMFDgVTAQECCwYnugMDAgYDxAsL/iklCAkCAgsGJYICCQglJwQKA4YFBgMBBAMDAwIDBQGzUwICAgsGJ7gLBsILC8IGC7glCwsDPBcFDQQVAjoDCwslugQEAgUCxAsLxAMEAgMFuicGCgMBAVMFDgXpAgUFAwUGBQYDAQQD/r4CCQgkJgUJA7wDCgYnJAgMAgAAAAEAbwAvA7MDbwAuAAABBwYmPQEjERQGIyImNREhIiY1NDYzITUjIiY/ATYyHwEWBisBFTM1NDYfARYGBwOxxAgJuhYODxX+uQ4WFg4BRycLCwNTBQ4FUwMLCye6CwbECgELAbNTAwsLJ/65DhYWDgFHFQ8OFrgKB8QLC8QHCrgnCwsDUwQNBQADAGP/wAOeA8ABJgHcAgsAAAEiBiMOAQcOAQcwBjEiBiM4ATEOATEGIgcwBjEOAQcOAQcwIjEOAQcOASciJicuAScuAScuAScuAScuAScuAScuASceARcuAQc2MhcmBgcwIjEiBiMGIgc4ASMOASMOAQcOAQc+ATcOAQcyNjEOAQcOAQc4ATEOASMUMCM4ARUjMAYHMAYxDgEjBjAHIgYjDgEHMCIxBjAHOAExDgEHKgEjMSIwIy4BJx4BFy4BJyIwMTQiMSImNS4BJyYnLgEnJjc+ATceARcxFhceARcWFx4BFxU+ATM+ATc+ATcwNjMuAScmJy4BJyYnNjc+ATc2MTAXHgEXFhcOAQcOAQcOAQcyFhUeARceATMwMjM6ATcxPgE3Njc+ATc2NzA2Nx4BFxYVDgEHBgcHMAYjMAYxDgEjOAEjDgEHDgEHDgEPAQ4BBwYiFSIwMQ4BBzAiMQ4BMQ4BBzgBMQ4BByIUIyIGByIGIzAGMTAiMQ4BIzAiMRQiMTAiIw4BJy4BJzAmIzgBMSImMSI0IyImJzgBIy4BJzUuAScuAScuAScuAScuAScuAScuASMOAQcwBjEOAQcOAQcOAQcOAQcOAQcOAQc+ATcOASMyNjcOASMGJicWFx4BFxYXNjc+ATc2Nw4BBwUOASsBIiYnLgEnMjY3PgE/AT4BNz4BMzEeARceATMyNjcyFhceARceARcyFjMHA4ADBgMIEAcEBwQBAQIBAQIBAQEBFCERCBAJAQECAQoXDQoRCAQHBAULBQEBAQECAQQHBAYLBQsWDQIDAhAkEwQIBQcPBwEBAwIBAwEBAQQCBw4GChAIAQIBAwYDAQIJEgoECAUBAQEBAQIBAQEBAQEBAQEBAQEBAQEBCRIKAQEBAQEFCwUCBQMJEAcBAQEBCA4GEAwLDwICBA4cDgEBAQsMDBoNDg4LGA8BAQEDCAMGDgcBAQwWCBANDhkKCwpENzdMFBUVFE43N0UYMBoQJxkBAwIBAQcPCAQJBAEBAQIBHCoPDw4OGQsMCgECDRoOAwEHBwYJGAEBAQIEAgEDBgMEBwMCAwIBEiQUAQEBAQEBAQECAgQCAgIBAQEBAQEBAQECAQECAQEBAQELGA0KEgkBAQEBAQEBAQEBDxoNBgsFAwUDAQMCAQIBBAkFBAoFBw8ICRAHAQQHAwUIBAcPBwsZDQYNBwIEAgIEAgwZDAkTCggPCAsXCyszNFwiIwkLLCxxOzomAgMC/v4XMhoBGzMaDBgLAQEBBg4HBAIEAQEBAQoUCg0hFA0YDQEBAQkRCQIGAwEBAQEB0AEBBAMBBAIBAgEBAQEBDSIQCBAHAQIBCAsBCAQDBQMFCgUBAQEBAgEECAQGCwUKEgcBAgEKCwEBAQEBAQEBAQEBAwcEBg8HAQIBAwYCAggSCQQIBAECAQECAQEBAQEBAgEBAQEBBggBAQICAQEBAgkGAQEBBg0HLTMzckA/RgEBAgMFAygoJ00mJiUaOh0BAQEEBwMGDQYCGjIWJicnTSUlIg0TFCYODg4OJhQUDFeTQilUJwIFAwEBBgoEAgIBLVolJicnTicmJQYFAgEBNTIxXCoqJkEBAQEDAwQDAwYEAQQBARIlDwEBAQEBAQECAgEBAQEBAQEBAQEBAQQEAgEGBAEBAQEBCRYMAQUMBQMGAgIDAQECAQUIAwQHAwQDAQYEAQIGAgQJBAcOBwwXCgQJAwECAQECAQYGAwQDBAIEBFk+Pk4UEwQFGhltV1d/AQEBjBUVFxcMGw8BAQYNBwUCAwIBAQ8XCQ0WCgkBAQgNBQIDAgEBAAAAAgAT/9MD7QOtAC0AWwAAATU0Njc2Fh8BHgEVFgYPAQ4BJy4BNzUhFRQGBwYmLwEuATc0Nj8BPgEXHgEHFTcjIiYnJjY/AT4BMzYWHwEeAQcOAScjETMyFhcWBg8BDgEnIiYvAS4BNz4BFzMDHAYFBg4JnwUFAQUGnQkNBwUGAf3EBQUGDwieBgYBBQaeCQ4GBQYB32sLDwICBQmfBQ4IBw4GnQkGAwMNDGtrCw4DAgYIngYNBwgOBp4JBQICDgxrAf5rCw8CAgUJnwUOCAcOBp0JBgMDDQxrawsOAwIGCJ4GDQcIDgaeCQUCAg4Ma94GBQYOCZ8FBQEFBp0JDQcFBgH9xAUFBg8IngYGAQUGngkOBgUGAQAAAAEAEwD7A+0ChQAtAAABNTQ2NzYWHwEeARUWBg8BDgEnLgE3NSEVFAYHBiYvAS4BNzQ2PwE+ARceAQcVAxwGBQYOCZ8FBQEFBp0JDQcFBgH9xAUFBg8IngYGAQUGngkOBgUGAQH+awsPAgIFCZ8FDggHDgadCQYDAw0Ma2sLDgMCBgieBg0HCA4GngkFAgIODGsAAAABATv/0wLFA60ALQAAJTMyFhcWBg8BDgEjBiYvAS4BNz4BFzMRIyImJyY2PwE+ARcyFh8BHgEHDgEnIwI+awsPAgIFCZ8FDggHDgadCQYDAw0Ma2sLDgMCBgieBg0HCA4GngkFAgIODGukBgUGDgmfBQUBBQadCQ0HBQYBAjwFBQYPCJ4GBgEFBp4JDgYFBgEAAAAAAQAVAQQD6wJ6AB4AAAEhNTQmJyYGDwEOARUUFh8BHgE3PgE9ASEyNj0BNCYD3Pz+BgUFDQiVBQYGBZUIDQUFBgMCBgkJAfxkCw0CAQYIlgMMCAgLB5UIBgECDgpmCQZWBgsAAAEAFQEGA+sCfgAfAAATFRQWMyEVFBYXFjY/AT4BNTQmLwEuAQcOAR0BIQ4BFRUHCAMCBgUFDQiVBQYGBZUIDQUFBvz+BgkB61YEC2YLDQIBBgiWBA0ICA0FlQgGAQMNCmQFDAQAAAAAAgAPAMsD7wK3AD4ARAAAATgBMQ4BIyEVFAYHBiYvAS4BNTQ2PwE+ARceAR0BIToBMzEyNjc4ATE+ATU8ATU0Jic0NjsBMhYVHAEVFgYHJw4BIzI2A2YULxj9rAMFBQwHgAQEBASABwwFBQMCVAEBAggNByk5AQEGBE0FCAJMPzsHDwYIDQFNCAlaCQsDAgQIgAUKBwYMA4AGBgECDApXAgIKRy0DJxgVKQ0ECAYGGm0GR3EZUwICAgAAAAABAGv/0QOVA68AHwAABREjIiYnJjY3AT4BFzIWFwEeAQcOASsBERQGKwEiJjUBb8sYHQQFDREBRQsaEBEbCwFHEQ0FBB0YzREN5A0REQIRDAsNHhEBRwsMAgoL/rkRHg0LDP3vDRERDQAAAAAJAAD/wAQAA8AAAwAHAAsADwATABcAGwAfACMAADchESERIREhESERIQEhESEVIREhFSERIQEhESEVIREhESERIQABAP8AAQD/AAEA/wABgAEA/wABAP8AAQD/AAGAAQD/AAEA/wABAP8AwP8AAoD/AAKA/wABAP8AgP8AgP8AAoD/AID/AAQA/wAAAAUAJv/AA9oDwAAIAAwAFgAZACEAAAE1IQERMxUhESUVIzcDIxE3NSEVIwERExUjASERMzUhESMC9/42/vnjAtH9O2hoDJLvAUOY/vjuaAH6/c7yAUICAwS8/vP9ybwDRDFoaP2YAa8C8W3+9f7WAa1p/gABr/P9XgAAAAADAA0AAAPzA2IACwAbACwAACUBJiIHAQYWMyEWNiUjIiY9ATQ2OwEyFh0BFAYnIyImPQE0NjsBMhYdARQGIwPz/joTNRL+OhMbJQOPJBn+J1oICQsGWggJCQhaCAkLBloICQkITQMVICD86yAtAi9PCgdVCAkKB1UHCsYLBv4ICQsG/AgLAAAAAQER/8AC7wPAABQAAAUjESM1MzU0NjsBFSMiBh0BMwcjEwJRwICAUYCNWjETnhONAkACALFpa3uxJSFYsf4AAAgACQBGA/cDOgAQACEAMgBDAFMAYwB0AIQAABMRFBYzITI2NRE0JiMhIgYVEyMiJj0BNDY7ATIWHQEOASM1IyImPQE0NjsBMhYdAQ4BIzUjIiY9ATQ2OwEyFh0BDgEjASEiJjURNDYzITIWFREUBjMjIiY9ATQ2OwEyFh0BFgYnIyImPQE0NjsBMhYdARYGIzUjIiY9ATQ2OwEyFh0BFgYJCwgDyAgLCwj8OAgLqFUICwsIVwgLAQwIVQgLCwhXCAsBDAhVCAsLCFcICwEMCAI4/i4ICwsIAdIICwuzVwgLCwhXCAsCDQhXCAsLCFcICwINCFcICwsIVwgLAg0DJv00CAwMCALMCAwMCP1eCwhYCAsLCFgGDfwLCFgICwsIVggN/gsIWAgLCwhYCAv+BgsIAk8IDAwI/bEGDQsIWAgLCwhYBg38CwhYCAsLCFYIDf4LCFgICwsIWAgLAAIACgAaA/cDYgAcAEUAAAEhBgcOAQcGBw4BBwYmIyE2Nz4BNzY3PgE3NhYzJSEiJgcOAQcOAQcmNSY0NTY1NDY3NhY7ATIWHwEWNjMyNhceARcWBhcBLwLIDxAQIBEREQYMEhI5Gf03Dg8PHw8PDwgNGhQ2GgJA/fosZCRBLBUJFQgCAQEQKStsNmYvSQ8LEGw3HVYaCxYDCQwFAdcvLy9fMC8wFSEIBwMrLi9fMC8tGCwEBwVWBQkQcEAgPh49QECEQkJBMDoFBQUEIDMoAQYKBRUIG1kdAAH//gAiBAADXgAgAAABEQ4BByEuASc2NTY0NTQ1PgE3Mx4BFxYzOgE3MjMeARcEAAUmIvyYICcGAQEFJiLoVD5OMjM0aDU0NCIlBgKL/eYiJgcHJiJUVFOoU1RUIiYHBXILAwEFKSEAAwAJABMD9QNrABAAIQAyAAATITIWHQEUBiMhIiY9ATQ2MxEhMhYdARQGIyEiJj0BNDYzESEyFh0BFAYjISImPQE0NjMtA6QOFhYO/FwPFRUPA6QOFhYO/FwPFRUPA6QOFhYO/FwPFRUPA2sWD0oPFhYPShAV/p4WD0oPFhYPShAV/p0VD0sOFhYOSxAUAAAABQAGAB4D/ANmACgAOQBKAFYAYgAAJTQmJzAnLgEnJicuASMhIgYHBgcOAQcGBwYWFxUUFjMhMjY3PgE1PgEBPgEzITIWFxMhNjc+ATc2NwEUBiMhIiY9ATQ2MyEyFh0BJxQGIyImNTQ2MzIWFxQGIyImNTQ2MzIWA/wBBBQUMxcXBQw0J/3tGjMIBBcWNBYVBAMCATcjAzUYIQwOEgEB/OgFEgUB+gQWA2n8/gQPDyMPDwMCwg4L/OgLDg4LAxgLDvMeFRUeHhUVHqceFhUeHhUWHpVKggpBQZ9GRgwYKiQZC0REnkNECAp/MzMaQhQKDiUPAQ0Cbg4HBw7+ygsvLmkuLQr9jAkODgnNCg4OCs1pFR4eFRUeHhUVHh4VFR4eAAAAAAIAM//RA7EDsQAYADEAABMmNDcBNiYvASYGBwEGFBcBHgE/AT4BJwEhJjQ3ATYmLwEmBgcBBhQXAR4BPwE+AScB1wQEAVIMAg8kDiUN/nMNDQGNDSUOJA8CDP6uAYkFBQFRDQMOJA8lDP51DQ0BiwwlDyQOAw3+rwG1BQ4FAYQOJQ0gDQMO/jUOKA7+Nw4DDSANJQ4BhAUOBQGEDiUNIA0DDv41DigO/jcOAw0gDSUOAYQAAAIADwA1A/EDSwBeAKAAABMiJicuATU0Njc+ATEwNz4BNzY/Az4BNz4BMzYWFzAXHgEXFhcwFjM2Jjc0Njc2FjMyNhcWBhUUBhceARceARceARUUBgcOAQcqAScuASMmJy4BJyYjIgcOAQcGJwEmNj0BJiIHBhUcARcUFRQWBwYmKwEqAScuAScmNj0BNCY3PgE3AT4BMzA2MxYXHgEXFhcWBh0BFBYHDgEHBiIrAUkKEAQFFxAKAxAyM4A6Og8NCwYIDggFEQESHQsVFTMWFgIJAQQFAQMCCDYMEDMIBQEDAwIJBhRPAgQTDAUFGAkEBgMFFQIWQUGKNzYCAkNDokVEBAIGAgICmgIBAQICAjkFghIgCgMMAgUBAgIBDAgBRAIBAgICBjc4gjU1AQICAQUCDAMLIRLAAXwRCAgVCggOCAMMKitqMTAMCwsCBg4DAgMBBwkSEisSEgEIA2gOAgoBCAEDCgaZJRIkCgUHBRBEAQUNCAgPBwYfAQIBFhM2NnItLTg4hjc4Af65AjIIsQICARgZQyIjFQMZAgEBBQELBQsrFsULFgUHBgYBCwICAgMtLWotLAIFGAvHFCsLBAwBBQAAAgAAAEAEAANAAAsAEAAAARQWMzI2NTQmIyIGASEJATcDAEs1NUtLNTVLAQD8AAEAAVWrAsA1S0s1NUtL/UsCq/5VgAAMAA0AkQPxAw0ADwAgADEAQgBTAGQAdQCFAJcApwC4AMgAACUhIiY1ETQ2MyEyFhURFAYBIgYVERQWMyEyNjURNCYjIRcUBisBIiY9ATQ2OwEyFh0BMxQGKwEiJj0BNDY7ATIWHQEzFAYrASImPQE0NjsBMhYdATMUBisBIiY9ATQ2OwEyFh0BBRQGKwEiJj0BNDY7ATIWHQEzFAYrASImPQE0NjsBMhYVFxQGKwEiJj0BNDY7ATIWHQEjMxQGKwEiJj0BNDY7ATIWFTcUBisBIiY9ATQ2OwEyFh0BAxQGIyEiJj0BNDYzITIWFQOT/NgnNzcnAygnNzf8sQwQEAwDKAsREQv82JcJCDUHCgkINQYLlQkINQYLCQg1BwqUCQg2BgsJCDYGC5MJCDYGCwkINgYL/qAJCDYGCwkINgYLkwkINQcKCQg1BguTCQgzBgsJCDUHCgKTCQg1BgsJCDUHCj4JCDUGCwkINQcKewkI/ogGCwkIAXoGC5E4JgHAJjg4Jv5AKDYCOBEL/kALERELAcALEY0HCgkINQYLCQg1BwoJCDUGCwkINQcKCQg1BgsJCDUHCgkINQYLCQg1mAYLCQg2BgsJCDYGCwkINgYLCQg2BgsJCDYGCwkINgYLCQg2BgsJCGIHCgkINQYLCQg1/uIHCgkINQcKCQgAAgBi/8kDoAO3ACEAKgAAATQnLgEnJiMiBw4BBwYdASMiBhURFBYzITI2NRE0JisBNSE0NjMyFh0BIQMVEhFGNDRERDQ0RhESRRwoMCECnCIvJx1H/ktOUlNN/sACpjQxMU0XFxcYTTExM7MvIv54Ii8vIgGIIi+zOGZkOrMAAAABAAsBUwP1Ai8AFAAAAQYmIyEiBicuATc2FjMhMhYXFhQHA/URhjj9tjqCEwoCChGGOgKkKz4MCgoBdSQCBSUScRclAwUdFW8UAAAABAAGAKQD/ALcAGMAfgDuAQwAAAEHDgEHDgEHDgEjIiYnLgE1NDY3PgEzMhYXHgEVFAYHDgEdARcyNjc+ATc+AT8BIzcyNjc+ATc+ATc+ATMyFhceARUUBgcOASMiJicuATU0Njc+ATU8AScmIiMiBgcOAQczDwElBw4BBw4BBw4BFRQWFwcuATU0Njc+ATc+ATcHNx4BFz4BNz4BNz4BMzIWFx4BFRQGBw4BIyImJy4BIyIGBw4BBx4BFx4BMzI2Nz4BNxcOAQcOASMiJicuAScuAScOAQcOAQcOASMiJicuATU0Njc+ATMyFhceATMyNjc+ATc+ATcuAScuASMqAQc3Ezc+ATc+ATc+ATc+ATU0Jic3HgEVFAYHDgEHDgEHAREkDRkLDRsQECYUDRMHBgcGBQUNCgYMAwMEAwIBAwQFBwMIDAQDCghAKwsLEgUFDAQSJBMTKhYPFQcGBwQFBQoGBwoFBAQDAQMBAgEDAgoTCRAaCi0LJgFABhcjDxYkDg8NDAsEKikNDxAwIhg7IiJtDhUFDxgGChIGBw8GCA0FBAQEBAULCAUMBgcJAQcNBggUDQ0WCAUJBQUHAwUNCgsPGg0JFAkKEAYHDAUEDQYSHAwJEgcGEAgIDAUFBAYFBQwIBQoFCAoDBQcFBQwHBBAMDxgIBQ0IBQoGBNcHER8MDBoNDRUIDAoNCwUpKg4OEDEhGjokAiCPM0oWFyILDAoGBQUMBgcKBQUDAwMDCQUFBwMDAgICAgMECBELBiYf9yQDBAMNCyAtDQ4OBgUGDgoIDQQFBAQFBAgHAwkFBQYCAQMCAgwLEjkoJQS8ERAkFSBPLy5XKBk5HBI4cDYgQB4lQRwVIw+iExczHRcfCA0OBQMEBAUFDAgICwUFAwICAQMEBAcaFS45CgYHAwIDEA0HFh4KBgkEBQUNCgkgFxciDAsNAwQDBAUFDAYIDQUFBgMCAwMDAQILBgUUEDZDCwcIAgv+exENHA8OKxobOh4oSiQZOR0ROHA2IEAeJUAdFSMPAAEAAAAkBAADXgAaAAABIiMGIiMiJy4BJyMOAQcRHgEXIT4BNxEuAScDsTM0NGg0MzJMP1XoIiYFBSYiA2YgJwYGJiMC2gEDC3IFByYi/WQhJwcHJyECGCEpBQAABAAAACIEAANgAAMABwATABgAABMRIREDIREhBRQWMzI2NTQmIyIGEyETATcABABA/IADgP8AOCgoODgoKDjA/QDAAQCAA2D8wgM+/QACwKAoODgoKDg4/fgCAP7AYAAABwAJ/80D+gOzAAQACQAOABMAFwAbAB8AABMRIREhASE1IRU3ITUhFTchNSEVASE1ITUhNSE1ITUhCQPx/A8B6v5LAbMC/ksBswL+SwGzAdH+UQGv/lEBr/5RAa8Ds/waA+b8ScbG5tPT9cfH/iXGINMixwAEAAQA9QP8AosAEQAjADUARwAAExUjNTQ2Nz4BNxcOAQcOAQczBRUjNTQ2Nz4BNxcOAQcOAQczNzUzFRQGBw4BByc+ATc+ATUjJTUzFRQGBw4BByc+ATc+ATUjpKANDRE3JSQWIwkLCwJPAQCgDQ0RNyUkFiMJCwsCT7igDQ0RNyckFiELCw1NAQCgDQ0RNyckFiELCw1NAautiDhQGCIxEjoKHBEUNiMCrYg4UBgiMRI6ChwRFDYjKK2IOE8ZIjMQOgocFBM2IQKtiDhPGSIzEDoKHBQTNiEAAAAAAgAN/8sD8wO3ABAAIQAABSEiJjURNDYzITIWFREOASMpASImNRE0NjMhMhYVERQGIwGL/qoQGBcRAVYQGAEXEAJA/qoQGBcRAVYQGBcRNRcRA5wQGBYS/GIQFhcRA5wQGBYS/GIQFgAEAAL/wgP+A74ABwAbACAAMQAAPwEnBxUzFTcBNCYjIgYHAQ4BFRQWMzI2NwE+AScJASERARQGDwEBNz4BMzIWHwEeARX3PqA+VkoBXgcIAwYB/pMCAgcIAwYBAW0DASQBGP3R/ugD/A0Nb/7pbw0dEhEgDJ4NDRo9nD5IVgMCbwgGAgL+kwEGAwgHAgIBbQEGhP7o/dEBGAHvEh8LbwEXbw0NDQ2eDCARAAAAAQA3/80DyQOxACEAAAEWBgcGBw4BBwYHDgEnLgE1ETQmNzYWFxYXHgEXFhceARUDyQElC2VkY8ZjY2QLIg0JBAEIDisNY2JixGNiYw0lAcINFwQ4NzduNjc3BhYHBRkVAzccVAoOGwg3NzZsNzc4BhMLAAABABH/zQPzA7UAMAAAARYUBwYmKwEGFhUUBgcGIicmNj0BIyIGJy4BNzYWOwE2JjU0Njc2FhcWBhURITYWFwPzCgoRhDi1AwEFHRNvFCQCtTiCEwkDChKFOLMDAQstMWANBgIBESg9DgILFG4UJAI7kUMrPg4KChGIOLMFJRJxFSQCO5BEM0QEBwsiEDMV/vIDBRwAAwAP/80D8wOzADcAZwB9AAABFgcOAQcGBwYHDgEHBgcGJy4BJyYnJicuAScmJyY3PgE3Njc+ATc+ATc2Fx4BFxYXFhceARcWFyU2Jy4BJyYnJgYHDgEVFBYXHgEzMjY3PgEXFgYHDgEHDgEXFjIzOgE/AT4BNz4BNwM8AScuAQcGFhUUBhcWNjMyFjc2JjUD8wQICSQZGR0dIyRUMDA3OTY1XikoICEcHCoODQQGCAgjGhkeHkErKGc4PTY1XicnHx4cHCsPDgT+0w8KCzMlJScrQCAQLBkJChQLCAsEHFkJCjoYFSEGAwQJBykQEyYJCQg5GA8aBooFGEYbEAEDCQooEA8rBggDAeI9NTZdJycgIBwcKw0OBAQICSQZGR0eJCNTMDA3PjY2XCYnICA2FxUdBQQJCSQZGRwcIyRVMTE3JzApKDsREQQDDw4IHRAPFgwMHQoDEgUoJS8VEy0ZD0YJBwdCGigaDigX/qYQIQ0DBwYDKBUOKgoKBAIKCicNAAAAAAEADQCrA/cC1QA6AAABJicuAQcGBw4BJyY2NzY3PgE3NhcWFx4BFxYXNjc+ATc2FxYGFRQWFRQWBwYmIyImIyIGJyY2Nz4BNwKzTVBQolBQTwsVCBJOEygoKFEpKCg4NTZqNTY3DRcWLxQVDBEHAgYjFUAYN2k4EU4LCjARFSYWAWJLNTYxCQkzCAgIEUcOIRcXHAUGAwMODjQnKDUHGRgwDw4OFEIUNGg6GFEXDAICBBURMBIWJhUAAAAAAQAL/8kD9wO3AGIAACUUBgcOAScuAScmJy4BJyYnBgcOAQcGBw4BJy4BJy4BNz4BNzY3PgE3NjcmJy4BJyYnLgEnJjY3PgEXHgEXFhceARcWFzY3PgE3Njc+ARceARceAQcOAQcGBw4BBwYHAR4BFQP3Ig8QJiMbNhEgIiJEISEfIiIiQyMiIxU3JRYhCxArCAY6Ex8jI0YhIh0eISFFIyIhEzoGCCcSECslGDIRISIhQiAgHyIiIUIiISMUPCUVIA0SKAcFORUgIiJEIiEgAREVPEsdIA4QLAUDOhQgIiJFIiIfICEhQyIiIxVBBQMhDRAqIRozEyAiI0YiIh4bISFGIyIfETIYJSgREC8MBjoTISEhQyAhHyAgIUMiIiIVQQUDIQ0RKSEdMBMgIyJGIiIg/vMSNB4AAgAL/80D8wO3ADkAVAAAEyYnJjY3Njc2Nz4BNzY3NhceARcWFx4BBw4BBx4BFx4BFx4BFxYGJy4BLwEGBw4BJyYnJicuAScmJwUWNz4BNzYnLgEnLgEHDgEHDgEXFhceARcWFyITBAUQEhMaGiIiUjAwNUU9PGMmJhkbJgMDKCALHA8cOh8OIQYPQzASHw2vIS8vajc3MSsmJj8ZGRABUUtGRmESER8TQisbTi9RbhgQDwEDERI3JSUqAXo0NjZnLy8lJR8gLw8OAwUQDzsnJykveUVDbi0QHQ8dOCAOIBItRxIGIg2tHBISDQUGExAZGUAmJix0EBcYZklIUTFMFg4RAwhYMSBMKC4oKD4WFQoAAAAAAv/+/7wEBAPCAJQAoAAAAS4BJy4BJyY2Nz4BNzYmLwEuAQ8BDgEnLgEnLgEnLgErASIGBw4BBw4BBwYmLwEmBgcOAQcOARceARceAQcOAQcOAQcOAR0BFBYfAR4BFxYGBw4BBwYWHwEeATc+ATc+ARceARceARceATsBMjY3PgE3PgE3NhYXHgEXFjY/AT4BJy4BJy4BNz4BNz4BNz4BPQEuAScBIiY1NDYzMhYVFAYD4hUpFQ0ZBQUECAwaCwgDClsKHAtFCx8LCxIDAgUEARYNgA0YAQUHAwITCwsfDEQLHAoWLxcJAwgNGQsIAgMFGQ0TKRUNExMNUw0ZBQUFBwwaCwgDClsKHAsSIxILHQsLEQIDBwUBFw5+DRYBAwcFAhMLCx0LEiMSCxwKXAkDCA0ZCwgDBAUYDhUpFQ0TARQN/h5LbGpNS2xsAiYEBwQCEwsMHgwRIxALHApcCQMIMQgDBQQZDRIoFQ0TEw0VKRUNGQUFBggxCAMJGC4WChwLEiERDB8LCxECBAcEARcOgA0WAw0CEwsLHwwRIxALHApcCQMIDRkLCAIDBRkNFSkVDRMTDRUqFg0XBQQDCA0ZCwgDCVwKHAsSIREMHwsLEQIDBwUBFw6ADhUD/uNsS0tsbEtLbAAAAAACAAkAFwP8A2kAMAB0AAABHgEHDgEHDgEHDgEnLgE9AQYHDgEHBgcOASMiNjc+ATc2Nz4BNzY3NiYXHgEXHgEXAwYWBw4BBwYmIyEiBicuAScmNjU0Jjc+ATc2FjsBDgEVDgEHDgEHBiYrASIGBwYWFREcARcWNjMhMjY3NiY3PgE3PgEDwA42CAUpDiI/IwstExABW1FQfisrEAIICRcGAghCMiQoKWA4N0IIDx4XJA4eQCIVBAkKDFA7JlQo/r4oUSUzTgMFBQUFBFs+PHY77QICGiwWEycVI1UkTyw9CggEKBpmHgGULDwLBQcGAhMHFSUCrQ8tIhUkECE/IgsxBQU5FWQBDw9ENjZPCxJZE1iCLyAYGCAJCAEakgMEKg4fPiP+rzpgKDRKBQMDAwgLVTk9iUVFiDxDWAUEBBAfEQUGBwQUAQUFDB0YUiD+6DZqDwkFCh8QKhQHDQYTKwAAAgAz/88DsQOxABgAMQAAJQYWHwEWNjcBNjQnAS4BDwEOARcBFhQHASEGFh8BFjY3ATY0JwEuAQ8BDgEXARYUBwEBvg0DDiQPJQwBiw0N/nUMJQ8kDgMNAVEFBf6v/nUNAw4lDiUNAYoNDf52DSUOJQ4DDQFRBQX+ry8OJQ0gDQMOAckOKA4BzQ4DDSANJQ7+egUOBf58DiUNIA0DDgHJDigOAc0OAw0gDSUO/noFDgX+fAAABwAJ/80D+gOzAAQACgAQABYAGgAeACIAABMRIREhASE1IRUzNSE1IRUzNSE1IRUzASE1ITUhNSE1ITUhCQPx/A8B6v5LAbMC/ksBswL+SwGzAgHP/lEBr/5RAa/+UQGvA7P8GgPm/EnGxubT0/XHx/4lxiDTIscAAgAC/+kD+gOXABkAMgAAAREhETQ3PgE3Njc2Nz4BNzY3Fw4BBw4BBzMFESERNDc+ATc2NzY3PgE3NjcXDgEHDgEHAX7+hAQEEAsMDxYbGkImJyxWN08YGh0DugJg/oQEBBALDA8VGhtBJiYtVjdPGBodAwGC/mcBREE5OV8mJx0nIiM7GRoUiBZELC2BVwL+ZwFEQTk5XyYnHSciIzsZGBSIF0MtLIFXAAAAAAMAAP/EA/oDwAAkAEkAbgAAAREUBgcOASsBIiYnLgE9ATQ2Nz4BOwE1NDY3PgE7ATIWFx4BFQU0JicuAScuASMiBgcOAQcOARUUFhceARceATMyNjc+ATc+ATUzFAYHDgEHDgEjIiYnLgEnLgE1NDY3PgE3PgEzMhYXHgEXHgEVAlEDAwQGBdMFBwMEAwMEAwcFlQMDAwcFKwUHAwEDARMZGBhCKCpaMTJaKilBGBgZGRgYQigqWjIxWioqQBgaF5YjIiFdOzt/RkWAOztcIyAiIyEiXTs7fkdFgDs7WyMgIwKt/tcFBgQDAwMDBAYFKwUHAwMD6QUHAwMDAwMDCQPrMlopKkEYGRgZGBhDKClaMjFbKSpAGBgZGRgYQigpXDBFgDs7WyMiIyMiIV07O4BFRYA7O1wjISMjISJdOzuARQAAAAEAAAAiBAADXgBLAAABDgEHPgE3DgEHLgEjIgcOAQcGFRQWFyYnLgEnJicOARUUFhcuAScVFBYXDgEjIiYnHgEzDgEjKgEnFhceARcWMzI3PgE3Nj0BPgE3BAAdPSAgMQseQyUdUC0rJiY5EBEDA0A9PW8wMCgMDzIsGjAWYEgNHA4KFQoVa0Q2hEoNGQsjJiZRKyotkW9wlycnHzUVAv4NEAUTOyUSGQgeJBEQOSYmKw0XCwMRETgnKDAYNB02XB0CDQsCTXIQBAMDAj9TKTACFhIRGAcGNjesampoHBU2IAAAAAEACwCpA/UC0wA6AAABHgEHBiYjIgYjIgYnJjY1NDY1NCY3NhceARcWFzY3PgE3Njc2Fx4BFxYXHgEHBiYnJicmBgcGBx4BFwGgEi8KC04ROGk3GEAUIgQCBhAMFRUuFxYNODU1ajY1OCgpKFEoKCgSTxIIFQtPUFCiUE9OFSYWAQ8SMBETAgIEDhdRGDpoNBY/FQ4ODzAYGQc1KCc1Dg4CAwYFHBcXIQ5HEQgICDQJCjE3NksTJhgAAAAAAgAA/8QEAAO+AFoA3gAAAS4BIy4BBw4BByIGBwYHDgEHBh0BHgEfAR4BHwceARUfAx4BFx4BFx4BFzMfAh4BFx4BMx4BHwMeATMeATcyNj8BNjc+ATc2NTQnLgEnJicFFgYXHgEXHgE3NiYnNhYXHgEXHgEXDgEHHgEXHgEXPgE3PgE3PgE3JjYnLgEvAjYmJz4BFzYyMxczJz4BNy4BJz4BMzYmNTQ2NTYmNw4BByImJyY2NycGJgcOAQcuASc+ATczMhceARcWFRQHDgEHBiMiJy4BJyY1NDc+ATc2Nx4BFwKxAwcFKFcwMVknAQYBRjo5UxcXAgMEAgMJBQQLBBMNAg0BAw0GEQ0HDQgICwQEBQICDQINAwcFAQYBAgQDERcrBQcFI0sqHjcaCFNGRmYdHBkYWT49Sv5rDQ4DARAGBQ0OBBIFBw4HFTooBRAFDiMRECcTBCsgBQoFBAUOFVUYBRAHBCkKsRwFFQwNGBMGKRUJFwoRJBMCBgUFEQYDDhgBHAgQJwwIDAUDKAoPFSMPEREPDBsQBhAIE1dNTHIhISEhckxNV1dNTHIhIQoLKBwcIg0VBwOiAgINDAECEg4DAhwwL3pJSVArDhsODQ4dDA0aCicVBBQBAwIPCRMPBg0GBQkDAgUCCAMIAgUCAQMBAgEJChECAwkJAQgFAhUuL4JQUFlTTEt+LzAbxBs8HgwYCwodCwsYCgEQBxMdAwsSCRUnExUgEliIOwQLBiZAGiU6JRsuExMKEBMXHR0NCSEODCoqCBQHCAwFAwEHAwMICwUMFBMHGRECAiITFCoDDAQEIwYDBgEQIA4hIXNMTVZXTUxyISEhIXJMTVcxLS5TJCQdBhIOAAAAAAIAEf/NA/wDvgA+AEQAAAElBgcOAQcGJwYHDgEHBgcOAScuAScuATc+ATc2Nz4BNzY3PgE3NiYnJjY3PgE3NhYXDgEPAQ4BFR4BFx4BFwE2JgcGFgLiARoLHh9hQkFQLC0uWy0uLBhHMhMlEBouGw4+GCEgHz8gICEKJAMCCwEFMiIkaD5UbitJjEQWAQUBLwkQHBD95CoZLjQdAgZlQzc4Sg4OESktLVsuLiwYMBcIJhAYVjAZNxghHx8+IB8iCiEICikNQm8kKDoFBjYoGTUYbQgWBgsiBhAaDP46Dl4KCWsAAAEAAv/EA/wDvAAtAAAlFx4BBw4BIyEiJicuATURNDY3NhYfAQEnLgE3PgEzITIWFx4BFREUBgcGJi8BASJrCwkDAxQS/sIJEwgICQgJCBMMagI6awsJAwMWEAE7DBIHCAkJCAgUC2pmagsUCAgJCQgHEgwBORIUAwMIDGsCOmoLFAgICQcICBMM/sUSFAMDBw1rAAABAA0AugPrAt4ADAAACQEGJicBJjYzITYWBwPr/kgZOxb+RBcYJQORGzAkAnP+RxoCGAHAFFABRCgAAAABAPr/1QMeA7MADAAABQEmNjcBNhYVERYGJwKz/kcaAhgBwBRQAUQoKwG4GTsWAbwXGCX8bxswJAAAAAABAOL/zQMGA6sADAAACQEWBgcBBiY1ESY2FwFNAbkaAhj+QBRQAUQoA6v+SBk7Fv5EFxglA5YYLiQAAAABAA8AoAPrAsQADAAAJSEiJjcBPgEXARYGIwPJ/GwkGBYBvBQ7GwG2JC4YoE8VAcAYAhr+SShFAAEABgBRA/oDLwA8AAABNhYXHgEXFgYHBgcOAQcGBw4BIyImJyYnLgEnJicuATU0Njc+ARceARceARceATMyNjc2Nz4BNzY3PgE3A3EgJRUOHwIBLhE7Ojp0Ojo6Ei4YHj8SHh8fPh8fHw0aIw4PIR0XIw8rSi0DGgMFLwguLCxXLCsuDSQTAy8GJBMPHhMdLRI7Ojp0Ojo6Ei5GEh4eHj0gHyENGhUbHQ4PJQMBKQ0rSC0DHzEILiwtWC0sLA8kBQAAAAABAAsAhAP3AvwANAAAJR4BNz4BNwE+AScuAScuASMiBgcGBw4BBwYHJicuAScmJy4BIyIGBw4BFx4BFxYXHgEXFhcBvBEkGhMlDgFxEyYEAyAQESMWIjcQJCIiQyIiJB8hIkYjIyESNB4XJBAQLwoEJxAvLi1dLy8xsRIeAwIlDwFxEycdGCEQESA/ECQiIkMhIiMfIiJHIyMhET4fEA8yIRIiDjAuL10vLzAAAQFS//oDjAOEADoAAAEOARceARcWFx4BFxYXHgE3PgE3PgE3NCYnJicuAScmJzY3PgE3Njc+ATc0JicuAQcOAQcGBw4BBwYHAXsQGwICIQ0qKilSKioqESQZFR8OEBwBOQ4hHh48Hx4gHB8fPyAfHhA2AR0ODS4eEB8NKykqUyoqLAH+DyEXEiENKikpUykqKxAiAgMdDw8gFB4yDyAeHzwfHyAbHx5AHyAdEC4cFCEPDioIBCQNKykqUyoqLAAAAQFS//oDiwOEADoAAAEeAQcOAQcGBw4BBwYHDgEnLgEnLgE1NDY3Njc+ATc2NyYnLgEnJicuATU0Njc+ARceARcWFx4BFxYXA2IQHAMCIA4qKSlTKSoqESQaFR4PDx05DiAfHjweHyAcHx9AHyAdEDcdDg0tHw8gDSoqKVQqKisB/g8hFxIhDSopKVMpKisQIgIDHQ8PIBQeMg8gHh88Hx8gGx8eQB8gHRAuHBQhDw4qCAQkDSspKlMqKiwAAAAAAQAJAIQD9wL8ADQAABMOAQcGFhceATMyNjc2Nz4BNzY3FhceARcWFx4BMzI2Nz4BNzYmJwEuAScmBgcGBw4BBwYHRA4pBAgvEBAmFR40EiAjI0YiIh8kIiJDIiIkEDciFiMRECIBBCYT/o8OJRMaJBExLy9dLi8vAVoPJBAjMg8QHz4RICMjRyMiHyMhIkMiIiQQPyARECIXHScTAXEPJQIDHhIxLy9cLi4uAAIABgBxA/oDDQAdACoAACURNiYHITAGBwYHDgEHBjEwFx4BFxYXHgExJRY2JycHJwcnNyc3FzcXBxcD+gMfHv2kFgoNNDNwLS0vLnM0MwwJEgJpER8DvEuGi0uJiUuJhk2JiakCLBohAwMIDTQ0ci0uMDB2NDQIBwICAR8YjkqKik2IiUqGhkqJiwAAAQAAAAEAAE6N89tfDzz1AAsEAAAAAADalrqwAAAAANqWurD+uP+8BK8DwgAAAAgAAgAAAAAAAAABAAADwP/AAAAE3v64/1EErwABAAAAAAAAAAAAAAAAAAAAdAQAAAAAAAAAAAAAAAIAAAAESQAxBAAAAAQAAAAEAAAABAAAAAQAAHUEAAAEBAAABAQAAAQEAAAEBAD//gQAAE0EAAAEBAAAxQQAAR8EAAEfBAAAcgQA/rgEAAEtBAABLgQAAS8EAADRBAAAgQQAASQEAAFKBAABPAQAAWYEAACdBAAAeAQAAU0EAABKBAAAPgQA/9UEAP/VBAD/0QQAASYEAAEJBAABCQQAAQkEAACQBAAABAQAAAsEAAAOBAAAAAQAAEcEAAAUBAAARgQAAAgEAAARBAAASAQAAOAEAAAzBAAAWgQAAE8EAABvBAAAYwQAABMEAAATBAABOwQAABUEAAAVBAAADwQAAGsEAAAABAAAJgQAAA0EAAERBAAACQQAAAoEAP/+BAAACQQAAAYEAAAzBAAADwQAAAAEAAANBAAAYgQAAAsEAAAGBAAAAAQAAAAEAAAJBAAABAQAAA0EAAACBAAANwQAABEEAAAPBAAADQQAAAsEAAALBAD//gQAAAkEAAAzBAAACQQAAAIEAAAABAAAAAQAAAsEAAAABAAAEQQAAAIEAAANBAAA+gQAAOIEAAAPBAAABgQAAAsE3gFSBN4BUgQAAAkEAAAGAAAAAAAKABQAHgB6A4oFUAb2CAAIyAl0CigK5gugDGgM+A2KDcYN7g4sDkoOghDsEhQSuBMGE1ATvhP8FDwUVBR+FNQVPBZCFpAXEhe2GYwZmhqSG+wcIhxsHMwdeB4cINQhQCGwIi4i+CNeI9okFCTMJTIl2CYcKMQpUCmaKeQqFipKKqgq3iskK2IrpivGLHQs4C0ULVwt7i5ILyovTDBKMIowsDIyMmAykDLKMzgzbDPCM/w0RjUINWY2AjaMN4A4MDiKOMY5HDm+OjA6jjvUPEY8kDyuPMw86j0GPWg9vj4ePn4+1D8aAAAAAQAAAHQCjgASAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAkAAAABAAAAAAACAAcAcgABAAAAAAADAAkAPAABAAAAAAAEAAkAhwABAAAAAAAFAAsAGwABAAAAAAAGAAkAVwABAAAAAAAKABoAogADAAEECQABABIACQADAAEECQACAA4AeQADAAEECQADABIARQADAAEECQAEABIAkAADAAEECQAFABYAJgADAAEECQAGABIAYAADAAEECQAKADQAvGRjZy1pY29ucwBkAGMAZwAtAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGRjZy1pY29ucwBkAGMAZwAtAGkAYwBvAG4Ac2RjZy1pY29ucwBkAGMAZwAtAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmRjZy1pY29ucwBkAGMAZwAtAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format('truetype');
  font-weight: normal;
  font-style: normal;
  font-display: block;
}

.dcg-calculator-api-container [class^="dcg-icon-"],
.dcg-calculator-api-container [class*=" dcg-icon-"] {
  /* use !important to prevent issues with browser extensions that change fonts */
  font-family: 'dcg-icons' !important;
  speak: none;
  font-style: normal;
  font-weight: normal;
  font-variant: normal;
  text-transform: none;
  line-height: 1;
  /* Better Font Rendering =========== */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.dcg-calculator-api-container .dcg-icon-trophy:before {
  content: "\\e200";
}

.dcg-calculator-api-container .dcg-icon-app-graphing:before {
  content: "\\e201";
}

.dcg-calculator-api-container .dcg-icon-app-geometry:before {
  content: "\\e202";
}

.dcg-calculator-api-container .dcg-icon-app-scientific:before {
  content: "\\e203";
}

.dcg-calculator-api-container .dcg-icon-app-four-function:before {
  content: "\\e204";
}

.dcg-calculator-api-container .dcg-icon-clipboard:before {
  content: "\\e205";
}

.dcg-calculator-api-container .dcg-icon-arrow-infinite:before {
  content: "\\e206";
}

.dcg-calculator-api-container .dcg-icon-arrow-once:before {
  content: "\\e207";
}

.dcg-calculator-api-container .dcg-icon-arrow-two-way:before {
  content: "\\e208";
}

.dcg-calculator-api-container .dcg-icon-arrow-one-way:before {
  content: "\\e209";
}

.dcg-calculator-api-container .dcg-icon-randomize:before {
  content: "\\e20a";
}

.dcg-calculator-api-container .dcg-icon-zoom-fit:before {
  content: "\\e20b";
}

.dcg-calculator-api-container .dcg-icon-comments:before {
  content: "\\e20c";
}

.dcg-calculator-api-container .dcg-icon-lines-solid:before {
  content: "\\e20d";
}

.dcg-calculator-api-container .dcg-icon-histogram-fill:before {
  content: "\\e20e";
}

.dcg-calculator-api-container .dcg-icon-histogram:before {
  content: "\\e20f";
}

.dcg-calculator-api-container .dcg-icon-distribution-fill:before {
  content: "\\e210";
}

.dcg-calculator-api-container .dcg-icon-distribution:before {
  content: "\\e211";
}

.dcg-calculator-api-container .dcg-icon-dotplot-cross:before {
  content: "\\e212";
}

.dcg-calculator-api-container .dcg-icon-dotplot-open:before {
  content: "\\e213";
}

.dcg-calculator-api-container .dcg-icon-dotplot-default:before {
  content: "\\e214";
}

.dcg-calculator-api-container .dcg-icon-boxplot:before {
  content: "\\e215";
}

.dcg-calculator-api-container .dcg-icon-points:before {
  content: "\\e216";
}

.dcg-calculator-api-container .dcg-icon-fraction:before {
  content: "\\e217";
}

.dcg-calculator-api-container .dcg-icon-cross:before {
  content: "\\e218";
}

.dcg-calculator-api-container .dcg-icon-open:before {
  content: "\\e219";
}

.dcg-calculator-api-container .dcg-icon-point:before {
  content: "\\e21a";
}

.dcg-calculator-api-container .dcg-icon-shaded-inequality-shade2:before {
  content: "\\e21b";
}

.dcg-calculator-api-container .dcg-icon-shaded-inequality-dash:before {
  content: "\\e21c";
}

.dcg-calculator-api-container .dcg-icon-position-arrows-single:before {
  content: "\\e21d";
}

.dcg-calculator-api-container .dcg-icon-position-arrows:before {
  content: "\\e21e";
}

.dcg-calculator-api-container .dcg-icon-parametric-filled:before {
  content: "\\e21f";
}

.dcg-calculator-api-container .dcg-icon-parametric-solid:before {
  content: "\\e220";
}

.dcg-calculator-api-container .dcg-icon-parametric-dashed:before {
  content: "\\e221";
}

.dcg-calculator-api-container .dcg-icon-parametric-dotted:before {
  content: "\\e222";
}

.dcg-calculator-api-container .dcg-icon-polygon-filled:before {
  content: "\\e223";
}

.dcg-calculator-api-container .dcg-icon-polygon-dashed:before {
  content: "\\e224";
}

.dcg-calculator-api-container .dcg-icon-polygon-dotted:before {
  content: "\\e225";
}

.dcg-calculator-api-container .dcg-icon-polygon-solid:before {
  content: "\\e226";
}

.dcg-calculator-api-container .dcg-icon-title:before {
  content: "\\e227";
}

.dcg-calculator-api-container .dcg-icon-bottom-arrow:before {
  content: "\\e228";
}

.dcg-calculator-api-container .dcg-icon-rocket:before {
  content: "\\e229";
}

.dcg-calculator-api-container .dcg-icon-reset:before {
  content: "\\e22a";
}

.dcg-calculator-api-container .dcg-icon-desmos:before {
  content: "\\e22b";
}

.dcg-calculator-api-container .dcg-icon-download:before {
  content: "\\e22c";
}

.dcg-calculator-api-container .dcg-icon-embed:before {
  content: "\\e22d";
}

.dcg-calculator-api-container .dcg-icon-export:before {
  content: "\\e22e";
}

.dcg-calculator-api-container .dcg-icon-book:before {
  content: "\\e22f";
}

.dcg-calculator-api-container .dcg-icon-print:before {
  content: "\\e230";
}

.dcg-calculator-api-container .dcg-icon-magic:before {
  content: "\\e231";
}

.dcg-calculator-api-container .dcg-icon-cursor:before {
  content: "\\e232";
}

.dcg-calculator-api-container .dcg-icon-dashed-function:before {
  content: "\\e233";
}

.dcg-calculator-api-container .dcg-icon-function:before {
  content: "\\e234";
}

.dcg-calculator-api-container .dcg-icon-arrows-two:before {
  content: "\\e235";
}

.dcg-calculator-api-container .dcg-icon-arrows-one:before {
  content: "\\e236";
}

.dcg-calculator-api-container .dcg-icon-desmos-badge:before {
  content: "\\e237";
}

.dcg-calculator-api-container .dcg-icon-move:before {
  content: "\\e238";
}

.dcg-calculator-api-container .dcg-icon-move-horizontal:before {
  content: "\\e239";
}

.dcg-calculator-api-container .dcg-icon-move-vertical:before {
  content: "\\e23a";
}

.dcg-calculator-api-container .dcg-icon-arrow-left:before {
  content: "\\e23b";
}

.dcg-calculator-api-container .dcg-icon-arrow-right:before {
  content: "\\e23c";
}

.dcg-calculator-api-container .dcg-icon-arrow-enter:before {
  content: "\\e23d";
}

.dcg-calculator-api-container .dcg-icon-shift:before {
  content: "\\e23e";
}

.dcg-calculator-api-container .dcg-icon-dragdots:before {
  content: "\\e23f";
}

.dcg-calculator-api-container .dcg-icon-duplicate:before {
  content: "\\e240";
}

.dcg-calculator-api-container .dcg-icon-error:before {
  content: "\\e241";
}

.dcg-calculator-api-container .dcg-icon-facebook:before {
  content: "\\e242";
}

.dcg-calculator-api-container .dcg-icon-film:before {
  content: "\\e243";
}

.dcg-calculator-api-container .dcg-icon-folder-open:before {
  content: "\\e244";
}

.dcg-calculator-api-container .dcg-icon-folder:before {
  content: "\\e245";
}

.dcg-calculator-api-container .dcg-icon-hamburger:before {
  content: "\\e246";
}

.dcg-calculator-api-container .dcg-icon-hdd:before {
  content: "\\e247";
}

.dcg-calculator-api-container .dcg-icon-hide:before {
  content: "\\e248";
}

.dcg-calculator-api-container .dcg-icon-home:before {
  content: "\\e249";
}

.dcg-calculator-api-container .dcg-icon-image:before {
  content: "\\e24a";
}

.dcg-calculator-api-container .dcg-icon-keyboard:before {
  content: "\\e24b";
}

.dcg-calculator-api-container .dcg-icon-lock:before {
  content: "\\e24c";
}

.dcg-calculator-api-container .dcg-icon-minus:before {
  content: "\\e24d";
}

.dcg-calculator-api-container .dcg-icon-new-expression:before {
  content: "\\e24e";
}

.dcg-calculator-api-container .dcg-icon-new-folder:before {
  content: "\\e24f";
}

.dcg-calculator-api-container .dcg-icon-new-image:before {
  content: "\\e250";
}

.dcg-calculator-api-container .dcg-icon-new-table:before {
  content: "\\e251";
}

.dcg-calculator-api-container .dcg-icon-new-text:before {
  content: "\\e252";
}

.dcg-calculator-api-container .dcg-icon-pause:before {
  content: "\\e253";
}

.dcg-calculator-api-container .dcg-icon-pencil:before {
  content: "\\e254";
}

.dcg-calculator-api-container .dcg-icon-play:before {
  content: "\\e255";
}

.dcg-calculator-api-container .dcg-icon-plus:before {
  content: "\\e256";
}

.dcg-calculator-api-container .dcg-icon-question-sign:before {
  content: "\\e257";
}

.dcg-calculator-api-container .dcg-icon-redo:before {
  content: "\\e258";
}

.dcg-calculator-api-container .dcg-icon-remove:before {
  content: "\\e259";
}

.dcg-calculator-api-container .dcg-icon-search:before {
  content: "\\e25a";
}

.dcg-calculator-api-container .dcg-icon-settings:before {
  content: "\\e25b";
}

.dcg-calculator-api-container .dcg-icon-share:before {
  content: "\\e25c";
}

.dcg-calculator-api-container .dcg-icon-show:before {
  content: "\\e25d";
}

.dcg-calculator-api-container .dcg-icon-table:before {
  content: "\\e25e";
}

.dcg-calculator-api-container .dcg-icon-text:before {
  content: "\\e25f";
}

.dcg-calculator-api-container .dcg-icon-time:before {
  content: "\\e260";
}

.dcg-calculator-api-container .dcg-icon-twitter:before {
  content: "\\e261";
}

.dcg-calculator-api-container .dcg-icon-undo:before {
  content: "\\e262";
}

.dcg-calculator-api-container .dcg-icon-world:before {
  content: "\\e263";
}

.dcg-calculator-api-container .dcg-icon-wrench:before {
  content: "\\e264";
}

.dcg-calculator-api-container .dcg-icon-zoom:before {
  content: "\\e265";
}

.dcg-calculator-api-container .dcg-icon-caret-down:before {
  content: "\\e266";
}

.dcg-calculator-api-container .dcg-icon-caret-left:before {
  content: "\\e267";
}

.dcg-calculator-api-container .dcg-icon-caret-right:before {
  content: "\\e268";
}

.dcg-calculator-api-container .dcg-icon-caret-up:before {
  content: "\\e269";
}

.dcg-calculator-api-container .dcg-icon-check:before {
  content: "\\e26a";
}

.dcg-calculator-api-container .dcg-icon-chevron-down:before {
  content: "\\e26b";
}

.dcg-calculator-api-container .dcg-icon-chevron-left:before {
  content: "\\e26c";
}

.dcg-calculator-api-container .dcg-icon-chevron-right:before {
  content: "\\e26d";
}

.dcg-calculator-api-container .dcg-icon-chevron-up:before {
  content: "\\e26e";
}

.dcg-calculator-api-container .dcg-icon-delete:before {
  content: "\\e26f";
}.dcg-calculator-api-container .dcg-display-domain {
  padding: 5px 0 13px;
  font-size: 95%;
  white-space: nowrap;
  margin-bottom: -5px;
  margin-top: -5px;
}.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem {
  display: block;
  position: relative;
  margin-top: -1px;
  border-top: 1px solid rgba(206,206,206,0.8);
  border-bottom: 1px solid transparent;
  font-size: 100%;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem:not(.dcg-expressionimage) {
  cursor: text;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container {
  width: 100%;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-selected,
.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-dragging {
  border-color: #6399cb;
  border-width: 2px 0;
  border-right: 1px solid #6399cb;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-selected .dcg-fade-container,
.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-dragging .dcg-fade-container {
  margin-top: -1px;
  margin-bottom: -1px;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-selected .dcg-tab,
.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-dragging .dcg-tab {
  color: #fff;
  border-right: 1px solid transparent;
  background: #6399cb;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-expression-bottom.dcg-fadein-bottom {
  position: relative;
  -webkit-animation: dcg-fadeIn 0.8s;
  -moz-animation: dcg-fadeIn 0.8s;
  -o-animation: dcg-fadeIn 0.8s;
  -ms-animation: dcg-fadeIn 0.8s;
  animation: dcg-fadeIn 0.8s;
  cursor: default;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-indent-in-folder {
  padding-left: 53px;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-inFolder .dcg-fade-container:after {
  position: absolute;
  top: 5px;
  bottom: 5px;
  left: 56px;
  content: '';
  border-left: 1px solid rgba(0,0,0,0.2);
  -webkit-animation: dcg-fadeIn 0.3s;
  -moz-animation: dcg-fadeIn 0.3s;
  -o-animation: dcg-fadeIn 0.3s;
  -ms-animation: dcg-fadeIn 0.3s;
  animation: dcg-fadeIn 0.3s;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-inFolder .dcg-indent-in-folder,
.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-inFolder .dcg-main {
  margin-left: 20px;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-shell {
  height: 54px;
  background: #fff;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container {
  position: relative;
  padding-bottom: 6px;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-main {
  position: relative;
  padding-top: 15px;
  padding-left: 53px;
  padding-right: 35px;
  padding-bottom: 9px;
  white-space: nowrap;
  font-size: 110%;
  vertical-align: middle;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-expression-mathquill {
  position: relative;
  width: 100%;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-zoom-fit-btn {
  position: absolute;
  top: 0;
  right: 30px;
  padding: 8px 7px 20px;
  z-index: 2;
  opacity: 0.2;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";
  filter: alpha(opacity=20);
  font-size: 115%;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-zoom-fit-btn.dcg-hovered {
  opacity: 0.6;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";
  filter: alpha(opacity=60);
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-zoom-fit-btn.dcg-depressed {
  opacity: 0.8;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
  filter: alpha(opacity=80);
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-top-level-delete {
  position: absolute;
  top: 0;
  right: 0;
  padding: 8px 7px 20px 20px;
  z-index: 2;
  opacity: 0.2;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";
  filter: alpha(opacity=20);
  font-size: 115%;
  cursor: pointer;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-top-level-delete.dcg-hovered {
  opacity: 0.6;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";
  filter: alpha(opacity=60);
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-top-level-delete.dcg-depressed {
  opacity: 0.8;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
  filter: alpha(opacity=80);
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-unresolved {
  font-size: 80%;
  color: #666;
  cursor: default;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-unresolved i {
  font-size: 85%;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-unresolved a {
  color: #666;
  margin-left: 5px;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-unresolved a.dcg-hovered {
  color: #000;
  text-decoration: underline;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-unresolved .dcg-btn {
  padding: 2px 5px;
  margin-top: 4px;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-author-ide .dcg-fade-container .dcg-main {
  font-size: 90%;
  padding-top: 14px;
  padding-bottom: 7px;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem .dcg-tab {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  padding: 1px 2px;
  font-size: 65%;
  text-align: left;
  color: rgba(0,0,0,0.4);
  background: rgba(0,0,0,0.03);
  border-right: 1px solid rgba(0,0,0,0.06);
  cursor: move;
  width: 38px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontext .dcg-icon-text {
  position: absolute;
  top: 50%;
  left: 50%;
  margin: -7px 0 0 -7px;
  font-size: 140%;
  opacity: 0.25;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=25)";
  filter: alpha(opacity=25);
}

.dcg-calculator-api-container .dcg-expressiontable {
  cursor: default;
}

.dcg-calculator-api-container .dcg-expressiontable .dcg-fade-container.dcg-hovered {
  -webkit-box-shadow: none;
  box-shadow: none;
}

.dcg-calculator-api-container .dcg-expressionitem:not(.dcg-mathitem).dcg-selected .dcg-top-level-delete {
  padding-bottom: 0;
  padding-left: 0;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-selected .dcg-top-level-delete {
  right: -1px;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionitem.dcg-selected .dcg-expression-bottom {
  margin-right: -1px;
}

.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-exppanel input.dcg-image-name {
  display: block !important;
}

.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-exppanel div.dcg-image-name {
  display: none;
}

.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-top-level-delete {
  display: none;
}

.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-edit-domain {
  display: block !important;
}

.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-expressionitem.dcg-expressiontext .dcg-displayTextarea,
.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-expressionitem.dcg-expressionfolder .dcg-displayTextarea {
  pointer-events: none;
  opacity: 0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
}

.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-expressionitem.dcg-expressiontext textarea,
.dcg-calculator-api-container .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-expressionitem.dcg-expressionfolder textarea {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}

.dcg-calculator-api-container .dcg-drag-container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
}

.dcg-calculator-api-container .dcg-drag-container .dcg-expressionitem {
  background: #fff;
  overflow: hidden;
  -webkit-box-shadow: 0 0 10px #888;
  box-shadow: 0 0 10px #888;
  border-color: #6399cb;
  border-right: 1px solid #6399cb;
}

.dcg-calculator-api-container .dcg-drag-container .dcg-expressionitem .dcg-indent-in-folder,
.dcg-calculator-api-container .dcg-drag-container .dcg-expressionitem .dcg-fade-container:after,
.dcg-calculator-api-container .dcg-drag-container .dcg-expressionitem .dcg-main {
  -webkit-transition: 0.3s;
  -moz-transition: 0.3s;
  -o-transition: 0.3s;
  -ms-transition: 0.3s;
  transition: 0.3s;
}

.dcg-calculator-api-container .dcg-drag-container .dcg-expressionitem .dcg-tab {
  background: #6399cb;
}

.dcg-calculator-api-container .dcg-drag-container .dcg-expressionitem .dcg-num {
  display: none;
}

.dcg-calculator-api-container .dcg-template-expressioneach .dcg-expressionitem.dcg-dragging {
  visibility: hidden;
}

.dcg-calculator-api-container .dcg-exppanel.dcg-isDragging .dcg-expressionitem.dcg-new-expression {
  opacity: 0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
}

.dcg-calculator-api-container .dcg-container .dcg-mq-editable-field {
  border: none;
  -webkit-box-shadow: none !important;
  box-shadow: none !important;
}

.dcg-calculator-api-container .dcg-container .dcg-mq-editable-field textarea {
  resize: none;
}

.dcg-calculator-api-container .dcg-container .dcg-mq-editable-field.dcg-hasCursor {
  -webkit-box-shadow: none !important;
  box-shadow: none !important;
}

.dcg-calculator-api-container .dcg-tap-container .dcg-mq-math-mode .dcg-mq-supsub {
  margin-bottom: -0.2em;
}

.dcg-calculator-api-container .dcg-tap-container .dcg-mq-math-mode .dcg-mq-sub {
  font-size: 80%;
}

.dcg-calculator-api-container .dcg-tap-container .dcg-mq-math-mode .dcg-mq-int .dcg-mq-sub {
  font-size: 100%;
}

.dcg-calculator-api-container .dcg-clear {
  clear: both;
}

.dcg-calculator-api-container .dcg-has-background-color .dcg-expressionitem {
  border-top-color: rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-expression-icon-container {
  position: absolute;
  top: 28px;
  left: 50%;
  height: 29px;
  width: 29px;
  margin-top: -14.5px;
  margin-left: -14.5px;
  text-align: center;
  line-height: 29px;
  border-radius: 50%;
}.dcg-calculator-api-container .dcg-author-ide-bar {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 5px;
  z-index: 10;
  background: #ccc;
  color: #444;
  font-size: 90%;
}

.dcg-calculator-api-container .dcg-author-ide-bar input {
  border: 1px solid rgba(0,0,0,0.25);
  padding: 4px;
  border-radius: 4px;
  background: transparent;
  width: 200px;
  padding-right: 30px;
  font-size: 100%;
}

.dcg-calculator-api-container .dcg-author-ide-bar input:focus {
  border: 2px solid #4781b9;
  background: #fff;
  padding: 3px;
  outline: none;
}

.dcg-calculator-api-container .dcg-author-ide-bar .dcg-icon-remove {
  position: relative;
  left: -20px;
  top: 1px;
  opacity: 0.2;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";
  filter: alpha(opacity=20);
}

.dcg-calculator-api-container .dcg-author-ide-bar .dcg-icon-remove.dcg-hovered {
  opacity: 0.5;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
  filter: alpha(opacity=50);
}

.dcg-calculator-api-container .dcg-author-ide-bar .dcg-icon-remove.dcg-depressed {
  opacity: 0.8;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
  filter: alpha(opacity=80);
}.dcg-calculator-api-container .dcg-cdf-footer-container {
  margin-top: 5px;
}

.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-component-checkbox {
  margin-bottom: 4px;
}

.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-mathquill-wrapper {
  margin-left: 10px;
  margin-right: 10px;
}

.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-parameter-name {
  font-size: 85%;
}

.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-cdf-evaluation-container {
  margin-top: 5px;
}.dcg-calculator-api-container .dcg-circular-icon-container {
  width: 29px;
  height: 29px;
  border-radius: 50%;
}

.dcg-calculator-api-container .dcg-circular-icon {
  display: inline-block;
  width: 29px;
  height: 29px;
  line-height: 29px;
  border-radius: 50%;
  position: relative;
  overflow: hidden;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-semi-transparent {
  opacity: 0.4;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=40)";
  filter: alpha(opacity=40);
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-hidden {
  -webkit-box-shadow: inset 0 0 3px rgba(0,0,0,0.25);
  box-shadow: inset 0 0 3px rgba(0,0,0,0.25);
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-hidden:before {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  border: 5px solid #999;
  border-radius: 50%;
  opacity: 0.25;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=25)";
  filter: alpha(opacity=25);
  content: "";
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-hidden.dcg-white-icon:before {
  border-color: #fff;
  opacity: 0.4;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=40)";
  filter: alpha(opacity=40);
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-hidden.dcg-hovered:before {
  opacity: 0.3125 ;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=31)" ;
  filter: alpha(opacity=31) ;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-hidden.dcg-hovered.dcg-white-icon:before {
  opacity: 0.5;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
  filter: alpha(opacity=50);
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-hidden.dcg-depressed:before {
  opacity: 0.375 ;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=38)" ;
  filter: alpha(opacity=38) ;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-hidden.dcg-depressed.dcg-white-icon:before {
  opacity: 0.6;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";
  filter: alpha(opacity=60);
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline {
  border: 2px solid #000;
  opacity: 0.5;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
  filter: alpha(opacity=50);
  color: #000;
  text-align: center;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline.dcg-hovered {
  opacity: 0.7;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";
  filter: alpha(opacity=70);
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline.dcg-depressed {
  opacity: 0.9;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";
  filter: alpha(opacity=90);
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline .dcg-icon-folder {
  position: relative;
  top: -1px;
  font-size: 110%;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline .dcg-icon-pause {
  position: relative;
  top: -1px;
  left: 0.25px;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline .dcg-icon-play {
  position: relative;
  top: -1px;
  left: 1.5px;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline .dcg-icon-fraction {
  font-size: 20px;
  position: relative;
  top: 2px;
  left: 0.5px;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline.dcg-white-icon {
  color: #fff;
  border-color: #fff;
  opacity: 0.9;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";
  filter: alpha(opacity=90);
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline.dcg-white-icon.dcg-hovered {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-thick-outline.dcg-white-icon.dcg-depressed {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image {
  background: #fff;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image:after {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  content: '';
  border-radius: 50%;
  overflow: hidden;
  -webkit-box-shadow: inset 0 0 4px rgba(0,0,0,0.7);
  box-shadow: inset 0 0 4px rgba(0,0,0,0.7);
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image .dcg-background-image {
  width: 29px;
  height: 29px;
  display: inline-block;
  border-radius: 50%;
  -webkit-background-size: 29px 29px !important;
  -moz-background-size: 29px 29px !important;
  background-size: 29px 29px !important;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i {
  text-shadow: 0 0 6px rgba(0,0,0,0.2), 0 0 1px rgba(0,0,0,0.5);
}

.dcg-calculator-api-container .dcg-circular-icon .dcg-spinner {
  position: absolute;
  left: 50%;
  top: 50%;
  margin-top: -10px;
  margin-left: -10px;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon {
  -webkit-box-shadow: inset 0 0 3px rgba(0,0,0,0.25);
  box-shadow: inset 0 0 3px rgba(0,0,0,0.25);
  overflow: hidden;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon {
  font-size: 35px;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image.dcg-modifier-size-medium,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon.dcg-modifier-size-medium {
  font-size: 42.25px;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image.dcg-modifier-size-large,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon.dcg-modifier-size-large {
  font-size: 56.75px;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image.dcg-modifier-size-small,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon.dcg-modifier-size-small {
  font-size: 32.1px;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image.dcg-modifier-rotated,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon.dcg-modifier-rotated {
  -webkit-transform: rotate(90deg);
  -moz-transform: rotate(90deg);
  -o-transform: rotate(90deg);
  -ms-transform: rotate(90deg);
  transform: rotate(90deg);
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon {
  position: absolute;
  top: -3px;
  left: -30px;
  right: -30px;
  bottom: -3px;
  color: #fff;
  line-height: 35px;
  text-align: center;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-check,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-check {
  font-size: 50%;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-move,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-move,
.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-move-vertical,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-move-vertical,
.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-move-horizontal,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-move-horizontal {
  font-size: 55%;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-point,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-point,
.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-cross,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-cross,
.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-open,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-open {
  font-size: 75%;
}

.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-points,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-points,
.dcg-calculator-api-container .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-lines-solid,
.dcg-calculator-api-container .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-lines-solid {
  font-size: 68%;
}.dcg-calculator-api-container .dcg-clickable-image-info-view {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}

.dcg-calculator-api-container .dcg-clickable-image-info-view .dcg-clickable-image-label {
  font-size: 85%;
}

.dcg-calculator-api-container .dcg-clickable-image-info-view .dcg-clickable-image-icon {
  padding-right: 10px;
  padding-left: 10px;
}

.dcg-calculator-api-container .dcg-clickable-image-info-view .dcg-tooltip-hit-area-container {
  margin-left: 5px;
  margin-right: 10px;
}.dcg-calculator-api-container .dcg-container .dcg-clickable-info-container {
  margin-bottom: 5px;
  cursor: pointer;
}

.dcg-calculator-api-container .dcg-container .dcg-clickable-info-container .dcg-expression-footer-title {
  margin-top: 5px;
}

.dcg-calculator-api-container .dcg-container .dcg-clickable-info-container .dcg-smaller-font {
  font-size: 85%;
  margin-left: 2px;
}

.dcg-calculator-api-container .dcg-container .dcg-clickable-info-container .dcg-math-field {
  max-width: 120px;
  min-width: 30px;
}

.dcg-calculator-api-container .dcg-container .dcg-clickable-info-container input {
  outline: none;
  border: 1px solid #bbb;
  border-top: 0 !important;
  border-right: 0 !important;
  border-left: 0 !important;
  color: #000;
  padding: 4px;
  -webkit-appearance: none;
  border-radius: 0;
  padding-left: 0;
  padding-right: 0;
  font-size: 100%;
  width: 80%;
  margin-top: 5px;
}

.dcg-calculator-api-container .dcg-container .dcg-clickable-info-container input.dcg-hovered {
  border-color: #ccc;
  border-bottom-width: 2px;
  padding-bottom: 3px;
}

.dcg-calculator-api-container .dcg-container .dcg-clickable-info-container input:focus:not([disabled]) {
  border-color: #6399cb;
  border-bottom-width: 2px;
  padding-bottom: 3px;
}.dcg-calculator-api-container .dcg-color-menu {
  width: 95px;
}

.dcg-calculator-api-container .dcg-color-menu .dcg-color-option {
  display: inline-block;
  width: 29px;
  height: 29px;
  margin: 0 4px 1px 0;
  border-radius: 50%;
  position: relative;
}

.dcg-calculator-api-container .dcg-color-menu .dcg-color-option.dcg-hovered {
  -webkit-box-shadow: 0 0 0 2px rgba(187,187,187,0.3);
  box-shadow: 0 0 0 2px rgba(187,187,187,0.3);
}

.dcg-calculator-api-container .dcg-color-menu .dcg-color-option.dcg-depressed {
  -webkit-box-shadow: 0 0 0 2px rgba(119,119,119,0.3);
  box-shadow: 0 0 0 2px rgba(119,119,119,0.3);
}

.dcg-calculator-api-container .dcg-color-menu .dcg-color-option:nth-of-type(3n) {
  margin-right: 0;
}

.dcg-calculator-api-container .dcg-color-menu .dcg-color-option:nth-of-type(n+4) {
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-advanced-color-styling {
  font-size: 75%;
  margin-top: 5px;
  margin-bottom: 5px;
}

.dcg-calculator-api-container .dcg-advanced-color-styling input {
  border: 0;
  outline: none;
  font: inherit;
  width: 65px;
  margin-left: 3px;
  border-bottom: 2px solid #ccc;
  padding: 2px;
}

.dcg-calculator-api-container .dcg-advanced-color-styling input.dcg-hovered {
  border-bottom: 2px solid #aaa;
}

.dcg-calculator-api-container .dcg-advanced-color-styling input:focus {
  border-bottom: 2px solid #888;
}

.dcg-calculator-api-container .dcg-advanced-color-styling input.dcg-error {
  border-bottom: 2px solid #e15855;
}.dcg-calculator-api-container .dcg-distribution-parameters-container .dcg-component-checkbox {
  font-size: 85%;
}.dcg-calculator-api-container .dcg-evaluation-container {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -o-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-box-align: end;
  -moz-box-align: end;
  -o-box-align: end;
  -ms-flex-align: end;
  -webkit-align-items: flex-end;
  align-items: flex-end;
  margin-right: 5px;
  padding: 3px 6px 3px 3px;
}

.dcg-calculator-api-container .dcg-evaluation-container .dcg-fraction-toggle {
  color: #bbb;
  margin-bottom: 2px;
}

.dcg-calculator-api-container .dcg-evaluation-container .dcg-fraction-toggle.dcg-hovered {
  color: #666;
}

.dcg-calculator-api-container .dcg-evaluation-container .dcg-fraction-toggle.dcg-depressed {
  color: #333;
}

.dcg-calculator-api-container .dcg-evaluation-container .dcg-fraction-toggle .dcg-toggle-letter {
  font-size: 90%;
}

.dcg-calculator-api-container .dcg-evaluation-container .dcg-fraction-toggle i {
  margin: 0 2px;
  position: relative;
  top: 1px;
}

.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation {
  margin-top: -3px;
}

.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation.dcg-hidden {
  opacity: 0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
}

.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-mathquill-wrapper .dcg-mathquill-braille {
  padding: 5px 0;
}

.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input {
  text-align: right;
  color: #666;
}

.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-mathquill-wrapper .dcg-typeset-math {
  padding: 3px 6px 3px 3px;
  display: table;
  border: 1px solid rgba(206,206,206,0.8);
  background: rgba(0,0,0,0.04);
  opacity: 0.75;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=75)";
  filter: alpha(opacity=75);
  border-radius: 4px;
}

.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-evaluation-label-container {
  font-weight: normal;
  cursor: pointer;
  white-space: nowrap;
  display: table-cell;
}

.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-evaluation-label-container .dcg-mq-math-mode {
  cursor: pointer;
  padding-right: 2px;
}

.dcg-calculator-api-container .dcg-evaluation-container .dcg-evaluation .dcg-evaluation-html {
  white-space: nowrap;
  border-top-right-radius: 5px;
  border-bottom-right-radius: 5px;
  display: table-cell;
}.dcg-calculator-api-container .dcg-exp-list-resizer {
  position: absolute;
  top: 0;
  right: -12px;
  bottom: 0;
  width: 15px;
  cursor: ew-resize;
}

.dcg-calculator-api-container .dcg-exp-list-resizer.dcg-depressed {
  width: 215px;
  right: -112px;
}.dcg-calculator-api-container .dcg-expression-edit-actions {
  padding-left: 5px;
  padding-right: 7px;
  white-space: nowrap;
  position: absolute;
  top: 0;
  right: 0;
}

.dcg-calculator-api-container .dcg-expression-edit-actions:not(.dcg-limited-height) {
  bottom: 0;
}

.dcg-calculator-api-container .dcg-expression-edit-actions .dcg-graphic {
  height: 100%;
  background: -webkit-linear-gradient(left, rgba(255,255,255,0.5), #fff);
  background: -moz-linear-gradient(left, rgba(255,255,255,0.5), #fff);
  background: -o-linear-gradient(left, rgba(255,255,255,0.5), #fff);
  background: -ms-linear-gradient(left, rgba(255,255,255,0.5), #fff);
  background: linear-gradient(to right, rgba(255,255,255,0.5), #fff);
  position: absolute;
  top: 0;
  right: 100%;
  width: 40px;
  cursor: default;
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-expression-edit-actions .dcg-exp-action-button {
  margin-left: 2px;
  width: 44px;
  height: 44px;
  padding: 12px 10px;
  text-align: center;
  margin-top: 4px;
  display: inline-block;
  font-size: 125%;
  line-height: 20px;
  opacity: 0.6;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";
  filter: alpha(opacity=60);
  border-radius: 5px;
}

.dcg-calculator-api-container .dcg-expression-edit-actions .dcg-exp-action-button.dcg-hovered {
  background: rgba(0,0,0,0.1);
}

.dcg-calculator-api-container .dcg-expression-edit-actions .dcg-exp-action-button.dcg-depressed {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}.dcg-calculator-api-container .dcg-slider_menu {
  position: relative;
  top: -3px;
}

.dcg-calculator-api-container .dcg-expression-footer-title {
  text-transform: uppercase;
  font-size: 80%;
  color: rgba(0,0,0,0.5);
  margin-bottom: 4px;
}

.dcg-calculator-api-container .dcg-expression-footer-title .dcg-expression-footer-title-help {
  padding: 10px;
  color: rgba(0,0,0,0.2);
  margin: -10px -10px -10px -6px;
  cursor: pointer;
  text-decoration: none;
}

.dcg-calculator-api-container .dcg-expression-footer-title .dcg-expression-footer-title-help.dcg-hovered {
  color: #888;
}

.dcg-calculator-api-container .dcg-expression-footer-title .dcg-expression-footer-title-help.dcg-depressed {
  color: #000;
}

.dcg-calculator-api-container .dcg-expression-bottom .dcg-expression-braille-error {
  color: #666;
  margin: 10px;
  margin-left: 0;
  font-size: 90%;
}

.dcg-calculator-api-container .dcg-expression-bottom .dcg-expression-braille-error .dcg-icon-error {
  font-size: 80%;
  margin-right: 5px;
  color: #fa824c;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu .dcg-slider-step-container,
.dcg-calculator-api-container .dcg-display-domain .dcg-slider-step-container,
.dcg-calculator-api-container .dcg-distribution-parameters-container .dcg-slider-step-container,
.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-slider-step-container,
.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-slider-step-container,
.dcg-calculator-api-container .dcg-clickable-info-container .dcg-slider-step-container {
  margin-left: 10px;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu .dcg-slider-step-container.dcg-disabled-input .dcg-math-field,
.dcg-calculator-api-container .dcg-display-domain .dcg-slider-step-container.dcg-disabled-input .dcg-math-field,
.dcg-calculator-api-container .dcg-distribution-parameters-container .dcg-slider-step-container.dcg-disabled-input .dcg-math-field,
.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-slider-step-container.dcg-disabled-input .dcg-math-field,
.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-slider-step-container.dcg-disabled-input .dcg-math-field,
.dcg-calculator-api-container .dcg-clickable-info-container .dcg-slider-step-container.dcg-disabled-input .dcg-math-field,
.dcg-calculator-api-container .dcg-container .dcg-slider_menu .dcg-slider-step-container.dcg-disabled-input .dcg-mathquill-braille,
.dcg-calculator-api-container .dcg-display-domain .dcg-slider-step-container.dcg-disabled-input .dcg-mathquill-braille,
.dcg-calculator-api-container .dcg-distribution-parameters-container .dcg-slider-step-container.dcg-disabled-input .dcg-mathquill-braille,
.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-slider-step-container.dcg-disabled-input .dcg-mathquill-braille,
.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-slider-step-container.dcg-disabled-input .dcg-mathquill-braille,
.dcg-calculator-api-container .dcg-clickable-info-container .dcg-slider-step-container.dcg-disabled-input .dcg-mathquill-braille {
  opacity: 0.3;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";
  filter: alpha(opacity=30);
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu .dcg-slider-step-label,
.dcg-calculator-api-container .dcg-display-domain .dcg-slider-step-label,
.dcg-calculator-api-container .dcg-distribution-parameters-container .dcg-slider-step-label,
.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-slider-step-label,
.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-slider-step-label,
.dcg-calculator-api-container .dcg-clickable-info-container .dcg-slider-step-label {
  font-size: 85%;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-display-domain .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-distribution-parameters-container .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-clickable-info-container .dcg-mq-editable-field {
  outline: none;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu .dcg-mq-placeholder,
.dcg-calculator-api-container .dcg-display-domain .dcg-mq-placeholder,
.dcg-calculator-api-container .dcg-distribution-parameters-container .dcg-mq-placeholder,
.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-mq-placeholder,
.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-mq-placeholder,
.dcg-calculator-api-container .dcg-clickable-info-container .dcg-mq-placeholder {
  margin-top: -10px;
  font-size: 95%;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu .dcg-mq-placeholder .dcg-mq-math-mode,
.dcg-calculator-api-container .dcg-display-domain .dcg-mq-placeholder .dcg-mq-math-mode,
.dcg-calculator-api-container .dcg-distribution-parameters-container .dcg-mq-placeholder .dcg-mq-math-mode,
.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-mq-placeholder .dcg-mq-math-mode,
.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-mq-placeholder .dcg-mq-math-mode,
.dcg-calculator-api-container .dcg-clickable-info-container .dcg-mq-placeholder .dcg-mq-math-mode {
  font-size: inherit;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu .dcg-math-field,
.dcg-calculator-api-container .dcg-display-domain .dcg-math-field,
.dcg-calculator-api-container .dcg-distribution-parameters-container .dcg-math-field,
.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-math-field,
.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-math-field,
.dcg-calculator-api-container .dcg-clickable-info-container .dcg-math-field {
  border-bottom: 1px solid #bbb;
  padding: 1px 2px;
  margin: 1px;
  min-width: 35px;
  max-width: 60px;
  font-size: 95%;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu .dcg-math-field.dcg-focus,
.dcg-calculator-api-container .dcg-display-domain .dcg-math-field.dcg-focus,
.dcg-calculator-api-container .dcg-distribution-parameters-container .dcg-math-field.dcg-focus,
.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-math-field.dcg-focus,
.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-math-field.dcg-focus,
.dcg-calculator-api-container .dcg-clickable-info-container .dcg-math-field.dcg-focus,
.dcg-calculator-api-container .dcg-container .dcg-slider_menu .dcg-math-field.dcg-invalid,
.dcg-calculator-api-container .dcg-display-domain .dcg-math-field.dcg-invalid,
.dcg-calculator-api-container .dcg-distribution-parameters-container .dcg-math-field.dcg-invalid,
.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-math-field.dcg-invalid,
.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-math-field.dcg-invalid,
.dcg-calculator-api-container .dcg-clickable-info-container .dcg-math-field.dcg-invalid {
  border-bottom: 2px solid #6399cb;
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu .dcg-math-field.dcg-invalid,
.dcg-calculator-api-container .dcg-display-domain .dcg-math-field.dcg-invalid,
.dcg-calculator-api-container .dcg-distribution-parameters-container .dcg-math-field.dcg-invalid,
.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-math-field.dcg-invalid,
.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-math-field.dcg-invalid,
.dcg-calculator-api-container .dcg-clickable-info-container .dcg-math-field.dcg-invalid {
  border-bottom: 2px solid #e15855;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid),
.dcg-calculator-api-container .dcg-display-domain .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid),
.dcg-calculator-api-container .dcg-distribution-parameters-container .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid),
.dcg-calculator-api-container .dcg-cdf-footer-container .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid),
.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid),
.dcg-calculator-api-container .dcg-clickable-info-container .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid) {
  border-bottom: 2px solid #ccc;
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu :not(.dcg-evaluation) > .dcg-mathquill-wrapper,
.dcg-calculator-api-container .dcg-display-domain :not(.dcg-evaluation) > .dcg-mathquill-wrapper,
.dcg-calculator-api-container .dcg-distribution-parameters-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper,
.dcg-calculator-api-container .dcg-cdf-footer-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper,
.dcg-calculator-api-container .dcg-visualization-parameters-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper,
.dcg-calculator-api-container .dcg-clickable-info-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper {
  display: inline-block;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille,
.dcg-calculator-api-container .dcg-display-domain :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille,
.dcg-calculator-api-container .dcg-distribution-parameters-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille,
.dcg-calculator-api-container .dcg-cdf-footer-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille,
.dcg-calculator-api-container .dcg-visualization-parameters-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille,
.dcg-calculator-api-container .dcg-clickable-info-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille {
  border-bottom: 1px solid #bbb;
  padding: 1px 2px;
  margin: 1px;
  min-width: 35px;
  max-width: 35px;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-focus,
.dcg-calculator-api-container .dcg-display-domain :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-focus,
.dcg-calculator-api-container .dcg-distribution-parameters-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-focus,
.dcg-calculator-api-container .dcg-cdf-footer-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-focus,
.dcg-calculator-api-container .dcg-visualization-parameters-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-focus,
.dcg-calculator-api-container .dcg-clickable-info-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-focus,
.dcg-calculator-api-container .dcg-container .dcg-slider_menu :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-invalid,
.dcg-calculator-api-container .dcg-display-domain :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-invalid,
.dcg-calculator-api-container .dcg-distribution-parameters-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-invalid,
.dcg-calculator-api-container .dcg-cdf-footer-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-invalid,
.dcg-calculator-api-container .dcg-visualization-parameters-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-invalid,
.dcg-calculator-api-container .dcg-clickable-info-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-invalid {
  border-bottom: 2px solid #6399cb;
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-invalid,
.dcg-calculator-api-container .dcg-display-domain :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-invalid,
.dcg-calculator-api-container .dcg-distribution-parameters-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-invalid,
.dcg-calculator-api-container .dcg-cdf-footer-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-invalid,
.dcg-calculator-api-container .dcg-visualization-parameters-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-invalid,
.dcg-calculator-api-container .dcg-clickable-info-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-invalid {
  border-bottom: 2px solid #e15855;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-hovered:not(.dcg-focus):not(.dcg-invalid),
.dcg-calculator-api-container .dcg-display-domain :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-hovered:not(.dcg-focus):not(.dcg-invalid),
.dcg-calculator-api-container .dcg-distribution-parameters-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-hovered:not(.dcg-focus):not(.dcg-invalid),
.dcg-calculator-api-container .dcg-cdf-footer-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-hovered:not(.dcg-focus):not(.dcg-invalid),
.dcg-calculator-api-container .dcg-visualization-parameters-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-hovered:not(.dcg-focus):not(.dcg-invalid),
.dcg-calculator-api-container .dcg-clickable-info-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-hovered:not(.dcg-focus):not(.dcg-invalid) {
  border-bottom: 2px solid #ccc;
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-container .dcg-slider_menu :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input,
.dcg-calculator-api-container .dcg-display-domain :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input,
.dcg-calculator-api-container .dcg-distribution-parameters-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input,
.dcg-calculator-api-container .dcg-cdf-footer-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input,
.dcg-calculator-api-container .dcg-visualization-parameters-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input,
.dcg-calculator-api-container .dcg-clickable-info-container :not(.dcg-evaluation) > .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input {
  font-size: 95%;
}.dcg-calculator-api-container .dcg-container.dcg-narrow .dcg-expression-top-bar {
  border-right: 0;
}

.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar {
  border-right: 1px solid rgba(0,0,0,0.2);
  height: 46px;
  border-bottom: 1px solid rgba(0,0,0,0.2);
  line-height: 37px;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 4;
  -webkit-transition: box-shadow 0.2s ease;
  -moz-transition: box-shadow 0.2s ease;
  -o-transition: box-shadow 0.2s ease;
  -ms-transition: box-shadow 0.2s ease;
  transition: box-shadow 0.2s ease;
  padding: 5px;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  background: -webkit-linear-gradient(#fcfcfc, #eaeaea);
  background: -moz-linear-gradient(#fcfcfc, #eaeaea);
  background: -o-linear-gradient(#fcfcfc, #eaeaea);
  background: -ms-linear-gradient(#fcfcfc, #eaeaea);
  background: linear-gradient(#fcfcfc, #eaeaea);
}

.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar.dcg-expressions-scrolled {
  -webkit-box-shadow: -2px 2px 4px rgba(0,0,0,0.15);
  box-shadow: -2px 2px 4px rgba(0,0,0,0.15);
}

.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-btn-red,
.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-btn-blue {
  padding: 0 15px;
  height: 35px;
  line-height: 35px;
  position: relative;
  top: -1px;
  text-align: center;
}

.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn {
  width: 38px;
  height: 38px;
  line-height: 38px;
  font-size: 110%;
  display: inline-block;
  border-radius: 5px;
  text-align: center;
  margin: -1px -1px -1px -1px;
}

.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-rotated {
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  -ms-transform: rotate(-90deg);
  transform: rotate(-90deg);
}

.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn i.dcg-icon-undo,
.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn i.dcg-icon-redo {
  font-size: 120%;
}

.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn i {
  opacity: 0.6;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";
  filter: alpha(opacity=60);
}

.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn:not(:last-of-type) {
  margin-right: -2px;
}

.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-disabled {
  opacity: 0.3;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";
  filter: alpha(opacity=30);
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-hovered,
.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-active {
  background: rgba(0,0,0,0.1);
}

.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-hovered i,
.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-active i {
  opacity: 0.8;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
  filter: alpha(opacity=80);
}

.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-depressed {
  background: rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-depressed i {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}

.dcg-calculator-api-container .dcg-container .dcg-expression-top-bar .dcg-center-buttons {
  text-align: center;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
}

.dcg-calculator-api-container .dcg-add-expression-container {
  position: relative;
  display: inline-block;
  height: 37px;
}.dcg-calculator-api-container .dcg-expressionitem .dcg-caret-container {
  font-size: 95%;
  position: absolute;
  top: -1px;
  left: 38px;
  width: 32px;
  height: 48px;
  color: #999;
  padding-left: 10px;
  padding-top: 18px;
  text-align: left;
  z-index: 2;
}

.dcg-calculator-api-container .dcg-expressionitem .dcg-caret-container i {
  -webkit-transition: 0.2s;
  -moz-transition: 0.2s;
  -o-transition: 0.2s;
  -ms-transition: 0.2s;
  transition: 0.2s;
  width: 16px;
  height: 16px;
}

.dcg-calculator-api-container .dcg-expressionitem .dcg-caret-container.dcg-hovered {
  color: #666;
  cursor: pointer;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-collapsed .dcg-caret-container i {
  display: inline-block;
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  -ms-transform: rotate(-90deg);
  transform: rotate(-90deg);
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-secretFolder {
  display: none;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-action-toggle-secret-folder {
  cursor: pointer;
  color: rgba(0,0,0,0.5);
  font-size: 75%;
  padding: 5px;
  margin-top: 5px;
  margin-left: 15px;
  margin-bottom: -5px;
  margin-right: -5px;
  position: relative;
  z-index: 1;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-action-toggle-secret-folder .dcg-checkbox-box {
  display: inline-block;
  vertical-align: top;
  height: 15px;
  width: 15px;
  border-radius: 3px;
  color: #127a3d;
  border: 1px solid #aaa;
  margin-right: 5px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-action-toggle-secret-folder .dcg-checkbox-box .dcg-icon-check {
  position: relative;
  top: -1px;
  left: 1px;
  text-shadow: -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 1px 1px 0 #fff;
  display: none;
  font-size: 110%;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-action-toggle-secret-folder.dcg-checked .dcg-checkbox-box .dcg-icon-check {
  display: block;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-action-toggle-secret-folder.dcg-hovered {
  color: #666;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-action-toggle-secret-folder.dcg-hovered .dcg-checkbox-box {
  border-color: #888;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-action-toggle-secret-folder.dcg-depressed {
  color: #444;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-action-toggle-secret-folder.dcg-depressed .dcg-checkbox-box {
  border-color: #444;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-fade-container:after {
  -webkit-transition: 0;
  -moz-transition: 0;
  -o-transition: 0;
  -ms-transition: 0;
  transition: 0;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder:not(.dcg-collapsed).dcg-has-items .dcg-fade-container:after {
  position: absolute;
  top: 35px;
  bottom: 5px;
  left: 56px;
  content: '';
  border-left: 1px solid rgba(0,0,0,0.2);
  -webkit-animation: dcg-fadeIn 0.3s;
  -moz-animation: dcg-fadeIn 0.3s;
  -o-animation: dcg-fadeIn 0.3s;
  -ms-animation: dcg-fadeIn 0.3s;
  animation: dcg-fadeIn 0.3s;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-main textarea.dcg-smart-textarea,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionfolder .dcg-main .dcg-displayTextarea {
  padding-left: 20px;
}@-webkit-keyframes dcg-fade-pulse {
  0% {
    opacity: 0.2;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";
    filter: alpha(opacity=20);
  }

  50% {
    opacity: 1;
    -ms-filter: none;
    filter: none;
  }

  100% {
    opacity: 0.2;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";
    filter: alpha(opacity=20);
  }
}

@keyframes dcg-fade-pulse {
  0% {
    opacity: 0.2;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";
    filter: alpha(opacity=20);
  }

  50% {
    opacity: 1;
    -ms-filter: none;
    filter: none;
  }

  100% {
    opacity: 0.2;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";
    filter: alpha(opacity=20);
  }
}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-loading,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-failed {
  font-size: 100%;
  padding: 1px;
  color: #888;
  font-style: italic;
  line-height: 37px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-retry-loading-image {
  color: #407bb5;
  text-decoration: underline;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid {
  font-size: 80%;
  display: grid;
  grid-template-columns: min-content 2fr min-content 1fr;
  width: calc(100% + 20px);
  max-width: 450px;
  color: rgba(0,0,0,0.5);
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-mathquill-wrapper {
  width: 100%;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-mathquill-wrapper .dcg-braille-input {
  color: rgba(0,0,0,0.5);
  font-size: 120%;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-image-input-name,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-image-input-mathquill {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-align-self: center;
  align-self: center;
  -ms-flex-item-align: center;
  padding-right: 5px;
  overflow: hidden;
  padding-top: 2px;
  padding-bottom: 2px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-mathquill-braille {
  width: 100%;
  border-bottom: 1px solid transparent;
  cursor: pointer;
  margin-bottom: 1px;
  position: relative;
  top: 2px;
  margin-right: 10px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-mq-editable-field.dcg-hovered,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-mathquill-braille.dcg-hovered {
  border-bottom: 2px solid rgba(0,0,0,0.2);
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-mq-editable-field.dcg-focus,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-mathquill-braille.dcg-focus {
  cursor: text;
  border-bottom: 2px solid #6399cb;
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-mq-editable-field.dcg-invalid,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-mathquill-braille.dcg-invalid {
  border-bottom: 2px solid #e15855;
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage.dcg-input-focused .dcg-image-input-grid,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage.dcg-input-focused .dcg-braille-input {
  color: #000;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage.dcg-input-focused .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage.dcg-input-focused .dcg-mathquill-braille {
  border-bottom: 1px solid rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-smart-textarea-container {
  margin-bottom: 8px;
  font-size: 85%;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-smart-textarea-container textarea,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage .dcg-smart-textarea-container .dcg-displayTextarea {
  padding-top: 0;
  padding-bottom: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage.dcg-selected .dcg-smart-textarea-container {
  margin-top: -1px;
  margin-bottom: 9px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressionimage.dcg-selected .dcg-main {
  margin-right: -1px;
}.dcg-calculator-api-container .dcg-options-menu-container {
  position: absolute;
  display: none;
  z-index: 61;
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-options-menu-container .dcg-options-menu {
  pointer-events: auto;
}

.dcg-calculator-api-container .dcg-options-menu {
  padding: 10px;
  position: relative;
  border: 1px solid #d3d3d3;
  border-radius: 7px;
  -webkit-box-shadow: 0 0 6px rgba(0,0,0,0.15);
  box-shadow: 0 0 6px rgba(0,0,0,0.15);
  background: #fff;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-dividing-line-after {
  padding-bottom: 10px;
  border-bottom: 1px solid #e2e2e2;
  margin-bottom: 10px;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-triangle {
  width: 0;
  height: 0;
  border-style: solid;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-triangle:before {
  content: "";
  width: 0;
  height: 0;
  border-style: solid;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-zoom-fit-btn.dcg-disabled {
  opacity: 0.2;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";
  filter: alpha(opacity=20);
}

.dcg-calculator-api-container .dcg-options-menu .dcg-title,
.dcg-calculator-api-container .dcg-options-menu .dcg-toggle-title {
  margin-bottom: 5px;
  opacity: 0.65;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=65)";
  filter: alpha(opacity=65);
  font-weight: 500;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-style-icons {
  margin-top: 5px;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-component-checkbox {
  margin-top: 5px;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-component-checkbox .dcg-checkbox-children {
  font-size: 90%;
  color: #333;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-options-menu-column-left,
.dcg-calculator-api-container .dcg-options-menu .dcg-options-menu-column-right {
  display: inline-block;
  width: 95px;
  vertical-align: top;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-options-menu-column-left {
  margin-right: 20px;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-style-icon-container {
  display: inline-block;
  width: 29px;
  height: 29px;
  border-radius: 50%;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-style-icon-container:not(:last-of-type) {
  margin-right: 4px;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-style-icon-container.dcg-disabled {
  cursor: default !important;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-style-icon-container:not(.dcg-disabled).dcg-hovered:not(.dcg-disabled) {
  -webkit-box-shadow: 0 0 0 2px rgba(0,0,0,0.1);
  box-shadow: 0 0 0 2px rgba(0,0,0,0.1);
}

.dcg-calculator-api-container .dcg-options-menu .dcg-style-icon-container:not(.dcg-disabled).dcg-depressed:not(.dcg-disabled) {
  -webkit-box-shadow: 0 0 0 2px rgba(0,0,0,0.25);
  box-shadow: 0 0 0 2px rgba(0,0,0,0.25);
}

.dcg-calculator-api-container .dcg-options-menu .dcg-variable-opacity {
  font-size: 80%;
  margin-top: 5px;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-variable-opacity .dcg-math-field {
  border-bottom: 1px solid #bbb;
  padding: 1px 2px;
  margin: 1px;
  min-width: 25px;
  max-width: 40px;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-variable-opacity .dcg-math-field.dcg-focus,
.dcg-calculator-api-container .dcg-options-menu .dcg-variable-opacity .dcg-math-field.dcg-invalid {
  border-bottom: 2px solid #6399cb;
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-variable-opacity .dcg-math-field.dcg-invalid {
  border-bottom: 2px solid #e15855;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-variable-opacity .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid) {
  border-bottom: 2px solid #ccc;
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-variable-width {
  font-size: 80%;
  margin-top: 5px;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-variable-width .dcg-math-field {
  border-bottom: 1px solid #bbb;
  padding: 1px 2px;
  margin: 1px;
  min-width: 55px;
  max-width: 55px;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-variable-width .dcg-math-field.dcg-focus,
.dcg-calculator-api-container .dcg-options-menu .dcg-variable-width .dcg-math-field.dcg-invalid {
  border-bottom: 2px solid #6399cb;
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-variable-width .dcg-math-field.dcg-invalid {
  border-bottom: 2px solid #e15855;
}

.dcg-calculator-api-container .dcg-options-menu .dcg-variable-width .dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid) {
  border-bottom: 2px solid #ccc;
  margin-bottom: 0;
}

/*
 * rules specific to the image menu
 */

.dcg-calculator-api-container .dcg-image-options-menu {
  top: -13px;
  left: 38px;
}

.dcg-calculator-api-container .dcg-image-options-menu .dcg-triangle {
  position: absolute;
  top: 38px;
  left: -12px;
  border-width: 12px 12px 12px 0;
  border-color: transparent #d3d3d3 transparent transparent;
}

.dcg-calculator-api-container .dcg-image-options-menu .dcg-triangle:before {
  position: absolute;
  top: -11px;
  left: 1px;
  border-width: 11px 11px 11px 0;
  border-color: transparent #fff transparent transparent;
}

.dcg-calculator-api-container .dcg-image-options-menu .dcg-opacities-menu .dcg-opacity-option {
  display: inline-block;
  width: 29px;
  height: 29px;
  margin-top: 2px;
  border-radius: 50%;
  position: relative;
}

.dcg-calculator-api-container .dcg-image-options-menu .dcg-opacities-menu .dcg-opacity-option:not(:last-of-type) {
  margin-right: 5px;
}

.dcg-calculator-api-container .dcg-image-options-menu .dcg-action-changeimage {
  text-align: center;
  color: #999;
  margin-top: 10px;
  text-decoration: underline;
  font-size: 95%;
}

.dcg-calculator-api-container .dcg-image-options-menu .dcg-action-changeimage:hover {
  color: #333;
}

/*
 * rules specific to the expression options
 */

.dcg-calculator-api-container .dcg-exp-options-menu {
  top: -35px;
  left: 38px;
}

.dcg-calculator-api-container .dcg-exp-options-menu.dcg-colors-only .dcg-options-menu-column-left {
  display: none;
}

.dcg-calculator-api-container .dcg-exp-options-menu .dcg-triangle {
  position: absolute;
  top: 38px;
  left: -12px;
  border-width: 12px 12px 12px 0;
  border-color: transparent #d3d3d3 transparent transparent;
}

.dcg-calculator-api-container .dcg-exp-options-menu .dcg-triangle:before {
  position: absolute;
  top: -11px;
  left: 1px;
  border-width: 11px 11px 11px 0;
  border-color: transparent #fff transparent transparent;
}

.dcg-calculator-api-container .dcg-exp-options-menu.dcg-slider-options-view {
  top: -45px;
  margin-left: 5px;
}

.dcg-calculator-api-container .dcg-exp-options-menu.dcg-slider-options-view .dcg-triangle {
  top: 44px;
}

/*
 * rules specific to the table props
 */

.dcg-calculator-api-container .dcg-table-column-menu {
  left: -9px;
  top: 34px;
}

.dcg-calculator-api-container .dcg-table-column-menu .dcg-style-icons .dcg-graph-icon {
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-table-column-menu .dcg-options-menu-column-left .dcg-options-menu-section:not(:last-of-type):not(.dcg-lines-menu) {
  padding-bottom: 10px;
  border-bottom: 1px solid #e2e2e2;
  margin-bottom: 10px;
}

.dcg-calculator-api-container .dcg-table-column-menu .dcg-triangle {
  position: absolute;
  top: -9px;
  left: 14px;
  border-width: 0 9px 9px 9px;
  border-color: transparent transparent #d3d3d3 transparent;
}

.dcg-calculator-api-container .dcg-table-column-menu .dcg-triangle:before {
  position: absolute;
  top: 1px;
  left: -8px;
  border-width: 0 8px 8px 8px;
  border-color: transparent transparent #fff transparent;
}.dcg-calculator-api-container .dcg-label-dropdown-view {
  background: #fff;
  position: absolute;
  top: -45px;
  right: 35px;
  padding: 5px;
  z-index: 3;
  background-color: #fff;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 6px;
  -webkit-box-shadow: 0 5px 10px rgba(0,0,0,0.2);
  box-shadow: 0 5px 10px rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-label-dropdown-view.dcg-popover.dcg-left .dcg-arrow {
  top: 60px;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-options .dcg-label-option.dcg-hovered {
  text-decoration: underline;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-options .dcg-label-option-selected {
  color: #4781b9;
  text-decoration: underline;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-additional-group-in-column {
  margin-top: 15px;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-component-checkbox {
  white-space: nowrap;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-checkbox-children {
  font-size: 90%;
  vertical-align: middle;
  color: #666;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container {
  padding: 5px 10px;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group {
  min-width: 90px;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group:first-of-type {
  margin-right: 10px;
  min-width: 120px;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-label-group-title {
  font-family: "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
  font-weight: 500;
  color: #444;
  font-size: 90%;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-menu-option {
  display: block;
  -webkit-transition: color 0.2s ease;
  -moz-transition: color 0.2s ease;
  -o-transition: color 0.2s ease;
  -ms-transition: color 0.2s ease;
  transition: color 0.2s ease;
  white-space: nowrap;
  font-size: 90%;
  min-height: 24px;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-menu-option.dcg-menu-option-selected {
  color: #4781b9;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-menu-option.dcg-menu-option-selected .dcg-menu-option-label {
  text-decoration: underline;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-menu-option:not(.dcg-menu-option-selected) {
  color: #666;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-menu-option:not(.dcg-menu-option-selected).dcg-hovered {
  color: #333;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-menu-option:not(.dcg-menu-option-selected).dcg-hovered .dcg-menu-option-label {
  text-decoration: underline;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-menu-option:not(.dcg-menu-option-selected).dcg-depressed {
  color: #000;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-menu-option.dcg-small-label {
  margin-top: 6px;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-menu-option.dcg-small-label .dcg-menu-option-icon {
  font-size: 75%;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-menu-option.dcg-large-label .dcg-menu-option-icon {
  font-size: 125%;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-menu-option .dcg-menu-option-icon {
  margin-right: 7px;
  color: #bbb;
  display: inline-block;
  width: 15px;
  text-align: center;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-label-position .dcg-menu-option-icon {
  position: relative;
  top: 4px;
  margin-right: 12px;
  font-size: 23px;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-label-position .dcg-position-direction-icon {
  color: #4781b9;
  position: absolute;
  top: 0;
  left: 0;
  font-size: 23px;
  width: 23px;
  height: 23px;
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-label-position .dcg-position-direction-icon.dcg-position-icon-left {
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  -ms-transform: rotate(-90deg);
  transform: rotate(-90deg);
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-label-position .dcg-position-direction-icon.dcg-position-icon-right {
  -webkit-transform: rotate(90deg);
  -moz-transform: rotate(90deg);
  -o-transform: rotate(90deg);
  -ms-transform: rotate(90deg);
  transform: rotate(90deg);
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-label-position .dcg-position-direction-icon.dcg-position-icon-below {
  -webkit-transform: rotate(180deg);
  -moz-transform: rotate(180deg);
  -o-transform: rotate(180deg);
  -ms-transform: rotate(180deg);
  transform: rotate(180deg);
}

.dcg-calculator-api-container .dcg-label-dropdown-view .dcg-label-group-container .dcg-label-group .dcg-label-position .dcg-position-direction-icon .dcg-default-position {
  border-radius: 50%;
  position: absolute;
  top: 50%;
  left: 50%;
  margin: -3px 0 0 -3px;
  height: 6px;
  width: 6px;
  background: #4781b9;
}.dcg-calculator-api-container .dcg-container .dcg-dropdown-container {
  padding-right: 5px;
  margin: -5px 0;
  position: relative;
}

.dcg-calculator-api-container .dcg-container .dcg-dropdown-container .dcg-dropdown-wrench-container {
  padding: 5px 0;
  width: 28px;
  text-align: center;
  display: inline-block;
}

.dcg-calculator-api-container .dcg-container .dcg-dropdown-container .dcg-icon-wrench {
  font-size: 110%;
  color: #999;
}

.dcg-calculator-api-container .dcg-container .dcg-dropdown-container .dcg-icon-wrench.dcg-hovered {
  color: #666;
}

.dcg-calculator-api-container .dcg-container .dcg-dropdown-container .dcg-icon-wrench.dcg-depressed {
  color: #000;
}

.dcg-calculator-api-container .dcg-container .dcg-dropdown-container.dcg-no-label {
  visibility: hidden;
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-container .dcg-editable-mode-toggle {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  padding-left: 5px;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container {
  cursor: default;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container .dcg-warning-container {
  position: absolute;
  bottom: 3px;
  right: 41px;
  background: #fff;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container .dcg-checkbox {
  cursor: pointer;
  color: #999;
  margin-top: 4px;
  font-size: 80%;
  white-space: nowrap;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container .dcg-checkbox:after {
  content: ":";
  opacity: 0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
}

.dcg-calculator-api-container .dcg-container .dcg-label-container .dcg-checkbox.dcg-checkbox-label-colon:after {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container .dcg-checkbox .dcg-checkbox-box {
  display: inline-block;
  vertical-align: middle;
  height: 1em;
  width: 1em;
  position: relative;
  top: -0.1em;
  border-radius: 3px;
  color: #4781b9;
  border: 1px solid #bbb;
  font-size: 125%;
  margin-right: 2px;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container .dcg-checkbox .dcg-checkbox-box .dcg-icon-check {
  position: absolute;
  top: 50%;
  left: 50%;
  margin-top: -0.6em;
  margin-left: -0.35em;
  text-shadow: -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 1px 1px 0 #fff;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container .dcg-checkbox .dcg-checkbox-box:not(.dcg-checked) .dcg-icon-check {
  visibility: hidden;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container .dcg-checkbox.dcg-hovered {
  color: #666;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container .dcg-checkbox.dcg-hovered .dcg-checkbox-box {
  border-color: #999;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container .dcg-checkbox.dcg-hovered .dcg-checkbox-box:not(.dcg-checked) .dcg-icon-check {
  color: #ccc;
  visibility: visible;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container .dcg-checkbox.dcg-depressed .dcg-checkbox-box .dcg-icon-check {
  color: #004f9b;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container input {
  outline: none;
  border: 1px solid #bbb;
  border-top: 0 !important;
  border-right: 0 !important;
  border-left: 0 !important;
  color: #000;
  padding: 4px;
  -webkit-appearance: none;
  border-radius: 0;
  min-width: 5px;
  font-size: 80%;
  margin: 0 5px 0 5px;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container input.dcg-hovered {
  border-color: #ccc;
  border-bottom-width: 2px;
  padding-bottom: 3px;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container input:focus:not([disabled]) {
  border-color: #6399cb;
  border-bottom-width: 2px;
  padding-bottom: 3px;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container input.dcg-disabled-editable-input {
  opacity: 0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container:not(.dcg-label-visible) input.dcg-disabled-input:not(:focus) {
  border-bottom-color: transparent;
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-container .dcg-label-container.dcg-label-visible .dcg-checkbox {
  color: #666;
}

.dcg-calculator-api-container .dcg-container .dcg-option-toggle-view .dcg-toggle-container {
  display: inline-block;
  font-size: 80%;
}

.dcg-calculator-api-container .dcg-container .dcg-option-toggle-view .dcg-toggle-container:not(:last-of-type) {
  margin-right: 15px;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-label-container {
  font-size: 120%;
}.dcg-calculator-api-container .dcg-drop-image {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  z-index: 42;
  text-align: center;
  vertical-align: middle;
  background: rgba(255,255,255,0.5);
  border: 8px dashed #bbb;
  font-family: sans-serif;
  color: #bbb;
  font-size: 370%;
}

.dcg-calculator-api-container .dcg-drop-image span {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  height: 3.6em;
  line-height: 1.2em;
  margin: auto;
  padding: 0 20px;
}

.dcg-calculator-api-container .dcg-exppanel-outer {
  display: inline-block;
  overflow-x: visible;
  margin-left: 0;
}

.dcg-calculator-api-container .dcg-exppanel-outer .dcg-exppanel-container {
  padding-top: 46px;
  width: 100%;
  -webkit-transform: translateZ(0);
  z-index: 40;
  position: absolute;
  top: 0;
  bottom: 0;
  -webkit-transition: -webkit-transform 0.25s ease-out;
  -moz-transition: -moz-transform 0.25s ease-out;
  -o-transition: -o-transform 0.25s ease-out;
  -ms-transition: -ms-transform 0.25s ease-out;
  transition: transform 0.25s ease-out;
}

.dcg-calculator-api-container .dcg-exppanel-outer .dcg-exppanel-container.dcg-add-shadow {
  -webkit-box-shadow: 0 -4px 6px rgba(0,0,0,0.2);
  box-shadow: 0 -4px 6px rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-show-expressions-tab {
  opacity: 0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
  -webkit-animation: dcg-fadeIn 0.3s forwards;
  -moz-animation: dcg-fadeIn 0.3s forwards;
  -o-animation: dcg-fadeIn 0.3s forwards;
  -ms-animation: dcg-fadeIn 0.3s forwards;
  animation: dcg-fadeIn 0.3s forwards;
  -webkit-animation-delay: 0.4s;
  -moz-animation-delay: 0.4s;
  -o-animation-delay: 0.4s;
  -ms-animation-delay: 0.4s;
  animation-delay: 0.4s;
}

.dcg-calculator-api-container .dcg-exppanel {
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  overflow-anchor: none;
  border-right: 1px solid rgba(0,0,0,0.2);
  z-index: 0;
  -webkit-overflow-scrolling: touch;
}

.dcg-calculator-api-container .dcg-exppanel .dcg-expressionlist {
  position: relative;
  padding-bottom: 50px;
  min-height: 100%;
}

.dcg-calculator-api-container .dcg-narrow .dcg-exppanel {
  border-right: 0;
}.dcg-calculator-api-container .dcg-parameter-suggestion-container {
  font-size: 80%;
  position: relative;
  top: -9px;
  margin-left: 2px;
  white-space: nowrap;
  width: 100%;
  padding-right: 5px;
  -o-text-overflow: ellipsis;
  text-overflow: ellipsis;
  overflow: hidden;
  color: #666;
  cursor: default;
}

.dcg-calculator-api-container .dcg-parameter-suggestion-container.dcg-parameter-suggestion-braille {
  top: -6px;
}

.dcg-calculator-api-container .dcg-parameter-suggestion-container.dcg-hovered .dcg-default-marker {
  color: #666;
}

.dcg-calculator-api-container .dcg-parameter-suggestion-container.dcg-depressed .dcg-default-marker {
  color: #333;
}

.dcg-calculator-api-container .dcg-parameter-suggestion-container .dcg-default-marker {
  color: rgba(0,0,0,0.5);
  margin-left: 0.3em;
}

.dcg-calculator-api-container .dcg-parameter-suggestion-container .dcg-parameter-name:not(:last-of-type):after {
  content: ',';
  margin-right: 5px;
}.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-container {
  position: absolute;
  top: 100%;
  left: -5px;
  right: -5px;
  margin-top: 4px;
}

.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener {
  margin-top: -2px;
  margin-left: 1px;
  padding: 5px 5px;
  text-align: center;
  font-size: 140%;
  cursor: pointer;
  opacity: 0.75;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=75)";
  filter: alpha(opacity=75);
}

.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener:before {
  content: "";
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: inline-block;
  position: absolute;
  top: 50%;
  left: 50%;
  margin-left: -12px;
  margin-top: -13px;
  background: currentColor;
  opacity: 0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
}

.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-hovered {
  opacity: 0.9;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";
  filter: alpha(opacity=90);
}

.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-hovered:before {
  opacity: 0.15;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=15)";
  filter: alpha(opacity=15);
}

.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-menu-open {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}

.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-menu-open:before {
  opacity: 0.3;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";
  filter: alpha(opacity=30);
}

.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-depressed {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}

.dcg-calculator-api-container .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-depressed:before {
  opacity: 0.4;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=40)";
  filter: alpha(opacity=40);
}.dcg-calculator-api-container .dcg-slider-options-view {
  width: 200px;
  padding: 15px 15px 10px 15px;
}

.dcg-calculator-api-container .dcg-slider-options-view .dcg-title {
  font-size: 110%;
}

.dcg-calculator-api-container .dcg-slider-options-view .dcg-toggle {
  margin-bottom: 20px;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  font-size: 110%;
}

.dcg-calculator-api-container .dcg-slider-options-view .dcg-toggle .dcg-toggle-option {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  color: #666;
  font-size: 105%;
  height: 30px;
  line-height: 30px;
}

.dcg-calculator-api-container .dcg-slider-options-view .dcg-toggle .dcg-toggle-option i {
  position: relative;
  top: -3px;
  cursor: pointer;
}

.dcg-calculator-api-container .dcg-slider-options-view .dcg-slider-speed-menu .dcg-title,
.dcg-calculator-api-container .dcg-slider-options-view .dcg-slider-speed-menu .dcg-slider-speed-container {
  display: inline-block;
}.dcg-calculator-api-container .dcg-slider-speed-container {
  float: right;
  position: relative;
  top: -1px;
  font-size: 95%;
}

.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster,
.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower {
  color: #666;
}

.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster.dcg-hovered,
.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower.dcg-hovered {
  color: #222;
}

.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster.dcg-depressed,
.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower.dcg-depressed {
  color: #000;
}

.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster.dcg-disabled,
.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower.dcg-disabled {
  opacity: 0.25;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=25)";
  filter: alpha(opacity=25);
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower {
  -webkit-transform: rotate(180deg);
  -moz-transform: rotate(180deg);
  -o-transform: rotate(180deg);
  -ms-transform: rotate(180deg);
  transform: rotate(180deg);
}

.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower i {
  position: relative;
  top: 1px;
}

.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster,
.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower {
  cursor: pointer;
  font-size: 70%;
  display: inline-block;
  width: 26px;
  height: 26px;
  text-align: center;
  line-height: 26px;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 4px;
}

.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster.dcg-hovered,
.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower.dcg-hovered {
  background: rgba(0,0,0,0.05);
}

.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster.dcg-depressed,
.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower.dcg-depressed {
  background: rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-faster i,
.dcg-calculator-api-container .dcg-slider-speed-container .dcg-action-slower i {
  position: relative;
  left: 1px;
}

.dcg-calculator-api-container .dcg-slider-speed-container .dcg-variable-speed {
  width: 45px;
  font-size: 90%;
  display: inline-block;
  text-align: center;
}.dcg-calculator-api-container .dcg-slider-container {
  min-height: 26px;
  display: block;
  position: relative;
}

.dcg-calculator-api-container .dcg-slider {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  margin-left: -15px;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -o-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}.dcg-calculator-api-container .dcg-smart-textarea-container {
  position: relative;
  font-size: 90%;
}

.dcg-calculator-api-container .dcg-smart-textarea-container textarea.dcg-smart-textarea,
.dcg-calculator-api-container .dcg-smart-textarea-container .dcg-displayTextarea {
  border: 0;
  font: inherit;
  resize: none;
  background: transparent;
  overflow: hidden;
  outline: none;
  color: #000;
  white-space: pre-wrap;
  word-wrap: break-word;
  width: 100%;
  padding: 3px;
  margin: -1px;
}

.dcg-calculator-api-container .dcg-smart-textarea-container textarea.dcg-smart-textarea {
  opacity: 0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
  position: absolute;
  top: 1px;
  left: 0;
  bottom: 0;
  right: 0;
  height: 100%;
}

.dcg-calculator-api-container .dcg-smart-textarea-container textarea.dcg-smart-textarea.dcg-empty {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}

.dcg-calculator-api-container .dcg-smart-textarea-container .dcg-displayTextarea:after {
  content: '|';
  opacity: 0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
  width: 0;
  overflow: hidden;
  display: inline-block;
  height: 1px;
}

.dcg-calculator-api-container .dcg-smart-textarea-container .dcg-displayTextarea a {
  z-index: 1;
  position: relative;
  color: #4781b9;
}

.dcg-calculator-api-container .dcg-smart-textarea-container .dcg-displayTextarea a.dcg-hovered,
.dcg-calculator-api-container .dcg-smart-textarea-container .dcg-displayTextarea a .dcg-depressed {
  color: #004f9b;
}

.dcg-calculator-api-container .dcg-selected .dcg-smart-textarea-container .dcg-displayTextarea {
  pointer-events: none;
  opacity: 0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
}

.dcg-calculator-api-container .dcg-selected .dcg-smart-textarea-container textarea {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}.dcg-calculator-api-container .dcg-stats-footer-container {
  margin-right: $evaluation-margin;
  cursor: text;
  padding-right: 5px;
}

.dcg-calculator-api-container .dcg-stats-footer-container table {
  margin-left: auto;
}

.dcg-calculator-api-container .dcg-stats-footer-container .dcg-value {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
  margin-top: 3px;
  border: 1px solid rgba(206,206,206,0.8);
  border-radius: 4px;
  background: rgba(0,0,0,0.04);
  opacity: 0.75;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=75)";
  filter: alpha(opacity=75);
}

.dcg-calculator-api-container .dcg-stats-footer-container .dcg-value .dcg-row-header {
  display: inline-block;
  border-right: 1px solid rgba(206,206,206,0.8);
  margin-right: 5px;
  width: 68px;
  padding: 5px;
}

.dcg-calculator-api-container .dcg-stats-footer-container .dcg-value .dcg-evaluation .dcg-static-mathquill-view {
  padding: 3px 6px 3px 3px;
}.dcg-calculator-api-container .dcg-suggested-zoom-view {
  position: absolute;
  bottom: 7px;
  left: 50%;
  font-size: 20px;
  line-height: 20px;
  margin-left: -10px;
  text-align: center;
  -webkit-animation: dcg-fadeIn 0.3s;
  -moz-animation: dcg-fadeIn 0.3s;
  -o-animation: dcg-fadeIn 0.3s;
  -ms-animation: dcg-fadeIn 0.3s;
  animation: dcg-fadeIn 0.3s;
}

.dcg-calculator-api-container .dcg-suggested-zoom-view i {
  padding: 5px;
  margin-left: -5px;
  opacity: 0.75;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=75)";
  filter: alpha(opacity=75);
}

.dcg-calculator-api-container .dcg-suggested-zoom-view i.dcg-hovered {
  opacity: 0.9;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";
  filter: alpha(opacity=90);
}

.dcg-calculator-api-container .dcg-suggested-zoom-view i.dcg-depressed {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-table-icon-container {
  position: absolute;
  top: 50%;
  left: 5px;
  margin-top: -14.5px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-drag-icon {
  opacity: 0.4;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=40)";
  filter: alpha(opacity=40);
  vertical-align: middle;
  cursor: text;
  margin-left: 5px;
  margin-right: -10px;
  font-size: 95%;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-cell-math-content,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-mathquill-braille {
  outline: none;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-cell:not(.dcg-non-editable) .dcg-cell-math-content,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-cell:not(.dcg-non-editable) .dcg-mathquill-braille {
  max-width: 100px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-table-container {
  overflow: hidden;
  padding-left: 15px;
  padding-right: 15px;
  position: relative;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-table-container:before {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  z-index: 1;
  background: -webkit-linear-gradient(right, rgba(255,255,255,0), #fff);
  background: -moz-linear-gradient(right, rgba(255,255,255,0), #fff);
  background: -o-linear-gradient(right, rgba(255,255,255,0), #fff);
  background: -ms-linear-gradient(right, rgba(255,255,255,0), #fff);
  background: linear-gradient(to left, rgba(255,255,255,0), #fff);
  width: 20px;
  content: '';
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-table-container:after {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  background: -webkit-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: -moz-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: -o-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: -ms-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: linear-gradient(to right, rgba(255,255,255,0), #fff);
  width: 20px;
  content: '';
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-table-container .dcg-table-sliding-container {
  -webkit-transition: -webkit-transform 0.15s;
  -moz-transition: -moz-transform 0.15s;
  -o-transition: -o-transform 0.15s;
  -ms-transition: -ms-transform 0.15s;
  transition: transform 0.15s;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-main {
  padding-top: 20px;
  padding-bottom: 5px;
  position: relative;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-show-more-row td {
  border-top: 1px solid #e5e5e5;
  text-align: center;
  font-size: 80%;
  color: rgba(0,0,0,0.5);
  padding: 8px 0;
  font-style: italic;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-show-more-row td .dcg-show-more {
  color: #4781b9;
  font-style: normal;
  text-decoration: underline;
  font-size: 90%;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-show-more-row td .dcg-show-more.dcg-hovered {
  color: #004f9b;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-show-more-row td .dcg-show-more.dcg-depressed {
  color: #033b70;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata {
  position: relative;
  display: table;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row {
  display: table-row;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell {
  display: table-cell;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:not(:first-of-type) .dcg-cell {
  border-top: 1px solid #e5e5e5;
  padding: 7px 10px 7px 20px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:not(:first-of-type) .dcg-cell.dcg-non-editable {
  padding: 7px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:not(:first-of-type).dcg-braille-row .dcg-cell {
  padding: 7px 20px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:nth-of-type(2) .dcg-cell {
  border-top: 1px solid #444;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:first-of-type .dcg-cell {
  vertical-align: bottom;
  padding: 7px 5px 3px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:first-of-type .dcg-cell:not(:first-of-type):not(:last-of-type) {
  padding: 7px 15px 3px 30px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:first-of-type .dcg-cell:not(:first-of-type):not(:last-of-type) .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:first-of-type .dcg-cell:not(:first-of-type):not(:last-of-type) .dcg-static-mathquill-view {
  margin-left: 10px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:first-of-type .dcg-cell .dcg-math-field {
  min-height: 29px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:first-of-type .dcg-cell:first-of-type.dcg-error {
  padding-left: 33px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row:first-of-type.dcg-braille-row .dcg-cell:not(:first-of-type):not(:last-of-type) {
  padding: 7px 15px 3px 40px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-static-mathquill-view {
  padding-right: 8px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell {
  position: relative;
  text-align: center;
  vertical-align: middle;
  font-size: 72%;
  min-height: 34px;
  min-width: 40px;
  cursor: text;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell .dcg-braille-input {
  text-align: center;
  min-width: 40px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell:not(:first-of-type) {
  border-left: 1px solid #e5e5e5;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell:nth-of-type(2) {
  border-left: 1px solid #444;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-non-editable {
  cursor: default;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-non-editable .dcg-mq-math-mode {
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell:not(.dcg-non-editable):not(.dcg-selected).dcg-empty .dcg-empty-line {
  position: absolute;
  width: 26px;
  left: 50%;
  margin-left: -13px;
  border-top: 1px dashed #bbb;
  bottom: 10px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-selected:not(.dcg-non-editable) .dcg-inner-border {
  position: absolute;
  left: -1px;
  top: -1px;
  bottom: -1px;
  right: -1px;
  z-index: 1;
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-selected.dcg-non-editable {
  background: #f5f5f5;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-selected.dcg-non-editable .dcg-mathquill-braille-overflow-left .dcg-tooltip-hit-area-container:before {
  background: -webkit-linear-gradient(right, rgba(245,245,245,0), #f5f5f5);
  background: -moz-linear-gradient(right, rgba(245,245,245,0), #f5f5f5);
  background: -o-linear-gradient(right, rgba(245,245,245,0), #f5f5f5);
  background: -ms-linear-gradient(right, rgba(245,245,245,0), #f5f5f5);
  background: linear-gradient(to left, rgba(245,245,245,0), #f5f5f5);
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-selected.dcg-non-editable .dcg-mathquill-braille-overflow-right .dcg-tooltip-hit-area-container:after {
  background: -webkit-linear-gradient(left, rgba(245,245,245,0), #f5f5f5);
  background: -moz-linear-gradient(left, rgba(245,245,245,0), #f5f5f5);
  background: -o-linear-gradient(left, rgba(245,245,245,0), #f5f5f5);
  background: -ms-linear-gradient(left, rgba(245,245,245,0), #f5f5f5);
  background: linear-gradient(to right, rgba(245,245,245,0), #f5f5f5);
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-selected:not(.dcg-non-editable) .dcg-inner-border {
  border: 2px solid #6399cb;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell .dcg-mq-math-mode {
  position: relative;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell .dcg-table-icon-error-container {
  position: absolute;
  top: 50%;
  left: 4px;
  margin-top: -7px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header {
  font-size: 85%;
  min-height: 37px;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header .dcg-mathquill-braille {
  min-height: 30px;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header:not(:first-of-type):not(:last-of-type) .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header.dcg-error .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header:not(:first-of-type):not(:last-of-type) .dcg-static-mathquill-view,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header.dcg-error .dcg-static-mathquill-view,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header:not(:first-of-type):not(:last-of-type) .dcg-mathquill-braille,
.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata .dcg-row .dcg-cell.dcg-table-header.dcg-error .dcg-mathquill-braille {
  text-align: center;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata:not(.dcg-focus-in-right-column):after {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  background: -webkit-linear-gradient(right, #fff, rgba(255,255,255,0));
  background: -moz-linear-gradient(right, #fff, rgba(255,255,255,0));
  background: -o-linear-gradient(right, #fff, rgba(255,255,255,0));
  background: -ms-linear-gradient(right, #fff, rgba(255,255,255,0));
  background: linear-gradient(to left, #fff, rgba(255,255,255,0));
  width: 60px;
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata:not(.dcg-focus-in-bottom-row):before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 30px;
  pointer-events: none;
  background: -webkit-linear-gradient(bottom, #fff, rgba(255,255,255,0));
  background: -moz-linear-gradient(bottom, #fff, rgba(255,255,255,0));
  background: -o-linear-gradient(bottom, #fff, rgba(255,255,255,0));
  background: -ms-linear-gradient(bottom, #fff, rgba(255,255,255,0));
  background: linear-gradient(to top, #fff, rgba(255,255,255,0));
  z-index: 1;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable .dcg-tabledata:not(.dcg-focus-in-bottom-row) .dcg-row:last-of-type .dcg-cell .dcg-empty-line {
  display: none;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable:not(.dcg-selected) .dcg-tabledata .dcg-row:last-of-type {
  visibility: hidden;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable:not(.dcg-selected) .dcg-tabledata .dcg-row:last-of-type .dcg-cell {
  border-color: transparent;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-expressiontable:not(.dcg-selected) .dcg-tabledata .dcg-row .dcg-cell:last-of-type {
  border-color: transparent;
  visibility: hidden;
}.dcg-calculator-api-container .dcg-toggle-view {
  float: right;
  padding: 5px;
  margin-top: 5px;
  display: inline-block;
  width: 30px;
  height: 8px;
  background: #ddd;
  border-radius: 8px;
  position: relative;
  -webkit-transition: all 0.2s;
  -moz-transition: all 0.2s;
  -o-transition: all 0.2s;
  -ms-transition: all 0.2s;
  transition: all 0.2s;
}

.dcg-calculator-api-container .dcg-toggle-view .dcg-toggle-switch {
  position: absolute;
  top: -4px;
  left: 0;
  width: 18px;
  height: 18px;
  background: #f5f5f5;
  border-radius: 50%;
  -webkit-transition: all 0.2s;
  -moz-transition: all 0.2s;
  -o-transition: all 0.2s;
  -ms-transition: all 0.2s;
  transition: all 0.2s;
  -webkit-box-shadow: 0 2px 2px rgba(0,0,0,0.2), 0 0 3px rgba(0,0,0,0.2);
  box-shadow: 0 2px 2px rgba(0,0,0,0.2), 0 0 3px rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-toggle-view.dcg-toggled {
  -webkit-transition: all 0.2s;
  -moz-transition: all 0.2s;
  -o-transition: all 0.2s;
  -ms-transition: all 0.2s;
  transition: all 0.2s;
}

.dcg-calculator-api-container .dcg-toggle-view.dcg-toggled .dcg-toggle-switch {
  -webkit-transition: all 0.2s;
  -moz-transition: all 0.2s;
  -o-transition: all 0.2s;
  -ms-transition: all 0.2s;
  transition: all 0.2s;
  left: 12px;
  background: #666;
}.dcg-calculator-api-container .dcg-ttest-footer-container {
  margin-right: $evaluation-margin;
  cursor: text;
  padding-right: 5px;
}

.dcg-calculator-api-container .dcg-ttest-footer-container table {
  margin-left: auto;
}

.dcg-calculator-api-container .dcg-ttest-footer-container .dcg-value {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
  margin-top: 3px;
  border: 1px solid rgba(206,206,206,0.8);
  border-radius: 4px;
  background: rgba(0,0,0,0.04);
  opacity: 0.75;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=75)";
  filter: alpha(opacity=75);
}

.dcg-calculator-api-container .dcg-ttest-footer-container .dcg-value .dcg-operator .dcg-static-mathquill-view {
  border-right: 1px solid rgba(206,206,206,0.8);
  margin-right: 5px;
  min-width: 35px;
  text-align: center;
  padding: 3px;
}

.dcg-calculator-api-container .dcg-ttest-footer-container .dcg-value .dcg-evaluation .dcg-static-mathquill-view {
  padding: 3px 6px 3px 3px;
}.dcg-calculator-api-container .dcg-visualization-parameters-container {
  margin-bottom: 5px;
  cursor: pointer;
}

.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-smaller-font {
  font-size: 85%;
  margin-left: 2px;
}

.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-mathquill-wrapper {
  margin-left: 10px;
  margin-right: 10px;
}

.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-parameter-name {
  font-size: 105%;
}

.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-toggle-container {
  display: inline-block;
  margin-bottom: 5px;
}

.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-toggle-container:not(:last-of-type) {
  margin-right: 15px;
}

.dcg-calculator-api-container .dcg-visualization-parameters-container .dcg-toggle-container .dcg-toggle-option {
  min-width: 65px;
}.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover {
  top: -306px;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-arrow {
  border-top-color: #f7f7f7;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-interior {
  height: 306px !important;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-header {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  padding: 3px 6px;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-header .dcg-heading {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  padding: 10px 0 5px;
  text-transform: capitalize;
  color: #333;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-header .dcg-heading:not(:first-of-type) {
  margin-left: 6px;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-header .dcg-heading:not(.dcg-selected):not(.dcg-hovered):not(.dcg-depressed) {
  border-bottom: 3px solid #e2e2e2;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-header .dcg-heading.dcg-hovered {
  border-bottom: 3px solid #ccc;
  color: #000;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-header .dcg-heading.dcg-depressed {
  border-bottom: 3px solid #bbb;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-header .dcg-heading.dcg-selected {
  color: #4781b9;
  border-bottom: 3px solid #4781b9;
  cursor: default;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover {
  padding: 0;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-interior {
  padding: 0;
  width: 258px;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-interior .dcg-popover-header table {
  border-collapse: collapse;
  position: relative;
  top: 1px;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-interior .dcg-keypad-btn-container {
  width: 33.3%;
  float: left;
  height: 42px;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-interior .dcg-keypad-btn-container.dcg-keypad-short-btn {
  height: 36px;
  font-size: 95%;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-interior .dcg-keypad-btn-container .dcg-keypad-btn {
  font-size: 80% !important;
  white-space: nowrap;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-popover-section-separator {
  display: block;
  clear: both;
  border-bottom: 1px solid #e2e2e2;
  margin: 0 2px 4px;
  padding-top: 4px;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-section-heading {
  color: #888;
  text-transform: uppercase;
  font-size: 75%;
  text-align: center;
  padding-top: 8px;
  padding-bottom: 5px;
  clear: both;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-section-heading a {
  color: #000;
  margin-left: 5px;
  opacity: 0.3;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";
  filter: alpha(opacity=30);
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-section-heading a.dcg-hovered {
  opacity: 0.6;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";
  filter: alpha(opacity=60);
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-section-heading a.dcg-depressed {
  opacity: 0.9;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";
  filter: alpha(opacity=90);
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-interior-buttons {
  margin-left: 1px;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-option {
  border-bottom: 1px solid rgba(0,0,0,0.2);
  cursor: pointer;
  margin: 4px 1px 0 3px !important;
  width: 60px;
  height: 38px;
  line-height: 28px;
  text-align: center;
  line-height: 38px;
  padding: 0;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover .dcg-option.dcg-inverse-trig .dcg-mq-supsub {
  line-height: 0;
  font-size: 80%;
  position: relative;
  top: -0.5em;
  margin-right: -5px;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover.dcg-left {
  top: auto;
  bottom: 2px;
  right: 18%;
  left: auto;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover.dcg-left .dcg-arrow {
  top: auto;
}

.dcg-calculator-api-container .dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-functions-popover .dcg-popover-interior {
  width: 300px;
}

.dcg-calculator-api-container .dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-functions-popover .dcg-interior-buttons {
  font-size: 80%;
}

@media screen and (max-width: 330px) {
  .dcg-calculator-api-container .dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-functions-popover .dcg-popover-interior {
    width: 255px;
  }

  .dcg-calculator-api-container .dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-functions-popover .dcg-interior-buttons {
    font-size: 70%;
  }
}.dcg-calculator-api-container .dcg-keypad .dcg-keys-container {
  position: absolute;
  bottom: 0;
  z-index: 60;
  width: 100%;
  margin: 0 auto;
  padding: 0;
  -webkit-transition: opacity 0.3s;
  -moz-transition: opacity 0.3s;
  -o-transition: opacity 0.3s;
  -ms-transition: opacity 0.3s;
  transition: opacity 0.3s;
}

.dcg-calculator-api-container .dcg-keypad .dcg-functions-popover {
  position: absolute;
  right: 8px;
}

.dcg-calculator-api-container .dcg-keypad .dcg-minimize-keypad .dcg-icon-keyboard,
.dcg-calculator-api-container .dcg-keypad .dcg-show-keypad .dcg-icon-keyboard {
  font-size: 175%;
  float: left;
  margin-right: 8px;
}

.dcg-calculator-api-container .dcg-keypad .dcg-minimize-keypad .dcg-icon-caret-down,
.dcg-calculator-api-container .dcg-keypad .dcg-show-keypad .dcg-icon-caret-down,
.dcg-calculator-api-container .dcg-keypad .dcg-minimize-keypad .dcg-icon-caret-up,
.dcg-calculator-api-container .dcg-keypad .dcg-show-keypad .dcg-icon-caret-up {
  font-size: 75%;
  line-height: 2rem;
}

.dcg-calculator-api-container .dcg-keypad .dcg-minimize-keypad-container {
  position: absolute;
  top: -2.5rem;
  left: -1px;
}

.dcg-calculator-api-container .dcg-keypad .dcg-show-keypad-container {
  z-index: 60;
  position: absolute;
  bottom: 5px;
  left: 5px;
  -webkit-animation: dcg-fadeIn-show-keypad 0.6s;
  -moz-animation: dcg-fadeIn-show-keypad 0.6s;
  -o-animation: dcg-fadeIn-show-keypad 0.6s;
  -ms-animation: dcg-fadeIn-show-keypad 0.6s;
  animation: dcg-fadeIn-show-keypad 0.6s;
}

.dcg-calculator-api-container .dcg-keypad .dcg-minimize-keypad {
  padding: 0.25rem 1.25rem;
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
}

.dcg-calculator-api-container .dcg-keypad .dcg-show-keypad {
  padding: 4px 14px;
}

.dcg-calculator-api-container .dcg-keypad .dcg-keys {
  position: relative;
  width: 100%;
  max-width: 835px;
  margin: auto;
  text-align: center;
}

.dcg-calculator-api-container .dcg-keypad .dcg-keys {
  font-size: 110%;
}

.dcg-calculator-api-container .dcg-keypad .dcg-keys-background {
  background: #f0f0f0;
  border-top: 1px solid rgba(0,0,0,0.1);
  -webkit-box-shadow: 0 -1px 3px 0 rgba(0,0,0,0.1);
  box-shadow: 0 -1px 3px 0 rgba(0,0,0,0.1);
}

.dcg-calculator-api-container .dcg-keypad .dcg-keys-background .dcg-minimize-keypad {
  background: #f0f0f0;
  color: rgba(0,0,0,0.7);
  border: 1px solid rgba(0,0,0,0.1);
  border-bottom: 1px solid #f0f0f0;
  -webkit-box-shadow: 0 -1px 3px 0 rgba(0,0,0,0.1);
  box-shadow: 0 -1px 3px 0 rgba(0,0,0,0.1);
}

.dcg-calculator-api-container .dcg-keypad .dcg-keys-background .dcg-minimize-keypad.dcg-hovered {
  color: rgba(0,0,0,0.9);
}

.dcg-calculator-api-container .dcg-keypad .dcg-keys-background .dcg-minimize-keypad.dcg-depressed {
  color: #000;
}

.dcg-calculator-api-container .dcg-narrow .dcg-hide-on-narrow {
  display: none;
}

.dcg-calculator-api-container .dcg-narrow .dcg-keypad .dcg-functions-popover:not(.dcg-left) {
  position: absolute;
  margin-left: -70px;
}

.dcg-calculator-api-container .dcg-narrow .dcg-keypad .dcg-functions-popover.dcg-left {
  right: 18%;
}

@-webkit-keyframes dcg-fadeIn-show-keypad {
  0% {
    -webkit-transform: translate(0, 10px);
    -moz-transform: translate(0, 10px);
    -o-transform: translate(0, 10px);
    -ms-transform: translate(0, 10px);
    transform: translate(0, 10px);
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  50% {
    -webkit-transform: translate(0, 10px);
    -moz-transform: translate(0, 10px);
    -o-transform: translate(0, 10px);
    -ms-transform: translate(0, 10px);
    transform: translate(0, 10px);
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  100% {
    -webkit-transform: translate(0, 0);
    -moz-transform: translate(0, 0);
    -o-transform: translate(0, 0);
    -ms-transform: translate(0, 0);
    transform: translate(0, 0);
    opacity: 1;
    -ms-filter: none;
    filter: none;
  }
}

@keyframes dcg-fadeIn-show-keypad {
  0% {
    -webkit-transform: translate(0, 10px);
    -moz-transform: translate(0, 10px);
    -o-transform: translate(0, 10px);
    -ms-transform: translate(0, 10px);
    transform: translate(0, 10px);
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  50% {
    -webkit-transform: translate(0, 10px);
    -moz-transform: translate(0, 10px);
    -o-transform: translate(0, 10px);
    -ms-transform: translate(0, 10px);
    transform: translate(0, 10px);
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  100% {
    -webkit-transform: translate(0, 0);
    -moz-transform: translate(0, 0);
    -o-transform: translate(0, 0);
    -ms-transform: translate(0, 0);
    transform: translate(0, 0);
    opacity: 1;
    -ms-filter: none;
    filter: none;
  }
}.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container {
  height: 40px;
  display: inline-block;
  position: relative;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  -ms-box-flex: 1;
  box-flex: 1;
  -webkit-flex-grow: 1;
  flex-grow: 1;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn {
  position: absolute;
  top: 2px;
  left: 2px;
  right: 2px;
  bottom: 2px;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;
  -o-box-orient: horizontal;
  -webkit-flex-flow: row;
  -ms-flex-flow: row;
  flex-flow: row;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
  padding: 0;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn .dcg-keypad-btn-content {
  text-align: center;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator,
.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int {
  font-size: 80%;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator .dcg-mq-sup,
.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int .dcg-mq-sup,
.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator .dcg-mq-sub,
.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int .dcg-mq-sub,
.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator .dcg-mq-to,
.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int .dcg-mq-to,
.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator .dcg-mq-from,
.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int .dcg-mq-from {
  display: none;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-supsub {
  font-size: 80%;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-sqrt-stem {
  width: 4px;
  padding: 0;
  background: transparent;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=shift] {
  padding-top: 2px;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command="/"],
.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command="-"] {
  padding-top: 1px;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command="*"] {
  padding-top: 2px;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=left],
.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=right],
.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=backspace] {
  font-size: 110%;
  padding-top: 2px;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=enter] {
  font-size: 140%;
  padding-top: 3px;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn .dcg-keypad-btn-content {
  font-size: 90%;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-on-gray {
  -webkit-box-shadow: inset 0 1px rgba(255,255,255,0.25), inset 0 -1px rgba(0,0,0,0.02);
  box-shadow: inset 0 1px rgba(255,255,255,0.25), inset 0 -1px rgba(0,0,0,0.02);
  background: -webkit-linear-gradient(#fff, #fafafa);
  background: -moz-linear-gradient(#fff, #fafafa);
  background: -o-linear-gradient(#fff, #fafafa);
  background: -ms-linear-gradient(#fff, #fafafa);
  background: linear-gradient(#fff, #fafafa);
  border: 1px solid #d8d8d8;
  border-radius: 2px;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-on-gray.dcg-hovered {
  background: #f5f5f5;
  border-color: #d8d8d8;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-on-gray.dcg-depressed {
  background: #ebebeb;
  border-color: #cfcfcf;
  -webkit-box-shadow: none;
  box-shadow: none;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-dark-on-gray {
  -webkit-box-shadow: inset 0 1px rgba(255,255,255,0.1), inset 0 -1px rgba(0,0,0,0.02);
  box-shadow: inset 0 1px rgba(255,255,255,0.1), inset 0 -1px rgba(0,0,0,0.02);
  background: -webkit-linear-gradient(rgba(0,0,0,0.13), rgba(0,0,0,0.16));
  background: -moz-linear-gradient(rgba(0,0,0,0.13), rgba(0,0,0,0.16));
  background: -o-linear-gradient(rgba(0,0,0,0.13), rgba(0,0,0,0.16));
  background: -ms-linear-gradient(rgba(0,0,0,0.13), rgba(0,0,0,0.16));
  background: linear-gradient(rgba(0,0,0,0.13), rgba(0,0,0,0.16));
  border: 1px solid #bbb;
  border-radius: 2px;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-dark-on-gray.dcg-hovered {
  background: rgba(0,0,0,0.16);
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-dark-on-gray.dcg-depressed {
  -webkit-box-shadow: none;
  box-shadow: none;
  background: rgba(0,0,0,0.19);
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-tall-blue,
.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-short-blue {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border-radius: 2px;
  color: #fff;
  background: #4781b9;
  border: 1px solid #3f73a6;
  -webkit-box-shadow: inset 0 1px rgba(255,255,255,0.1), inset 0 -1px rgba(0,0,0,0.05);
  box-shadow: inset 0 1px rgba(255,255,255,0.1), inset 0 -1px rgba(0,0,0,0.05);
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-tall-blue.dcg-hovered:not(.dcg-disabled),
.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-short-blue.dcg-hovered:not(.dcg-disabled) {
  background: #3f73a6;
  -webkit-transition: background 0.2s;
  -moz-transition: background 0.2s;
  -o-transition: background 0.2s;
  -ms-transition: background 0.2s;
  transition: background 0.2s;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-tall-blue.dcg-depressed:not(.dcg-disabled),
.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-short-blue.dcg-depressed:not(.dcg-disabled) {
  background: #35608a;
  border: 1px solid #35608a;
  -webkit-box-shadow: none;
  box-shadow: none;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-tall-blue {
  height: 76px;
}

.dcg-calculator-api-container .dcg-inverted-colors .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-on-gray {
  -webkit-box-shadow: inset 0 -1px rgba(255,255,255,0.25), inset 0 1px rgba(0,0,0,0.02);
  box-shadow: inset 0 -1px rgba(255,255,255,0.25), inset 0 1px rgba(0,0,0,0.02);
  background: -webkit-linear-gradient(#fafafa, #fff);
  background: -moz-linear-gradient(#fafafa, #fff);
  background: -o-linear-gradient(#fafafa, #fff);
  background: -ms-linear-gradient(#fafafa, #fff);
  background: linear-gradient(#fafafa, #fff);
}

.dcg-calculator-api-container .dcg-inverted-colors .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-dark-on-gray {
  -webkit-box-shadow: inset 0 -1px rgba(255,255,255,0.1), inset 0 1px rgba(0,0,0,0.02);
  box-shadow: inset 0 -1px rgba(255,255,255,0.1), inset 0 1px rgba(0,0,0,0.02);
  background: -webkit-linear-gradient(rgba(0,0,0,0.16), rgba(0,0,0,0.13));
  background: -moz-linear-gradient(rgba(0,0,0,0.16), rgba(0,0,0,0.13));
  background: -o-linear-gradient(rgba(0,0,0,0.16), rgba(0,0,0,0.13));
  background: -ms-linear-gradient(rgba(0,0,0,0.16), rgba(0,0,0,0.13));
  background: linear-gradient(rgba(0,0,0,0.16), rgba(0,0,0,0.13));
}

.dcg-calculator-api-container .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-btn-light-on-gray {
  background: rgba(255,255,255,0.3);
  border: 0;
}

.dcg-calculator-api-container .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-btn-light-on-gray.dcg-hovered {
  background: rgba(255,255,255,0.25);
}

.dcg-calculator-api-container .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-btn-light-on-gray.dcg-depressed {
  background: rgba(255,255,255,0.15);
}

.dcg-calculator-api-container .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-btn-dark-on-gray {
  background: rgba(0,0,0,0.15);
  border: 0;
}

.dcg-calculator-api-container .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-btn-dark-on-gray.dcg-hovered {
  background: rgba(0,0,0,0.18);
}

.dcg-calculator-api-container .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-btn-dark-on-gray.dcg-depressed {
  background: rgba(0,0,0,0.22);
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow [dcg-command="/"] .dcg-keypad-btn-content,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow [dcg-command="="] .dcg-keypad-btn-content,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow [dcg-command="<"] .dcg-keypad-btn-content,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow [dcg-command="<="] .dcg-keypad-btn-content {
  position: relative;
  left: -1px;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow .dcg-basic-keypad .dcg-keypad-btn[dcg-command=sqrt] {
  font-size: 80%;
}

@media screen and (max-width: 650px) {
  .dcg-calculator-api-container .dcg-PROJECTOR-MODE:not(.dcg-narrow) .dcg-basic-keypad .dcg-keypad-btn[dcg-command=functions] {
    font-size: 80%;
  }
}.dcg-calculator-api-container .dcg-keypad-control-bar {
  height: 40px;
  background-color: rgba(0,0,0,0.07);
  border-left: 1px solid rgba(0,0,0,0.2);
  border-right: 1px solid rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-bar-contents {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;
  -o-box-orient: horizontal;
  -webkit-box-lines: single;
  -moz-box-lines: single;
  -o-box-lines: single;
  -webkit-flex-flow: row nowrap;
  -ms-flex-flow: row nowrap;
  flex-flow: row nowrap;
  -webkit-box-align: stretch;
  -moz-box-align: stretch;
  -o-box-align: stretch;
  -ms-flex-align: stretch;
  -webkit-align-items: stretch;
  align-items: stretch;
  -webkit-flex-shrink: 0;
  flex-shrink: 0;
  padding-top: 2px;
}

.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-spacer {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  -ms-box-flex: 1;
  box-flex: 1;
  -webkit-flex-grow: 1;
  flex-grow: 1;
}

.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-spacer-2 {
  -webkit-box-flex: 2;
  -moz-box-flex: 2;
  -o-box-flex: 2;
  -ms-box-flex: 2;
  box-flex: 2;
  -webkit-flex-grow: 2;
  flex-grow: 2;
}

.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-bar {
  height: 52px;
}.dcg-calculator-api-container .dcg-keypad-control-btn {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  -ms-box-flex: 1;
  box-flex: 1;
  -webkit-flex-grow: 1;
  flex-grow: 1;
  min-width: 40px;
  text-align: center;
  color: rgba(0,0,0,0.6);
  font-size: 87.5%;
}

.dcg-calculator-api-container .dcg-keypad-control-btn.dcg-narrow-control-btn {
  max-width: 80px;
}

.dcg-calculator-api-container .dcg-keypad-control-btn.dcg-selectable-btn {
  padding: 0 5px;
  height: 38px;
  line-height: 40px;
}

.dcg-calculator-api-container .dcg-keypad-control-btn:not(.dcg-selectable-btn) {
  height: 32px;
  line-height: 32px;
  margin: 5px;
  border-radius: 5px;
}

.dcg-calculator-api-container .dcg-keypad-control-btn.dcg-disabled {
  color: rgba(0,0,0,0.15);
  cursor: default;
}

.dcg-calculator-api-container .dcg-keypad-control-btn:not(.dcg-disabled):not(.dcg-selectable-btn).dcg-hovered {
  color: rgba(0,0,0,0.8);
  background: rgba(0,0,0,0.1);
}

.dcg-calculator-api-container .dcg-keypad-control-btn:not(.dcg-disabled):not(.dcg-selectable-btn).dcg-depressed {
  color: #000;
  background: rgba(0,0,0,0.18);
}

.dcg-calculator-api-container .dcg-keypad-control-btn[dcg-command=settings] i {
  font-size: 120%;
  position: relative;
  top: 1px;
}

.dcg-calculator-api-container .dcg-keypad-control-btn[dcg-command=backspace] i,
.dcg-calculator-api-container .dcg-keypad-control-btn[dcg-command=undo] i,
.dcg-calculator-api-container .dcg-keypad-control-btn[dcg-command=redo] i {
  font-size: 150%;
  position: relative;
  top: 3px;
}

.dcg-calculator-api-container .dcg-keypad-control-btn[dcg-command=clear] {
  width: 50px;
  white-space: nowrap;
}

.dcg-calculator-api-container .dcg-keypad-control-btn[dcg-command=clearall] {
  width: 50px;
  line-height: inherit;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -o-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
}

.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn {
  position: relative;
}

.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn:after {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  content: "";
  height: 0;
  background: rgba(71,129,185,0.5);
}

.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn.dcg-hovered:not(.dcg-selected) {
  color: #000;
}

.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn.dcg-hovered:not(.dcg-selected):after {
  height: 4px;
  -webkit-transition: height 0.2s;
  -moz-transition: height 0.2s;
  -o-transition: height 0.2s;
  -ms-transition: height 0.2s;
  transition: height 0.2s;
}

.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn.dcg-selected {
  color: #000;
}

.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn.dcg-selected:after {
  height: 4px;
  background: #4781b9;
}

.dcg-calculator-api-container .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn:first-of-type {
  margin-left: 6px;
}

.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-keypad-control-btn {
  min-width: 25px;
}

.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-keypad-control-btn[dcg-command=clearall],
.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-keypad-control-btn[dcg-command=clear] {
  width: 50px;
}

.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn {
  font-size: 150%;
  height: 44px;
  line-height: 44px;
}

.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=clearall],
.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=clear] {
  width: 75px;
}

.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=clearall] {
  line-height: 20px;
}

.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=settings] i {
  top: 4px;
}

.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=backspace] i,
.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=undo] i,
.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=redo] i {
  top: 5px;
}

.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-selectable-btn {
  top: 4px;
}.dcg-calculator-api-container .dcg-keypad-control-toggle {
  display: block;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  -ms-box-flex: 1;
  box-flex: 1;
  -webkit-flex-grow: 1;
  flex-grow: 1;
  line-height: 24px;
  height: 25px;
  margin-top: 7px;
  cursor: pointer;
  color: rgba(0,0,0,0.6);
  font-size: 80%;
  text-transform: uppercase;
  background: #fff;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 5px;
  width: 70px;
  min-width: 50px;
  margin-left: 20px;
  margin-right: 20px;
  position: relative;
  -webkit-box-shadow: inset 1px 1px 2px rgba(0,0,0,0.15);
  box-shadow: inset 1px 1px 2px rgba(0,0,0,0.15);
}

.dcg-calculator-api-container .dcg-keypad-control-toggle .dcg-ctrl-toggle-option {
  text-align: center;
  display: inline-block;
  width: 50%;
  font-size: 80%;
}

.dcg-calculator-api-container .dcg-keypad-control-toggle .dcg-ctrl-toggle-cover {
  position: absolute;
  top: -1px;
  right: -1px;
  bottom: -1px;
  left: 50%;
  border-radius: 5px;
  border: 1px solid rgba(0,0,0,0.2);
  -webkit-transition: -webkit-transform 0.2s;
  -moz-transition: -moz-transform 0.2s;
  -o-transition: -o-transform 0.2s;
  -ms-transition: -ms-transform 0.2s;
  transition: transform 0.2s;
}

.dcg-calculator-api-container .dcg-keypad-control-toggle.dcg-hovered {
  border-color: rgba(0,0,0,0.3);
}

.dcg-calculator-api-container .dcg-keypad-control-toggle.dcg-hovered .dcg-ctrl-toggle-cover {
  border-color: rgba(0,0,0,0.3);
}

.dcg-calculator-api-container .dcg-keypad-control-toggle.dcg-depressed .dcg-ctrl-toggle-cover {
  border-color: rgba(0,0,0,0.5);
}

.dcg-calculator-api-container .dcg-keypad-control-toggle.dcg-toggled .dcg-ctrl-toggle-cover {
  -webkit-transform: translate(-100%, 0);
  -moz-transform: translate(-100%, 0);
  -o-transform: translate(-100%, 0);
  -ms-transform: translate(-100%, 0);
  transform: translate(-100%, 0);
}

.dcg-calculator-api-container .dcg-has-background-color .dcg-keypad-control-toggle {
  background: rgba(255,255,255,0.3);
}

.dcg-calculator-api-container .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-keypad-control-toggle {
  margin-left: 5px;
  margin-right: 5px;
}

.dcg-calculator-api-container .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-toggle {
  font-size: 150%;
  min-width: 100px;
  margin: 14px 15px 0 15px;
  height: 28px;
  line-height: 26px;
}.dcg-calculator-api-container .dcg-basic-keypad-container {
  background: rgba(0,0,0,0.07);
  border: 1px solid rgba(0,0,0,0.2);
  border-top: none;
}

.dcg-calculator-api-container .dcg-basic-keypad {
  margin: 0;
  padding: 4px 3px;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-mq-large-operator .dcg-mq-to,
.dcg-calculator-api-container .dcg-basic-keypad .dcg-mq-large-operator .dcg-mq-from {
  display: none !important;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-mq-int .dcg-mq-supsub {
  display: none;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-mq-large-operator,
.dcg-calculator-api-container .dcg-basic-keypad .dcg-mq-int {
  font-size: 70%;
  position: relative;
  top: -1px;
}

.dcg-calculator-api-container .dcg-basic-keypad * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-half-width-placeholder {
  -webkit-box-flex: 0.5;
  -moz-box-flex: 0.5;
  -o-box-flex: 0.5;
  -ms-box-flex: 0.5;
  box-flex: 0.5;
  -webkit-flex-grow: 0.5;
  flex-grow: 0.5;
}

.dcg-calculator-api-container .dcg-basic-keypad .dcg-partition-placeholder {
  width: 4%;
}

.dcg-calculator-api-container .dcg-projector-mode .dcg-basic-keypad,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-basic-keypad {
  font-size: 150%;
}

.dcg-calculator-api-container .dcg-projector-mode .dcg-basic-keypad .dcg-keypad-btn-container {
  height: 52px;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-basic-keypad .dcg-keypad-row .dcg-keypad-btn-container {
  height: 46px;
}

.dcg-calculator-api-container .dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow .dcg-basic-keypad .dcg-keypad-row {
  font-size: 90%;
}

.dcg-calculator-api-container .dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow .dcg-basic-keypad .dcg-keypad-row .dcg-keypad-btn-container {
  height: 44px;
}

@media screen and (max-width: 470px) {
  .dcg-calculator-api-container .dcg-projector-mode .dcg-sci-func-keypad .dcg-basic-keypad {
    font-size: 115%;
  }
}

@media screen and (max-width: 330px) {
  .dcg-calculator-api-container .dcg-calculator-api-container .dcg-projector-mode .dcg-basic-keypad {
    font-size: 125%;
  }

  .dcg-calculator-api-container .dcg-calculator-api-container .dcg-projector-mode .dcg-sci-func-keypad .dcg-basic-keypad {
    font-size: 90%;
  }

  .dcg-calculator-api-container .dcg-calculator-api-container .dcg-PROJECTOR-MODE.dcg-narrow .dcg-basic-keypad .dcg-keypad-row {
    font-size: 70%;
  }
}.dcg-calculator-api-container .dcg-keypad-row {
  padding: 0;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;
  -o-box-orient: horizontal;
  -webkit-box-lines: single;
  -moz-box-lines: single;
  -o-box-lines: single;
  -webkit-flex-flow: row nowrap;
  -ms-flex-flow: row nowrap;
  flex-flow: row nowrap;
  -webkit-box-align: stretch;
  -moz-box-align: stretch;
  -o-box-align: stretch;
  -ms-flex-align: stretch;
  -webkit-align-items: stretch;
  align-items: stretch;
  margin: 0;
}.dcg-calculator-api-container .dcg-tooltip-hit-area-container {
  display: inline-block;
  position: relative;
  cursor: default !important;
  line-height: 0;
}

.dcg-calculator-api-container .dcg-tooltip-mount-pt {
  position: absolute;
  top: 0;
  left: 0;
}

.dcg-calculator-api-container .dcg-tooltip-positioning-container {
  position: absolute;
  pointer-events: none;
  z-index: 10000;
}

.dcg-calculator-api-container .dcg-tooltip-positioning-container .dcg-tooltip-message-container {
  position: absolute;
  z-index: 10000;
  -webkit-animation: dcg-fadeIn 0.3s;
  -moz-animation: dcg-fadeIn 0.3s;
  -o-animation: dcg-fadeIn 0.3s;
  -ms-animation: dcg-fadeIn 0.3s;
  animation: dcg-fadeIn 0.3s;
  white-space: normal;
  width: 200px;
}

.dcg-calculator-api-container .dcg-tooltip-positioning-container .dcg-tooltip-message-container .dcg-tooltip-message {
  background: #000;
  color: #fff;
  border-radius: 4px;
  padding: 5px 8px;
  font-size: 14px;
  text-shadow: none;
  line-height: 1.1em;
  display: inline-block;
  pointer-events: all;
  text-align: center;
}

.dcg-calculator-api-container .dcg-tooltip-positioning-container .dcg-tooltip-message-container .dcg-tooltip-message.dcg-latex {
  background: #fff;
  color: #000;
  opacity: 1;
  -ms-filter: none;
  filter: none;
  border: 1px solid #bbb;
  border-radius: 5px;
  position: relative;
}

.dcg-calculator-api-container .dcg-tooltip-positioning-container .dcg-tooltip-message-container .dcg-tooltip-message.dcg-latex .dcg-static-mathquill-view {
  width: 100%;
}

.dcg-calculator-api-container .dcg-tooltip-positioning-container .dcg-tooltip-message-container .dcg-tooltip-message.dcg-latex.dcg-sticky-not-stuck {
  opacity: 0.95;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=95)";
  filter: alpha(opacity=95);
  color: #666;
}

.dcg-calculator-api-container .dcg-tooltip-positioning-container .dcg-tooltip-message-container .dcg-tooltip-message.dcg-latex.dcg-tooltip-overflow:after {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  right: 8px;
  width: 14px;
  background: -webkit-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: -moz-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: -o-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: -ms-linear-gradient(left, rgba(255,255,255,0), #fff);
  background: linear-gradient(to right, rgba(255,255,255,0), #fff);
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-tooltip-positioning-container .dcg-tooltip-message-container .dcg-tooltip-message.dcg-latex .dcg-mq-root-block * {
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
  cursor: default;
}

.dcg-calculator-api-container .dcg-tooltip-positioning-container.dcg-latex-tooltip-positioning-container .dcg-tooltip-arrow {
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
  -o-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  transform: rotate(45deg);
}

.dcg-calculator-api-container .dcg-tooltip-positioning-container.dcg-latex-tooltip-positioning-container.dcg-tooltip-gravity-n-s .dcg-tooltip-arrow {
  -webkit-transform: translateX(-50%) rotate(45deg);
  -moz-transform: translateX(-50%) rotate(45deg);
  -o-transform: translateX(-50%) rotate(45deg);
  -ms-transform: translateX(-50%) rotate(45deg);
  transform: translateX(-50%) rotate(45deg);
}

.dcg-calculator-api-container .dcg-tooltip-positioning-container.dcg-latex-tooltip-positioning-container.dcg-tooltip-gravity-e-w .dcg-tooltip-arrow {
  -webkit-transform: translateY(-50%) rotate(45deg);
  -moz-transform: translateY(-50%) rotate(45deg);
  -o-transform: translateY(-50%) rotate(45deg);
  -ms-transform: translateY(-50%) rotate(45deg);
  transform: translateY(-50%) rotate(45deg);
}

.dcg-calculator-api-container .dcg-tooltip-positioning-container .dcg-tooltip-arrow {
  position: absolute;
  -webkit-animation: dcg-fadeIn 0.3s;
  -moz-animation: dcg-fadeIn 0.3s;
  -o-animation: dcg-fadeIn 0.3s;
  -ms-animation: dcg-fadeIn 0.3s;
  animation: dcg-fadeIn 0.3s;
  z-index: 10000;
}.dcg-calculator-api-container .dcg-settings-view-container {
  line-height: 0;
}

.dcg-calculator-api-container .dcg-settings-view-container .dcg-settings-container {
  position: absolute;
  top: 2px;
  right: 38px;
  line-height: 1em;
}

.dcg-calculator-api-container .dcg-settings-container {
  bottom: auto;
  z-index: 61;
  width: 290px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-arrow {
  top: 18px !important;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-popover-interior {
  padding: 10px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-modern-btn {
  border-radius: 6px;
  display: inline-block;
  padding: 3px;
  text-align: center;
  cursor: pointer;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-modern-btn.dcg-active {
  border: 1px solid #127a3d;
  background-color: #127a3d;
  color: rgba(255,255,255,0.9);
}

.dcg-calculator-api-container .dcg-settings-container .dcg-modern-btn.dcg-active.dcg-hovered {
  border-color: rgba(13,84,42,0.6);
  -webkit-box-shadow: inset 0 0 0 1px rgba(13,84,42,0.6);
  box-shadow: inset 0 0 0 1px rgba(13,84,42,0.6);
}

.dcg-calculator-api-container .dcg-settings-container .dcg-modern-btn.dcg-active.dcg-depressed {
  border-color: #0d542a;
  -webkit-box-shadow: inset 0 0 0 1px #0d542a;
  box-shadow: inset 0 0 0 1px #0d542a;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-modern-btn:not(.dcg-active) {
  border: 1px solid #127a3d;
  color: #127a3d;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-modern-btn:not(.dcg-active).dcg-hovered {
  border-color: #127a3d;
  -webkit-box-shadow: inset 0 0 0 1px #127a3d;
  box-shadow: inset 0 0 0 1px #127a3d;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-modern-btn:not(.dcg-active).dcg-depressed {
  border-color: #0d542a;
  -webkit-box-shadow: inset 0 0 0 1px #0d542a;
  box-shadow: inset 0 0 0 1px #0d542a;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-visual-settings {
  padding-bottom: 10px;
  border-bottom: 1px solid #ddd;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-visual-settings .dcg-action-projectormode {
  width: 100%;
  padding: 8px;
  margin-bottom: 10px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-minor-checkbox,
.dcg-calculator-api-container .dcg-settings-container .dcg-step-label {
  font-size: 85%;
  color: #444;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-top-section-flex {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  padding-top: 10px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-top-section-flex .dcg-component-checkbox {
  margin-top: 3px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-top-section-flex .dcg-grid-settings {
  min-width: 110px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-top-section-flex .dcg-grid-settings .dcg-component-checkbox {
  margin-bottom: 2px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-top-section-flex .dcg-top-checkboxes-container .dcg-component-checkbox {
  margin-bottom: 3px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-top-section-flex .dcg-top-checkboxes-container .dcg-action-zoom-square {
  float: left;
  clear: left;
  font-size: 80%;
  margin: 3px 0 8px;
  padding: 3px 10px;
  line-height: 1.5em;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container {
  border-top: 1px solid #ddd;
  margin-top: 10px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-action-toggle-y-axis-steps,
.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-action-toggle-x-axis-steps {
  margin-right: -2px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-component-checkbox {
  float: left;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-checkbox-title {
  font-size: 95%;
  height: 1.5em;
  line-height: 2em;
  margin-bottom: 2px;
  margin-top: 10px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-checkbox-title.dcg-x-axis-title {
  margin-top: 10px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-checkbox-title.dcg-y-axis-title {
  margin-top: 20px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-checkbox-title .dcg-checkbox {
  line-height: 2em;
  color: #444;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  cursor: pointer;
  white-space: nowrap;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-checkbox-title .dcg-checkbox .dcg-checkbox-box {
  font-size: 105%;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-checkbox-title .dcg-axis-label {
  width: 55%;
  outline: none;
  float: right;
  border-radius: 5px;
  color: #444;
  padding: 7px;
  font-size: 90%;
  -webkit-appearance: none;
  border: 1px solid rgba(0,0,0,0.42);
}

.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-checkbox-title .dcg-axis-label.dcg-hovered:not([disabled]) {
  border-color: rgba(0,0,0,0.42);
  -webkit-box-shadow: 0 0 0 1px rgba(0,0,0,0.42);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.42);
}

.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-checkbox-title .dcg-axis-label:focus:not([disabled]) {
  border-color: $selected-expr-color;
  -webkit-box-shadow: 0 0 0 1px $selected-expr-color;
  box-shadow: 0 0 0 1px $selected-expr-color;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-axes-settings-container .dcg-checkbox-title .dcg-axis-label[disabled] {
  opacity: 0.4;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=40)";
  filter: alpha(opacity=40);
}

.dcg-calculator-api-container .dcg-settings-container .dcg-radiangroup {
  border-top: 1px solid #ddd;
  padding-top: 10px;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  width: 100%;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-radiangroup .dcg-modern-btn {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  padding: 5px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-radiangroup .dcg-modern-btn:first-of-type {
  border-radius: 6px 0 0 6px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-radiangroup .dcg-modern-btn:last-of-type {
  border-radius: 0 6px 6px 0;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-arrows {
  text-align: center;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-arrows i {
  font-size: 26px;
  line-height: 28px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon-group {
  margin-left: 24px;
  margin-bottom: 4px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon {
  display: inline-block;
  cursor: pointer;
  width: 28px;
  height: 28px;
  border-radius: 14px;
  -webkit-box-shadow: 0 0 2px rgba(0,0,0,0.25) inset;
  box-shadow: 0 0 2px rgba(0,0,0,0.25) inset;
  background-color: #f9f9f9;
  -webkit-background-size: contain;
  -moz-background-size: contain;
  background-size: contain;
  background-position: center center;
  background-repeat: no-repeat;
  color: #777;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-active {
  background-color: #127a3d;
  color: rgba(255,255,255,0.9);
}

.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-active.dcg-hovered {
  -webkit-box-shadow: inset 0 0 0 2px rgba(13,84,42,0.6);
  box-shadow: inset 0 0 0 2px rgba(13,84,42,0.6);
}

.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-active.dcg-depressed {
  -webkit-box-shadow: inset 0 0 0 2px #0d542a;
  box-shadow: inset 0 0 0 2px #0d542a;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon:not(.dcg-active).dcg-hovered {
  -webkit-box-shadow: inset 0 0 0 2px rgba(0,0,0,0.15);
  box-shadow: inset 0 0 0 2px rgba(0,0,0,0.15);
}

.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon:not(.dcg-active).dcg-depressed {
  -webkit-box-shadow: inset 0 0 0 2px rgba(0,0,0,0.25);
  box-shadow: inset 0 0 0 2px rgba(0,0,0,0.25);
}

.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-action-cartesian,
.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-action-polar {
  background-position: center center;
  background-repeat: no-repeat;
  border: 1px solid rgba(0,0,0,0.42);
}

.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-action-cartesian.dcg-active,
.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-action-polar.dcg-active {
  border: none;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-action-cartesian {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAABRUlEQVR4Ae2ZJZQcURQF27vx58Sb8SJ2vD+jgzYswzqcCslW4yKDy2CXwSwz84Zuvu//XDj313mqTJnGV1QPJaIssofziOnA1VHiRGC3EM3AdSKe5J0DHehAB/73gTyrMInSPMvSidgNXAslysAeI94HbhExnHcF+rMpeFthEaV5m2UUcRi4XpToDOxnxGDgNhGzefevXyQOdKADHehAB9Ko8B6laWS5j1gO3GmUaAZ2D3E3cIOI13lXoD+bvyCwVqGF0tSyXETMBu4kStQDu404HbhexKu8+9evYgc60IEOdKAD2ahwjNJsZNlHfA3cNkpsBfYbYi9wnxFHefcXvM2cqdCP0pzJUiLWA3cDJa4F9gDxMnCTiLa880XiQAc60IEO9CrMqzCvwnwVO9CBDnSgA70K8yrsJ+FVmK9iBzrQgQ504HdiRjEpheKY1QAAAABJRU5ErkJggg==");
}

.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-action-cartesian.dcg-active {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAABO0lEQVR4Ae2ZJ1AzARBGz7v4GbyJF9h4P9FUS5d0zU+v8lQckt6LpRdD773DDzzO366j8+2bVc88c7kkG8SHEAgDcygENh2XBCDLsRdA2nHjQKvtFKhABSrwzwfSEWMdou0wGQeuHZcBIHTsIzDouH1g0XYB33wC+mPsQ7T9JsvAveOmARh37H9g3nHnwLbtfvtDokAFKlCBClQgqRiDEG3K5B9w6LhcANKOvQHqHTcP9Nou4JvPDwhMxMhAtAmTYmDbcdkAJB17CeQ6bhrosZ2eYgUqUIEKVOBvD+QsxiNEe2ZyC7w47hKAC8e+AjeO+w882O4HfJvJizEL0eaZhMCp46oAqHDsHdDtuHVgxHZ6SBSoQAUqUIE6hekUplOYnmIFKlCBClSgTmE6hX3Q6BSmp1iBClSgAhX4BgYE6hY3llM6AAAAAElFTkSuQmCC");
}

.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-action-polar {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAHs0lEQVR4Ad2bA5AsSxOFZ3Vt7rNt27Zt27Ztfw/Xtm3btm1zb/7xTlRsdMx27/T09ouY+Csvtounu1KVWZtIXdiHrESowiCMu0P2rU1uIo7CW2zl3vgBMoApnBkHwG8xFlMhXoDchrGLY+MAWJmVGB/HCZAyzMf4NRFP4TGMbRwQI8D3MFZTPS6AOYzDaBkXQPZhE8bzifgKF2AY58cEsBHGFMlwfIWWGOPILjlAzmQPxuWJeAsHsQ3j0ZICJIvhGB0T8Rc+wVhJpRICfABjB4f9FwArsBjj2+gA/eeIsXC/e/voAD/FWEGl/wpgFsMwOhWpr84FPMbn/MkyjD78xFvczNHkRODjyMVHAsniHL5niur8aCNdeIpqhaNb+WuCWAsNkQ6jKm8zG3O0juE05BsWYXTkV7owi92ubTvtuSiR4EI9nRc3In8r0JUNWm4nnXiao/x4kApcxTfMdzCHMEXWKEph/7R6t8BEC3iZWqmEhCzOpzkFmOjstDh+P/3Azezgi5DuVFXaYaK+lAovxZzu+HQ9t4WEdxL9WUA5x7oYS3k4pSE7jQUYu+nkfLnwAL/FWMI0rfQzOSnWqUEdCrTGtf8+ZvMwSzV0eHEeLtexGWOZGL4/Rq+wADmCnRj3Uo56WqcDZQNXKcUrrFOv7hzt1fBfswNjD03Zy3fg9WofTr6eTpSM3hgSYGeMYWTp58c0ciDlfFe5kpkCN4ubijYeSls1buKd5DfkYrZgdKNwWv7WNKVTA+QKvfjpnlfdKnWexMMcRTe3/mtqC3iDKeo0n5u8W8R6TemBQ03VvZ4KIHnivPpJkHdg1PHUVOFb1RVQRzsYXMjlGccD/TjRnR/GYUykclLPVzA2kJ8C4PP6Jvskjb1XKzykn7N5nFV6HsZp4US8Br+xS1L0GzX4RUbr8CK98sQvdYoDSHW97Ns+a/yOsZlDuJCxAreIu8hKhC8cSz+nuQqCPBSu0aacWvhcWs7Eo0kw5lLGZ2xpxsuzMYytfEqFKBbmJma7Ca4M6NFDElmKq6njsb4b6Mdb7M+xqrnVd2Q5GmKiNrJk0Qp3YI46cqhP+1FihZWYDxVIu/b1NWJ3sQATzSSrJP7fGIz6NJSh2sG3ya4mezHfqYZG3MNR2uLXuJC3megAfJcMgJPUy1jFG2zHuCk6wAsFax/5gcOKGkROYZGD8UmykFCaJa6tIXmeF3JGjO+okkjwB8aA6ADrYjQv/JoPOoM4lrNUc7I04QzZ2S3snwTwTXmJ3+jbNybLGTE5aXTDGTGOkRI/KBq8smzEuMp75OFTtjuDeLK+3hiqk8skjCZegOQLysuJBA8J4ttczyxnxK7xriImei8awEslj3n+BlG0hJqqu0Sgz/YArIcxHY3lXbXK7+YVSvmo+yHRAH4WdMDmIqZrwcXc4WraYYwiGwHkVPHZNc6I/YQJYh3yfeY6WhxZMQrAwRgvBbS1xxz14yR91+0YDwrgPRrZTWbzaRkxEacGaIqVGJdFACgOvMi3paa033XOIBbwFzX4EmOZrENnnVWO5ELGuaPBXXTH+MV/HVms59KHl6/J9/Ftuw9jvtugXo67PmINVkjtHadu5WPKuiP/HP+VpGp+Sx/gKRjbAtp+xqjrMYizsCTa42TdGTH2VW0Nv9mkkDoXexDypZswVvu3yQK/73muzVfs8MBzPrF3jA6rl/rNJjke5tsiSmCZTRkPMGiLr8JYG9DWBeOjtLa4msJGF0Xa4kCH1dhBdmDmpGlaQnKIniv7zSZL0yF9Ka6OYf6pB27FWE52GmrmKYzJASv9g/FjIv2iBa/wbanEVlmM8Ip6CMaXxVisJ6MA7IPxVnAQLk1TV8ARATmY9RgXRAH4HkYvf2fBRVmWhXIWfnMA/Z0FGQTKRAF4jnioXDHu1noODeFugbE70N16H6NPIkohj5UYtwU4rEcyGWM+h6ZwWD8WtAcDHdZp6hetyOZ2CXT5D5RPvZK/i3H5m2vEF6rxc/nPkDeYHxXgKeKdwwMPTfs7OTV+KHJoqshapxE/UpP/oamZ11GIKsltijl2lmeygzGEd7lagL/mYf4p1IqvqqP/sfN9gb2wJACvCnVwn4L50Hpmhji4j/U0RA597OTqYkMfWRzJu/RggeBuYhx1uJOyKUIfrXxCHxGCR+skty+HCB4V8mCo4FEV5mIsTA4eRQm/vSP+OyPO8BtZ0qYrqeUffksvgJlDb02wb4wBzDclWFcHBzDTCwHnS+NNpFpMIeCHpRU+ChECDh1EP05WZQw1YwiiPyfl0pCs8EH0MGmIM/TFZnNsSdIQZPOpQDQjJ3QaInQi51SWy6g9GDmRky/Fb/xCdthETnqpsAMZpb4jIqXClksUdiqcEjoVlm4ysTTfuUjVaCqnAfB6TDSXM9NLJkZJx/5WGCr/kVNSAaQCDzIUc3R0hHRspIR248Js+yS+5SqqJgMkl6N4mjZswbRZjZgQJaEd/UpALnfSiwLM0UoG04aVErUuTPOck5fyPYfEeiUg/LUm9uNFOrM+IA0xiV+4gpwIlyrivZYioJfyGG8wTzruRe7gJMoFX6/6P7jYk/lXozL/clnmX8/L/AuOmX9FNPMv2Wb+NeXMv+id+VflM/+XDTL+1zX+Bzz06y/bFKL/AAAAAElFTkSuQmCC");
}

.dcg-calculator-api-container .dcg-settings-container .dcg-circle-icon.dcg-action-polar.dcg-active {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAHMElEQVR4AeXbA4wk+xbH8f9gbc+1bdu2bdu2bXNxbdu+s+9ac7W2dwerQffnJZPOS6fTtdPVW0k6ed/FoJBf8ZzzO6dD21hMWSgIX+HQUBAGqAxJ4BJzHZ68QF+osXESAm/HeF2TFegANFs9CYE9TMW1SQrU0WjcH5LBCZhnqQQFXoHp+oRkUOFnvJiUQItpwJkhOWwFtkxI4FOoURmSxIv4WfnCC7SxNHYMyWIZ83D8wgpUZijeDMnjOkzVfSEFHoVGK4Tk0dV43B5fYMQ+kseRuUcfW+D1mJK5CsmjTDXeCjnoYysnuNEjJuET97jEvlZVEXEfJ07EE6jMZu5UIy0/9d5xit4hg5ci3gRJ4knUqNTLpYYDmGWoJ91mHN50v3cM0wKY73XbhGBrsEVIlogo8K460OQtp1ol3z2oq13cZjTgGzV4MRSDJUMMvAAY41z923pIlNnS81KATWPd8Uu0fmNfjW4qMJ3q5TXAp9oX/hTbUBrUOiAUhHV8bozOmVsXEx3bZiDbwBi0eCsil4sWeDsm+AvcqyIsEH0NlEKz3UMIyh1rIhi6oAzXHmZjkm1C8Dk+KlSglTThcJ0NBm/oFCLQ3nlmgfetmv2Gv1Uj0p61SMiDPTViqKrWn9bWgr0LFPg2qpVlcssWfKlzyIOd/QuG2SfkYnmvggaX5R6hbc3Be/63W49hmA5tC7QT0jbMOtS5+CT3HraK90CDCzLL8h5BDRhtn+xLpBafZMvRTy0ubEugdv7CkBzJjRiY9ZuebteIlIEWCQtCpdPMAp9ZO1M//Izf9MhZ8zzUqWpD4JlosFjOtoeDY1q/L3eiaaDaBqEQ9PWAZjR7QF/3od6KIQft/IuBCxKoj1m4NIRcPIjZlrO1n8A4hygLhWN1n4FaqagMxW5IWT9k0EE1js+RMVLHPNt28AumgLmu1zXExz6Gg7l2DnnxAb7U3q4GZkXfOp+5xJJW14L9Qx509iTgFUuGYnEQgDctn2f5KpoxVT5SJuLTvEHsEGMA/ypbmPzvRwzxpDQa3Z6balrEaNDgKYdZRTUusLVL/Qa4I1eAdVSDaS4yH/uEYrE1Gi0Wgo1VkxsQrWcc4Lrch0QHEwBPapd1QJkg5g49Q/AQvgjFYhCez3xf5mgTwU82af3Numrxj9sxx5I5Ai/GLLdJ42llmSBWB96TCWJWQ9oyoRh0Uo9dskse15ufCYjrGocf9VHpdzyTLVCVOpwbgmOkcak9DQPD7Bay8COuCMVge9RpFxEQYYJ+rb/bDmmbZgkcjL+1butypMEs5+UGMefhm1AMbogqsG3jbzDeQZnfvIbvlWsVaH0p7JYJYveAtIGq8uxrVTTrFuLja5wTsex1AJ9ZJwTLm4+jfYXDfI33QlDpVNMArB/xppiKHUJ81GObkAf9NGOPTEBMeVRfN2OSX/A2mqxsaz+DMQ7xPu4LefEZzghxUQUWC3lwBEZnLtBHYJZrzADA614Fc12rU6bkHxHy4iE8EOJiPcyLWHYvBmUFxGFySSPtWZkgZnHQN+TBxXh7wYVQvj/7YHrEsg9wZdbPA9yiEQCZnFj2Ng3YPu/ezkO1XlF/ghInKHGiLvEumBmx7B1cE+sS9zYP2xR1iSMTVhqVR3ZOno31kCyHtB4hDy7HGyEu+kD+1oP9MVl5jNfMKfgj5MXjuDvExwzsFPKgu7k4LMaL+hvcHB2xnBzi4xNcEmXCxQ51KStF9GBqsVWIjyvwUUSy8BeYVFCy8ABIGagqKiDoGOJjM8zVOTrdUmv5AtKth9ESmW5diU9CMWhnKg6ISFhX9gdGW76NhPVacHRkwvoXzg3F4V68E5nyL20cpnpMdMr/PLgphIiUfyM0qwrFYT2krBhZNC3pZ8BduUWTbmaCtGtCiCyansPboXh8gldEl51d/AHSvnG5Xf2MWx3rcTMA54cQWXZeKYWtQ/HYpaDCvUY+av1bQOH+U4ggjvXRZNcFWh9lVna5D4zRjAY/G+hgndqwPl6KaX1EmEezzMe5bZlHEe5WtHnU00iMjWUeRdhvl6HRRknab8q8iqn6x7LfIgzMCh9jnMUTNDAvRtqusQ3MCAu4yjj8pndCFvCx0rgmlgXchom+hqn4Ub8ETPQzpPCksrZN9DhtiI3UYrjVF6YNodz14DkVhbUh4jRy1jcZcxxddCOnyifgPuUxGjkxWmFL+x78p6hW2GTT0BRhp0S0wuI2Ezu4Qxr8oEcMgXsCRto4bjMxfjv2AUCdu63XlkBdHe1bAKvGa8cW39B+2nDA7263i165AlVaxaleMQc0e8qvMRraCYwEVDrYR1IApvraK6ZiqHf8pRHARHdaLrGRgHhjTZZwtrfVykfK7+6zk4r4QxWJjqVkhG7vBBcZheec7SDr6Bw9XvX/OdhT8qNRJT5cVvLjeSU+4FjiI6IlP2Rb4mPKJT/oXfqj8iX9YYMS+LjGfwFgmWfRuP1uXwAAAABJRU5ErkJggg==");
}

.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container {
  margin-top: 10px;
  padding-bottom: 10px;
  border-bottom: 1px solid #ddd;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-braille-options-buttons {
  margin-top: 5px;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-braille-options-buttons .dcg-modern-btn {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  padding: 5px;
  border-radius: 0;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-braille-options-buttons .dcg-modern-btn:first-of-type {
  border-right: none;
  border-radius: 6px 0 0 6px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-braille-options-buttons .dcg-modern-btn:last-of-type {
  border-left: none;
  border-radius: 0 6px 6px 0;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-six-key-checkbox {
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  margin-top: 5px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-six-key-checkbox .dcg-six-key-info {
  color: #999;
  text-decoration: none;
  margin-left: 0.5em;
  font-size: 85%;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-six-key-checkbox .dcg-six-key-info.dcg-hovered {
  color: #666;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-six-key-checkbox .dcg-six-key-info.dcg-active {
  color: #333;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-braille-container .dcg-six-key-checkbox .dcg-six-key-info i {
  display: block;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-interval-interior {
  margin: 0 -6px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-editable-mathquill-container {
  margin-top: 15px;
  position: relative;
  white-space: nowrap;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-editable-mathquill-container .dcg-step-container {
  float: right;
  margin-bottom: 10px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-editable-mathquill-container .dcg-mathquill-wrapper {
  display: inline-block;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-editable-mathquill-container .dcg-mathquill-wrapper .dcg-braille-input {
  max-width: 50px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-mq-editable-field.dcg-math-input,
.dcg-calculator-api-container .dcg-settings-container .dcg-mathquill-braille {
  position: relative;
  outline: none;
  border-bottom: 1px solid rgba(0,0,0,0.42);
  padding: 2px;
  margin: 1px;
  margin-bottom: 1px;
  min-width: 35px;
  font-size: 95%;
  max-width: 55px;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-mq-editable-field.dcg-math-input .dcg-braille-input,
.dcg-calculator-api-container .dcg-settings-container .dcg-mathquill-braille .dcg-braille-input {
  font-size: 100%;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-mq-editable-field.dcg-math-input.dcg-focus,
.dcg-calculator-api-container .dcg-settings-container .dcg-mathquill-braille.dcg-focus,
.dcg-calculator-api-container .dcg-settings-container .dcg-mq-editable-field.dcg-math-input.dcg-invalid,
.dcg-calculator-api-container .dcg-settings-container .dcg-mathquill-braille.dcg-invalid,
.dcg-calculator-api-container .dcg-settings-container .dcg-mq-editable-field.dcg-math-input.dcg-outofbounds,
.dcg-calculator-api-container .dcg-settings-container .dcg-mathquill-braille.dcg-outofbounds {
  border-bottom: 2px solid #6399cb;
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-mq-editable-field.dcg-math-input.dcg-outofbounds,
.dcg-calculator-api-container .dcg-settings-container .dcg-mathquill-braille.dcg-outofbounds,
.dcg-calculator-api-container .dcg-settings-container .dcg-mq-editable-field.dcg-math-input.dcg-invalid,
.dcg-calculator-api-container .dcg-settings-container .dcg-mathquill-braille.dcg-invalid {
  border-color: #e15855;
}

.dcg-calculator-api-container .dcg-settings-container .dcg-mq-editable-field.dcg-math-input.dcg-hovered:not(.dcg-focus),
.dcg-calculator-api-container .dcg-settings-container .dcg-mathquill-braille.dcg-hovered:not(.dcg-focus) {
  border-bottom: 2px solid rgba(0,0,0,0.42);
  margin-bottom: 0;
}

.dcg-calculator-api-container .dcg-narrow .dcg-settings-container {
  right: 35px;
  width: 260px;
}

.dcg-calculator-api-container .dcg-narrow .dcg-settings-container .dcg-mq-editable-field.dcg-math-input,
.dcg-calculator-api-container .dcg-narrow .dcg-settings-container .dcg-braille-input {
  padding-left: 0;
  padding-right: 0;
  font-size: 90%;
  max-width: 60px;
}.dcg-calculator-api-container .dcg-toast-view {
  position: absolute;
  top: 7px;
  left: 50px;
  right: 50px;
  height: 0;
  text-align: center;
  z-index: 45;
  overflow: visible;
  text-shadow: none;
  color: #222;
  line-height: 1em;
  -webkit-transition: 0.3s opacity;
  -moz-transition: 0.3s opacity;
  -o-transition: 0.3s opacity;
  -ms-transition: 0.3s opacity;
  transition: 0.3s opacity;
}

.dcg-calculator-api-container .dcg-toast-view:not(.dcg-visible) {
  opacity: 0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-toast-view .dcg-toast-wrapper {
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-toast-view .dcg-toast {
  display: inline-block;
  padding: 6px 10px;
  background: #fef2ad;
  border: 1px solid #fed973;
  border-radius: 4px;
  font-size: 85%;
  -webkit-box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  position: relative;
  pointer-events: auto;
}

.dcg-calculator-api-container .dcg-toast-view .dcg-toast i.dcg-icon-error {
  display: none;
}

.dcg-calculator-api-container .dcg-toast-view .dcg-toast a.dcg-undo {
  padding: 8px;
  margin: -8px;
  margin-left: 0px;
}

.dcg-calculator-api-container .dcg-toast-view .dcg-toast i.dcg-icon-remove {
  font-size: 87%;
  padding: 8px;
  margin: -5px -10px -8px 2px;
  color: rgba(0,0,0,0.3);
  cursor: pointer;
  float: right;
}

.dcg-calculator-api-container .dcg-toast-view .dcg-toast i.dcg-icon-remove.dcg-hovered,
.dcg-calculator-api-container .dcg-toast-view .dcg-toast i.dcg-icon-remove:focus {
  color: rgba(0,0,0,0.6);
}

.dcg-calculator-api-container .dcg-toast-view .dcg-toast i.dcg-icon-remove.dcg-depressed {
  color: rgba(0,0,0,0.8);
}

.dcg-calculator-api-container .dcg-toast-view .dcg-toast a {
  margin-left: 6px;
  text-decoration: underline;
  cursor: pointer;
  display: inline-block;
  color: #4781b9;
}

.dcg-calculator-api-container .dcg-toast-view .dcg-toast a.dcg-hovered {
  color: #004f9b;
}

.dcg-calculator-api-container .dcg-toast-view .dcg-toast-cover {
  display: none;
}

.dcg-calculator-api-container .dcg-toast-view[toast-style='error'] .dcg-toast {
  padding-left: 28px;
}

.dcg-calculator-api-container .dcg-toast-view[toast-style='error'] .dcg-toast i.dcg-icon-error {
  position: absolute;
  top: 7px;
  left: 10px;
  color: #fc944c;
  display: block;
}

.dcg-calculator-api-container .dcg-toast-view[toast-style='cover'] {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  padding-top: 5px;
  height: 100%;
  z-index: 999;
}

.dcg-calculator-api-container .dcg-toast-view[toast-style='cover'] .dcg-toast-cover {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  opacity: 0.3;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";
  filter: alpha(opacity=30);
  display: block;
  background-color: #000;
}.dcg-calculator-api-container .dcg-expressionitem.dcg-new-expression {
  height: 54px;
  position: relative;
  border-bottom: 1px solid transparent;
  overflow: visible !important;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-new-expression .dcg-new-math-div {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  cursor: pointer;
}

.dcg-calculator-api-container .dcg-expressionitem.dcg-new-expression .dcg-new-math-div .dcg-new-expression-fade {
  background: -webkit-linear-gradient(bottom, #fff, rgba(255,255,255,0) 50%);
  background: -moz-linear-gradient(bottom, #fff, rgba(255,255,255,0) 50%);
  background: -o-linear-gradient(bottom, #fff, rgba(255,255,255,0) 50%);
  background: -ms-linear-gradient(bottom, #fff, rgba(255,255,255,0) 50%);
  background: linear-gradient(to top, #fff, rgba(255,255,255,0) 50%);
  width: 44px;
  position: absolute;
  top: 0;
  bottom: 0;
  z-index: 3;
}

.dcg-calculator-api-container .dcg-has-background-color .dcg-new-expression-fade {
  display: none;
}.dcg-calculator-api-container .dcg-settings-pillbox,
.dcg-calculator-api-container .dcg-action-zoomin,
.dcg-calculator-api-container .dcg-action-zoomout,
.dcg-calculator-api-container .dcg-action-zoomrestore,
.dcg-calculator-api-container .dcg-reset-pillbox {
  height: 37px;
}

.dcg-calculator-api-container .dcg-settings-pillbox,
.dcg-calculator-api-container .dcg-zoominout-pillbox,
.dcg-calculator-api-container .dcg-action-zoomrestore,
.dcg-calculator-api-container .dcg-reset-pillbox {
  width: 37px;
  line-height: 37px;
  text-align: center;
}

.dcg-calculator-api-container .dcg-zoominout-pillbox .dcg-tooltip-hit-area-container,
.dcg-calculator-api-container .dcg-reset-pillbox .dcg-tooltip-hit-area-container {
  width: 100%;
}

.dcg-calculator-api-container .dcg-settings-pillbox,
.dcg-calculator-api-container .dcg-zoominout-pillbox,
.dcg-calculator-api-container .dcg-action-zoomrestore,
.dcg-calculator-api-container .dcg-reset-pillbox {
  margin-top: 3px;
  margin-bottom: 3px;
}

.dcg-calculator-api-container .dcg-pillbox-container {
  position: absolute;
  right: 5px;
  top: 2px;
  bottom: 0;
  width: 0;
  z-index: 41;
}

.dcg-calculator-api-container .dcg-pillbox-container .dcg-overgraph-pillbox-elements {
  position: absolute;
  top: 0;
  right: 0;
}

.dcg-calculator-api-container .dcg-pillbox-container .dcg-settings-pillbox,
.dcg-calculator-api-container .dcg-pillbox-container .dcg-reset-pillbox {
  float: right;
}

.dcg-calculator-api-container .dcg-zoom-container {
  float: right;
  clear: right;
}

.dcg-calculator-api-container .dcg-zoom-container .dcg-zoominout-pillbox .dcg-action-zoomin,
.dcg-calculator-api-container .dcg-zoom-container .dcg-zoominout-pillbox .dcg-action-zoomout {
  line-height: 40px;
  font-size: 75%;
}

.dcg-calculator-api-container .dcg-zoom-container .dcg-action-zoomin {
  border-bottom: 1px solid rgba(0,0,0,0.1);
}

.dcg-calculator-api-container .dcg-zoom-container .dcg-action-zoomrestore.dcg-disabled {
  display: none;
}

.dcg-calculator-api-container .dcg-zoom-container .dcg-action-zoomrestore {
  -webkit-animation: dcg-fadeIn-pillboxes 0.25s;
  -moz-animation: dcg-fadeIn-pillboxes 0.25s;
  -o-animation: dcg-fadeIn-pillboxes 0.25s;
  -ms-animation: dcg-fadeIn-pillboxes 0.25s;
  animation: dcg-fadeIn-pillboxes 0.25s;
}

.dcg-calculator-api-container .dcg-btn-flat-gray {
  -webkit-box-shadow: 0 0 5px rgba(0,0,0,0.15);
  box-shadow: 0 0 5px rgba(0,0,0,0.15);
  border: 1px solid rgba(0,0,0,0.1);
  border-radius: 5px;
  cursor: pointer;
  text-shadow: 0 1px #fff;
}

.dcg-calculator-api-container .dcg-btn-flat-gray i {
  opacity: 0.6;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";
  filter: alpha(opacity=60);
}

.dcg-calculator-api-container .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-hovered i,
.dcg-calculator-api-container .dcg-btn-flat-gray.dcg-btn-flat-gray-group div.dcg-hovered i {
  opacity: 0.9;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";
  filter: alpha(opacity=90);
}

.dcg-calculator-api-container .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-depressed,
.dcg-calculator-api-container .dcg-btn-flat-gray.dcg-btn-flat-gray-group div.dcg-depressed,
.dcg-calculator-api-container .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-active,
.dcg-calculator-api-container .dcg-btn-flat-gray.dcg-btn-flat-gray-group div.dcg-active {
  background: #e8e8e8;
}

.dcg-calculator-api-container .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-depressed i,
.dcg-calculator-api-container .dcg-btn-flat-gray.dcg-btn-flat-gray-group div.dcg-depressed i,
.dcg-calculator-api-container .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-active i,
.dcg-calculator-api-container .dcg-btn-flat-gray.dcg-btn-flat-gray-group div.dcg-active i {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}

.dcg-calculator-api-container .dcg-has-background-color .dcg-btn-flat-gray {
  text-shadow: none;
}

.dcg-calculator-api-container .dcg-overgraph-icon-container {
  z-index: 21;
}

.dcg-calculator-api-container .dcg-overgraph-icon-container:not(.dcg-bottom-right) {
  position: absolute;
  top: 5px;
  left: 5px;
}

.dcg-calculator-api-container .dcg-overgraph-icon-container.dcg-bottom-right {
  position: absolute;
  bottom: 5px;
  right: 5px;
}

.dcg-calculator-api-container .dcg-overgraph-icon {
  width: 37px;
  height: 37px;
  line-height: 40px ;
  font-size: 110%;
  text-shadow: -2px -2px 0 #fff, -2px 2px 0 #fff, 2px -2px 0 #fff, 2px 2px 0 #fff, 0 -2px 0 #fff, 0 2px 0 #fff, 2px 0 0 #fff, -2px 0 0 #fff;
  text-align: center;
  border-radius: 5px;
}

.dcg-calculator-api-container .dcg-overgraph-icon.dcg-rotated {
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  -ms-transform: rotate(-90deg);
  transform: rotate(-90deg);
}

.dcg-calculator-api-container .dcg-overgraph-icon i {
  opacity: 0.6;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";
  filter: alpha(opacity=60);
}

.dcg-calculator-api-container .dcg-overgraph-icon.dcg-hovered {
  background: rgba(0,0,0,0.15);
  text-shadow: none;
}

.dcg-calculator-api-container .dcg-overgraph-icon.dcg-hovered i {
  opacity: 0.8;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
  filter: alpha(opacity=80);
}

.dcg-calculator-api-container .dcg-overgraph-icon.dcg-depressed {
  background: rgba(0,0,0,0.3);
  text-shadow: none;
}

.dcg-calculator-api-container .dcg-overgraph-icon.dcg-depressed i {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}

@media only screen and (max-width: 450px) {
  .dcg-calculator-api-container .dcg-zoominout-pillbox {
    display: none;
  }
}

@media only screen and (max-height: 450px) {
  .dcg-calculator-api-container .dcg-zoominout-pillbox {
    display: none;
  }
}

@-webkit-keyframes dcg-fadeIn-pillboxes {
  0% {
    -webkit-transform: scale(0.75, 0.75);
    -moz-transform: scale(0.75, 0.75);
    -o-transform: scale(0.75, 0.75);
    -ms-transform: scale(0.75, 0.75);
    transform: scale(0.75, 0.75);
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  100% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -o-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
    opacity: 1;
    -ms-filter: none;
    filter: none;
  }
}

@keyframes dcg-fadeIn-pillboxes {
  0% {
    -webkit-transform: scale(0.75, 0.75);
    -moz-transform: scale(0.75, 0.75);
    -o-transform: scale(0.75, 0.75);
    -ms-transform: scale(0.75, 0.75);
    transform: scale(0.75, 0.75);
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
  }

  100% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -o-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
    opacity: 1;
    -ms-filter: none;
    filter: none;
  }
}.dcg-calculator-api-container .dcg-api-shared-keypad-root {
  background-color: #ededed;
}

.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-keypad-control-bar {
  background-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
}

.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-basic-keypad,
.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-keypad-control-bar-contents {
  max-width: 600px;
  margin: 0 auto;
}

.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-keypad-control-btn.dcg-selectable-btn {
  max-width: 70px;
}

.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-hide-keypad-button {
  height: 35px;
  width: 35px;
  line-height: 35px;
  text-align: center;
  border-radius: 5px;
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  -ms-transform: rotate(-90deg);
  transform: rotate(-90deg);
  margin: 4px 4px 4px auto;
  color: #666;
}

.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-hide-keypad-button .dcg-icon-hide {
  position: relative;
  top: 2px;
}

.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-hide-keypad-button.dcg-hovered {
  color: rgba(0,0,0,0.8);
  background: rgba(0,0,0,0.1);
}

.dcg-calculator-api-container .dcg-api-shared-keypad-root .dcg-hide-keypad-button.dcg-depressed {
  color: #000;
  background: rgba(0,0,0,0.18);
}.dcg-calculator-api-container .dcg-transparent-bg {
  background: rgba(0,0,0,0);
}

.dcg-calculator-api-container .dcg-mouse-over-closed-poi,
.dcg-calculator-api-container .dcg-mouse-over-opened-poi,
.dcg-calculator-api-container .dcg-mouse-over-interactive-label,
.dcg-calculator-api-container .dcg-mouse-over-clickable-object {
  cursor: pointer;
}

.dcg-calculator-api-container .dcg-mouse-over-movable-point {
  cursor: move;
}

.dcg-calculator-api-container .dcg-mouse-over-movable-point-ew {
  cursor: ew-resize;
}

.dcg-calculator-api-container .dcg-mouse-over-movable-point-ns {
  cursor: ns-resize;
}

.dcg-calculator-api-container .dcg-mouse-over-closed-poi .dcg-tracept {
  display: none;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-show-border .dcg-label {
  border: 1px solid #ddd;
  background: #fff;
  border-radius: 5px;
  -webkit-box-shadow: 0 0 5px rgba(0,0,0,0.2);
  box-shadow: 0 0 5px rgba(0,0,0,0.2);
  padding: 8px 6px;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-math-field {
  padding: 3px 10px;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-resizing-text-input-container input,
.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-text-input-content {
  padding: 5px 10px;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-editable-label-border {
  background: rgba(255,255,255,0.75);
  border-radius: 4px;
  border-width: 1px;
  border-style: solid;
  padding: 1px;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-editable-label-border:not(.dcg-focus):not(.dcg-hovered) {
  border-color: #bbb !important;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-empty-label:not(.dcg-focus):not(.dcg-hovered) {
  border-color: #999 !important;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-empty-label,
.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-focus {
  background: #fff;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-hovered:not(.dcg-focus) {
  border-style: solid;
  padding: 0px;
  border-width: 2px;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-focus {
  padding: 0px;
  border-width: 2px;
}

.dcg-calculator-api-container .dcg-poi-label .dcg-static-mathquill-view * {
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
}

.dcg-calculator-api-container .dcg-tabbable-point {
  position: absolute;
  left: -6px;
  top: -6px;
  width: 12px;
  height: 12px;
  text-align: left;
  overflow: hidden;
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-poi-label {
  display: inline-block;
  position: absolute;
  top: 0;
  left: 0;
  font-size: 100%;
  color: #888;
}

.dcg-calculator-api-container .dcg-poi-label .dcg-pt {
  display: inline-block;
  position: absolute;
  top: -4px;
  left: -4px;
  border: 4px solid #000;
  border-radius: 4px;
  width: 0;
  height: 0;
  z-index: 0;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-size-small .dcg-label {
  font-size: 95%;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-size-medium .dcg-label {
  font-size: 110%;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-size-large .dcg-label {
  font-size: 150%;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-vertical-label .dcg-label {
  -webkit-transform: rotate(-90deg) translate(-100%, 0);
  -moz-transform: rotate(-90deg) translate(-100%, 0);
  -o-transform: rotate(-90deg) translate(-100%, 0);
  -ms-transform: rotate(-90deg) translate(-100%, 0);
  transform: rotate(-90deg) translate(-100%, 0);
  -webkit-transform-origin: top left;
  -moz-transform-origin: top left;
  -o-transform-origin: top left;
  -ms-transform-origin: top left;
  transform-origin: top left;
}

.dcg-calculator-api-container .dcg-poi-label .dcg-label {
  position: absolute;
  z-index: 3;
  white-space: nowrap;
  -webkit-transition-property: top, left;
  -moz-transition-property: top, left;
  -o-transition-property: top, left;
  -ms-transition-property: top, left;
  transition-property: top, left;
  -webkit-transition-duration: 0.3s, 0.3s;
  -moz-transition-duration: 0.3s, 0.3s;
  -o-transition-duration: 0.3s, 0.3s;
  -ms-transition-duration: 0.3s, 0.3s;
  transition-duration: 0.3s, 0.3s;
}

.dcg-calculator-api-container .dcg-poi-label .dcg-label .dcg-mq-sqrt-prefix {
  text-shadow: none;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-has-outline .dcg-label {
  text-shadow: -1px -1px 0 #fff, -1px 1px 0 #fff, 1px -1px 0 #fff, 1px 1px 0 #fff, 0 -1px 0 #fff, 0 1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff;
}

.dcg-calculator-api-container .dcg-poi-label:not(.dcg-tracept) .dcg-pt {
  border-width: 5px;
  border-color: transparent !important;
  border-radius: 5px;
  opacity: 1;
  -ms-filter: none;
  filter: none;
  top: -5px !important;
  left: -5px !important;
  cursor: pointer;
}

.dcg-calculator-api-container .dcg-poi-label:not(.dcg-tracept).dcg-opened {
  color: #222;
}

.dcg-calculator-api-container .dcg-poi-label:not(.dcg-tracept).dcg-opened .dcg-pt {
  border-color: #000 !important;
}

.dcg-calculator-api-container .dcg-poi-label:not(.dcg-tracept).dcg-opened .dcg-label {
  opacity: 1;
  -ms-filter: none;
  filter: none;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-hole .dcg-pt {
  top: -5px;
  left: -5px;
  border-width: 2px;
  padding: 3px;
  background: #fff !important;
  border-radius: 6px;
}

.dcg-calculator-api-container .dcg-poi-label.dcg-hide-dot .dcg-pt {
  display: none;
}

.dcg-calculator-api-container .dcg-resizing-text-input-container {
  position: relative;
  overflow: hidden;
}

.dcg-calculator-api-container .dcg-resizing-text-input-container input {
  position: absolute;
  top: 1px;
  left: 1px;
  right: 1px;
  font: inherit;
  border: 0;
  outline: 0;
  background: transparent;
  color: inherit;
}

.dcg-calculator-api-container .dcg-resizing-text-input-container:not(.dcg-focus) input::selection {
  background: transparent;
}

.dcg-calculator-api-container .dcg-resizing-text-input-container.dcg-focus input,
.dcg-calculator-api-container .dcg-resizing-text-input-container.dcg-hovered input {
  position: absolute;
  top: 0;
  left: 0;
}

.dcg-calculator-api-container .dcg-resizing-text-input-container .dcg-text-input-content {
  min-width: 35px;
  display: inline-block;
  color: transparent;
  white-space: pre;
}.dcg-calculator-api-container .dcg-constrained-height-popover {
  position: absolute;
  top: 40px;
  bottom: 2px;
  right: 4px;
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-constrained-height-popover .dcg-popover-interior {
  max-height: 100%;
  pointer-events: auto;
}

.dcg-calculator-api-container .dcg-popover {
  z-index: 80;
}

.dcg-calculator-api-container .dcg-popover .dcg-popover-interior {
  padding: 20px;
  background-color: #fff;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 6px;
  -webkit-box-shadow: 0 5px 10px rgba(0,0,0,0.2);
  box-shadow: 0 5px 10px rgba(0,0,0,0.2);
  margin: -1px;
  overflow: auto;
}

.dcg-calculator-api-container .dcg-popover.dcg-top {
  margin-bottom: 10px;
}

.dcg-calculator-api-container .dcg-popover.dcg-right {
  margin-left: 10px;
}

.dcg-calculator-api-container .dcg-popover.dcg-bottom {
  margin-top: 10px;
}

.dcg-calculator-api-container .dcg-popover.dcg-left {
  margin-right: 10px;
}

.dcg-calculator-api-container .dcg-popover .dcg-popover-interior {
  overflow: auto;
}

.dcg-calculator-api-container .dcg-popover .dcg-popover-content {
  font-size: 85%;
  color: #444;
  line-height: 1.5em;
  position: relative;
}

.dcg-calculator-api-container .dcg-popover .dcg-popover-title {
  margin-bottom: 10px;
  font-size: 115%;
  border-bottom: 2px solid #127a3d;
  color: #127a3d;
  font-weight: normal;
  background-color: #fff;
}

.dcg-calculator-api-container .dcg-popover .dcg-popover-title:not(:first-of-type) {
  padding-top: 20px;
}

.dcg-calculator-api-container .dcg-popover .dcg-arrow,
.dcg-calculator-api-container .dcg-popover .dcg-arrow:after {
  position: absolute;
  display: inline-block;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
}

.dcg-calculator-api-container .dcg-popover .dcg-arrow:after {
  content: "";
  z-index: -1;
}

.dcg-calculator-api-container .dcg-popover.dcg-top .dcg-arrow {
  bottom: -10px;
  left: 50%;
  margin-left: -10px;
  border-width: 10px 10px 0;
  border-top-color: #fff;
}

.dcg-calculator-api-container .dcg-popover.dcg-top .dcg-arrow:after {
  border-width: 11px 11px 0;
  border-top-color: rgba(0,0,0,0.25);
  bottom: -1px;
  left: -11px;
}

.dcg-calculator-api-container .dcg-popover.dcg-right .dcg-arrow {
  top: 50%;
  left: -10px;
  margin-top: -10px;
  border-width: 10px 10px 10px 0;
  border-right-color: #fff;
}

.dcg-calculator-api-container .dcg-popover.dcg-right .dcg-arrow:after {
  border-width: 11px 11px 11px 0;
  border-right-color: rgba(0,0,0,0.25);
  bottom: -11px;
  left: -1px;
}

.dcg-calculator-api-container .dcg-popover.dcg-bottom .dcg-arrow {
  top: -14px;
  margin-left: -14px;
  border-width: 0px 14px 14px;
  border-bottom-color: #fff;
}

.dcg-calculator-api-container .dcg-popover.dcg-bottom .dcg-arrow:after {
  border-width: 0 14px 14px;
  border-bottom-color: rgba(0,0,0,0.25);
  top: -1px;
  left: -14px;
}

.dcg-calculator-api-container .dcg-popover.dcg-left .dcg-arrow {
  top: 50%;
  right: -10px;
  margin-top: -10px;
  border-width: 10px 0 10px 10px;
  border-left-color: #fff;
  border-top-color: transparent;
}

.dcg-calculator-api-container .dcg-popover.dcg-left .dcg-arrow:after {
  border-width: 11px 0 11px 11px;
  border-left-color: rgba(0,0,0,0.25);
  bottom: -11px;
  right: -1px;
}.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem textarea.dcg-smart-textarea,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-displayTextarea {
  font-size: 113%;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionimage .dcg-image-loaded .dcg-image-name {
  font-size: 113%;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionimage .dcg-image-loaded .dcg-mq-math-mode {
  font-size: 130%;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionimage .dcg-image-loaded .dcg-mq-editable-field.dcg-math-input {
  font-size: 100%;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-poi-label {
  font-size: 150%;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-poi-label .dcg-pt {
  border-width: 8px;
  border-radius: 8px;
  margin-left: -4px;
  margin-top: -4px;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-poi-label.dcg-hole .dcg-pt {
  border-width: 4px;
  padding: 5px;
  border-radius: 9px;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-poi-label:not(.dcg-tracept) .dcg-pt {
  border-width: 8px;
  border-radius: 8px;
  margin-left: -4px;
  margin-top: -4px;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-mq-math-mode,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-slider-container .dcg-mq-math-mode,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-mathquill-braille {
  font-size: 150%;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-fade-container .dcg-evaluation {
  font-size: 135%;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-fade-container .dcg-evaluation .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-fade-container .dcg-evaluation .dcg-mq-math-mode,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-fade-container .dcg-evaluation .dcg-mathquill-braille {
  font-size: 100%;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-fade-container .dcg-main:after {
  width: 2px;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-create-sliders {
  height: 30px;
  line-height: 30px;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-create-sliders .dcg-msg {
  font-size: 100%;
  padding: 2px 0;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-create-sliders .dcg-btn-slider {
  font-size: 120%;
  height: 30px;
  line-height: 30px;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-expressionitem .dcg-slider {
  bottom: 30px;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-display-domain {
  bottom: 12px;
  font-size: 110%;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-slider_menu,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-edit-domain {
  bottom: 6px;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-slider_menu .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-edit-domain .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-slider_menu .dcg-mq-math-mode,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-edit-domain .dcg-mq-math-mode {
  font-size: 120%;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-slider_menu table,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-edit-domain table {
  border-collapse: collapse;
  font-size: 20px;
  margin: 0 auto;
}

.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-slider_menu table input,
.dcg-calculator-api-container .dcg-PROJECTOR-MODE .dcg-edit-domain table input {
  font-size: 81%;
}.dcg-calculator-api-container .dcg-create-sliders {
  white-space: nowrap;
  height: 26px;
  line-height: 26px;
}

.dcg-calculator-api-container .dcg-create-sliders .dcg-msg {
  display: inline-block;
  margin-right: 5px;
  font-size: 80%;
  color: rgba(0,0,0,0.6);
}

.dcg-calculator-api-container .dcg-create-sliders .dcg-all .dcg-btn-slider {
  font-style: normal;
}

.dcg-calculator-api-container .dcg-create-sliders .dcg-btn-slider {
  padding: 0 10px !important;
  font-family: times;
  font-size: 90%;
  font-style: italic;
}

.dcg-calculator-api-container .dcg-create-sliders .dcg-slider-btn-container {
  display: inline-block;
  position: relative;
  margin-right: 3px;
  height: 16px;
  margin-bottom: 5px;
}

.dcg-calculator-api-container .dcg-create-sliders .dcg-slider-btn-container .dcg-btn-slider {
  height: 25px;
  line-height: 25px;
}

.dcg-calculator-api-container .dcg-create-sliders .dcg-slider-btn-container.dcg-all {
  width: 46px;
}

.dcg-calculator-api-container .dcg-create-sliders .dcg-slider-btn-container.dcg-all .dcg-slider_decoration {
  width: 46px;
}

.dcg-calculator-api-container .dcg-create-sliders .dcg-slider-btn-container.dcg-all .dcg-slider_btn {
  width: 28px;
}.dcg-calculator-api-container .dcg-regression-container {
  font-size: 80%;
  color: #222;
  cursor: default;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-statistics {
  display: inline-block;
  width: 130px;
  float: left;
  margin-bottom: 10px;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-residuals {
  float: left;
  width: 130px;
  margin-bottom: 10px;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-r-value {
  padding-left: 0.5em;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-residual-suggestion {
  opacity: 0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
  cursor: default;
  padding: 2px 7px;
  margin-left: 7px;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-residual-suggestion:not(.dcg-visible) {
  pointer-events: none;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-residual-suggestion.dcg-visible {
  -webkit-transition: opacity 0.25s;
  -moz-transition: opacity 0.25s;
  -o-transition: opacity 0.25s;
  -ms-transition: opacity 0.25s;
  transition: opacity 0.25s;
  display: inline-block;
  opacity: 1;
  -ms-filter: none;
  filter: none;
  cursor: pointer;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle {
  clear: both;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle.dcg-visible {
  display: block;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-action-log-mode-toggle {
  cursor: pointer;
  padding: 5px 0;
  color: #444;
  border-radius: 4px;
  display: inline-block;
  margin-bottom: 12px;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-action-log-mode-toggle .dcg-log-mode-checkbox {
  display: inline-block;
  width: 15px;
  height: 15px;
  border: 1px solid rgba(0,0,0,0.2);
  float: left;
  margin-right: 6px;
  border-radius: 3px;
  position: relative;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-action-log-mode-toggle .dcg-log-mode-checkbox i {
  color: transparent;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-action-log-mode-toggle.dcg-hovered .dcg-log-mode-checkbox,
.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-action-log-mode-toggle.dcg-toggled-on .dcg-log-mode-checkbox {
  border-color: #aaa;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-action-log-mode-toggle.dcg-depressed .dcg-log-mode-checkbox {
  border-color: #666;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-action-log-mode-toggle.dcg-toggled-on .dcg-log-mode-checkbox i {
  color: #127a3d;
  position: absolute;
  top: -1px;
  right: -2px;
  font-size: 110%;
  text-shadow: -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 1px 1px 0 #fff;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-log-mode-toggle-help {
  text-decoration: none;
  color: rgba(0,0,0,0.2);
  padding: 10px 6px;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-log-mode-toggle-help.dcg-hovered {
  color: #aaa;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-log-mode-toggle .dcg-log-mode-toggle-help.dcg-depressed {
  color: #666;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-parameters-container {
  clear: both;
  padding-bottom: 4px;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-parameters-container .dcg-parameter {
  float: left;
  min-width: 130px;
  padding-right: 5px;
}

.dcg-calculator-api-container .dcg-regression-container .dcg-parameters-container .dcg-parameter:nth-of-type(2n+1) {
  clear: both;
}.dcg-calculator-api-container .dcg-toggle {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
}

.dcg-calculator-api-container .dcg-toggle .dcg-toggle-option {
  padding: 4px 6px;
  text-align: center;
  border: 1px solid rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-toggle .dcg-toggle-option:first-of-type {
  border-top-left-radius: 5px;
  border-bottom-left-radius: 5px;
}

.dcg-calculator-api-container .dcg-toggle .dcg-toggle-option:not(:last-of-type) {
  border-right: 0;
}

.dcg-calculator-api-container .dcg-toggle .dcg-toggle-option:last-of-type {
  border-top-right-radius: 5px;
  border-bottom-right-radius: 5px;
}

.dcg-calculator-api-container .dcg-toggle .dcg-toggle-option.dcg-selected-toggle + .dcg-toggle-option {
  border-left: 1px solid #4781b9;
}

.dcg-calculator-api-container .dcg-toggle .dcg-toggle-option.dcg-hovered {
  background: rgba(0,0,0,0.05);
}

.dcg-calculator-api-container .dcg-toggle .dcg-toggle-option.dcg-depressed {
  background: rgba(0,0,0,0.2);
}

.dcg-calculator-api-container .dcg-toggle .dcg-toggle-option.dcg-selected-toggle {
  background: rgba(71,129,185,0.15);
  border-color: #4781b9;
  color: #4781b9;
  cursor: default !important;
}

.dcg-calculator-api-container .dcg-toggle .dcg-toggle-option.dcg-selected-toggle i {
  cursor: default;
}/*
  we want to position things relative to the dcg-tap-container, e.g. tooltips.
  but putting position:relative on body breaks layout. if it's the whole body,
  then we don't need to worry about absolute positioning of a child relative to
  the element anyhow
*/

.dcg-calculator-api-container .dcg-tap-container:not(body) {
  position: relative;
  /*so that we can absolutely position e.g. tooltips inside of our API*/
}

.dcg-calculator-api-container .dcg-focus-by-tap:focus {
  outline: none;
}.dcg-calculator-api-container .trip-block {
  position: absolute;
  opacity: 0;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
  -webkit-transition: 0.3s ease;
  -moz-transition: 0.3s ease;
  -o-transition: 0.3s ease;
  -ms-transition: 0.3s ease;
  transition: 0.3s ease;
  display: none;
  -webkit-transform: scale(0, 0);
  -moz-transform: scale(0, 0);
  -o-transform: scale(0, 0);
  -ms-transform: scale(0, 0);
  transform: scale(0, 0);
}

.dcg-calculator-api-container .trip-block.trip-is-loaded:not(.trip-hidden) {
  opacity: 1;
  -ms-filter: none;
  filter: none;
  -webkit-transform: scale(1, 1);
  -moz-transform: scale(1, 1);
  -o-transform: scale(1, 1);
  -ms-transform: scale(1, 1);
  transform: scale(1, 1);
}

.dcg-calculator-api-container .trip-block .trip-interior {
  padding: 10px;
  text-align: left;
  min-width: 100px;
  border-radius: 6px;
  padding-right: 40px;
  width: 275px;
  background: #fff;
  border: 3px solid #127a3d;
  color: #444;
  font-size: 100%;
  -webkit-box-shadow: 0 2px 7px 0 rgba(0,0,0,0.3);
  box-shadow: 0 2px 7px 0 rgba(0,0,0,0.3);
}

.dcg-calculator-api-container .trip-block .trip-interior .trip-link {
  color: #4781b9;
}

.dcg-calculator-api-container .trip-block .trip-interior .trip-title {
  font-weight: bold;
  margin-bottom: 5px;
}

.dcg-calculator-api-container .trip-block .trip-interior .trip-hint {
  font-size: 80%;
  line-height: 12px;
  margin-top: 4px;
  color: #666;
}

.dcg-calculator-api-container .trip-block .trip-interior i {
  font-size: 80%;
}

.dcg-calculator-api-container .trip-block .trip-interior code {
  border: solid 1px #d3d3d3;
  border-radius: 3px;
  padding: 2px 3px;
  display: inline-block;
}

.dcg-calculator-api-container .trip-block .trip-interior code i {
  font-size: 70%;
  font-family: Arial, sans-serif;
}

.dcg-calculator-api-container .trip-block .trip-interior .trip-close {
  color: rgba(0,0,0,0.3);
  position: absolute;
  right: 0px;
  top: 0px;
  font-size: 150%;
  line-height: 16px;
  float: right;
  padding: 6px;
  text-decoration: none;
  cursor: pointer;
}

.dcg-calculator-api-container .trip-block .trip-interior .trip-close.dcg-hovered {
  color: rgba(0,0,0,0.6);
}

.dcg-calculator-api-container .trip-block .trip-interior .trip-close.dcg-depressed {
  color: rgba(0,0,0,0.8);
}

.dcg-calculator-api-container .trip-block .trip-arrow {
  border: 10px solid transparent;
  height: 0;
  width: 0;
  position: absolute;
}

.dcg-calculator-api-container .trip-block.trip-n .trip-arrow {
  border-bottom-width: 0;
  border-top-color: #127a3d;
}

.dcg-calculator-api-container .trip-block.trip-s .trip-arrow {
  border-bottom-color: #127a3d;
  border-top-width: 0;
}

.dcg-calculator-api-container .trip-block.trip-e .trip-arrow {
  border-left-width: 0;
  border-right-color: #127a3d;
}

.dcg-calculator-api-container .trip-block.trip-w .trip-arrow {
  border-right-width: 0;
  border-left-color: #127a3d;
}

.dcg-calculator-api-container .trip-block.trip-n .trip-arrow,
.dcg-calculator-api-container .trip-block.trip-s .trip-arrow {
  left: 50%;
  margin-left: -10px;
}

.dcg-calculator-api-container .trip-block.trip-e .trip-arrow,
.dcg-calculator-api-container .trip-block.trip-w .trip-arrow {
  top: 50%;
  margin-top: -10px;
}

.dcg-calculator-api-container .trip-block.trip-n .trip-arrow {
  top: 100%;
}

.dcg-calculator-api-container .trip-block.trip-s .trip-arrow {
  bottom: 100%;
}

.dcg-calculator-api-container .trip-block.trip-e .trip-arrow {
  right: 100%;
}

.dcg-calculator-api-container .trip-block.trip-w .trip-arrow {
  left: 100%;
}

.dcg-calculator-api-container .trip-progress-bar {
  height: 1px;
  background-color: #444;
  width: 0;
}/*
 * MathQuill vv1.5, by Han, Jeanine, and Mary
 * http://mathquill.com | maintainers@mathquill.com
 *
 * This Source Code Form is subject to the terms of the
 * Mozilla Public License, v. 2.0. If a copy of the MPL
 * was not distributed with this file, You can obtain
 * one at http://mozilla.org/MPL/2.0/.
 */

.dcg-mq-aria-alert {
  position: absolute;
  left: -1000px;
  top: -1000px;
  width: 1px;
  height: 1px;
  text-align: left;
  overflow: hidden;
}

.dcg-calculator-api-container .dcg-mq-editable-field {
  display: -moz-inline-box;
  display: inline-block;
}

.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-cursor {
  border-left: 1px solid currentColor;
  margin-left: -1px;
  position: relative;
  z-index: 1;
  padding: 0;
  display: -moz-inline-box;
  display: inline-block;
}

.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-cursor.dcg-mq-blink {
  visibility: hidden;
}

.dcg-calculator-api-container .dcg-mq-editable-field,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-editable-field {
  border: 1px solid gray;
}

.dcg-calculator-api-container .dcg-mq-editable-field.dcg-mq-focused,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-editable-field.dcg-mq-focused {
  -webkit-box-shadow: #8bd 0 0 1px 2px, inset #6ae 0 0 2px 0;
  -moz-box-shadow: #8bd 0 0 1px 2px, inset #6ae 0 0 2px 0;
  box-shadow: #8bd 0 0 1px 2px, inset #6ae 0 0 2px 0;
  border-color: #709AC0;
  border-radius: 1px;
  aria-hidden: true;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-editable-field {
  margin: 1px;
}

.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-latex-command-input {
  color: inherit;
  font-family: "Courier New", monospace;
  border: 1px solid gray;
  padding-right: 1px;
  margin-right: 1px;
  margin-left: 2px;
}

.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-latex-command-input.dcg-mq-empty {
  background: transparent;
}

.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-latex-command-input.dcg-mq-hasCursor {
  border-color: ActiveBorder;
}

.dcg-calculator-api-container .dcg-mq-editable-field.dcg-mq-empty:after,
.dcg-calculator-api-container .dcg-mq-editable-field.dcg-mq-text-mode:after,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-empty:after {
  visibility: hidden;
  content: 'c';
}

.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-cursor:only-child:after,
.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-textarea + .dcg-mq-cursor:last-child:after {
  visibility: hidden;
  content: 'c';
}

.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-text-mode .dcg-mq-cursor:only-child:after {
  content: '';
}

.dcg-calculator-api-container .dcg-mq-editable-field.dcg-mq-text-mode {
  overflow-x: auto;
  overflow-y: hidden;
}

.dcg-calculator-api-container .dcg-mq-root-block,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block {
  display: -moz-inline-box;
  display: inline-block;
  width: 100%;
  padding: 2px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  white-space: nowrap;
  overflow: hidden;
  vertical-align: middle;
}

.dcg-calculator-api-container .dcg-mq-root-block .dcg-mq-digit,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-digit {
  margin-left: 0.009em;
  margin-right: 0.009em;
}

.dcg-calculator-api-container .dcg-mq-root-block .dcg-mq-group-start,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-start {
  margin-left: 0.11em;
  margin-right: -0.01em;
}

.dcg-calculator-api-container .dcg-mq-root-block .dcg-mq-group-other,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-other {
  margin-left: -0.01em;
  margin-right: -0.01em;
}

.dcg-calculator-api-container .dcg-mq-root-block .dcg-mq-group-leading-1,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-leading-1,
.dcg-calculator-api-container .dcg-mq-root-block .dcg-mq-group-leading-2,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-leading-2 {
  margin-left: 0;
  margin-right: -0.01em;
}

.dcg-calculator-api-container .dcg-mq-root-block .dcg-mq-group-leading-3,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-leading-3 {
  margin-left: 0.036em;
  margin-right: -0.01em;
}

.dcg-calculator-api-container .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-start,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-start,
.dcg-calculator-api-container .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-other,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-other,
.dcg-calculator-api-container .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-1,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-1,
.dcg-calculator-api-container .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-2,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-2,
.dcg-calculator-api-container .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-3,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-3 {
  margin-left: 0.009em;
  margin-right: 0.009em;
}

.dcg-calculator-api-container .dcg-mq-math-mode {
  font-variant: normal;
  font-weight: normal;
  font-style: normal;
  font-size: 115%;
  line-height: 1;
  display: -moz-inline-box;
  display: inline-block;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-non-leaf,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-scaled {
  display: -moz-inline-box;
  display: inline-block;
}

.dcg-calculator-api-container .dcg-mq-math-mode var,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-text-mode,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-nonSymbola {
  font-family: "Times New Roman", Symbola, serif;
  line-height: .9;
}

.dcg-calculator-api-container .dcg-mq-math-mode svg {
  fill: currentColor;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.dcg-calculator-api-container .dcg-mq-math-mode * {
  font-size: inherit;
  line-height: inherit;
  margin: 0;
  padding: 0;
  border-color: black;
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
  box-sizing: border-box;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-empty {
  background: rgba(0, 0, 0, 0.2);
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-empty.dcg-mq-root-block {
  background: transparent;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-empty.dcg-mq-empty-parens {
  background: transparent;
}

.dcg-calculator-api-container .dcg-mq-math-mode.dcg-mq-empty {
  background: transparent;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-text-mode {
  display: inline-block;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-text-mode.dcg-mq-hasCursor {
  box-shadow: inset darkgray 0 .1em .2em;
  padding: 0 .1em;
  margin: 0 -0.1em;
  min-width: 1ex;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-font {
  font: 1em "Times New Roman", Symbola, serif;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-font * {
  font-family: inherit;
  font-style: inherit;
}

.dcg-calculator-api-container .dcg-mq-math-mode b,
.dcg-calculator-api-container .dcg-mq-math-mode b.dcg-mq-font {
  font-weight: bolder;
}

.dcg-calculator-api-container .dcg-mq-math-mode var,
.dcg-calculator-api-container .dcg-mq-math-mode i,
.dcg-calculator-api-container .dcg-mq-math-mode i.dcg-mq-font {
  font-style: italic;
}

.dcg-calculator-api-container .dcg-mq-math-mode var.dcg-mq-f {
  margin-right: 0.2em;
  margin-left: 0.1em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-roman var.dcg-mq-f {
  margin: 0;
}

.dcg-calculator-api-container .dcg-mq-math-mode big {
  font-size: 200%;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-int > big {
  display: inline-block;
  -webkit-transform: scaleX(0.7);
  -moz-transform: scaleX(0.7);
  -ms-transform: scaleX(0.7);
  -o-transform: scaleX(0.7);
  transform: scaleX(0.7);
  vertical-align: -0.16em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-int > .dcg-mq-supsub {
  font-size: 80%;
  vertical-align: -1.1em;
  padding-right: .2em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-int > .dcg-mq-supsub > .dcg-mq-sup > .dcg-mq-sup-inner {
  vertical-align: 1.3em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-int > .dcg-mq-supsub > .dcg-mq-sub {
  margin-left: -0.35em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-roman {
  font-style: normal;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-sans-serif {
  font-family: sans-serif, Symbola, serif;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-monospace {
  font-family: monospace, Symbola, serif;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-overline {
  border-top: 1px solid;
  margin-top: 1px;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-underline {
  border-bottom: 1px solid;
  margin-bottom: 1px;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-binary-operator {
  padding: 0 0.2em;
  display: -moz-inline-box;
  display: inline-block;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub {
  text-align: left;
  font-size: 90%;
  vertical-align: -0.5em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub.dcg-mq-sup-only {
  vertical-align: .5em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub.dcg-mq-sup-only > .dcg-mq-sup {
  display: inline-block;
  vertical-align: text-bottom;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub .dcg-mq-sup {
  display: block;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub .dcg-mq-sub {
  display: block;
  float: left;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub .dcg-mq-binary-operator {
  padding: 0 .1em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub .dcg-mq-fraction {
  font-size: 70%;
}

.dcg-calculator-api-container .dcg-mq-math-mode sup.dcg-mq-nthroot {
  font-size: 80%;
  vertical-align: 0.8em;
  margin-right: -0.6em;
  margin-left: .2em;
  min-width: .5em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-ghost svg {
  opacity: 0.2;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-bracket-middle {
  margin-top: .1em;
  margin-bottom: .1em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-bracket-l,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-bracket-r {
  position: absolute;
  top: 0;
  bottom: 2px;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-bracket-l {
  left: 0;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-bracket-r {
  right: 0;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-bracket-container {
  position: relative;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-array {
  vertical-align: middle;
  text-align: center;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-array > span {
  display: block;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-operator-name {
  font-family: Symbola, "Times New Roman", serif;
  line-height: .9;
  font-style: normal;
}

.dcg-calculator-api-container .dcg-mq-math-mode var.dcg-mq-operator-name.dcg-mq-first {
  padding-left: .2em;
}

.dcg-calculator-api-container .dcg-mq-math-mode var.dcg-mq-operator-name.dcg-mq-last,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-supsub.dcg-mq-after-operator-name {
  padding-right: .2em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-fraction {
  font-size: 90%;
  text-align: center;
  vertical-align: -0.4em;
  padding: 0 .2em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-fraction,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator,
.dcg-calculator-api-container .dcg-mq-math-mode x:-moz-any-link {
  display: -moz-groupbox;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-fraction,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator,
.dcg-calculator-api-container .dcg-mq-math-mode x:-moz-any-link,
.dcg-calculator-api-container .dcg-mq-math-mode x:default {
  display: inline-block;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-numerator,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-denominator {
  display: block;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-numerator {
  padding: 0 0.1em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-denominator {
  border-top: 1px solid;
  float: right;
  width: 100%;
  padding: 0.1em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-sqrt-prefix {
  position: absolute;
  top: 1px;
  bottom: 0.15em;
  width: 0.95em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-sqrt-container {
  position: relative;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-sqrt-stem {
  border-top: 1px solid;
  margin-top: 1px;
  margin-left: 0.9em;
  padding-left: .15em;
  padding-right: .2em;
  margin-right: .1em;
  padding-top: 1px;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-diacritic-above {
  display: block;
  text-align: center;
  line-height: .4em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-diacritic-stem {
  display: block;
  text-align: center;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-hat-prefix {
  display: block;
  text-align: center;
  line-height: .95em;
  margin-bottom: -0.7em;
  transform: scaleX(1.5);
  -moz-transform: scaleX(1.5);
  -o-transform: scaleX(1.5);
  -webkit-transform: scaleX(1.5);
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-hat-stem {
  display: block;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator {
  vertical-align: -0.2em;
  padding: .2em;
  text-align: center;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-from,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator big,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-to {
  display: block;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-from,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-to {
  font-size: 80%;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-from {
  float: right;
  /* take out of normal flow to manipulate baseline */
  width: 100%;
}

.dcg-calculator-api-container .dcg-mq-math-mode,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-editable-field {
  cursor: text;
  font-family: Symbola, "Times New Roman", serif;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-overarc {
  border-top: 1px solid;
  border-radius: 50% 50% 0 0;
  padding: 0.35em 0.25em 0 0.1em;
  margin-top: 0.1em;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-overarrow {
  border-top: 1px solid;
  margin-top: 1px;
  padding-top: 0.2em;
  position: relative;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-overarrow:after {
  position: absolute;
  right: -0.1em;
  top: -0.48em;
  font-size: 0.5em;
  content: '\\27A4';
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-overarrow.dcg-mq-arrow-left:after {
  content: '';
  display: none;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-overarrow.dcg-mq-arrow-left:before,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-overarrow.dcg-mq-arrow-leftright:before {
  position: absolute;
  top: -0.48em;
  left: -0.1em;
  font-size: 0.5em;
  content: '\\27A4';
  -moz-transform: scaleX(-1);
  -o-transform: scaleX(-1);
  -webkit-transform: scaleX(-1);
  transform: scaleX(-1);
  filter: FlipH;
  -ms-filter: "FlipH";
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selection,
.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selection,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selection .dcg-mq-non-leaf,
.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selection .dcg-mq-non-leaf,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selection .dcg-mq-scaled,
.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selection .dcg-mq-scaled {
  background: #B4D5FE !important;
}

.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selection.dcg-mq-blur,
.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selection.dcg-mq-blur,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selection.dcg-mq-blur .dcg-mq-non-leaf,
.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selection.dcg-mq-blur .dcg-mq-non-leaf,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selection.dcg-mq-blur .dcg-mq-scaled,
.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selection.dcg-mq-blur .dcg-mq-scaled {
  background: #D4D4D4 !important;
  color: black;
  border-color: black;
}

html.dcg-calculator-api-container body .dcg-mq-math-mode .dcg-mq-selection .dcg-mq-nthroot-container *,
html body .dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selection .dcg-mq-nthroot-container *,
html.dcg-calculator-api-container body .dcg-mq-editable-field .dcg-mq-selection .dcg-mq-nthroot-container *,
html body .dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selection .dcg-mq-nthroot-container * {
  background: transparent !important;
}

.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-textarea,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-textarea {
  position: relative;
  -webkit-user-select: text;
  -moz-user-select: text;
  user-select: text;
}

.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-textarea *,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-textarea *,
.dcg-calculator-api-container .dcg-mq-editable-field .dcg-mq-selectable,
.dcg-calculator-api-container .dcg-mq-math-mode .dcg-mq-selectable {
  -webkit-user-select: text;
  -moz-user-select: text;
  user-select: text;
  position: absolute;
  clip: rect(1em 1em 1em 1em);
  -webkit-transform: scale(0);
  -moz-transform: scale(0);
  -ms-transform: scale(0);
  -o-transform: scale(0);
  transform: scale(0);
  resize: none;
  width: 1px;
  height: 1px;
  box-sizing: content-box;
}`,document.getElementsByTagName("head")[0].appendChild(T);var L=typeof Desmos<"u"?Desmos:{};_.exports=L,(function(){var G=L;G.config||(G.config={}),typeof e=="object"&&(G.enabledFeatures=e),typeof desmosLocales=="object"&&(G.locales=desmosLocales),G.commit=a,(function(){var Y,ce,P;(function(S){function c(E,M){return m.call(E,M)}function x(E,M){var D,A,v,k,J,X,te,H,z,B,F=M&&M.split("/"),$=r.map,re=$&&$["*"]||{};if(E&&E.charAt(0)===".")if(M){for(F=F.slice(0,F.length-1),E=F.concat(E.split("/")),H=0;H<E.length;H+=1)if((B=E[H])===".")E.splice(H,1),H-=1;else if(B===".."){if(H===1&&(E[2]===".."||E[0]===".."))break;H>0&&(E.splice(H-1,2),H-=2)}E=E.join("/")}else E.indexOf("./")===0&&(E=E.substring(2));if((F||re)&&$){for(D=E.split("/"),H=D.length;H>0;H-=1){if(A=D.slice(0,H).join("/"),F){for(z=F.length;z>0;z-=1)if((v=$[F.slice(0,z).join("/")])&&(v=v[A])){k=v,J=H;break}}if(k)break;!X&&re&&re[A]&&(X=re[A],te=H)}!k&&X&&(k=X,J=te),k&&(D.splice(0,J,k),E=D.join("/"))}return E}function t(E,M){return function(){return u.apply(S,b.call(arguments,0).concat([E,M]))}}function l(E){return function(M){return x(M,E)}}function n(E){return function(M){h[E]=M}}function i(E){if(c(p,E)){var M=p[E];delete p[E],o[E]=!0,d.apply(S,M)}if(!c(h,E)&&!c(o,E))throw new Error("No "+E);return h[E]}function s(E){var M,D=E?E.indexOf("!"):-1;return D>-1&&(M=E.substring(0,D),E=E.substring(D+1,E.length)),[M,E]}function g(E){return function(){return r&&r.config&&r.config[E]||{}}}var d,u,f,y,h={},p={},r={},o={},m=Object.prototype.hasOwnProperty,b=[].slice;f=function(E,M){var D,A=s(E),v=A[0];return E=A[1],v&&(v=x(v,M),D=i(v)),v?E=D&&D.normalize?D.normalize(E,l(M)):x(E,M):(E=x(E,M),A=s(E),v=A[0],E=A[1],v&&(D=i(v))),{f:v?v+"!"+E:E,n:E,pr:v,p:D}},y={require:function(E){return t(E)},exports:function(E){var M=h[E];return M!==void 0?M:h[E]={}},module:function(E){return{id:E,uri:"",exports:h[E],config:g(E)}}},d=function(E,M,D,A){var v,k,J,X,te,H,z=[];if(A=A||E,typeof D=="function"){for(M=!M.length&&D.length?["require","exports","module"]:M,te=0;te<M.length;te+=1)if(X=f(M[te],A),(k=X.f)==="require")z[te]=y.require(E);else if(k==="exports")z[te]=y.exports(E),H=!0;else if(k==="module")v=z[te]=y.module(E);else if(c(h,k)||c(p,k)||c(o,k))z[te]=i(k);else{if(!X.p)throw new Error(E+" missing "+k);X.p.load(X.n,t(A,!0),n(k),{}),z[te]=h[k]}J=D.apply(h[E],z),E&&(v&&v.exports!==S&&v.exports!==h[E]?h[E]=v.exports:J===S&&H||(h[E]=J))}else E&&(h[E]=D)},Y=ce=u=function(E,M,D,A,v){return typeof E=="string"?y[E]?y[E](M):i(f(E,M).f):(E.splice||(r=E,M.splice?(E=M,M=D,D=null):E=S),M=M||function(){},typeof D=="function"&&(D=A,A=v),A?d(S,E,M,D):setTimeout(function(){d(S,E,M,D)},4),u)},u.config=function(E){return r=E,r.deps&&u(r.deps,r.callback),u},P=function(E,M,D){M.splice||(D=M,M=[]),c(h,E)||c(p,E)||(p[E]=[E,M,D])},P.amd={jQuery:!0}})(),typeof ALMOND_OVERRIDES<"u"&&ALMOND_OVERRIDES&&(P=ALMOND_OVERRIDES.define||P,ce=ALMOND_OVERRIDES.require||ce,Y=ALMOND_OVERRIDES.requirejs||Y),P("core/vendor/almond",function(){}),P("ipad.ghostevents",["require"],function(S){function c(i){t&&n.evtInScope(i)&&(i.stopPropagation(),i.stopImmediatePropagation())}function x(i){t&&n.evtInScope(i)&&(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation())}var t=!1,l=null,n={isGhostEvent:function(i){return!1},evtInScope:function(i){return!1}};return document.addEventListener("mousedown",function(i){n.evtInScope(i)&&(l=document.activeElement,t=n.isGhostEvent(i),c(i))},!0),document.addEventListener("mouseup",c,!0),document.addEventListener("click",function(i){x(i),t&&document.activeElement!==l&&(document.activeElement&&document.activeElement.blur(),l&&l.focus()),t=!1},!0),document.addEventListener("focus",x,!0),document.addEventListener("blur",x,!0),n}),(function(S,c){c(S)})(typeof window<"u"?window:this,function(S,c){function x(I){var R=!!I&&"length"in I&&I.length,W=N.type(I);return W!=="function"&&!N.isWindow(I)&&(W==="array"||R===0||typeof R=="number"&&R>0&&R-1 in I)}function t(I,R,W){if(N.isFunction(R))return N.grep(I,function(ne,fe){return!!R.call(ne,fe,ne)!==W});if(R.nodeType)return N.grep(I,function(ne){return ne===R!==W});if(typeof R=="string"){if(He.test(R))return N.filter(R,I,W);R=N.filter(R,I)}return N.grep(I,function(ne){return _e.call(R,ne)>-1!==W})}function l(I,R){for(;(I=I[R])&&I.nodeType!==1;);return I}function n(I){var R={};return N.each(I.match(rt)||[],function(W,ne){R[ne]=!0}),R}function i(){Z.removeEventListener("DOMContentLoaded",i),S.removeEventListener("load",i),N.ready()}function s(){this.expando=N.expando+s.uid++}function g(I,R,W){var ne;if(W===void 0&&I.nodeType===1)if(ne="data-"+R.replace(Dt,"-$&").toLowerCase(),typeof(W=I.getAttribute(ne))=="string"){try{W=W==="true"||W!=="false"&&(W==="null"?null:+W+""===W?+W:Ut.test(W)?N.parseJSON(W):W)}catch{}At.set(I,R,W)}else W=void 0;return W}function d(I,R,W,ne){var fe,ve=1,Me=20,Ge=ne?function(){return ne.cur()}:function(){return N.css(I,R,"")},Ze=Ge(),it=W&&W[3]||(N.cssNumber[R]?"":"px"),lt=(N.cssNumber[R]||it!=="px"&&+Ze)&&St.exec(N.css(I,R));if(lt&&lt[3]!==it){it=it||lt[3],W=W||[],lt=+Ze||1;do ve=ve||".5",lt/=ve,N.style(I,R,lt+it);while(ve!==(ve=Ge()/Ze)&&ve!==1&&--Me)}return W&&(lt=+lt||+Ze||0,fe=W[1]?lt+(W[1]+1)*W[2]:+W[2],ne&&(ne.unit=it,ne.start=lt,ne.end=fe)),fe}function u(I,R){var W=I.getElementsByTagName!==void 0?I.getElementsByTagName(R||"*"):I.querySelectorAll!==void 0?I.querySelectorAll(R||"*"):[];return R===void 0||R&&N.nodeName(I,R)?N.merge([I],W):W}function f(I,R){for(var W=0,ne=I.length;W<ne;W++)vt.set(I[W],"globalEval",!R||vt.get(R[W],"globalEval"))}function y(I,R,W,ne,fe){for(var ve,Me,Ge,Ze,it,lt,q=R.createDocumentFragment(),Ee=[],nt=0,mt=I.length;nt<mt;nt++)if((ve=I[nt])||ve===0)if(N.type(ve)==="object")N.merge(Ee,ve.nodeType?[ve]:ve);else if(se.test(ve)){for(Me=Me||q.appendChild(R.createElement("div")),Ge=(Fn.exec(ve)||["",""])[1].toLowerCase(),Ze=tn[Ge]||tn._default,Me.innerHTML=Ze[1]+N.htmlPrefilter(ve)+Ze[2],lt=Ze[0];lt--;)Me=Me.lastChild;N.merge(Ee,Me.childNodes),Me=q.firstChild,Me.textContent=""}else Ee.push(R.createTextNode(ve));for(q.textContent="",nt=0;ve=Ee[nt++];)if(ne&&N.inArray(ve,ne)>-1)fe&&fe.push(ve);else if(it=N.contains(ve.ownerDocument,ve),Me=u(q.appendChild(ve),"script"),it&&f(Me),W)for(lt=0;ve=Me[lt++];)sn.test(ve.type||"")&&W.push(ve);return q}function h(){return!0}function p(){return!1}function r(){try{return Z.activeElement}catch{}}function o(I,R,W,ne,fe,ve){var Me,Ge;if(typeof R=="object"){typeof W!="string"&&(ne=ne||W,W=void 0);for(Ge in R)o(I,Ge,W,ne,R[Ge],ve);return I}if(ne==null&&fe==null?(fe=W,ne=W=void 0):fe==null&&(typeof W=="string"?(fe=ne,ne=void 0):(fe=ne,ne=W,W=void 0)),fe===!1)fe=p;else if(!fe)return I;return ve===1&&(Me=fe,fe=function(Ze){return N().off(Ze),Me.apply(this,arguments)},fe.guid=Me.guid||(Me.guid=N.guid++)),I.each(function(){N.event.add(this,R,fe,ne,W)})}function m(I,R){return N.nodeName(I,"table")&&N.nodeName(R.nodeType!==11?R:R.firstChild,"tr")?I.getElementsByTagName("tbody")[0]||I.appendChild(I.ownerDocument.createElement("tbody")):I}function b(I){return I.type=(I.getAttribute("type")!==null)+"/"+I.type,I}function E(I){var R=xe.exec(I.type);return R?I.type=R[1]:I.removeAttribute("type"),I}function M(I,R){var W,ne,fe,ve,Me,Ge,Ze,it;if(R.nodeType===1){if(vt.hasData(I)&&(ve=vt.access(I),Me=vt.set(R,ve),it=ve.events)){delete Me.handle,Me.events={};for(fe in it)for(W=0,ne=it[fe].length;W<ne;W++)N.event.add(R,fe,it[fe][W])}At.hasData(I)&&(Ge=At.access(I),Ze=N.extend({},Ge),At.set(R,Ze))}}function D(I,R){var W=R.nodeName.toLowerCase();W==="input"&&bn.test(I.type)?R.checked=I.checked:W!=="input"&&W!=="textarea"||(R.defaultValue=I.defaultValue)}function A(I,R,W,ne){R=oe.apply([],R);var fe,ve,Me,Ge,Ze,it,lt=0,q=I.length,Ee=q-1,nt=R[0],mt=N.isFunction(nt);if(mt||q>1&&typeof nt=="string"&&!Oe.checkClone&&j.test(nt))return I.each(function(Ct){var zt=I.eq(Ct);mt&&(R[0]=nt.call(this,Ct,zt.html())),A(zt,R,W,ne)});if(q&&(fe=y(R,I[0].ownerDocument,!1,I,ne),ve=fe.firstChild,fe.childNodes.length===1&&(fe=ve),ve||ne)){for(Me=N.map(u(fe,"script"),b),Ge=Me.length;lt<q;lt++)Ze=fe,lt!==Ee&&(Ze=N.clone(Ze,!0,!0),Ge&&N.merge(Me,u(Ze,"script"))),W.call(I[lt],Ze,lt);if(Ge)for(it=Me[Me.length-1].ownerDocument,N.map(Me,E),lt=0;lt<Ge;lt++)Ze=Me[lt],sn.test(Ze.type||"")&&!vt.access(Ze,"globalEval")&&N.contains(it,Ze)&&(Ze.src?N._evalUrl&&N._evalUrl(Ze.src):N.globalEval(Ze.textContent.replace(be,"")))}return I}function v(I,R,W){for(var ne,fe=R?N.filter(R,I):I,ve=0;(ne=fe[ve])!=null;ve++)W||ne.nodeType!==1||N.cleanData(u(ne)),ne.parentNode&&(W&&N.contains(ne.ownerDocument,ne)&&f(u(ne,"script")),ne.parentNode.removeChild(ne));return I}function k(I,R){var W=N(R.createElement(I)).appendTo(R.body),ne=N.css(W[0],"display");return W.detach(),ne}function J(I){var R=Z,W=Ye[I];return W||(W=k(I,R),W!=="none"&&W||(Ne=(Ne||N("<iframe frameborder='0' width='0' height='0'/>")).appendTo(R.documentElement),R=Ne[0].contentDocument,R.write(),R.close(),W=k(I,R),Ne.detach()),Ye[I]=W),W}function X(I,R,W){var ne,fe,ve,Me,Ge=I.style;return W=W||ct(I),Me=W?W.getPropertyValue(R)||W[R]:void 0,Me!==""&&Me!==void 0||N.contains(I.ownerDocument,I)||(Me=N.style(I,R)),W&&!Oe.pixelMarginRight()&&ot.test(Me)&&tt.test(R)&&(ne=Ge.width,fe=Ge.minWidth,ve=Ge.maxWidth,Ge.minWidth=Ge.maxWidth=Ge.width=Me,Me=W.width,Ge.width=ne,Ge.minWidth=fe,Ge.maxWidth=ve),Me!==void 0?Me+"":Me}function te(I,R){return{get:function(){return I()?void delete this.get:(this.get=R).apply(this,arguments)}}}function H(I){if(I in Et)return I;for(var R=I[0].toUpperCase()+I.slice(1),W=kt.length;W--;)if((I=kt[W]+R)in Et)return I}function z(I,R,W){var ne=St.exec(R);return ne?Math.max(0,ne[2]-(W||0))+(ne[3]||"px"):R}function B(I,R,W,ne,fe){for(var ve=W===(ne?"border":"content")?4:R==="width"?1:0,Me=0;ve<4;ve+=2)W==="margin"&&(Me+=N.css(I,W+Xt[ve],!0,fe)),ne?(W==="content"&&(Me-=N.css(I,"padding"+Xt[ve],!0,fe)),W!=="margin"&&(Me-=N.css(I,"border"+Xt[ve]+"Width",!0,fe))):(Me+=N.css(I,"padding"+Xt[ve],!0,fe),W!=="padding"&&(Me+=N.css(I,"border"+Xt[ve]+"Width",!0,fe)));return Me}function F(I,R,W){var ne=!0,fe=R==="width"?I.offsetWidth:I.offsetHeight,ve=ct(I),Me=N.css(I,"boxSizing",!1,ve)==="border-box";if(fe<=0||fe==null){if(fe=X(I,R,ve),(fe<0||fe==null)&&(fe=I.style[R]),ot.test(fe))return fe;ne=Me&&(Oe.boxSizingReliable()||fe===I.style[R]),fe=parseFloat(fe)||0}return fe+B(I,R,W||(Me?"border":"content"),ne,ve)+"px"}function $(I,R){for(var W,ne,fe,ve=[],Me=0,Ge=I.length;Me<Ge;Me++)ne=I[Me],ne.style&&(ve[Me]=vt.get(ne,"olddisplay"),W=ne.style.display,R?(ve[Me]||W!=="none"||(ne.style.display=""),ne.style.display===""&&qt(ne)&&(ve[Me]=vt.access(ne,"olddisplay",J(ne.nodeName)))):(fe=qt(ne),W==="none"&&fe||vt.set(ne,"olddisplay",fe?W:N.css(ne,"display"))));for(Me=0;Me<Ge;Me++)ne=I[Me],ne.style&&(R&&ne.style.display!=="none"&&ne.style.display!==""||(ne.style.display=R?ve[Me]||"":"none"));return I}function re(I,R,W,ne,fe){return new re.prototype.init(I,R,W,ne,fe)}function K(){return S.setTimeout(function(){gt=void 0}),gt=N.now()}function ue(I,R){var W,ne=0,fe={height:I};for(R=R?1:0;ne<4;ne+=2-R)W=Xt[ne],fe["margin"+W]=fe["padding"+W]=I;return R&&(fe.opacity=fe.width=I),fe}function ie(I,R,W){for(var ne,fe=(ee.tweeners[R]||[]).concat(ee.tweeners["*"]),ve=0,Me=fe.length;ve<Me;ve++)if(ne=fe[ve].call(W,R,I))return ne}function Q(I,R,W){var ne,fe,ve,Me,Ge,Ze,it,lt=this,q={},Ee=I.style,nt=I.nodeType&&qt(I),mt=vt.get(I,"fxshow");W.queue||(Ge=N._queueHooks(I,"fx"),Ge.unqueued==null&&(Ge.unqueued=0,Ze=Ge.empty.fire,Ge.empty.fire=function(){Ge.unqueued||Ze()}),Ge.unqueued++,lt.always(function(){lt.always(function(){Ge.unqueued--,N.queue(I,"fx").length||Ge.empty.fire()})})),I.nodeType===1&&("height"in R||"width"in R)&&(W.overflow=[Ee.overflow,Ee.overflowX,Ee.overflowY],it=N.css(I,"display"),(it==="none"?vt.get(I,"olddisplay")||J(I.nodeName):it)==="inline"&&N.css(I,"float")==="none"&&(Ee.display="inline-block")),W.overflow&&(Ee.overflow="hidden",lt.always(function(){Ee.overflow=W.overflow[0],Ee.overflowX=W.overflow[1],Ee.overflowY=W.overflow[2]}));for(ne in R)if(fe=R[ne],Rt.exec(fe)){if(delete R[ne],ve=ve||fe==="toggle",fe===(nt?"hide":"show")){if(fe!=="show"||!mt||mt[ne]===void 0)continue;nt=!0}q[ne]=mt&&mt[ne]||N.style(I,ne)}else it=void 0;if(N.isEmptyObject(q))(it==="none"?J(I.nodeName):it)==="inline"&&(Ee.display=it);else{mt?"hidden"in mt&&(nt=mt.hidden):mt=vt.access(I,"fxshow",{}),ve&&(mt.hidden=!nt),nt?N(I).show():lt.done(function(){N(I).hide()}),lt.done(function(){var Ct;vt.remove(I,"fxshow");for(Ct in q)N.style(I,Ct,q[Ct])});for(ne in q)Me=ie(nt?mt[ne]:0,ne,lt),ne in mt||(mt[ne]=Me.start,nt&&(Me.end=Me.start,Me.start=ne==="width"||ne==="height"?1:0))}}function pe(I,R){var W,ne,fe,ve,Me;for(W in I)if(ne=N.camelCase(W),fe=R[ne],ve=I[W],N.isArray(ve)&&(fe=ve[1],ve=I[W]=ve[0]),W!==ne&&(I[ne]=ve,delete I[W]),(Me=N.cssHooks[ne])&&"expand"in Me){ve=Me.expand(ve),delete I[ne];for(W in ve)W in I||(I[W]=ve[W],R[W]=fe)}else R[ne]=fe}function ee(I,R,W){var ne,fe,ve=0,Me=ee.prefilters.length,Ge=N.Deferred().always(function(){delete Ze.elem}),Ze=function(){if(fe)return!1;for(var q=gt||K(),Ee=Math.max(0,it.startTime+it.duration-q),nt=Ee/it.duration||0,mt=1-nt,Ct=0,zt=it.tweens.length;Ct<zt;Ct++)it.tweens[Ct].run(mt);return Ge.notifyWith(I,[it,mt,Ee]),mt<1&&zt?Ee:(Ge.resolveWith(I,[it]),!1)},it=Ge.promise({elem:I,props:N.extend({},R),opts:N.extend(!0,{specialEasing:{},easing:N.easing._default},W),originalProperties:R,originalOptions:W,startTime:gt||K(),duration:W.duration,tweens:[],createTween:function(q,Ee){var nt=N.Tween(I,it.opts,q,Ee,it.opts.specialEasing[q]||it.opts.easing);return it.tweens.push(nt),nt},stop:function(q){var Ee=0,nt=q?it.tweens.length:0;if(fe)return this;for(fe=!0;Ee<nt;Ee++)it.tweens[Ee].run(1);return q?(Ge.notifyWith(I,[it,1,0]),Ge.resolveWith(I,[it,q])):Ge.rejectWith(I,[it,q]),this}}),lt=it.props;for(pe(lt,it.opts.specialEasing);ve<Me;ve++)if(ne=ee.prefilters[ve].call(it,I,lt,it.opts))return N.isFunction(ne.stop)&&(N._queueHooks(it.elem,it.opts.queue).stop=N.proxy(ne.stop,ne)),ne;return N.map(lt,ie,it),N.isFunction(it.opts.start)&&it.opts.start.call(I,it),N.fx.timer(N.extend(Ze,{elem:I,anim:it,queue:it.opts.queue})),it.progress(it.opts.progress).done(it.opts.done,it.opts.complete).fail(it.opts.fail).always(it.opts.always)}function ae(I){return I.getAttribute&&I.getAttribute("class")||""}function le(I){return function(R,W){typeof R!="string"&&(W=R,R="*");var ne,fe=0,ve=R.toLowerCase().match(rt)||[];if(N.isFunction(W))for(;ne=ve[fe++];)ne[0]==="+"?(ne=ne.slice(1)||"*",(I[ne]=I[ne]||[]).unshift(W)):(I[ne]=I[ne]||[]).push(W)}}function me(I,R,W,ne){function fe(Ge){var Ze;return ve[Ge]=!0,N.each(I[Ge]||[],function(it,lt){var q=lt(R,W,ne);return typeof q!="string"||Me||ve[q]?Me?!(Ze=q):void 0:(R.dataTypes.unshift(q),fe(q),!1)}),Ze}var ve={},Me=I===Mi;return fe(R.dataTypes[0])||!ve["*"]&&fe("*")}function Ae(I,R){var W,ne,fe=N.ajaxSettings.flatOptions||{};for(W in R)R[W]!==void 0&&((fe[W]?I:ne||(ne={}))[W]=R[W]);return ne&&N.extend(!0,I,ne),I}function Be(I,R,W){for(var ne,fe,ve,Me,Ge=I.contents,Ze=I.dataTypes;Ze[0]==="*";)Ze.shift(),ne===void 0&&(ne=I.mimeType||R.getResponseHeader("Content-Type"));if(ne){for(fe in Ge)if(Ge[fe]&&Ge[fe].test(ne)){Ze.unshift(fe);break}}if(Ze[0]in W)ve=Ze[0];else{for(fe in W){if(!Ze[0]||I.converters[fe+" "+Ze[0]]){ve=fe;break}Me||(Me=fe)}ve=ve||Me}if(ve)return ve!==Ze[0]&&Ze.unshift(ve),W[ve]}function Fe(I,R,W,ne){var fe,ve,Me,Ge,Ze,it={},lt=I.dataTypes.slice();if(lt[1])for(Me in I.converters)it[Me.toLowerCase()]=I.converters[Me];for(ve=lt.shift();ve;)if(I.responseFields[ve]&&(W[I.responseFields[ve]]=R),!Ze&&ne&&I.dataFilter&&(R=I.dataFilter(R,I.dataType)),Ze=ve,ve=lt.shift()){if(ve==="*")ve=Ze;else if(Ze!=="*"&&Ze!==ve){if(!(Me=it[Ze+" "+ve]||it["* "+ve])){for(fe in it)if(Ge=fe.split(" "),Ge[1]===ve&&(Me=it[Ze+" "+Ge[0]]||it["* "+Ge[0]])){Me===!0?Me=it[fe]:it[fe]!==!0&&(ve=Ge[0],lt.unshift(Ge[1]));break}}if(Me!==!0)if(Me&&I.throws)R=Me(R);else try{R=Me(R)}catch(q){return{state:"parsererror",error:Me?q:"No conversion from "+Ze+" to "+ve}}}}return{state:"success",data:R}}function Le(I,R,W,ne){var fe;if(N.isArray(R))N.each(R,function(ve,Me){W||os.test(I)?ne(I,Me):Le(I+"["+(typeof Me=="object"&&Me!=null?ve:"")+"]",Me,W,ne)});else if(W||N.type(R)!=="object")ne(I,R);else for(fe in R)Le(I+"["+fe+"]",R[fe],W,ne)}function ze(I){return N.isWindow(I)?I:I.nodeType===9&&I.defaultView}var We=[],Z=S.document,C=We.slice,oe=We.concat,ge=We.push,_e=We.indexOf,De={},je=De.toString,Ie=De.hasOwnProperty,Oe={},N=function(I,R){return new N.fn.init(I,R)},Pe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Xe=/^-ms-/,$e=/-([\da-z])/gi,ht=function(I,R){return R.toUpperCase()};N.fn=N.prototype={jquery:"2.2.4",constructor:N,selector:"",length:0,toArray:function(){return C.call(this)},get:function(I){return I!=null?I<0?this[I+this.length]:this[I]:C.call(this)},pushStack:function(I){var R=N.merge(this.constructor(),I);return R.prevObject=this,R.context=this.context,R},each:function(I){return N.each(this,I)},map:function(I){return this.pushStack(N.map(this,function(R,W){return I.call(R,W,R)}))},slice:function(){return this.pushStack(C.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(I){var R=this.length,W=+I+(I<0?R:0);return this.pushStack(W>=0&&W<R?[this[W]]:[])},end:function(){return this.prevObject||this.constructor()},push:ge,sort:We.sort,splice:We.splice},N.extend=N.fn.extend=function(){var I,R,W,ne,fe,ve,Me=arguments[0]||{},Ge=1,Ze=arguments.length,it=!1;for(typeof Me=="boolean"&&(it=Me,Me=arguments[Ge]||{},Ge++),typeof Me=="object"||N.isFunction(Me)||(Me={}),Ge===Ze&&(Me=this,Ge--);Ge<Ze;Ge++)if((I=arguments[Ge])!=null)for(R in I)W=Me[R],ne=I[R],Me!==ne&&(it&&ne&&(N.isPlainObject(ne)||(fe=N.isArray(ne)))?(fe?(fe=!1,ve=W&&N.isArray(W)?W:[]):ve=W&&N.isPlainObject(W)?W:{},Me[R]=N.extend(it,ve,ne)):ne!==void 0&&(Me[R]=ne));return Me},N.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(I){throw new Error(I)},noop:function(){},isFunction:function(I){return N.type(I)==="function"},isArray:Array.isArray,isWindow:function(I){return I!=null&&I===I.window},isNumeric:function(I){var R=I&&I.toString();return!N.isArray(I)&&R-parseFloat(R)+1>=0},isPlainObject:function(I){var R;if(N.type(I)!=="object"||I.nodeType||N.isWindow(I)||I.constructor&&!Ie.call(I,"constructor")&&!Ie.call(I.constructor.prototype||{},"isPrototypeOf"))return!1;for(R in I);return R===void 0||Ie.call(I,R)},isEmptyObject:function(I){var R;for(R in I)return!1;return!0},type:function(I){return I==null?I+"":typeof I=="object"||typeof I=="function"?De[je.call(I)]||"object":typeof I},globalEval:function(I){var R,W=eval;(I=N.trim(I))&&(I.indexOf("use strict")===1?(R=Z.createElement("script"),R.text=I,Z.head.appendChild(R).parentNode.removeChild(R)):W(I))},camelCase:function(I){return I.replace(Xe,"ms-").replace($e,ht)},nodeName:function(I,R){return I.nodeName&&I.nodeName.toLowerCase()===R.toLowerCase()},each:function(I,R){var W,ne=0;if(x(I))for(W=I.length;ne<W&&R.call(I[ne],ne,I[ne])!==!1;ne++);else for(ne in I)if(R.call(I[ne],ne,I[ne])===!1)break;return I},trim:function(I){return I==null?"":(I+"").replace(Pe,"")},makeArray:function(I,R){var W=R||[];return I!=null&&(x(Object(I))?N.merge(W,typeof I=="string"?[I]:I):ge.call(W,I)),W},inArray:function(I,R,W){return R==null?-1:_e.call(R,I,W)},merge:function(I,R){for(var W=+R.length,ne=0,fe=I.length;ne<W;ne++)I[fe++]=R[ne];return I.length=fe,I},grep:function(I,R,W){for(var ne=[],fe=0,ve=I.length,Me=!W;fe<ve;fe++)!R(I[fe],fe)!==Me&&ne.push(I[fe]);return ne},map:function(I,R,W){var ne,fe,ve=0,Me=[];if(x(I))for(ne=I.length;ve<ne;ve++)(fe=R(I[ve],ve,W))!=null&&Me.push(fe);else for(ve in I)(fe=R(I[ve],ve,W))!=null&&Me.push(fe);return oe.apply([],Me)},guid:1,proxy:function(I,R){var W,ne,fe;if(typeof R=="string"&&(W=I[R],R=I,I=W),N.isFunction(I))return ne=C.call(arguments,2),fe=function(){return I.apply(R||this,ne.concat(C.call(arguments)))},fe.guid=I.guid=I.guid||N.guid++,fe},now:Date.now,support:Oe}),typeof Symbol=="function"&&(N.fn[Symbol.iterator]=We[Symbol.iterator]),N.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(I,R){De["[object "+R+"]"]=R.toLowerCase()});var ye=(function(I){function R(ke,Qe,Ke,st){var et,pt,dt,bt,Lt,Ht,Bt,Vt,en=Qe&&Qe.ownerDocument,dn=Qe?Qe.nodeType:9;if(Ke=Ke||[],typeof ke!="string"||!ke||dn!==1&&dn!==9&&dn!==11)return Ke;if(!st&&((Qe?Qe.ownerDocument||Qe:ur)!==Zt&&Gn(Qe),Qe=Qe||Zt,dr)){if(dn!==11&&(Ht=Cu.exec(ke)))if(et=Ht[1]){if(dn===9){if(!(dt=Qe.getElementById(et)))return Ke;if(dt.id===et)return Ke.push(dt),Ke}else if(en&&(dt=en.getElementById(et))&&fo(Qe,dt)&&dt.id===et)return Ke.push(dt),Ke}else{if(Ht[2])return Gr.apply(Ke,Qe.getElementsByTagName(ke)),Ke;if((et=Ht[3])&&Ft.getElementsByClassName&&Qe.getElementsByClassName)return Gr.apply(Ke,Qe.getElementsByClassName(et)),Ke}if(Ft.qsa&&!ra[ke+" "]&&(!Rn||!Rn.test(ke))){if(dn!==1)en=Qe,Vt=ke;else if(Qe.nodeName.toLowerCase()!=="object"){for((bt=Qe.getAttribute("id"))?bt=bt.replace(Tu,"\\$&"):Qe.setAttribute("id",bt=gn),Bt=Kt(ke),pt=Bt.length,Lt=gl.test(bt)?"#"+bt:"[id='"+bt+"']";pt--;)Bt[pt]=Lt+" "+lt(Bt[pt]);Vt=Bt.join(","),en=ps.test(ke)&&Ze(Qe.parentNode)||Qe}if(Vt)try{return Gr.apply(Ke,en.querySelectorAll(Vt)),Ke}catch{}finally{bt===gn&&Qe.removeAttribute("id")}}}return ta(ke.replace(ia,"$1"),Qe,Ke,st)}function W(){function ke(Ke,st){return Qe.push(Ke+" ")>Gt.cacheLength&&delete ke[Qe.shift()],ke[Ke+" "]=st}var Qe=[];return ke}function ne(ke){return ke[gn]=!0,ke}function fe(ke){var Qe=Zt.createElement("div");try{return!!ke(Qe)}catch{return!1}finally{Qe.parentNode&&Qe.parentNode.removeChild(Qe),Qe=null}}function ve(ke,Qe){for(var Ke=ke.split("|"),st=Ke.length;st--;)Gt.attrHandle[Ke[st]]=Qe}function Me(ke,Qe){var Ke=Qe&&ke,st=Ke&&ke.nodeType===1&&Qe.nodeType===1&&(~Qe.sourceIndex||pl)-(~ke.sourceIndex||pl);if(st)return st;if(Ke){for(;Ke=Ke.nextSibling;)if(Ke===Qe)return-1}return ke?1:-1}function Ge(ke){return ne(function(Qe){return Qe=+Qe,ne(function(Ke,st){for(var et,pt=ke([],Ke.length,Qe),dt=pt.length;dt--;)Ke[et=pt[dt]]&&(Ke[et]=!(st[et]=Ke[et]))})})}function Ze(ke){return ke&&ke.getElementsByTagName!==void 0&&ke}function it(){}function lt(ke){for(var Qe=0,Ke=ke.length,st="";Qe<Ke;Qe++)st+=ke[Qe].value;return st}function q(ke,Qe,Ke){var st=Qe.dir,et=Ke&&st==="parentNode",pt=yu++;return Qe.first?function(dt,bt,Lt){for(;dt=dt[st];)if(dt.nodeType===1||et)return ke(dt,bt,Lt)}:function(dt,bt,Lt){var Ht,Bt,Vt,en=[Mr,pt];if(Lt){for(;dt=dt[st];)if((dt.nodeType===1||et)&&ke(dt,bt,Lt))return!0}else for(;dt=dt[st];)if(dt.nodeType===1||et){if(Vt=dt[gn]||(dt[gn]={}),Bt=Vt[dt.uniqueID]||(Vt[dt.uniqueID]={}),(Ht=Bt[st])&&Ht[0]===Mr&&Ht[1]===pt)return en[2]=Ht[2];if(Bt[st]=en,en[2]=ke(dt,bt,Lt))return!0}}}function Ee(ke){return ke.length>1?function(Qe,Ke,st){for(var et=ke.length;et--;)if(!ke[et](Qe,Ke,st))return!1;return!0}:ke[0]}function nt(ke,Qe,Ke){for(var st=0,et=Qe.length;st<et;st++)R(ke,Qe[st],Ke);return Ke}function mt(ke,Qe,Ke,st,et){for(var pt,dt=[],bt=0,Lt=ke.length,Ht=Qe!=null;bt<Lt;bt++)(pt=ke[bt])&&(Ke&&!Ke(pt,st,et)||(dt.push(pt),Ht&&Qe.push(bt)));return dt}function Ct(ke,Qe,Ke,st,et,pt){return st&&!st[gn]&&(st=Ct(st)),et&&!et[gn]&&(et=Ct(et,pt)),ne(function(dt,bt,Lt,Ht){var Bt,Vt,en,dn=[],Nt=[],In=bt.length,Nn=dt||nt(Qe||"*",Lt.nodeType?[Lt]:Lt,[]),Xn=!ke||!dt&&Qe?Nn:mt(Nn,dn,ke,Lt,Ht),vn=Ke?et||(dt?ke:In||st)?[]:bt:Xn;if(Ke&&Ke(Xn,vn,Lt,Ht),st)for(Bt=mt(vn,Nt),st(Bt,[],Lt,Ht),Vt=Bt.length;Vt--;)(en=Bt[Vt])&&(vn[Nt[Vt]]=!(Xn[Nt[Vt]]=en));if(dt){if(et||ke){if(et){for(Bt=[],Vt=vn.length;Vt--;)(en=vn[Vt])&&Bt.push(Xn[Vt]=en);et(null,vn=[],Bt,Ht)}for(Vt=vn.length;Vt--;)(en=vn[Vt])&&(Bt=et?ii(dt,en):dn[Vt])>-1&&(dt[Bt]=!(bt[Bt]=en))}}else vn=mt(vn===bt?vn.splice(In,vn.length):vn),et?et(null,bt,vn,Ht):Gr.apply(bt,vn)})}function zt(ke){for(var Qe,Ke,st,et=ke.length,pt=Gt.relative[ke[0].type],dt=pt||Gt.relative[" "],bt=pt?1:0,Lt=q(function(Vt){return Vt===Qe},dt,!0),Ht=q(function(Vt){return ii(Qe,Vt)>-1},dt,!0),Bt=[function(Vt,en,dn){var Nt=!pt&&(dn||en!==tr)||((Qe=en).nodeType?Lt(Vt,en,dn):Ht(Vt,en,dn));return Qe=null,Nt}];bt<et;bt++)if(Ke=Gt.relative[ke[bt].type])Bt=[q(Ee(Bt),Ke)];else{if(Ke=Gt.filter[ke[bt].type].apply(null,ke[bt].matches),Ke[gn]){for(st=++bt;st<et&&!Gt.relative[ke[st].type];st++);return Ct(bt>1&&Ee(Bt),bt>1&&lt(ke.slice(0,bt-1).concat({value:ke[bt-2].type===" "?"*":""})).replace(ia,"$1"),Ke,bt<st&&zt(ke.slice(bt,st)),st<et&&zt(ke=ke.slice(st)),st<et&&lt(ke))}Bt.push(Ke)}return Ee(Bt)}function jt(ke,Qe){var Ke=Qe.length>0,st=ke.length>0,et=function(pt,dt,bt,Lt,Ht){var Bt,Vt,en,dn=0,Nt="0",In=pt&&[],Nn=[],Xn=tr,vn=pt||st&&Gt.find.TAG("*",Ht),mo=Mr+=Xn==null?1:Math.random()||.1,yo=vn.length;for(Ht&&(tr=dt===Zt||dt||Ht);Nt!==yo&&(Bt=vn[Nt])!=null;Nt++){if(st&&Bt){for(Vt=0,dt||Bt.ownerDocument===Zt||(Gn(Bt),bt=!dr);en=ke[Vt++];)if(en(Bt,dt||Zt,bt)){Lt.push(Bt);break}Ht&&(Mr=mo)}Ke&&((Bt=!en&&Bt)&&dn--,pt&&In.push(Bt))}if(dn+=Nt,Ke&&Nt!==dn){for(Vt=0;en=Qe[Vt++];)en(In,Nn,dt,bt);if(pt){if(dn>0)for(;Nt--;)In[Nt]||Nn[Nt]||(Nn[Nt]=bu.call(Lt));Nn=mt(Nn)}Gr.apply(Lt,Nn),Ht&&!pt&&Nn.length>0&&dn+Qe.length>1&&R.uniqueSort(Lt)}return Ht&&(Mr=mo,tr=Xn),In};return Ke?ne(et):et}var nn,Ft,Gt,Mt,Ot,Kt,_r,ta,tr,nr,rr,Gn,Zt,An,dr,Rn,ni,na,fo,gn="sizzle"+1*new Date,ur=I.document,Mr=0,yu=0,dl=W(),ul=W(),ra=W(),ls=function(ke,Qe){return ke===Qe&&(rr=!0),0},pl=1<<31,vu={}.hasOwnProperty,ri=[],bu=ri.pop,xu=ri.push,Gr=ri.push,hl=ri.slice,ii=function(ke,Qe){for(var Ke=0,st=ke.length;Ke<st;Ke++)if(ke[Ke]===Qe)return Ke;return-1},ds="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",un="[\\x20\\t\\r\\n\\f]",oi="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",fl="\\["+un+"*("+oi+")(?:"+un+"*([*^$|!~]?=)"+un+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+oi+"))|)"+un+"*\\]",us=":("+oi+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+fl+")*)|.*)\\)|)",wu=new RegExp(un+"+","g"),ia=new RegExp("^"+un+"+|((?:^|[^\\\\])(?:\\\\.)*)"+un+"+$","g"),Au=new RegExp("^"+un+"*,"+un+"*"),Eu=new RegExp("^"+un+"*([>+~]|"+un+")"+un+"*"),_u=new RegExp("="+un+`*([^\\]'"]*?)`+un+"*\\]","g"),Mu=new RegExp(us),gl=new RegExp("^"+oi+"$"),oa={ID:new RegExp("^#("+oi+")"),CLASS:new RegExp("^\\.("+oi+")"),TAG:new RegExp("^("+oi+"|[*])"),ATTR:new RegExp("^"+fl),PSEUDO:new RegExp("^"+us),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+un+"*(even|odd|(([+-]|)(\\d*)n|)"+un+"*(?:([+-]|)"+un+"*(\\d+)|))"+un+"*\\)|)","i"),bool:new RegExp("^(?:"+ds+")$","i"),needsContext:new RegExp("^"+un+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+un+"*((?:-\\d)?\\d*)"+un+"*\\)|)(?=[^-]|$)","i")},Su=/^(?:input|select|textarea|button)$/i,Iu=/^h\d$/i,go=/^[^{]+\{\s*\[native \w/,Cu=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ps=/[+~]/,Tu=/'|\\/g,Sr=new RegExp("\\\\([\\da-f]{1,6}"+un+"?|("+un+")|.)","ig"),Ir=function(ke,Qe,Ke){var st="0x"+Qe-65536;return st!==st||Ke?Qe:st<0?String.fromCharCode(st+65536):String.fromCharCode(st>>10|55296,1023&st|56320)},ml=function(){Gn()};try{Gr.apply(ri=hl.call(ur.childNodes),ur.childNodes),ri[ur.childNodes.length].nodeType}catch{Gr={apply:ri.length?function(Qe,Ke){xu.apply(Qe,hl.call(Ke))}:function(Qe,Ke){for(var st=Qe.length,et=0;Qe[st++]=Ke[et++];);Qe.length=st-1}}}Ft=R.support={},Ot=R.isXML=function(ke){var Qe=ke&&(ke.ownerDocument||ke).documentElement;return!!Qe&&Qe.nodeName!=="HTML"},Gn=R.setDocument=function(ke){var Qe,Ke,st=ke?ke.ownerDocument||ke:ur;return st!==Zt&&st.nodeType===9&&st.documentElement&&(Zt=st,An=Zt.documentElement,dr=!Ot(Zt),(Ke=Zt.defaultView)&&Ke.top!==Ke&&(Ke.addEventListener?Ke.addEventListener("unload",ml,!1):Ke.attachEvent&&Ke.attachEvent("onunload",ml)),Ft.attributes=fe(function(et){return et.className="i",!et.getAttribute("className")}),Ft.getElementsByTagName=fe(function(et){return et.appendChild(Zt.createComment("")),!et.getElementsByTagName("*").length}),Ft.getElementsByClassName=go.test(Zt.getElementsByClassName),Ft.getById=fe(function(et){return An.appendChild(et).id=gn,!Zt.getElementsByName||!Zt.getElementsByName(gn).length}),Ft.getById?(Gt.find.ID=function(et,pt){if(pt.getElementById!==void 0&&dr){var dt=pt.getElementById(et);return dt?[dt]:[]}},Gt.filter.ID=function(et){var pt=et.replace(Sr,Ir);return function(dt){return dt.getAttribute("id")===pt}}):(delete Gt.find.ID,Gt.filter.ID=function(et){var pt=et.replace(Sr,Ir);return function(dt){var bt=dt.getAttributeNode!==void 0&&dt.getAttributeNode("id");return bt&&bt.value===pt}}),Gt.find.TAG=Ft.getElementsByTagName?function(et,pt){return pt.getElementsByTagName!==void 0?pt.getElementsByTagName(et):Ft.qsa?pt.querySelectorAll(et):void 0}:function(et,pt){var dt,bt=[],Lt=0,Ht=pt.getElementsByTagName(et);if(et==="*"){for(;dt=Ht[Lt++];)dt.nodeType===1&&bt.push(dt);return bt}return Ht},Gt.find.CLASS=Ft.getElementsByClassName&&function(et,pt){if(pt.getElementsByClassName!==void 0&&dr)return pt.getElementsByClassName(et)},ni=[],Rn=[],(Ft.qsa=go.test(Zt.querySelectorAll))&&(fe(function(et){An.appendChild(et).innerHTML="<a id='"+gn+"'></a><select id='"+gn+"-\r\\' msallowcapture=''><option selected=''></option></select>",et.querySelectorAll("[msallowcapture^='']").length&&Rn.push("[*^$]="+un+`*(?:''|"")`),et.querySelectorAll("[selected]").length||Rn.push("\\["+un+"*(?:value|"+ds+")"),et.querySelectorAll("[id~="+gn+"-]").length||Rn.push("~="),et.querySelectorAll(":checked").length||Rn.push(":checked"),et.querySelectorAll("a#"+gn+"+*").length||Rn.push(".#.+[+~]")}),fe(function(et){var pt=Zt.createElement("input");pt.setAttribute("type","hidden"),et.appendChild(pt).setAttribute("name","D"),et.querySelectorAll("[name=d]").length&&Rn.push("name"+un+"*[*^$|!~]?="),et.querySelectorAll(":enabled").length||Rn.push(":enabled",":disabled"),et.querySelectorAll("*,:x"),Rn.push(",.*:")})),(Ft.matchesSelector=go.test(na=An.matches||An.webkitMatchesSelector||An.mozMatchesSelector||An.oMatchesSelector||An.msMatchesSelector))&&fe(function(et){Ft.disconnectedMatch=na.call(et,"div"),na.call(et,"[s!='']:x"),ni.push("!=",us)}),Rn=Rn.length&&new RegExp(Rn.join("|")),ni=ni.length&&new RegExp(ni.join("|")),Qe=go.test(An.compareDocumentPosition),fo=Qe||go.test(An.contains)?function(et,pt){var dt=et.nodeType===9?et.documentElement:et,bt=pt&&pt.parentNode;return et===bt||!(!bt||bt.nodeType!==1||!(dt.contains?dt.contains(bt):et.compareDocumentPosition&&16&et.compareDocumentPosition(bt)))}:function(et,pt){if(pt){for(;pt=pt.parentNode;)if(pt===et)return!0}return!1},ls=Qe?function(et,pt){if(et===pt)return rr=!0,0;var dt=!et.compareDocumentPosition-!pt.compareDocumentPosition;return dt||(dt=(et.ownerDocument||et)===(pt.ownerDocument||pt)?et.compareDocumentPosition(pt):1,1&dt||!Ft.sortDetached&&pt.compareDocumentPosition(et)===dt?et===Zt||et.ownerDocument===ur&&fo(ur,et)?-1:pt===Zt||pt.ownerDocument===ur&&fo(ur,pt)?1:nr?ii(nr,et)-ii(nr,pt):0:4&dt?-1:1)}:function(et,pt){if(et===pt)return rr=!0,0;var dt,bt=0,Lt=et.parentNode,Ht=pt.parentNode,Bt=[et],Vt=[pt];if(!Lt||!Ht)return et===Zt?-1:pt===Zt?1:Lt?-1:Ht?1:nr?ii(nr,et)-ii(nr,pt):0;if(Lt===Ht)return Me(et,pt);for(dt=et;dt=dt.parentNode;)Bt.unshift(dt);for(dt=pt;dt=dt.parentNode;)Vt.unshift(dt);for(;Bt[bt]===Vt[bt];)bt++;return bt?Me(Bt[bt],Vt[bt]):Bt[bt]===ur?-1:Vt[bt]===ur?1:0}),Zt},R.matches=function(ke,Qe){return R(ke,null,null,Qe)},R.matchesSelector=function(ke,Qe){if((ke.ownerDocument||ke)!==Zt&&Gn(ke),Qe=Qe.replace(_u,"='$1']"),Ft.matchesSelector&&dr&&!ra[Qe+" "]&&(!ni||!ni.test(Qe))&&(!Rn||!Rn.test(Qe)))try{var Ke=na.call(ke,Qe);if(Ke||Ft.disconnectedMatch||ke.document&&ke.document.nodeType!==11)return Ke}catch{}return R(Qe,Zt,null,[ke]).length>0},R.contains=function(ke,Qe){return(ke.ownerDocument||ke)!==Zt&&Gn(ke),fo(ke,Qe)},R.attr=function(ke,Qe){(ke.ownerDocument||ke)!==Zt&&Gn(ke);var Ke=Gt.attrHandle[Qe.toLowerCase()],st=Ke&&vu.call(Gt.attrHandle,Qe.toLowerCase())?Ke(ke,Qe,!dr):void 0;return st!==void 0?st:Ft.attributes||!dr?ke.getAttribute(Qe):(st=ke.getAttributeNode(Qe))&&st.specified?st.value:null},R.error=function(ke){throw new Error("Syntax error, unrecognized expression: "+ke)},R.uniqueSort=function(ke){var Qe,Ke=[],st=0,et=0;if(rr=!Ft.detectDuplicates,nr=!Ft.sortStable&&ke.slice(0),ke.sort(ls),rr){for(;Qe=ke[et++];)Qe===ke[et]&&(st=Ke.push(et));for(;st--;)ke.splice(Ke[st],1)}return nr=null,ke},Mt=R.getText=function(ke){var Qe,Ke="",st=0,et=ke.nodeType;if(et){if(et===1||et===9||et===11){if(typeof ke.textContent=="string")return ke.textContent;for(ke=ke.firstChild;ke;ke=ke.nextSibling)Ke+=Mt(ke)}else if(et===3||et===4)return ke.nodeValue}else for(;Qe=ke[st++];)Ke+=Mt(Qe);return Ke},Gt=R.selectors={cacheLength:50,createPseudo:ne,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ke){return ke[1]=ke[1].replace(Sr,Ir),ke[3]=(ke[3]||ke[4]||ke[5]||"").replace(Sr,Ir),ke[2]==="~="&&(ke[3]=" "+ke[3]+" "),ke.slice(0,4)},CHILD:function(ke){return ke[1]=ke[1].toLowerCase(),ke[1].slice(0,3)==="nth"?(ke[3]||R.error(ke[0]),ke[4]=+(ke[4]?ke[5]+(ke[6]||1):2*(ke[3]==="even"||ke[3]==="odd")),ke[5]=+(ke[7]+ke[8]||ke[3]==="odd")):ke[3]&&R.error(ke[0]),ke},PSEUDO:function(ke){var Qe,Ke=!ke[6]&&ke[2];return oa.CHILD.test(ke[0])?null:(ke[3]?ke[2]=ke[4]||ke[5]||"":Ke&&Mu.test(Ke)&&(Qe=Kt(Ke,!0))&&(Qe=Ke.indexOf(")",Ke.length-Qe)-Ke.length)&&(ke[0]=ke[0].slice(0,Qe),ke[2]=Ke.slice(0,Qe)),ke.slice(0,3))}},filter:{TAG:function(ke){var Qe=ke.replace(Sr,Ir).toLowerCase();return ke==="*"?function(){return!0}:function(Ke){return Ke.nodeName&&Ke.nodeName.toLowerCase()===Qe}},CLASS:function(ke){var Qe=dl[ke+" "];return Qe||(Qe=new RegExp("(^|"+un+")"+ke+"("+un+"|$)"))&&dl(ke,function(Ke){return Qe.test(typeof Ke.className=="string"&&Ke.className||Ke.getAttribute!==void 0&&Ke.getAttribute("class")||"")})},ATTR:function(ke,Qe,Ke){return function(st){var et=R.attr(st,ke);return et==null?Qe==="!=":!Qe||(et+="",Qe==="="?et===Ke:Qe==="!="?et!==Ke:Qe==="^="?Ke&&et.indexOf(Ke)===0:Qe==="*="?Ke&&et.indexOf(Ke)>-1:Qe==="$="?Ke&&et.slice(-Ke.length)===Ke:Qe==="~="?(" "+et.replace(wu," ")+" ").indexOf(Ke)>-1:Qe==="|="&&(et===Ke||et.slice(0,Ke.length+1)===Ke+"-"))}},CHILD:function(ke,Qe,Ke,st,et){var pt=ke.slice(0,3)!=="nth",dt=ke.slice(-4)!=="last",bt=Qe==="of-type";return st===1&&et===0?function(Lt){return!!Lt.parentNode}:function(Lt,Ht,Bt){var Vt,en,dn,Nt,In,Nn,Xn=pt!==dt?"nextSibling":"previousSibling",vn=Lt.parentNode,mo=bt&&Lt.nodeName.toLowerCase(),yo=!Bt&&!bt,ir=!1;if(vn){if(pt){for(;Xn;){for(Nt=Lt;Nt=Nt[Xn];)if(bt?Nt.nodeName.toLowerCase()===mo:Nt.nodeType===1)return!1;Nn=Xn=ke==="only"&&!Nn&&"nextSibling"}return!0}if(Nn=[dt?vn.firstChild:vn.lastChild],dt&&yo){for(Nt=vn,dn=Nt[gn]||(Nt[gn]={}),en=dn[Nt.uniqueID]||(dn[Nt.uniqueID]={}),Vt=en[ke]||[],In=Vt[0]===Mr&&Vt[1],ir=In&&Vt[2],Nt=In&&vn.childNodes[In];Nt=++In&&Nt&&Nt[Xn]||(ir=In=0)||Nn.pop();)if(Nt.nodeType===1&&++ir&&Nt===Lt){en[ke]=[Mr,In,ir];break}}else if(yo&&(Nt=Lt,dn=Nt[gn]||(Nt[gn]={}),en=dn[Nt.uniqueID]||(dn[Nt.uniqueID]={}),Vt=en[ke]||[],In=Vt[0]===Mr&&Vt[1],ir=In),ir===!1)for(;(Nt=++In&&Nt&&Nt[Xn]||(ir=In=0)||Nn.pop())&&((bt?Nt.nodeName.toLowerCase()!==mo:Nt.nodeType!==1)||!++ir||(yo&&(dn=Nt[gn]||(Nt[gn]={}),en=dn[Nt.uniqueID]||(dn[Nt.uniqueID]={}),en[ke]=[Mr,ir]),Nt!==Lt)););return(ir-=et)===st||ir%st==0&&ir/st>=0}}},PSEUDO:function(ke,Qe){var Ke,st=Gt.pseudos[ke]||Gt.setFilters[ke.toLowerCase()]||R.error("unsupported pseudo: "+ke);return st[gn]?st(Qe):st.length>1?(Ke=[ke,ke,"",Qe],Gt.setFilters.hasOwnProperty(ke.toLowerCase())?ne(function(et,pt){for(var dt,bt=st(et,Qe),Lt=bt.length;Lt--;)dt=ii(et,bt[Lt]),et[dt]=!(pt[dt]=bt[Lt])}):function(et){return st(et,0,Ke)}):st}},pseudos:{not:ne(function(ke){var Qe=[],Ke=[],st=_r(ke.replace(ia,"$1"));return st[gn]?ne(function(et,pt,dt,bt){for(var Lt,Ht=st(et,null,bt,[]),Bt=et.length;Bt--;)(Lt=Ht[Bt])&&(et[Bt]=!(pt[Bt]=Lt))}):function(et,pt,dt){return Qe[0]=et,st(Qe,null,dt,Ke),Qe[0]=null,!Ke.pop()}}),has:ne(function(ke){return function(Qe){return R(ke,Qe).length>0}}),contains:ne(function(ke){return ke=ke.replace(Sr,Ir),function(Qe){return(Qe.textContent||Qe.innerText||Mt(Qe)).indexOf(ke)>-1}}),lang:ne(function(ke){return gl.test(ke||"")||R.error("unsupported lang: "+ke),ke=ke.replace(Sr,Ir).toLowerCase(),function(Qe){var Ke;do if(Ke=dr?Qe.lang:Qe.getAttribute("xml:lang")||Qe.getAttribute("lang"))return(Ke=Ke.toLowerCase())===ke||Ke.indexOf(ke+"-")===0;while((Qe=Qe.parentNode)&&Qe.nodeType===1);return!1}}),target:function(ke){var Qe=I.location&&I.location.hash;return Qe&&Qe.slice(1)===ke.id},root:function(ke){return ke===An},focus:function(ke){return ke===Zt.activeElement&&(!Zt.hasFocus||Zt.hasFocus())&&!!(ke.type||ke.href||~ke.tabIndex)},enabled:function(ke){return ke.disabled===!1},disabled:function(ke){return ke.disabled===!0},checked:function(ke){var Qe=ke.nodeName.toLowerCase();return Qe==="input"&&!!ke.checked||Qe==="option"&&!!ke.selected},selected:function(ke){return ke.parentNode&&ke.parentNode.selectedIndex,ke.selected===!0},empty:function(ke){for(ke=ke.firstChild;ke;ke=ke.nextSibling)if(ke.nodeType<6)return!1;return!0},parent:function(ke){return!Gt.pseudos.empty(ke)},header:function(ke){return Iu.test(ke.nodeName)},input:function(ke){return Su.test(ke.nodeName)},button:function(ke){var Qe=ke.nodeName.toLowerCase();return Qe==="input"&&ke.type==="button"||Qe==="button"},text:function(ke){var Qe;return ke.nodeName.toLowerCase()==="input"&&ke.type==="text"&&((Qe=ke.getAttribute("type"))==null||Qe.toLowerCase()==="text")},first:Ge(function(){return[0]}),last:Ge(function(ke,Qe){return[Qe-1]}),eq:Ge(function(ke,Qe,Ke){return[Ke<0?Ke+Qe:Ke]}),even:Ge(function(ke,Qe){for(var Ke=0;Ke<Qe;Ke+=2)ke.push(Ke);return ke}),odd:Ge(function(ke,Qe){for(var Ke=1;Ke<Qe;Ke+=2)ke.push(Ke);return ke}),lt:Ge(function(ke,Qe,Ke){for(var st=Ke<0?Ke+Qe:Ke;--st>=0;)ke.push(st);return ke}),gt:Ge(function(ke,Qe,Ke){for(var st=Ke<0?Ke+Qe:Ke;++st<Qe;)ke.push(st);return ke})}},Gt.pseudos.nth=Gt.pseudos.eq;for(nn in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Gt.pseudos[nn]=(function(ke){return function(Qe){return Qe.nodeName.toLowerCase()==="input"&&Qe.type===ke}})(nn);for(nn in{submit:!0,reset:!0})Gt.pseudos[nn]=(function(ke){return function(Qe){var Ke=Qe.nodeName.toLowerCase();return(Ke==="input"||Ke==="button")&&Qe.type===ke}})(nn);return it.prototype=Gt.filters=Gt.pseudos,Gt.setFilters=new it,Kt=R.tokenize=function(ke,Qe){var Ke,st,et,pt,dt,bt,Lt,Ht=ul[ke+" "];if(Ht)return Qe?0:Ht.slice(0);for(dt=ke,bt=[],Lt=Gt.preFilter;dt;){Ke&&!(st=Au.exec(dt))||(st&&(dt=dt.slice(st[0].length)||dt),bt.push(et=[])),Ke=!1,(st=Eu.exec(dt))&&(Ke=st.shift(),et.push({value:Ke,type:st[0].replace(ia," ")}),dt=dt.slice(Ke.length));for(pt in Gt.filter)!(st=oa[pt].exec(dt))||Lt[pt]&&!(st=Lt[pt](st))||(Ke=st.shift(),et.push({value:Ke,type:pt,matches:st}),dt=dt.slice(Ke.length));if(!Ke)break}return Qe?dt.length:dt?R.error(ke):ul(ke,bt).slice(0)},_r=R.compile=function(ke,Qe){var Ke,st=[],et=[],pt=ra[ke+" "];if(!pt){for(Qe||(Qe=Kt(ke)),Ke=Qe.length;Ke--;)pt=zt(Qe[Ke]),pt[gn]?st.push(pt):et.push(pt);pt=ra(ke,jt(et,st)),pt.selector=ke}return pt},ta=R.select=function(ke,Qe,Ke,st){var et,pt,dt,bt,Lt,Ht=typeof ke=="function"&&ke,Bt=!st&&Kt(ke=Ht.selector||ke);if(Ke=Ke||[],Bt.length===1){if(pt=Bt[0]=Bt[0].slice(0),pt.length>2&&(dt=pt[0]).type==="ID"&&Ft.getById&&Qe.nodeType===9&&dr&&Gt.relative[pt[1].type]){if(!(Qe=(Gt.find.ID(dt.matches[0].replace(Sr,Ir),Qe)||[])[0]))return Ke;Ht&&(Qe=Qe.parentNode),ke=ke.slice(pt.shift().value.length)}for(et=oa.needsContext.test(ke)?0:pt.length;et--&&(dt=pt[et],!Gt.relative[bt=dt.type]);)if((Lt=Gt.find[bt])&&(st=Lt(dt.matches[0].replace(Sr,Ir),ps.test(pt[0].type)&&Ze(Qe.parentNode)||Qe))){if(pt.splice(et,1),!(ke=st.length&&lt(pt)))return Gr.apply(Ke,st),Ke;break}}return(Ht||_r(ke,Bt))(st,Qe,!dr,Ke,!Qe||ps.test(ke)&&Ze(Qe.parentNode)||Qe),Ke},Ft.sortStable=gn.split("").sort(ls).join("")===gn,Ft.detectDuplicates=!!rr,Gn(),Ft.sortDetached=fe(function(ke){return 1&ke.compareDocumentPosition(Zt.createElement("div"))}),fe(function(ke){return ke.innerHTML="<a href='#'></a>",ke.firstChild.getAttribute("href")==="#"})||ve("type|href|height|width",function(ke,Qe,Ke){if(!Ke)return ke.getAttribute(Qe,Qe.toLowerCase()==="type"?1:2)}),Ft.attributes&&fe(function(ke){return ke.innerHTML="<input/>",ke.firstChild.setAttribute("value",""),ke.firstChild.getAttribute("value")===""})||ve("value",function(ke,Qe,Ke){if(!Ke&&ke.nodeName.toLowerCase()==="input")return ke.defaultValue}),fe(function(ke){return ke.getAttribute("disabled")==null})||ve(ds,function(ke,Qe,Ke){var st;if(!Ke)return ke[Qe]===!0?Qe.toLowerCase():(st=ke.getAttributeNode(Qe))&&st.specified?st.value:null}),R})(S);N.find=ye,N.expr=ye.selectors,N.expr[":"]=N.expr.pseudos,N.uniqueSort=N.unique=ye.uniqueSort,N.text=ye.getText,N.isXMLDoc=ye.isXML,N.contains=ye.contains;var Ue=function(I,R,W){for(var ne=[],fe=W!==void 0;(I=I[R])&&I.nodeType!==9;)if(I.nodeType===1){if(fe&&N(I).is(W))break;ne.push(I)}return ne},we=function(I,R){for(var W=[];I;I=I.nextSibling)I.nodeType===1&&I!==R&&W.push(I);return W},Te=N.expr.match.needsContext,qe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,He=/^.[^:#\[\.,]*$/;N.filter=function(I,R,W){var ne=R[0];return W&&(I=":not("+I+")"),R.length===1&&ne.nodeType===1?N.find.matchesSelector(ne,I)?[ne]:[]:N.find.matches(I,N.grep(R,function(fe){return fe.nodeType===1}))},N.fn.extend({find:function(I){var R,W=this.length,ne=[],fe=this;if(typeof I!="string")return this.pushStack(N(I).filter(function(){for(R=0;R<W;R++)if(N.contains(fe[R],this))return!0}));for(R=0;R<W;R++)N.find(I,fe[R],ne);return ne=this.pushStack(W>1?N.unique(ne):ne),ne.selector=this.selector?this.selector+" "+I:I,ne},filter:function(I){return this.pushStack(t(this,I||[],!1))},not:function(I){return this.pushStack(t(this,I||[],!0))},is:function(I){return!!t(this,typeof I=="string"&&Te.test(I)?N(I):I||[],!1).length}});var Se,Ce=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(N.fn.init=function(I,R,W){var ne,fe;if(!I)return this;if(W=W||Se,typeof I=="string"){if(!(ne=I[0]==="<"&&I[I.length-1]===">"&&I.length>=3?[null,I,null]:Ce.exec(I))||!ne[1]&&R)return!R||R.jquery?(R||W).find(I):this.constructor(R).find(I);if(ne[1]){if(R=R instanceof N?R[0]:R,N.merge(this,N.parseHTML(ne[1],R&&R.nodeType?R.ownerDocument||R:Z,!0)),qe.test(ne[1])&&N.isPlainObject(R))for(ne in R)N.isFunction(this[ne])?this[ne](R[ne]):this.attr(ne,R[ne]);return this}return fe=Z.getElementById(ne[2]),fe&&fe.parentNode&&(this.length=1,this[0]=fe),this.context=Z,this.selector=I,this}return I.nodeType?(this.context=this[0]=I,this.length=1,this):N.isFunction(I)?W.ready!==void 0?W.ready(I):I(N):(I.selector!==void 0&&(this.selector=I.selector,this.context=I.context),N.makeArray(I,this))}).prototype=N.fn,Se=N(Z);var Re=/^(?:parents|prev(?:Until|All))/,Ve={children:!0,contents:!0,next:!0,prev:!0};N.fn.extend({has:function(I){var R=N(I,this),W=R.length;return this.filter(function(){for(var ne=0;ne<W;ne++)if(N.contains(this,R[ne]))return!0})},closest:function(I,R){for(var W,ne=0,fe=this.length,ve=[],Me=Te.test(I)||typeof I!="string"?N(I,R||this.context):0;ne<fe;ne++)for(W=this[ne];W&&W!==R;W=W.parentNode)if(W.nodeType<11&&(Me?Me.index(W)>-1:W.nodeType===1&&N.find.matchesSelector(W,I))){ve.push(W);break}return this.pushStack(ve.length>1?N.uniqueSort(ve):ve)},index:function(I){return I?typeof I=="string"?_e.call(N(I),this[0]):_e.call(this,I.jquery?I[0]:I):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(I,R){return this.pushStack(N.uniqueSort(N.merge(this.get(),N(I,R))))},addBack:function(I){return this.add(I==null?this.prevObject:this.prevObject.filter(I))}}),N.each({parent:function(I){var R=I.parentNode;return R&&R.nodeType!==11?R:null},parents:function(I){return Ue(I,"parentNode")},parentsUntil:function(I,R,W){return Ue(I,"parentNode",W)},next:function(I){return l(I,"nextSibling")},prev:function(I){return l(I,"previousSibling")},nextAll:function(I){return Ue(I,"nextSibling")},prevAll:function(I){return Ue(I,"previousSibling")},nextUntil:function(I,R,W){return Ue(I,"nextSibling",W)},prevUntil:function(I,R,W){return Ue(I,"previousSibling",W)},siblings:function(I){return we((I.parentNode||{}).firstChild,I)},children:function(I){return we(I.firstChild)},contents:function(I){return I.contentDocument||N.merge([],I.childNodes)}},function(I,R){N.fn[I]=function(W,ne){var fe=N.map(this,R,W);return I.slice(-5)!=="Until"&&(ne=W),ne&&typeof ne=="string"&&(fe=N.filter(ne,fe)),this.length>1&&(Ve[I]||N.uniqueSort(fe),Re.test(I)&&fe.reverse()),this.pushStack(fe)}});var rt=/\S+/g;N.Callbacks=function(I){I=typeof I=="string"?n(I):N.extend({},I);var R,W,ne,fe,ve=[],Me=[],Ge=-1,Ze=function(){for(fe=I.once,ne=R=!0;Me.length;Ge=-1)for(W=Me.shift();++Ge<ve.length;)ve[Ge].apply(W[0],W[1])===!1&&I.stopOnFalse&&(Ge=ve.length,W=!1);I.memory||(W=!1),R=!1,fe&&(ve=W?[]:"")},it={add:function(){return ve&&(W&&!R&&(Ge=ve.length-1,Me.push(W)),(function lt(q){N.each(q,function(Ee,nt){N.isFunction(nt)?I.unique&&it.has(nt)||ve.push(nt):nt&&nt.length&&N.type(nt)!=="string"&&lt(nt)})})(arguments),W&&!R&&Ze()),this},remove:function(){return N.each(arguments,function(lt,q){for(var Ee;(Ee=N.inArray(q,ve,Ee))>-1;)ve.splice(Ee,1),Ee<=Ge&&Ge--}),this},has:function(lt){return lt?N.inArray(lt,ve)>-1:ve.length>0},empty:function(){return ve&&(ve=[]),this},disable:function(){return fe=Me=[],ve=W="",this},disabled:function(){return!ve},lock:function(){return fe=Me=[],W||(ve=W=""),this},locked:function(){return!!fe},fireWith:function(lt,q){return fe||(q=q||[],q=[lt,q.slice?q.slice():q],Me.push(q),R||Ze()),this},fire:function(){return it.fireWith(this,arguments),this},fired:function(){return!!ne}};return it},N.extend({Deferred:function(I){var R=[["resolve","done",N.Callbacks("once memory"),"resolved"],["reject","fail",N.Callbacks("once memory"),"rejected"],["notify","progress",N.Callbacks("memory")]],W="pending",ne={state:function(){return W},always:function(){return fe.done(arguments).fail(arguments),this},then:function(){var ve=arguments;return N.Deferred(function(Me){N.each(R,function(Ge,Ze){var it=N.isFunction(ve[Ge])&&ve[Ge];fe[Ze[1]](function(){var lt=it&&it.apply(this,arguments);lt&&N.isFunction(lt.promise)?lt.promise().progress(Me.notify).done(Me.resolve).fail(Me.reject):Me[Ze[0]+"With"](this===ne?Me.promise():this,it?[lt]:arguments)})}),ve=null}).promise()},promise:function(ve){return ve!=null?N.extend(ve,ne):ne}},fe={};return ne.pipe=ne.then,N.each(R,function(ve,Me){var Ge=Me[2],Ze=Me[3];ne[Me[1]]=Ge.add,Ze&&Ge.add(function(){W=Ze},R[1^ve][2].disable,R[2][2].lock),fe[Me[0]]=function(){return fe[Me[0]+"With"](this===fe?ne:this,arguments),this},fe[Me[0]+"With"]=Ge.fireWith}),ne.promise(fe),I&&I.call(fe,fe),fe},when:function(I){var R,W,ne,fe=0,ve=C.call(arguments),Me=ve.length,Ge=Me!==1||I&&N.isFunction(I.promise)?Me:0,Ze=Ge===1?I:N.Deferred(),it=function(lt,q,Ee){return function(nt){q[lt]=this,Ee[lt]=arguments.length>1?C.call(arguments):nt,Ee===R?Ze.notifyWith(q,Ee):--Ge||Ze.resolveWith(q,Ee)}};if(Me>1)for(R=new Array(Me),W=new Array(Me),ne=new Array(Me);fe<Me;fe++)ve[fe]&&N.isFunction(ve[fe].promise)?ve[fe].promise().progress(it(fe,W,R)).done(it(fe,ne,ve)).fail(Ze.reject):--Ge;return Ge||Ze.resolveWith(ne,ve),Ze.promise()}});var at;N.fn.ready=function(I){return N.ready.promise().done(I),this},N.extend({isReady:!1,readyWait:1,holdReady:function(I){I?N.readyWait++:N.ready(!0)},ready:function(I){(I===!0?--N.readyWait:N.isReady)||(N.isReady=!0,I!==!0&&--N.readyWait>0||(at.resolveWith(Z,[N]),N.fn.triggerHandler&&(N(Z).triggerHandler("ready"),N(Z).off("ready"))))}}),N.ready.promise=function(I){return at||(at=N.Deferred(),Z.readyState==="complete"||Z.readyState!=="loading"&&!Z.documentElement.doScroll?S.setTimeout(N.ready):(Z.addEventListener("DOMContentLoaded",i),S.addEventListener("load",i))),at.promise(I)},N.ready.promise();var yt=function(I,R,W,ne,fe,ve,Me){var Ge=0,Ze=I.length,it=W==null;if(N.type(W)==="object"){fe=!0;for(Ge in W)yt(I,R,Ge,W[Ge],!0,ve,Me)}else if(ne!==void 0&&(fe=!0,N.isFunction(ne)||(Me=!0),it&&(Me?(R.call(I,ne),R=null):(it=R,R=function(lt,q,Ee){return it.call(N(lt),Ee)})),R))for(;Ge<Ze;Ge++)R(I[Ge],W,Me?ne:ne.call(I[Ge],Ge,R(I[Ge],W)));return fe?I:it?R.call(I):Ze?R(I[0],W):ve},Pt=function(I){return I.nodeType===1||I.nodeType===9||!+I.nodeType};s.uid=1,s.prototype={register:function(I,R){var W=R||{};return I.nodeType?I[this.expando]=W:Object.defineProperty(I,this.expando,{value:W,writable:!0,configurable:!0}),I[this.expando]},cache:function(I){if(!Pt(I))return{};var R=I[this.expando];return R||(R={},Pt(I)&&(I.nodeType?I[this.expando]=R:Object.defineProperty(I,this.expando,{value:R,configurable:!0}))),R},set:function(I,R,W){var ne,fe=this.cache(I);if(typeof R=="string")fe[R]=W;else for(ne in R)fe[ne]=R[ne];return fe},get:function(I,R){return R===void 0?this.cache(I):I[this.expando]&&I[this.expando][R]},access:function(I,R,W){var ne;return R===void 0||R&&typeof R=="string"&&W===void 0?(ne=this.get(I,R),ne!==void 0?ne:this.get(I,N.camelCase(R))):(this.set(I,R,W),W!==void 0?W:R)},remove:function(I,R){var W,ne,fe,ve=I[this.expando];if(ve!==void 0){if(R===void 0)this.register(I);else for(N.isArray(R)?ne=R.concat(R.map(N.camelCase)):(fe=N.camelCase(R),R in ve?ne=[R,fe]:(ne=fe,ne=ne in ve?[ne]:ne.match(rt)||[])),W=ne.length;W--;)delete ve[ne[W]];(R===void 0||N.isEmptyObject(ve))&&(I.nodeType?I[this.expando]=void 0:delete I[this.expando])}},hasData:function(I){var R=I[this.expando];return R!==void 0&&!N.isEmptyObject(R)}};var vt=new s,At=new s,Ut=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Dt=/[A-Z]/g;N.extend({hasData:function(I){return At.hasData(I)||vt.hasData(I)},data:function(I,R,W){return At.access(I,R,W)},removeData:function(I,R){At.remove(I,R)},_data:function(I,R,W){return vt.access(I,R,W)},_removeData:function(I,R){vt.remove(I,R)}}),N.fn.extend({data:function(I,R){var W,ne,fe,ve=this[0],Me=ve&&ve.attributes;if(I===void 0){if(this.length&&(fe=At.get(ve),ve.nodeType===1&&!vt.get(ve,"hasDataAttrs"))){for(W=Me.length;W--;)Me[W]&&(ne=Me[W].name,ne.indexOf("data-")===0&&(ne=N.camelCase(ne.slice(5)),g(ve,ne,fe[ne])));vt.set(ve,"hasDataAttrs",!0)}return fe}return typeof I=="object"?this.each(function(){At.set(this,I)}):yt(this,function(Ge){var Ze,it;if(ve&&Ge===void 0){if((Ze=At.get(ve,I)||At.get(ve,I.replace(Dt,"-$&").toLowerCase()))!==void 0||(it=N.camelCase(I),(Ze=At.get(ve,it))!==void 0)||(Ze=g(ve,it,void 0))!==void 0)return Ze}else it=N.camelCase(I),this.each(function(){var lt=At.get(this,it);At.set(this,it,Ge),I.indexOf("-")>-1&&lt!==void 0&&At.set(this,I,Ge)})},null,R,arguments.length>1,null,!0)},removeData:function(I){return this.each(function(){At.remove(this,I)})}}),N.extend({queue:function(I,R,W){var ne;if(I)return R=(R||"fx")+"queue",ne=vt.get(I,R),W&&(!ne||N.isArray(W)?ne=vt.access(I,R,N.makeArray(W)):ne.push(W)),ne||[]},dequeue:function(I,R){R=R||"fx";var W=N.queue(I,R),ne=W.length,fe=W.shift(),ve=N._queueHooks(I,R),Me=function(){N.dequeue(I,R)};fe==="inprogress"&&(fe=W.shift(),ne--),fe&&(R==="fx"&&W.unshift("inprogress"),delete ve.stop,fe.call(I,Me,ve)),!ne&&ve&&ve.empty.fire()},_queueHooks:function(I,R){var W=R+"queueHooks";return vt.get(I,W)||vt.access(I,W,{empty:N.Callbacks("once memory").add(function(){vt.remove(I,[R+"queue",W])})})}}),N.fn.extend({queue:function(I,R){var W=2;return typeof I!="string"&&(R=I,I="fx",W--),arguments.length<W?N.queue(this[0],I):R===void 0?this:this.each(function(){var ne=N.queue(this,I,R);N._queueHooks(this,I),I==="fx"&&ne[0]!=="inprogress"&&N.dequeue(this,I)})},dequeue:function(I){return this.each(function(){N.dequeue(this,I)})},clearQueue:function(I){return this.queue(I||"fx",[])},promise:function(I,R){var W,ne=1,fe=N.Deferred(),ve=this,Me=this.length,Ge=function(){--ne||fe.resolveWith(ve,[ve])};for(typeof I!="string"&&(R=I,I=void 0),I=I||"fx";Me--;)(W=vt.get(ve[Me],I+"queueHooks"))&&W.empty&&(ne++,W.empty.add(Ge));return Ge(),fe.promise(R)}});var on=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,St=new RegExp("^(?:([+-])=|)("+on+")([a-z%]*)$","i"),Xt=["Top","Right","Bottom","Left"],qt=function(I,R){return I=R||I,N.css(I,"display")==="none"||!N.contains(I.ownerDocument,I)},bn=/^(?:checkbox|radio)$/i,Fn=/<([\w:-]+)/,sn=/^$|\/(?:java|ecma)script/i,tn={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};tn.optgroup=tn.option,tn.tbody=tn.tfoot=tn.colgroup=tn.caption=tn.thead,tn.th=tn.td;var se=/<|&#?\w+;/;(function(){var I=Z.createDocumentFragment(),R=I.appendChild(Z.createElement("div")),W=Z.createElement("input");W.setAttribute("type","radio"),W.setAttribute("checked","checked"),W.setAttribute("name","t"),R.appendChild(W),Oe.checkClone=R.cloneNode(!0).cloneNode(!0).lastChild.checked,R.innerHTML="<textarea>x</textarea>",Oe.noCloneChecked=!!R.cloneNode(!0).lastChild.defaultValue})();var he=/^key/,U=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,V=/^([^.]*)(?:\.(.+)|)/;N.event={global:{},add:function(I,R,W,ne,fe){var ve,Me,Ge,Ze,it,lt,q,Ee,nt,mt,Ct,zt=vt.get(I);if(zt)for(W.handler&&(ve=W,W=ve.handler,fe=ve.selector),W.guid||(W.guid=N.guid++),(Ze=zt.events)||(Ze=zt.events={}),(Me=zt.handle)||(Me=zt.handle=function(jt){return N!==void 0&&N.event.triggered!==jt.type?N.event.dispatch.apply(I,arguments):void 0}),R=(R||"").match(rt)||[""],it=R.length;it--;)Ge=V.exec(R[it])||[],nt=Ct=Ge[1],mt=(Ge[2]||"").split(".").sort(),nt&&(q=N.event.special[nt]||{},nt=(fe?q.delegateType:q.bindType)||nt,q=N.event.special[nt]||{},lt=N.extend({type:nt,origType:Ct,data:ne,handler:W,guid:W.guid,selector:fe,needsContext:fe&&N.expr.match.needsContext.test(fe),namespace:mt.join(".")},ve),(Ee=Ze[nt])||(Ee=Ze[nt]=[],Ee.delegateCount=0,q.setup&&q.setup.call(I,ne,mt,Me)!==!1||I.addEventListener&&I.addEventListener(nt,Me)),q.add&&(q.add.call(I,lt),lt.handler.guid||(lt.handler.guid=W.guid)),fe?Ee.splice(Ee.delegateCount++,0,lt):Ee.push(lt),N.event.global[nt]=!0)},remove:function(I,R,W,ne,fe){var ve,Me,Ge,Ze,it,lt,q,Ee,nt,mt,Ct,zt=vt.hasData(I)&&vt.get(I);if(zt&&(Ze=zt.events)){for(R=(R||"").match(rt)||[""],it=R.length;it--;)if(Ge=V.exec(R[it])||[],nt=Ct=Ge[1],mt=(Ge[2]||"").split(".").sort(),nt){for(q=N.event.special[nt]||{},nt=(ne?q.delegateType:q.bindType)||nt,Ee=Ze[nt]||[],Ge=Ge[2]&&new RegExp("(^|\\.)"+mt.join("\\.(?:.*\\.|)")+"(\\.|$)"),Me=ve=Ee.length;ve--;)lt=Ee[ve],!fe&&Ct!==lt.origType||W&&W.guid!==lt.guid||Ge&&!Ge.test(lt.namespace)||ne&&ne!==lt.selector&&(ne!=="**"||!lt.selector)||(Ee.splice(ve,1),lt.selector&&Ee.delegateCount--,q.remove&&q.remove.call(I,lt));Me&&!Ee.length&&(q.teardown&&q.teardown.call(I,mt,zt.handle)!==!1||N.removeEvent(I,nt,zt.handle),delete Ze[nt])}else for(nt in Ze)N.event.remove(I,nt+R[it],W,ne,!0);N.isEmptyObject(Ze)&&vt.remove(I,"handle events")}},dispatch:function(I){I=N.event.fix(I);var R,W,ne,fe,ve,Me=[],Ge=C.call(arguments),Ze=(vt.get(this,"events")||{})[I.type]||[],it=N.event.special[I.type]||{};if(Ge[0]=I,I.delegateTarget=this,!it.preDispatch||it.preDispatch.call(this,I)!==!1){for(Me=N.event.handlers.call(this,I,Ze),R=0;(fe=Me[R++])&&!I.isPropagationStopped();)for(I.currentTarget=fe.elem,W=0;(ve=fe.handlers[W++])&&!I.isImmediatePropagationStopped();)I.rnamespace&&!I.rnamespace.test(ve.namespace)||(I.handleObj=ve,I.data=ve.data,(ne=((N.event.special[ve.origType]||{}).handle||ve.handler).apply(fe.elem,Ge))!==void 0&&(I.result=ne)===!1&&(I.preventDefault(),I.stopPropagation()));return it.postDispatch&&it.postDispatch.call(this,I),I.result}},handlers:function(I,R){var W,ne,fe,ve,Me=[],Ge=R.delegateCount,Ze=I.target;if(Ge&&Ze.nodeType&&(I.type!=="click"||isNaN(I.button)||I.button<1)){for(;Ze!==this;Ze=Ze.parentNode||this)if(Ze.nodeType===1&&(Ze.disabled!==!0||I.type!=="click")){for(ne=[],W=0;W<Ge;W++)ve=R[W],fe=ve.selector+" ",ne[fe]===void 0&&(ne[fe]=ve.needsContext?N(fe,this).index(Ze)>-1:N.find(fe,this,null,[Ze]).length),ne[fe]&&ne.push(ve);ne.length&&Me.push({elem:Ze,handlers:ne})}}return Ge<R.length&&Me.push({elem:this,handlers:R.slice(Ge)}),Me},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(I,R){return I.which==null&&(I.which=R.charCode!=null?R.charCode:R.keyCode),I}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(I,R){var W,ne,fe,ve=R.button;return I.pageX==null&&R.clientX!=null&&(W=I.target.ownerDocument||Z,ne=W.documentElement,fe=W.body,I.pageX=R.clientX+(ne&&ne.scrollLeft||fe&&fe.scrollLeft||0)-(ne&&ne.clientLeft||fe&&fe.clientLeft||0),I.pageY=R.clientY+(ne&&ne.scrollTop||fe&&fe.scrollTop||0)-(ne&&ne.clientTop||fe&&fe.clientTop||0)),I.which||ve===void 0||(I.which=1&ve?1:2&ve?3:4&ve?2:0),I}},fix:function(I){if(I[N.expando])return I;var R,W,ne,fe=I.type,ve=I,Me=this.fixHooks[fe];for(Me||(this.fixHooks[fe]=Me=U.test(fe)?this.mouseHooks:he.test(fe)?this.keyHooks:{}),ne=Me.props?this.props.concat(Me.props):this.props,I=new N.Event(ve),R=ne.length;R--;)W=ne[R],I[W]=ve[W];return I.target||(I.target=Z),I.target.nodeType===3&&(I.target=I.target.parentNode),Me.filter?Me.filter(I,ve):I},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==r()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===r()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&N.nodeName(this,"input"))return this.click(),!1},_default:function(I){return N.nodeName(I.target,"a")}},beforeunload:{postDispatch:function(I){I.result!==void 0&&I.originalEvent&&(I.originalEvent.returnValue=I.result)}}}},N.removeEvent=function(I,R,W){I.removeEventListener&&I.removeEventListener(R,W)},N.Event=function(I,R){if(!(this instanceof N.Event))return new N.Event(I,R);I&&I.type?(this.originalEvent=I,this.type=I.type,this.isDefaultPrevented=I.defaultPrevented||I.defaultPrevented===void 0&&I.returnValue===!1?h:p):this.type=I,R&&N.extend(this,R),this.timeStamp=I&&I.timeStamp||N.now(),this[N.expando]=!0},N.Event.prototype={constructor:N.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var I=this.originalEvent;this.isDefaultPrevented=h,I&&!this.isSimulated&&I.preventDefault()},stopPropagation:function(){var I=this.originalEvent;this.isPropagationStopped=h,I&&!this.isSimulated&&I.stopPropagation()},stopImmediatePropagation:function(){var I=this.originalEvent;this.isImmediatePropagationStopped=h,I&&!this.isSimulated&&I.stopImmediatePropagation(),this.stopPropagation()}},N.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(I,R){N.event.special[I]={delegateType:R,bindType:R,handle:function(W){var ne,fe=this,ve=W.relatedTarget,Me=W.handleObj;return ve&&(ve===fe||N.contains(fe,ve))||(W.type=Me.origType,ne=Me.handler.apply(this,arguments),W.type=R),ne}}}),N.fn.extend({on:function(I,R,W,ne){return o(this,I,R,W,ne)},one:function(I,R,W,ne){return o(this,I,R,W,ne,1)},off:function(I,R,W){var ne,fe;if(I&&I.preventDefault&&I.handleObj)return ne=I.handleObj,N(I.delegateTarget).off(ne.namespace?ne.origType+"."+ne.namespace:ne.origType,ne.selector,ne.handler),this;if(typeof I=="object"){for(fe in I)this.off(fe,R,I[fe]);return this}return R!==!1&&typeof R!="function"||(W=R,R=void 0),W===!1&&(W=p),this.each(function(){N.event.remove(this,I,W,R)})}});var O=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,de=/<script|<style|<link/i,j=/checked\s*(?:[^=]|=\s*.checked.)/i,xe=/^true\/(.*)/,be=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;N.extend({htmlPrefilter:function(I){return I.replace(O,"<$1></$2>")},clone:function(I,R,W){var ne,fe,ve,Me,Ge=I.cloneNode(!0),Ze=N.contains(I.ownerDocument,I);if(!(Oe.noCloneChecked||I.nodeType!==1&&I.nodeType!==11||N.isXMLDoc(I)))for(Me=u(Ge),ve=u(I),ne=0,fe=ve.length;ne<fe;ne++)D(ve[ne],Me[ne]);if(R)if(W)for(ve=ve||u(I),Me=Me||u(Ge),ne=0,fe=ve.length;ne<fe;ne++)M(ve[ne],Me[ne]);else M(I,Ge);return Me=u(Ge,"script"),Me.length>0&&f(Me,!Ze&&u(I,"script")),Ge},cleanData:function(I){for(var R,W,ne,fe=N.event.special,ve=0;(W=I[ve])!==void 0;ve++)if(Pt(W)){if(R=W[vt.expando]){if(R.events)for(ne in R.events)fe[ne]?N.event.remove(W,ne):N.removeEvent(W,ne,R.handle);W[vt.expando]=void 0}W[At.expando]&&(W[At.expando]=void 0)}}}),N.fn.extend({domManip:A,detach:function(I){return v(this,I,!0)},remove:function(I){return v(this,I)},text:function(I){return yt(this,function(R){return R===void 0?N.text(this):this.empty().each(function(){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||(this.textContent=R)})},null,I,arguments.length)},append:function(){return A(this,arguments,function(I){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&m(this,I).appendChild(I)})},prepend:function(){return A(this,arguments,function(I){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var R=m(this,I);R.insertBefore(I,R.firstChild)}})},before:function(){return A(this,arguments,function(I){this.parentNode&&this.parentNode.insertBefore(I,this)})},after:function(){return A(this,arguments,function(I){this.parentNode&&this.parentNode.insertBefore(I,this.nextSibling)})},empty:function(){for(var I,R=0;(I=this[R])!=null;R++)I.nodeType===1&&(N.cleanData(u(I,!1)),I.textContent="");return this},clone:function(I,R){return I=I!=null&&I,R=R??I,this.map(function(){return N.clone(this,I,R)})},html:function(I){return yt(this,function(R){var W=this[0]||{},ne=0,fe=this.length;if(R===void 0&&W.nodeType===1)return W.innerHTML;if(typeof R=="string"&&!de.test(R)&&!tn[(Fn.exec(R)||["",""])[1].toLowerCase()]){R=N.htmlPrefilter(R);try{for(;ne<fe;ne++)W=this[ne]||{},W.nodeType===1&&(N.cleanData(u(W,!1)),W.innerHTML=R);W=0}catch{}}W&&this.empty().append(R)},null,I,arguments.length)},replaceWith:function(){var I=[];return A(this,arguments,function(R){var W=this.parentNode;N.inArray(this,I)<0&&(N.cleanData(u(this)),W&&W.replaceChild(R,this))},I)}}),N.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(I,R){N.fn[I]=function(W){for(var ne,fe=[],ve=N(W),Me=ve.length-1,Ge=0;Ge<=Me;Ge++)ne=Ge===Me?this:this.clone(!0),N(ve[Ge])[R](ne),ge.apply(fe,ne.get());return this.pushStack(fe)}});var Ne,Ye={HTML:"block",BODY:"block"},tt=/^margin/,ot=new RegExp("^("+on+")(?!px)[a-z%]+$","i"),ct=function(I){var R=I.ownerDocument.defaultView;return R&&R.opener||(R=S),R.getComputedStyle(I)},ut=function(I,R,W,ne){var fe,ve,Me={};for(ve in R)Me[ve]=I.style[ve],I.style[ve]=R[ve];fe=W.apply(I,ne||[]);for(ve in R)I.style[ve]=Me[ve];return fe},ft=Z.documentElement;(function(){function I(){Me.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",Me.innerHTML="",ft.appendChild(ve);var Ge=S.getComputedStyle(Me);R=Ge.top!=="1%",fe=Ge.marginLeft==="2px",W=Ge.width==="4px",Me.style.marginRight="50%",ne=Ge.marginRight==="4px",ft.removeChild(ve)}var R,W,ne,fe,ve=Z.createElement("div"),Me=Z.createElement("div");Me.style&&(Me.style.backgroundClip="content-box",Me.cloneNode(!0).style.backgroundClip="",Oe.clearCloneStyle=Me.style.backgroundClip==="content-box",ve.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",ve.appendChild(Me),N.extend(Oe,{pixelPosition:function(){return I(),R},boxSizingReliable:function(){return W==null&&I(),W},pixelMarginRight:function(){return W==null&&I(),ne},reliableMarginLeft:function(){return W==null&&I(),fe},reliableMarginRight:function(){var Ge,Ze=Me.appendChild(Z.createElement("div"));return Ze.style.cssText=Me.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",Ze.style.marginRight=Ze.style.width="0",Me.style.width="1px",ft.appendChild(ve),Ge=!parseFloat(S.getComputedStyle(Ze).marginRight),ft.removeChild(ve),Me.removeChild(Ze),Ge}}))})();var xt=/^(none|table(?!-c[ea]).+)/,_t={position:"absolute",visibility:"hidden",display:"block"},It={letterSpacing:"0",fontWeight:"400"},kt=["Webkit","O","Moz","ms"],Et=Z.createElement("div").style;N.extend({cssHooks:{opacity:{get:function(I,R){if(R){var W=X(I,"opacity");return W===""?"1":W}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(I,R,W,ne){if(I&&I.nodeType!==3&&I.nodeType!==8&&I.style){var fe,ve,Me,Ge=N.camelCase(R),Ze=I.style;if(R=N.cssProps[Ge]||(N.cssProps[Ge]=H(Ge)||Ge),Me=N.cssHooks[R]||N.cssHooks[Ge],W===void 0)return Me&&"get"in Me&&(fe=Me.get(I,!1,ne))!==void 0?fe:Ze[R];ve=typeof W,ve==="string"&&(fe=St.exec(W))&&fe[1]&&(W=d(I,R,fe),ve="number"),W!=null&&W===W&&(ve==="number"&&(W+=fe&&fe[3]||(N.cssNumber[Ge]?"":"px")),Oe.clearCloneStyle||W!==""||R.indexOf("background")!==0||(Ze[R]="inherit"),Me&&"set"in Me&&(W=Me.set(I,W,ne))===void 0||(Ze[R]=W))}},css:function(I,R,W,ne){var fe,ve,Me,Ge=N.camelCase(R);return R=N.cssProps[Ge]||(N.cssProps[Ge]=H(Ge)||Ge),Me=N.cssHooks[R]||N.cssHooks[Ge],Me&&"get"in Me&&(fe=Me.get(I,!0,W)),fe===void 0&&(fe=X(I,R,ne)),fe==="normal"&&R in It&&(fe=It[R]),W===""||W?(ve=parseFloat(fe),W===!0||isFinite(ve)?ve||0:fe):fe}}),N.each(["height","width"],function(I,R){N.cssHooks[R]={get:function(W,ne,fe){if(ne)return xt.test(N.css(W,"display"))&&W.offsetWidth===0?ut(W,_t,function(){return F(W,R,fe)}):F(W,R,fe)},set:function(W,ne,fe){var ve,Me=fe&&ct(W),Ge=fe&&B(W,R,fe,N.css(W,"boxSizing",!1,Me)==="border-box",Me);return Ge&&(ve=St.exec(ne))&&(ve[3]||"px")!=="px"&&(W.style[R]=ne,ne=N.css(W,R)),z(W,ne,Ge)}}}),N.cssHooks.marginLeft=te(Oe.reliableMarginLeft,function(I,R){if(R)return(parseFloat(X(I,"marginLeft"))||I.getBoundingClientRect().left-ut(I,{marginLeft:0},function(){return I.getBoundingClientRect().left}))+"px"}),N.cssHooks.marginRight=te(Oe.reliableMarginRight,function(I,R){if(R)return ut(I,{display:"inline-block"},X,[I,"marginRight"])}),N.each({margin:"",padding:"",border:"Width"},function(I,R){N.cssHooks[I+R]={expand:function(W){for(var ne=0,fe={},ve=typeof W=="string"?W.split(" "):[W];ne<4;ne++)fe[I+Xt[ne]+R]=ve[ne]||ve[ne-2]||ve[0];return fe}},tt.test(I)||(N.cssHooks[I+R].set=z)}),N.fn.extend({css:function(I,R){return yt(this,function(W,ne,fe){var ve,Me,Ge={},Ze=0;if(N.isArray(ne)){for(ve=ct(W),Me=ne.length;Ze<Me;Ze++)Ge[ne[Ze]]=N.css(W,ne[Ze],!1,ve);return Ge}return fe!==void 0?N.style(W,ne,fe):N.css(W,ne)},I,R,arguments.length>1)},show:function(){return $(this,!0)},hide:function(){return $(this)},toggle:function(I){return typeof I=="boolean"?I?this.show():this.hide():this.each(function(){qt(this)?N(this).show():N(this).hide()})}}),N.Tween=re,re.prototype={constructor:re,init:function(I,R,W,ne,fe,ve){this.elem=I,this.prop=W,this.easing=fe||N.easing._default,this.options=R,this.start=this.now=this.cur(),this.end=ne,this.unit=ve||(N.cssNumber[W]?"":"px")},cur:function(){var I=re.propHooks[this.prop];return I&&I.get?I.get(this):re.propHooks._default.get(this)},run:function(I){var R,W=re.propHooks[this.prop];return this.options.duration?this.pos=R=N.easing[this.easing](I,this.options.duration*I,0,1,this.options.duration):this.pos=R=I,this.now=(this.end-this.start)*R+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),W&&W.set?W.set(this):re.propHooks._default.set(this),this}},re.prototype.init.prototype=re.prototype,re.propHooks={_default:{get:function(I){var R;return I.elem.nodeType!==1||I.elem[I.prop]!=null&&I.elem.style[I.prop]==null?I.elem[I.prop]:(R=N.css(I.elem,I.prop,""),R&&R!=="auto"?R:0)},set:function(I){N.fx.step[I.prop]?N.fx.step[I.prop](I):I.elem.nodeType!==1||I.elem.style[N.cssProps[I.prop]]==null&&!N.cssHooks[I.prop]?I.elem[I.prop]=I.now:N.style(I.elem,I.prop,I.now+I.unit)}}},re.propHooks.scrollTop=re.propHooks.scrollLeft={set:function(I){I.elem.nodeType&&I.elem.parentNode&&(I.elem[I.prop]=I.now)}},N.easing={linear:function(I){return I},swing:function(I){return .5-Math.cos(I*Math.PI)/2},_default:"swing"},N.fx=re.prototype.init,N.fx.step={};var gt,Qt,Rt=/^(?:toggle|show|hide)$/,yn=/queueHooks$/;N.Animation=N.extend(ee,{tweeners:{"*":[function(I,R){var W=this.createTween(I,R);return d(W.elem,I,St.exec(R),W),W}]},tweener:function(I,R){N.isFunction(I)?(R=I,I=["*"]):I=I.match(rt);for(var W,ne=0,fe=I.length;ne<fe;ne++)W=I[ne],ee.tweeners[W]=ee.tweeners[W]||[],ee.tweeners[W].unshift(R)},prefilters:[Q],prefilter:function(I,R){R?ee.prefilters.unshift(I):ee.prefilters.push(I)}}),N.speed=function(I,R,W){var ne=I&&typeof I=="object"?N.extend({},I):{complete:W||!W&&R||N.isFunction(I)&&I,duration:I,easing:W&&R||R&&!N.isFunction(R)&&R};return ne.duration=N.fx.off?0:typeof ne.duration=="number"?ne.duration:ne.duration in N.fx.speeds?N.fx.speeds[ne.duration]:N.fx.speeds._default,ne.queue!=null&&ne.queue!==!0||(ne.queue="fx"),ne.old=ne.complete,ne.complete=function(){N.isFunction(ne.old)&&ne.old.call(this),ne.queue&&N.dequeue(this,ne.queue)},ne},N.fn.extend({fadeTo:function(I,R,W,ne){return this.filter(qt).css("opacity",0).show().end().animate({opacity:R},I,W,ne)},animate:function(I,R,W,ne){var fe=N.isEmptyObject(I),ve=N.speed(R,W,ne),Me=function(){var Ge=ee(this,N.extend({},I),ve);(fe||vt.get(this,"finish"))&&Ge.stop(!0)};return Me.finish=Me,fe||ve.queue===!1?this.each(Me):this.queue(ve.queue,Me)},stop:function(I,R,W){var ne=function(fe){var ve=fe.stop;delete fe.stop,ve(W)};return typeof I!="string"&&(W=R,R=I,I=void 0),R&&I!==!1&&this.queue(I||"fx",[]),this.each(function(){var fe=!0,ve=I!=null&&I+"queueHooks",Me=N.timers,Ge=vt.get(this);if(ve)Ge[ve]&&Ge[ve].stop&&ne(Ge[ve]);else for(ve in Ge)Ge[ve]&&Ge[ve].stop&&yn.test(ve)&&ne(Ge[ve]);for(ve=Me.length;ve--;)Me[ve].elem!==this||I!=null&&Me[ve].queue!==I||(Me[ve].anim.stop(W),fe=!1,Me.splice(ve,1));!fe&&W||N.dequeue(this,I)})},finish:function(I){return I!==!1&&(I=I||"fx"),this.each(function(){var R,W=vt.get(this),ne=W[I+"queue"],fe=W[I+"queueHooks"],ve=N.timers,Me=ne?ne.length:0;for(W.finish=!0,N.queue(this,I,[]),fe&&fe.stop&&fe.stop.call(this,!0),R=ve.length;R--;)ve[R].elem===this&&ve[R].queue===I&&(ve[R].anim.stop(!0),ve.splice(R,1));for(R=0;R<Me;R++)ne[R]&&ne[R].finish&&ne[R].finish.call(this);delete W.finish})}}),N.each(["toggle","show","hide"],function(I,R){var W=N.fn[R];N.fn[R]=function(ne,fe,ve){return ne==null||typeof ne=="boolean"?W.apply(this,arguments):this.animate(ue(R,!0),ne,fe,ve)}}),N.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(I,R){N.fn[I]=function(W,ne,fe){return this.animate(R,W,ne,fe)}}),N.timers=[],N.fx.tick=function(){var I,R=0,W=N.timers;for(gt=N.now();R<W.length;R++)(I=W[R])()||W[R]!==I||W.splice(R--,1);W.length||N.fx.stop(),gt=void 0},N.fx.timer=function(I){N.timers.push(I),I()?N.fx.start():N.timers.pop()},N.fx.interval=13,N.fx.start=function(){Qt||(Qt=S.setInterval(N.fx.tick,N.fx.interval))},N.fx.stop=function(){S.clearInterval(Qt),Qt=null},N.fx.speeds={slow:600,fast:200,_default:400},N.fn.delay=function(I,R){return I=N.fx&&N.fx.speeds[I]||I,R=R||"fx",this.queue(R,function(W,ne){var fe=S.setTimeout(W,I);ne.stop=function(){S.clearTimeout(fe)}})},(function(){var I=Z.createElement("input"),R=Z.createElement("select"),W=R.appendChild(Z.createElement("option"));I.type="checkbox",Oe.checkOn=I.value!=="",Oe.optSelected=W.selected,R.disabled=!0,Oe.optDisabled=!W.disabled,I=Z.createElement("input"),I.value="t",I.type="radio",Oe.radioValue=I.value==="t"})();var Tt,cn=N.expr.attrHandle;N.fn.extend({attr:function(I,R){return yt(this,N.attr,I,R,arguments.length>1)},removeAttr:function(I){return this.each(function(){N.removeAttr(this,I)})}}),N.extend({attr:function(I,R,W){var ne,fe,ve=I.nodeType;if(ve!==3&&ve!==8&&ve!==2)return I.getAttribute===void 0?N.prop(I,R,W):(ve===1&&N.isXMLDoc(I)||(R=R.toLowerCase(),fe=N.attrHooks[R]||(N.expr.match.bool.test(R)?Tt:void 0)),W!==void 0?W===null?void N.removeAttr(I,R):fe&&"set"in fe&&(ne=fe.set(I,W,R))!==void 0?ne:(I.setAttribute(R,W+""),W):fe&&"get"in fe&&(ne=fe.get(I,R))!==null?ne:(ne=N.find.attr(I,R),ne??void 0))},attrHooks:{type:{set:function(I,R){if(!Oe.radioValue&&R==="radio"&&N.nodeName(I,"input")){var W=I.value;return I.setAttribute("type",R),W&&(I.value=W),R}}}},removeAttr:function(I,R){var W,ne,fe=0,ve=R&&R.match(rt);if(ve&&I.nodeType===1)for(;W=ve[fe++];)ne=N.propFix[W]||W,N.expr.match.bool.test(W)&&(I[ne]=!1),I.removeAttribute(W)}}),Tt={set:function(I,R,W){return R===!1?N.removeAttr(I,W):I.setAttribute(W,W),W}},N.each(N.expr.match.bool.source.match(/\w+/g),function(I,R){var W=cn[R]||N.find.attr;cn[R]=function(ne,fe,ve){var Me,Ge;return ve||(Ge=cn[fe],cn[fe]=Me,Me=W(ne,fe,ve)!=null?fe.toLowerCase():null,cn[fe]=Ge),Me}});var Er=/^(?:input|select|textarea|button)$/i,ln=/^(?:a|area)$/i;N.fn.extend({prop:function(I,R){return yt(this,N.prop,I,R,arguments.length>1)},removeProp:function(I){return this.each(function(){delete this[N.propFix[I]||I]})}}),N.extend({prop:function(I,R,W){var ne,fe,ve=I.nodeType;if(ve!==3&&ve!==8&&ve!==2)return ve===1&&N.isXMLDoc(I)||(R=N.propFix[R]||R,fe=N.propHooks[R]),W!==void 0?fe&&"set"in fe&&(ne=fe.set(I,W,R))!==void 0?ne:I[R]=W:fe&&"get"in fe&&(ne=fe.get(I,R))!==null?ne:I[R]},propHooks:{tabIndex:{get:function(I){var R=N.find.attr(I,"tabindex");return R?parseInt(R,10):Er.test(I.nodeName)||ln.test(I.nodeName)&&I.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Oe.optSelected||(N.propHooks.selected={get:function(I){var R=I.parentNode;return R&&R.parentNode&&R.parentNode.selectedIndex,null},set:function(I){var R=I.parentNode;R&&(R.selectedIndex,R.parentNode&&R.parentNode.selectedIndex)}}),N.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){N.propFix[this.toLowerCase()]=this});var kn=/[\t\r\n\f]/g;N.fn.extend({addClass:function(I){var R,W,ne,fe,ve,Me,Ge,Ze=0;if(N.isFunction(I))return this.each(function(it){N(this).addClass(I.call(this,it,ae(this)))});if(typeof I=="string"&&I){for(R=I.match(rt)||[];W=this[Ze++];)if(fe=ae(W),ne=W.nodeType===1&&(" "+fe+" ").replace(kn," ")){for(Me=0;ve=R[Me++];)ne.indexOf(" "+ve+" ")<0&&(ne+=ve+" ");Ge=N.trim(ne),fe!==Ge&&W.setAttribute("class",Ge)}}return this},removeClass:function(I){var R,W,ne,fe,ve,Me,Ge,Ze=0;if(N.isFunction(I))return this.each(function(it){N(this).removeClass(I.call(this,it,ae(this)))});if(!arguments.length)return this.attr("class","");if(typeof I=="string"&&I){for(R=I.match(rt)||[];W=this[Ze++];)if(fe=ae(W),ne=W.nodeType===1&&(" "+fe+" ").replace(kn," ")){for(Me=0;ve=R[Me++];)for(;ne.indexOf(" "+ve+" ")>-1;)ne=ne.replace(" "+ve+" "," ");Ge=N.trim(ne),fe!==Ge&&W.setAttribute("class",Ge)}}return this},toggleClass:function(I,R){var W=typeof I;return typeof R=="boolean"&&W==="string"?R?this.addClass(I):this.removeClass(I):N.isFunction(I)?this.each(function(ne){N(this).toggleClass(I.call(this,ne,ae(this),R),R)}):this.each(function(){var ne,fe,ve,Me;if(W==="string")for(fe=0,ve=N(this),Me=I.match(rt)||[];ne=Me[fe++];)ve.hasClass(ne)?ve.removeClass(ne):ve.addClass(ne);else I!==void 0&&W!=="boolean"||(ne=ae(this),ne&&vt.set(this,"__className__",ne),this.setAttribute&&this.setAttribute("class",ne||I===!1?"":vt.get(this,"__className__")||""))})},hasClass:function(I){var R,W,ne=0;for(R=" "+I+" ";W=this[ne++];)if(W.nodeType===1&&(" "+ae(W)+" ").replace(kn," ").indexOf(R)>-1)return!0;return!1}});var On=/\r/g,Mn=/[\x20\t\r\n\f]+/g;N.fn.extend({val:function(I){var R,W,ne,fe=this[0];{if(arguments.length)return ne=N.isFunction(I),this.each(function(ve){var Me;this.nodeType===1&&(Me=ne?I.call(this,ve,N(this).val()):I,Me==null?Me="":typeof Me=="number"?Me+="":N.isArray(Me)&&(Me=N.map(Me,function(Ge){return Ge==null?"":Ge+""})),(R=N.valHooks[this.type]||N.valHooks[this.nodeName.toLowerCase()])&&"set"in R&&R.set(this,Me,"value")!==void 0||(this.value=Me))});if(fe)return(R=N.valHooks[fe.type]||N.valHooks[fe.nodeName.toLowerCase()])&&"get"in R&&(W=R.get(fe,"value"))!==void 0?W:(W=fe.value,typeof W=="string"?W.replace(On,""):W??"")}}}),N.extend({valHooks:{option:{get:function(I){var R=N.find.attr(I,"value");return R??N.trim(N.text(I)).replace(Mn," ")}},select:{get:function(I){for(var R,W,ne=I.options,fe=I.selectedIndex,ve=I.type==="select-one"||fe<0,Me=ve?null:[],Ge=ve?fe+1:ne.length,Ze=fe<0?Ge:ve?fe:0;Ze<Ge;Ze++)if(W=ne[Ze],(W.selected||Ze===fe)&&(Oe.optDisabled?!W.disabled:W.getAttribute("disabled")===null)&&(!W.parentNode.disabled||!N.nodeName(W.parentNode,"optgroup"))){if(R=N(W).val(),ve)return R;Me.push(R)}return Me},set:function(I,R){for(var W,ne,fe=I.options,ve=N.makeArray(R),Me=fe.length;Me--;)ne=fe[Me],(ne.selected=N.inArray(N.valHooks.option.get(ne),ve)>-1)&&(W=!0);return W||(I.selectedIndex=-1),ve}}}}),N.each(["radio","checkbox"],function(){N.valHooks[this]={set:function(I,R){if(N.isArray(R))return I.checked=N.inArray(N(I).val(),R)>-1}},Oe.checkOn||(N.valHooks[this].get=function(I){return I.getAttribute("value")===null?"on":I.value})});var Sn=/^(?:focusinfocus|focusoutblur)$/;N.extend(N.event,{trigger:function(I,R,W,ne){var fe,ve,Me,Ge,Ze,it,lt,q=[W||Z],Ee=Ie.call(I,"type")?I.type:I,nt=Ie.call(I,"namespace")?I.namespace.split("."):[];if(ve=Me=W=W||Z,W.nodeType!==3&&W.nodeType!==8&&!Sn.test(Ee+N.event.triggered)&&(Ee.indexOf(".")>-1&&(nt=Ee.split("."),Ee=nt.shift(),nt.sort()),Ze=Ee.indexOf(":")<0&&"on"+Ee,I=I[N.expando]?I:new N.Event(Ee,typeof I=="object"&&I),I.isTrigger=ne?2:3,I.namespace=nt.join("."),I.rnamespace=I.namespace?new RegExp("(^|\\.)"+nt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,I.result=void 0,I.target||(I.target=W),R=R==null?[I]:N.makeArray(R,[I]),lt=N.event.special[Ee]||{},ne||!lt.trigger||lt.trigger.apply(W,R)!==!1)){if(!ne&&!lt.noBubble&&!N.isWindow(W)){for(Ge=lt.delegateType||Ee,Sn.test(Ge+Ee)||(ve=ve.parentNode);ve;ve=ve.parentNode)q.push(ve),Me=ve;Me===(W.ownerDocument||Z)&&q.push(Me.defaultView||Me.parentWindow||S)}for(fe=0;(ve=q[fe++])&&!I.isPropagationStopped();)I.type=fe>1?Ge:lt.bindType||Ee,it=(vt.get(ve,"events")||{})[I.type]&&vt.get(ve,"handle"),it&&it.apply(ve,R),(it=Ze&&ve[Ze])&&it.apply&&Pt(ve)&&(I.result=it.apply(ve,R),I.result===!1&&I.preventDefault());return I.type=Ee,ne||I.isDefaultPrevented()||lt._default&&lt._default.apply(q.pop(),R)!==!1||!Pt(W)||Ze&&N.isFunction(W[Ee])&&!N.isWindow(W)&&(Me=W[Ze],Me&&(W[Ze]=null),N.event.triggered=Ee,W[Ee](),N.event.triggered=void 0,Me&&(W[Ze]=Me)),I.result}},simulate:function(I,R,W){var ne=N.extend(new N.Event,W,{type:I,isSimulated:!0});N.event.trigger(ne,null,R)}}),N.fn.extend({trigger:function(I,R){return this.each(function(){N.event.trigger(I,R,this)})},triggerHandler:function(I,R){var W=this[0];if(W)return N.event.trigger(I,R,W,!0)}}),N.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(I,R){N.fn[R]=function(W,ne){return arguments.length>0?this.on(R,null,W,ne):this.trigger(R)}}),N.fn.extend({hover:function(I,R){return this.mouseenter(I).mouseleave(R||I)}}),Oe.focusin="onfocusin"in S,Oe.focusin||N.each({focus:"focusin",blur:"focusout"},function(I,R){var W=function(ne){N.event.simulate(R,ne.target,N.event.fix(ne))};N.event.special[R]={setup:function(){var ne=this.ownerDocument||this,fe=vt.access(ne,R);fe||ne.addEventListener(I,W,!0),vt.access(ne,R,(fe||0)+1)},teardown:function(){var ne=this.ownerDocument||this,fe=vt.access(ne,R)-1;fe?vt.access(ne,R,fe):(ne.removeEventListener(I,W,!0),vt.remove(ne,R))}}});var lr=S.location,Wn=N.now(),ao=/\?/;N.parseJSON=function(I){return JSON.parse(I+"")},N.parseXML=function(I){var R;if(!I||typeof I!="string")return null;try{R=new S.DOMParser().parseFromString(I,"text/xml")}catch{R=void 0}return R&&!R.getElementsByTagName("parsererror").length||N.error("Invalid XML: "+I),R};var Ko=/#.*$/,so=/([?&])_=[^&]*/,ts=/^(.*?):[ \t]*([^\r\n]*)$/gm,ns=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rs=/^(?:GET|HEAD)$/,Jo=/^\/\//,co={},Mi={},Zo="*/".concat("*"),lo=Z.createElement("a");lo.href=lr.href,N.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:lr.href,type:"GET",isLocal:ns.test(lr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Zo,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":N.parseJSON,"text xml":N.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(I,R){return R?Ae(Ae(I,N.ajaxSettings),R):Ae(N.ajaxSettings,I)},ajaxPrefilter:le(co),ajaxTransport:le(Mi),ajax:function(I,R){function W(Ot,Kt,_r,ta){var tr,nr,rr,Gn,Zt,An=Kt;Ft!==2&&(Ft=2,Ge&&S.clearTimeout(Ge),ne=void 0,ve=ta||"",Mt.readyState=Ot>0?4:0,tr=Ot>=200&&Ot<300||Ot===304,_r&&(Gn=Be(q,Mt,_r)),Gn=Fe(q,Gn,Mt,tr),tr?(q.ifModified&&(Zt=Mt.getResponseHeader("Last-Modified"),Zt&&(N.lastModified[fe]=Zt),(Zt=Mt.getResponseHeader("etag"))&&(N.etag[fe]=Zt)),Ot===204||q.type==="HEAD"?An="nocontent":Ot===304?An="notmodified":(An=Gn.state,nr=Gn.data,rr=Gn.error,tr=!rr)):(rr=An,!Ot&&An||(An="error",Ot<0&&(Ot=0))),Mt.status=Ot,Mt.statusText=(Kt||An)+"",tr?mt.resolveWith(Ee,[nr,An,Mt]):mt.rejectWith(Ee,[Mt,An,rr]),Mt.statusCode(zt),zt=void 0,it&&nt.trigger(tr?"ajaxSuccess":"ajaxError",[Mt,q,tr?nr:rr]),Ct.fireWith(Ee,[Mt,An]),it&&(nt.trigger("ajaxComplete",[Mt,q]),--N.active||N.event.trigger("ajaxStop")))}typeof I=="object"&&(R=I,I=void 0),R=R||{};var ne,fe,ve,Me,Ge,Ze,it,lt,q=N.ajaxSetup({},R),Ee=q.context||q,nt=q.context&&(Ee.nodeType||Ee.jquery)?N(Ee):N.event,mt=N.Deferred(),Ct=N.Callbacks("once memory"),zt=q.statusCode||{},jt={},nn={},Ft=0,Gt="canceled",Mt={readyState:0,getResponseHeader:function(Ot){var Kt;if(Ft===2){if(!Me)for(Me={};Kt=ts.exec(ve);)Me[Kt[1].toLowerCase()]=Kt[2];Kt=Me[Ot.toLowerCase()]}return Kt??null},getAllResponseHeaders:function(){return Ft===2?ve:null},setRequestHeader:function(Ot,Kt){var _r=Ot.toLowerCase();return Ft||(Ot=nn[_r]=nn[_r]||Ot,jt[Ot]=Kt),this},overrideMimeType:function(Ot){return Ft||(q.mimeType=Ot),this},statusCode:function(Ot){var Kt;if(Ot)if(Ft<2)for(Kt in Ot)zt[Kt]=[zt[Kt],Ot[Kt]];else Mt.always(Ot[Mt.status]);return this},abort:function(Ot){var Kt=Ot||Gt;return ne&&ne.abort(Kt),W(0,Kt),this}};if(mt.promise(Mt).complete=Ct.add,Mt.success=Mt.done,Mt.error=Mt.fail,q.url=((I||q.url||lr.href)+"").replace(Ko,"").replace(Jo,lr.protocol+"//"),q.type=R.method||R.type||q.method||q.type,q.dataTypes=N.trim(q.dataType||"*").toLowerCase().match(rt)||[""],q.crossDomain==null){Ze=Z.createElement("a");try{Ze.href=q.url,Ze.href=Ze.href,q.crossDomain=lo.protocol+"//"+lo.host!=Ze.protocol+"//"+Ze.host}catch{q.crossDomain=!0}}if(q.data&&q.processData&&typeof q.data!="string"&&(q.data=N.param(q.data,q.traditional)),me(co,q,R,Mt),Ft===2)return Mt;it=N.event&&q.global,it&&N.active++==0&&N.event.trigger("ajaxStart"),q.type=q.type.toUpperCase(),q.hasContent=!rs.test(q.type),fe=q.url,q.hasContent||(q.data&&(fe=q.url+=(ao.test(fe)?"&":"?")+q.data,delete q.data),q.cache===!1&&(q.url=so.test(fe)?fe.replace(so,"$1_="+Wn++):fe+(ao.test(fe)?"&":"?")+"_="+Wn++)),q.ifModified&&(N.lastModified[fe]&&Mt.setRequestHeader("If-Modified-Since",N.lastModified[fe]),N.etag[fe]&&Mt.setRequestHeader("If-None-Match",N.etag[fe])),(q.data&&q.hasContent&&q.contentType!==!1||R.contentType)&&Mt.setRequestHeader("Content-Type",q.contentType),Mt.setRequestHeader("Accept",q.dataTypes[0]&&q.accepts[q.dataTypes[0]]?q.accepts[q.dataTypes[0]]+(q.dataTypes[0]!=="*"?", "+Zo+"; q=0.01":""):q.accepts["*"]);for(lt in q.headers)Mt.setRequestHeader(lt,q.headers[lt]);if(q.beforeSend&&(q.beforeSend.call(Ee,Mt,q)===!1||Ft===2))return Mt.abort();Gt="abort";for(lt in{success:1,error:1,complete:1})Mt[lt](q[lt]);if(ne=me(Mi,q,R,Mt)){if(Mt.readyState=1,it&&nt.trigger("ajaxSend",[Mt,q]),Ft===2)return Mt;q.async&&q.timeout>0&&(Ge=S.setTimeout(function(){Mt.abort("timeout")},q.timeout));try{Ft=1,ne.send(jt,W)}catch(Ot){if(!(Ft<2))throw Ot;W(-1,Ot)}}else W(-1,"No Transport");return Mt},getJSON:function(I,R,W){return N.get(I,R,W,"json")},getScript:function(I,R){return N.get(I,void 0,R,"script")}}),N.each(["get","post"],function(I,R){N[R]=function(W,ne,fe,ve){return N.isFunction(ne)&&(ve=ve||fe,fe=ne,ne=void 0),N.ajax(N.extend({url:W,type:R,dataType:ve,data:ne,success:fe},N.isPlainObject(W)&&W))}}),N._evalUrl=function(I){return N.ajax({url:I,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},N.fn.extend({wrapAll:function(I){var R;return N.isFunction(I)?this.each(function(W){N(this).wrapAll(I.call(this,W))}):(this[0]&&(R=N(I,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&R.insertBefore(this[0]),R.map(function(){for(var W=this;W.firstElementChild;)W=W.firstElementChild;return W}).append(this)),this)},wrapInner:function(I){return N.isFunction(I)?this.each(function(R){N(this).wrapInner(I.call(this,R))}):this.each(function(){var R=N(this),W=R.contents();W.length?W.wrapAll(I):R.append(I)})},wrap:function(I){var R=N.isFunction(I);return this.each(function(W){N(this).wrapAll(R?I.call(this,W):I)})},unwrap:function(){return this.parent().each(function(){N.nodeName(this,"body")||N(this).replaceWith(this.childNodes)}).end()}}),N.expr.filters.hidden=function(I){return!N.expr.filters.visible(I)},N.expr.filters.visible=function(I){return I.offsetWidth>0||I.offsetHeight>0||I.getClientRects().length>0};var is=/%20/g,os=/\[\]$/,uo=/\r?\n/g,as=/^(?:submit|button|image|reset|file)$/i,qr=/^(?:input|select|textarea|keygen)/i;N.param=function(I,R){var W,ne=[],fe=function(ve,Me){Me=N.isFunction(Me)?Me():Me??"",ne[ne.length]=encodeURIComponent(ve)+"="+encodeURIComponent(Me)};if(R===void 0&&(R=N.ajaxSettings&&N.ajaxSettings.traditional),N.isArray(I)||I.jquery&&!N.isPlainObject(I))N.each(I,function(){fe(this.name,this.value)});else for(W in I)Le(W,I[W],R,fe);return ne.join("&").replace(is,"+")},N.fn.extend({serialize:function(){return N.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var I=N.prop(this,"elements");return I?N.makeArray(I):this}).filter(function(){var I=this.type;return this.name&&!N(this).is(":disabled")&&qr.test(this.nodeName)&&!as.test(I)&&(this.checked||!bn.test(I))}).map(function(I,R){var W=N(this).val();return W==null?null:N.isArray(W)?N.map(W,function(ne){return{name:R.name,value:ne.replace(uo,`\r
`)}}):{name:R.name,value:W.replace(uo,`\r
`)}}).get()}}),N.ajaxSettings.xhr=function(){try{return new S.XMLHttpRequest}catch{}};var $o={0:200,1223:204},zr=N.ajaxSettings.xhr();Oe.cors=!!zr&&"withCredentials"in zr,Oe.ajax=zr=!!zr,N.ajaxTransport(function(I){var R,W;if(Oe.cors||zr&&!I.crossDomain)return{send:function(ne,fe){var ve,Me=I.xhr();if(Me.open(I.type,I.url,I.async,I.username,I.password),I.xhrFields)for(ve in I.xhrFields)Me[ve]=I.xhrFields[ve];I.mimeType&&Me.overrideMimeType&&Me.overrideMimeType(I.mimeType),I.crossDomain||ne["X-Requested-With"]||(ne["X-Requested-With"]="XMLHttpRequest");for(ve in ne)Me.setRequestHeader(ve,ne[ve]);R=function(Ge){return function(){R&&(R=W=Me.onload=Me.onerror=Me.onabort=Me.onreadystatechange=null,Ge==="abort"?Me.abort():Ge==="error"?typeof Me.status!="number"?fe(0,"error"):fe(Me.status,Me.statusText):fe($o[Me.status]||Me.status,Me.statusText,(Me.responseType||"text")!=="text"||typeof Me.responseText!="string"?{binary:Me.response}:{text:Me.responseText},Me.getAllResponseHeaders()))}},Me.onload=R(),W=Me.onerror=R("error"),Me.onabort!==void 0?Me.onabort=W:Me.onreadystatechange=function(){Me.readyState===4&&S.setTimeout(function(){R&&W()})},R=R("abort");try{Me.send(I.hasContent&&I.data||null)}catch(Ge){if(R)throw Ge}},abort:function(){R&&R()}}}),N.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(I){return N.globalEval(I),I}}}),N.ajaxPrefilter("script",function(I){I.cache===void 0&&(I.cache=!1),I.crossDomain&&(I.type="GET")}),N.ajaxTransport("script",function(I){if(I.crossDomain){var R,W;return{send:function(ne,fe){R=N("<script>").prop({charset:I.scriptCharset,src:I.url}).on("load error",W=function(ve){R.remove(),W=null,ve&&fe(ve.type==="error"?404:200,ve.type)}),Z.head.appendChild(R[0])},abort:function(){W&&W()}}}});var po=[],ho=/(=)\?(?=&|$)|\?\?/;N.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var I=po.pop()||N.expando+"_"+Wn++;return this[I]=!0,I}}),N.ajaxPrefilter("json jsonp",function(I,R,W){var ne,fe,ve,Me=I.jsonp!==!1&&(ho.test(I.url)?"url":typeof I.data=="string"&&(I.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&ho.test(I.data)&&"data");if(Me||I.dataTypes[0]==="jsonp")return ne=I.jsonpCallback=N.isFunction(I.jsonpCallback)?I.jsonpCallback():I.jsonpCallback,Me?I[Me]=I[Me].replace(ho,"$1"+ne):I.jsonp!==!1&&(I.url+=(ao.test(I.url)?"&":"?")+I.jsonp+"="+ne),I.converters["script json"]=function(){return ve||N.error(ne+" was not called"),ve[0]},I.dataTypes[0]="json",fe=S[ne],S[ne]=function(){ve=arguments},W.always(function(){fe===void 0?N(S).removeProp(ne):S[ne]=fe,I[ne]&&(I.jsonpCallback=R.jsonpCallback,po.push(ne)),ve&&N.isFunction(fe)&&fe(ve[0]),ve=fe=void 0}),"script"}),N.parseHTML=function(I,R,W){if(!I||typeof I!="string")return null;typeof R=="boolean"&&(W=R,R=!1),R=R||Z;var ne=qe.exec(I),fe=!W&&[];return ne?[R.createElement(ne[1])]:(ne=y([I],R,fe),fe&&fe.length&&N(fe).remove(),N.merge([],ne.childNodes))};var ea=N.fn.load;N.fn.load=function(I,R,W){if(typeof I!="string"&&ea)return ea.apply(this,arguments);var ne,fe,ve,Me=this,Ge=I.indexOf(" ");return Ge>-1&&(ne=N.trim(I.slice(Ge)),I=I.slice(0,Ge)),N.isFunction(R)?(W=R,R=void 0):R&&typeof R=="object"&&(fe="POST"),Me.length>0&&N.ajax({url:I,type:fe||"GET",dataType:"html",data:R}).done(function(Ze){ve=arguments,Me.html(ne?N("<div>").append(N.parseHTML(Ze)).find(ne):Ze)}).always(W&&function(Ze,it){Me.each(function(){W.apply(this,ve||[Ze.responseText,it,Ze])})}),this},N.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(I,R){N.fn[R]=function(W){return this.on(R,W)}}),N.expr.filters.animated=function(I){return N.grep(N.timers,function(R){return I===R.elem}).length},N.offset={setOffset:function(I,R,W){var ne,fe,ve,Me,Ge,Ze,it,lt=N.css(I,"position"),q=N(I),Ee={};lt==="static"&&(I.style.position="relative"),Ge=q.offset(),ve=N.css(I,"top"),Ze=N.css(I,"left"),it=(lt==="absolute"||lt==="fixed")&&(ve+Ze).indexOf("auto")>-1,it?(ne=q.position(),Me=ne.top,fe=ne.left):(Me=parseFloat(ve)||0,fe=parseFloat(Ze)||0),N.isFunction(R)&&(R=R.call(I,W,N.extend({},Ge))),R.top!=null&&(Ee.top=R.top-Ge.top+Me),R.left!=null&&(Ee.left=R.left-Ge.left+fe),"using"in R?R.using.call(I,Ee):q.css(Ee)}},N.fn.extend({offset:function(I){if(arguments.length)return I===void 0?this:this.each(function(Me){N.offset.setOffset(this,I,Me)});var R,W,ne=this[0],fe={top:0,left:0},ve=ne&&ne.ownerDocument;if(ve)return R=ve.documentElement,N.contains(R,ne)?(fe=ne.getBoundingClientRect(),W=ze(ve),{top:fe.top+W.pageYOffset-R.clientTop,left:fe.left+W.pageXOffset-R.clientLeft}):fe},position:function(){if(this[0]){var I,R,W=this[0],ne={top:0,left:0};return N.css(W,"position")==="fixed"?R=W.getBoundingClientRect():(I=this.offsetParent(),R=this.offset(),N.nodeName(I[0],"html")||(ne=I.offset()),ne.top+=N.css(I[0],"borderTopWidth",!0),ne.left+=N.css(I[0],"borderLeftWidth",!0)),{top:R.top-ne.top-N.css(W,"marginTop",!0),left:R.left-ne.left-N.css(W,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var I=this.offsetParent;I&&N.css(I,"position")==="static";)I=I.offsetParent;return I||ft})}}),N.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(I,R){var W=R==="pageYOffset";N.fn[I]=function(ne){return yt(this,function(fe,ve,Me){var Ge=ze(fe);if(Me===void 0)return Ge?Ge[R]:fe[ve];Ge?Ge.scrollTo(W?Ge.pageXOffset:Me,W?Me:Ge.pageYOffset):fe[ve]=Me},I,ne,arguments.length)}}),N.each(["top","left"],function(I,R){N.cssHooks[R]=te(Oe.pixelPosition,function(W,ne){if(ne)return ne=X(W,R),ot.test(ne)?N(W).position()[R]+"px":ne})}),N.each({Height:"height",Width:"width"},function(I,R){N.each({padding:"inner"+I,content:R,"":"outer"+I},function(W,ne){N.fn[ne]=function(fe,ve){var Me=arguments.length&&(W||typeof fe!="boolean"),Ge=W||(fe===!0||ve===!0?"margin":"border");return yt(this,function(Ze,it,lt){var q;return N.isWindow(Ze)?Ze.document.documentElement["client"+I]:Ze.nodeType===9?(q=Ze.documentElement,Math.max(Ze.body["scroll"+I],q["scroll"+I],Ze.body["offset"+I],q["offset"+I],q["client"+I])):lt===void 0?N.css(Ze,it,Ge):N.style(Ze,it,lt,Ge)},R,Me?fe:void 0,Me,null)}})}),N.fn.extend({bind:function(I,R,W){return this.on(I,null,R,W)},unbind:function(I,R){return this.off(I,null,R)},delegate:function(I,R,W,ne){return this.on(R,I,W,ne)},undelegate:function(I,R,W){return arguments.length===1?this.off(I,"**"):this.off(R,I||"**",W)},size:function(){return this.length}}),N.fn.andSelf=N.fn.addBack,typeof P=="function"&&P.amd&&P("jquery",[],function(){return N});var ss=S.jQuery,cs=S.$;return N.noConflict=function(I){return S.$===N&&(S.$=cs),I&&S.jQuery===N&&(S.jQuery=ss),N},c||(S.jQuery=S.$=N),N}),P("browser",["require","jquery"],function(S){var c=S("jquery"),x={IS_IE8:navigator.userAgent.match(/MSIE 8.0/i)!==null,IS_IE9:navigator.userAgent.match(/MSIE 9.0/i)!==null,IS_IE:navigator.userAgent.match(/MSIE/i)!==null,IS_EDGE:navigator.userAgent.match(/Edge/i)!==null,IS_IPAD:navigator.userAgent.match(/iPad/i)!==null,IS_MOBILE:navigator.userAgent.match(/Mobile|Android/i)!==null,IS_ANDROID:navigator.userAgent.match(/Android/i)!==null,IS_IOS:navigator.userAgent.match(/(iPad|iPhone|iPod)/i)!==null||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,IS_CHROME:navigator.userAgent.match(/Chrome/i)!==null,IS_FIREFOX:navigator.userAgent.match(/Firefox/i)!==null,IS_SAFARI:navigator.userAgent.match(/^((?!chrome|android).)*safari/i)!==null,IS_APPLE:navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)!==null,IS_WINDOWS:navigator.platform.match(/(Win32)/i)!==null,IS_TOUCH:navigator.userAgent.match(/Touch/i)!==null,IS_KINDLE:navigator.userAgent.match(/Kindle/i)!==null||navigator.userAgent.match(/Silk/i)!==null,IS_BRAILLENOTE:navigator.userAgent.match(/KeyWeb/i)!==null,IS_IN_IFRAME:window.parent!==window};return x.IS_TABLET=x.IS_IPAD||x.IS_ANDROID||x.IS_KINDLE,x.IS_TOUCH_DEVICE=x.SHOULD_NOT_AUTOFOCUS=x.IS_IOS||x.IS_ANDROID||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),x.IOS_VERSION=(function(){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return t?[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]:null})(),x.MAC_VERSION=(function(){var t=navigator.appVersion.match(/OS X (\d+)_(\d+)_?(\d+)?/);return t?[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]:null})(),x.CHROME_VERSION=(function(){var t=navigator.appVersion.match(/Chrom(e|ium)\/([0-9]+)\.([0-9]+)\.?([0-9]+)?/);return t?[parseInt(t[2],10),parseInt(t[3],10),parseInt(t[4]||0,10)]:null})(),x.SUPPORTS_INPUTMODE=(function(){var t=x.IOS_VERSION,l=x.MAC_VERSION,n=x.CHROME_VERSION;return t&&t[0]>=13||x.IS_IOS&&!t&&l&&(l[0]>10||l[0]===10&&l[1]>=15)||x.IS_ANDROID&&n&&n[0]>=76})(),x.SUPPORTS_TRANSLATE3D=!1,c(document).ready(function(){var t,l,n=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(n,null);for(var s in i)if(n.style[s]!==void 0){if(n.style[s]="translate3d(1px,1px,1px)",!(l=window.getComputedStyle(n)))return;t=l.getPropertyValue(i[s])}document.body.removeChild(n),x.SUPPORTS_TRANSLATE3D=t!==void 0&&t.length>0&&t!=="none"}),x.translateRule=function(t,l){return x.SUPPORTS_TRANSLATE3D?"translate3d("+t+(t?"px":"")+","+l+(l?"px":"")+",0)":"translate("+t+(t?"px":"")+","+l+(l?"px":"")+")"},x.SUPPORTS_CANVAS=(function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))})(),x}),P("testbridge",["require"],function(S){function c(){window.consoleOverride=!0;var t=window.console.log;window.console.log=function(){for(var l=[],n=0;n<arguments.length;n++)l.push(arguments[n]);t.apply(window.console,[].concat([l.join(" ")],l))}}var x={ready:function(){try{window.TestBridge=x,parent.USING_SELENIUM&&c()}catch{}}};return x}),(function(){function S(){}function c(se){var he=M.call(arguments,1);return function(){return se.apply(this,he)}}function x(se,he){if(!he)throw new Error("prayer failed: "+se)}function t(se){x("a direction was passed",se===A||se===v)}function l(){te||(te=!0,setTimeout(n))}function n(){te=!1,X={}}function i(se,he){var U=se[A];if(U)for(;U!==se[v][v];U=U[v]){var V=he(U);if(V===!1)break}}function s(se,he,U){var V=se[A];if(!V)return he;for(;V!==se[v][v];V=V[v])he=U(he,V);return he}function g(se,he,U){x("a parent is always present",se),x("leftward is properly set up",(function(){return he?he[v]===U&&he.parent===se:se.ends[A]===U})()),x("rightward is properly set up",(function(){return U?U[A]===he&&U.parent===se:se.ends[v]===he})())}function d(){window.console&&console.warn(`You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (20142015)  v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)}function u(se){return d(),sn(se)}function f(se){function he(j){if(!j||!j.nodeType)return null;var xe=H.getNodeOfElement(k(j).children(".dcg-mq-root-block")[0]),be=xe&&xe.controller;return be?V[be.KIND_OF_MQ](be):null}function U(j,xe){xe&&xe.handlers&&(xe.handlers={fns:xe.handlers,APIClasses:V});for(var be in xe)if(xe.hasOwnProperty(be)){var Ne=xe[be],Ye=Q[be];j[be]=Ye?Ye(Ne):Ne}}if(!(ae<=se&&se<=le))throw"Only interface versions between "+ae+" and "+le+" supported. You specified: "+se;var V={};he.L=A,he.R=v,he.saneKeyboardEvents=Be,he.config=function(j){return U(ie.p,j),this},he.registerEmbed=function(j,xe){if(!/^[a-z][a-z0-9]*$/i.test(j))throw"Embed name must start with letter and be only letters and digits";ee[j]=xe};var O=V.AbstractMathQuill=D(pe,function(j){j.init=function(xe){this.__controller=xe,this.__options=xe.options,this.id=xe.id,this.data=xe.data},j.__mathquillify=function(xe){var be=this.__controller,Ne=be.root,Ye=be.container;be.createTextarea();var tt=Ye.addClass(xe).contents().detach();Ne.jQ=k('<span class="dcg-mq-root-block"/>').appendTo(Ye),H.linkElementByBlockId(Ne.jQ[0],Ne.id),this.latex(tt.text()),this.revert=function(){return Ye.empty().unbind(".mathquill").removeClass("dcg-mq-editable-field dcg-mq-math-mode dcg-mq-text-mode").append(tt)}},j.config=function(xe){return U(this.__options,xe),this},j.el=function(){return this.__controller.container[0]},j.text=function(){return this.__controller.exportText()},j.mathspeak=function(){return this.__controller.exportMathSpeak()},j.latex=function(xe){return arguments.length>0?(this.__controller.renderLatexMath(xe),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},j.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?dcg-mq-cursor( dcg-mq-blink)?"?>.?<\/span>/i,"").replace(/ dcg-mq-hasCursor|dcg-mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},j.reflow=function(){return this.__controller.root.postOrder(function(xe){xe.reflow()}),this}});he.prototype=O.prototype,V.EditableField=D(O,function(j,xe){j.__mathquillify=function(){return xe.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},j.focus=function(){return this.__controller.textarea.focus(),this.__controller.scrollHoriz(),this},j.blur=function(){return this.__controller.textarea.blur(),this},j.write=function(be){return this.__controller.writeLatex(be),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},j.cmd=function(be){var Ne=this.__controller.notify(),Ye=Ne.cursor;if(/^\\[a-z]+$/i.test(be)){be=be.slice(1);var tt=B[be];tt&&(be=tt(be),Ye.selection&&be.replaces(Ye.replaceSelection()),be.createLeftOf(Ye.show()))}else Ye.parent.write(Ye,be);return Ne.scrollHoriz(),Ne.blurred&&Ye.hide().parent.blur(),this},j.select=function(){var be=this.__controller;for(be.notify("move").cursor.insAtRightEnd(be.root);be.cursor[A];)be.selectLeft();return this},j.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},j.moveToDirEnd=function(be){return this.__controller.notify("move").cursor.insAtDirEnd(be,this.__controller.root),this},j.moveToLeftEnd=function(){return this.moveToDirEnd(A)},j.moveToRightEnd=function(){return this.moveToDirEnd(v)},j.keystroke=function(be,Ne){for(var be=be.replace(/^\s+|\s+$/g,"").split(/\s+/),Ye=0;Ye<be.length;Ye+=1)this.__controller.keystroke(be[Ye],Ne||{preventDefault:S});return this},j.typedText=function(be){for(var Ne=0;Ne<be.length;Ne+=1)this.__controller.typedText(be.charAt(Ne));return this},j.dropEmbedded=function(be,Ne,Ye){var tt=be-k(window).scrollLeft(),ot=Ne-k(window).scrollTop(),ct=document.elementFromPoint(tt,ot);this.__controller.seek(k(ct),be,Ne),Fn().setOptions(Ye).createLeftOf(this.__controller.cursor)},j.setAriaLabel=function(be){return this.__controller.ariaLabel=be&&typeof be=="string"&&be!=""?be:"Math Input",this},j.getAriaLabel=function(){return this.__controller.ariaLabel||"Math Input"},j.setAriaPostLabel=function(be,Ne){var Ye=this.__controller;return be&&typeof be=="string"&&be!=""?(be!==Ye.ariaPostLabel&&typeof Ne=="number"&&(this.ariaAlertTimeout&&clearTimeout(this.ariaAlertTimeout),this.ariaAlertTimeout=setTimeout((function(){k(document.activeElement).closest(k(Ye.container)).length&&Le.alert(this.mathspeak().trim()+" "+be.trim())}).bind(this),Ne)),Ye.ariaPostLabel=be):(this.ariaAlertTimeout&&clearTimeout(this.ariaAlertTimeout),Ye.ariaPostLabel=""),this},j.getAriaPostLabel=function(){return this.__controller.ariaPostLabel||""},j.clickAt=function(be,Ne,Ye){Ye=Ye||document.elementFromPoint(be,Ne);var tt=this.__controller,ot=tt.root;return m.contains(ot.jQ[0],Ye)||(Ye=ot.jQ[0]),tt.seek(k(Ye),be+pageXOffset,Ne+pageYOffset),tt.blurred&&this.focus(),this},j.ignoreNextMousedown=function(be){return this.__controller.cursor.options.ignoreNextMousedown=be,this}}),he.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},he.EditableField.prototype=V.EditableField.prototype;for(var de in ue)(function(j,xe){var be=V[j]=xe(V);he[j]=function(Ne,Ye){var tt=he(Ne);if(tt instanceof be||!Ne||!Ne.nodeType)return tt;var ot=K(be.RootBlock(),k(Ne),ie());return ot.KIND_OF_MQ=j,be(ot).__mathquillify(Ye,se)},he[j].prototype=be.prototype})(de,ue[de]);return he}function y(se){for(var he="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" "),U=0;U<he.length;U+=1)(function(V){se[V]=function(O){this.controller.handle(V,O)}})(he[U]);se.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function h(se){var he=this.parent,U=se;do{if(U[v])return se.insLeftOf(he);U=U.parent.parent}while(U!==he);se.insRightOf(he)}function p(se,he){se.jQadd=function(){he.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")}}function r(se,V,U){var V=V||se,O=Xt[se],de=Xt[V];F[se]=c(St,A,se,O,V,de),F[O]=c(St,v,se,O,V,de),qt[se]=qt[O]=U}var o,m=window.jQuery,b=Math.min,E=Math.max;if(!m)throw"MathQuill requires jQuery 1.5.2+ to be loaded first";var M=[].slice,D=(function(se,he,U){function V(j){return typeof j=="object"}function O(j){return typeof j=="function"}function de(){}return function j(xe,be){function Ne(){var ut=new Ye;return O(ut.init)&&ut.init.apply(ut,arguments),ut}function Ye(){}be===void 0&&(be=xe,xe=Object),Ne.Bare=Ye;var tt,ot=de.prototype=xe.prototype,ct=Ye.prototype=Ne.prototype=Ne.p=new de;return ct.constructor=Ne,Ne.extend=function(ut){return j(Ne,ut)},(Ne.open=function(ut){if(tt={},O(ut)?tt=ut.call(Ne,ct,ot,Ne,xe):V(ut)&&(tt=ut),V(tt))for(var ft in tt)he.call(tt,ft)&&(ct[ft]=tt[ft]);return O(ct.init)||(ct.init=xe),Ne})(be)}})(0,{}.hasOwnProperty),A=-1,v=1,k=D(m,function(se){se.insDirOf=function(he,U){return he===A?this.insertBefore(U.first()):this.insertAfter(U.last())},se.insAtDirEnd=function(he,U){return he===A?this.prependTo(U):this.appendTo(U)}}),J=D(function(se){se.parent=0,se[A]=0,se[v]=0,se.init=function(he,U,V){this.parent=he,this[A]=U,this[v]=V},this.copy=function(he){return J(he.parent,he[A],he[v])}}),X={},te=!1,H=D(function(se){function he(){return U+=1}se[A]=0,se[v]=0,se.parent=0;var U=0;this.getNodeOfElement=function(V){if(V){if(!V.nodeType)throw new Error("must pass an HTMLElement to Node.getNodeOfElement");return V.mqBlockNode||V.mqCmdNode}},this.linkElementByBlockId=function(V,O){H.linkElementByBlockNode(V,X[O])},this.linkElementByBlockNode=function(V,O){V.mqBlockNode=O},this.linkElementByCmdNode=function(V,O){V.mqCmdNode=O},se.init=function(){this.id=he(),X[U]=this,l(),this.ends={},this.ends[A]=0,this.ends[v]=0},se.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},se.jQ=k(),se.jQadd=function(V){return this.jQ=this.jQ.add(V)},se.jQize=function(V){function O(j){if(j.getAttribute){var xe=j.getAttribute("mathquill-command-id");if(xe){j.removeAttribute("mathquill-command-id");var be=X[xe];be.jQadd(j),H.linkElementByCmdNode(j,be)}var Ne=j.getAttribute("mathquill-block-id");if(Ne){j.removeAttribute("mathquill-block-id");var Ye=X[Ne];Ye.jQadd(j),H.linkElementByBlockNode(j,Ye)}}for(j=j.firstChild;j;j=j.nextSibling)O(j)}for(var V=k(V||this.html()),de=0;de<V.length;de+=1)O(V[de]);return V},se.createDir=function(V,O){t(V);var de=this;return de.jQize(),de.jQ.insDirOf(V,O.jQ),O[V]=de.adopt(O.parent,O[A],O[v]),de},se.createLeftOf=function(V){return this.createDir(A,V)},se.selectChildren=function(V,O){return re(V,O)},se.bubble=function(V){for(var O=this;O&&V(O)!==!1;O=O.parent);return this},se.postOrder=function(V){return(function O(de){de.eachChild(O),V(de)})(this),this},se.isEmpty=function(){return this.ends[A]===0&&this.ends[v]===0},se.isEmptyParens=function(){return!!this.isEmpty()&&!!this.parent&&this.parent.ctrlSeq==="\\left("},se.isStyleBlock=function(){return!1},se.children=function(){return z(this.ends[A],this.ends[v])},se.eachChild=function(V){return i(this.ends,V),this},se.foldChildren=function(V,O){return s(this.ends,V,O)},se.withDirAdopt=function(V,O,de,j){return z(this,this).withDirAdopt(V,O,de,j),this},se.adopt=function(V,O,de){return z(this,this).adopt(V,O,de),this},se.disown=function(){return z(this,this).disown(),this},se.remove=function(){return this.jQ.remove(),this.disown()},se.isParentSimpleSubscript=function(){return!!this.parent&&this.parent.parent instanceof yt&&!!this.parent.jQ.hasClass("dcg-mq-sub")},se.finalizeTree=function(){},se.contactWeld=function(){},se.blur=function(){},se.intentionalBlur=function(){},se.reflow=function(){},se.registerInnerField=function(){}}),z=D(function(se){se.init=function(he,U,V){if(V===o&&(V=A),t(V),x("no half-empty fragments",!he==!U),this.ends={},he){x("withDir is passed to Fragment",he instanceof H),x("oppDir is passed to Fragment",U instanceof H),x("withDir and oppDir have the same parent",he.parent===U.parent),this.ends[V]=he,this.ends[-V]=U;var O=this.fold([],function(de,j){return de.push.apply(de,j.jQ.get()),de});this.jQ=this.jQ.add(O)}},se.jQ=k(),se.withDirAdopt=function(he,U,V,O){return he===A?this.adopt(U,V,O):this.adopt(U,O,V)},se.adopt=function(he,U,V){g(he,U,V);var O=this;O.disowned=!1;var de=O.ends[A];if(!de)return this;var j=O.ends[v];return U||(he.ends[A]=de),V?V[A]=j:he.ends[v]=j,O.ends[v][v]=V,O.each(function(xe){xe[A]=U,xe.parent=he,U&&(U[v]=xe),U=xe}),O},se.disown=function(){var he=this,U=he.ends[A];if(!U||he.disowned)return he;he.disowned=!0;var V=he.ends[v],O=U.parent;return g(O,U[A],U),g(O,V,V[v]),U[A]?U[A][v]=V[v]:O.ends[A]=V[v],V[v]?V[v][A]=U[A]:O.ends[v]=U[A],he},se.remove=function(){return this.jQ.remove(),this.disown()},se.each=function(he){return i(this.ends,he),this},se.fold=function(he,U){return s(this.ends,he,U)}}),B={},F={},$=D(J,function(se){se.init=function(he,U,V){this.controller=V,this.parent=he,this.options=U;var O=this.jQ=this._jQ=k('<span class="dcg-mq-cursor">&#8203;</span>');this.blink=function(){O.toggleClass("dcg-mq-blink")},this.upDownCache={}},se.show=function(){return this.jQ=this._jQ.removeClass("dcg-mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[v]?this.selection&&this.selection.ends[A][A]===this[A]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[v].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},se.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=k(),this},se.withDirInsertAt=function(he,U,V,O){var de=this.parent;this.parent=U,this[he]=V,this[-he]=O,de!==U&&de.blur&&de.blur(this)},se.insDirOf=function(he,U){return t(he),this.jQ.insDirOf(he,U.jQ),this.withDirInsertAt(he,U.parent,U[he],U),this.parent.jQ.addClass("dcg-mq-hasCursor"),this},se.insLeftOf=function(he){return this.insDirOf(A,he)},se.insRightOf=function(he){return this.insDirOf(v,he)},se.insAtDirEnd=function(he,U){return t(he),this.jQ.insAtDirEnd(he,U.jQ),this.withDirInsertAt(he,U,0,U.ends[he]),U.focus(),this},se.insAtLeftEnd=function(he){return this.insAtDirEnd(A,he)},se.insAtRightEnd=function(he){return this.insAtDirEnd(v,he)},se.jumpUpDown=function(he,U){var V=this;V.upDownCache[he.id]=J.copy(V);var O=V.upDownCache[U.id];if(O)O[v]?V.insLeftOf(O[v]):V.insAtRightEnd(O.parent);else{var de=V.offset().left;U.seek(de,V)}Le.queue(U,!0)},se.offset=function(){var he=this,U=he.jQ.removeClass("dcg-mq-cursor").offset();return he.jQ.addClass("dcg-mq-cursor"),U},se.unwrapGramp=function(){var he=this.parent.parent,U=he.parent,V=he[v],O=this,de=he[A];if(he.disown().eachChild(function(j){j.isEmpty()||(j.children().adopt(U,de,V).each(function(xe){xe.jQ.insertBefore(he.jQ.first())}),de=j.ends[v])}),!this[v])if(this[A])this[v]=this[A][v];else for(;!this[v];){if(this.parent=this.parent[v],!this.parent){this[v]=he[v],this.parent=U;break}this[v]=this.parent.ends[A]}this[v]?this.insLeftOf(this[v]):this.insAtRightEnd(U),he.jQ.remove(),he[A].siblingDeleted&&he[A].siblingDeleted(O.options,v),he[v].siblingDeleted&&he[v].siblingDeleted(O.options,A)},se.startSelection=function(){for(var he=this.anticursor=J.copy(this),U=he.ancestors={},V=he;V.parent;V=V.parent)U[V.parent.id]=V},se.endSelection=function(){delete this.anticursor},se.select=function(){var he=this.anticursor;if(this[A]===he[A]&&this.parent===he.parent)return!1;for(var U=this;U.parent;U=U.parent)if(U.parent.id in he.ancestors){var V=U.parent;break}x("cursor and anticursor in the same tree",V);var O,de,j=he.ancestors[V.id],xe=v;if(U[A]!==j){for(var be=U;be;be=be[v])if(be[v]===j[v]){xe=A,O=U,de=j;break}}return xe===v&&(O=j,de=U),O instanceof J&&(O=O[v]),de instanceof J&&(de=de[A]),this.hide().selection=V.selectChildren(O,de),this.insDirOf(xe,this.selection.ends[xe]),this.selectionChanged(),!0},se.resetToEnd=function(he){this.clearSelection();var U=he.root;this[v]=0,this[A]=U.ends[v],this.parent=U},se.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},se.deleteSelection=function(){this.selection&&(this[A]=this.selection.ends[A][A],this[v]=this.selection.ends[v][v],this.selection.remove(),this.selectionChanged(),delete this.selection)},se.replaceSelection=function(){var he=this.selection;return he&&(this[A]=he.ends[A][A],this[v]=he.ends[v][v],delete this.selection),he}}),re=D(z,function(se,he){se.init=function(){he.init.apply(this,arguments),this.jQ=this.jQ.wrapAll('<span class="dcg-mq-selection"></span>').parent()},se.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),he.adopt.apply(this,arguments)},se.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},se.join=function(U,V){var O=V||"";return this.fold("",function(de,j){return de+O+j[U]()})}}),K=D(function(se){se.init=function(U,V,O){this.id=U.id,this.data={},this.root=U,this.container=V,this.options=O,this.ariaLabel="Math Input",this.ariaPostLabel="",U.controller=this,this.cursor=U.cursor=$(U,O,this)},se.handle=function(U,V){var O=this.options.handlers;if(O&&O.fns[U]){var de=O.APIClasses[this.KIND_OF_MQ](this);V===A||V===v?O.fns[U](V,de):O.fns[U](de)}};var he=[];this.onNotify=function(U){he.push(U)},se.notify=function(){for(var U=0;U<he.length;U+=1)he[U].apply(this.cursor,arguments);return this}}),ue={},ie=D(),Q={},pe=D(),ee={};u.prototype=pe.p,u.VERSION="vv1.5",u.interfaceVersion=function(se){if(se!==1)throw"Only interface version 1 supported. You specified: "+se;return d=function(){window.console&&console.warn(`You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (20142015)  v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)},d(),u},u.getInterface=f;var ae=f.MIN=1,le=f.MAX=2;u.noConflict=function(){return window.MathQuill=me,u};var me=window.MathQuill;window.MathQuill=u;var Ae=D(function(se,he,U){function V(xe,be){throw xe=xe?"'"+xe+"'":"EOF","Parse Error: "+be+" at "+xe}se.init=function(xe){this._=xe},se.parse=function(xe){function be(Ne,Ye){return Ye}return this.skip(j)._(""+xe,be,V)},se.or=function(xe){x("or is passed a parser",xe instanceof U);var be=this;return U(function(Ne,Ye,tt){function ot(ct){return xe._(Ne,Ye,tt)}return be._(Ne,Ye,ot)})},se.then=function(xe){var be=this;return U(function(Ne,Ye,tt){function ot(ct,ut){var ft=xe instanceof U?xe:xe(ut);return x("a parser is returned",ft instanceof U),ft._(ct,Ye,tt)}return be._(Ne,ot,tt)})},se.many=function(){var xe=this;return U(function(be,Ne,Ye){function tt(ut,ft){return be=ut,ct.push(ft),!0}function ot(){return!1}for(var ct=[];xe._(be,tt,ot););return Ne(be,ct)})},se.times=function(xe,be){arguments.length<2&&(be=xe);var Ne=this;return U(function(Ye,tt,ot){function ct(Et,gt){return _t.push(gt),Ye=Et,!0}function ut(Et,gt){return xt=gt,Ye=Et,!1}function ft(Et,gt){return!1}for(var xt,_t=[],It=!0,kt=0;kt<xe;kt+=1)if(!(It=Ne._(Ye,ct,ut)))return ot(Ye,xt);for(;kt<be&&It;kt+=1)It=Ne._(Ye,ct,ft);return tt(Ye,_t)})},se.result=function(xe){return this.then(de(xe))},se.atMost=function(xe){return this.times(0,xe)},se.atLeast=function(xe){var be=this;return be.times(xe).then(function(Ne){return be.many().map(function(Ye){return Ne.concat(Ye)})})},se.map=function(xe){return this.then(function(be){return de(xe(be))})},se.skip=function(xe){return this.then(function(be){return xe.result(be)})};var O=(this.string=function(xe){var be=xe.length,Ne="expected '"+xe+"'";return U(function(Ye,tt,ot){var ct=Ye.slice(0,be);return ct===xe?tt(Ye.slice(be),ct):ot(Ye,Ne)})},this.regex=function(xe){x("regexp parser is anchored",xe.toString().charAt(1)==="^");var be="expected "+xe;return U(function(Ne,Ye,tt){var ot=xe.exec(Ne);if(ot){var ct=ot[0];return Ye(Ne.slice(ct.length),ct)}return tt(Ne,be)})}),de=U.succeed=function(xe){return U(function(be,Ne){return Ne(be,xe)})},j=(U.fail=function(xe){return U(function(be,Ne,Ye){return Ye(be,xe)})},U.letter=O(/^[a-z]/i),U.letters=O(/^[a-z]*/i),U.digit=O(/^[0-9]/),U.digits=O(/^[0-9]*/),U.whitespace=O(/^\s+/),U.optWhitespace=O(/^\s*/),U.any=U(function(xe,be,Ne){return xe?be(xe.slice(1),xe.charAt(0)):Ne(xe,"expected any character")}),U.all=U(function(xe,be,Ne){return be("",xe)}),U.eof=U(function(xe,be,Ne){return xe?Ne(xe,"expected EOF"):be(xe,xe)}))}),Be=(function(){function se(U){var V,O=U.which||U.keyCode,de=he[O],j=[];return U.ctrlKey&&j.push("Ctrl"),U.originalEvent&&U.originalEvent.metaKey&&j.push("Meta"),U.altKey&&j.push("Alt"),U.shiftKey&&j.push("Shift"),V=de||String.fromCharCode(O),j.length||de?(j.push(V),j.join("-")):V}var he={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(U,V){function O(Tt){Rt=Tt,clearTimeout(It),It=setTimeout(Tt)}function de(Tt){O(function(cn){Rt=S,clearTimeout(It),Tt(cn)})}function j(){try{gt[0].select()}catch{}}function xe(Tt){Rt(),Rt=S,clearTimeout(It),gt.val(Tt),Tt&&j(),yn=!!Tt}function be(){var Tt=gt[0];return"selectionStart"in Tt&&Tt.selectionStart!==Tt.selectionEnd}function Ne(){V.options&&V.options.overrideKeystroke?V.options.overrideKeystroke(se(kt),kt):V.keystroke(se(kt),kt)}function Ye(Tt){kt=Tt,Et=null,yn&&de(function(cn){cn&&cn.type==="focusout"||j()}),Ne()}function tt(Tt){if(!Tt||!Tt.originalEvent)return!1;switch(Tt.originalEvent.key){case"ArrowRight":case"ArrowLeft":case"ArrowDown":case"ArrowUp":return!0}return!1}function ot(Tt){kt&&Et&&Ne(),Et=Tt,tt(Tt)||O(ut)}function ct(Tt){kt&&!Et&&(tt(Tt)||O(ut))}function ut(){if(!be()){var Tt=gt.val();Tt.length===1?(gt.val(""),V.options&&V.options.overrideTypedText?V.options.overrideTypedText(Tt):V.typedText(Tt)):Tt&&j()}}function ft(){kt=null,Et=null,Rt=S,clearTimeout(It),gt.val("")}function xt(Tt){gt.focus(),O(_t)}function _t(){var Tt=gt.val();gt.val(""),Tt&&V.paste(Tt)}var It,kt=null,Et=null,gt=m(U),Qt=m(V.container||gt),Rt=S;Qt.bind("keydown keypress input keyup paste",function(Tt){Rt(Tt)});var yn=!1;return V.options&&V.options.disableCopyPaste?Qt.bind({keydown:Ye,keypress:ot,keyup:ct,focusout:ft,copy:function(Tt){Tt.preventDefault()},cut:function(Tt){Tt.preventDefault()},paste:function(Tt){Tt.preventDefault()}}):Qt.bind({keydown:Ye,keypress:ot,keyup:ct,focusout:ft,cut:function(){de(function(){V.cut()})},copy:function(){de(function(){V.copy()})},paste:xt}),{select:xe}}})(),Fe=D(function(se){se.init=function(){this.jQ=m([]),m(document).ready((function(){var he=".dcg-mq-aria-alert";m(he).length||m("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-mq-aria-alert'></p>"),this.jQ=m(he)}).bind(this)),this.items=[],this.msg=""},se.queue=function(he,U){return he instanceof H&&(he=U?he.parent&&he.parent.ariaLabel&&he.ariaLabel==="block"?he.parent.ariaLabel+" "+he.mathspeak():he.ariaLabel?he.ariaLabel+" "+he.mathspeak():he.mathspeak():he.mathspeak()),this.items.push(he),this},se.queueDirOf=function(he){return t(he),this.queue(he===A?"before":"after")},se.queueDirEndOf=function(he){return t(he),this.queue(he===A?"beginning of":"end of")},se.alert=function(he){return he&&this.queue(he),this.items.length&&(this.msg=this.items.join(" ").replace(/ +(?= )/g,"").trim(),this.jQ.empty().text(this.msg)),this.clear()},se.clear=function(){return this.items.length=0,this}}),Le=Fe();K.open(function(se){se.aria=Le,se.exportMathSpeak=function(){return this.root.mathspeak()}}),K.open(function(se,he){se.exportText=function(){return this.root.foldChildren("",function(U,V){return U+V.text()})}}),K.open(function(se){this.onNotify(function(he){if(he==="edit"||he==="replace"||he===o){var U=this.controller;if(!U||!U.options.enableDigitGrouping||U.blurred!==!1)return;U.disableGroupingForSeconds(1)}}),se.disableGroupingForSeconds=function(he){clearTimeout(this.__disableGroupingTimeout);var U=this.root.jQ;he===0?U.removeClass("dcg-mq-suppress-grouping"):(U.addClass("dcg-mq-suppress-grouping"),this.__disableGroupingTimeout=setTimeout(function(){U.removeClass("dcg-mq-suppress-grouping")},1e3*he))},se.focusBlurEvents=function(){function he(){clearTimeout(O),xe.selection&&xe.selection.jQ.addClass("dcg-mq-blur"),U(),V()}function U(){xe.hide().parent.blur(),de.container.removeClass("dcg-mq-focused"),k(window).unbind("blur",he),de.options&&de.options.resetCursorOnBlur&&xe.resetToEnd(de)}function V(){var be=(de.ariaLabel+": "+j.mathspeak()+" "+de.ariaPostLabel).trim();Le.jQ.empty(),de.textarea.attr("aria-label",be),de.container.attr("aria-label",be)}var O,de=this,j=de.root,xe=de.cursor;de.textarea.focus(function(){V(),de.blurred=!1,clearTimeout(O),de.container.addClass("dcg-mq-focused"),xe.parent||xe.insAtRightEnd(j),xe.selection?(xe.selection.jQ.removeClass("dcg-mq-blur"),de.selectionChanged()):xe.show(),de.setOverflowClasses()}).blur(function(){de.textareaSelectionTimeout&&(clearTimeout(de.textareaSelectionTimeout),de.textareaSelectionTimeout=o),de.disableGroupingForSeconds(0),de.blurred=!0,O=setTimeout(function(){j.postOrder(function(be){be.intentionalBlur()}),xe.clearSelection().endSelection(),U(),V(),de.scrollHoriz()}),k(window).bind("blur",he)}),V(),de.blurred=!0,xe.hide().parent.blur()}}),K.open(function(se){se.keystroke=function(he,U){this.cursor.parent.keystroke(he,U,this)}}),H.open(function(se){se.keystroke=function(he,U,V){var O=V.cursor;switch(he){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":V.ctrlDeleteDir(A);break;case"Shift-Backspace":case"Backspace":V.backspace();break;case"Esc":case"Tab":return void V.escapeDir(v,he,U);case"Shift-Tab":case"Shift-Esc":return void V.escapeDir(A,he,U);case"End":V.notify("move").cursor.insAtRightEnd(O.parent),Le.queue("end of").queue(O.parent,!0);break;case"Ctrl-End":V.notify("move").cursor.insAtRightEnd(V.root),Le.queue("end of").queue(V.ariaLabel).queue(V.root).queue(V.ariaPostLabel);break;case"Shift-End":for(;O[v];)V.selectRight();break;case"Ctrl-Shift-End":for(;O[v]||O.parent!==V.root;)V.selectRight();break;case"Home":V.notify("move").cursor.insAtLeftEnd(O.parent),Le.queue("beginning of").queue(O.parent,!0);break;case"Ctrl-Home":V.notify("move").cursor.insAtLeftEnd(V.root),Le.queue("beginning of").queue(V.ariaLabel).queue(V.root).queue(V.ariaPostLabel);break;case"Shift-Home":for(;O[A];)V.selectLeft();break;case"Ctrl-Shift-Home":for(;O[A]||O.parent!==V.root;)V.selectLeft();break;case"Left":V.moveLeft();break;case"Shift-Left":V.selectLeft();break;case"Ctrl-Left":break;case"Right":V.moveRight();break;case"Shift-Right":V.selectRight();break;case"Ctrl-Right":break;case"Up":V.moveUp();break;case"Down":V.moveDown();break;case"Shift-Up":if(O[A])for(;O[A];)V.selectLeft();else V.selectLeft();case"Shift-Down":if(O[v])for(;O[v];)V.selectRight();else V.selectRight();case"Ctrl-Up":case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":V.ctrlDeleteDir(v);break;case"Shift-Del":case"Del":V.deleteForward();break;case"Meta-A":case"Ctrl-A":for(V.notify("move").cursor.insAtRightEnd(V.root);O[A];)V.selectLeft();break;case"Ctrl-Alt-Up":O.parent.parent&&O.parent.parent instanceof H?Le.queue(O.parent.parent):Le.queue("nothing above");break;case"Ctrl-Alt-Down":O.parent&&O.parent instanceof H?Le.queue(O.parent):Le.queue("block is empty");break;case"Ctrl-Alt-Left":O.parent.parent&&O.parent.parent.ends&&O.parent.parent.ends[A]&&O.parent.parent.ends[A]instanceof H?Le.queue(O.parent.parent.ends[A]):Le.queue("nothing to the left");break;case"Ctrl-Alt-Right":O.parent.parent&&O.parent.parent.ends&&O.parent.parent.ends[v]&&O.parent.parent.ends[v]instanceof H?Le.queue(O.parent.parent.ends[v]):Le.queue("nothing to the right");break;case"Ctrl-Alt-Shift-Down":O.selection?Le.queue(O.selection.join("mathspeak"," ").trim()+" selected"):Le.queue("nothing selected");break;case"Ctrl-Alt-=":case"Ctrl-Alt-Shift-Right":V.ariaPostLabel.length?Le.queue(V.ariaPostLabel):Le.queue("no answer");break;default:return}Le.alert(),U.preventDefault(),V.scrollHoriz()},se.moveOutOf=se.moveTowards=se.deleteOutOf=se.deleteTowards=se.unselectInto=se.selectOutOf=se.selectTowards=function(){x("overridden or never called on this node")}}),K.open(function(se){function he(U,V){var O=U.notify("upDown").cursor,de=V+"Into",j=V+"OutOf";return O[v][de]?O.insAtLeftEnd(O[v][de]):O[A][de]?O.insAtRightEnd(O[A][de]):O.parent.bubble(function(xe){var be=xe[j];if(be&&(typeof be=="function"&&(be=xe[j](O)),be instanceof H&&O.jumpUpDown(xe,be),be!==!0))return!1}),U}this.onNotify(function(U){U!=="move"&&U!=="upDown"||this.show().clearSelection()}),se.escapeDir=function(U,V,O){t(U);var de=this.cursor;if(de.parent!==this.root&&O.preventDefault(),de.parent!==this.root)return de.parent.moveOutOf(U,de),Le.alert(),this.notify("move")},Q.leftRightIntoCmdGoes=function(U){if(U&&U!=="up"&&U!=="down")throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+U+'"';return U},se.moveDir=function(U){t(U);var V=this.cursor,O=V.options.leftRightIntoCmdGoes;return V.selection?V.insDirOf(U,V.selection.ends[U]):V[U]?V[U].moveTowards(U,V,O):V.parent.moveOutOf(U,V,O),this.notify("move")},se.moveLeft=function(){return this.moveDir(A)},se.moveRight=function(){return this.moveDir(v)},se.moveUp=function(){return he(this,"up")},se.moveDown=function(){return he(this,"down")},this.onNotify(function(U){U!=="upDown"&&(this.upDownCache={})}),this.onNotify(function(U){U==="edit"&&this.show().deleteSelection()}),se.deleteDir=function(U){t(U);var V=this.cursor,O=V[U],de=V.parent.parent;if(O&&O instanceof H)O.sides?Le.queue(O.parent.chToCmd(O.sides[-U].ch).mathspeak({createdLeftOf:V})):O.blocks||O.parent.ctrlSeq==="\\text"||Le.queue(O);else if(de&&de instanceof H)if(de.sides)Le.queue(de.parent.chToCmd(de.sides[U].ch).mathspeak({createdLeftOf:V}));else if(de.blocks&&de.mathspeakTemplate)if(de.upInto&&de.downInto)Le.queue(de.mathspeakTemplate[1]);else{var j=de.mathspeakTemplate,xe=U===A?j[0]:j[j.length-1];Le.queue(xe)}else Le.queue(de);var be=V.selection;return this.notify("edit"),be||(V[U]?V[U].deleteTowards(U,V):V.parent.deleteOutOf(U,V)),V[A].siblingDeleted&&V[A].siblingDeleted(V.options,v),V[v].siblingDeleted&&V[v].siblingDeleted(V.options,A),V.parent.bubble(function(Ne){Ne.reflow()}),this},se.ctrlDeleteDir=function(U){t(U);var V=this.cursor;if(!V[U]||V.selection)return this.deleteDir(U);this.notify("edit");var O;return O=U===A?z(V.parent.ends[A],V[A]):z(V[v],V.parent.ends[v]),Le.queue(O),O.remove(),V.insAtDirEnd(U,V.parent),V[A].siblingDeleted&&V[A].siblingDeleted(V.options,v),V[v].siblingDeleted&&V[v].siblingDeleted(V.options,A),V.parent.bubble(function(de){de.reflow()}),this},se.backspace=function(){return this.deleteDir(A)},se.deleteForward=function(){return this.deleteDir(v)},this.onNotify(function(U){U!=="select"&&this.endSelection()}),se.selectDir=function(U){var V=this.notify("select").cursor,O=V.selection;t(U),V.anticursor||V.startSelection();var de=V[U];de?O&&O.ends[U]===de&&V.anticursor[-U]!==de?de.unselectInto(U,V):de.selectTowards(U,V):V.parent.selectOutOf(U,V),V.clearSelection(),V.select()||V.show(),V.selection&&Le.clear().queue(V.selection.join("mathspeak"," ").trim()+" selected")},se.selectLeft=function(){return this.selectDir(A)},se.selectRight=function(){return this.selectDir(v)}});var ze=(function(){function se(Et){var gt=_e();return Et.adopt(gt,0,0),gt}function he(Et){for(var gt=Et[0]||_e(),Qt=1;Qt<Et.length;Qt+=1)Et[Qt].children().adopt(gt,gt.ends[v],0);return gt}var U=Ae.string,V=Ae.regex,O=Ae.letter,de=Ae.digit,j=Ae.any,xe=Ae.optWhitespace,be=Ae.succeed,Ne=Ae.fail,Ye=O.map(function(Et){return N(Et)}),tt=de.map(function(Et){return Ie(Et)}),ot=V(/^[^${}\\_^]/).map(function(Et){return oe(Et)}),ct=V(/^[^\\a-eg-zA-Z]/).or(U("\\").then(V(/^[a-z]+/i).or(V(/^\s+/).result(" ")).or(j))).then(function(Et){var gt=B[Et];return gt?gt(Et).parser():Ne("unknown command: \\"+Et)}),ut=ct.or(Ye).or(tt).or(ot),ft=U("{").then(function(){return _t}).skip(U("}")),xt=xe.then(ft.or(ut.map(se))),_t=xt.many().map(he).skip(xe),It=U("[").then(xt.then(function(Et){return Et.join("latex")!=="]"?be(Et):Ne()}).many().map(he).skip(xe)).skip(U("]")),kt=_t;return kt.block=xt,kt.optBlock=It,kt})();K.open(function(se,he){se.cleanLatex=function(U){return U.replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},se.exportLatex=function(){return this.cleanLatex(this.root.latex())},se.writeLatex=function(U){var V=this.notify("edit").cursor,O=Ae.all,de=Ae.eof,j=ze.skip(de).or(O.result(!1)).parse(U);return j&&!j.isEmpty()&&(j.children().adopt(V.parent,V[A],V[v]),j.jQize().insertBefore(V.jQ),V[A]=j.ends[v],j.finalizeInsert(V.options,V),j.ends[v][v].siblingCreated&&j.ends[v][v].siblingCreated(V.options,A),j.ends[A][A].siblingCreated&&j.ends[A][A].siblingCreated(V.options,v),V.parent.bubble(function(xe){xe.reflow()})),this},se.classifyLatexForEfficientUpdate=function(U){if(typeof U=="string"){var V=U.match(/-?[0-9.]+$/g);return V&&V.length===1?{latex:U,prefix:U.substr(0,U.length-V[0].length),digits:V[0]}:void 0}},se.renderLatexMathEfficiently=function(U){var V,O,de=this.classifyLatexForEfficientUpdate(U);if(!de||(V=this.exportLatex(),!(O=this.classifyLatexForEfficientUpdate(V))||O.prefix!==de.prefix))return!1;var j=this.root,xe=O.digits,be=de.digits,Ne=!1,Ye=!1;xe[0]==="-"&&(Ne=!0,xe=xe.substr(1)),be[0]==="-"&&(Ye=!0,be=be.substr(1));for(var tt=this.root.ends[v],ot=[],ct=xe.length-1;ct>=0;ct--){if(tt.ctrlSeq!==xe[ct]||tt.parent!==j)return!1;ot.unshift(tt),tt=tt[A]}if(Ne&&!Ye){var ut=tt;if(ut.ctrlSeq!=="-"||ut[v]!==ot[0]||ut.parent!==j||ut[A]&&ut[A].parent!==j)return!1;ot[0][A]=ut[A],j.ends[A]===ut&&(j.ends[A]=ot[0]),ut[A]&&(ut[A][v]=ot[0]),ut.jQ.remove()}if(!Ne&&Ye){var ft=Te("-"),xt=document.createElement("span");xt.textContent="-",ft.jQ=k(xt),ot[0][A]&&(ot[0][A][v]=ft),j.ends[A]===ot[0]&&(j.ends[A]=ft),ft.parent=j,ft[A]=ot[0][A],ft[v]=ot[0],ot[0][A]=ft,ft.contactWeld(),ft.jQ.insertBefore(ot[0].jQ)}var _t=Math.min(xe.length,be.length);for(ct=0;ct<_t;ct++){var It=be[ct];tt=ot[ct],tt.ctrlSeq!==It&&(tt.ctrlSeq=It,tt.jQ[0].textContent=It,tt.mathspeakName=It)}if(xe.length>be.length)for(tt=ot[be.length-1],j.ends[v]=tt,tt[v]=0,ct=xe.length-1;ct>=_t;ct--)ot[ct].jQ.remove();if(be.length>xe.length){var kt=document.createDocumentFragment();for(ct=_t;ct<be.length;ct++){var Et=document.createElement("span");Et.className="dcg-mq-digit",Et.textContent=be[ct];var gt=Ie(be[ct]);gt.parent=j,gt.jQ=k(Et),kt.appendChild(Et),gt[A]=j.ends[v],gt[v]=0,gt[A][v]=gt,j.ends[v]=gt}j.jQ[0].appendChild(kt)}var Qt=this.exportLatex();if(Qt!==U)return console.warn("tried updating latex efficiently but did not work. Attempted: "+U+" but wrote: "+Qt),!1;this.cursor.resetToEnd(this);var Rt=j.ends[v];return Rt.fixDigitGrouping&&Rt.fixDigitGrouping(this.cursor.options),!0},se.renderLatexMathFromScratch=function(U){var V=this.root,O=this.cursor,de=Ae.all,j=Ae.eof,xe=ze.skip(j).or(de.result(!1)).parse(U);V.ends[A]=V.ends[v]=0,xe&&xe.children().adopt(V,0,0);var be=V.jQ;if(xe){var Ne=xe.join("html");be.html(Ne),V.jQize(be.children()),V.finalizeInsert(O.options)}else be.empty();var Ye=this.ariaLabel&&this.ariaLabel!=="Math Input"?this.ariaLabel+": ":"";this.container.attr("aria-label",Ye+V.mathspeak().trim()),delete O.selection,O.insAtRightEnd(V)},se.renderLatexMath=function(U){this.notify("replace"),this.renderLatexMathEfficiently(U)||this.renderLatexMathFromScratch(U)},se.renderLatexText=function(U){var V=this.root,O=this.cursor;V.jQ.children().slice(1).remove(),V.ends[A]=V.ends[v]=0,delete O.selection,O.show().insAtRightEnd(V);var de=Ae.regex,j=Ae.string,xe=Ae.eof,be=Ae.all,Ne=j("$").then(ze).skip(j("$").or(xe)).map(function(ft){var xt=RootMathCommand(O);xt.createBlocks();var _t=xt.ends[A];return ft.children().adopt(_t,0,0),xt}),Ye=j("\\$").result("$"),tt=Ye.or(de(/^[^$]/)).map(oe),ot=Ne.or(tt).many(),ct=ot.skip(xe).or(be.result(!1)).parse(U);if(ct){for(var ut=0;ut<ct.length;ut+=1)ct[ut].adopt(V,V.ends[v],0);V.jQize().appendTo(V.jQ),V.finalizeInsert(O.options)}}}),K.open(function(se){ie.p.ignoreNextMousedown=S;var he;this.onNotify(function(U){U!=="edit"&&U!=="replace"||he&&he.cursor===this&&he.cb()}),se.delegateMouseEvents=function(){var U=this.root.jQ;this.container.bind("mousedown.mathquill",function(V){function O(It){xt=k(It.target)}function de(It){ot.anticursor||ot.startSelection(),tt.seek(xt,It.pageX,It.pageY).cursor.select(),ot.selection&&Le.clear().queue(ot.selection.join("mathspeak")+" selected").alert(),xt=o}function j(It){Ne.unbind("mousemove",O),k(It.target.ownerDocument).unbind("mousemove",de).unbind("mouseup",be),he=o}function xe(){tt.editable?(ot.show(),Le.queue(ot.parent).alert()):ut.detach()}function be(It){ot.blink=ct,ot.selection||xe(),j(It)}var Ne=k(V.target).closest(".dcg-mq-root-block"),Ye=H.getNodeOfElement(Ne[0])||H.getNodeOfElement(U[0]),tt=Ye.controller,ot=tt.cursor,ct=ot.blink,ut=tt.textareaSpan,ft=tt.textarea;if(V.preventDefault(),V.target.unselectable=!0,!ot.options.ignoreNextMousedown(V)){ot.options.ignoreNextMousedown=S;var xt,_t;he={cursor:ot,cb:function(){_t=!0,ot.blink=ct,ot.clearSelection(),xe(),j(V)}},tt.blurred&&(tt.editable||Ne.prepend(ut),ft.focus(),_t)||(ot.blink=S,tt.seek(k(V.target),V.pageX,V.pageY).cursor.startSelection(),Ne.mousemove(O),k(V.target.ownerDocument).mousemove(de).mouseup(be))}})}}),K.open(function(se){se.seek=function(he,U,V){for(var O,de=this.notify("select").cursor,j=he&&he[0];j&&!(O=H.getNodeOfElement(j));)j=j.parentElement;return O||(O=this.root),de.clearSelection().show(),O.seek(U,de),this.scrollHoriz(),this}}),K.open(function(se){se.setOverflowClasses=function(){var he=this.root.jQ[0],U=!1,V=!1;if(!this.blurred){var O=he.getBoundingClientRect().width,de=he.scrollWidth,j=he.scrollLeft;U=de>O+j,V=j>0}he.classList.contains("dcg-mq-editing-overflow-right")!==U&&he.classList.toggle("dcg-mq-editing-overflow-right"),he.classList.contains("dcg-mq-editing-overflow-left")!==V&&he.classList.toggle("dcg-mq-editing-overflow-left")},se.scrollHoriz=function(){var he=this.cursor,U=he.selection,V=this.root.jQ[0].getBoundingClientRect();if(!he.jQ[0]&&!U)return void this.root.jQ.stop().animate({scrollLeft:0},100,(function(){this.setOverflowClasses()}).bind(this));if(U){var O=U.jQ[0].getBoundingClientRect(),de=O.left-(V.left+20),j=O.right-(V.right-20);if(U.ends[A]===he[v])if(de<0)var xe=de;else{if(!(j>0))return;if(O.left-j<V.left+20)var xe=de;else var xe=j}else if(j>0)var xe=j;else{if(!(de<0))return;if(O.right-de>V.right-20)var xe=j;else var xe=de}}else{var be=he.jQ[0].getBoundingClientRect().left;if(be>V.right-20)var xe=be-(V.right-20);else{if(!(be<V.left+20))return;var xe=be-(V.left+20)}}var Ne=this.root.jQ[0];xe<0&&Ne.scrollLeft===0||xe>0&&Ne.scrollWidth<=Ne.scrollLeft+V.width||this.root.jQ.stop().animate({scrollLeft:"+="+xe},100,(function(){this.setOverflowClasses()}).bind(this))}}),K.open(function(se){ie.p.substituteTextarea=function(){return k("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true/>")[0]},se.createTextarea=function(){var he=this.textareaSpan=k('<span class="dcg-mq-textarea"></span>'),U=this.options.substituteTextarea();if(!U.nodeType)throw"substituteTextarea() must return a DOM element, got "+U;U=this.textarea=k(U).appendTo(he);var V=this;V.cursor.selectionChanged=function(){V.selectionChanged()}},se.selectionChanged=function(){var he=this;he.textareaSelectionTimeout===o&&(he.textareaSelectionTimeout=setTimeout(function(){he.setTextareaSelection()}))},se.setTextareaSelection=function(){this.textareaSelectionTimeout=o;var he="";this.cursor.selection&&(he=this.cleanLatex(this.cursor.selection.join("latex")),this.options.statelessClipboard&&(he="$"+he+"$")),this.selectFn(he)},se.staticMathTextareaEvents=function(){function he(){j.detach(),U.blurred=!0}var U=this,V=U.root,O=U.cursor,de=U.textarea,j=U.textareaSpan;this.container.prepend('<span aria-hidden="true" class="dcg-mq-selectable">$'+U.exportLatex()+"$</span>"),U.blurred=!0,de.bind("cut paste",!1),U.options.disableCopyPaste?de.bind("copy",!1):de.bind("copy",function(){U.setTextareaSelection()}),de.focus(function(){U.blurred=!1}).blur(function(){O.selection&&O.selection.clear(),setTimeout(he)}),U.selectFn=function(Ye){de.val(Ye),Ye&&de.select()};var xe=U&&U.ariaLabel!=="Math Input"?U.ariaLabel+": ":"";U.container.attr("aria-label",xe+V.mathspeak().trim());var be=navigator.userAgent||navigator.vendor||window.opera,Ne=/iPad|iPhone|iPod/.test(be)&&!window.Stream;navigator.appVersion.indexOf("Mac")!==-1&&!Ne||U.container.attr("role","math")},ie.p.substituteKeyboardEvents=Be,se.editablesTextareaEvents=function(){var he=this,U=he.textarea,V=he.textareaSpan,O=this.options.substituteKeyboardEvents(U,this);this.selectFn=function(de){O.select(de)},this.container.prepend(V),this.focusBlurEvents()},se.typedText=function(he){if(he===`
`)return this.handle("enter");var U=this.notify().cursor;U.parent.write(U,he),this.scrollHoriz()},se.cut=function(){var he=this,U=he.cursor;U.selection&&setTimeout(function(){he.notify("edit"),U.parent.bubble(function(V){V.reflow()}),he.options&&he.options.onCut&&he.options.onCut()})},se.copy=function(){this.setTextareaSelection()},se.paste=function(he){this.options.statelessClipboard&&(he=he.slice(0,1)==="$"&&he.slice(-1)==="$"?he.slice(1,-1):"\\text{"+he+"}"),this.writeLatex(he).cursor.show(),this.scrollHoriz(),this.options&&this.options.onPaste&&this.options.onPaste()}});var We=D(H,function(se,he){se.finalizeInsert=function(U,V){var O=this;O.postOrder(function(de){de.finalizeTree(U)}),O.postOrder(function(de){de.contactWeld(V)}),O.postOrder(function(de){de.blur()}),O.postOrder(function(de){de.reflow()}),O[v].siblingCreated&&O[v].siblingCreated(U,A),O[A].siblingCreated&&O[A].siblingCreated(U,v),O.bubble(function(de){de.reflow()})}}),Z=D(We,function(se,he){se.init=function(U,V,O){var de=this;he.init.call(de),de.ctrlSeq||(de.ctrlSeq=U),V&&(de.htmlTemplate=V),O&&(de.textTemplate=O)},se.replaces=function(U){U.disown(),this.replacedFragment=U},se.isEmpty=function(){return this.foldChildren(!0,function(U,V){return U&&V.isEmpty()})},se.parser=function(){var U=ze.block,V=this;return U.times(V.numBlocks()).map(function(O){V.blocks=O;for(var de=0;de<O.length;de+=1)O[de].adopt(V,V.ends[v],0);return V})},se.createLeftOf=function(U){var V=this,O=V.replacedFragment;V.createBlocks(),he.createLeftOf.call(V,U),O&&(O.adopt(V.ends[A],0,0),O.jQ.appendTo(V.ends[A].jQ)),V.finalizeInsert(U.options),V.placeCursor(U)},se.createBlocks=function(){for(var U=this,V=U.numBlocks(),O=U.blocks=Array(V),de=0;de<V;de+=1)(O[de]=_e()).adopt(U,U.ends[v],0)},se.placeCursor=function(U){U.insAtRightEnd(this.foldChildren(this.ends[A],function(V,O){return V.isEmpty()?V:O}))},se.moveTowards=function(U,V,O){var de=O&&this[O+"Into"];V.insAtDirEnd(-U,de||this.ends[-U]),Le.queueDirEndOf(-U).queue(V.parent,!0)},se.deleteTowards=function(U,V){this.isEmpty()?V[U]=this.remove()[U]:this.moveTowards(U,V,null)},se.selectTowards=function(U,V){V[-U]=this,V[U]=this[U]},se.selectChildren=function(){return re(this,this)},se.unselectInto=function(U,V){V.insAtDirEnd(-U,V.anticursor.ancestors[this.id])},se.seek=function(U,V){function O(be){var Ne={};return Ne[A]=be.jQ.offset().left,Ne[v]=Ne[A]+be.jQ.outerWidth(),Ne}var de=this,j=O(de);if(U<j[A])return V.insLeftOf(de);if(U>j[v])return V.insRightOf(de);var xe=j[A];de.eachChild(function(be){var Ne=O(be);return U<Ne[A]?(U-xe<Ne[A]-U?be[A]?V.insAtRightEnd(be[A]):V.insLeftOf(de):V.insAtLeftEnd(be),!1):U>Ne[v]?void(be[v]?xe=Ne[v]:j[v]-U<U-Ne[v]?V.insRightOf(de):V.insAtRightEnd(be)):(be.seek(U,V),!1)})},se.numBlocks=function(){var U=this.htmlTemplate.match(/&\d+/g);return U?U.length:0},se.html=function(){var U=this,V=U.blocks,O=" mathquill-command-id="+U.id,de=U.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);x("no unmatched angle brackets",de.join("")===this.htmlTemplate);for(var j=0,xe=de[0];xe;j+=1,xe=de[j])if(xe.slice(-2)==="/>")de[j]=xe.slice(0,-2)+O+' aria-hidden="true"/>';else if(xe.charAt(0)==="<"){x("not an unmatched top-level close tag",xe.charAt(1)!=="/"),de[j]=xe.slice(0,-1)+O+' aria-hidden="true">';var be=1;do j+=1,xe=de[j],x("no missing close tags",xe),xe.slice(0,2)==="</"?be-=1:xe.charAt(0)==="<"&&xe.slice(-2)!=="/>"&&(be+=1);while(be>0)}return de.join("").replace(/>&(\d+)/g,function(Ne,Ye){return" mathquill-block-id="+V[Ye].id+' aria-hidden="true">'+V[Ye].join("html")})},se.latex=function(){return this.foldChildren(this.ctrlSeq,function(U,V){return U+"{"+(V.latex()||" ")+"}"})},se.textTemplate=[""],se.text=function(){var U=this,V=0;return U.foldChildren(U.textTemplate[V],function(O,de){V+=1;var j=de.text();return O&&U.textTemplate[V]==="("&&j[0]==="("&&j.slice(-1)===")"?O+j.slice(1,-1)+U.textTemplate[V]:O+j+(U.textTemplate[V]||"")})},se.mathspeakTemplate=[],se.mathspeak=function(){var U=this,V=0;return U.foldChildren(U.mathspeakTemplate[V]||"Start"+U.ctrlSeq+" ",function(O,de){return V+=1,O+" "+de.mathspeak()+" "+(U.mathspeakTemplate[V]+" "||"End"+U.ctrlSeq+" ")})}}),C=D(Z,function(se,he){se.init=function(U,V,O,de){!O&&U&&(O=U.replace(/^\\/,"")),this.mathspeakName=de||O,he.init.call(this,U,V,[O])},se.parser=function(){return Ae.succeed(this)},se.numBlocks=function(){return 0},se.replaces=function(U){U.remove()},se.createBlocks=S,se.moveTowards=function(U,V){V.jQ.insDirOf(U,this.jQ),V[-U]=this,V[U]=this[U],Le.queue(this)},se.deleteTowards=function(U,V){V[U]=this.remove()[U]},se.seek=function(U,V){U-this.jQ.offset().left<this.jQ.outerWidth()/2?V.insLeftOf(this):V.insRightOf(this)},se.latex=function(){return this.ctrlSeq},se.text=function(){return this.textTemplate.join("")},se.mathspeak=function(){return this.mathspeakName},se.placeCursor=S,se.isEmpty=function(){return!0}}),oe=D(C,function(se,he){se.init=function(U,V,O){he.init.call(this,U,"<span>"+(V||U)+"</span>",o,O)}}),ge=D(C,function(se,he){se.init=function(U,V,O,de){he.init.call(this,U,'<span class="dcg-mq-binary-operator">'+V+"</span>",O,de)}}),_e=D(We,function(se,he){se.join=function(U){return this.foldChildren("",function(V,O){return V+O[U]()})},se.html=function(){return this.join("html")},se.latex=function(){return this.join("latex")},se.text=function(){return this.ends[A]===this.ends[v]&&this.ends[A]!==0?this.ends[A].text():this.join("text")},se.mathspeak=function(){var U="",V={};return this.controller&&(V=this.controller.options.autoOperatorNames),this.foldChildren([],function(O,de){if(de.isPartOfOperator)U+=de.mathspeak();else{if(U!==""){if(V!=={}&&V._maxLength>0){var j=V[U.toLowerCase()];typeof j=="string"&&(U=j)}O.push(U+" "),U=""}var xe=de.mathspeak(),be=de.ctrlSeq;isNaN(be)&&(xe=" "+xe,be!=="."&&(xe+=" ")),O.push(xe)}return O}).join("").replace(/ +(?= )/g,"")},se.ariaLabel="block",se.keystroke=function(U,V,O){return!O.options.spaceBehavesLikeTab||U!=="Spacebar"&&U!=="Shift-Spacebar"?he.keystroke.apply(this,arguments):(V.preventDefault(),void O.escapeDir(U==="Shift-Spacebar"?A:v,U,V))},se.moveOutOf=function(U,V,O){O&&this.parent[O+"Into"]||!this[U]?(V.insDirOf(U,this.parent),Le.queueDirOf(U).queue(this.parent)):(V.insAtDirEnd(-U,this[U]),Le.queueDirEndOf(-U).queue(V.parent,!0))},se.selectOutOf=function(U,V){V.insDirOf(U,this.parent)},se.deleteOutOf=function(U,V){V.unwrapGramp()},se.seek=function(U,V){var O=this.ends[v];if(!O||O.jQ.offset().left+O.jQ.outerWidth()<U)return V.insAtRightEnd(this);if(U<this.ends[A].jQ.offset().left)return V.insAtLeftEnd(this);for(;U<O.jQ.offset().left;)O=O[A];return O.seek(U,V)},se.chToCmd=function(U,V){var O;return U.match(/^[a-eg-zA-Z]$/)?N(U):/^\d$/.test(U)?Ie(U):V&&V.typingSlashWritesDivisionSymbol&&U==="/"?B[""](U):V&&V.typingAsteriskWritesTimesSymbol&&U==="*"?B[""](U):V&&V.typingPercentWritesPercentOf&&U==="%"?B.percentof(U):(O=F[U]||B[U])?O(U):oe(U)},se.write=function(U,V){var O=this.chToCmd(V,U.options);U.selection&&O.replaces(U.replaceSelection()),O.createLeftOf(U.show()),V==="/"?Le.alert("over"):Le.alert(O.mathspeak({createdLeftOf:U}))},se.focus=function(){return this.jQ.addClass("dcg-mq-hasCursor"),this.jQ.removeClass("dcg-mq-empty"),this},se.blur=function(){return this.jQ.removeClass("dcg-mq-hasCursor"),this.isEmpty()&&(this.jQ.addClass("dcg-mq-empty"),this.isEmptyParens()&&this.jQ.addClass("dcg-mq-empty-parens")),this}});ue.StaticMath=function(se){return D(se.AbstractMathQuill,function(he,U){this.RootBlock=_e,he.__mathquillify=function(V,O){return this.config(V),U.__mathquillify.call(this,"dcg-mq-math-mode"),this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents(),this},he.init=function(){U.init.apply(this,arguments);var V=this.innerFields=[];this.__controller.root.postOrder(function(O){O.registerInnerField(V,se.MathField)})},he.latex=function(){var V=U.latex.apply(this,arguments);if(arguments.length>0){var O=this.innerFields=[];this.__controller.root.postOrder(function(de){de.registerInnerField(O,se.MathField)})}return V},he.setAriaLabel=function(V){this.__controller.ariaLabel=typeof V=="string"?V:"";var O=this.__controller.ariaLabel!=="Math Input"?this.__controller.ariaLabel+": ":"";return this.__controller.container.attr("aria-label",O+this.__controller.root.mathspeak().trim()),this},he.getAriaLabel=function(){return this.__controller.ariaLabel||""}})};var De=D(_e,y);ue.MathField=function(se){return D(se.EditableField,function(he,U){this.RootBlock=De,he.__mathquillify=function(V,O){return this.config(V),O>1&&(this.__controller.root.reflow=S),U.__mathquillify.call(this,"dcg-mq-editable-field dcg-mq-math-mode"),delete this.__controller.root.reflow,this}})};var je=D(C,function(se,he){se.finalizeTree=se.siblingDeleted=se.siblingCreated=function(U,V){V!==A&&this[v]instanceof je||this.fixDigitGrouping(U)},se.fixDigitGrouping=function(U){if(U.enableDigitGrouping){var V=this,O=this,de=0,j=[],xe=V;do if(/^[0-9]$/.test(xe.ctrlSeq))V=xe;else if(xe.ctrlSeq==="\\ ")V=xe,de+=1;else{if(xe.ctrlSeq!==".")break;V=xe,j.push(xe)}while(xe=V[A]);for(;xe=O[v];)if(/^[0-9]$/.test(xe.ctrlSeq))O=xe;else if(xe.ctrlSeq==="\\ ")O=xe,de+=1;else{if(xe.ctrlSeq!==".")break;O=xe,j.push(xe)}for(;O!==V&&V.ctrlSeq==="\\ ";)V=V[v],de-=1;for(;O!==V&&O.ctrlSeq==="\\ ";)O=O[A],de-=1;(V!==O||V.ctrlSeq!=="\\ ")&&(de>0||j.length>1?this.removeGroupingBetween(V,O):j[0]?(j[0]!==V&&this.addGroupingBetween(j[0][A],V),j[0]!==O&&this.removeGroupingBetween(j[0][v],O)):this.addGroupingBetween(O,V))}},se.removeGroupingBetween=function(U,V){var O=U;do if(O.setGroupingClass(o),O===V)break;while(O=O[v])},se.addGroupingBetween=function(U,V){for(var j=U,O=0,de=0,j=U;j&&(de+=1,j!==V);)j=j[A];var xe=de%3;xe===0&&(xe=3);for(var j=U;j;){O+=1;var be=o;if(de>=4&&(O===de?be="dcg-mq-group-leading-"+xe:O%3==0&&O!==de&&(be="dcg-mq-group-start"),be||(be="dcg-mq-group-other")),j.setGroupingClass(be),j===V)break;j=j[A]}},se.setGroupingClass=function(U){this._groupingClass!==U&&(this._groupingClass&&this.jQ.removeClass(this._groupingClass),U&&this.jQ.addClass(U),this._groupingClass=U)}}),Ie=D(je,function(se,he){se.init=function(U,V,O){he.init.call(this,U,'<span class="dcg-mq-digit">'+(V||U)+"</span>",o,O)},se.createLeftOf=function(U){U.options.autoSubscriptNumerals&&U.parent!==U.parent.parent.sub&&(U[A]instanceof Oe&&U[A].isItalic!==!1||U[A]instanceof yt&&U[A][A]instanceof Oe&&U[A][A].isItalic!==!1)?(B._().createLeftOf(U),he.createLeftOf.call(this,U),U.insRightOf(U.parent.parent)):he.createLeftOf.call(this,U)},se.mathspeak=function(U){if(U&&U.createdLeftOf){var V=U.createdLeftOf;if(V.options.autoSubscriptNumerals&&V.parent!==V.parent.parent.sub&&(V[A]instanceof Oe&&V[A].isItalic!==!1||V[A]instanceof yt&&V[A][A]instanceof Oe&&V[A][A].isItalic!==!1))return"Subscript "+he.mathspeak.call(this)+" Baseline"}return he.mathspeak.apply(this,arguments)}}),Oe=D(C,function(se,he){se.init=function(U,V){he.init.call(this,U,"<var>"+(V||U)+"</var>")},se.text=function(){var U=this.ctrlSeq;return this.isPartOfOperator?U[0]=="\\"?U=U.slice(1,U.length):U[U.length-1]==" "&&(U=U.slice(0,-1)):(!this[A]||this[A]instanceof Oe||this[A]instanceof ge||this[A].ctrlSeq==="\\ "||(U="*"+U),!this[v]||this[v]instanceof ge||this[v]instanceof yt||(U+="*")),U},se.mathspeak=function(){var U=this.ctrlSeq;return this.isPartOfOperator||U.length!==1?he.mathspeak.call(this):'"'+U+'"'}});ie.p.autoCommands={_maxLength:0},Q.autoCommands=function(se){if(!/^[a-z]+(?: [a-z]+)*$/i.test(se))throw'"'+se+'" not a space-delimited list of only letters';for(var he=se.split(" "),U={},V=0,O=0;O<he.length;O+=1){var de=he[O];if(de.length<2)throw'autocommand "'+de+'" not minimum length of 2';if(B[de]===ht)throw'"'+de+'" is a built-in operator name';U[de]=1,V=E(V,de.length)}return U._maxLength=V,U},ie.p.autoParenthesizedFunctions={_maxLength:0},Q.autoParenthesizedFunctions=function(se){if(!/^[a-z]+(?: [a-z]+)*$/i.test(se))throw'"'+se+'" not a space-delimited list of only letters';for(var he=se.split(" "),U={},V=0,O=0;O<he.length;O+=1){var de=he[O];if(de.length<2)throw'autocommand "'+de+'" not minimum length of 2';U[de]=1,V=E(V,de.length)}return U._maxLength=V,U};var N=D(Oe,function(se,he){function U(V){return!V||V.ctrlSeq==="."||V instanceof ge||V instanceof Pt}se.init=function(V){return he.init.call(this,this.letter=V)},se.checkAutoCmds=function(V){var O=V.options.autoCommands,de=O._maxLength;if(de>0){for(var j="",xe=this,be=0;xe instanceof N&&xe.ctrlSeq===xe.letter&&be<de;)j=xe.letter+j,xe=xe[A],be+=1;for(;j.length;){if(O.hasOwnProperty(j)){for(var be=1,xe=this;be<j.length;be+=1,xe=xe[A]);return z(xe,this).remove(),V[A]=xe[A],B[j](j).createLeftOf(V)}j=j.slice(1)}}},se.autoParenthesize=function(V){var O=V.parent.ends[v];if(!(O&&O instanceof St&&O.ctrlSeq==="\\left("||this.isParentSimpleSubscript())){for(var de="",j=this,xe=0,be=V.options.autoParenthesizedFunctions,Ne=be._maxLength,Ye=V.options.autoOperatorNames;j instanceof N&&xe<Ne;)de=j.letter+de,j=j[A],xe+=1;for(;de.length;){if(be.hasOwnProperty(de)&&Ye.hasOwnProperty(de))return V.parent.write(V,"(");de=de.slice(1)}}},se.createLeftOf=function(V){he.createLeftOf.apply(this,arguments),this.checkAutoCmds(V),this.autoParenthesize(V)},se.italicize=function(V){return this.isItalic=V,this.isPartOfOperator=!V,this.jQ.toggleClass("dcg-mq-operator-name",!V),this},se.finalizeTree=se.siblingDeleted=se.siblingCreated=function(V,O){O!==A&&this[v]instanceof N||this.autoUnItalicize(V)},se.autoUnItalicize=function(V){var O=V.autoOperatorNames;if(O._maxLength!==0&&!this.isParentSimpleSubscript()){for(var de=this.letter,j=this[A];j instanceof N;j=j[A])de=j.letter+de;for(var xe=this[v];xe instanceof N;xe=xe[v])de+=xe.letter;z(j[v]||this.parent.ends[A],xe[A]||this.parent.ends[v]).each(function(It){It.italicize(!0).jQ.removeClass("dcg-mq-first dcg-mq-last dcg-mq-followed-by-supsub"),It.ctrlSeq=It.letter});e:for(var be=0,Ne=j[v]||this.parent.ends[A];be<de.length;be+=1,Ne=Ne[v])for(var Ye=b(O._maxLength,de.length-be);Ye>0;Ye-=1){var tt=de.slice(be,be+Ye);if(O.hasOwnProperty(tt)){for(var ot=0,ct=Ne;ot<Ye;ot+=1,ct=ct[v]){ct.italicize(!1);var ut=ct}var ft=Pe.hasOwnProperty(tt);if(Ne.ctrlSeq=(ft?"\\":"\\operatorname{")+Ne.ctrlSeq,ut.ctrlSeq+=ft?" ":"}",$e.hasOwnProperty(tt)&&ut[A][A][A].jQ.addClass("dcg-mq-last"),U(Ne[A])||Ne.jQ.addClass("dcg-mq-first"),!U(ut[v]))if(ut[v]instanceof yt){var xt=ut[v],_t=xt.siblingCreated=xt.siblingDeleted=function(){xt.jQ.toggleClass("dcg-mq-after-operator-name",!(xt[v]instanceof St))};_t()}else ut.jQ.toggleClass("dcg-mq-last",!(ut[v]instanceof St));be+=Ye-1,Ne=ut;continue e}}}}}),Pe={},Xe=ie.p.autoOperatorNames={_maxLength:9},$e={limsup:1,liminf:1,projlim:1,injlim:1};(function(){for(var se="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),he=0;he<se.length;he+=1)Pe[se[he]]=Xe[se[he]]=1;for(var U="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),he=0;he<U.length;he+=1)Pe[U[he]]=1;for(var V="sin cos tan sec cosec csc cotan cot ctg".split(" "),he=0;he<V.length;he+=1)Xe[V[he]]=Xe["arc"+V[he]]=Xe[V[he]+"h"]=Xe["ar"+V[he]+"h"]=Xe["arc"+V[he]+"h"]=1;for(var O="gcf hcf lcm proj span".split(" "),he=0;he<O.length;he+=1)Xe[O[he]]=1})(),Q.autoOperatorNames=function(se){if(typeof se!="string")throw'"'+se+'" not a space-delimited list';if(!/^[a-z\|\-]+(?: [a-z\|\-]+)*$/i.test(se))throw'"'+se+'" not a space-delimited list of letters or "|"';for(var he=se.split(" "),U={},V=0,O=0;O<he.length;O+=1){var de=he[O];if(de.length<2)throw'"'+de+'" not minimum length of 2';if(de.indexOf("|")<0)U[de]=de,V=E(V,de.length);else{var j=de.split("|");if(j.length>2)throw'"'+de+'" has more than 1 mathspeak delimiter';if(j[0].length<2)throw'"'+de[0]+'" not minimum length of 2';U[j[0]]=j[1].replace(/-/g," "),V=E(V,j[0].length)}}return U._maxLength=V,U};var ht=D(C,function(se,he){se.init=function(U){this.ctrlSeq=U},se.createLeftOf=function(U){for(var V=this.ctrlSeq,O=0;O<V.length;O+=1)N(V.charAt(O)).createLeftOf(U)},se.parser=function(){for(var U=this.ctrlSeq,V=_e(),O=0;O<U.length;O+=1)N(U.charAt(O)).adopt(V,V.ends[v],0);return Ae.succeed(V.children())}});for(var ye in Xe)Xe.hasOwnProperty(ye)&&(B[ye]=ht);B.operatorname=D(Z,function(se){se.createLeftOf=S,se.numBlocks=function(){return 1},se.parser=function(){return ze.block.map(function(he){var U=!0,V="",O=he.children();return O.each(function(de){de instanceof N?V+=de.letter:U=!1}),U&&V==="ans"?B[V](V):O})}}),B.f=D(N,function(se,he){se.init=function(){C.p.init.call(this,this.letter="f",'<var class="dcg-mq-f">f</var>')},se.italicize=function(U){return this.jQ.html("f").toggleClass("dcg-mq-f",U),he.italicize.apply(this,arguments)}}),B[" "]=B.space=D(je,function(se,he){se.init=function(){he.init.call(this,"\\ ","<span>&nbsp;</span>"," ")}}),B["."]=D(je,function(se,he){se.init=function(){he.init.call(this,".",'<span class="dcg-mq-digit">.</span>',".")}}),B["'"]=B.prime=c(oe,"'","&prime;","prime"),B[""]=B.dprime=c(oe,"","&Prime;","double prime"),B.backslash=c(oe,"\\backslash ","\\","backslash"),F["\\"]||(F["\\"]=B.backslash),B.$=c(oe,"\\$","$","dollar"),B.square=c(oe,"\\square ","","square"),B.mid=c(oe,"\\mid ","","mid");var Ue=D(C,function(se,he){se.init=function(U,V){he.init.call(this,U,'<span class="dcg-mq-nonSymbola">'+(V||U)+"</span>")}});B["@"]=Ue,B["&"]=c(Ue,"\\&","&amp;","and"),B["%"]=D(Ue,function(se,he){se.init=function(){he.init.call(this,"\\%","%","percent")},se.parser=function(){var U=Ae.optWhitespace,V=Ae.string;return U.then(V("\\operatorname{of}").map(function(){return B.percentof()})).or(he.parser.call(this))}}),B[""]=B.parallel=c(oe,"\\parallel ","&#x2225;","parallel"),B[""]=B.nparallel=c(oe,"\\nparallel ","&#x2226;","not parallel"),B[""]=B.perp=c(oe,"\\perp ","&#x27C2;","perpendicular"),B.alpha=B.beta=B.gamma=B.delta=B.zeta=B.eta=B.theta=B.iota=B.kappa=B.mu=B.nu=B.xi=B.rho=B.sigma=B.tau=B.chi=B.psi=B.omega=D(Oe,function(se,he){se.init=function(U){he.init.call(this,"\\"+U+" ","&"+U+";")}}),B.phi=c(Oe,"\\phi ","&#981;","phi"),B.phiv=B.varphi=c(Oe,"\\varphi ","&phi;","phi"),B.epsilon=c(Oe,"\\epsilon ","&#1013;","epsilon"),B.epsiv=B.varepsilon=c(Oe,"\\varepsilon ","&epsilon;","epsilon"),B.piv=B.varpi=c(Oe,"\\varpi ","&piv;","piv"),B.sigmaf=B.sigmav=B.varsigma=c(Oe,"\\varsigma ","&sigmaf;","sigma"),B.thetav=B.vartheta=B.thetasym=c(Oe,"\\vartheta ","&thetasym;","theta"),B.upsilon=B.upsi=c(Oe,"\\upsilon ","&upsilon;","upsilon"),B.gammad=B.Gammad=B.digamma=c(Oe,"\\digamma ","&#989;","gamma"),B.kappav=B.varkappa=c(Oe,"\\varkappa ","&#1008;","kappa"),B.rhov=B.varrho=c(Oe,"\\varrho ","&#1009;","rho"),B.pi=B.=c(Ue,"\\pi ","&pi;","pi"),B.lambda=c(Ue,"\\lambda ","&lambda;","lambda"),B.Upsilon=B.Upsi=B.upsih=B.Upsih=c(C,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>',"capital upsilon"),B.Gamma=B.Delta=B.Theta=B.Lambda=B.Xi=B.Pi=B.Sigma=B.Phi=B.Psi=B.Omega=B.forall=D(oe,function(se,he){se.init=function(U){he.init.call(this,"\\"+U+" ","&"+U+";")}});var we=D(Z,function(se){se.init=function(he){this.latex=he},se.createLeftOf=function(he){var U=ze.parse(this.latex);U.children().adopt(he.parent,he[A],he[v]),he[A]=U.ends[v],U.jQize().insertBefore(he.jQ),U.finalizeInsert(he.options,he),U.ends[v][v].siblingCreated&&U.ends[v][v].siblingCreated(he.options,A),U.ends[A][A].siblingCreated&&U.ends[A][A].siblingCreated(he.options,v),he.parent.bubble(function(V){V.reflow()})},se.mathspeak=function(){return ze.parse(this.latex).mathspeak()},se.parser=function(){var he=ze.parse(this.latex).children();return Ae.succeed(he)}});B[""]=c(we,"^0"),B[""]=c(we,"^1"),B[""]=c(we,"^2"),B[""]=c(we,"^3"),B[""]=c(we,"^4"),B[""]=c(we,"^5"),B[""]=c(we,"^6"),B[""]=c(we,"^7"),B[""]=c(we,"^8"),B[""]=c(we,"^9"),B[""]=c(we,"\\frac14"),B[""]=c(we,"\\frac12"),B[""]=c(we,"\\frac34"),B[""]=c(we,"\\sqrt{}");var Te=D(ge,function(se){se.init=oe.prototype.init,se.contactWeld=se.siblingCreated=se.siblingDeleted=function(he,U){function V(O){return O[A]?O[A]instanceof ge||/^(\\ )|[,;:\(\[]$/.test(O[A].ctrlSeq)?"":"dcg-mq-binary-operator":O.parent&&O.parent.parent&&O.parent.parent.isStyleBlock()?V(O.parent.parent):""}if(U!==v)return this.jQ[0].className=V(this),this}});B["+"]=c(Te,"+","+","plus"),B[""]=B[""]=B[""]=B["-"]=c(Te,"-","&minus;","minus"),B[""]=B.pm=B.plusmn=B.plusminus=c(Te,"\\pm ","&plusmn;","plus-or-minus"),B.mp=B.mnplus=B.minusplus=c(Te,"\\mp ","&#8723;","minus-or-plus"),F["*"]=B.sdot=B.cdot=c(ge,"\\cdot ","&middot;","*","times");var qe=D(ge,function(se,he){se.init=function(U,V){this.data=U,this.strict=V;var O=V?"Strict":"";he.init.call(this,U["ctrlSeq"+O],U["html"+O],U["text"+O],U["mathspeak"+O])},se.swap=function(U){this.strict=U;var V=U?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+V],this.jQ.html(this.data["html"+V]),this.textTemplate=[this.data["text"+V]],this.mathspeakName=this.data["mathspeak"+V]},se.deleteTowards=function(U,V){if(U===A&&!this.strict)return this.swap(!0),void this.bubble(function(O){O.reflow()});he.deleteTowards.apply(this,arguments)}}),He={ctrlSeq:"\\le ",html:"&le;",text:"",mathspeak:"less than or equal to",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<",mathspeakStrict:"less than"},Se={ctrlSeq:"\\ge ",html:"&ge;",text:"",mathspeak:"greater than or equal to",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">",mathspeakStrict:"greater than"};B["<"]=B.lt=c(qe,He,!0),B[">"]=B.gt=c(qe,Se,!0),B[""]=B.le=B.leq=c(qe,He,!1),B[""]=B.ge=B.geq=c(qe,Se,!1),B.infty=B.infin=B.infinity=c(oe,"\\infty ","&infin;","infinity"),B[""]=B.ne=B.neq=c(ge,"\\ne ","&ne;","not equal");var Ce=D(ge,function(se,he){se.init=function(){he.init.call(this,"=","=","=","equals")},se.createLeftOf=function(U){if(U[A]instanceof qe&&U[A].strict)return U[A].swap(!1),void U[A].bubble(function(V){V.reflow()});he.createLeftOf.apply(this,arguments)}});B["="]=Ce,B[""]=B.times=c(ge,"\\times ","&times;","[x]","times"),B[""]=B.div=B.divide=B.divides=c(ge,"\\div ","&divide;","[/]","over");var Re=D(ge,function(se,he){se.init=function(){he.init.call(this,"\\sim ","~","~","tilde")},se.createLeftOf=function(U){if(U[A]instanceof Re){var V=U[A];return U[A]=V[A],V.remove(),Ve().createLeftOf(U),void U[A].bubble(function(O){O.reflow()})}he.createLeftOf.apply(this,arguments)}}),Ve=D(ge,function(se,he){se.init=function(){he.init.call(this,"\\approx ","&approx;","","approximately equal")},se.deleteTowards=function(U,V){if(U===A){var O=V[A];return z(O,this).remove(),V[A]=O[A],Re().createLeftOf(V),void V[A].bubble(function(de){de.reflow()})}he.deleteTowards.apply(this,arguments)}});F["~"]=B.sim=Re,B[""]=B.approx=Ve;var rt={sqrt:{html:'<svg preserveAspectRatio="none" viewBox="0 0 32 54"><path d="M0 33 L7 27 L12.5 47 L13 47 L30 0 L32 0 L13 54 L11 54 L4.5 31 L0 33" /></svg>'},"|":{width:".4em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M4.4 0 L4.4 54 L5.6 54 L5.6 0" /></svg>'},"[":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 11 24"><path d="M8 0 L3 0 L3 24 L8 24 L8 23 L4 23 L4 1 L8 1" /></svg>'},"]":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 11 24"><path d="M3 0 L8 0 L8 24 L3 24 L3 23 L7 23 L7 1 L3 1" /></svg>'},"(":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="3 0 106 186"><path d="M85 0 A61 101 0 0 0 85 186 L75 186 A75 101 0 0 1 75 0" /></svg>'},")":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="3 0 106 186"><path d="M24 0 A61 101 0 0 1 24 186 L34 186 A75 101 0 0 0 34 0" /></svg>'},"{":{width:".7em",html:'<svg preserveAspectRatio="none" viewBox="10 0 210 350"><path d="M170 0 L170 6 A47 52 0 0 0 123 60 L123 127 A35 48 0 0 1 88 175 A35 48 0 0 1 123 223 L123 290 A47 52 0 0 0 170 344 L170 350 L160 350 A58 49 0 0 1 102 301 L103 220 A45 40 0 0 0 58 180 L58 170 A45 40 0 0 0 103 130 L103 49 A58 49 0 0 1 161 0" /></svg>'},"}":{width:".7em",html:'<svg preserveAspectRatio="none" viewBox="10 0 210 350"><path d="M60 0 L60 6 A47 52 0 0 1 107 60 L107 127 A35 48 0 0 0 142 175 A35 48 0 0 0 107 223 L107 290 A47 52 0 0 1 60 344 L60 350 L70 350 A58 49 0 0 0 128 301 L127 220 A45 40 0 0 1 172 180 L172 170 A45 40 0 0 1 127 130 L127 49 A58 49 0 0 0 70 0" /></svg>'},"&#8741;":{width:".7em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M3.2 0 L3.2 54 L4 54 L4 0 M6.8 0 L6.8 54 L6 54 L6 0" /></svg>'},"&lang;":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M6.8 0 L3.2 27 L6.8 54 L7.8 54 L4.2 27 L7.8 0" /></svg>'},"&rang;":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M3.2 0 L6.8 27 L3.2 54 L2.2 54 L5.8 27 L2.2 0" /></svg>'}},at=D(Z,function(se,he){se.init=function(U,V,O,de){he.init.call(this,U,"<"+V+" "+O+">&0</"+V+">"),se.ariaLabel=de||U.replace(/^\\/,""),se.mathspeakTemplate=["Start"+se.ariaLabel+",","End"+se.ariaLabel]}});B.mathrm=c(at,"\\mathrm","span",'class="dcg-mq-roman dcg-mq-font"',"Roman Font"),B.mathit=c(at,"\\mathit","i",'class="dcg-mq-font"',"Italic Font"),B.mathbf=c(at,"\\mathbf","b",'class="dcg-mq-font"',"Bold Font"),B.mathsf=c(at,"\\mathsf","span",'class="dcg-mq-sans-serif dcg-mq-font"',"Serif Font"),B.mathtt=c(at,"\\mathtt","span",'class="dcg-mq-monospace dcg-mq-font"',"Math Text"),B.underline=c(at,"\\underline","span",'class="dcg-mq-non-leaf dcg-mq-underline"',"Underline"),B.overline=B.bar=c(at,"\\overline","span",'class="dcg-mq-non-leaf dcg-mq-overline"',"Overline"),B.overrightarrow=c(at,"\\overrightarrow","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-right"',"Over Right Arrow"),B.overleftarrow=c(at,"\\overleftarrow","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-left"',"Over Left Arrow"),B.overleftrightarrow=c(at,"\\overleftrightarrow ","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-leftright"',"Over Left and Right Arrow"),B.overarc=c(at,"\\overarc","span",'class="dcg-mq-non-leaf dcg-mq-overarc"',"Over Arc");var yt=(B.textcolor=D(Z,function(se,he){se.setColor=function(U){this.color=U,this.htmlTemplate='<span class="dcg-mq-textcolor" style="color:'+U+'">&0</span>'},se.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},se.parser=function(){var U=this,V=Ae.optWhitespace,O=Ae.string,de=Ae.regex;return V.then(O("{")).then(de(/^[#\w\s.,()%-]*/)).skip(O("}")).then(function(j){return U.setColor(j),he.parser.call(U)})},se.isStyleBlock=function(){return!0}}),B.class=D(Z,function(se,he){se.parser=function(){var U=this,V=Ae.string,O=Ae.regex;return Ae.optWhitespace.then(V("{")).then(O(/^[-\w\s\\\xA0-\xFF]*/)).skip(V("}")).then(function(de){return U.cls=de||"",U.htmlTemplate='<span class="dcg-mq-class '+de+'">&0</span>',he.parser.call(U)})},se.latex=function(){return"\\class{"+this.cls+"}{"+this.blocks[0].latex()+"}"},se.isStyleBlock=function(){return!0}}),D(Z,function(se,he){se.ctrlSeq="_{...}^{...}",se.createLeftOf=function(U){if(this.replacedFragment||U[A]||!U.options.supSubsRequireOperand)return he.createLeftOf.apply(this,arguments)},se.contactWeld=function(U){for(var V=A;V;V=V===A&&v)if(this[V]instanceof yt){for(var O="sub";O;O=O==="sub"&&"sup"){var de=this[O],j=this[V][O];if(de){if(j)if(de.isEmpty())var xe=J(j,0,j.ends[A]);else{de.jQ.children().insAtDirEnd(-V,j.jQ);var be=de.children().disown(),xe=J(j,be.ends[v],j.ends[A]);V===A?be.adopt(j,j.ends[v],0):be.adopt(j,0,j.ends[A])}else this[V].addBlock(de.disown());this.placeCursor=(function(Ne,Ye){return function(tt){tt.insAtDirEnd(-V,Ne||Ye)}})(j,de)}}this.remove(),U&&U[A]===this&&(V===v&&xe?xe[A]?U.insRightOf(xe[A]):U.insAtLeftEnd(xe.parent):U.insRightOf(this[V]));break}},ie.p.charsThatBreakOutOfSupSub="",se.finalizeTree=function(){this.ends[A].write=function(U,V){if(U.options.autoSubscriptNumerals&&this===this.parent.sub){if(V==="_")return;var O=this.chToCmd(V,U.options);return O instanceof C?U.deleteSelection():U.clearSelection().insRightOf(this.parent),O.createLeftOf(U.show()),void Le.queue("Baseline").alert(O.mathspeak({createdLeftOf:U}))}U[A]&&!U[v]&&!U.selection&&U.options.charsThatBreakOutOfSupSub.indexOf(V)>-1&&(U.insRightOf(this.parent),Le.queue("Baseline")),_e.p.write.apply(this,arguments)}},se.moveTowards=function(U,V,O){V.options.autoSubscriptNumerals&&!this.sup?V.insDirOf(U,this):he.moveTowards.apply(this,arguments)},se.deleteTowards=function(U,V){if(V.options.autoSubscriptNumerals&&this.sub){var O=this.sub.ends[-U];O instanceof C?O.remove():O&&O.deleteTowards(U,V.insAtDirEnd(-U,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(A,V.insAtLeftEnd(this.sub)),this.sup&&V.insDirOf(-U,this))}else he.deleteTowards.apply(this,arguments)},se.latex=function(){function U(V,O){var de=O&&O.latex();return O?V+"{"+(de||" ")+"}":""}return U("_",this.sub)+U("^",this.sup)},se.addBlock=function(U){this.supsub==="sub"?(this.sup=this.upInto=this.sub.upOutOf=U,U.adopt(this,this.sub,0).downOutOf=this.sub,U.jQ=k('<span class="dcg-mq-sup"/>').append(U.jQ.children()).prependTo(this.jQ),H.linkElementByBlockNode(U.jQ[0],U)):(this.sub=this.downInto=this.sup.downOutOf=U,U.adopt(this,0,this.sup).upOutOf=this.sup,U.jQ=k('<span class="dcg-mq-sub"></span>').append(U.jQ.children()).appendTo(this.jQ.removeClass("dcg-mq-sup-only")),H.linkElementByBlockNode(U.jQ[0],U),this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));for(var V=0;V<2;V+=1)(function(O,de,j,xe){O[de].deleteOutOf=function(be,Ne){if(Ne.insDirOf(this[be]?-be:be,this.parent),!this.isEmpty()){var Ye=this.ends[be];this.children().disown().withDirAdopt(be,Ne.parent,Ne[be],Ne[-be]).jQ.insDirOf(-be,Ne.jQ),Ne[-be]=Ye}O.supsub=j,delete O[de],delete O[xe+"Into"],O[j][xe+"OutOf"]=h,delete O[j].deleteOutOf,de==="sub"&&k(O.jQ.addClass("dcg-mq-sup-only")[0].lastChild).remove(),this.remove()}})(this,"sub sup".split(" ")[V],"sup sub".split(" ")[V],"down up".split(" ")[V])}}));B.subscript=B._=D(yt,function(se,he){se.supsub="sub",se.htmlTemplate='<span class="dcg-mq-supsub dcg-mq-non-leaf"><span class="dcg-mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',se.textTemplate=["_"],se.mathspeakTemplate=["Subscript,",", Baseline"],se.ariaLabel="subscript",se.finalizeTree=function(){this.downInto=this.sub=this.ends[A],this.sub.upOutOf=h,he.finalizeTree.call(this)}}),B.superscript=B.supscript=B["^"]=D(yt,function(se,he){se.supsub="sup",se.htmlTemplate='<span class="dcg-mq-supsub dcg-mq-non-leaf dcg-mq-sup-only"><span class="dcg-mq-sup">&0</span></span>',se.textTemplate=["^"],se.mathspeakTemplate=["Superscript,",", Baseline"],se.ariaLabel="superscript",se.finalizeTree=function(){this.upInto=this.sup=this.ends[v],this.sup.downOutOf=h,he.finalizeTree.call(this)}});var Pt=D(Z,function(se,he){se.init=function(U,V,O){se.ariaLabel=O||ctrlSeq.replace(/^\\/,"");var de='<span class="dcg-mq-large-operator dcg-mq-non-leaf"><span class="dcg-mq-to"><span>&1</span></span><big>'+V+'</big><span class="dcg-mq-from"><span>&0</span></span></span>';C.prototype.init.call(this,U,de)},se.createLeftOf=function(U){he.createLeftOf.apply(this,arguments),U.options.sumStartsWithNEquals&&(N("n").createLeftOf(U),Ce().createLeftOf(U))},se.latex=function(){function U(V){return"{"+(V||" ")+"}"}return this.ctrlSeq+"_"+U(this.ends[A].latex())+"^"+U(this.ends[v].latex())},se.mathspeak=function(){return"Start "+this.ariaLabel+" from "+this.ends[A].mathspeak()+" to "+this.ends[v].mathspeak()+", end "+this.ariaLabel+", "},se.parser=function(){for(var U=Ae.string,V=Ae.optWhitespace,O=Ae.succeed,de=ze.block,j=this,xe=j.blocks=[_e(),_e()],be=0;be<xe.length;be+=1)xe[be].adopt(j,j.ends[v],0);return V.then(U("_").or(U("^"))).then(function(Ne){var Ye=xe[Ne==="_"?0:1];return de.then(function(tt){return tt.children().adopt(Ye,Ye.ends[v],0),O(j)})}).many().result(j)},se.finalizeTree=function(){this.ends[A].ariaLabel="lower bound",this.ends[v].ariaLabel="upper bound",this.downInto=this.ends[A],this.upInto=this.ends[v],this.ends[A].upOutOf=this.ends[v],this.ends[v].downOutOf=this.ends[A]}});B[""]=B.sum=B.summation=c(Pt,"\\sum ","&sum;","sum"),B[""]=B.prod=B.product=c(Pt,"\\prod ","&prod;","product"),B.coprod=B.coproduct=c(Pt,"\\coprod ","&#8720;","co product"),B[""]=B.int=B.integral=D(Pt,function(se,he){se.init=function(){se.ariaLabel="integral",C.prototype.init.call(this,"\\int ",'<span class="dcg-mq-int dcg-mq-non-leaf"><big>&int;</big><span class="dcg-mq-supsub dcg-mq-non-leaf"><span class="dcg-mq-sup"><span class="dcg-mq-sup-inner">&1</span></span><span class="dcg-mq-sub">&0</span><span style="display:inline-block;width:0">&#8203</span></span></span>',"integral")},se.createLeftOf=Z.p.createLeftOf});var vt=B.frac=B.dfrac=B.cfrac=B.fraction=D(Z,function(se,he){se.ctrlSeq="\\frac",se.htmlTemplate='<span class="dcg-mq-fraction dcg-mq-non-leaf"><span class="dcg-mq-numerator">&0</span><span class="dcg-mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',se.textTemplate=["(",")/(",")"],se.finalizeTree=function(){this.upInto=this.ends[v].upOutOf=this.ends[A],this.downInto=this.ends[A].downOutOf=this.ends[v],this.ends[A].ariaLabel="numerator",this.ends[v].ariaLabel="denominator",this.getFracDepth()>1?this.mathspeakTemplate=["StartNestedFraction,","NestedOver",", EndNestedFraction"]:this.mathspeakTemplate=["StartFraction,","Over",", EndFraction"]},se.mathspeak=function(U){return U&&U.createdLeftOf?U.createdLeftOf.parent.mathspeak():he.mathspeak.apply(this,arguments)},se.getFracDepth=function(){var U=function(V,O){return V instanceof H&&V.ctrlSeq&&V.ctrlSeq.toLowerCase().search("frac")>=0&&(O+=1),V.parent?U(V.parent,O):O};return U(this,0)}}),At=B.over=F["/"]=D(vt,function(se,he){se.createLeftOf=function(U){if(!this.replacedFragment){var V=U[A];if(!U.options.typingSlashCreatesNewFraction)for(;V&&!(V instanceof ge||V instanceof(B.text||S)||V instanceof Pt||V.ctrlSeq==="\\ "||/^[,;:]$/.test(V.ctrlSeq));)V=V[A];V instanceof Pt&&V[v]instanceof yt&&(V=V[v],V[v]instanceof yt&&V[v].ctrlSeq!=V.ctrlSeq&&(V=V[v])),V!==U[A]&&(this.replaces(z(V[v]||U.parent.ends[A],U[A])),U[A]=V)}he.createLeftOf.call(this,U)}});B.ans=D(C,function(se,he){se.init=function(U){he.init.call(this,"\\operatorname{ans}",'<span class="dcg-mq-ans">ans</span>',"ans")}}),B.percent=B.percentof=D(C,function(se,he){se.init=function(){he.init.call(this,"\\%\\operatorname{of}",'<span class="dcg-mq-nonSymbola dcg-mq-operator-name">% of </span>',"percent of")}});var Ut=B.sqrt=D(Z,function(se,he){se.ctrlSeq="\\sqrt",se.htmlTemplate='<span class="dcg-mq-non-leaf dcg-mq-sqrt-container"><span class="dcg-mq-scaled dcg-mq-sqrt-prefix">'+rt.sqrt.html+'</span><span class="dcg-mq-non-leaf dcg-mq-sqrt-stem">&0</span></span>',se.textTemplate=["sqrt(",")"],se.mathspeakTemplate=["StartRoot,",", EndRoot"],se.ariaLabel="root",se.parser=function(){return ze.optBlock.then(function(U){return ze.block.map(function(V){var O=Dt();return O.blocks=[U,V],U.adopt(O,0,0),V.adopt(O,U,0),O})}).or(he.parser.call(this))}}),Dt=(B.hat=D(Z,function(se,he){se.ctrlSeq="\\hat",se.htmlTemplate='<span class="dcg-mq-non-leaf"><span class="dcg-mq-hat-prefix">^</span><span class="dcg-mq-hat-stem">&0</span></span>',se.textTemplate=["hat(",")"]}),B.nthroot=D(Ut,function(se,he){se.htmlTemplate='<span class="dcg-mq-nthroot-container dcg-mq-non-leaf"><sup class="dcg-mq-nthroot dcg-mq-non-leaf">&0</sup><span class="dcg-mq-scaled dcg-mq-sqrt-container"><span class="dcg-mq-sqrt-prefix dcg-mq-scaled">'+rt.sqrt.html+'</span><span class="dcg-mq-sqrt-stem dcg-mq-non-leaf">&1</span></span></span>',se.textTemplate=["sqrt[","](",")"],se.latex=function(){return"\\sqrt["+this.ends[A].latex()+"]{"+this.ends[v].latex()+"}"},se.mathspeak=function(){var U=this.ends[A].mathspeak(),V=this.ends[v].mathspeak();return this.ends[A].ariaLabel="Index",this.ends[v].ariaLabel="Radicand",U==="3"?"Start Cube Root, "+V+", End Cube Root":"Root Index "+U+", Start Root, "+V+", End Root"}})),on=(B.cbrt=D(Dt,function(se,he){se.createLeftOf=function(U){he.createLeftOf.apply(this,arguments),Ie("3").createLeftOf(U),U.controller.moveRight()}}),D(Z,function(se,he){se.init=function(U,V,O){var de='<span class="dcg-mq-non-leaf"><span class="dcg-mq-diacritic-above">'+V+'</span><span class="dcg-mq-diacritic-stem">&0</span></span>';he.init.call(this,U,de,O)}}));B.vec=c(on,"\\vec","&rarr;",["vec(",")"]),B.tilde=c(on,"\\tilde","~",["tilde(",")"]);var St=D(D(Z,p),function(se,he){se.init=function(U,V,O,de,j){he.init.call(this,"\\left"+de,o,[V,O]),this.side=U,this.sides={},this.sides[A]={ch:V,ctrlSeq:de},this.sides[v]={ch:O,ctrlSeq:j}},se.numBlocks=function(){return 1},se.html=function(){var U=this.getSymbol(A),V=this.getSymbol(v);return this.htmlTemplate='<span class="dcg-mq-non-leaf dcg-mq-bracket-container"><span style="width:'+U.width+'" class="dcg-mq-scaled dcg-mq-bracket-l dcg-mq-paren'+(this.side===v?" dcg-mq-ghost":"")+'">'+U.html+'</span><span style="margin-left:'+U.width+";margin-right:"+V.width+'" class="dcg-mq-bracket-middle dcg-mq-non-leaf">&0</span><span style="width:'+V.width+'" class="dcg-mq-scaled dcg-mq-bracket-r dcg-mq-paren'+(this.side===A?" dcg-mq-ghost":"")+'">'+V.html+"</span></span>",he.html.call(this)},se.getSymbol=function(U){return rt[this.sides[U||v].ch]||{width:"0",html:""}},se.latex=function(){return"\\left"+this.sides[A].ctrlSeq+this.ends[A].latex()+"\\right"+this.sides[v].ctrlSeq},se.mathspeak=function(U){var V=this.sides[A].ch,O=this.sides[v].ch;if(V==="|"&&O==="|")this.mathspeakTemplate=["StartAbsoluteValue,",", EndAbsoluteValue"],this.ariaLabel="absolute value";else{if(U&&U.createdLeftOf&&this.side){var de="";return this.side===A?de=this.textTemplate[0]:this.side===v&&(de=this.textTemplate[1]),(this.side===A?"left ":"right ")+qt[de]}this.mathspeakTemplate=["left "+qt[V]+",",", right "+qt[O]],this.ariaLabel=qt[V]+" block"}return he.mathspeak.call(this)},se.matchBrack=function(U,V,O){return O instanceof St&&O.side&&O.side!==-V&&(!U.restrictMismatchedBrackets||Xt[this.sides[this.side].ch]===O.sides[O.side].ch||{"(":"]","[":")"}[this.sides[A].ch]===O.sides[v].ch)&&O},se.closeOpposing=function(U){U.side=0,U.sides[this.side]=this.sides[this.side];var V=U.delimjQs.eq(this.side===A?0:1).removeClass("dcg-mq-ghost");this.replaceBracket(V,this.side)},se.createLeftOf=function(U){if(!this.replacedFragment){var V=U.options;if(this.sides[A].ch==="|")var O=this.matchBrack(V,v,U[v])||this.matchBrack(V,A,U[A])||this.matchBrack(V,0,U.parent.parent);else var O=this.matchBrack(V,-this.side,U[-this.side])||this.matchBrack(V,-this.side,U.parent.parent)}if(O){var de=this.side=-O.side;this.closeOpposing(O),O===U.parent.parent&&U[de]&&z(U[de],U.parent.ends[de],-de).disown().withDirAdopt(-de,O.parent,O,O[de]).jQ.insDirOf(de,O.jQ),O.bubble(function(j){j.reflow()})}else O=this,de=O.side,O.replacedFragment?O.side=0:U[-de]&&(O.replaces(z(U[-de],U.parent.ends[-de],de)),U[-de]=0),he.createLeftOf.call(O,U);de===A?U.insAtLeftEnd(O.ends[A]):U.insRightOf(O)},se.placeCursor=S,se.unwrap=function(){this.ends[A].children().disown().adopt(this.parent,this,this[v]).jQ.insertAfter(this.jQ),this.remove()},se.deleteSide=function(U,V,O){var de=this.parent,j=this[U],xe=de.ends[U];if(U===this.side)return this.unwrap(),void(j?O.insDirOf(-U,j):O.insAtDirEnd(U,de));var be=O.options,Ne=!this.side;if(this.side=-U,this.matchBrack(be,U,this.ends[A].ends[this.side])){this.closeOpposing(this.ends[A].ends[this.side]);var Ye=this.ends[A].ends[U];this.unwrap(),Ye.siblingCreated&&Ye.siblingCreated(O.options,U),j?O.insDirOf(-U,j):O.insAtDirEnd(U,de)}else{if(this.matchBrack(be,U,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(V&&Ne)return this.unwrap(),void(j?O.insDirOf(-U,j):O.insAtDirEnd(U,de));this.sides[U]={ch:Xt[this.sides[this.side].ch],ctrlSeq:Xt[this.sides[this.side].ctrlSeq]};var tt=this.delimjQs.removeClass("dcg-mq-ghost").eq(U===A?0:1).addClass("dcg-mq-ghost");this.replaceBracket(tt,U)}if(j){var Ye=this.ends[A].ends[U];z(j,xe,-U).disown().withDirAdopt(-U,this.ends[A],Ye,0).jQ.insAtDirEnd(U,this.ends[A].jQ.removeClass("dcg-mq-empty")),Ye.siblingCreated&&Ye.siblingCreated(O.options,U),O.insDirOf(-U,j)}else V?O.insDirOf(U,this):O.insAtDirEnd(U,this.ends[A])}},se.replaceBracket=function(U,V){var O=this.getSymbol(V);U.html(O.html).css("width",O.width),V===A?U.next().css("margin-left",O.width):U.prev().css("margin-right",O.width)},se.deleteTowards=function(U,V){this.deleteSide(-U,!1,V)},se.finalizeTree=function(){this.ends[A].deleteOutOf=function(U,V){this.parent.deleteSide(U,!0,V)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===A?1:0).removeClass("dcg-mq-ghost"),this.side=0}},se.siblingCreated=function(U,V){V===-this.side&&this.finalizeTree()}}),Xt={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "},qt={"&lang;":"angle-bracket","&rang;":"angle-bracket","|":"pipe"};r("(",null,"parenthesis"),r("[",null,"bracket"),r("{","\\{","brace"),B.langle=c(St,A,"&lang;","&rang;","\\langle ","\\rangle "),B.rangle=c(St,v,"&lang;","&rang;","\\langle ","\\rangle "),F["|"]=c(St,A,"|","|","|","|"),B.lVert=c(St,A,"&#8741;","&#8741;","\\lVert ","\\rVert "),B.rVert=c(St,v,"&#8741;","&#8741;","\\lVert ","\\rVert "),B.left=D(Z,function(se){se.parser=function(){var he=Ae.regex,U=Ae.string,V=(Ae.succeed,Ae.optWhitespace);return V.then(he(/^(?:[([|]|\\\{|\\langle\b|\\lVert\b)/)).then(function(O){var de=O.replace(/^\\/,"");return O=="\\langle"&&(de="&lang;",O+=" "),O=="\\lVert"&&(de="&#8741;",O+=" "),ze.then(function(j){return U("\\right").skip(V).then(he(/^(?:[\])|]|\\\}|\\rangle\b|\\rVert\b)/)).map(function(xe){var be=xe.replace(/^\\/,"");xe=="\\rangle"&&(be="&rang;",xe+=" "),xe=="\\rVert"&&(be="&#8741;",xe+=" ");var Ne=St(0,de,be,O,xe);return Ne.blocks=[j],j.adopt(Ne,0,0),Ne})})})}}),B.right=D(Z,function(se){se.parser=function(){return Ae.fail("unmatched \\right")}});var bn=B.binom=B.binomial=D(D(Z,p),function(se,he){var U=rt["("],V=rt[")"];se.ctrlSeq="\\binom",se.htmlTemplate='<span class="dcg-mq-non-leaf dcg-mq-bracket-container"><span style="width:'+U.width+'" class="dcg-mq-paren dcg-mq-bracket-l dcg-mq-scaled">'+U.html+'</span><span style="margin-left:'+U.width+"; margin-right:"+V.width+';" class="dcg-mq-non-leaf dcg-mq-bracket-middle"><span class="dcg-mq-array dcg-mq-non-leaf"><span>&0</span><span>&1</span></span></span><span style="width:'+V.width+'" class="dcg-mq-paren dcg-mq-bracket-r dcg-mq-scaled">'+V.html+"</span></span>",se.textTemplate=["choose(",",",")"],se.mathspeakTemplate=["StartBinomial,","Choose",", EndBinomial"],se.ariaLabel="binomial"});B.choose=D(bn,function(se){se.createLeftOf=At.prototype.createLeftOf}),B.editable=B.MathQuillMathField=D(Z,function(se,he){se.ctrlSeq="\\MathQuillMathField",se.htmlTemplate='<span class="dcg-mq-editable-field"><span class="dcg-mq-root-block">&0</span></span>',se.parser=function(){var U=this,V=Ae.string,O=Ae.regex,de=Ae.succeed;return V("[").then(O(/^[a-z][a-z0-9]*/i)).skip(V("]")).map(function(j){U.name=j}).or(de()).then(he.parser.call(U))},se.finalizeTree=function(U){var V=K(this.ends[A],this.jQ,U);V.KIND_OF_MQ="MathField",V.editable=!0,V.createTextarea(),V.editablesTextareaEvents(),V.cursor.insAtRightEnd(V.root),y(V.root)},se.registerInnerField=function(U,V){U.push(U[this.name]=V(this.ends[A].controller))},se.latex=function(){return this.ends[A].latex()},se.text=function(){return this.ends[A].text()}});var Fn=B.embed=D(C,function(se,he){se.setOptions=function(U){function V(){return""}return this.text=U.text||V,this.htmlTemplate=U.htmlString||"",this.latex=U.latex||V,this},se.parser=function(){var U=this,V=Ae.string,O=Ae.regex,de=Ae.succeed;return V("{").then(O(/^[a-z][a-z0-9]*/i)).skip(V("}")).then(function(j){return V("[").then(O(/^[-\w\s]*/)).skip(V("]")).or(de()).map(function(xe){return U.setOptions(ee[j](xe))})})}}),sn=f(1);for(var tn in sn)(function(se,he){typeof he=="function"?(u[se]=function(){return d(),he.apply(this,arguments)},u[se].prototype=he.prototype):u[se]=he})(tn,sn[tn])})(),P("mathquill_src",["jquery"],function(){}),P("text",{load:function(S){throw new Error("Dynamic load not allowed: "+S)}}),P("lib/inject-css",["require","underscore"],function(S){function c(n,i){var s=t[n];if(!s){s=document.createElement("style"),t[n]=s;var g=x.sortedIndex(l,n),d=t[l[g]];d?document.head.insertBefore(s,d):document.head.appendChild(s),l.splice(g,0,n)}s.textContent=i}var x=S("underscore"),t={},l=[];return c}),P("vendor/css",{}),P("lib/prefix-css",["require","vendor/css"],function(S){function c(g,d){if(d){var u="."+d;return x(u),t(g,u)}return g}function x(g){if(!/\.-?[_a-zA-Z]+[_a-zA-Z0-9-]*/.test(g))throw new Error("Illegal css selector prefix "+g)}function t(g,d){var u=s.parse(g),f=Object.assign({},u,{stylesheet:l(u.stylesheet,d)});return s.stringify(f)}function l(g,d){return Object.assign({},g,{rules:n(g.rules,d)})}function n(g,d){return g.map(function(u){return u.rules?Object.assign({},u,{rules:n(u.rules,d)}):u.selectors?Object.assign({},u,{selectors:i(u.selectors,d)}):u})}function i(g,d){for(var u=[],f=0;f<g.length;f++){var y=g[f];if(y==="html")u.push(y);else if(/dcg(-mq)?-aria-alert/.test(y))u.push(y);else if(/^html body( |$)/.test(y))u.push("html"+d+" body"+y.slice(9)),u.push("html body "+d+y.slice(9));else{if(/^html/.test(y))throw new Error("Cannot correctly prefix selector "+y);u.push(d+" "+y)}}return u}var s=S("vendor/css");return c}),P("loadcss",{load:function(S){throw new Error("Dynamic load not allowed: "+S)}}),P("loadcss!Symbola-basic",function(){}),P("loadcss!vendor_css/mathquill/mathquill-basic",function(){}),P("toplevel/mathquill",["require","testbridge","mathquill_src","loadcss!Symbola-basic","loadcss!vendor_css/mathquill/mathquill-basic"],function(S){return S("testbridge"),S("mathquill_src"),S("loadcss!Symbola-basic"),S("loadcss!vendor_css/mathquill/mathquill-basic"),window.MathQuill.noConflict()}),P("lib/parse-query-params",["require","exports"],function(S,c){Object.defineProperty(c,"__esModule",{value:!0}),c.getQueryParams=function(){var x="";try{x=location.search,x[0]=="?"&&(x=x.slice(1))}catch{}for(var t=x.split("&"),l={},n=0,i=t;n<i.length;n++){var s=i[n],g=s.split("=");g.length==2?l[g[0]]=decodeURIComponent(g[1]):l[g[0]]=!0}return l}}),P("config",["require","exports","core/lib/deepCopy","lib/parse-query-params"],function(S,c,x,t){function l(h){return i[h]}function n(){return x.default(i)}Object.defineProperty(c,"__esModule",{value:!0});var i={},s=t.getQueryParams();if(typeof G<"u"&&G.config)for(var g in G.config)G.config.hasOwnProperty(g)&&(s[g]=G.config[g]);var d=function(h){return s.hasOwnProperty(h)},u=function(h){i[h]=d(h)},f=function(h){i[h]=!d("no"+h)};u("testing"),u("maintenance"),u("disableScrollFix"),u("nativeOnscreenKeypad"),u("hidden"),u("disableMouseInteractions"),u("advancedStyling"),u("authorIDE"),u("clickableObjects"),u("outofdom"),s.lang&&(i.lang=s.lang),s.fontSize&&(i.fontSize=s.fontSize),s.backgroundColor&&(i.backgroundColor="#"+s.backgroundColor),s.textColor&&(i.textColor="#"+s.textColor),i.no_navigation_warning=d("noconcat")||d("testing"),i.previewMessage="You're previewing some new accessibility features.",i.previewFeedbackUrl="mailto:feedback@desmos.com";var y=location&&location.hostname==="preview.desmos.com";i.previewMode=d("previewMode")||y,u("lockViewport"),u("administerSecretFolders"),u("clickableObjects"),u("degreeMode"),u("clearIntoDegreeMode"),u("plaidMode"),u("editOnWeb"),u("crossOriginSaveTest"),u("showResetButtonOnGraphpaper"),u("transparentBackground"),f("links"),f("trace"),u("expressionsCollapsed"),u("invertedColors"),u("projectorMode"),f("images"),f("folders"),f("settingsMenu"),f("expressionsTopbar"),f("zoomButtons"),f("keypad"),f("graphpaper"),f("expressions"),f("expressionsTopbar"),f("settingsMenu"),f("branding"),f("pointsOfInterest"),f("plotSingleVariableImplicitEquations"),f("plotImplicits"),f("plotInequalities"),f("notes"),f("sliders"),u("pauseWhenOffscreen"),u("worksheetSVG"),u("sciKeypad"),u("4fnKeypad"),u("ans"),d("braille")&&(i.braille=!0),f("qwertyKeyboard"),u("restrictedFunctions"),f("functionDefinition"),u("singleExpression"),u("restrictedEditing"),u("replaceCommaWith10Exp"),u("replaceRoundWithReciprocal"),d("typingAsteriskWritesTimesSymbol")&&(i.typingAsteriskWritesTimesSymbol=!0),f("labels"),u("bare-i18n"),f("distributions"),i["4fnKeypad"]?u("decimalToFraction"):f("decimalToFraction"),u("3d"),d("exponentButtonForSquareRoot")?i.additionalFunctions=["exponent"]:s.additionalFunctions&&typeof s.additionalFunctions=="string"&&(i.additionalFunctions=s.additionalFunctions.split(",")),c.get=l,c.all=n}),P("mathquill",["require","browser","jquery","toplevel/mathquill","config"],function(S){var c=S("browser"),x=S("jquery"),t=S("toplevel/mathquill").getInterface(1),l=S("config"),n=["erf|error-function","TTest|t-test ttest|t-test TScore|t-score tscore|t-score","iTTest|independent-t-test ittest|independent-t-test IndependentTTest","TScore|t-score Tscore|t-score tscore|t-score","normaldist|normal-distribution tdist|t-distribution poissondist|poisson-distribution","binomialdist|binomial-distribution","uniformdist|uniform-distribution","pdf cdf random inverseCdf inversecdf","histogram dotplot boxplot","pdf cdf","histogram dotplot boxplot"].join(" "),i=["cube sphere cone dodecahedron octahedron tetrahedron"].join(" ");return t.config({leftRightIntoCmdGoes:"up",sumStartsWithNEquals:!0,supSubsRequireOperand:!0,charsThatBreakOutOfSupSub:"+-=<>*",autoCommands:"alpha beta sqrt theta phi pi tau nthroot cbrt sum prod int ans percent infinity infty",autoSubscriptNumerals:!0,restrictMismatchedBrackets:!0,typingPercentWritesPercentOf:!0,substituteTextarea:function(){return c.IS_IOS||c.IS_ANDROID?x('<span class="dcg-mathquill-input-span" tabindex=0 role="textbox" style="display:inline-block;height:1px;width:1px">')[0]:c.IS_WINDOWS&&c.IS_TOUCH?x("<textarea readonly>").on("keydown",function(){this.readOnly=!1,this.select()}).on("blur",function(){this.readOnly=!0})[0]:x("<textarea>")[0]},autoOperatorNames:["exp|exponent ln|natural-log log","total length mean median quantile quartile nCr nPr stats","stdev|standard-deviation stddev|standard-deviation","stdDev|standard-deviation stdevp|standard-deviation-population","stddevp|standard-deviation-population stdDevP|standard-deviation-population mad var|variance","varp|variance-population variance cov|co-variance corr|correlation spearman","lcm mcm gcd mcd gcf mod ceil|ceiling floor round abs|absolute-value min max sign|signum signum","sin|sine cos|cosine tan|tangent csc|co-secant sec|secant cot|co-tangent","sinh|hyperbolic-sine cosh|hyperbolic-cosine tanh|hyperbolic-tangent csch|hyperbolic-co-secant","sech|hyperbolic-secant coth|hyperbolic-co-tangent","arcsin|arc-sine arccos|arc-cosine arctan|arc-tangent arccsc|arc-co-secant arcsec|arc-secant","arccot|arc-co-tangent","arcsinh|hyperbolic-arc-sine arccosh|hyperbolic-arc-cosine arctanh|hyperbolic-arc-co-tangent","arccsch|hyperbolic-arc-co-secant arcsech|hyperbolic-arc-secant","arccoth|hyperbolic-arc-co-tangent","polygon","distance midpoint",n,l.get("3d")?i:""].filter(function(s){return!!s}).join(" "),resetCursorOnBlur:!0,enableDigitGrouping:!0})}),P("graphing/clipping",["require","exports","core/types/graphmode"],function(S,c,x){function t(f,y,h,p){var r=[],o=y.xmin,m=y.ymin,b=y.xmax-y.xmin,E=y.ymax-y.ymin,M=h.width,D=h.height,A=M/b,v=-D/E,k=f.length;if(p===c.Y_EQUALS)for(var J=0;J<k;J+=2){var X=(f[J]-o)*A-.5,te=(f[J+1]-m)*v+D-.5;r.push(X,te)}else if(p===c.X_EQUALS)for(var J=0;J<k;J+=2){var X=(f[J+1]-o)*A-.5,te=(f[J]-m)*v+D-.5;r.push(X,te)}else if(p===c.POLAR_RADIAN_EQUALITY)for(var J=0;J<f.length;J+=2){var H=f[J],z=f[J+1],X=(z*Math.cos(H)-o)*A-.5,te=(z*Math.sin(H)-m)*v+D-.5;r.push(X,te)}else if(p===c.POLAR_RADIAN_INEQUALITY)for(var J=0;J<f.length;J+=2){var H=f[J],z=f[J+1];z<0&&(z=0);var X=(z*Math.cos(H)-o)*A-.5,te=(z*Math.sin(H)-m)*v+D-.5;r.push(X,te)}else if(p===c.POLAR_DEGREE_EQUALITY)for(var J=0;J<f.length;J+=2){var H=f[J]*Math.PI/180,z=f[J+1],X=(z*Math.cos(H)-o)*A-.5,te=(z*Math.sin(H)-m)*v+D-.5;r.push(X,te)}else if(p===c.POLAR_DEGREE_INEQUALITY)for(var J=0;J<f.length;J+=2){var H=f[J]*Math.PI/180,z=f[J+1];z<0&&(z=0);var X=(z*Math.cos(H)-o)*A-.5,te=(z*Math.sin(H)-m)*v+D-.5;r.push(X,te)}return r}function l(f,y){return i(f,y,c.ALL,!0)}function n(f,y,h,p){var r,o,m,b,E=[];p?(o=f[0],m=f[1],r=2,(b=y(o,m))&&E.push(o,m)):(o=f[f.length-2],m=f[f.length-1],r=0,b=y(o,m));for(var M=r;M<f.length;M+=2){var D=o,A=m,v=b;o=f[M],m=f[M+1],b=y(o,m),(b||v)&&(b&&v&&E.push(o,m),b&&!v&&(Array.prototype.push.apply(E,h(o,m,D,A)),E.push(o,m)),!b&&v&&Array.prototype.push.apply(E,h(D,A,o,m)))}return E}function i(f,y,h,p){var r=y.xmin,o=y.xmax,m=y.ymin,b=y.ymax,E=function(H,z){return H>=r},M=function(H,z){return H<=o},D=function(H,z){return z>=m},A=function(H,z){return z<=b},v=function(H,z,B,F){return H=H,z=z,B=B,F=F,[r,z+(F-z)*(r-H)/(B-H)]},k=function(H,z,B,F){return H=H,z=z,B=B,F=F,[o,z+(F-z)*(o-H)/(B-H)]},J=function(H,z,B,F){return H=H,z=z,B=B,F=F,[H+(B-H)*(m-z)/(F-z),m]},X=function(H,z,B,F){return H=H,z=z,B=B,F=F,[H+(B-H)*(b-z)/(F-z),b]},te=f;return h&c.LEFT&&(te=n(f,E,v,p)),h&c.BOTTOM&&(te=n(te,D,J,p)),h&c.RIGHT&&(te=n(te,M,k,p)),h&c.TOP&&(te=n(te,A,X,p)),te}function s(f,y){return i(f,y,c.ALL,!1)}function g(f,y,h){var p=[],r=f[0],o=r+h,m=[];p.push(m);for(var b=0;b<f.length;b+=2){var E=f[b],M=f[b+1];if(M<0&&(M=0),E>=o){for(m=[],p.push(m),r=f[b-2],o=r;E>=o;)o+=h;b-=4}else m.push(E,M)}if(y===0)for(var b=0;b<p.length;b++)p[b].push(0,0);else for(var D=h/16,A=y,b=0;b<p.length;b++){var v=p[b];r=v[0],o=v[v.length-2];for(var E=o;E>r;E-=D)v.push(E,A);v.push(r,A)}return p}function d(f,y){return f=f.slice(),f.push(f[f.length-2],y),f.push(f[0],y),[f]}function u(f,y,h){switch(f){case x.X:return c.X_EQUALS;case x.IMPLICIT:case x.PARAMETRIC:case x.Y:return c.Y_EQUALS;case x.POLAR:return h.degreeMode?y?c.POLAR_DEGREE_INEQUALITY:c.POLAR_DEGREE_EQUALITY:y?c.POLAR_RADIAN_INEQUALITY:c.POLAR_RADIAN_EQUALITY}}Object.defineProperty(c,"__esModule",{value:!0}),c.TOP=1,c.BOTTOM=2,c.LEFT=4,c.RIGHT=8,c.ALL=15,c.X=12,c.Y=3,c.POLAR_RADIAN_EQUALITY=1,c.POLAR_RADIAN_INEQUALITY=2,c.POLAR_DEGREE_EQUALITY=3,c.POLAR_DEGREE_INEQUALITY=4,c.Y_EQUALS=5,c.X_EQUALS=6,c.mapSegmentToCanvas=t,c.clipStrokeEdges=l,c.clipFillEdge=n,c.clipFillEdges=i,c.clipAllFillEdges=s,c.computePolarFill=g,c.computeCartesianFill=d,c.getClippingGraphType=u}),P("core/lib/color-helpers",["require","exports"],function(S,c){function x(g){return t(g)?(g.match(/^#([A-Fa-f0-9]{3})$/g)&&(g="#"+g[1]+g[1]+g[2]+g[2]+g[3]+g[3]),g.toLowerCase()):g}function t(g){return typeof g=="string"&&(g.match(/^#([A-Fa-f0-9]{3})$/g)||g.match(/^#([A-Fa-f0-9]{6})$/g))}function l(g,d){if(g=x(g),!t(g))return g;d>1&&(d=1),d<-1&&(d=-1);var u=parseInt(g.slice(1),16),f=d<0?0:255,y=d<0?-1*d:d,h=u>>16,p=u>>8&255,r=255&u;return"#"+(16777216+65536*(Math.round((f-h)*y)+h)+256*(Math.round((f-p)*y)+p)+(Math.round((f-r)*y)+r)).toString(16).slice(1)}function n(g){if(g=x(g),!t(g))return g;var d="0123456789abcdef";return"#"+g.slice(1).split("").map(function(u){return d[15-d.indexOf(u)]}).join("")}function i(g){if(g=g.replace(/#/,""),g.length===3)var d=parseInt(g.slice(0,1)+g.slice(0,1),16),u=parseInt(g.slice(1,2)+g.slice(1,2),16),f=parseInt(g.slice(2,3)+g.slice(2,3),16);else if(g.length===6)var d=parseInt(g.slice(0,2),16),u=parseInt(g.slice(2,4),16),f=parseInt(g.slice(4,6),16);else var d=0,u=0,f=0;return{r:d,g:u,b:f}}function s(g,d){var u=/(rgba\([\d]+\,\ ?[\d]+\,\ ?[\d]+\,\ ?)[\d.]+(\))/;return g.match(u)?g.replace(u,"$1"+d+"$2"):g}Object.defineProperty(c,"__esModule",{value:!0}),c.normalizeColor=x,c.isValidHexColor=t,c.shadeColor=l,c.invertColor=n,c.parseHex=i,c.mutateOpacity=s,c.colors={RED:"#c74440",BLUE:"#2d70b3",GREEN:"#388c46",PURPLE:"#6042a6",ORANGE:"#fa7e19",BLACK:"#000000",GRAY:"#aaaaaa"}}),P("expressions/colors",["require","exports","core/lib/color-helpers"],function(S,c,x){function t(l,n){switch(n){case x.colors.RED:return l.t("red");case x.colors.BLUE:return l.t("blue");case x.colors.GREEN:return l.t("green");case x.colors.PURPLE:return l.t("purple");case x.colors.ORANGE:return l.t("orange");case x.colors.BLACK:return l.t("black");case x.colors.GRAY:return l.t("gray");default:return l.t("color unknown")}}Object.defineProperty(c,"__esModule",{value:!0}),c.RED=x.colors.RED,c.BLUE=x.colors.BLUE,c.GREEN=x.colors.GREEN,c.PURPLE=x.colors.PURPLE,c.ORANGE=x.colors.ORANGE,c.BLACK=x.colors.BLACK,c.all=[c.RED,c.BLUE,c.GREEN,c.PURPLE,c.ORANGE,c.BLACK],c.getColorName=t}),P("lib/console",["require","exports","console"],function(S,c,x){Object.defineProperty(c,"__esModule",{value:!0}),c.log=x.log,c.warn=x.warn}),P("graphing-calc/api/sanitize-expression",["require","exports","core/types/styles","core/lib/dragmode","core/types/label-sizes","core/types/label-orientations","core/lib/number-to-latex","lib/console"],function(S,c,x,t,l,n,i,s){function g(z,B){for(var F in B)if(B.hasOwnProperty(F)&&B[F]===z)return!0;return!1}function d(z){return g(z,c.SanitizedPointStyle)}function u(z){return g(z,c.SanitizedLineStyle)}function f(z){return g(z,c.SanitizedDragMode)}function y(z){return g(z,c.SanitizedColumnMode)}function h(z){return g(z,c.SanitizedLabelSize)}function p(z){return g(z,c.SanitizedLabelOrientation)}function r(z){return{id:z.id,type:z.type,columns:z.columns.map(o)}}function o(z){return{id:z.id,latex:z.latex,color:z.color,hidden:z.hidden,pointStyle:z.pointStyle,lineStyle:z.lineStyle,points:z.points,lines:z.lines,dragMode:z.dragMode,values:z.values.slice()}}function m(z){var B=["latex","color","lineStyle","pointStyle","fillOpacity","points","lines","fill","hidden","secret","dragMode","label","showLabel","labelSize","labelOrientation","verticalLabel","interactiveLabel"],F={id:z.id,type:z.type};return B.forEach(function($){z.hasOwnProperty($)&&(F[$]=z[$])}),z.hasOwnProperty("parametricDomain")&&(F.parametricDomain={min:z.parametricDomain.min,max:z.parametricDomain.max}),z.hasOwnProperty("polarDomain")&&(F.polarDomain={min:z.polarDomain.min,max:z.polarDomain.max}),z.hasOwnProperty("domain")&&(F.domain={min:z.domain.min,max:z.domain.max}),z.slider&&(z.slider.hardMin&&(F.sliderBounds=F.sliderBounds||{},F.sliderBounds.min=z.slider.min),z.slider.hardMax&&(F.sliderBounds=F.sliderBounds||{},F.sliderBounds.max=z.slider.max),z.slider.step&&(F.sliderBounds=F.sliderBounds||{},F.sliderBounds.step=z.slider.step)),F}function b(z){return{id:z.id,type:z.type,hidden:z.hidden,secret:z.secret}}function E(z){return{id:z.id,type:z.type,hidden:z.hidden,secret:z.secret}}function M(z){return{id:z.id,type:z.type,secret:z.secret}}function D(z){switch(z.type){case"expression":return m(z);case"table":return r(z);case"folder":return E(z);case"image":return b(z);case"text":return M(z);default:return z}}function A(z,B){return z.hasOwnProperty("id")?z.id+"":B.generateId()}function v(z,B){var F={type:"expression",id:A(z,B)};return F.type="expression",F.id=A(z,B),z.hasOwnProperty("latex")&&(F.latex=z.latex+""),z.hasOwnProperty("color")&&(F.color=z.color+""),z.hasOwnProperty("points")&&(F.points=!!z.points),z.hasOwnProperty("lines")&&(F.lines=!!z.lines),z.hasOwnProperty("style")&&(s.warn("As of API v1.1 the 'style' property is deprecated and has been split into 'pointStyle' and 'lineStyle'."),d(z.style)?F.pointStyle=z.style:u(z.style)?F.lineStyle=z.style:s.warn("Invalid style: '"+z.style+"'.")),z.hasOwnProperty("pointStyle")&&(d(z.pointStyle)?F.pointStyle=z.pointStyle:s.warn("Invalid pointStyle: '"+z.pointStyle+"'.")),z.hasOwnProperty("lineStyle")&&(u(z.lineStyle)?F.lineStyle=z.lineStyle:s.warn("Invalid lineStyle: '"+z.lineStyle+"'.")),z.hasOwnProperty("hidden")&&(F.hidden=!!z.hidden),z.hasOwnProperty("secret")&&(F.secret=!!z.secret),z.hasOwnProperty("sliderBounds")&&z.sliderBounds&&(F.slider={min:i.default(z.sliderBounds.min),max:i.default(z.sliderBounds.max),step:i.default(z.sliderBounds.step)},F.slider.min&&(F.slider.hardMin=!0),F.slider.max&&(F.slider.hardMax=!0)),z.hasOwnProperty("parametricDomain")&&z.parametricDomain?(F.parametricDomain={min:i.default(z.parametricDomain.min),max:i.default(z.parametricDomain.max)},z.hasOwnProperty("domain")&&s.warn("Both 'parametricDomain' and the deprecated 'domain' property were specified. Using 'parametricDomain'.")):z.hasOwnProperty("domain")&&(s.warn("The 'domain' property is deprecated.Use 'parametricDomain' to specify the domain for parametric functions"),F.parametricDomain={min:i.default(z.domain.min),max:i.default(z.domain.max)}),z.hasOwnProperty("polarDomain")&&z.polarDomain&&(F.polarDomain={min:i.default(z.polarDomain.min),max:i.default(z.polarDomain.max)}),z.hasOwnProperty("dragMode")&&(f(z.dragMode)?F.dragMode=z.dragMode:s.warn("Invalid dragMode: '"+z.dragMode+"'.")),z.hasOwnProperty("label")&&(F.label=z.label+""),z.hasOwnProperty("showLabel")&&(F.showLabel=!!z.showLabel),z.hasOwnProperty("labelSize")&&(h(z.labelSize)?F.labelSize=z.labelSize:s.warn("Invalid labelSize: "+z.labelSize)),z.hasOwnProperty("labelOrientation")&&(p(z.labelOrientation)?F.labelOrientation=z.labelOrientation:s.warn("Invalid labelOrientation: "+z.labelOrientation)),z.hasOwnProperty("fill")&&(F.fill=!!z.fill),z.hasOwnProperty("fillOpacity")&&(F.fillOpacity=""+z.fillOpacity),F}function k(z,B){var F={id:A(z,B)};return z.hasOwnProperty("latex")&&(F.latex=z.latex+""),z.hasOwnProperty("color")&&(F.color=z.color+""),z.hasOwnProperty("hidden")&&(F.hidden=!!z.hidden),z.hasOwnProperty("points")&&(F.points=!!z.points),z.hasOwnProperty("lines")&&(F.lines=!!z.lines),z.hasOwnProperty("values")&&z.values&&(F.values=z.values.map(function($){return $+""})),z.hasOwnProperty("columnMode")&&(s.warn("As of API v1.1 the 'columnMode' property is deprecated and has been split into individual 'points' and 'lines' properties."),z.columnMode===c.SanitizedColumnMode.POINTS_AND_LINES?(F.points=!0,F.lines=!0):z.columnMode===c.SanitizedColumnMode.LINES?(F.points=!1,F.lines=!0):(F.points=!0,F.lines=!1),F.lines&&!F.points&&z.hasOwnProperty("dragMode")&&z.dragMode!==t.DragMode.NONE&&(s.warn("A 'lines' value of true and 'points' value of false is only compatible with a dragMode of 'NONE'. Proceeding by setting 'points' to true."),F.points=!0),y(z.columnMode)&&s.warn("Invalid columnMode: '"+z.columnMode+"'.")),z.hasOwnProperty("dragMode")&&(f(z.dragMode)?F.dragMode=z.dragMode===t.DragMode.AUTO?t.DragMode.NONE:z.dragMode:s.warn("Invalid dragMode: '"+z.dragMode+"'.")),F}function J(z,B){var F={type:"table",id:A(z,B)};return z.hasOwnProperty("columns")&&z.columns&&(F.columns=z.columns.map(function($){return k($,B)})),F}function X(z,B){var F={type:"folder",id:A(z,B)};return z.hasOwnProperty("hidden")&&(F.hidden=!!z.hidden),F}function te(z,B){var F={type:"image",id:A(z,B)};return z.hasOwnProperty("hidden")&&(F.hidden=!!z.hidden),F}function H(z,B,F){var $=z.type;if(B&&$&&$!==B)return void s.warn("Cannot change type of expression from '"+B+"' to '"+$+"'.");switch($){case void 0:case"expression":return v(z,F);case"image":return te(z,F);case"table":return J(z,F);case"folder":return X(z,F);default:return B?void s.warn("Cannot modify expressions of type: '"+B+"' through the API."):void s.warn("Invalid expression type: '"+$+"'.")}}Object.defineProperty(c,"__esModule",{value:!0}),c.SanitizedPointStyle={OPEN:x.PointStyle.OPEN,CROSS:x.PointStyle.CROSS,POINT:x.PointStyle.POINT},c.SanitizedLineStyle={SOLID:x.LineStyle.SOLID,DASHED:x.LineStyle.DASHED,DOTTED:x.LineStyle.DOTTED},c.SanitizedDragMode={NONE:t.DragMode.NONE,AUTO:t.DragMode.AUTO,X:t.DragMode.X,Y:t.DragMode.Y,XY:t.DragMode.XY},c.SanitizedColumnMode={POINTS:"POINTS",LINES:"LINES",POINTS_AND_LINES:"POINTS_AND_LINES"},c.SanitizedLabelSize={SMALL:l.LabelSize.SMALL,MEDIUM:l.LabelSize.MEDIUM,LARGE:l.LabelSize.LARGE},c.SanitizedLabelOrientation={ABOVE:n.LabelOrientation.ABOVE,BELOW:n.LabelOrientation.BELOW,DEFAULT:n.LabelOrientation.DEFAULT,LEFT:n.LabelOrientation.LEFT,RIGHT:n.LabelOrientation.RIGHT},c.sanitizeItem=D,c.validateItem=H}),P("core/graphing-calc/json/graph-settings",["require","exports","tslib"],function(S,c,x){function t(s){return s in n}Object.defineProperty(c,"__esModule",{value:!0});var l;(function(s){s.NONE="NONE",s.POSITIVE="POSITIVE",s.BOTH="BOTH"})(l=c.AxisArrowModes||(c.AxisArrowModes={}));var n={showGrid:!0,showXAxis:!0,showYAxis:!0,xAxisStep:0,yAxisStep:0,xAxisMinorSubdivisions:0,yAxisMinorSubdivisions:0,xAxisArrowMode:l.NONE,yAxisArrowMode:l.NONE,xAxisLabel:"",yAxisLabel:"",xAxisNumbers:!0,yAxisNumbers:!0,polarMode:!1,polarNumbers:!0,degreeMode:!1,randomSeed:"",restrictGridToFirstQuadrant:!1},i={squareAxes:!0};c.DefaultGraphSettings=x.__assign(x.__assign({},n),i),c.publicGraphSettings=Object.keys(n),c.isGraphSetting=t}),P("main/font_sizes",["require","exports"],function(S,c){Object.defineProperty(c,"__esModule",{value:!0}),c.VERY_SMALL=9,c.SMALL=12,c.MEDIUM=16,c.LARGE=20,c.VERY_LARGE=24}),(function(S){var c=function(t,l,n){var i,s,g=document.createElement("img");if(g.onerror=l,g.onload=function(){!s||n&&n.noRevoke||c.revokeObjectURL(s),l&&l(c.scale(g,n))},c.isInstanceOf("Blob",t)||c.isInstanceOf("File",t))i=s=c.createObjectURL(t),g._type=t.type;else{if(typeof t!="string")return!1;i=t,n&&n.crossOrigin&&(g.crossOrigin=n.crossOrigin)}return i?(g.src=i,g):c.readFile(t,function(d){var u=d.target;u&&u.result?g.src=u.result:l&&l(d)})},x=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;c.isInstanceOf=function(t,l){return Object.prototype.toString.call(l)==="[object "+t+"]"},c.transformCoordinates=function(){},c.getTransformedOptions=function(t){return t},c.renderImageToCanvas=function(t,l,n,i,s,g,d,u,f,y){return t.getContext("2d").drawImage(l,n,i,s,g,d,u,f,y),t},c.hasCanvasOption=function(t){return t.canvas||t.crop},c.scale=function(t,l){l=l||{};var n,i,s,g,d,u,f,y,h,p=document.createElement("canvas"),r=t.getContext||c.hasCanvasOption(l)&&p.getContext,o=t.naturalWidth||t.width,m=t.naturalHeight||t.height,b=o,E=m,M=function(){var A=Math.max((s||b)/b,(g||E)/E);A>1&&(b=Math.ceil(b*A),E=Math.ceil(E*A))},D=function(){var A=Math.min((n||b)/b,(i||E)/E);A<1&&(b=Math.ceil(b*A),E=Math.ceil(E*A))};return r&&(l=c.getTransformedOptions(l),f=l.left||0,y=l.top||0,l.sourceWidth?(d=l.sourceWidth,l.right!==void 0&&l.left===void 0&&(f=o-d-l.right)):d=o-f-(l.right||0),l.sourceHeight?(u=l.sourceHeight,l.bottom!==void 0&&l.top===void 0&&(y=m-u-l.bottom)):u=m-y-(l.bottom||0),b=d,E=u),n=l.maxWidth,i=l.maxHeight,s=l.minWidth,g=l.minHeight,r&&n&&i&&l.crop?(b=n,E=i,h=d/u-n/i,h<0?(u=i*d/n,l.top===void 0&&l.bottom===void 0&&(y=(m-u)/2)):h>0&&(d=n*u/i,l.left===void 0&&l.right===void 0&&(f=(o-d)/2))):((l.contain||l.cover)&&(s=n=n||s,g=i=i||g),l.cover?(D(),M()):(M(),D())),r?(p.width=b,p.height=E,c.transformCoordinates(p,l),c.renderImageToCanvas(p,t,f,y,d,u,0,0,b,E)):(t.width=b,t.height=E,t)},c.createObjectURL=function(t){return!!x&&x.createObjectURL(t)},c.revokeObjectURL=function(t){return!!x&&x.revokeObjectURL(t)},c.readFile=function(t,l,n){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=l,n=n||"readAsDataURL",i[n])return i[n](t),i}return!1},typeof P=="function"&&P.amd?P("vendor/load-image/load-image",[],function(){return c}):S.loadImage=c})(this),(function(S){typeof P=="function"&&P.amd?P("vendor/load-image/load-image-orientation",["./load-image"],S):S(window.loadImage)})(function(S){var c=S.hasCanvasOption;S.hasCanvasOption=function(x){return c(x)||x.orientation},S.transformCoordinates=function(x,t){var l=x.getContext("2d"),n=x.width,i=x.height,s=t.orientation;if(s)switch(s>4&&(x.width=i,x.height=n),s){case 2:l.translate(n,0),l.scale(-1,1);break;case 3:l.translate(n,i),l.rotate(Math.PI);break;case 4:l.translate(0,i),l.scale(1,-1);break;case 5:l.rotate(.5*Math.PI),l.scale(1,-1);break;case 6:l.rotate(.5*Math.PI),l.translate(0,-i);break;case 7:l.rotate(.5*Math.PI),l.translate(n,-i),l.scale(-1,1);break;case 8:l.rotate(-.5*Math.PI),l.translate(-n,0)}},S.getTransformedOptions=function(x){if(!x.orientation||x.orientation===1)return x;var t,l={};for(t in x)x.hasOwnProperty(t)&&(l[t]=x[t]);switch(x.orientation){case 2:l.left=x.right,l.right=x.left;break;case 3:l.left=x.right,l.top=x.bottom,l.right=x.left,l.bottom=x.top;break;case 4:l.top=x.bottom,l.bottom=x.top;break;case 5:l.left=x.top,l.top=x.left,l.right=x.bottom,l.bottom=x.right;break;case 6:l.left=x.top,l.top=x.right,l.right=x.bottom,l.bottom=x.left;break;case 7:l.left=x.bottom,l.top=x.right,l.right=x.top,l.bottom=x.left;break;case 8:l.left=x.bottom,l.top=x.left,l.right=x.top,l.bottom=x.right}return x.orientation>4&&(l.maxWidth=x.maxHeight,l.maxHeight=x.maxWidth,l.minWidth=x.minHeight,l.minHeight=x.minWidth,l.sourceWidth=x.sourceHeight,l.sourceHeight=x.sourceWidth),l}}),(function(S){typeof P=="function"&&P.amd?P("vendor/load-image/load-image-meta",["./load-image"],S):S(window.loadImage)})(function(S){var c=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);S.blobSlice=c&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},S.metaDataParsers={jpeg:{65505:[]}},S.parseMetaData=function(x,t,l){l=l||{};var n=this,i=l.maxMetaDataSize||262144,s={};window.DataView&&x&&x.size>=12&&x.type==="image/jpeg"&&S.blobSlice&&S.readFile(S.blobSlice.call(x,0,i),function(g){var d,u,f,y,h=g.target.result,p=new DataView(h),r=2,o=p.byteLength-4,m=r;if(p.getUint16(0)===65496){for(;r<o&&((d=p.getUint16(r))>=65504&&d<=65519||d===65534);){if(u=p.getUint16(r+2)+2,r+u>p.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(f=S.metaDataParsers.jpeg[d])for(y=0;y<f.length;y+=1)f[y].call(n,p,r,u,s,l);r+=u,m=r}!l.disableImageHead&&m>6&&(h.slice?s.imageHead=h.slice(0,m):s.imageHead=new Uint8Array(h).subarray(0,m))}else console.log("Invalid JPEG file: Missing JPEG marker.");t(s)},"readAsArrayBuffer")||t(s)}}),(function(S){typeof P=="function"&&P.amd?P("vendor/load-image/load-image-ios",["./load-image"],S):S(window.loadImage)})(function(S){if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var c=S.renderImageToCanvas;S.detectSubsampling=function(x){var t,l;return x.width*x.height>1048576&&(t=document.createElement("canvas"),t.width=t.height=1,l=t.getContext("2d"),l.drawImage(x,1-x.width,0),l.getImageData(0,0,1,1).data[3]===0)},S.detectVerticalSquash=function(x,t){var l,n,i,s,g,d=x.naturalHeight||x.height,u=document.createElement("canvas"),f=u.getContext("2d");for(t&&(d/=2),u.width=1,u.height=d,f.drawImage(x,0,0),l=f.getImageData(0,0,1,d).data,n=0,i=d,s=d;s>n;)g=l[4*(s-1)+3],g===0?i=s:n=s,s=i+n>>1;return s/d||1},S.renderImageToCanvas=function(x,t,l,n,i,s,g,d,u,f){if(t._type==="image/jpeg"){var y,h,p,r,o=x.getContext("2d"),m=document.createElement("canvas"),b=m.getContext("2d");if(m.width=1024,m.height=1024,o.save(),y=S.detectSubsampling(t),y&&(l/=2,n/=2,i/=2,s/=2),h=S.detectVerticalSquash(t,y),y||h!==1){for(n*=h,u=Math.ceil(1024*u/i),f=Math.ceil(1024*f/s/h),d=0,r=0;r<s;){for(g=0,p=0;p<i;)b.clearRect(0,0,1024,1024),b.drawImage(t,l,n,i,s,-p,-r,i,s),o.drawImage(m,0,0,1024,1024,g,d,u,f),p+=1024,g+=u;r+=1024,d+=f}return o.restore(),x}}return c(x,t,l,n,i,s,g,d,u,f)}}}),(function(S){typeof P=="function"&&P.amd?P("vendor/load-image/load-image-exif",["./load-image","./load-image-meta"],S):S(window.loadImage)})(function(S){S.ExifMap=function(){return this},S.ExifMap.prototype.map={Orientation:274},S.ExifMap.prototype.get=function(c){return this[c]||this[this.map[c]]},S.getExifThumbnail=function(c,x,t){var l,n,i;if(!t||x+t>c.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(l=[],n=0;n<t;n+=1)i=c.getUint8(x+n),l.push((i<16?"0":"")+i.toString(16));return"data:image/jpeg,%"+l.join("%")},S.exifTagTypes={1:{getValue:function(c,x){return c.getUint8(x)},size:1},2:{getValue:function(c,x){return String.fromCharCode(c.getUint8(x))},size:1,ascii:!0},3:{getValue:function(c,x,t){return c.getUint16(x,t)},size:2},4:{getValue:function(c,x,t){return c.getUint32(x,t)},size:4},5:{getValue:function(c,x,t){return c.getUint32(x,t)/c.getUint32(x+4,t)},size:8},9:{getValue:function(c,x,t){return c.getInt32(x,t)},size:4},10:{getValue:function(c,x,t){return c.getInt32(x,t)/c.getInt32(x+4,t)},size:8}},S.exifTagTypes[7]=S.exifTagTypes[1],S.getExifValue=function(c,x,t,l,n,i){var s,g,d,u,f,y,h=S.exifTagTypes[l];if(!h)return void console.log("Invalid Exif data: Invalid tag type.");if(s=h.size*n,(g=s>4?x+c.getUint32(t+8,i):t+8)+s>c.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(n===1)return h.getValue(c,g,i);for(d=[],u=0;u<n;u+=1)d[u]=h.getValue(c,g+u*h.size,i);if(h.ascii){for(f="",u=0;u<d.length&&(y=d[u])!=="\0";u+=1)f+=y;return f}return d},S.parseExifTag=function(c,x,t,l,n){var i=c.getUint16(t,l);n.exif[i]=S.getExifValue(c,x,t,c.getUint16(t+2,l),c.getUint32(t+4,l),l)},S.parseExifTags=function(c,x,t,l,n){var i,s,g;if(t+6>c.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(i=c.getUint16(t,l),(s=t+2+12*i)+4>c.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(g=0;g<i;g+=1)this.parseExifTag(c,x,t+2+12*g,l,n);return c.getUint32(s,l)},S.parseExifData=function(c,x,t,l,n){if(!n.disableExif){var i,s,g,d=x+10;if(c.getUint32(x+4)===1165519206){if(d+8>c.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(c.getUint16(x+8)!==0)return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(c.getUint16(d)){case 18761:i=!0;break;case 19789:i=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(c.getUint16(d+2,i)!==42)return void console.log("Invalid Exif data: Missing TIFF marker.");s=c.getUint32(d+4,i),l.exif=new S.ExifMap,s=S.parseExifTags(c,d,d+s,i,l),s&&!n.disableExifThumbnail&&(g={exif:{}},s=S.parseExifTags(c,d,d+s,i,g),g.exif[513]&&(l.exif.Thumbnail=S.getExifThumbnail(c,d+g.exif[513],g.exif[514]))),l.exif[34665]&&!n.disableExifSub&&S.parseExifTags(c,d,d+l.exif[34665],i,l),l.exif[34853]&&!n.disableExifGps&&S.parseExifTags(c,d,d+l.exif[34853],i,l)}}},S.metaDataParsers.jpeg[65505].push(S.parseExifData)}),(function(S){typeof P=="function"&&P.amd?P("vendor/load-image/load-image-exif-map",["./load-image","./load-image-exif"],S):S(window.loadImage)})(function(S){S.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},S.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},S.ExifMap.prototype.getText=function(c){var x=this.get(c);switch(c){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[c][x];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(x[0],x[1],x[2],x[3]);case"ComponentsConfiguration":return this.stringValues[c][x[0]]+this.stringValues[c][x[1]]+this.stringValues[c][x[2]]+this.stringValues[c][x[3]];case"GPSVersionID":return x[0]+"."+x[1]+"."+x[2]+"."+x[3]}return String(x)},(function(c){var x,t=c.tags,l=c.map;for(x in t)t.hasOwnProperty(x)&&(l[t[x]]=x)})(S.ExifMap.prototype),S.ExifMap.prototype.getAll=function(){var c,x,t={};for(c in this)this.hasOwnProperty(c)&&(x=this.tags[c])&&(t[x]=this.getText(x));return t}}),P("loadImage",["require","vendor/load-image/load-image-orientation","vendor/load-image/load-image-meta","vendor/load-image/load-image-ios","vendor/load-image/load-image-exif","vendor/load-image/load-image-exif-map","vendor/load-image/load-image"],function(S){return S("vendor/load-image/load-image-orientation"),S("vendor/load-image/load-image-meta"),S("vendor/load-image/load-image-ios"),S("vendor/load-image/load-image-exif"),S("vendor/load-image/load-image-exif-map"),S("vendor/load-image/load-image")}),P("expressions/image_file_to_data_url",["require","exports","loadImage"],function(S,c,x){function t(s,g){for(var d,u=[.92,.86,.8,.7,.6,.5,.4,.3,.2,.1],f=0;f<u.length;f++)if(d=s.toDataURL("image/jpeg",u[f]),d.length<g)return d;return d}function l(s,g){for(var d,u=s.toDataURL().length,f=s.width,y=s.height,h=document.createElement("canvas"),p=0;p<2;p++){var r=Math.sqrt(g/u);if(f=Math.round(r*f),y=Math.round(r*y),h.height=y,h.width=f,h.getContext("2d").drawImage(s,0,0,f,y),d=h.toDataURL(),(u=d.length)<g)return d}return d}function n(s){for(var g=s.getContext("2d"),d=g.getImageData(0,0,s.width,s.height).data,u=3;u<d.length;u+=4)if(d[u]!==255)return!0;return!1}function i(s,g){var d={orientation:!0,canvas:!0,maxWidth:1600,maxHeight:1600};x(s,function(u){if(!u.toDataURL)return void g(!0);var f;if(s.type==="image/jpeg")f=t(u,2e5);else if(f=u.toDataURL(),f.length>2e5){var y=f.length>.75*u.width*u.height,h=y&&!n(u);f=h?t(u,2e5):l(u,2e5)}g(null,f)},d)}Object.defineProperty(c,"__esModule",{value:!0}),c.imageFileToDataURL=i}),P("lib/i18n",["require","exports","config","jquery","underscore","lib/console"],function(S,c,x,t,l,n){function i(M,D){o=M||"",m=D||{},b={}}function s(M){for(var D,A=/(__[^_]+__)/g,v=[];(D=A.exec(M))!==null;)v.push({index:D.index,text:D[0]});M=M.replace(/[a-z]/gi,"");for(var k=M.split(""),J=0;J<v.length;J++)for(var X=v[J].index,te=v[J].text,H=0;H<te.length;H++)k[X+H]=te[H];return k.join("")}function g(M,D,A){var v,k=A!==void 0?A:o;b[k]||(b[k]=u([k]));for(var J=0,X=b[k];J<X.length;J++){var te=X[J];if(m.hasOwnProperty(te)&&m[te][M]){v=m[te][M];break}}if(v||(v=M!==void 0?M:""),x.get("bare-i18n")&&(v=s(v)),D)for(var H in D)D.hasOwnProperty(H)&&(v=v.split("__"+H+"__").join(D[H]));return v}function d(M,D){return g(M,D)}function u(M){var D=[];return l.each(M,function(A){if(A&&typeof A=="string"){var v=A.split("-")[0];D.push(A),D.push(v),l.each(c.enabled_languages,function(k,J){J.split("-")[0]===v&&k.useAsRoot&&D.push(J)})}}),D}function f(){for(var M=u([x.get("lang"),navigator.userLanguage,navigator.language]),D=0;D<M.length;D++){var A=M[D];if(h(A))return A}return"en"}function y(){return o}function h(M){return c.enabled_languages.hasOwnProperty(M)||l.contains(E,M)}function p(M){var D=t.Deferred();if(typeof G>"u")return D.reject(),D.promise();if(G.supportedLanguages.indexOf(M)>=0||M==="en")return i(M,G.locales),D.resolve(!0),D.promise();if(!h(M)){var A=M.indexOf("-")!==-1?M.split("-")[0]:M;for(var v in c.enabled_languages)if(v.indexOf("-")!==-1){var k=v.split("-")[0];if(A===k&&c.enabled_languages[v].useAsRoot){M=v;break}}}return t.get("/api/v1/calculator/language/"+M,function(J){G.locales||(G.locales={}),G.supportedLanguages||(G.supportedLanguages=[]),G.locales[M]=J[M],G.supportedLanguages.push(M),i(M,G.locales),D.resolve(!0)}).fail(function(J){J.status===404&&n.warn(M+" is not an available language."),D.reject()}),D.promise()}function r(M,D){if(M==null)return"";if(typeof M=="string")return M;if(typeof M=="number")return""+M;var A,v=M.vars;if(v){A={};for(var k in v)v.hasOwnProperty(k)&&(A[k]=r(v[k],D))}return g(M.msg,A,D)}Object.defineProperty(c,"__esModule",{value:!0}),c.locales=(function(){return typeof G<"u"&&G.locales?G.locales:{}})();var o="",m={},b={};c.enabled_languages={en:{displayName:"English (US)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"en-GB":{displayName:"English (GB)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"es-ES":{displayName:"Espaol (Espaa)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ES-ES.pdf",useAsRoot:!0},ru:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_RU.pdf",useAsRoot:!1},da:{displayName:"Dansk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},de:{displayName:"Deutsch",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_DE.pdf",useAsRoot:!1},"pt-BR":{displayName:"Portugus (Brasil)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"pt-PT":{displayName:"Portugus (Portugal)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ca:{displayName:"Catal",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},fr:{displayName:"Franais",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_FR.pdf",useAsRoot:!1},it:{displayName:"Italiano",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_IT.pdf",useAsRoot:!1},is:{displayName:"slenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},nl:{displayName:"Nederlands",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},no:{displayName:"Norsk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"sv-SE":{displayName:"Svenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},hr:{displayName:"Hrvatski",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},hu:{displayName:"Magyar",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},cs:{displayName:"etina",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},tr:{displayName:"Trke",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_TR.pdf",useAsRoot:!1},sl:{displayName:"Slovenina",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_SL.pdf",useAsRoot:!1},lt:{displayName:"Lietuvi",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},pl:{displayName:"Polski",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_PL.pdf",useAsRoot:!1},ro:{displayName:"Romn",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},id:{displayName:"Bahasa Indonesia",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},vi:{displayName:"Ting Vit",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_VI.pdf",useAsRoot:!1},el:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_EL.pdf",useAsRoot:!1},"sr-CS":{displayName:"SRPSKI",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},bg:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_BG.pdf",useAsRoot:!1},mk:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},uk:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ka:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},th:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"zh-CN":{displayName:"",useAsRoot:!0,userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-CN.pdf"},"zh-TW":{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-TW.pdf",useAsRoot:!1},ko:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ja:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_JA.pdf",useAsRoot:!1}};var E=["sr","hy-AM","bn","eu","he","hi","ar","fi","kk","ml-IN","tr","fa"];c.init=i,c.t=g,c.raw=d,c.detectLanguage=f,c.currentLanguage=y,c.fetchLanguage=p,c.unpack=r,i(f(),c.locales)}),P("underscore_model",["require","underscore","pjs"],function(S){var c=S("underscore");return{UnderscoreModel:S("pjs")(function(x){var t=0,l="guid_"+Math.round(1e6*Math.random())+"_"+new Date().getTime()+"_";x.init=function(){this.__observers={},this.__eventObservers={},this.__oldProperties={},this.__propertyComparators={},this.guid=l+ ++t},x.unobserveAll=function(){this.__observers={},this.__eventObservers={}},x.getProperty=function(n){return this[n]},x.getOldProperty=function(n){return this.__oldProperties[n]},x.setProperty=function(n,i){var s=this[n];this[n]=i;var g=this.__propertyComparators[n];if(g){if(g(s,i))return}else if(c.isEqual(s,i))return;this.__oldProperties[n]=s,this.notifyPropertyChange(n)},x.setProperties=function(n){for(var i in n)n.hasOwnProperty(i)&&this.setProperty(i,n[i])},x.setPropertyComparator=function(n,i){this.__propertyComparators[n]=i},x.notifyPropertyChange=function(n){this.__callObservers(this.__observers,n,this)},x.observe=function(n,i){this.__addObservers(this.__observers,n,i)},x.unobserve=function(n){this.__removeObservers(this.__observers,n)},x.observeAndSync=function(n,i){this.observe(n,i);for(var s=n.split(" "),g=0;g<s.length;g++){var d=s[g].split("."),u=d[0];this.hasOwnProperty(u)&&i(u,this)}},x.triggerEvent=function(n,i){this.__callObservers(this.__eventObservers,n,i)},x.observeEvent=function(n,i){this.__addObservers(this.__eventObservers,n,i)},x.unobserveEvent=function(n){this.__removeObservers(this.__eventObservers,n)},x.__callObservers=function(n,i,s){var g=n[i];if(g)for(var d=0;d<g.length;d++)g[d].callback(i,s)},x.__removeObservers=function(n,i){for(var s=i.split(" "),g=0;g<s.length;g++){var d=s[g].split("."),u=d[0],f=d[1];if(u&&f){var y=n[u],h=[];if(!y)continue;for(var p=0;p<y.length;p++){var r=y[p];r.namespace!==f&&h.push(r)}n[u]=h}else if(u)delete n[u];else if(f)for(u in n)n.hasOwnProperty(u)&&this.__removeObservers(n,u+"."+f)}},x.__addObservers=function(n,i,s){for(var g=i.split(" "),d=0;d<g.length;d++){var u=g[d].split("."),f=u[0];if(!f)throw"Must supply a property to observe";var y=u[1],h={namespace:y,callback:s},p=n[f];p?p.push(h):n[f]=[h]}}})}}),P("main/graph_settings",["require","pjs","underscore","underscore_model","core/graphing-calc/json/graph-settings","console","core/graphing-calc/json/graph-settings","core/lib/color-helpers"],function(S){var c=S("pjs"),x=S("underscore"),t=S("underscore_model").UnderscoreModel,l=S("core/graphing-calc/json/graph-settings").AxisArrowModes,n=S("console"),i=S("core/graphing-calc/json/graph-settings").DefaultGraphSettings,s=S("core/lib/color-helpers"),g=c(t,function(d,u,f){d.init=function(){function h(m,b,E){function M(){o.setProperty(m,o.config.projectorMode?E:b)}o.cloneProperties.push(m),o.config.observe("projectorMode",M),M()}function p(m,b,E,M,D){function A(){var v;v=o.config.projectorMode?o.highlight?D:M:o.highlight?E:b,o.setProperty(m,v)}o.cloneProperties.push(m),o.observe("highlight",A),o.config.observe("projectorMode",A),A()}u.init.call(this),this.stateProperties=[],this.cloneProperties=[],this.config=new t;for(var r in i)i.hasOwnProperty(r)&&this.addStateProperty(r,i[r]);this.labelHangingColor="rgba(150,150,150,1)",this.lastChangedAxis="x";var o=this;h("labelSize",14,19),h("majorAxisOpacity",.4,1),h("minorAxisOpacity",.12,.25),h("axisOpacity",.9,.9),h("axisLineWidth",1.5,2),h("axisLineOffset",.25,0),h("pixelsPerLabel",80,120),p("curveOpacity",.7,1,.7,1),h("globalCurveColor",void 0,void 0),h("disableFill",!1,!1),p("graphLineWidth",2.5,3.5,5,7),p("pointLineWidth",9,11,15,17)},d.addStateProperty=function(h,p){this[h]=p,this.stateProperties.push(h),this.cloneProperties.push(h)},f.fromObject=function(h){var p=g();return p.cloneProperties.forEach(function(r){h.hasOwnProperty(r)&&p.setProperty(r,h[r])}),p},d.registerCallbacks=function(h,p){var r=this,o=function(){h.redrawAllLayers()};this.stateProperties.forEach(function(m){r.observe(m,o)}),this.config.observe("backgroundColor",o),this.config.observe("textColor",o),this.config.observe("invertedColors",o),this.observe("squareAxes",function(){h.viewportController.enforceSquareAxes()}),this.observe("backgroundColor",function(){h.redrawAllLayers()}),this.observe("textColor",function(){h.redrawAllLayers()}),this.config.observe("enableTabindex",function(){h.redrawAllLayers()}),this.config.observeAndSync("projectorMode",function(){h.redrawAllLayers()})};var y=function(h,p){var r;switch(h){case"xAxisMinorSubdivisions":case"yAxisMinorSubdivisions":r=Math.round(Math.min(Math.max(0,p),5)),p!==r&&n.warn("minorSubdivisions must be an integer between 0 and 5. You provided "+p+", which we changed to "+r+".");break;case"degreeMode":case"projectorMode":case"showGrid":case"showXAxis":case"showYAxis":case"xAxisNumbers":case"yAxisNumbers":case"polarNumbers":case"enableTabindex":case"invertedColors":r=p!=="false"&&!!p,p!==r&&n.warn(h+" must be a Boolean. You provided "+p+" ("+typeof p+"), which we changed to "+r+" ("+typeof r+").");break;case"xAxisStep":case"yAxisStep":r=parseFloat(p),isFinite(p)||(r=0,n.warn(h+" must be a number. You provided "+p+", which we changed to "+r+"."));break;case"yAxisMinorSubdivisions":r=Math.round(Math.min(Math.max(0,p),5)),p!==r&&n.warn("minorSubdivisions must be an integer between 0 and 5. You provided "+p+", which we changed to "+r+".");break;case"xAxisArrowMode":case"yAxisArrowMode":r=l[p],r!==p&&(r=l.NONE,n.warn(`unknown AxisArrowMode. Allowed values are: 
`+x.keys(l).join(`
`)));break;case"xAxisLabel":case"yAxisLabel":r=p,typeof p!="string"&&(r="",n.warn(h+" must be a string. you provided a "+typeof p+"."));break;case"randomSeed":r=p,typeof p!="string"&&(r=""+p,n.warn("randomSeed must be a string. you provided a "+typeof p+"."));break;case"backgroundColor":r=p,typeof p!="string"&&(r="",n.warn(h+" must be a string. you provided a "+typeof p+".")),r||(r="#fff"),r[0]!=="#"&&(r="#"+r);break;case"textColor":r=p,typeof p!="string"&&(r="",n.warn(h+" must be a string. you provided a "+typeof p+".")),r||(r="#000"),r[0]!=="#"&&(r="#"+r);break;case"fontSize":r=p,typeof p!="number"&&(r=parseInt(r,10),n.warn("fontSize must be a number. Attempted to convert "+p+" to "+r+"."));break;case"language":r=p,typeof p!="string"&&(r="",n.warn(h+" must be a string. you provided a "+typeof p+".")),typeof G<"u"&&G.supportedLanguages.indexOf(p)<0&&p!=="en"&&(r="en",n.warn(p+" is not currently an available language."));break;default:r=p}return r};d._validateSettings=function(h){var p={},r=!1;for(var o in h)this.stateProperties.indexOf(o)>=0?p[o]=y(o,h[o]):(n.warn('Invalid graph setting "'+o+'".'),r=!0);return r&&n.warn(`Available graph settings are: 
`+this.stateProperties.join(`
`)),p},d.getBackgroundColor=function(){var h=s.normalizeColor(this.config.backgroundColor||"#fff");return this.config.invertedColors&&h!=="#ffffff"?s.invertColor(h):h},d.getTextColor=function(){var h=s.normalizeColor(this.config.textColor||"#000");return this.config.invertedColors&&h!=="#000000"?s.invertColor(h):h},d.setGraphSettings=function(h){var p=this._validateSettings(h);for(var r in p)p.hasOwnProperty(r)&&(r==="projectorMode"||r==="invertedColors"||r==="fontSize"||r==="language"||r==="backgroundColor"||r==="textColor"?this.config.setProperty(r,p[r]):this.setProperty(r,p[r]))}});return g}),P("scroll_helpers",["require"],function(S){return{scrollVisible:function(c,x,t){var l,n=x.height(),i=c.height(),s=c.offset(),g=x.offset();if(!s||!g)return!1;var d=x[0].scrollTop,u=s.top+d-g.top,f=u-t,y=i+u+t-n;return(l=f>=y?Math.min(Math.max(d,y),f):.5*(f+y))!==d&&(x[0].scrollTop=l,x[0].scrollTop!=d)}}}),P("bugsnag",["require","exports","tslib"],function(S,c,x){function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var p=16*Math.random()|0;return(h=="x"?p:3&p|8).toString(16)})}function l(){return window.Desmos&&window.Desmos.commit}function n(){var h="production";if(location&&location.hostname){var p=location.hostname,r=p.split("."),o=r.slice(0,r.length-2).join(".");r.slice(r.length-2).join(".")==="desmos.com"&&(h=o&&o!=="www"?o:"production")}return h}function i(h){if(!u){var p=0,r=t();u=h({apiKey:"7f7807097671acbc4557e64bbf5eb529",maxBreadcrumbs:40,appVersion:l(),releaseStage:n(),consoleBreadcrumbsEnabled:!1,beforeSend:function(o){if(o.errorClass)for(var m=0,b=y;m<b.length;m++){var E=b[m];if(o.errorClass.indexOf(E)!==-1)return void o.ignore()}if(o.errorMessage)for(var M=0,D=y;M<D.length;M++){var E=D[M];if(o.errorMessage.indexOf(E)!==-1)return void o.ignore()}f&&f(o),o.isIgnored()||(p+=1,o.metaData.errorNumber=p,o.metaData.pageLoadId=r)}})}}function s(h,p){u&&u.notify(h,p)}function g(h,p,r,o){if(p){p=x.__assign({},p);for(var m in p)try{p[m]=JSON.stringify(p[m],null,2)}catch{p[m]="[[could not stringify]]"}}u&&u.leaveBreadcrumb(h,p,r,o)}function d(h){f=h}Object.defineProperty(c,"__esModule",{value:!0});var u,f,y=["UnhandledRejection","lnrAppboy","socratic","MyAppGet","SymBrowser_","mobincube_","_avast_submit","Cannot redefine property: googletag","jcarousel","SyntaxError: Unexpected identifier 'script'","__gCrWeb.autofill.extractForms","BrowseITEXT","Can't find variable: removeAllHighlights","aAttribruteValue.parentNode.getAttribute","vid_mate_check","GetImageTagSrcFromPoint","Can't find variable: didEnterViewPort","tinyMCE is not defined"];c.init=i,c.notify=s,c.leaveBreadcrumb=g,c.setBeforeSendCB=d}),P("tours/trip",["require","jquery","pjs","mathquill","scroll_helpers","bugsnag"],function(S){var c=S("jquery"),x=S("pjs"),t=S("mathquill"),l=S("scroll_helpers"),n=S("bugsnag");return x({init:function(i){this.settings=i,this.__cachedStepName=null},ensureTripBlock:function(){if(!this.$tripBlock){var i=['<div class="trip-block">','<div class="trip-interior">','<a class="trip-close">&times;</a>','<div class="trip-content"></div>',"</div>",'<div class="trip-arrow"></div>',"</div>"].join(""),s=this,g=this.$tripBlock=c(i);g.css({top:"-100px"}),c("body").append(g),g.find(".trip-close").on("dcg-tap",function(d){d.preventDefault(),s.stop()}),this.bindKeyEvents()}},cleanup:function(){return this.unbindKeyEvents(),this.hideTripBlock(),!1},bindKeyEvents:function(){var i=this;c(document).on({"keydown.Trip":function(s){i.keyEvent.call(i,s)}})},unbindKeyEvents:function(){c(document).off("keydown.Trip")},keyEvent:function(i){i.which===27&&this.stop()},stop:function(){this.hideTripBlock(),this.settings.onTripStop()},exitTourBecauseOfError:function(i,s){var g="",d=s;do g=d.selector+g;while(d=d.prevObject);this.stop(),n.notify("TourError: could not find $sel.offset()",{metaData:{message:i,selector:g}})},showTripBlock:function(i){this.ensureTripBlock(),typeof i.sel=="string"&&(i.sel=c(i.sel)),i.sel=i.sel.filter(":visible"),i.scrollContainer&&l.scrollVisible(i.sel,i.scrollContainer,0);var s=this.$tripBlock;s.find(".trip-content").html(i.content),s.toggleClass("trip-hidden",!!i.hidden);var g=i.sel,d=g.outerWidth(),u=g.outerHeight(),f=s.outerWidth(),y=s.outerHeight();if(!g.offset())return void(this.__cachedMissingSelTime?Date.now()-this.__cachedMissingSelTime>1e3&&(i.final?this.stop():this.exitTourBecauseOfError(i.content,g)):this.__cachedMissingSelTime=Date.now());this.__cachedMissingSelTime=void 0,s.removeClass("trip-e trip-s trip-w trip-n");var h=0;switch(i.position){case"e":s.addClass("trip-e"),s.css({left:g.offset().left+d+10,top:g.offset().top-(y-u)/2});break;case"s":s.addClass("trip-s");var p=g.offset().left+(d-f)/2;s.css({left:p,top:g.offset().top+u+10}),p+f>c(window).width()-1&&(h=c(window).width()-1-p-f),p<1&&(h=1-p);break;case"w":s.addClass("trip-w"),s.css({left:g.offset().left-(10+f),top:g.offset().top-(y-u)/2});break;default:s.addClass("trip-n"),s.css({left:g.offset().left+(d-f)/2,top:g.offset().top-10-y})}s.find(".trip-interior").css("transform","translate("+h+"px, 0)"),s.css({display:"inline-block"}),s.find(".trip-math:not(.dcg-mq-math-mode)").each(function(){t.StaticMath(this)})},fadeInTripBlock:function(){this.ensureTripBlock();var i=this.$tripBlock;setTimeout(function(){i.addClass("trip-is-loaded")},0)},hideTripBlock:function(){this.$tripBlock&&this.$tripBlock.removeClass("trip-is-loaded")}})}),P("tours/tour_manager",["require","pjs","./trip"],function(S){var c=S("pjs"),x=S("./trip");return c(function(t,l){t.init=function(){this.tripManager=new x({onTripStop:this.stopTour.bind(this)}),this.currentStep=void 0,this.currentTour=void 0},t._tripLoop=function(){if(clearTimeout(this.__tripLoopTimeout),this.running){var n=this;n._advanceTrip(),n.__tripLoopTimeout=setTimeout(n._tripLoop.bind(n),200)}},t._advanceTrip=function(){var n=this.currentTour.update(),i=new Date().getTime();if(n&&this.currentStep&&n.content!==this.currentStep.content){if(this.currentStep.delayBeforeExit){if(this.throttleTimer&&i-this.throttleTimer<this.currentStep.delayBeforeExit)return;if(!this.throttleTimer)return void(this.throttleTimer=i)}n.delayBeforeEnter&&(this.currentStep=n,this.throttleTimer=i)}if(!(n&&this.currentStep&&n.content===this.currentStep.content&&this.throttleTimer&&i-this.throttleTimer<this.currentStep.delayBeforeEnter)&&(this.throttleTimer=null,n&&!n.doNotUpdate)){if(this.currentStep=n,n.final)return void this.finishTour(n,5);this.tripManager.showTripBlock(n)}},t.updateNow=t._advanceTrip,t.startTour=function(n){this.running||(this.currentTour=n,this.running=!0,this._tripLoop(),this.tripManager.fadeInTripBlock())},t.closingMsg="<b>__endingMessage__</b><br>This message will self-destruct in __seconds__...",t.finishTour=function(n,i){clearTimeout(this.__tripLoopTimeout),this.running=!1;var s=this;if(i<0)return void s.tripManager.stop();n.endingMsg&&(n.content=s.closingMsg.replace("__endingMessage__",n.endingMsg).replace("__seconds__",i)),s.tripManager.showTripBlock(n),setTimeout(function(){s.finishTour(n,i-1)},1e3)},t.stopTour=function(){this.running=!1,this.currentStep=void 0,this.currentTour=void 0}})}),P("lib/named-colors",["require"],function(S){return{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}),P("lib/color-distance",["require","underscore","lib/named-colors"],function(S){function c(y){var h=[],p=y.toLowerCase();if(p.slice(0,3)==="rgb")try{h=p.replace(/[^\d,]/g,"").split(",").slice(0,3),h=u.map(h,function(o){return parseInt(o,10)})}catch{t(y)}else if(p[0]==="#"){var r=/^#?([a-f\d])([a-f\d])([a-f\d])$/;p=p.replace(r,function(o,m,b,E){return m+m+b+b+E+E});try{h=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/.exec(p).slice(1),h=u.map(h,function(o){return parseInt(o,16)})}catch{t(y)}}else h=f[p];return x(h)||t(y),{R:h[0],G:h[1],B:h[2]}}function x(y){return!!u.isArray(y)&&y.length===3&&u.every(y,function(h){return Number.isInteger(h)&&h>=0&&h<=255})}function t(y){throw new Error("Invalid color string: "+y)}function l(y){var h=y.R,p=y.G,r=y.B,o=[];return o[0]=.49*h+.31*p+.2*r,o[1]=.17697*h+.8124*p+.01063*r,o[2]=.01*p+.99*r,o=u.map(o,function(m){return m/.17697}),{X:o[0],Y:o[1],Z:o[2]}}function n(y){var h=y.X,p=y.Y,r=y.Z,o=[];return o[0]=116*i(p/100)-16,o[1]=500*(i(h/95.047)-i(p/100)),o[2]=200*(i(p/100)-i(r/108.883)),{L:o[0],a:o[1],b:o[2]}}function i(y){var h=.20689655172413793;return y>Math.pow(h,3)?Math.pow(y,1/3):y/(3*h*h)+4/29}function s(y,h){var p=y.L,r=y.a,o=y.b,m=h.L,b=h.a,E=h.b,M=p-m,D=Math.sqrt(r*r+o*o),A=Math.sqrt(b*b+E*E),v=D-A,k=r-b,J=o-E,X=Math.sqrt(k*k+J*J-v*v),te=1+.045*D,H=1+.015*D,z=M/1,B=v/(1*te),F=X/(1*H);return Math.sqrt(z*z+B*B+F*F)}function g(y,h){return s(n(l(c(y))),n(l(c(h))))}function d(y,h){var p=u.map(h,function(o){return g(y,o)}),r=u.min(p);return h[p.indexOf(r)]}var u=S("underscore"),f=S("lib/named-colors");return{str2rgb:c,difference:g,closestColor:d}}),P("core/math/evaluate-single-expression",["require","exports","parser","core/math/builtinframe","core/math/parsenode/constant","core/math/policy"],function(S,c,x,t,l,n){function i(s,g){if(/^\s*(\-|\+)?([0-9]+(\.[0-9]+)?)\s*$/.test(s))return parseFloat(s);var d=Object.create(t);return d.trigAngleMultiplier=l(g?Math.PI/180:1),+x.parse(s).tryGetConcreteTree(n.defaultPolicy,d).asValue()}Object.defineProperty(c,"__esModule",{value:!0}),c.default=i}),P("lib/rounding",["require","exports","core/math/distance"],function(S,c,x){function t(l,n){if(!isFinite(l))return l;if(!isFinite(n))return n;var i=x.mean(l,n);if(l>0!=n>0||l===0||n===0)return 0;var s=l>0?1:-1,g=Math.abs(l).toExponential().split("e"),d=Math.abs(n).toExponential().split("e"),u=g[0],f=d[0],y=g[1],h=d[1];if(h!==y)return s*Math.pow(10,Math.max(parseFloat(y),parseFloat(h)));if(u[0]!==f[0])return parseFloat(i.toPrecision(1));for(var p=1,r=2;r<Math.min(u.length,f.length)&&(p++,u[r]===f[r]);r++);return parseFloat(i.toPrecision(p))}Object.defineProperty(c,"__esModule",{value:!0}),c.shortestDecimalBetween=t}),P("lib/copy-properties",["require","exports","core/lib/deepCopy"],function(S,c,x){function t(l){var n=l.from,i=l.to,s=l.props;for(var g in s)s[g]&&n.hasOwnProperty(g)&&(i[g]=x.default(n[g]))}Object.defineProperty(c,"__esModule",{value:!0}),c.copyProperties=t}),P("graphing-calc/models/expression",["require","exports","parser","core/math/builtinframe","tslib","core/lib/dragmode","core/types/slider-loop-modes","core/types/styles","core/types/label-sizes","core/types/label-orientations","core/math/evaluate-single-expression","lib/rounding","core/lib/deepCopy","lib/copy-properties","./abstract-item","./list","underscore","core/math/expression-types","core/lib/label","core/lib/number-to-latex","core/math/sliders","core/lib/number-to-latex","core/graphing-calc/json/expression","core/math/distribution-spec","core/math/policyGraphing"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r,o,m,b,E,M,D,A,v,k){function J(q){var Ee=q.formula;return!!Ee&&q.controller.isDecimalToFractionEnabled()&&Ee.hasOwnProperty("constant_value")&&b.canDisplayAsFraction(Ee.constant_value)}function X(q){return!!q.isGraphable}function te(q){var Ee=q.formula;if(!Ee)return!1;var nt=Ee.is_evaluable&&Ee.zero_values&&Ee.zero_values.length>0&&typeof Ee.zero_values[0].val!="boolean",mt=J(q)&&se(q);return nt||mt}function H(q){var Ee=q.formula;return te(q)?Ee.zero_values&&Ee.zero_values.length?Ee.zero_values[0].val:Ee.constant_value:J(q)?q.formula.constant_value:NaN}function z(q){var Ee=q.formula.ttest_results;if(Ee&&isFinite(Ee.lessThan))return{lessThan:Ee.lessThan,greaterThan:Ee.greaterThan,notEqual:Ee.notEqual}}function B(q){var Ee=q.formula.stats_results;if(Ee&&isFinite(Ee.min))return{min:Ee.min,q1:Ee.q1,median:Ee.median,q3:Ee.q3,max:Ee.max}}function F(q,Ee){if(!isFinite(Ee))return q;var nt=/=(.*?)([-\.0-9]+)/,mt=q.match(nt);if(!mt||parseFloat(mt[2])===Ee)return q;var Ct=D.numberToDecimalString(Ee);return q.replace(nt,"=$1"+Ct)}function $(q){return((q.latex||"")+(q.label||"")).split(" ").join("")===""}function re(q){var Ee=q.dragMode===n.DragMode.AUTO?q.formula.default_drag_mode:q.dragMode;q.reconciledDragMode=n.reconcileDragMode(Ee,q.formula.move_strategy),q.interactiveLabel&&q.reconciledDragMode!==n.DragMode.NONE&&Rt(q,!1)}function K(q,Ee,nt){if(!q.sliderExists)return NaN;var mt=ze(q),Ct=We(q),zt=Z(q);if(nt&&nt.overwriteStep!==void 0&&(zt=nt.overwriteStep),Ee=M.constrainSliderValueLikeEvaluator({target:Ee,hardMin:q.slider.hardMin?mt:void 0,hardMax:q.slider.hardMax?Ct:void 0,step:zt}),!nt||!nt.ignoreSoftLimits){if(!q.slider.hardMin&&Ee<mt)return mt;if(!q.slider.hardMax&&Ee>Ct)return Ct}return Ee}function ue(q,Ee){if(!q.sliderExists)return NaN;var nt=C(q),mt=ze(q),Ct=We(q),zt=Z(q),jt=zt||(Ct-mt)/20,nn=0;switch(Ee){case"min":return K(q,mt);case"max":return K(q,Ct);case"up":nn=1;break;case"down":nn=-1;break;case"bigup":nn=5;break;case"bigdown":nn=-5;break;default:return Ee}for(var Ft=nt,Gt=0;Gt<20;Gt++){var Mt=Gt/3*jt,Ot=nt;if(nn>0)(nt=K(q,Ft+Mt,{overwriteStep:jt}))>Ot&&(nn-=1);else{if(!(nn<0))break;(nt=K(q,Ft-Mt,{overwriteStep:jt}))<Ot&&(nn+=1)}}return nt}function ie(q,Ee){if(q.sliderExists){q.slider.isPlaying&&on(q,!1);var nt=K(q,Ee,{ignoreSoftLimits:!0});q.latex=F(q.latex,nt)}}function Q(q,Ee){if(q.sliderExists){q.slider.isPlaying&&on(q,!1),St(q);var nt=ue(q,Ee);q.latex=F(q.latex,nt)}}function pe(q,Ee){if(q.sliderExists){q.slider.isPlaying&&on(q,!1);var nt=K(q,Ee);q.latex=F(q.latex,nt)}}function ee(q,Ee){if(q.sliderExists){var nt=q.sliderLastTickTime;if(q.sliderLastTickTime=Ee,nt!==void 0){var mt=Ee-nt,Ct=ze(q),zt=We(q),jt=Z(q),nn=q.slider.animationPeriod,Ft=q.slider.loopMode;if(isNaN(q.sliderAnimationTargetValue)){var Gt=C(q);isNaN(Gt)||(q.sliderAnimationTargetValue=Gt)}var Mt=jt?jt/2:0;if(Ft===i.SliderLoopMode.LOOP_FORWARD_REVERSE)q.sliderAnimationTargetValue>=zt?Dt(q,{playDirection:-1}):q.sliderAnimationTargetValue<=Ct&&Dt(q,{playDirection:1});else if(Ft===i.SliderLoopMode.LOOP_FORWARD)Dt(q,{playDirection:1}),q.sliderAnimationTargetValue>=zt+Mt&&(q.sliderAnimationTargetValue=Ct-Mt);else if(Ft===i.SliderLoopMode.PLAY_ONCE)Dt(q,{playDirection:1});else{if(Ft!==i.SliderLoopMode.PLAY_INDEFINITELY)throw new Error("Unexpected slider loop mode: "+Ft);Dt(q,{playDirection:1})}isFinite(mt)||(mt=0);var Ot,Kt;Ft===i.SliderLoopMode.PLAY_INDEFINITELY?(Ot=mt/(nn/4),jt&&(Ot*=jt),q.sliderAnimationTargetValue+=Ot,Kt=q.sliderAnimationTargetValue,jt||(Kt=f.shortestDecimalBetween(Kt-.1*Ot,Kt+.1*Ot)),Kt=K(q,Kt,{ignoreSoftLimits:!0}),q.latex=F(q.latex,Kt)):(mt=Math.min(mt,nn/10),Ot=(zt-Ct)*mt/nn,q.sliderAnimationTargetValue+=Ot*q.slider.playDirection,q.sliderAnimationTargetValue=Math.max(Ct-Mt,Math.min(zt+Mt,q.sliderAnimationTargetValue)),Kt=q.sliderAnimationTargetValue,jt||(Kt=f.shortestDecimalBetween(Kt-.1*Ot,Kt+.1*Ot)),Kt=K(q,Kt),q.latex=F(q.latex,Kt))}}}function ae(q,Ee){q.formula=Ee,q.loading=!1,q.error=Ee.error?Ee.error:"",q.isGraphable=Ee.is_graphable,q.dependent=Ee.assignment,q.isTableable=Ee.is_tableable,q.unresolved=!1,Ee.is_single_identifier?q.missingVariables=[]:q.missingVariables=Ee.variables||[],q.__workerSliderLatex=Ee.raw_slider_latex,Ee.is_slider?(q.__workerSliderValue=Ee.constant_value,q.__workerSliderMin=Ee.slider_min_number,q.__workerSliderMax=Ee.slider_max_number,q.__workerSliderStep=Ee.slider_step_number,q.__workerSliderMinValid=Ee.slider_min_valid,q.__workerSliderMaxValid=Ee.slider_max_valid,q.__workerSliderStepValid=Ee.slider_step_valid,q.sliderExists||(q.sliderAnimationTargetValue=C(q),q.sliderDragging=!1,q.sliderExists=!0)):q.sliderExists=!1,q.__workerDomainMin=Ee.domain_min_number,q.__workerDomainMax=Ee.domain_max_number,q.__workerDomainMinValid=Ee.domain_min_valid,q.__workerDomainMaxValid=Ee.domain_max_valid,q.__workerCDFMinValid=Ee.cdf_min_valid,q.__workerCDFMaxValid=Ee.cdf_max_valid,q.__workerFillOpacityValid=Ee.fill_opacity_valid,q.__workerLineWidthValid=Ee.line_width_valid,q.__workerCDFEvaluation=Ee.cdf_evaluation;var nt={};Ee.is_regression&&(nt=Ee.regression.parameters,q.residualVariable=Ee.regression.residualVariable),o.isEqual(q.regressionParameters,nt)||(q.regressionParameters=nt)}function le(q){var Ee=r.getParentFolderModel(q);Ee&&Ee.hidden||q.formula.expression_type&&ln(q)?q.shouldGraph=!1:q.shouldGraph=!q.hidden}function me(q){if(!q.sliderExists||q.latex!==q.__workerSliderLatex)return void(q.cachedDisplayLatex={storedLatex:q.latex,valueLatex:q.latex});var Ee=q.latex;if(q.cachedDisplayLatex.storedLatex!==Ee)return void(q.cachedDisplayLatex={storedLatex:q.latex,valueLatex:q.latex});if(isFinite(q.__workerSliderValue)){var nt=q.controller.getFocusLocation();nt&&nt.type==="expression"&&nt.id===q.id||(q.cachedDisplayLatex.valueLatex=F(q.latex,q.__workerSliderValue))}}function Ae(q){return q.cachedDisplayLatex.valueLatex}function Be(q){var Ee=b.value(q);return Ee.superscript&&Ee.mantissa?Ee.mantissa+"^{"+Ee.superscript+"}":Ee.string}function Fe(q){return q.slider.hardMin?q.slider.min:Be(ze(q))}function Le(q){return q.slider.hardMax?q.slider.max:Be(We(q))}function ze(q){if(q.slider.hardMin)return isFinite(q.__workerSliderMin)?q.__workerSliderMin:NaN;var Ee=q.controller.isDegreeMode(),nt=u.default(q.slider.min,Ee),mt=C(q),Ct=Z(q),zt=q.slider.hardMax?q.__workerSliderMax:void 0,jt=-10;if(nt<jt&&(jt=nt),mt<jt&&(jt=mt),zt<jt&&(jt=zt),Ct){var nn=M.constrainSliderValueLikeEvaluator({target:jt,hardMin:void 0,hardMax:zt,step:Ct});jt=nn<=jt?nn:nn-Ct}return jt}function We(q){if(q.slider.hardMax)return isFinite(q.__workerSliderMax)?q.__workerSliderMax:NaN;var Ee=q.controller.isDegreeMode(),nt=u.default(q.slider.max,Ee),mt=C(q),Ct=Z(q),zt=q.slider.hardMin?q.__workerSliderMin:void 0,jt=10;if(nt>jt&&(jt=nt),mt>jt&&(jt=mt),zt>jt&&(jt=zt),Ct){var nn=M.constrainSliderValueLikeEvaluator({target:jt,hardMin:zt,hardMax:void 0,step:Ct});jt=nn>=jt?nn:nn+Ct}return jt}function Z(q){return q.__workerSliderStep}function C(q){return q.latex!==q.__workerSliderLatex?Xt(q.latex):isFinite(q.__workerSliderValue)?q.__workerSliderValue:NaN}function oe(q){return!!q.slider.isPlaying&&q.slider.loopMode===i.SliderLoopMode.PLAY_ONCE&&C(q)>=We(q)}function ge(q,Ee){return!!q.formula.viz_valids&&!!q.formula.viz_valids[Ee]}function _e(q,Ee){return q.vizProps[Ee]}function De(q,Ee,nt){var mt;q.vizProps=l.__assign(l.__assign({},q.vizProps),(mt={},mt[Ee]=nt,mt))}function je(q,Ee){return q.clickableInfo[Ee]}function Ie(q,Ee){return Ee==="assignment"?!!q.formula.clickableinfo_identifier_valid:Ee==="expression"&&!!q.formula.clickableinfo_expression_valid}function Oe(q){return q.formula.clickableinfo_latex}function N(q){return q.formula.clickableinfo_identifier}function Pe(q,Ee,nt){var mt;q.clickableInfo=l.__assign(l.__assign({},q.clickableInfo),(mt={},mt[Ee]=nt,mt))}function Xe(q){return q.clickableInfo.enabled&&it(q)}function $e(q){return!!q.__workerNeedsDotplotXMode}function ht(q){return!!q.__workerSliderMinValid}function ye(q){return!!q.__workerSliderMaxValid}function Ue(q){return!!q.__workerSliderStepValid}function we(q){return isFinite(q.__workerSampledDomainMin)?q.__workerSampledDomainMin:isFinite(q.__workerDomainMin)?q.__workerDomainMin:NaN}function Te(q){return isFinite(q.__workerSampledDomainMax)?q.__workerSampledDomainMax:isFinite(q.__workerDomainMax)?q.__workerDomainMax:NaN}function qe(q){return!!q.__workerDomainMinValid}function He(q){return!!q.__workerDomainMaxValid}function Se(q,Ee){var nt=q.cachedViewState;if(Ee.stripDefaults&&q.parametricDomain.min===""&&q.parametricDomain.max===""||(nt=l.__assign(l.__assign({},nt),{domain:{min:q.parametricDomain.min===""?"0":q.parametricDomain.min,max:q.parametricDomain.max===""?"1":q.parametricDomain.max}})),Ee.stripDefaults)return A.stripDefaults(nt);if(nt.points===void 0||nt.lines===void 0||nt.fill===void 0){var mt=y.default(nt);return mt.points===void 0&&delete mt.points,mt.lines===void 0&&delete mt.lines,mt.fill===void 0&&delete mt.fill,mt}return nt}function Ce(q){var Ee=q.cachedViewState;Ee&&Ee.folderId===q.folderId&&Ee.color===q.color&&Ee.latex===q.latex&&Ee.parametricDomain===q.parametricDomain&&Ee.fillOpacity===q.fillOpacity&&Ee.lineWidth===q.lineWidth&&Ee.polarDomain===q.polarDomain&&Ee.showLabel===q.showLabel&&Ee.cdf===q.cdf&&Ee.vizProps===q.vizProps&&Ee.clickableInfo===q.clickableInfo&&Ee.label===q.label&&Ee.hidden===q.hidden&&Ee.secret===q.secret&&Ee.fill===q.fill&&Ee.points===q.points&&Ee.lines===q.lines&&Ee.lineStyle===q.lineStyle&&Ee.pointStyle===q.pointStyle&&Ee.dragMode===q.dragMode&&Ee.labelSize===q.labelSize&&Ee.labelOrientation===q.labelOrientation&&Ee.verticalLabel===q.verticalLabel&&Ee.suppressTextOutline===q.suppressTextOutline&&Ee.interactiveLabel===q.interactiveLabel&&Ee.editableLabelMode===q.editableLabelMode&&Ee.residualVariable===q.residualVariable&&Ee.regressionParameters===q.regressionParameters&&Ee.isLogModeRegression===q.isLogModeRegression&&Ee.displayEvaluationAsFraction===q.displayEvaluationAsFraction&&Ee.slider===q.slider||(q.cachedViewState={type:q.type,id:q.id,folderId:q.folderId,color:q.color,latex:q.latex,parametricDomain:q.parametricDomain,fillOpacity:q.fillOpacity,lineWidth:q.lineWidth,polarDomain:q.polarDomain,showLabel:q.showLabel,cdf:q.cdf,vizProps:q.vizProps,clickableInfo:q.clickableInfo,label:q.label,hidden:q.hidden,secret:q.secret,points:q.points,lines:q.lines,lineStyle:q.lineStyle,pointStyle:q.pointStyle,fill:q.fill,dragMode:q.dragMode,labelSize:q.labelSize,labelOrientation:q.labelOrientation,verticalLabel:q.verticalLabel,suppressTextOutline:q.suppressTextOutline,interactiveLabel:q.interactiveLabel,editableLabelMode:q.editableLabelMode,residualVariable:q.residualVariable,regressionParameters:q.regressionParameters,isLogModeRegression:q.isLogModeRegression,displayEvaluationAsFraction:q.displayEvaluationAsFraction,slider:q.slider})}function Re(q,Ee){Ee&&St(q),q.draggingOnGraphpaper=Ee}function Ve(q){var Ee=q.memoizedUndoRedoStateParams,nt=q.cachedViewState,mt=q.preTransientState;if(!Ee||Ee.viewState!==nt||Ee.preTransientState!==mt){q.memoizedUndoRedoStateParams={viewState:nt,preTransientState:mt};var Ct;Ct=mt?l.__assign(l.__assign({},nt),{latex:mt.latex,slider:l.__assign(l.__assign({},nt.slider),mt.slider)}):l.__assign({},nt),delete Ct.regressionParameters,delete Ct.residualVariable,q.cachedUndoRedoState=Ct}}function rt(q,Ee){var nt=y.default(A.inflateDefaults(q));return l.__assign(l.__assign(l.__assign({},nt),p.DEFAULTS(Ee)),{loading:!0,labelDropdownOpen:!1,formula:{error:void 0},missingVariables:[],error:void 0,unresolved:!1,color:nt.color||Ee.getNextColor(),fill:nt.fill,points:nt.points,lines:nt.lines,pointStyle:nt.pointStyle,lineStyle:nt.lineStyle,displayEvaluationAsFraction:nt.displayEvaluationAsFraction,shouldGraph:void 0,sliderDragging:void 0,sliderAnimationTargetValue:void 0,sliderLastTickTime:void 0,draggingOnGraphpaper:!1,cachedUndoRedoState:void 0,cachedParsableState:void 0,cachedViewState:void 0,cachedDisplayLatex:{storedLatex:"",valueLatex:""}})}function at(q){var Ee=r.getParentFolderModel(q),nt=!(!Ee||!Ee.hidden),mt=q.cachedViewState,Ct=q.index,zt=q.showLabel&&!nt,jt=q.shouldGraph,nn=q.slider.hardMin?q.slider.min:"",Ft=q.slider.hardMax?q.slider.max:"",Gt=q.slider.step,Mt=q.memoizedParsableStateParams;if(!Mt||Mt.viewState!==mt||Mt.index!==Ct||Mt.showLabel!==zt||Mt.shouldGraph!==jt||Mt.polarDomainMin!==q.polarDomain.min||Mt.polarDomainMax!==q.polarDomain.max||Mt.fillOpacity!==q.fillOpacity||Mt.lineWidth!==q.lineWidth||Mt.parametricDomainMin!==q.parametricDomain.min||Mt.parametricDomainMax!==q.parametricDomain.max||Mt.sliderMin!==nn||Mt.sliderMax!==Ft||Mt.sliderStep!==Gt){q.memoizedParsableStateParams={viewState:mt,index:Ct,polarDomainMin:q.polarDomain.min,polarDomainMax:q.polarDomain.max,fillOpacity:q.fillOpacity,lineWidth:q.lineWidth,parametricDomainMin:q.parametricDomain.min,parametricDomainMax:q.parametricDomain.max,sliderMin:nn,sliderMax:Ft,sliderStep:Gt,showLabel:zt,shouldGraph:jt};var Ot=A.computeParsableState(mt);Ot.index=Ct,Ot.showLabel=zt,Ot.shouldGraph=jt,q.cachedParsableState=Ot}}function yt(q,Ee){Ee(q.latex),q.residualVariable&&Ee(q.residualVariable)}function Pt(q){var Ee=q.sliderExists&&(q.slider.isPlaying||q.sliderDragging);q.draggingOnGraphpaper||Ee?q.preTransientState||(q.preTransientState={latex:q.latex,slider:{min:q.slider.min,max:q.slider.max,playDirection:q.slider.playDirection}}):delete q.preTransientState,q.sliderExists&&q.slider.isPlaying||(q.sliderLastTickTime=void 0),p.updateIsHiddenFromUI(q),le(q),re(q),Ce(q),Ve(q),at(q),me(q)}function vt(q,Ee){h.copyProperties({from:Ee,to:q,props:{id:!1,type:!1,color:!0,folderId:!0,latex:!0,polarDomain:!0,parametricDomain:!0,showLabel:!0,label:!0,cdf:!0,vizProps:!0,clickableInfo:!0,hidden:!0,secret:!0,points:!0,lines:!0,lineStyle:!0,pointStyle:!0,fill:!0,fillOpacity:!0,lineWidth:!0,dragMode:!0,labelSize:!0,labelOrientation:!0,verticalLabel:!0,suppressTextOutline:!0,interactiveLabel:!0,editableLabelMode:!0,residualVariable:!0,regressionParameters:!0,isLogModeRegression:!0,displayEvaluationAsFraction:!0,slider:!0}})}function At(q,Ee){Ee?Dt(q,{hardMin:!0,min:Ee}):Dt(q,{hardMin:!1,min:"-10"})}function Ut(q,Ee){Ee?Dt(q,{hardMax:!0,max:Ee}):Dt(q,{hardMax:!1,max:"10"})}function Dt(q,Ee){q.slider=l.__assign(l.__assign({},q.slider),Ee)}function on(q,Ee){q&&q.sliderExists&&q.slider.isPlaying!==Ee&&(Dt(q,{isPlaying:Ee}),Ee&&(St(q),q.sliderAnimationTargetValue=C(q)))}function St(q){if(!q.slider.hardMin){var Ee=E.default(ze(q));Ee!==q.slider.min&&Dt(q,{min:Ee})}if(!q.slider.hardMax){var nt=E.default(We(q));nt!==q.slider.max&&Dt(q,{max:nt})}}function Xt(q){var Ee=x.parse(q);if(Ee.type!=="Assignment")return NaN;if(Ee._expression.type!=="Constant")return NaN;if(!k.PolicyGraphing.validLHS(Ee._symbol))return NaN;if(t[Ee._symbol])return NaN;var nt=Ee._expression.asValue();return typeof nt=="number"?nt:NaN}function qt(q,Ee){var nt=Xt(Ee);if(isFinite(nt)){var mt=M.determineWhichLimitsAreCompatibleWithValue({target:nt,step:Z(q),hardMin:q.slider.hardMin?ze(q):void 0,hardMax:q.slider.hardMax?We(q):void 0});mt.min||Dt(q,{hardMin:!1,min:"-10"}),mt.max||Dt(q,{hardMax:!1,max:"10"}),mt.step||Dt(q,{step:""})}q.latex=Ee}function bn(q,Ee){Dt(q,{loopMode:Ee,playDirection:1}),Ee===i.SliderLoopMode.PLAY_INDEFINITELY&&Dt(q,{hardMin:!1,hardMax:!1,min:"",max:""}),q.sliderAnimationTargetValue=ze(q)}function Fn(q,Ee){Ee&&St(q),q.sliderDragging=Ee}function sn(q,Ee){Dt(q,{step:Ee})}function tn(q,Ee){Dt(q,{animationPeriod:Ee})}function se(q){return q.displayEvaluationAsFraction}function he(q,Ee){q.displayEvaluationAsFraction=Ee}function U(q,Ee){q.label=Ee}function V(q,Ee){q.showLabel=Ee}function O(q,Ee){q.polarDomain=l.__assign(l.__assign({},q.polarDomain),{min:Ee})}function de(q,Ee){q.parametricDomain=l.__assign(l.__assign({},q.parametricDomain),{min:Ee})}function j(q,Ee){q.polarDomain=l.__assign(l.__assign({},q.polarDomain),{max:Ee})}function xe(q,Ee){q.parametricDomain=l.__assign(l.__assign({},q.parametricDomain),{max:Ee})}function be(q,Ee){q.isLogModeRegression=Ee}function Ne(q,Ee){q.color=Ee}function Ye(q,Ee){q.fill=Ee}function tt(q,Ee){q.fillOpacity!==Ee&&(q.fillOpacity=Ee)}function ot(q,Ee){q.lineWidth!==Ee&&(q.lineWidth=Ee)}function ct(q,Ee){q.labelDropdownOpen=Ee}function ut(q,Ee){q.dragMode!==Ee&&(q.dragMode=Ee,Ee!==n.DragMode.NONE&&(q.pointStyle=s.PointStyle.POINT))}function ft(q,Ee){q.points=Ee}function xt(q,Ee){q.pointStyle!==Ee&&(q.pointStyle=Ee,Ee!==s.PointStyle.POINT&&(q.dragMode=n.DragMode.NONE))}function _t(q,Ee){q.lines=Ee}function It(q,Ee){q.lineStyle!==Ee&&(q.lineStyle=Ee)}function kt(q,Ee){q.labelSize=Ee}function Et(q,Ee){q.labelOrientation=Ee}function gt(q,Ee){q.verticalLabel=Ee}function Qt(q,Ee){q.suppressTextOutline=Ee}function Rt(q,Ee){q.interactiveLabel=Ee}function yn(q,Ee){q.editableLabelMode=Ee}function Tt(q){return q.editableLabelMode}function cn(q){var Ee=q.editableLabelMode;return Ee===A.EditableLabelMode.Math||Ee===A.EditableLabelMode.Text}function Er(q,Ee){q.hidden=Ee,!Ee&&ln(q)&&(q.lines=q.points=q.fill=void 0)}function ln(q){var Ee=q.points,nt=q.lines,mt=q.fill,Ct=m.getReconciledExpressionProps(q.formula.expression_type,{points:Ee,lines:nt,fill:mt});return!Ct.points&&!Ct.lines&&!Ct.fill}function kn(q){return Ko(q)||so(q)}function On(q){return q.polarDomain.min}function Mn(q){return q.polarDomain.max}function Sn(q){return q.parametricDomain.min}function lr(q){return q.parametricDomain.max}function Wn(q){return!!q.sliderExists}function ao(q){return q.formula.expression_type===m.ExpressionType.POLYGON}function Ko(q){return q.formula.expression_type===m.ExpressionType.PARAMETRIC}function so(q){return q.formula.expression_type===m.ExpressionType.POLAR}function ts(q){return q.formula.expression_type===m.ExpressionType.SINGLE_POINT}function ns(q){return q.formula.expression_type===m.ExpressionType.POINT_LIST}function rs(q){return q.formula.expression_type===m.ExpressionType.POINT_LIST||q.formula.expression_type===m.ExpressionType.SINGLE_POINT}function Jo(q){var Ee=qr(q);return!(!Ee||Ee.type!=="visualization"||Ee.symbol!=="boxplot")}function co(q){var Ee=qr(q);return!(!Ee||Ee.type!=="visualization"||Ee.symbol!=="dotplot")}function Mi(q){var Ee=qr(q);return!(!Ee||Ee.type!=="visualization"||Ee.symbol!=="histogram")}function Zo(q){return Jo(q)||co(q)||Mi(q)}function lo(q){return q.formula.expression_type===m.ExpressionType.TTEST}function is(q){return q.formula.expression_type===m.ExpressionType.STATS}function os(q){return!!qr(q)}function uo(q){var Ee=qr(q);return!(!Ee||Ee.type!=="distribution")}function as(q){var Ee=q.formula;return!!Ee&&!!Ee.is_discrete_distribution}function qr(q){if(q.controller.areDistributionsEnabled()&&q.latex)return q.cachedParseToplevelFunction&&q.cachedParseToplevelFunction.latex===q.latex||(q.cachedParseToplevelFunction={latex:q.latex,spec:v.parseToplevelFunction(q.latex)}),q.cachedParseToplevelFunction.spec}function $o(q){return zr(q)&&uo(q)}function zr(q){return!!q.formula.expression_type}function po(q){return!!q.formula.is_concrete_list}function ho(q){return!!$o(q)&&!po(q)&&q.cdf.show}function ea(q){return q.cdf.min}function ss(q){return q.cdf.max}function cs(q){var Ee=q.formula.cdf_min_default;return Ee===-1/0?"-\\infty":isFinite(Ee)?Ee+"":"-\\infty"}function I(q){var Ee=q.formula.cdf_max_default;return Ee===1/0?"\\infty":isFinite(Ee)?Ee+"":"\\infty"}function R(q,Ee){q.cdf=l.__assign(l.__assign({},q.cdf),{show:Ee})}function W(q,Ee){q.cdf=l.__assign(l.__assign({},q.cdf),{min:Ee})}function ne(q,Ee){q.cdf=l.__assign(l.__assign({},q.cdf),{max:Ee})}function fe(q){return q.__workerCDFMinValid!==!1}function ve(q){return q.__workerCDFMaxValid!==!1}function Me(q){return q.__workerFillOpacityValid!==!1}function Ge(q){return q.__workerLineWidthValid!==!1}function Ze(q){return isFinite(q.__workerCDFEvaluation)?q.__workerCDFEvaluation:0}function it(q){return!!m.isClickableExpressionType(q.formula.expression_type)&&(!q.reconciledDragMode||q.reconciledDragMode===n.DragMode.NONE)}function lt(q){q.showLabel=A.DEFAULTS.showLabel,q.label=A.DEFAULTS.label,q.hidden=A.DEFAULTS.hidden,q.dragMode=A.DEFAULTS.dragMode,q.fill=A.DEFAULTS.fill,q.fillOpacity=A.DEFAULTS.fillOpacity,q.lineWidth=A.DEFAULTS.lineWidth,q.points=A.DEFAULTS.points,q.pointStyle=A.DEFAULTS.pointStyle,q.lines=A.DEFAULTS.lines,q.lineStyle=A.DEFAULTS.lineStyle,q.polarDomain=A.DEFAULTS.polarDomain,q.parametricDomain=A.DEFAULTS.parametricDomain,q.slider=A.SLIDER_DEFAULTS,q.latex="",q.labelSize=g.LabelSize.MEDIUM,q.labelOrientation=d.LabelOrientation.DEFAULT,q.displayEvaluationAsFraction=A.DEFAULTS.displayEvaluationAsFraction,q.verticalLabel=!1,q.suppressTextOutline=!1,q.interactiveLabel=!1,q.editableLabelMode=A.DEFAULTS.editableLabelMode,q.cdf=A.DEFAULTS.cdf,q.vizProps=A.DEFAULTS.vizProps}Object.defineProperty(c,"__esModule",{value:!0}),c.EvaluationLabelOptions={smallCutoff:1e-6,bigCutoff:1e9,digits:12},c.isRationalizableConstant=J,c.isGraphable=X,c.shouldShowEvaluation=te,c.getEvaluationValue=H,c.getTTestResults=z,c.getStatsResults=B,c.computeNewSliderLatex=F,c.isEmpty=$,c.updateReconciledDragMode=re,c.adjustSliderByMovablePoint=ie,c.adjustSliderByKeyboard=Q,c.adjustSliderByDraggingThumb=pe,c.tickSliderStep=ee,c.onFormulaUpdate=ae,c.computeShouldGraph=le,c.updateDisplayLatex=me,c.getDisplayLatex=Ae,c.getDisplaySliderMin=Fe,c.getDisplaySliderMax=Le,c.getSliderMin=ze,c.getSliderMax=We,c.getSliderStep=Z,c.getSliderValue=C,c.isSliderAtEndOfPlayOnce=oe,c.isVizPropValid=ge,c.getVizPropLatex=_e,c.setVizProp=De,c.getClickableInfoPropLatex=je,c.isClickableInfoPropValid=Ie,c.getClickableInfoUpdateLatex=Oe,c.getClickableInfoUpdateIdentifier=N,c.setClickableInfoProp=Pe,c.isClickableObject=Xe,c.needsDotplotXMode=$e,c.isSliderMinValid=ht,c.isSliderMaxValid=ye,c.isSliderStepValid=Ue,c.getDomainMin=we,c.getDomainMax=Te,c.isDomainMinValid=qe,c.isDomainMaxValid=He,c.getState=Se,c.updateCachedViewState=Ce,c.setIsDraggingOnGrapher=Re,c.updateCachedUndoRedoState=Ve,c.initModel=rt,c.updateCachedParsableState=at,c.eachLatex=yt,c.onControllerUpdate=Pt,c.restoreState=vt,c.setSliderMin=At,c.setSliderMax=Ut,c.setSliderIsPlaying=on,c.commitSliderSoftLimits=St,c.extractSliderValueFromLatex=Xt,c.setLatex=qt,c.setSliderLoopMode=bn,c.setSliderDragging=Fn,c.setSliderStep=sn,c.setSliderAnimationPeriod=tn,c.shouldEvaluationDisplayAsFraction=se,c.setEvaluationAsFraction=he,c.setLabel=U,c.setShowLabel=V,c.setPolarDomainMin=O,c.setParametricDomainMin=de,c.setPolarDomainMax=j,c.setParametricDomainMax=xe,c.setLogMode=be,c.setColor=Ne,c.setFill=Ye,c.setFillOpacity=tt,c.setLineWidth=ot,c.setLabelDropdownOpen=ct,c.setDragMode=ut,c.setPoints=ft,c.setPointStyle=xt,c.setLines=_t,c.setLineStyle=It,c.setLabelSize=kt,c.setLabelOrientation=Et,c.setVerticalLabel=gt,c.setSuppressTextOutline=Qt,c.setInteractiveLabel=Rt,c.setEditableLabelMode=yn,c.getEditableLabelMode=Tt,c.hasEditableLabel=cn,c.setHidden=Er,c.areAllVisibilityPropsOff=ln,c.hasDomain=kn,c.getPolarDomainMin=On,c.getPolarDomainMax=Mn,c.getParametricDomainMin=Sn,c.getParametricDomainMax=lr,c.hasSlider=Wn,c.isPolygon=ao,c.isParametric=Ko,c.isPolar=so,c.isSinglePoint=ts,c.isPointList=ns,c.isPointOrPointList=rs,c.isBoxPlot=Jo,c.isDotPlot=co,c.isHistogram=Mi,c.isVisualization=Zo,c.isTTest=lo,c.isStats=is,c.isToplevelFunction=os,c.isToplevelDistribution=uo,c.isDiscreteDistribution=as,c.parseToplevelFunction=qr,c.shouldShowCDFCheckbox=$o,c.isPrimaryLatexValid=zr,c.isListValuedDistribution=po,c.shouldShowCDFFooter=ho,c.getCDFMin=ea,c.getCDFMax=ss,c.getCDFMinPlaceholder=cs,c.getCDFMaxPlaceholder=I,c.setShowCDF=R,c.setCDFMin=W,c.setCDFMax=ne,c.isCDFMinValid=fe,c.isCDFMaxValid=ve,c.isFillOpacityValid=Me,c.isLineWidthValid=Ge,c.getCDFEvaluation=Ze,c.isClickableAllowed=it,c.blankOutExpressionAfterClearingLatex=lt}),P("core/graphing-calc/json/folder",["require","exports","tslib","core/lib/default-spec"],function(S,c,x,t){function l(i){return x.__assign(x.__assign({},c.DEFAULTS),i)}function n(i){return t.stripDefaults(c.DEFAULTS,i)}Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULTS={collapsed:!1,hidden:!1,secret:!1,title:""},c.inflateDefaults=l,c.stripDefaults=n}),P("graphing-calc/models/folder",["require","exports","tslib","core/lib/deepCopy","lib/copy-properties","./abstract-item","./list","core/graphing-calc/json/folder"],function(S,c,x,t,l,n,i,s){function g(b,E){var M=b.cachedViewState;return E.stripDefaults?s.stripDefaults(M):M}function d(b){b.cachedViewState={type:b.type,id:b.id,title:b.title,hidden:b.hidden,collapsed:b.collapsed,secret:b.secret}}function u(b){b.cachedUndoRedoState=b.cachedViewState}function f(b,E){var M=t.default(s.inflateDefaults(b));return x.__assign(x.__assign(x.__assign({},M),n.DEFAULTS(E)),{cachedUndoRedoState:{},cachedViewState:{}})}function y(b){p(b),n.updateIsHiddenFromUI(b),d(b),u(b)}function h(b,E){l.copyProperties({from:E,to:b,props:{id:!1,type:!1,hidden:!0,secret:!0,collapsed:!0,title:!0}})}function p(b){var E=b.controller,M=E.getSelectedItem();b.collapsed?M&&M.type!=="folder"&&M.folderId===b.id?(b.selectedHiddenChild=M,i.setSelected(E.getListModel(),b)):M!==b&&(b.selectedHiddenChild=void 0):(M===b&&b.selectedHiddenChild&&i.setSelected(E.getListModel(),b.selectedHiddenChild),b.selectedHiddenChild=void 0)}function r(b,E){b.collapsed=E}function o(b,E){b.title=E}function m(b,E){b.hidden=E}Object.defineProperty(c,"__esModule",{value:!0}),c.getState=g,c.updateCachedViewState=d,c.updateCachedUndoRedoState=u,c.initModel=f,c.onControllerUpdate=y,c.restoreState=h,c.updateSelectedHiddenChild=p,c.setCollapsed=r,c.setTitle=o,c.setHidden=m}),P("core/graphing-calc/json/text",["require","exports","tslib","core/lib/default-spec"],function(S,c,x,t){function l(i){return x.__assign(x.__assign({},c.DEFAULTS),i)}function n(i){return t.stripDefaults(c.DEFAULTS,i)}Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULTS={folderId:"",text:"",secret:!1},c.inflateDefaults=l,c.stripDefaults=n}),P("graphing-calc/models/text",["require","exports","tslib","./abstract-item","core/lib/deepCopy","lib/copy-properties","core/graphing-calc/json/text"],function(S,c,x,t,l,n,i){function s(p,r){p.text=r}function g(p,r){var o=l.default(i.inflateDefaults(p));return x.__assign(x.__assign(x.__assign({},o),t.DEFAULTS(r)),{cachedUndoRedoState:{},cachedViewState:{}})}function d(p){t.updateIsHiddenFromUI(p),y(p),h(p)}function u(p,r){n.copyProperties({from:r,to:p,props:{id:!1,type:!1,folderId:!0,text:!0,secret:!0}})}function f(p,r){var o=p.cachedViewState;return r.stripDefaults?i.stripDefaults(o):o}function y(p){p.cachedViewState={type:p.type,id:p.id,folderId:p.folderId,text:p.text,secret:p.secret}}function h(p){p.cachedUndoRedoState=p.cachedViewState}Object.defineProperty(c,"__esModule",{value:!0}),c.setText=s,c.initModel=g,c.onControllerUpdate=d,c.restoreState=u,c.getState=f,c.updateCachedViewState=y,c.updateCachedUndoRedoState=h}),P("graphing-calc/models/helper-expression",["require","exports","core/math/evaluationstate","tslib","underscore"],function(S,c,x,t,l){function n(s){return t.__assign(t.__assign({},s),{formula:x.default(),cachedParsableState:{type:"statement",id:s.id,latex:s.latex,shouldGraph:!1}})}function i(s,g,d){g.formula=d;var u,f=g.proxy,y={numericValue:f.numericValue,listValue:f.listValue};d.zero_values&&d.zero_values.length===1&&(u=d.zero_values[0].val),f.numericValue=l.isNumber(u)?u:NaN,f.listValue=l.isArray(u)?u.slice(0):void 0,l.isEqual(f.numericValue,y.numericValue)||s.runAfterDispatch(function(){f.notifyPropertyChange("numericValue")}),l.isEqual(f.listValue,y.listValue)||s.runAfterDispatch(function(){f.notifyPropertyChange("listValue")})}Object.defineProperty(c,"__esModule",{value:!0}),c.init=n,c.onFormulaUpdate=i}),P("core/graphing-calc/json/image",["require","exports","tslib","core/lib/default-spec"],function(S,c,x,t){function l(s){return x.__assign(x.__assign(x.__assign({},c.DEFAULTS),s),{clickableInfo:x.__assign(x.__assign({},c.CLICKABLEINFO_DEFAULTS),s.clickableInfo)})}function n(s){var g=t.stripDefaults(c.DEFAULTS,s),d=t.stripDefaultsAndMaybeReturnUndefined(c.CLICKABLEINFO_DEFAULTS,s.clickableInfo);return d===void 0?delete g.clickableInfo:g.clickableInfo=d,g}function i(s){return{type:"image",id:s.id,center:s.center,angle:s.angle,width:s.width,height:s.height,opacity:s.opacity,clickableInfo:s.clickableInfo,guid:"",index:0,color:"",shouldGraph:s.hidden,showPoints:!1}}Object.defineProperty(c,"__esModule",{value:!0}),c.CLICKABLEINFO_DEFAULTS={enabled:!1,description:"",assignment:"",expression:"",hoveredImage:"",depressedImage:""},c.DEFAULTS={folderId:"",hidden:!1,secret:!1,center:"\\left(0,0\\right)",angle:"0",width:"10",height:"10",opacity:"1",foreground:!1,name:"",clickableInfo:c.CLICKABLEINFO_DEFAULTS},c.inflateDefaults=l,c.stripDefaults=n,c.computeParsableState=i}),P("graphing-calc/models/image",["require","exports","tslib","core/lib/color-helpers","./abstract-item","core/lib/deepCopy","lib/copy-properties","./list","jquery","core/graphing-calc/json/image"],function(S,c,x,t,l,n,i,s,g,d){function u(ae,le){ae.hidden=le}function f(ae,le){ae.secret=le}function y(ae,le,me){ae[le]=me}function h(ae,le){return ae[le]}function p(ae,le){ae.name=le}function r(ae,le){ae.opacity=le}function o(ae,le){ae.foreground=le}function m(ae,le){ae.image_url=le}function b(ae){var le=d.computeParsableState(ae);le.color=ae.color,le.index=ae.index,le.guid=ae.guid,le.shouldGraph=ae.shouldGraph,le.showPoints=ae.showPoints,ae.cachedParsableState=le}function E(ae){ae.draggingOnGraphpaper?ae.preTransientState||(ae.preTransientState={center:ae.center,angle:ae.angle,width:ae.width,height:ae.height,opacity:ae.opacity}):delete ae.preTransientState,l.updateIsHiddenFromUI(ae);var le=s.getParentFolderModel(ae);ae.shouldGraph=(!le||!le.hidden)&&!ae.hidden,ae.showPoints=ae.shouldGraph&&s.isItemSelected(ae)&&ae.loadStatus==="loaded",v(ae),J(ae),b(ae)}function M(ae,le){ae.formula=le,ae.missingVariables=ae.formula.variables||[],ae.computed_x=ae.formula.dimensions.x,ae.computed_y=ae.formula.dimensions.y,ae.computed_radian_angle=ae.formula.dimensions.radianAngle,ae.computed_height=ae.formula.dimensions.height,ae.computed_width=ae.formula.dimensions.width,ae.computed_opacity=ae.formula.dimensions.opacity;var me={center:ae.controller.t("Invalid center. Try, for example, (0,0)."),angle:ae.controller.t("Invalid angle. Try using any number."),width:ae.controller.t("Invalid width. Try using any number."),height:ae.controller.t("Invalid height. Try using any number."),opacity:ae.controller.t("Invalid opacity. Try using any number.")},Ae=[];for(var Be in ae.formula.errorMap)ae.formula.errorMap[Be]&&Ae.push(me[Be]);ae.error=Ae[0],ae.inputErrors={center:!!ae.formula.errorMap.center,width:!!ae.formula.errorMap.width,height:!!ae.formula.errorMap.height,angle:!!ae.formula.errorMap.angle,opacity:!!ae.formula.errorMap.opacity}}function D(ae,le){return!!ae.inputErrors&&ae.inputErrors[le]}function A(ae,le){var me=ae.cachedViewState;return le.stripDefaults?d.stripDefaults(me):me}function v(ae){var le=ae.cachedViewState.clickableInfo,me=!0,Ae=!0;if(le&&(le.depressedImage===ae.clickableInfo.depressedImage&&(Ae=!1),le.hoveredImage===ae.clickableInfo.hoveredImage&&(me=!1)),me&&(ae.hoveredImageObj&&(g(ae.hoveredImageObj).off("load"),delete ae.hoveredImageObj),ae.clickableInfo.hoveredImage)){ae.hoveredImageObj=new Image;var Be=function(){var We=ae.controller.getGrapher();We&&We.redrawAllLayers()},Fe=function(){};X(ae.hoveredImageObj,ae.clickableInfo.hoveredImage,Be,Fe)}if(Ae&&(ae.depressedImageObj&&(g(ae.depressedImageObj).off("load"),delete ae.depressedImageObj),ae.clickableInfo.depressedImage)){ae.depressedImageObj=new Image;var Be=function(){var C=ae.controller.getGrapher();C&&C.redrawAllLayers()},Fe=function(){};X(ae.depressedImageObj,ae.clickableInfo.depressedImage,Be,Fe)}if(ae.cachedViewState.image_url!==ae.image_url){g(ae.imageObj).off("load"),ae.imageObj=new Image;var Le=function(){ae.controller.dispatch({type:"image-load-success",id:ae.id})},ze=function(){ae.controller.dispatch({type:"image-load-error",id:ae.id})};X(ae.imageObj,ae.image_url,Le,ze)}ae.cachedViewState={type:ae.type,id:ae.id,folderId:ae.folderId,image_url:ae.image_url,name:ae.name,hidden:ae.hidden,height:ae.height,width:ae.width,center:ae.center,angle:ae.angle,opacity:ae.opacity,foreground:ae.foreground,secret:ae.secret,clickableInfo:ae.clickableInfo}}function k(ae,le){ae.draggingOnGraphpaper=le}function J(ae){var le=ae.cachedViewState;ae.preTransientState&&(le=x.__assign(x.__assign({},le),ae.preTransientState)),ae.cachedUndoRedoState=le}function X(ae,le,me,Ae){g(ae).on("load",me).on("error",Ae),/^data:/.test(le)||(ae.crossOrigin="anonymous"),ae.src=le}function te(ae,le){var me=n.default(d.inflateDefaults(ae));return x.__assign(x.__assign(x.__assign({},me),l.DEFAULTS(le)),{color:t.colors.BLUE,loadStatus:"loading",failures:0,imageObj:new Image,hoveredImageObj:void 0,depressedImageObj:void 0,shouldGraph:void 0,showPoints:void 0,error:void 0,formula:void 0,missingVariables:[],computed_x:void 0,computed_y:void 0,computed_width:void 0,computed_height:void 0,computed_radian_angle:void 0,computed_opacity:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoState:{}})}function H(ae,le){i.copyProperties({from:le,to:ae,props:{id:!1,type:!1,image_url:!0,name:!0,folderId:!0,hidden:!0,secret:!0,center:!0,opacity:!0,angle:!0,width:!0,height:!0,foreground:!0,clickableInfo:!0}})}function z(ae){for(var le=ae.controller,me=ae.files,Ae=ae.id,Be={errors:[],tokens:[]},Fe=0;Fe<me.length;Fe++){var Le=me[Fe];Le.type.match("image/*")?Be.tokens.push(B({controller:le,file:Le,id:Ae})):Be.errors.push(le.t('The file "__file__" is not an image',{file:Le.name}))}return Be}function B(ae){var le=ae.controller,me=ae.file,Ae=ae.id,Be=""+ee++;return le.getGraphSettings().config.imageUploadCallback(me,function(Fe,Le){setTimeout(function(){if(Fe)le.dispatch({type:"image-upload-error",token:Be,error:Fe});else{var ze=new Image;X(ze,Le,function(){var We=ze.width,Z=ze.height,C=Math.max(We,Z)/Math.min(We,Z);We<Z?(Z=10,We=Math.round(10*Z/C)/10):(We=10,Z=Math.round(10*We/C)/10),le.dispatch({type:"image-upload-success",token:Be,url:Le,width:We+"",height:Z+"",name:me.name,id:Ae})},function(){le.dispatch({type:"image-upload-error",token:Be,error:""})})}})}),Be}function F(ae,le){ae.loadStatus=le,le==="loaded"&&(ae.failures=0),le==="failed"&&(ae.failures+=1)}function $(ae){ae.imageObj.src=ae.imageObj.src,F(ae,"loading")}function re(ae,le){return ae.clickableInfo[le]}function K(ae,le){return!!ae.formula&&(le==="assignment"?!!ae.formula.clickableinfo_identifier_valid:le==="expression"&&!!ae.formula.clickableinfo_expression_valid)}function ue(ae){if(ae.formula)return ae.formula.clickableinfo_latex}function ie(ae){if(ae.formula)return ae.formula.clickableinfo_identifier}function Q(ae,le,me){var Ae;ae.clickableInfo=x.__assign(x.__assign({},ae.clickableInfo),(Ae={},Ae[le]=me,Ae))}function pe(ae){return ae.clickableInfo.enabled}Object.defineProperty(c,"__esModule",{value:!0}),c.setHidden=u,c.setSecret=f,c.setMQAttribute=y,c.getMQAttribute=h,c.setName=p,c.setOpacity=r,c.setForeground=o,c.setImageURL=m,c.updateCachedParsableState=b,c.onControllerUpdate=E,c.onFormulaUpdate=M,c.hasInputError=D,c.getState=A,c.updateCachedViewState=v,c.setIsDraggingOnGrapher=k,c.updateCachedUndoRedoState=J,c.initModel=te,c.restoreState=H,c.uploadImages=z;var ee=0;c.uploadImageAndGenerateToken=B,c.setLoadStatus=F,c.retryLoading=$,c.getClickableInfoPropLatex=re,c.isClickableInfoPropValid=K,c.getClickableInfoUpdateLatex=ue,c.getClickableInfoUpdateIdentifier=ie,c.setClickableInfoProp=Q,c.isClickableObject=pe}),P("graphing-calc/models/list",["require","exports","lib/color-distance","tslib","./expression","./folder","./table","./text","./helper-expression","./image","core/types/graphmode","core/lib/color-helpers","underscore","core/lib/deepCopy"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h){function p(ye){return{controller:ye,__itemModelArray:[],__itemIdToModel:{},__helperIdToModel:{},__anyDependsOnRandomSeed:!1,drawOrder:[],colorIdx:0,expressionAnalysis:{},nextDisplayIndex:1}}function r(ye){for(var Ue=0;Ue<ye.__itemModelArray.length;Ue++){var we=ye.__itemModelArray[Ue];if(we.type==="image"&&we.loadStatus==="loading")return!0}return!1}function o(ye){var Ue=y.filter(y.values(ye.controller.getColors()),function(Te){return Te!=f.colors.ORANGE}),we=Ue[ye.colorIdx];return ye.colorIdx=(ye.colorIdx+1)%Ue.length,we}function m(ye,Ue){return ye.__itemModelArray[Ue]}function b(ye){for(var Ue=0;Ue<ye.__itemModelArray.length;Ue++){var we=ye.__itemModelArray[Ue];if(J(we))return we}}function E(ye){for(var Ue=ye.__itemModelArray.length-1;Ue>=0;Ue--){var we=ye.__itemModelArray[Ue];if(J(we))return we}}function M(ye,Ue){var we;do{if(--Ue===-1)return;we=m(ye,Ue)}while(we&&!J(we));return we}function D(ye,Ue){var we,Te=ae(ye);do{if(++Ue===Te)return;we=m(ye,Ue)}while(we&&!J(we));return we}function A(ye){if(ye.type!=="folder"&&ye.folderId){var Ue=ye.controller.getListModel(),we=re(Ue,ye.folderId);if(we&&we.type==="folder")return we}}function v(ye,Ue){var we=re(ye,Ue);if(!we||we.type!=="folder")return 0;for(var Te=0,qe=ye.__itemModelArray.length,He=we.index+1;He<qe;He++){var Se=ye.__itemModelArray[He];if(Se.type==="folder"||Se.folderId!==Ue)break;Te+=1}return Te}function k(ye){if(!ye)return!1;if(ye.secret)return!0;var Ue=A(ye);return!(!Ue||!Ue.secret)}function J(ye){return!X(ye)}function X(ye){if(!ye||ye.filteredBySearch)return!0;if(ye.controller.isItemBeingDragged(ye.id))return!1;if(!ye.controller.canAdministerSecretFolders()&&k(ye))return!0;var Ue=A(ye);return!(!Ue||!Ue.collapsed||ye.controller.getIDESearchStr())}function te(ye){return ye.__itemModelArray}function H(ye){return y.values(ye.__helperIdToModel)}function z(ye,Ue){for(var we=0;we<ye.__itemModelArray.length;we++){var Te=ye.__itemModelArray[we];switch(Te.type){case"expression":l.eachLatex(Te,Ue);break;case"table":i.eachLatex(Te,Ue);break;case"image":case"folder":case"text":break;default:return Te}}}function B(ye,Ue){for(var we=0;we<ye.__itemModelArray.length;we++)if(Ue){var Te=ye.__itemModelArray[we];switch(Te.type){case"expression":Te.filteredBySearch=!0,l.eachLatex(Te,function(He){He.indexOf(Ue)>=0&&(Te.filteredBySearch=!1,Te.folderId&&(ye.__itemIdToModel[Te.folderId].filteredBySearch=!1))});break;case"table":Te.filteredBySearch=!0,i.eachLatex(Te,function(He){He.indexOf(Ue)>=0&&(Te.filteredBySearch=!1,Te.folderId&&(ye.__itemIdToModel[Te.folderId].filteredBySearch=!1))});break;case"image":case"folder":case"text":Te.filteredBySearch=!0;break;default:var qe=Te;return qe}}else ye.__itemModelArray[we].filteredBySearch=!1}function F(ye){var Ue=[];z(ye,function(qe){if(qe.indexOf("~")===-1&&qe.indexOf("\\sim")===-1)for(var He=/_(\d)|_\{(?:\s|\\space)*(\d+)(?:\s|\\space)*\}/g;;){var Se=He.exec(qe);if(!Se)break;Ue.push(parseInt(Se[1]||Se[2],10))}}),Ue.sort(function(qe,He){return qe-He});for(var we=1,Te=0;Te<Ue.length;Te++)Ue[Te]===we&&we++;return we}function $(ye){var Ue=[];y.each(ye.__itemModelArray,function(we){we.type==="table"?y.each(we.columnModels,function(Te){Ue.push(Te.id)}):Ue.push(we.id)}),ye.drawOrder=Ue}function re(ye,Ue){return ye.__itemIdToModel[Ue]}function K(ye,Ue){for(var we=[],Te=0;Te<ye.__itemModelArray.length;Te++){var qe=ye.__itemModelArray[Te];qe.type==="expression"&&qe.dependent===Ue&&we.push(qe)}return we}function ue(ye,Ue){return ye.__helperIdToModel[Ue]}function ie(ye,Ue){var we=g.init(Ue);ye.__helperIdToModel[we.id]=we}function Q(ye){ye.__anyDependsOnRandomSeed=!1;for(var Ue=0;Ue<ye.__itemModelArray.length;Ue++){var we=ye.__itemModelArray[Ue];if(we&&"formula"in we&&we.formula&&we.formula.depends_on_random_seed)return void(ye.__anyDependsOnRandomSeed=!0)}}function pe(ye){for(var Ue=!ye.controller.canAdministerSecretFolders(),we=1,Te=1,qe=0;qe<ye.__itemModelArray.length;qe++){var He=ye.__itemModelArray[qe];He.index=qe,He.displayIndex=we,k(He)&&(He.secretIndex=Te,Te+=1),Ue&&k(He)||(we+=1)}ye.nextDisplayIndex=we}function ee(ye){ye.__itemModelArray=[],ye.__itemIdToModel={},ye.__helperIdToModel={},ye.__anyDependsOnRandomSeed=!1}function ae(ye){return ye.__itemModelArray.length}function le(ye){return ye.nextDisplayIndex===1}function me(ye){for(var Ue=[],we=0;we<ye.__itemModelArray.length;we++){var Te=ye.__itemModelArray[we];Te.type==="expression"&&Te.sliderExists&&Ue.push(Te)}return Ue}function Ae(ye){return ye.selectedItem}function Be(ye){return{list:ye.__itemModelArray.map(function(Ue){return Ue.cachedUndoRedoState})}}function Fe(ye,Ue){return{list:ye.__itemModelArray.map(function(we){switch(we.type){case"expression":return l.getState(we,Ue);case"image":return d.getState(we,Ue);case"table":return i.getState(we,Ue);case"folder":return n.getState(we,Ue);case"text":return s.getState(we,Ue);default:return we}})}}function Le(ye){for(var Ue=0,we=/^[0-9]+$/,Te=ye.list.length-1;Te>=0;Te--){var qe=ye.list[Te],He=qe.id;if(we.test(He)){var Se=parseInt(He,10);Se>Ue&&(Ue=Se)}if(qe.type==="table"&&qe.columns){for(var Ce=qe.columns.length-1;Ce>=0;Ce--)if(He=qe.columns[Ce].id,we.test(He)){var Se=parseInt(He,10);Se>Ue&&(Ue=Se)}}}return Ue}function ze(ye,Ue,we){we||(we={});var Te,qe;for(ye.colorIdx=0,ee(ye),ye.expressionAnalysis={},Te=0;Te<Ue.list.length;Te++){if(qe=We(ye,Ue.list[Te]),we.remapColors&&"color"in qe&&qe.color){var He=y.values(ye.controller.getColors());y.contains(He,qe.color)||(qe.color=x.closestColor(qe.color,He))}ye.__itemModelArray.push(qe),ye.__itemIdToModel[qe.id]=qe}pe(ye),ye.nextDisplayIndex===1&&De(ye,We(ye,{type:"expression",id:ye.controller.generateId(),color:ye.controller.getNextColor()}),ye.__itemModelArray.length)}function We(ye,Ue){switch(Ue.type){case"expression":return l.initModel(Ue,ye.controller);case"table":return i.initModel(Ue,ye.controller);case"image":return d.initModel(Ue,ye.controller);case"folder":return n.initModel(Ue,ye.controller);case"text":return s.initModel(Ue,ye.controller);default:return Ue}}function Z(ye,Ue){var we,Te,qe=ye.__itemIdToModel;for(ye.__itemModelArray=[],ye.__itemIdToModel={},we=0;we<Ue.list.length;we++){var He=Ue.list[we];if((Te=qe[He.id])&&Te.type===He.type)switch(Te.type){case"expression":if(He.type!==Te.type)throw new Error("invalid restoration");l.restoreState(Te,He);break;case"table":if(He.type!==Te.type)throw new Error("invalid restoration");i.restoreState(Te,He);break;case"image":if(He.type!==Te.type)throw new Error("invalid restoration");d.restoreState(Te,He);break;case"folder":if(He.type!==Te.type)throw new Error("invalid restoration");n.restoreState(Te,He);break;case"text":if(He.type!==Te.type)throw new Error("invalid restoration");s.restoreState(Te,He);break;default:return Te}else Te=We(ye,He);ye.__itemModelArray.push(Te),ye.__itemIdToModel[Te.id]=Te}Q(ye),pe(ye)}function C(ye,Ue,we){var Te=we[0]&&we[0].tableId,qe=re(ye,Te||Ue);if(qe){var He;switch(qe.type){case"expression":var Se=!1;qe.__workerNeedsDotplotXMode=!1;for(var Ce=0;Ce<we.length;Ce++){var Re=we[Ce];Re.graphMode!==u.Z_3D&&Re.graphMode!==u.OBJECT3D&&Re.graphMode!==u.PARAMETRIC_CURVE_3D&&("resolved"in Re&&!Re.resolved&&(Se=!0),Re.boundingBox&&(He||(He=[]),He.push(Re.boundingBox)),Re.needsDotplotXMode&&(qe.__workerNeedsDotplotXMode=!0))}qe.unresolved=Se,qe.boundingBoxes=He;for(var Ve=1/0,rt=-1/0,at=0,yt=we;at<yt.length;at++){var Re=yt[at];if(Re.graphMode===u.POLAR){var Pt=Re.sampledDomain;Pt&&(Ve=Math.min(Ve,Pt.min),rt=Math.max(rt,Pt.max))}}return isFinite(Ve)&&(qe.__workerSampledDomainMin=Ve),void(isFinite(rt)&&(qe.__workerSampledDomainMax=rt));case"table":for(var Ce=0;Ce<we.length;Ce++){var Re=we[Ce];Re.graphMode!==u.Z_3D&&Re.graphMode!==u.OBJECT3D&&Re.graphMode!==u.PARAMETRIC_CURVE_3D&&Re.boundingBox&&(He||(He=[]),He.push(Re.boundingBox))}return void(He&&i.setColumnBoundingBoxes(qe,Ue,He));default:return}}}function oe(ye,Ue){var we,Te,qe,He=h.default(ye.expressionAnalysis);for(we in Ue)if(Ue.hasOwnProperty(we)){qe=Ue[we],Te=re(ye,we);var Se={isGraphable:!!qe.is_graphable,isError:!!qe.error,errorMessage:qe.error?ye.controller.unpack(qe.error):void 0};if(Te)switch(Te.type){case"expression":if(l.onFormulaUpdate(Te,qe),qe.zero_values&&qe.zero_values.length===1){var Ce=qe.zero_values[0].val;y.isNumber(Ce)&&(Se.evaluation={type:"Number",value:Ce},Se.evaluationDisplayed=!0),y.isArray(Ce)&&Ce.every(y.isNumber)&&(Se.evaluation={type:"ListOfNumber",value:Ce.slice()},Se.evaluationDisplayed=!0)}else qe.hasOwnProperty("constant_value")&&y.isNumber(qe.constant_value)&&(Se.evaluation={type:"Number",value:qe.constant_value},Se.evaluationDisplayed=!1);break;case"image":d.onFormulaUpdate(Te,qe);break;case"table":i.onFormulaUpdate(Te,qe);break;case"folder":case"text":break;default:var Re=Te;return Re}else{var Ve=ue(ye,we);if(!Ve)continue;g.onFormulaUpdate(ye.controller,Ve,qe)}He[we]=Se}Q(ye),ye.expressionAnalysis=He}function ge(ye,Ue){ye.selectedItem=Ue}function _e(ye,Ue,we,Te){if(Ue!==we){var qe=ye.__itemModelArray.splice(Ue,Te);Ue<we&&(we=we-Te+1),ye.__itemModelArray.splice.apply(ye.__itemModelArray,t.__spreadArrays([we,0],qe)),pe(ye)}}function De(ye,Ue,we){var Te=String(Ue.id);if(ye.__itemIdToModel.hasOwnProperty(Te))throw Error("Item with id '"+Te+"' is already in list");ye.__itemIdToModel[Te]=Ue,ye.__itemModelArray.splice(we,0,Ue),pe(ye)}function je(ye,Ue){De(ye,Ue,ae(ye))}function Ie(ye,Ue){var we=ye.__itemModelArray[Ue];if(we.type==="folder"){for(var Te=0,qe=we.index+1;qe<ye.__itemModelArray.length;qe++){var He=ye.__itemModelArray[qe];if(He.type==="folder"||He.folderId!==we.id)break;Te+=1,$e(He)&&ge(ye,void 0),delete ye.__itemIdToModel[He.id],delete ye.expressionAnalysis[we.id]}ye.__itemModelArray.splice(Ue,1+Te)}else ye.__itemModelArray.splice(Ue,1);$e(we)&&ge(ye,void 0),delete ye.__itemIdToModel[we.id],delete ye.expressionAnalysis[we.id],Q(ye),pe(ye)}function Oe(ye){return ye.__anyDependsOnRandomSeed}function N(ye,Ue){var we=re(ye,Ue);we&&Ie(ye,we.index)}function Pe(ye){var Ue=Ae(ye);if(!Ue)return!1;var we=M(ye,Ue.index);return!!we&&(ge(ye,we),we.index===ae(ye)-1&&Ue.type==="expression"&&l.isEmpty(Ue)&&Ie(ye,we.index),!0)}function Xe(ye){var Ue=Ae(ye);if(!Ue)return!1;var we=D(ye,Ue.index);return!!we&&(ge(ye,we),!0)}function $e(ye){return ye.controller.getListModel().selectedItem===ye}function ht(ye,Ue){ye.dragState=Ue}Object.defineProperty(c,"__esModule",{value:!0}),c.init=p,c.areAnyImagesLoading=r,c.getNextColor=o,c.getItemByIndex=m,c.getFirstSelectableItem=b,c.getLastSelectableItem=E,c.findPrevSelectableItem=M,c.findNextSelectableItem=D,c.getParentFolderModel=A,c.getNumberOfItemsInFolder=v,c.isItemSecret=k,c.isItemSelectable=J,c.isItemHiddenFromUI=X,c.getAllItemModels=te,c.getAllHelperItemModels=H,c.eachLatex=z,c.filterItemsBySearch=B,c.findAvailableColumnSubscript=F,c.updateDrawOrder=$,c.getItemById=re,c.getItemsByIdentifier=K,c.getHelperExpressionById=ue,c.addHelperExpression=ie,c.recomputeAnyItemDependsOnRandomSeed=Q,c.reindex=pe,c.removeAllItems=ee,c.getItemCount=ae,c.hasNoVisibleExpressions=le,c.getAllModelsWithSliders=me,c.getSelected=Ae,c.getUndoRedoState=Be,c.getState=Fe,c.getLargestIntegerId=Le,c.setListState=ze,c.modelFromSpec=We,c.restoreListState=Z,c.onGraphComputed=C,c.onEvaluatorFormulaUpdates=oe,c.setSelected=ge,c.moveItemsTo=_e,c.insertItemAtIndex=De,c.insertItemAtEnd=je,c.removeItemAtIndex=Ie,c.anyItemDependsOnRandomSeed=Oe,c.removeItemById=N,c.selectPrevItem=Pe,c.selectNextItem=Xe,c.isItemSelected=$e,c.setDragState=ht}),P("graphing-calc/models/abstract-item",["require","exports","./list"],function(S,c,x){function t(){return"abstract_item_"+d++}function l(u){return{guid:t(),controller:u,index:-1,displayIndex:-1,secretIndex:-1,isHiddenFromUI:!0,renderShell:!0}}function n(u,f){u.secret=f}function i(u,f){u.type!=="folder"&&(u.folderId=f)}function s(u){u.isHiddenFromUI=x.isItemHiddenFromUI(u)}function g(u){return u.isHiddenFromUI||u.filteredBySearch?"none":u.renderShell?"shell":"render"}Object.defineProperty(c,"__esModule",{value:!0});var d=0;c.getGUID=t,c.DEFAULTS=l,c.setSecret=n,c.setFolderId=i,c.updateIsHiddenFromUI=s,c.getDisplayState=g}),P("core/graphing-calc/json/table",["require","exports","tslib","core/lib/default-spec","core/types/styles","core/lib/dragmode"],function(S,c,x,t,l,n){function i(d){var u=x.__assign(x.__assign({},c.DEFAULTS),d);return u.columns=u.columns.map(function(f){return x.__assign(x.__assign({},c.COLUMN_DEFAULTS),f)}),u}function s(d){return d=x.__assign(x.__assign({},d),{columns:d.columns.map(function(u){return t.stripDefaults(c.COLUMN_DEFAULTS,u)})}),t.stripDefaults(c.DEFAULTS,d)}function g(d){return{type:"table",id:d.id,columns:d.columns.map(function(u){return x.__assign(x.__assign({},u),{tableId:d.id})})}}Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULTS={folderId:"",secret:!1,columns:[]},c.COLUMN_DEFAULTS={latex:"",color:"",hidden:!1,values:[],points:!0,lines:!1,dragMode:n.DragMode.NONE,pointStyle:l.PointStyle.POINT,lineStyle:l.LineStyle.SOLID},c.inflateDefaults=i,c.stripDefaults=s,c.computeParsableState=g}),P("graphing-calc/models/table",["require","exports","core/math/rational-arithmetic-sequence","tslib","core/types/styles","core/lib/dragmode","./abstract-item","underscore","core/lib/label","core/math/evaluate-single-expression","core/math/distance","core/lib/deepCopy","lib/copy-properties","graphing-calc/models/list","core/graphing-calc/json/table","core/graphing-calc/json/table","core/graphing-calc/json/table"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r,o){function m(Se,Ce,Re,Ve){Ve.row=Se.rowModels[Ce],Ve.row.cells.splice(Re,0,Ve)}function b(Se,Ce,Re){Se.rowModels[Ce].cells.splice(Re,1)}function E(Se){return isFinite(Se)?g.truncatedLatexLabel(Se,{digits:8,bigCutoff:1e6,smallCutoff:.001}):"\\mathrm{undefined}"}function M(Se,Ce,Re){var Ve=Se.columnModels[Ce];Ve.error=Re.error,Ve.discrete=Re.discrete,Ve.disabled=Re.dependent,Ve.draggable=!Re.error&&!Re.dependent,Ve.packedErrors=[],Ve.computedValues=[];for(var rt=Re.values,at=rt.length-1;at>=0;at--){var yt=rt[at];Ve.computedValues[at]=typeof yt=="number"?E(yt):"",Ve.packedErrors[at]=yt&&yt.msg?yt:void 0}}function D(Se){var Ce=oe(Se);if(Ce){var Re=A(Se);if(!Re)return void(Se.isExpanded||Pe(Se,!0));Ce.row>=Re.min&&Ce.row<Re.max&&Pe(Se,!0)}}function A(Se){if(!Se.isExpanded){var Ce=Se.rowModels.length;if(!(Ce<30))return{min:8,max:Ce-5}}}function v(Se,Ce){var Re=Se.columnModels[Ce];return{values:Se.columns[Ce].values.slice(),dragMode:Re.dragMode,hidden:Re.hidden,id:Re.id,color:Re.color,points:Re.points,lines:Re.lines,pointStyle:Re.pointStyle,lineStyle:Re.lineStyle,latex:Re.latex}}function k(){return"table_guid_"+qe++}function J(){return{guid:k(),type:"cell",row:void 0,column:void 0}}function X(Se){return{type:"row",index:Se,guid:k(),cells:[]}}function te(Se,Ce,Re,Ve){var rt=Se.columnModels[Ce];rt.cells.splice(Re,0,Ve),Ve.column=rt,Se.columns[rt.index].values.splice(Re,0,"")}function H(Se,Ce,Re){var Ve=Se.columnModels[Ce];Ve.cells.splice(Re,1),Se.columns[Ve.index].values.splice(Re,1)}function z(Se,Ce,Re){var Ve=t.__assign(t.__assign({},Re),{type:"header",guid:k(),index:Ce,error:void 0,table:Se,color:Re.color||Se.controller.getNextColor(),packedErrors:[],computedValues:[],cells:void 0,row:void 0,discrete:void 0,shouldGraph:void 0,disabled:void 0,draggable:void 0});return Ve.cells=Ve.values.map(function(){var rt=J();return rt.column=Ve,rt}),delete Ve.values,Ce===0&&(Ve.hidden=!0),Ve}function B(Se){Se.draggingOnGraphpaper?Se.preTransientState||(Se.preTransientState={columns:le(Se,{stripDefaults:!1}).columns}):delete Se.preTransientState,i.updateIsHiddenFromUI(Se);var Ce=h.getParentFolderModel(Se),Re=Ce&&Ce.hidden;s.each(Se.columnModels,function(Ve){Ve.shouldGraph=!Re&&!Ve.hidden}),me(Se),Be(Se),pe(Se)}function F(Se,Ce){Se.formula=Ce;var Re,Ve=Se.formula.column_data,rt=Se.columnModels[0].cells.length,at=Se.columnModels.length,yt=0;for(Re=0;Re<Ve.length;Re++){var Pt=Ve[Re].values.length;Pt>yt&&(yt=Pt)}for(Re=yt-rt;Re>0;Re--)$(Se,rt),rt++;for(Re=0;Re<Ve.length&&Re<at;Re++)M(Se,Re,Ve[Re]);var vt=Se.columnModels[Se.columnModels.length-1];vt.disabled=!0,vt.error=void 0}function $(Se,Ce){var Re=X(Ce+1);Se.rowModels.splice(Ce+1,0,Re);for(var Ve=Ce+1;Ve<Se.rowModels.length;Ve++)Se.rowModels[Ve].index=Ve;for(Ve=0;Ve<Se.columnModels.length;Ve++){var rt=J();te(Se,Ve,Ce,rt),m(Se,Ce+1,Ve,rt)}}function re(Se,Ce){var Re=A(Se);Re&&Ce===Re.max-1&&Pe(Se,!0);for(var Ve=0;Ve<Se.columnModels.length;Ve++)H(Se,Ve,Ce);for(Se.rowModels.splice(Ce+1,1),Ve=Ce+1;Ve<Se.rowModels.length;Ve++)Se.rowModels[Ve].index=Ve}function K(Se,Ce,Re){var Ve=t.__assign(t.__assign(t.__assign({},p.COLUMN_DEFAULTS),Re),{values:Se.columns[0].values.map(function(){return""})}),rt=z(Se,Ce,Ve);Se.columnModels.splice(Ce,0,rt),Se.columns.splice(Ce,0,Ve);for(var at=Ce+1;at<Se.columnModels.length;at++)Se.columnModels[at].index=at;for(m(Se,0,Ce,rt),at=1;at<Se.rowModels.length;at++)m(Se,at,Ce,rt.cells[at-1])}function ue(Se,Ce){Se.columns.splice(Ce,1),Se.columnModels.splice(Ce,1);for(var Re=Ce;Re<Se.columnModels.length;Re++)Se.columnModels[Re].index=Re;for(Re=0;Re<Se.rowModels.length;Re++)b(Se,Re,Ce)}function ie(Se,Ce){var Re,Ve=Se.columnModels.length,rt=[];for(Re=0;Re<Ve;Re++)rt.push("");var at=Se.columns[0].values;if(Ce>1){var yt=Se.controller.isDegreeMode(),Pt=d.default(at[0],yt),vt=d.default(at[1],yt);if(isFinite(Pt)&&isFinite(vt)){var At=x(Pt,vt);if(At){var Ut=At.nstart,Dt=Ut/At.lcm;for(Re=0;Re<Ce;Re++){var on=d.default(at[Re],yt);if(!u.approx(on,Dt))return rt;Ut+=At.nstep,Dt=Ut/At.lcm}rt[0]=(""+Pt).length<8&&(""+vt).length<8?""+Dt:"\\frac{"+Ut+"}{"+At.lcm+"}"}}}return rt}function Q(Se,Ce){for(var Re=0;Re<Se.columnModels.length;Re++){Ce(Se.columnModels[Re].latex);for(var Ve=Se.columns[Re],rt=0;rt<Ve.values.length;rt++)Ve.values[rt]&&Ce(Ve.values[rt])}}function pe(Se){for(var Ce=o.computeParsableState({type:"table",id:Se.id,secret:Se.secret,folderId:Se.folderId,columns:Se.columnModels.map(function(Ve){return v(Se,Ve.index)})}),Re=0;Re<Ce.columns.length;Re++)Ce.columns[Re].hidden=!Se.columnModels[Re].shouldGraph;Se.cachedParsableState=Ce}function ee(Se,Ce){return Se=f.default(Se),Se.push(t.__assign(t.__assign({},p.COLUMN_DEFAULTS),{id:Ce,values:Se[0].values.map(function(){return""})})),Se.forEach(function(Re){Re.values.push("")}),Se}function ae(Se){return Se=f.default(Se),Se.pop(),Se.forEach(function(Ce){Ce.values.pop()}),Se}function le(Se,Ce){var Re=t.__assign(t.__assign({},Se.cachedViewState),{columns:ae(Se.cachedViewState.columns)});return Ce.stripDefaults?r.stripDefaults(Re):Re}function me(Se){var Ce=Se.columnModels.map(function(Re,Ve){return v(Se,Ve)});Se.cachedViewState={id:Se.id,type:Se.type,folderId:Se.folderId,columns:Ce,secret:Se.secret}}function Ae(Se,Ce){Se.draggingOnGraphpaper=Ce}function Be(Se){var Ce=t.__assign(t.__assign({},Se.cachedViewState),{columns:ae(Se.cachedViewState.columns)});Se.preTransientState&&(Ce=t.__assign(t.__assign({},Ce),Se.preTransientState)),Se.cachedUndoRedoState=Ce}function Fe(Se,Ce){if(Se.columnModels.length-1!==Ce.length)return{type:"start-fresh"};if(Se.columnModels[0].cells.length-1!==Ce[0].values.length)return{type:"start-fresh"};for(var Re=-1,Ve=Ce.length-1;Ve>=0;Ve--){var rt=Se.columns[Ve],at=Ce[Ve];if(rt.id!==at.id)return{type:"start-fresh"};for(var yt=rt.values,Pt=at.values,vt=Pt.length-1;vt>=0;vt--)if(yt[vt]!==Pt[vt]&&(Re===-1&&(Re=vt),Re!==vt))return{type:"start-fresh"}}return Re===-1?{type:"none"}:{type:"edit-row",rowIndex:Re}}function Le(Se,Ce){var Re=Fe(Se,Ce.columns);if(y.copyProperties({from:Ce,to:Se,props:{id:!1,type:!1,columns:!1,folderId:!0,secret:!0}}),Re.type==="start-fresh")Se.columns=ee(Ce.columns,Se.controller.generateId()),We(Se);else{switch(Re.type){case"none":break;case"edit-row":for(var Ve=Ce.columns.length-1;Ve>=0;Ve--)Ue(Se,{column:Ve,row:Re.rowIndex+1},Ce.columns[Ve].values[Re.rowIndex]);break;default:return Re}for(var rt=0;rt<Ce.columns.length;rt++)y.copyProperties({from:Ce.columns[rt],to:Se.columnModels[rt],props:{id:!1,values:!1,color:!0,latex:!0,hidden:!0,points:!0,lines:!0,dragMode:!0,lineStyle:!0,pointStyle:!0}})}}function ze(Se,Ce){var Re=f.default(r.inflateDefaults(Se)),Ve=t.__assign(t.__assign(t.__assign({},Re),i.DEFAULTS(Ce)),{columnModels:void 0,rowModels:void 0,formula:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoState:{},isExpanded:!1});Ve.columns=ee(Ve.columns,Ce.generateId());var rt,at=0;for(rt=0;rt<Ve.columns.length;rt++)Ve.columns[rt].values||(Ve.columns[rt].values=[]),Ve.columns[rt].values.length>at&&(at=Ve.columns[rt].values.length);for(rt=0;rt<Ve.columns.length;rt++)for(var yt=at-Ve.columns[rt].values.length;yt>0;yt--)Ve.columns[rt].values.push("");return We(Ve),Ve}function We(Se){Se.columnModels=Se.columns.map(function(rt,at){return z(Se,at,rt)}),Se.rowModels=[X(0)];for(var Ce=0;Ce<Se.columnModels.length;Ce++)m(Se,0,Ce,Se.columnModels[Ce]);for(var Ce=0;Ce<Se.columnModels[0].cells.length;Ce++){var Re=X(Ce+1);Se.rowModels.push(Re);for(var Ve=0;Ve<Se.columnModels.length;Ve++)m(Se,Ce+1,Ve,Se.columnModels[Ve].cells[Ce])}}function Z(Se,Ce,Re){for(var Ve=[],rt=Math.min(Ce.length,He.length),at=0;at<rt;at++)Ve.push({id:Re.generateId(),latex:g.identifierToLatex(He[at]+"_"+Se),values:Ce[at],color:Re.getNextColor(),hidden:!1,points:!0,lines:!1,dragMode:n.DragMode.NONE,pointStyle:l.PointStyle.POINT,lineStyle:l.LineStyle.SOLID});return{id:Re.generateId(),type:"table",folderId:"",secret:!1,columns:Ve}}function C(Se,Ce){var Re=le(Se,{stripDefaults:!1});if(!Re.columns||!Ce.columns)return Ce;for(var Ve=0;Ve<Ce.columns.length;Ve++){var rt=Re.columns[Ve],at=Ce.columns[Ve];if(rt)for(var yt in rt)rt.hasOwnProperty(yt)&&(at.hasOwnProperty(yt)||(at[yt]=rt[yt]))}return Ce}function oe(Se){var Ce=Se.controller.getFocusLocation();return Ce&&Ce.type==="table"&&Ce.id===Se.id?Ce.location:void 0}function ge(Se,Ce){for(var Re=0;Re<Se.columnModels.length;Re++){var Ve=Se.columnModels[Re];if(Ve.id===Ce)return Ve}}function _e(Se,Ce,Re){var Ve=ge(Se,Ce);Ve&&(Ve.points=Re,Re||(Ve.dragMode=n.DragMode.NONE))}function De(Se,Ce,Re){var Ve=ge(Se,Ce);Ve&&(Ve.pointStyle=Re)}function je(Se,Ce,Re){var Ve=ge(Se,Ce);Ve&&(Ve.lines=Re)}function Ie(Se,Ce,Re){var Ve=ge(Se,Ce);Ve&&(Ve.lineStyle=Re)}function Oe(Se,Ce,Re){var Ve=ge(Se,Ce);Ve&&(Ve.dragMode=Re,Re===n.DragMode.NONE||Ve.points||(Ve.points=!0))}function N(Se,Ce,Re){var Ve=ge(Se,Ce);Ve&&(Ve.color=Re)}function Pe(Se,Ce){Se.isExpanded=Ce}function Xe(Se,Ce,Re){var Ve=ge(Se,Ce);Ve&&(Ve.hidden=Re,Re&&ht(Se))}function $e(Se,Ce,Re){var Ve=ge(Se,Ce);Ve&&(Ve.boundingBoxes=Re,ht(Se))}function ht(Se){var Ce=[];Se.columnModels.forEach(function(Re){Re.boundingBoxes&&!Re.hidden&&(Ce=Ce.concat(Re.boundingBoxes))}),Se.boundingBoxes=Ce}function ye(Se,Ce){var Re=ge(Se,Ce);return!Re||!Re.points&&!Re.lines}function Ue(Se,Ce,Re){if(Ce.row===0){var Ve=Se.columnModels[Ce.column].id,rt=ge(Se,Ve);return rt?(rt.latex=Re,void(Ce.column>=Se.columnModels.length-1&&K(Se,Ce.column+1,{id:Se.controller.generateId(),latex:"",color:Se.controller.getNextColor()}))):void 0}var at=Se.columnModels[Ce.column];Se.columns[at.index].values[Ce.row-1]=Re,Re!==""&&Ce.row>=Se.columnModels[0].cells.length&&$(Se,Ce.row)}function we(Se,Ce){return Ce.row<Se.rowModels.length&&Ce.column<Se.columnModels.length}function Te(Se){if(Se.values){for(var Ce=0,Re=Se.values;Ce<Re.length;Ce++)if(Re[Ce]!=="")return!1}if(Se.computedValues){for(var Ve=0,rt=Se.computedValues;Ve<rt.length;Ve++)if(rt[Ve]!=="")return!1}return!0}Object.defineProperty(c,"__esModule",{value:!0}),c.insertCellToRow=m,c.removeCellFromRow=b,c.formatValueForDisplay=E,c.setColumnComputedValues=M,c.updateIsCollapsedByFocusLocation=D,c.getCollapsedRange=A,c.getColumnState=v;var qe=0;c.getGUID=k,c.makeCell=J,c.makeRow=X,c.insertCellToColumn=te,c.removeCellFromColumn=H,c.makeColumn=z,c.onControllerUpdate=B,c.onFormulaUpdate=F,c.insertBlankRow=$,c.removeRow=re,c.insertBlankColumn=K,c.removeColumn=ue,c.getRowAutoFillValues=ie,c.eachLatex=Q,c.updateCachedParsableState=pe,c.addBlankRowAndColumn=ee,c.stripBlankRowAndColumn=ae,c.getState=le,c.updateCachedViewState=me,c.setIsDraggingOnGrapher=Ae,c.updateCachedUndoRedoState=Be,c.computeTableStructureMutation=Fe,c.restoreState=Le,c.initModel=ze,c.buildEntireColumnStructure=We;var He=["x","y","z","u","v","w"];c.makeTableState=Z,c.cloneTableAndExtendWithProperties=C,c.getSelectedCell=oe,c.getColumnModel=ge,c.setColumnPoints=_e,c.setColumnPointStyle=De,c.setColumnLines=je,c.setColumnLineStyle=Ie,c.setColumnDragMode=Oe,c.setColumnColor=N,c.setExpanded=Pe,c.setColumnHidden=Xe,c.setColumnBoundingBoxes=$e,c.mergeBoundingBoxes=ht,c.shouldHideColumn=ye,c.setCellLatex=Ue,c.doesCellExist=we,c.isColumnEmpty=Te}),P("main/propagate_selection",["require","graphing-calc/models/table"],function(S){function c(l){var n=l&&l.id;if(l&&l.type==="table"){var i=t.getSelectedCell(l);if(i){var s=l.columnModels[i.column];n=s?s.id:void 0}else n=void 0}if(l&&l.type==="folder"){var g=l.selectedHiddenChild;n=g?g.id:void 0}return n}function x(l,n,i,s){var g=l.getSelectedItem(),d=c(g);return d!==s&&n.select(d),d}var t=S("graphing-calc/models/table");return{getSelectedId:c,propagateSelection:x}}),(function(S,c){typeof P=="function"&&P.amd?P("flux",[],c):S.Flux=c()})(this,function(){return(function(S){function c(t){if(x[t])return x[t].exports;var l=x[t]={exports:{},id:t,loaded:!1};return S[t].call(l.exports,l,l.exports,c),l.loaded=!0,l.exports}var x={};return c.m=S,c.c=x,c.p="",c(0)})([function(S,c,x){S.exports.Dispatcher=x(1)},function(S,c,x){function t(i,s){if(!(i instanceof s))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var l=x(2),n=(function(){function i(){t(this,i),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return i.prototype.register=function(s){var g="ID_"+this._lastID++;return this._callbacks[g]=s,g},i.prototype.unregister=function(s){this._callbacks[s]||l(!1,"Dispatcher.unregister(...): `%s` does not map to a registered callback.",s),delete this._callbacks[s]},i.prototype.waitFor=function(s){this._isDispatching||l(!1,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var g=0;g<s.length;g++){var d=s[g];this._isPending[d]?this._isHandled[d]||l(!1,"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",d):(this._callbacks[d]||l(!1,"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",d),this._invokeCallback(d))}},i.prototype.dispatch=function(s){this._isDispatching&&l(!1,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this._startDispatching(s);try{for(var g in this._callbacks)this._isPending[g]||this._invokeCallback(g)}finally{this._stopDispatching()}},i.prototype.isDispatching=function(){return this._isDispatching},i.prototype._invokeCallback=function(s){this._isPending[s]=!0,this._callbacks[s](this._pendingPayload),this._isHandled[s]=!0},i.prototype._startDispatching=function(s){for(var g in this._callbacks)this._isPending[g]=!1,this._isHandled[g]=!1;this._pendingPayload=s,this._isDispatching=!0},i.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},i})();S.exports=n},function(S,c,x){function t(l,n,i,s,g,d,u,f){if(n===void 0)throw new Error("invariant requires an error message argument");if(!l){var y;if(n===void 0)y=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[i,s,g,d,u,f],p=0;y=new Error(n.replace(/%s/g,function(){return h[p++]})),y.name="Invariant Violation"}throw y.framesToPop=1,y}}S.exports=t}])}),P("keys",["require"],function(S){return new function(){var c={8:this.BACKSPACE="Backspace",9:this.TAB="Tab",13:this.ENTER="Enter",16:this.SHIFT="Shift",17:this.CONTROL="Control",18:this.ALT="Alt",20:this.CAPSLOCK="CapsLock",27:this.ESCAPE="Esc",32:this.SPACEBAR="Space",33:this.PAGEUP="PageUp",34:this.PAGEDOWN="PageDown",35:this.END="End",36:this.HOME="Home",37:this.LEFT="Left",38:this.UP="Up",39:this.RIGHT="Right",40:this.DOWN="Down",46:this.DELETE="Del"},x={UIKeyInputUpArrow:this.UP,UIKeyInputDownArrow:this.DOWN,UIKeyInputLeftArrow:this.LEFT,UIKeyInputRightArrow:this.RIGHT,UIKeyInputEscape:this.ESCAPE,UIKeyInputPageUp:this.PAGEUP,UIKeyInputPageDown:this.PAGEDOWN};this.isUndo=function(t){return!t.altKey&&(t.ctrlKey||t.metaKey)&&t.which==90&&!t.shiftKey},this.isRedo=function(t){return!t.altKey&&(t.ctrlKey||t.metaKey)&&(t.which==89||t.which==90&&t.shiftKey)},this.isSelectAll=function(t){return!t.altKey&&(t.ctrlKey||t.metaKey)&&t.which==65},this.isBacktick=function(t){return!(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||t.which!=192)},this.isHelp=function(t){return!t.altKey&&(t.ctrlKey||t.metaKey)&&t.which==191},this.lookup=function(t){return c[t.which]||x[t.key]},this.lookupChar=function(t){return String.fromCharCode(t.which)}}}),P("loadcss!touchtracking",function(){}),P("touchtracking",["require","jquery","ipad.ghostevents","keys","loadcss!./touchtracking"],function(S){function c(Q,pe){var ee=ie?{passive:!1}:void 0;document.addEventListener(Q,function(ae){pe(x.event.fix(ae))},ee)}var x=S("jquery"),t=S("ipad.ghostevents"),l=S("keys");S("loadcss!./touchtracking"),window._touchtracking_id_counter==null&&(window._touchtracking_id_counter=0),window._touchtracking_id_counter+=1;var n="touchtracking_id_"+window._touchtracking_id_counter,i=function(Q){x(Q).addClass("dcg-tap-container"),x(Q).addClass(n)},s=function(Q){x(Q).addClass("dcg-no-touchtracking")};t.evtInScope=function(Q){return v(Q.target)},t.isGhostEvent=function(Q){return!window.PointerEvent&&!(u!==g&&u!==d&&!X())&&Q.target!==o&&(!Q.target||!x.contains(Q.target,o))&&(!o||!x.contains(o,Q.target))};var g=1,d=4,u=0,f={},y={},h=[],p=0,r=null,o=null,m=null,b=[],E=function(Q){for(var pe=[];Q;)pe.push(Q),Q=Q.parentNode;return pe},M=function(Q){for(var pe=[],ee=0;ee<Q.length;ee++){var ae=Q[ee];if(pe.push(ae),x(ae).is(".dcg-tap-container, .dcg-no-touchtracking"))return x(ae).is(".dcg-tap-container."+n)?pe:[]}return[]},D=function(Q,pe){o=null,u=Q,h=E(u===g?pe.originalEvent.touches[0].target:pe.target),x(M(h)).addClass("dcg-depressed").each(function(){var ee=x(this);k(ee)&&ee.addClass("dcg-focus-by-tap")}),x(h).each(function(){var ee=x(this);ee.data({originalScrollTop:ee.scrollTop(),originalScrollLeft:ee.scrollLeft()})}),y={}},A=function(Q){return Q.is("input, textarea, select")||Q.hasClass("dcg-mathquill-input-span")||Q.is("[contenteditable=true]")},v=function(Q){return!!x(Q).closest(".dcg-tap-container, .dcg-no-touchtracking").is(".dcg-tap-container."+n)},k=function(Q){return u!==3&&!A(Q)&&v(Q)},J=function(Q){o=null,x(".dcg-depressed").removeClass("dcg-depressed");var pe=x(document.activeElement);if(k(pe))try{pe.blur()}catch{}if(x(".dcg-focus-by-tap").removeClass("dcg-focus-by-tap"),x(h).each(function(){var Le=x(this),ze=Le.data("originalScrollTop")-Le.scrollTop(),We=Le.data("originalScrollLeft")-Le.scrollLeft();(ze||We)&&(y.scroll=!0)}),y["dcg-tapstart"]===1&&y["dcg-tapend"]===1&&!y["dcg-tapcancel"]&&!y.scroll){var ee=Q.device==="mouse"?Q.clientX:Q.originalEvent.changedTouches[0].clientX,ae=Q.device==="mouse"?Q.clientY:Q.originalEvent.changedTouches[0].clientY;if(Q&&!Q.device&&ee===0&&ae===0){var le=Q.target.getBoundingClientRect();ee=(le.left+le.right)/2,ae=(le.top+le.bottom)/2,Q.device="keyboard"}for(var me=!1,Ae=0;Ae<h.length&&!me;Ae++){var Be,Fe=x(h[Ae]);if(typeof Fe[0].getBoundingClientRect=="function"&&(Be=Fe[0].getBoundingClientRect()),Fe.attr("tapboundary")==="true"&&(me=!0),!(Be&&(ee<Be.left||ae<Be.top||ee>Be.right||ae>Be.bottom))){o=Fe[0],H("dcg-tap",Q,o);break}}}u!==g&&u!==d||(r=setTimeout(function(){r=null,p=new Date().getTime()},1e3)),h=[],u=0},X=function(){return r||new Date().getTime()-p<500},te=function(Q){for(var pe=[],ee=0;ee<Q.length;ee++){var ae=Q[ee];pe.push({identifier:ae.identifier,x:ae.pageX,y:ae.pageY,screenX:ae.screenX,screenY:ae.screenY,pageX:ae.pageX,pageY:ae.pageY,clientX:ae.clientX,clientY:ae.clientY})}return pe},H=function(Q,pe,ee){if(Q==="dcg-tapstart")f[pe.identifier]={type:Q,pageX:pe.originalEvent.changedTouches[0].pageX,pageY:pe.originalEvent.changedTouches[0].pageY};else if(Q==="dcg-tapmove"){var ae=pe.originalEvent.changedTouches[0],le=f[pe.identifier];if(le&&ae.pageX===le.pageX&&ae.pageY===le.pageY||(u===g||u===d)&&le&&le.type==="dcg-tapstart"&&Math.abs(le.pageX-ae.pageX)+Math.abs(le.pageY-ae.pageY)<2)return;f[pe.identifier]={type:Q,pageX:pe.originalEvent.changedTouches[0].pageX,pageY:pe.originalEvent.changedTouches[0].pageY}}y[Q.toLowerCase()]===void 0?y[Q.toLowerCase()]=1:y[Q.toLowerCase()]++;var me=x.event.fix(pe.originalEvent);me.type=Q,me.device=u===g||u===d?"touch":u===3?"keyboard":"mouse",me.touches=te(pe.originalEvent.touches),me.changedTouches=te(pe.originalEvent.changedTouches),me.target=ee||pe.target;var Ae=me.device!=="keyboard"&&y["dcg-longhold"]>0;me.wasLongheld=function(){return Ae},me.preventTap=function(){y["dcg-tapcancel"]=1},clearTimeout(m),me.type==="dcg-tapstart"&&me.device!=="keyboard"&&me.touches.length===1&&(m=setTimeout(function(){H("dcg-longhold",pe,ee)},500)),me.target&&x.nodeName(me.target,"a")&&me.type==="dcg-tap"&&me.device==="keyboard"&&me.target.click&&me.target.click(),x(me.target).trigger(me)},z=function(Q){var pe=h,ee=!!h.length,ae=x(".dcg-tap-container."+n+" .dcg-hovered"),le=x.makeArray(ae.filter(function(){return v(this)})),me=[],Ae=[],Be=[];M(E(Q)).forEach(function(Le){ee&&pe.indexOf(Le)===-1||(le.indexOf(Le)===-1&&Be.push(Le),me.push(Le))});for(var Fe=0;Fe<le.length;Fe++)Q=le[Fe],me.indexOf(Q)===-1&&Ae.push(Q);x(Ae).removeClass("dcg-hovered").trigger("tipsyhide"),x(Be).addClass("dcg-hovered").trigger("tipsyshow")},B=function(Q){for(var pe=0;pe<b.length;pe++)if(b[pe].pointerId===Q)return!0;return!1},F=function(Q){for(var pe=0;pe<b.length;pe++)if(b[pe].pointerId===Q)return b.splice(pe,1)[0]},$=function(Q){u===0&&D(d,Q),z(null),b.push(Q.originalEvent),Q.originalEvent.identifier=Q.originalEvent.pointerId,Q.originalEvent.touches=b,Q.originalEvent.changedTouches=[Q.originalEvent],H("dcg-tapstart",Q)},re=function(Q){F(Q.originalEvent.pointerId),Q.originalEvent.identifier=Q.originalEvent.pointerId,Q.originalEvent.touches=b,Q.originalEvent.changedTouches=[Q.originalEvent],H("dcg-tapcancel",Q),b.length===0&&J(Q)},K=function(Q){F(Q.originalEvent.pointerId),Q.originalEvent.identifier=Q.originalEvent.pointerId,Q.originalEvent.touches=b,Q.originalEvent.changedTouches=[Q.originalEvent],H("dcg-tapend",Q),b.length===0&&J(Q)},ue=function(Q){return Q.originalEvent.pointerType==="touch"||Q.originalEvent.pointerType===2};x(document).on("pointerdown MSPointerDown",function(Q){u!==2&&u!==g&&ue(Q)&&(B(Q.originalEvent.pointerId)||$(Q))}),x(document).on("pointermove MSPointerMove",function(Q){u!==2&&u!==g&&ue(Q)&&(B(Q.originalEvent.pointerId)||$(Q),F(Q.originalEvent.pointerId),b.push(Q.originalEvent),Q.originalEvent.identifier=Q.originalEvent.pointerId,Q.originalEvent.touches=b,Q.originalEvent.changedTouches=[Q.originalEvent],H("dcg-tapmove",Q))}),x(document).on("pointercancel MSPointerCancel",function(Q){if(u===d&&ue(Q)&&B(Q.originalEvent.pointerId)){re(Q);for(var pe;pe=b.pop();){var Q=x.Event(pe,{originalEvent:pe});re(Q)}}}),x(document).on("pointerup MSPointerUp",function(Q){if(u===d&&ue(Q)&&B(Q.originalEvent.pointerId)){K(Q);for(var pe;pe=b.pop();){var Q=x.Event(pe,{originalEvent:pe});K(Q)}}});var ie=(function(){var Q=!1;try{var pe=Object.defineProperty({},"passive",{get:function(){Q=!0}});window.addEventListener("test",function(){},pe),window.removeEventListener("test",function(){},pe)}catch{}return Q})();return c("touchstart",function(Q){u!==2&&u!==d&&(u===0&&D(g,Q),z(null),H("dcg-tapstart",Q))}),c("touchmove",function(Q){u===g&&H("dcg-tapmove",Q)}),c("touchcancel",function(Q){u===g&&(H("dcg-tapcancel",Q),Q.originalEvent.touches.length===0&&J(Q))}),c("touchend",function(Q){u===g&&(H("dcg-tapend",Q),Q.originalEvent.touches.length===0&&J(Q))}),x(document).on("mousedown",function(Q){if(Q.button!==1&&Q.button!==2){if(u===g||u===d||X())return void(!x(Q.target).is("input, textarea, select")&&v(Q.target)&&Q.preventDefault());D(2,Q),Q.originalEvent.touches=[Q],Q.originalEvent.changedTouches=[Q],H("dcg-tapstart",Q)}}),x(document).ready(function(){x(document).on("mousedown",function(Q){var pe=!!x(Q.target).closest(".dcg-do-not-blur").length,ee=!!x(Q.target).closest(".dcg-do-blur").length;if(pe&&!ee&&v(Q.target)){Q.preventDefault();try{var ae=window.getSelection();if(ae.rangeCount===1){var le=ae.getRangeAt(0);le.startContainer===le.endContainer&&x(le.startContainer).closest(".dcg-text-selectable").length&&ae.removeAllRanges()}}catch{}}})}),x(document).on("mouseleave",function(Q){u===0&&(X()||z(null))}),x(document).on("mousemove",function(Q){Q.button!==1&&Q.button!==2&&u!==g&&u!==d&&(X()||(z(Q.target),Q.originalEvent.touches=[Q],Q.originalEvent.changedTouches=[Q],H("dcg-tapmove",Q)))}),x(document).on("mouseup",function(Q){Q.button!==1&&Q.button!==2&&u===2&&(Q.originalEvent.touches=[],Q.originalEvent.changedTouches=[Q],H("dcg-tapend",Q),J(Q))}),x(document).on("keydown",function(Q){if((l.lookup(Q)===l.ENTER||l.lookup(Q)===l.SPACEBAR)&&v(Q.target)&&u!==3){if(x(Q.target).is('a:not([ontap]), button, input, textarea, select, [contenteditable="true"]'))return;Q.preventDefault(),D(3,Q),Q.originalEvent.touches=[Q],Q.originalEvent.changedTouches=[Q],H("dcg-tapstart",Q)}}),x(document).on("keyup",function(Q){l.lookup(Q)!==l.ENTER&&l.lookup(Q)!==l.SPACEBAR||!v(Q.target)||u===3&&(Q.originalEvent.touches=[],Q.originalEvent.changedTouches=[Q],H("dcg-tapend",Q),J(Q))}),{monitor:i,ignore:s,isTapActive:function(){return u!==0},elIsFocusable:A}}),P("lib/conditional_blur",["require","exports","touchtracking","jquery"],function(S,c,x,t){function l(){if(document.activeElement){var n=t(document.activeElement);x.elIsFocusable(n)&&t(document.activeElement).blur()}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=l}),P("lib/state-stack",["require","exports"],function(S,c){Object.defineProperty(c,"__esModule",{value:!0});var x=(function(){function t(l){l===void 0&&(l=100),this.clear(),this._sizeLimit=l}return t.prototype.clear=function(){this._stack=[],this._stackPointer=-1},t.prototype.getState=function(){return this._stack[this._stackPointer]},t.prototype.serializeForBugsnag=function(){function l(n){try{return JSON.stringify(n,null,2)}catch{return"[[could not jsonify]]"}}return{currentState:l(this._stack[this._stackPointer]),undoState:l(this._stack[this._stackPointer-1]),redoState:l(this._stack[this._stackPointer+1])}},t.prototype.addState=function(l){this.canRedo()&&this._stack.splice(this._stackPointer+1),this._stack.push(l),this._stack.length>this._sizeLimit&&this._stack.shift(),this._stackPointer=this._stack.length-1},t.prototype.replaceState=function(l){this.canRedo()&&this._stack.splice(this._stackPointer+1),this._stack.length===0?(this._stack.push(l),this._stackPointer=0):this._stack[this._stackPointer]=l},t.prototype.canUndo=function(){return this._stackPointer>0},t.prototype.canRedo=function(){return this._stackPointer<this._stack.length-1},t.prototype.undo=function(){this.canUndo()&&(this._stackPointer-=1)},t.prototype.redo=function(){this.canRedo()&&(this._stackPointer+=1)},t})();c.default=x}),P("graphing/viewport",["require","exports"],function(S,c){function x(l,n){return l*(1-1e-8)+1e-8*n>l&&n-l>1e-300&&n-l<1e300}Object.defineProperty(c,"__esModule",{value:!0});var t=(function(){function l(n,i,s,g){n===void 0&&(n=-10),i===void 0&&(i=10),s===void 0&&(s=-10),g===void 0&&(g=10),this.xmin=n,this.xmax=i,this.ymin=s,this.ymax=g}return l.fromObject=function(n){return new l(n.xmin,n.xmax,n.ymin,n.ymax)},l.prototype.toObject=function(){return{xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax}},l.prototype.equals=function(n){return this.xmin===n.xmin&&this.ymin===n.ymin&&this.xmax===n.xmax&&this.ymax===n.ymax},l.prototype.isXValid=function(){return x(this.xmin,this.xmax)},l.prototype.isYValid=function(){return x(this.ymin,this.ymax)},l.prototype.isValid=function(){return this.isXValid()&&this.isYValid()},l.prototype.isSquare=function(n){return Math.abs(n.height-n.width*this.aspectRatio())<1},l.prototype.aspectRatio=function(){return(this.ymax-this.ymin)/(this.xmax-this.xmin)},l.prototype.squareXAxis=function(n){var i=this.xmax-this.xmin,s=this.ymax-this.ymin,g=this.xmin+i/2,d=s/n.height*n.width;return new l(g-d/2,g+d/2,this.ymin,this.ymax)},l.prototype.squareYAxis=function(n){var i=this.xmax-this.xmin,s=this.ymax-this.ymin,g=this.ymin+s/2,d=i/n.width*n.height;return new l(this.xmin,this.xmax,g-d/2,g+d/2)},l.prototype.squareCrop=function(n){return this.aspectRatio()>n.height/n.width?this.squareYAxis(n):this.squareXAxis(n)},l.prototype.polarDiameter=function(){var n=Math.abs(this.xmax),i=Math.abs(this.xmin),s=Math.abs(this.ymax),g=Math.abs(this.ymin);return 1.5*Math.max(n,i,s,g)},l.prototype.largestR=function(){return Math.sqrt(Math.pow(Math.max(-this.xmin,this.xmax),2)+Math.pow(Math.max(-this.ymin,this.ymax),2))},l.prototype.smallestR=function(){return this.xmin<=0&&this.xmax>=0&&this.ymin<=0&&this.ymax>=0?0:this.xmin<=0&&this.xmax>=0?Math.min(Math.abs(this.ymin),Math.abs(this.ymax)):this.ymin<=0&&this.ymax>=0?Math.min(Math.abs(this.xmin),Math.abs(this.xmax)):Math.sqrt(Math.pow(Math.max(this.xmin,-this.xmax),2)+Math.pow(Math.max(this.ymin,-this.ymax),2))},l})();c.Viewport=t}),P("core/graphing-calc/migrations/0",["require"],function(S){function c(u){if(u.type){if(g.hasOwnProperty(u.type))return u.type;throw new Error("Invalid item type: '"+u.type+"'.")}return u.text!==void 0?"text":u.columns!==void 0||u.headings!==void 0?"table":"expression"}function x(u){return u.replace(/\\(total|length|mean|median|quantile|stdev|stddev|stdDev|stdevp|stddevp|stdDevP|var|variance|cov|corr|ceil|floor|round|abs|mod|lcm|mcm|mcd|nCr|nPr|signum|sign|arcsinh|arccosh|arctanh|arccsch|arcsech|arccoth|arccsc|arcsec|arccot)/g,"\\operatorname{$1}")}function t(u){var f={};for(var y in u)u.hasOwnProperty(y)&&(f[y]=y==="latex"?x(u[y]):y==="values"?u[y].map(x):u[y]);return f}function l(u){var f,y=c(u),h={};switch(y){case"expression":for(f in u)u.hasOwnProperty(f)&&(h[f]=f==="latex"?x(u[f]):u[f]);return h.type=y,h;case"table":for(f in u)u.hasOwnProperty(f)&&(h[f]=f==="columns"?u[f].map(t):u[f]);return h.type=y,h;case"image":for(f in u)u.hasOwnProperty(f)&&(h[f]=f==="width"||f==="height"||f==="x"||f==="y"?x(u[f]):u[f]);return h.type=y,h;case"text":case"folder":for(f in u)u.hasOwnProperty(f)&&(h[f]=u[f]);return h.type=y,h}}function n(u){var f={};for(var y in u)u.hasOwnProperty(y)&&y!=="xAxisArrows"&&y!=="yAxisArrows"&&(f[y]=u[y]);return f.xAxisArrowMode=d[u.xAxisArrows||"none"],f.yAxisArrowMode=d[u.yAxisArrows||"none"],f}function i(u){if(u.version)throw new Error("Unexpected version: "+u.version);var f={};return f.graph=n(u.graph),f.expressions={list:u.expressions.list.map(l)},f.version=0,f}var s={NONE:"NONE",POSITIVE:"POSITIVE",BOTH:"BOTH"},g={expression:!0,table:!0,image:!0,folder:!0,text:!0},d={none:s.NONE,both:s.BOTH,positive:s.POSITIVE};return i}),P("core/graphing-calc/migrations/1",["require"],function(S){function c(i){return i.replace(/\\(sech|csch)/g,"\\operatorname{$1}")}function x(i){var s={};for(var g in i)i.hasOwnProperty(g)&&(s[g]=g==="latex"?c(i[g]):g==="values"?i[g].map(c):i[g]);return s}function t(i){var s,g=i.type,d={};switch(g){case"expression":for(s in i)i.hasOwnProperty(s)&&(d[s]=s==="latex"?c(i[s]):i[s]);return d;case"table":for(s in i)i.hasOwnProperty(s)&&(d[s]=s==="columns"?i[s].map(x):i[s]);return d;case"image":for(s in i)i.hasOwnProperty(s)&&(d[s]=s==="width"||s==="height"||s==="x"||s==="y"?c(i[s]):i[s]);return d;case"text":case"folder":for(s in i)i.hasOwnProperty(s)&&(d[s]=i[s]);return d;default:throw new Error("Unexpected expression type: "+g)}}function l(i){if(i.version)throw new Error("Unexpected version: "+i.version);var s={};return s.graph=i.graph,s.expressions={list:i.expressions.list.map(t)},s.version=n,s}var n=1;return l}),P("core/graphing-calc/migrations/2",["require","core/lib/color-helpers"],function(S){function c(h){switch(h){case s:return i.RED;case g:return i.BLUE;case d:return i.GREEN;case u:return i.PURPLE;case f:return i.ORANGE;case y:return i.BLACK;default:return h}}function x(h){var p={};for(var r in h)h.hasOwnProperty(r)&&(p[r]=r==="color"?c(h[r]):h[r]);return p}function t(h){var p,r=h.type,o={};switch(r){case"expression":for(p in h)h.hasOwnProperty(p)&&(o[p]=p==="color"?c(h[p]):h[p]);return o;case"table":for(p in h)h.hasOwnProperty(p)&&(o[p]=p==="columns"?h[p].map(x):h[p]);return o;case"image":case"text":case"folder":for(p in h)h.hasOwnProperty(p)&&(o[p]=h[p]);return o;default:throw new Error("Unexpected expression type: "+r)}}function l(h){if(h.version>1)throw new Error("Unexpected version: "+h.version);var p={};return p.graph=h.graph,p.expressions={list:h.expressions.list.map(t)},p.version=n,p}var n=2,i=S("core/lib/color-helpers").colors,s="#C0504D",g="#4F81BD",d="#9BBB59",u="#8064A2",f="#F79646",y="#000000";return l}),P("core/graphing-calc/migrations/3",["require"],function(S){function c(n){if(typeof n=="string")return n;if(n===void 0)return"";var i=n+"";return i=i.replace(/1e\+?([-\d]+)/,"10^{$1}"),i=i.replace(/([-\d\.]+)e\+?([-\d]+)/,"$1\\cdot 10^{$2}")}function x(n){var i,s=n.type,g={};switch(s){case"expression":for(i in n)n.hasOwnProperty(i)&&(g[i]=i==="sliderMax"||i==="sliderMin"||i==="sliderInterval"?c(n[i]):i==="domain"?{max:c(n[i].max),min:c(n[i].min)}:n[i]);return g.hasOwnProperty("sliderMin")&&g.sliderInterval===void 0&&(g.sliderInterval=""),g;case"image":case"table":case"text":case"folder":for(i in n)n.hasOwnProperty(i)&&(g[i]=n[i]);return g;default:throw new Error("Unexpected expression type: "+s)}}function t(n){if(n.version>2)throw new Error("Unexpected version: "+n.version);var i={};return i.graph=n.graph,i.expressions={list:n.expressions.list.map(x)},i.version=l,i}var l=3;return t}),P("core/graphing-calc/migrations/4",["require"],function(S){function c(i){switch(i){case"point":return"POINT";case"cross":return"CROSS";case"open":return"OPEN";case"normal":return"SOLID";case"dashed":return"DASHED";case"dotted":return"DOTTED";default:return i}}function x(i){var s={};for(var g in i)i.hasOwnProperty(g)&&(s[g]=g==="style"?c(i[g]):i[g]);return s}function t(i){var s,g=i.type,d={};switch(g){case"expression":for(s in i)i.hasOwnProperty(s)&&(d[s]=s==="style"?c(i[s]):i[s]);return d;case"table":for(s in i)i.hasOwnProperty(s)&&(d[s]=s==="columns"?i[s].map(x):i[s]);return d;case"image":case"text":case"folder":for(s in i)i.hasOwnProperty(s)&&(d[s]=i[s]);return d;default:throw new Error("Unexpected expression type: "+g)}}function l(i){if(i.version!==3)throw new Error("Unexpected version: "+i.version);var s={};return s.graph=i.graph,s.expressions={list:i.expressions.list.map(t)},s.version=n,s}var n=4;return l}),P("core/graphing-calc/validate-state",["require","exports","core/lib/deepCopy"],function(S,c,x){function t(d){typeof d.min=="number"&&(d.min=""+d.min),typeof d.max=="number"&&(d.max=""+d.max),typeof d.step=="number"&&(d.step=""+d.step)}function l(d){d.slider&&t(d.slider),typeof d.id!="string"&&(d.id=""+d.id)}function n(d){for(var u,f,y=s(d)+1,h={},p=0,r=d;p<r.length;p++){var o=r[p];if(l(o),o.type==="folder")u=o.id,h[o.id]&&(o.id=""+y,y+=1),f=o.id,h[o.id]=!0,o.hasOwnProperty("folderId")&&delete o.folderId;else{if(u!==void 0&&o.folderId===u?o.folderId=f:(o.folderId&&(o.folderId=""),u=void 0,f=void 0),o.type==="table")for(var m=0,b=o.columns;m<b.length;m++){var E=b[m];h[E.id]&&(E.id=""+y,y+=1),h[E.id]=!0}h[o.id]&&(o.id=""+y,y+=1),h[o.id]=!0}}}function i(d,u){var f=parseFloat(u);return f!==Math.floor(f)?d:Math.max(d,f)}function s(d){for(var u=0,f=0,y=d;f<y.length;f++){var h=y[f];if(u=i(u,h.id),h.type==="table")for(var p=0,r=h.columns;p<r.length;p++){var o=r[p];i(u,o.id)}}return u}function g(d){var u=x.default(d);return n(u.expressions.list),u}Object.defineProperty(c,"__esModule",{value:!0}),c.validateState=g}),P("core/graphing-calc/migrations/back-migration",["require","exports","tslib"],function(S,c,x){function t(n){var i=n.slider;if(i){var s=x.__assign(x.__assign({},i),{loopMode:void 0});return i.loopMode==="PLAY_ONCE"||i.loopMode==="PLAY_INDEFINITELY"?s.newLoopMode=i.loopMode:s.loopMode=i.loopMode,s.loopMode||delete s.loopMode,s}}function l(n){if(n.version!==8)throw new Error("Unexpected version: "+n.version);var i=n.expressions.list.map(function(s){if(s.type==="image"){var g=x.__assign(x.__assign({},s),{stringOpacity:void 0,opacity:void 0});if(s.opacity!==void 0){var d=s.opacity===void 0?NaN:+s.opacity;g.stringOpacity=s.opacity,d>0&&d<1&&(g.opacity=d)}return g.opacity===void 0&&delete g.opacity,g.stringOpacity===void 0&&delete g.stringOpacity,g}if(s.type==="expression"){var g=x.__assign(x.__assign({},s),{stringFillOpacity:void 0,fillOpacity:void 0,slider:t(s)});return g.slider||delete g.slider,delete g.fillOpacity,s.fillOpacity===void 0?delete g.stringFillOpacity:g.stringFillOpacity=s.fillOpacity,g}return s});return{version:7,graph:n.graph,randomSeed:n.randomSeed,expressions:{list:i}}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=l}),P("core/graphing-calc/migrations/5",["require","exports"],function(S,c){function x(s){var g,d={};for(var u in s)if(s.hasOwnProperty(u))switch(g=s[u],u){case"showAxes":d.showXAxis=g,d.showYAxis=g;break;case"showLabels":d.xAxisNumbers=g,d.yAxisNumbers=g,d.polarNumbers=g;break;case"labelXMode":d.xAxisStep=g==="pi"?Math.PI:0;break;case"labelYMode":d.yAxisStep=g==="pi"?Math.PI:0;break;default:d[u]=g}return d}function t(s){var g={};for(var d in s)s.hasOwnProperty(d)&&d!=="showPoints"&&d!=="showLine"&&(g[d]=s[d]);return s.showPoints===void 0&&s.showLine===void 0||(s.showPoints&&s.showLine?g.columnMode="POINTS_AND_LINES":s.showPoints?g.columnMode="POINTS":s.showLine?g.columnMode="LINES":(g.hidden=!0,g.columnMode="POINTS")),g}function l(s){var g,d=s.type,u={};switch(d){case"expression":s.hidden===void 0?s.hasOwnProperty("graphed")?u.hidden=!s.graphed:s.hasOwnProperty("userRequestedGraphing")?u.hidden=s.userRequestedGraphing==="never":u.hidden=!1:u.hidden=s.hidden;for(g in s)s.hasOwnProperty(g)&&g!=="graphed"&&g!=="userRequestedGraphing"&&g!=="hidden"&&g!=="slider"&&(g!=="color"?g!=="style"?g!=="sliderInterval"?u[g]=s[g]:u.sliderInterval=s.sliderInterval==="undefined"?"":s.sliderInterval:u.style=s.style==="normal"?"SOLID":s.style:typeof s.color=="object"?u.color=s.color.value:u.color=s.color);return u;case"table":if(s.headings||s.columns){var f=s.headings?s.headings:s.columns;if(u.columns=f.map(t),s.rows)for(var y=0;y<u.columns.length;y++){var h=u.columns[y];h.values=[];for(var p=0;p<s.rows.length;p++)h.values.push(s.rows[p][y])}}for(g in s)s.hasOwnProperty(g)&&g!=="rows"&&g!=="headings"&&g!=="columns"&&(u[g]=s[g]);return u;case"image":case"text":case"folder":for(g in s)s.hasOwnProperty(g)&&(u[g]=s[g]);return u;default:throw new Error("Unexpected expression type: "+d)}}function n(s){if(s.version!==4)throw new Error("Unexpected version: "+s.version);return{version:i,graph:x(s.graph),expressions:{list:s.expressions.list.map(l)}}}Object.defineProperty(c,"__esModule",{value:!0});var i=5;c.migrateState=n}),P("core/graphing-calc/migrations/6",["require","exports","core/lib/deepCopy","underscore","core/math/sliders","core/math/evaluate-single-expression"],function(S,c,x,t,l,n){function i(o){return!(o.length<2)&&o[0]==="`"&&o[o.length-1]==="`"}function s(o){if(i(o))return{raw:o,parts:[o]};for(var m,b=["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"],E="({"+b.join("})|({")+"})",M=new RegExp(E,"g"),D=[],A=0,v=0;m=M.exec(o);){v=m.index,v>A&&D.push(o.substr(A,v-A));var k=m[0],J=k.replace(/[{}\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");D.push({symbol:J,str:k}),A=m.index+k.length}return A<o.length&&D.push(o.substr(A)),{raw:o,parts:D}}function g(o){var m={};for(var b in o)if(o.hasOwnProperty(b)&&b!=="style")if(b==="values"&&(m[b]=o[b].map(function(E){return E?""+E:""})),b!=="columnMode"||o.hasOwnProperty("points")||o.hasOwnProperty("lines"))m[b]=o[b];else switch(o[b]){case"LINES":m.points=!1,m.lines=!0;break;case"POINTS_AND_LINES":m.points=!0,m.lines=!0;break;default:m.points=!0,m.lines=!1}return m.hasOwnProperty("pointStyle")||(m.pointStyle="POINT"),m.hasOwnProperty("lineStyle")||(m.lineStyle="SOLID"),m.id=""+m.id,m}function d(o){var m=s(o),b="";return t.each(m.parts,function(E){b+=typeof E=="object"&&E.str?"$"+E.str:E}),b}function u(o,m){var b=o.latex.split("=");if(b.length===2){var E=n.default(b[1],m);if(isFinite(E)){var M=o.slider.hardMin?n.default(o.slider.min||"-10",m):void 0,D=o.slider.hardMax?n.default(o.slider.max||"10",m):void 0,A=o.slider.step?n.default(o.slider.step,m):void 0,v=l.determineWhichLimitsAreCompatibleWithValue({target:E,step:A,hardMin:M,hardMax:D});v.min||(delete o.slider.hardMin,delete o.slider.min),v.max||(delete o.slider.hardMax,delete o.slider.max),v.step||delete o.slider.step}}}function f(o,m,b,E){var M,D=o.type,A={};switch(D){case"folder":for(M in o)o.hasOwnProperty(M)&&(M==="memberIds"||(A[M]=o[M]));break;case"expression":for(M in o)if(o.hasOwnProperty(M))if(M!=="style"||o.hasOwnProperty("pointStyle")||o.hasOwnProperty("lineStyle"))r.hasOwnProperty(M)?(A.slider=A.slider||{},A.slider[r[M]]=o[M]):A[M]=o[M],o.label&&(A.label=d(o.label));else{var v=o[M];t.contains(["POINT","OPEN","CROSS"],v)?(A.pointStyle=v,A.lineStyle="SOLID"):t.contains(["SOLID","DASHED","DOTTED"],v)?(A.pointStyle="POINT",A.lineStyle=v):(A.pointStyle="POINT",A.lineStyle="SOLID")}A.latex&&A.slider&&!A.slider.isPlaying&&u(A,E),A.hasOwnProperty("fillOpacity")||(A.fillOpacity=.4),A.label===!1&&(A.label=""),A.labelSize||(A.labelSize="medium"),A.labelOrientation||(A.labelOrientation="default"),A.verticalLabel||(A.verticalLabel=!1),A.interactiveLabel||(A.interactiveLabel=!1);break;case"image":for(M in o)o.hasOwnProperty(M)&&M!=="x"&&M!=="y"&&(A[M]=o[M]);A.center="\\left("+(o.x||"0")+","+(o.y||"0")+"\\right)",A.angle=o.angle||"0",A.foreground=!!A.foreground;break;case"text":for(M in o)o.hasOwnProperty(M)&&(A[M]=o[M]);break;case"table":for(M in o)o.hasOwnProperty(M)&&(A[M]=M==="columns"?o[M].map(g):o[M]);break;default:throw new Error("Unexpected expression type: "+D)}if(A.id=""+A.id,o.type==="folder")m.folderId=A.id,m.memberIds=o.memberIds,A.folderId="";else{var k=b[A.id];m.memberIds&&m.memberIds[k]?A.folderId=m.folderId:(A.folderId="",m.folderId=void 0,m.memberIds=void 0)}return A}function y(o){for(var m=0,b=/^[0-9]+$/,E=o.length-1;E>=0;E--){var M,D=o[E],A=D.id;if(b.test(A)&&(M=parseInt(A,10))>m&&(m=M),D.type==="table"&&D.columns)for(var v=D.columns.length-1;v>=0;v--)A=D.columns[v].id,b.test(A)&&(M=parseInt(A,10))>m&&(m=M)}return m+1}function h(o){if(o.version!==5)throw new Error("Unexpected version: "+o.version);var m=!(!o.graph||!o.graph.degreeMode),b=o.expressions.list,E=-1,M={},D={},A={};return{version:p,graph:o.graph,expressions:{list:b.map(function(v){return M[v.id]?(E===-1&&(E=y(b)),D[E]=v.id,v=x.default(v),v.id=E+"",E+=1):D[v.id]=v.id,M[v.id]=!0,f(v,A,D,m)})}}}Object.defineProperty(c,"__esModule",{value:!0});var p=6,r={sliderMin:"min",sliderMax:"max",sliderInterval:"step",sliderHardMin:"hardMin",sliderHardMax:"hardMax",sliderAnimationPeriod:"animationPeriod",sliderLoopMode:"loopMode",sliderPlayDirection:"playDirection",sliderIsPlaying:"isPlaying"};c.migrateState=h}),P("core/graphing-calc/migrations/7",["require","exports","tslib"],function(S,c,x){function t(l){if(l.version!==6)throw new Error("Unexpected version: "+l.version);var n=l.expressions.list.map(function(i){if(i.type==="expression"&&i.domain){var s=x.__assign(x.__assign({},i),{parametricDomain:{min:i.domain.min,max:i.domain.max}});return delete s.domain,s}return i});return{version:7,randomSeed:l.randomSeed,graph:l.graph,expressions:{list:n}}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=t}),P("core/lib/random-seed",["require","exports","core/lib/md5"],function(S,c,x){function t(n){return n.length===1?"0"+n:n}function l(){var n=new Uint8Array(16);if(typeof crypto<"u")crypto.getRandomValues(n);else{if(typeof msCrypto>"u")return x(Date.now().toString());msCrypto.getRandomValues(n)}return Array.prototype.slice.call(n).map(function(i){return t(i.toString(16))}).join("")}Object.defineProperty(c,"__esModule",{value:!0}),c.default=l}),P("core/graphing-calc/migrations/8",["require","exports","tslib","core/lib/random-seed","core/lib/deepCopy"],function(S,c,x,t,l){function n(u){var f=u.split("_");return f.length===2&&f[1]&&f[1].length===1?f[0]+"_{"+f[1]+"}":u}function i(u){var f=/\\operatorname(?:\{stdev\}p|\{stddev\}p|\{stdDev\}P|\{var\}iance)/g;return u.replace(f,function(y){switch(y){case"\\operatorname{stdev}p":return"\\operatorname{stdevp}";case"\\operatorname{stddev}p":return"\\operatorname{stddevp}";case"\\operatorname{stdDev}P":return"\\operatorname{stdDevP}";case"\\operatorname{var}iance":return"\\operatorname{variance}";default:return""}})}function s(u){return u.columns?x.__assign(x.__assign({},u),{columns:u.columns.map(g)}):u}function g(u){var f=u.latex,y=u.values,h=x.__assign({},u);return f&&(h.latex=i(f),h.latex=n(h.latex)),y&&(h.values=y.map(function(p){return p?i(p):""})),h}function d(u){if(u.version!==7)throw new Error("Unexpected version: "+u.version);var f=u.expressions.list.map(function(y){if(y.type==="image"){var h=x.__assign(x.__assign({},y),{opacity:""});y.hasOwnProperty("stringOpacity")?h.opacity=y.stringOpacity:y.hasOwnProperty("opacity")?h.opacity=y.opacity+"":delete h.opacity,delete h.stringOpacity;for(var p in y)if(p==="x"||p==="y"||p==="width"||p==="height"){var r=y[p];r&&(h[p]=i(r))}return h}if(y.type==="expression"){var h=x.__assign(x.__assign({},y),{fillOpacity:"",lineStyle:"SOLID"});if(y.lineStyle==="SINGLE_PIXEL"?h.lineWidth="1":y.hasOwnProperty("lineStyle")?h.lineStyle=y.lineStyle:delete h.lineStyle,h.hasOwnProperty("lineWidth")||(h.lineWidth=""),typeof y.latex=="string"&&(h.latex=i(y.latex)),y.latex&&(h.latex=i(y.latex)),y.hasOwnProperty("stringFillOpacity")?h.fillOpacity=y.stringFillOpacity:y.hasOwnProperty("fillOpacity")?h.fillOpacity=y.fillOpacity+"":delete h.fillOpacity,h.slider&&y.slider&&y.slider.newLoopMode&&(h.slider=l.default(h.slider),h.slider.loopMode=y.slider.newLoopMode,delete h.slider.newLoopMode),h.residualVariable&&(h.residualVariable=n(h.residualVariable)),h.regressionParameters){h.regressionParameters={};for(var o in y.regressionParameters){var m=n(o),b=y.regressionParameters[o];h.regressionParameters[m]=b}}return h}return y.type==="table"?s(y):y});return{version:8,randomSeed:u.randomSeed||t.default(),graph:u.graph,expressions:{list:f}}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d}),P("core/graphing-calc/migrate-state",["require","exports","./migrations/0","./migrations/1","./migrations/2","./migrations/3","./migrations/4","core/graphing-calc/validate-state","./migrations/back-migration","./migrations/5","./migrations/6","./migrations/7","./migrations/8"],function(S,c,x,t,l,n,i,s,g,d,u,f,y){function h(o){if(o.version>c.currentVersion)return typeof console<"u"&&console.warn&&console.warn("Loading saved state with version "+o.version+" but last known version is "+c.currentVersion+". States saved in a newer version of the calculator may not load correctly in an older version of the calculator."),s.validateState(o);if(o.hasOwnProperty("version")&&!r[o.version])return typeof console<"u"&&console.warn&&console.warn("State has invalid version "+o.version+". If a version is present, it should be a non-negative integer less than or equal to "+c.currentVersion+"."),s.validateState(o);for(o.hasOwnProperty("version")||(o=r[0](o));o.version<c.currentVersion;)o=r[o.version+1](o);return s.validateState(o)}function p(o){return g.default(h(o))}Object.defineProperty(c,"__esModule",{value:!0});var r=[x,t,l,n,i,d.migrateState,u.migrateState,f.default,y.default];c.persistedVersion=7,c.currentVersion=8,c.migrateToLatest=h,c.migrateToPersisted=p}),P("graphing-calc/models/focus",["require","exports","./expression","./list"],function(S,c,x,t){function l(u,f,y){n(u,i(u,f,y))}function n(u,f){if(u.focusLocation=f,f&&f.type!=="settings"&&f.type!=="editable-label"&&f.type!=="add-item-btn"&&f.type!=="add-expression-btn"&&f.type!=="add-table-btn"&&f.type!=="add-folder-btn"&&f.type!=="add-image-btn"&&f.type!=="edit-list-toggle"){var y=u.getItemModel(f.id);if(f.type==="expression-menu")return void t.setSelected(u.getListModel(),void 0);t.setSelected(u.getListModel(),y),y&&y.type==="expression"&&x.setSliderIsPlaying(y,!1)}}function i(u,f,y){var h=u.getItemModel(f);if(h)switch(h.type){case"expression":return{type:u.isInEditListMode()?"readonly-expression":h.type,id:f};case"folder":case"text":return{type:h.type,id:f};case"table":var p={row:1,column:0},r=!1;return y&&(y.location==="cell"?p={row:y.row,column:y.column}:y==="end"?p={row:h.columnModels[0].cells.length,column:0}:y==="start"?p={row:0,column:0}:y==="container"&&(r=!0)),r?{type:"table-container",id:f}:{type:h.type,id:f,location:p};case"image":return{type:h.type,id:f,location:"name"};default:return h}}function s(u){var f=u.getSelectedItem();if(f&&f.type==="expression")return void l(u,f.id);if(!f||f.type!=="table"||!u.focusLocation){for(var y=u.getFirstFullyVisibleItem(),h=u.getListModel();y&&y.type!=="expression";)y=t.findNextSelectableItem(h,y.index);if(y)return void l(u,y.id);var p=u.createItemModel({type:"expression",id:u.generateId(),color:u.getNextColor()});t.insertItemAtEnd(u.getListModel(),p),l(u,p.id)}}function g(u){var f=u.focusLocation;if(f&&f.type!=="settings"&&f.type!=="editable-label"&&f.type!=="add-item-btn"&&f.type!=="add-expression-btn"&&f.type!=="add-table-btn"&&f.type!=="add-folder-btn"&&f.type!=="add-image-btn"&&f.type!=="edit-list-toggle")return u.getItemModel(f.id)}function d(u,f,y){n(u,{type:"table",id:f,location:y})}Object.defineProperty(c,"__esModule",{value:!0}),c.moveFocusToItem=l,c.setFocusLocation=n,c.computeFocusLocationForItem=i,c.addFocusForKeypad=s,c.getFocusedItem=g,c.focusTableCell=d}),P("graphing-calc/actions/keyboard",["require","exports","browser","lib/conditional_blur","../models/table","../models/focus","../models/list","../models/abstract-item"],function(S,c,x,t,l,n,i,s){function g(o,m,b){var E=o.getItemModel(m);if(E&&E.type==="table"){var M=E,D=l.getSelectedCell(M),A=D?D.row:-1,v=D?D.column:-1,k=M.columnModels,J=k[0].cells.length,X=k.length,te=function($,re){$===-1?d(o):$>J?u(o):(re===-1?(re=X-1,$--):re===X&&($++,re=0),n.focusTableCell(o,m,{row:$,column:re}))},H=function($){J>2&&l.removeRow(M,A-1),n.focusTableCell(o,m,{row:$,column:v})},z=function($){v===0||X<=2||(l.removeColumn(M,v),n.focusTableCell(o,m,{row:A,column:$}))};switch(b){case"Left":te(A,v-1);break;case"Right":te(A,v+1);break;case"Up":te(A-1,v);break;case"Down":te(A+1,v);break;case"Enter":if(A>=J)return h(o);if(v>0)return te(A+1,v);if(A===J-1){var B=l.getRowAutoFillValues(M,A);l.insertBlankRow(M,A);for(var F=0;F<B.length;F++)l.setCellLatex(M,{row:A+1,column:F},B[F]);return void n.focusTableCell(o,m,{row:A+1,column:v})}l.insertBlankRow(M,A),n.focusTableCell(o,m,{row:A+1,column:v});break;case"Backspace":A===0?v===0?f(o):v===X-1||v===1&&X===3?te(0,v-1):z(v-1):v!==0?te(A,v-1):A===J?te(A-1,v):H(A-1);break;case"Delete":A===0?v===0?y(o):v<X-1&&z(v):A>=J||H(A)}}}function d(o){var m=o.getSelectedItem();m&&(o.inAudioTraceMode()||m.index!==0&&(i.selectPrevItem(o.getListModel()),(m=o.getSelectedItem())&&n.moveFocusToItem(o,m.id,"end")))}function u(o){if(!o.inAudioTraceMode()){if(!i.selectNextItem(o.getListModel())&&!o.isInEditListMode()){var m=o.createItemModel({type:"expression",id:o.generateId(),color:o.getNextColor()});i.insertItemAtEnd(o.getListModel(),m),i.setSelected(o.getListModel(),m)}var b=o.getSelectedItem();b&&n.moveFocusToItem(o,b.id,"start")}}function f(o){if(!o.isInEditListMode()){var m=o.getSelectedItem();if(m&&(o.getItemCount()!==1||m.type!=="expression")){var b=m.type==="text",E=i.getParentFolderModel(m);if(E){var M=o.getNumberOfItemsInFolder(E.id);if(m.index===E.index+M)return void s.setFolderId(m,"")}if(p(o),b&&x.IS_IPAD&&x.IS_IN_IFRAME)return void i.setSelected(o.getListModel(),void 0);m=o.getSelectedItem(),m&&n.moveFocusToItem(o,m.id,"end")}}}function y(o){if(!o.isInEditListMode()){var m=o.getSelectedItem();m&&(o.getItemCount()===1&&m.type==="expression"||(r(o),(m=o.getSelectedItem())&&n.moveFocusToItem(o,m.id,"start")))}}function h(o){if(!o.isInEditListMode()){var m=o.getSelectedItem();if(m){if(m.type==="text"&&x.IS_IPAD&&x.IS_IN_IFRAME)return t.default(),void i.setSelected(o.getListModel(),void 0);if((m.type==="expression"||m.type==="image")&&m.missingVariables.length&&o.areSlidersEnabled())return o.createSlidersForItem(m.id,m.missingVariables.concat(""));var b=o.createItemModel({type:"expression",id:o.generateId(),color:o.getNextColor()}),E=m.index+1;m.type==="folder"&&m.collapsed&&(E+=o.getNumberOfItemsInFolder(m.id)),i.insertItemAtIndex(o.getListModel(),b,E),i.setSelected(o.getListModel(),b),m.type!=="folder"||m.collapsed?m.type!=="folder"&&m.folderId&&s.setFolderId(b,m.folderId):s.setFolderId(b,m.id),m=o.getSelectedItem(),m&&n.moveFocusToItem(o,m.id)}}}function p(o){var m=o.getSelectedItem(),b=o.getListModel();if(m){var E=i.findPrevSelectableItem(b,m.index);if(o._removeExpressionSynchronously(m),!E){var M=i.getFirstSelectableItem(b);M&&(E=M)}i.setSelected(b,E)}}function r(o){var m=o.getSelectedItem(),b=o.getListModel();if(m){var E=i.findNextSelectableItem(b,m.index);if(o._removeExpressionSynchronously(m),!E){var M=i.getLastSelectableItem(b);M&&(E=M)}i.setSelected(b,E)}}Object.defineProperty(c,"__esModule",{value:!0}),c.navigateTableByKey=g,c.onUpPressed=d,c.onDownPressed=u,c.onBackspacePressed=f,c.onDeletePressed=y,c.onEnterPressed=h,c.upwardDeleteSelectedExpression=p,c.downwardDeleteSelectedExpression=r}),P("main/expression-zoom-helpers",["require","exports","core/lib/deepCopy"],function(S,c,x){function t(f){switch(f){case"histogram":case"dotplot":return 12;case"boxplot":return 40}return 1/0}function l(f){return f==="boxplot"||f==="dotplot"||f=="histogram"}function n(f){return f==="boxplot"?3:.5}function i(f,y){if(f.type==="dotplot"||f.type==="histogram"){var h=Math.max(1,f.xmax-f.xmin),p=80*h/(f.binWidth?f.binWidth:1),r=.5*(y.screen.width-p)/p;return Math.max(.2,r)}return .5}function s(f){return f=x.default(f),f.xmax<0&&f.xmin<0&&f.xmax/(f.xmin-f.xmax)<1.2&&(f.xmax=0),f.xmax>0&&f.xmin>0&&f.xmin/(f.xmax-f.xmin)<1.2&&(f.xmin=0),f.ymax<0&&f.ymin<0&&f.ymax/(f.ymin-f.ymax)<1.2&&(f.ymax=0),f.ymax>0&&f.ymin>0&&f.ymin/(f.ymax-f.ymin)<1.2&&(f.ymin=0),f}function g(f,y){var h,p,r,o,m=f.type,b=i(f,y),E=n(m);f.xmin===f.xmax&&(f.xmin-=.5,f.xmax+=.5),f.ymin===f.ymax&&(f.ymin-=.5,f.ymax+=.5);var M=f.xmax-f.xmin;h=f.xmin-b*M,p=f.xmax+b*M;var D=f.ymax-f.ymin;if(r=f.ymin-E*D,o=f.ymax+E*D,l(m)){var A=y.screen.height/y.screen.width,v=(p-h)*A;if(v>f.ymax-f.ymin&&v<t(m)*(f.ymax-f.ymin)){var k=.5*(f.ymax+f.ymin);o=k+.5*v,r=k-.5*v}}return{xmin:h,xmax:p,ymin:r,ymax:o}}function d(f,y){var h=u(f,y);if(!h)return!1;var p=y.mapx(h.xmin),r=y.mapx(h.xmax),o=y.mapy(h.ymin),m=y.mapy(h.ymax);return!(Math.abs(p)<=10&&Math.abs(m)<=10&&Math.abs(r-y.screen.width)<=10&&Math.abs(o-y.screen.height)<=10)}function u(f,y){for(var h=1/0,p=-1/0,r=1/0,o=-1/0,m=0,b=f.length,E=0;E<b;E++){var M=s(f[E]);if(isFinite(M.xmax-M.xmin)&&isFinite(M.ymax-M.ymin)){var D=g(M,y);D.xmin<h&&(h=D.xmin),D.xmax>p&&(p=D.xmax),D.ymin<r&&(r=D.ymin),D.ymax>o&&(o=D.ymax)}else m+=1}if(m!==b)return{xmin:h,xmax:p,ymin:r,ymax:o}}Object.defineProperty(c,"__esModule",{value:!0}),c.conditionalExpandViewport=s,c.padViewport=g,c.shouldExpressionZoomFit=d,c.getRecommendedViewportForExpression=u}),P("main/layout-model",["require","exports","browser"],function(S,c,x){function t(n){switch(n){case"letters":return"capitalLetters";case"noQwertyLetters":return"noQwertyCapitalLetters";case"noQwertyCapitalLetters":return"noQwertyLetters";default:return"letters"}}function l(n){return{keypadMinimized:!x.IS_TOUCH_DEVICE,keypadLayout:"mainNumbers",keypadFunctionsTab:"trig",keypadFunctionsOpen:!1,graphSettingsOpen:!1,addExpressionOpen:!1,expressionsVisible:!!n.expressions,inEditListMode:!1,isFileDraggedOver:!1,expressionsHiddenTime:void 0}}Object.defineProperty(c,"__esModule",{value:!0}),c.getShiftedLayoutForCurrentLayout=t,c.defaultLayoutModel=l}),P("main/settings-view-model",["require","exports","tslib","core/lib/label"],function(S,c,x,t){function l(d,u){var f=t.value(d,u),y="";if(f.mantissa)y=f.mantissa.split("").join("\\cdot")+"^{"+f.superscript+"}";else{var h=f.string.split("/");y=h.length===2?h[0][0]==="-"?"-\\frac{"+h[0].slice(1)+"}{"+h[1]+"}":"\\frac{"+h[0]+"}{"+h[1]+"}":f.string}return y=y.replace(//,"\\pi")}function n(d){return{xmin:l(d.xmin,d.xmax-d.xmin),xmax:l(d.xmax,d.xmax-d.xmin),ymin:l(d.ymin,d.ymax-d.ymin),ymax:l(d.ymax,d.ymax-d.ymin)}}function i(d,u){return d===0?"":l(d,u)}function s(d,u,f){var y=n(d);return x.__assign(x.__assign({},y),{xstep:i(u,d.xmax-d.xmin),ystep:i(f,d.ymax-d.ymin)})}function g(){return{limitLatex:{xmin:"",xmax:"",xstep:"",ymin:"",ymax:"",ystep:""}}}Object.defineProperty(c,"__esModule",{value:!0}),c.formatLatex=l,c.formatViewport=n,c.formatStep=i,c.limitLatex=s,c.defaultSettingsViewModel=g}),(function(S,c){if(typeof P=="function"&&P.amd)P("abraham",[],c);else{var x=c();for(var t in x)S[t]=x[t]}})(this,function(){return(function(S){function c(t){if(x[t])return x[t].exports;var l=x[t]={i:t,l:!1,exports:{}};return S[t].call(l.exports,l,l.exports,c),l.l=!0,l.exports}var x={};return c.m=S,c.c=x,c.i=function(t){return t},c.d=function(t,l,n){c.o(t,l)||Object.defineProperty(t,l,{configurable:!1,enumerable:!0,get:n})},c.n=function(t){var l=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(l,"a",l),l},c.o=function(t,l){return Object.prototype.hasOwnProperty.call(t,l)},c.p="",c(c.s=26)})([function(S,c,x){function t(n,i){var s=l.map(n,i);return n.warnings&&(s.warnings=n.warnings),s}Object.defineProperty(c,"__esModule",{value:!0});var l=x(22);c.map=t},function(S,c){function x(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}function l(m){if(u===setTimeout)return setTimeout(m,0);if((u===x||!u)&&setTimeout)return u=setTimeout,setTimeout(m,0);try{return u(m,0)}catch{try{return u.call(null,m,0)}catch{return u.call(this,m,0)}}}function n(m){if(f===clearTimeout)return clearTimeout(m);if((f===t||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(m);try{return f(m)}catch{try{return f.call(null,m)}catch{return f.call(this,m)}}}function i(){r&&h&&(r=!1,h.length?p=h.concat(p):o=-1,p.length&&s())}function s(){if(!r){var m=l(i);r=!0;for(var b=p.length;b;){for(h=p,p=[];++o<b;)h&&h[o].run();o=-1,b=p.length}h=null,r=!1,n(m)}}function g(m,b){this.fun=m,this.array=b}function d(){}var u,f,y=S.exports={};(function(){try{u=typeof setTimeout=="function"?setTimeout:x}catch{u=x}try{f=typeof clearTimeout=="function"?clearTimeout:t}catch{f=t}})();var h,p=[],r=!1,o=-1;y.nextTick=function(m){var b=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)b[E-1]=arguments[E];p.push(new g(m,b)),p.length!==1||r||l(s)},g.prototype.run=function(){this.fun.apply(null,this.array)},y.title="browser",y.browser=!0,y.env={},y.argv=[],y.version="",y.versions={},y.on=d,y.addListener=d,y.once=d,y.off=d,y.removeListener=d,y.removeAllListeners=d,y.emit=d,y.prependListener=d,y.prependOnceListener=d,y.listeners=function(m){return[]},y.binding=function(m){throw new Error("process.binding is not supported")},y.cwd=function(){return"/"},y.chdir=function(m){throw new Error("process.chdir is not supported")},y.umask=function(){return 0}},function(S,c,x){function t(h){for(var p=!1,r=0,o="",m="",b=0,E=h;b<E.length;b++){var M=E[b];if(M.type!=="terminal"||!/[A-Za-z]/.test(M.value))break;o+=M.value,r++}return m=o.replace(d,"\\operatorname{$1}"),p=r>0&&m!==o,{modified:p,terminalCount:r,value:m}}function l(h){return f.indexOf(h.toLowerCase())!==-1}function n(h){if(!Array.isArray(h))throw new Error("Operator names must be an array, got "+typeof h);for(var p=0,r=h;p<r.length;p++){var o=r[p];if(typeof o!="string")throw new Error("Operator names must be strings, found "+typeof o)}f=h,s()}function i(){f=u,d=y}function s(){d=g(f)}function g(h){var p=h.sort(function(r,o){return o.length-r.length||o.localeCompare(r)}).join("|");return new RegExp("("+p+")","g")}Object.defineProperty(c,"__esModule",{value:!0});var d,u=["abs","ans","arccosh","arccot","arccoth","arccsc","arccsch","arcsec","arcsech","arcsinh","arctanh","binomialdist","boxplot","cdf","ceil","corr","cov","csch","distance","dotplot","erf","floor","gcf","histogram","IndependentTTest","iTTest","ittest","lcm","length","mad","mcd","mcm","mean","median","midpoint","mod","nCr","normaldist","nPr","pdf","poissondist","polygon","quantile","quartile","random","round","sech","sign","signum","stdDev","stddev","stdDevP","stddevp","stdev","stdevp","tdist","total","TScore","TScore","Tscore","tscore","tscore","TTest","ttest","var","variance","varp"],f=u,y=g(u);c.getAutoOperator=t,c.containsValue=l,c.setOperatorNames=n,c.resetOperatorNames=i},function(S,c,x){function t(r){if(!p.isSixDotCells(r))throw new Error("EncodingError: Expected input to be six-dot unicode braille characters.")}function l(r,o){return t(r),f.default(c.UnicodeBraille.toBrailleAscii(r),o)}function n(r,o){return o&&o.operatorNames?g.setOperatorNames(o.operatorNames):g.resetOperatorNames(),y.map(d.default(r),c.UnicodeBraille.coerceToSixDotCells)}function i(r,o){return t(r),h.default(c.UnicodeBraille.toBrailleAscii(r),o)}function s(r,o){return o&&o.operatorNames?g.setOperatorNames(o.operatorNames):g.resetOperatorNames(),y.map(u.default(r),c.UnicodeBraille.coerceToSixDotCells)}Object.defineProperty(c,"__esModule",{value:!0});var g=x(2),d=x(14),u=x(15),f=x(16),y=x(0),h=x(23),p=x(25);c.nemethToLatex=l,c.latexToNemeth=n,c.uebToLatex=i,c.latexToUeb=s,c.UnicodeBraille={coerceToSixDotCells:p.coerceToSixDotCells,toBrailleAscii:p.toBrailleAscii,toExpandedBrailleAscii:p.toExpandedBrailleAscii},c.version="1.0.3"},function(S,c){},function(S,c,x){(function(t){function l(d,u){for(var f=0,y=d.length-1;y>=0;y--){var h=d[y];h==="."?d.splice(y,1):h===".."?(d.splice(y,1),f++):f&&(d.splice(y,1),f--)}if(u)for(;f--;f)d.unshift("..");return d}function n(d,u){if(d.filter)return d.filter(u);for(var f=[],y=0;y<d.length;y++)u(d[y],y,d)&&f.push(d[y]);return f}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(d){return i.exec(d).slice(1)};c.resolve=function(){for(var d="",u=!1,f=arguments.length-1;f>=-1&&!u;f--){var y=f>=0?arguments[f]:t.cwd();if(typeof y!="string")throw new TypeError("Arguments to path.resolve must be strings");y&&(d=y+"/"+d,u=y.charAt(0)==="/")}return d=l(n(d.split("/"),function(h){return!!h}),!u).join("/"),(u?"/":"")+d||"."},c.normalize=function(d){var u=c.isAbsolute(d),f=g(d,-1)==="/";return d=l(n(d.split("/"),function(y){return!!y}),!u).join("/"),d||u||(d="."),d&&f&&(d+="/"),(u?"/":"")+d},c.isAbsolute=function(d){return d.charAt(0)==="/"},c.join=function(){var d=Array.prototype.slice.call(arguments,0);return c.normalize(n(d,function(u,f){if(typeof u!="string")throw new TypeError("Arguments to path.join must be strings");return u}).join("/"))},c.relative=function(d,u){function f(b){for(var E=0;E<b.length&&b[E]==="";E++);for(var M=b.length-1;M>=0&&b[M]==="";M--);return E>M?[]:b.slice(E,M-E+1)}d=c.resolve(d).substr(1),u=c.resolve(u).substr(1);for(var y=f(d.split("/")),h=f(u.split("/")),p=Math.min(y.length,h.length),r=p,o=0;o<p;o++)if(y[o]!==h[o]){r=o;break}for(var m=[],o=r;o<y.length;o++)m.push("..");return m=m.concat(h.slice(r)),m.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(d){var u=s(d),f=u[0],y=u[1];return f||y?(y&&(y=y.substr(0,y.length-1)),f+y):"."},c.basename=function(d,u){var f=s(d)[2];return u&&f.substr(-1*u.length)===u&&(f=f.substr(0,f.length-u.length)),f},c.extname=function(d){return s(d)[3]};var g="ab".substr(-1)==="b"?function(d,u,f){return d.substr(u,f)}:function(d,u,f){return u<0&&(u=d.length+u),d.substr(u,f)}}).call(c,x(1))},function(S,c,x){function t(l){if(!l.hash)throw l;return{_diagnostic:{expected:l.hash.expected,message:l.message,text:l.hash.text,token:l.hash.token},location:l.hash.loc}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=t},function(S,c,x){function t(y){return{type:"terminal",value:y}}function l(y){return{type:"command",value:y}}function n(y){return{type:"greek",value:y}}function i(y){return{subscript:y._,superscript:y["^"],type:"level"}}function s(y,h){var p=[],r=y.match(/'+/);if(r!==null)for(var o=r[0].length,m=0;m<o;m++)p.push(l("\\prime"));return f(p,h)}function g(y,h){return{type:"fraction",numerator:y,denominator:h}}function d(y,h){return{name:y,type:"typeform",value:h}}function u(y,h){return{type:"radical",index:h,radicand:y}}function f(){for(var y=[],h=0;h<arguments.length;h++)y[h]=arguments[h];return Array.prototype.concat.apply([],y)}Object.defineProperty(c,"__esModule",{value:!0}),c.terminal=t,c.command=l,c.greek=n,c.level=i,c.processPrimes=s,c.fraction=g,c.typeform=d,c.radical=u,c.group=f},function(S,c){S.exports=function(x){return x.webpackPolyfill||(x.deprecate=function(){},x.paths=[],x.children||(x.children=[]),Object.defineProperty(x,"loaded",{enumerable:!0,get:function(){return x.l}}),Object.defineProperty(x,"id",{enumerable:!0,get:function(){return x.i}}),x.webpackPolyfill=1),x}},function(S,c,x){(function(t,l){var n=(function(){function i(){this.yy={}}var s=function(Ie,Oe,N,Pe){for(N=N||{},Pe=Ie.length;Pe--;N[Ie[Pe]]=Oe);return N},g=[1,11],d=[1,12],u=[1,13],f=[1,69],y=[1,70],h=[1,68],p=[1,38],r=[1,39],o=[1,58],m=[1,59],b=[1,60],E=[1,61],M=[1,62],D=[1,63],A=[1,64],v=[1,65],k=[1,66],J=[1,67],X=[1,40],te=[1,34],H=[1,35],z=[1,36],B=[1,37],F=[1,41],$=[1,42],re=[1,43],K=[1,44],ue=[1,45],ie=[1,46],Q=[1,47],pe=[1,48],ee=[1,49],ae=[1,50],le=[1,51],me=[1,52],Ae=[1,17],Be=[1,53],Fe=[1,54],Le=[1,55],ze=[1,56],We=[1,57],Z=[5,12,13,14,18,24,25],C=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,81],oe=[1,74],ge=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,79,81],_e=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81],De={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,element:6,index_element:7,modified_expression:8,radical:9,primes:10,OPEN_MODEXP:11,MODEXP_UNDER:12,MODEXP_OVER:13,CLOSE_MODEXP:14,RADICAL_INDEX:15,index_group:16,OPEN_RADICAL:17,CLOSE_RADICAL:18,level:19,LEVEL:20,BASELINE:21,frac:22,OPEN_FRAC:23,SLASH:24,CLOSE_FRAC:25,subscript_head:26,number:27,atom:28,command:29,greek:30,letter:31,comma:32,period:33,space:34,operation:35,comparison:36,level_with_comparison:37,ellipsis:38,colon:39,infinity:40,integral:41,factorial:42,ampersand:43,question_mark:44,bracket:45,",":46,".":47,"[":48,"{":49,"(":50,"]":51,"}":52,")":53,LANGLE:54,RANGLE:55,PIPE:56,DOUBLE_PIPE:57,SPACE:58,COMMAND:59,GREEK:60,LETTER:61,CAPITAL_LETTER:62,"+":63,"-":64,CDOT:65,TIMES:66,"*":67,"/":68,DIV:69,PERCENT:70,COMPARISON:71,LEVEL_WITH_COMPARISON:72,ELLIPSIS:73,COLON:74,NUMBER:75,INFINITY:76,INTEGRAL:77,FACTORIAL:78,"&":79,PRIMES:80,"?":81,unknown:82,UNKNOWN:83,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",11:"OPEN_MODEXP",12:"MODEXP_UNDER",13:"MODEXP_OVER",14:"CLOSE_MODEXP",15:"RADICAL_INDEX",17:"OPEN_RADICAL",18:"CLOSE_RADICAL",20:"LEVEL",21:"BASELINE",23:"OPEN_FRAC",24:"SLASH",25:"CLOSE_FRAC",46:",",47:".",48:"[",49:"{",50:"(",51:"]",52:"}",53:")",54:"LANGLE",55:"RANGLE",56:"PIPE",57:"DOUBLE_PIPE",58:"SPACE",59:"COMMAND",60:"GREEK",61:"LETTER",62:"CAPITAL_LETTER",63:"+",64:"-",65:"CDOT",66:"TIMES",67:"*",68:"/",69:"DIV",70:"PERCENT",71:"COMPARISON",72:"LEVEL_WITH_COMPARISON",73:"ELLIPSIS",74:"COLON",75:"NUMBER",76:"INFINITY",77:"INTEGRAL",78:"FACTORIAL",79:"&",80:"PRIMES",81:"?",83:"UNKNOWN"},productions_:[0,[3,2],[3,1],[4,2],[4,1],[6,1],[6,1],[6,2],[6,1],[8,7],[8,6],[8,5],[8,6],[8,5],[8,5],[8,4],[8,4],[8,3],[8,4],[8,4],[8,4],[8,4],[8,3],[8,3],[8,2],[9,5],[9,4],[9,4],[9,3],[9,3],[9,2],[19,1],[19,1],[22,5],[22,4],[22,4],[22,3],[16,2],[16,1],[7,3],[7,2],[7,2],[7,3],[7,2],[7,2],[7,1],[7,1],[7,1],[26,1],[26,1],[26,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[32,1],[33,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[34,1],[29,1],[30,1],[31,1],[31,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[36,1],[37,1],[38,1],[39,1],[27,1],[40,1],[41,1],[42,1],[43,1],[10,1],[44,1],[82,1]],performAction:function(Ie,Oe,N,Pe,Xe,$e,ht){var ye=$e.length-1;switch(Xe){case 1:return $e[ye-1];case 2:return Pe.group();case 3:case 37:case 41:case 43:case 44:this.$=Pe.group($e[ye-1],$e[ye]);break;case 4:case 38:this.$=Pe.group($e[ye]);break;case 7:this.$=Pe.group($e[ye-1],$e[ye]);break;case 9:this.$=Pe.modified_expression($e[ye-5],$e[ye-3],$e[ye-1]);break;case 10:this.$=Pe.modified_expression($e[ye-4],$e[ye-2]);break;case 11:this.$=Pe.modified_expression($e[ye-3],$e[ye-1]);break;case 12:this.$=Pe.modified_expression($e[ye-4],Pe.group(),$e[ye-1]);break;case 13:this.$=Pe.modified_expression($e[ye-3],Pe.group(),$e[ye-1]);break;case 14:this.$=Pe.modified_expression($e[ye-3],Pe.group(),Pe.group());break;case 15:case 16:this.$=Pe.modified_expression($e[ye-2],Pe.group());break;case 17:this.$=Pe.modified_expression($e[ye-1]);break;case 18:case 19:case 22:case 23:case 24:this.$=Pe.modified_expression(Pe.group());break;case 20:case 21:Pe.warnOrError("Multi-level modified expressions are not supported."),this.$=Pe.modified_expression(Pe.group());break;case 25:this.$=Pe.radical($e[ye-1],$e[ye-3]);break;case 26:this.$=Pe.radical($e[ye-1],Pe.group());break;case 27:this.$=Pe.radical(Pe.group(),$e[ye-2]);break;case 28:this.$=Pe.radical(Pe.group(),Pe.group());break;case 29:this.$=Pe.radical($e[ye-1]);break;case 30:this.$=Pe.radical(Pe.group());break;case 31:this.$=Pe.level($e[ye]);break;case 32:this.$=Pe.baseline();break;case 33:this.$=Pe.fraction($e[ye-3],$e[ye-1]);break;case 34:this.$=Pe.fraction($e[ye-2],Pe.group());break;case 35:this.$=Pe.fraction(Pe.group(),$e[ye-1]);break;case 36:this.$=Pe.fraction(Pe.group(),Pe.group());break;case 39:this.$=Pe.group(Pe.simple_subscript($e[ye-2],$e[ye]),$e[ye-1]);break;case 40:this.$=Pe.simple_subscript($e[ye-1],$e[ye]);break;case 42:Pe.warnOrError("Illegal use of Nemeth primes"),this.$=Pe.group(Pe.simple_subscript($e[ye-2],$e[ye-1]),$e[ye]);break;case 67:this.$=Pe.terminal(",");break;case 68:this.$=Pe.terminal(".");break;case 69:this.$=Pe.terminal("[");break;case 70:this.$=Pe.terminal("\\{");break;case 71:this.$=Pe.terminal("(");break;case 72:this.$=Pe.terminal("]");break;case 73:this.$=Pe.terminal("\\}");break;case 74:this.$=Pe.terminal(")");break;case 75:this.$=Pe.terminal("\\langle ");break;case 76:this.$=Pe.terminal("\\rangle ");break;case 77:this.$=Pe.terminal("|");break;case 78:this.$=Pe.terminal("\\|");break;case 79:this.$=Pe.terminal(" ");break;case 80:this.$=Pe.command($e[ye].toLowerCase());break;case 81:this.$=Pe.terminal(Pe.greek($e[ye]));break;case 82:this.$=Pe.terminal($e[ye].toLowerCase());break;case 83:this.$=Pe.terminal($e[ye].toUpperCase());break;case 84:this.$=Pe.terminal("+");break;case 85:this.$=Pe.terminal("-");break;case 86:this.$=Pe.terminal("\\cdot ");break;case 87:this.$=Pe.terminal("\\times ");break;case 88:this.$=Pe.terminal("*");break;case 89:this.$=Pe.terminal("/");break;case 90:this.$=Pe.terminal("\\div ");break;case 91:this.$=Pe.terminal("\\%");break;case 92:this.$=Pe.comparison($e[ye].trim());break;case 93:this.$=Pe.level_with_comparison($e[ye].trim());break;case 94:this.$=Pe.terminal("\\ldots ");break;case 95:this.$=Pe.terminal(":");break;case 96:this.$=Pe.terminal($e[ye]);break;case 97:this.$=Pe.terminal("\\infty ");break;case 98:this.$=Pe.terminal("\\int ");break;case 99:this.$=Pe.terminal("!");break;case 100:this.$=Pe.terminal("\\&");break;case 101:this.$=Pe.primes($e[ye]);break;case 102:this.$=Pe.terminal("?")}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,11:g,15:d,17:u,19:33,20:f,21:y,22:32,23:h,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We},{1:[3]},{5:[1,71]},{1:[2,2]},s(Z,[2,4],{6:4,7:5,8:6,9:7,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,22:32,19:33,4:72,11:g,15:d,17:u,20:f,21:y,23:h,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We}),s(C,[2,5]),s(C,[2,6]),s(C,[2,8],{10:73,80:oe}),s(ge,[2,45],{10:75,27:76,75:Ae,80:oe}),s(C,[2,46],{10:77,80:oe}),s(C,[2,47],{10:78,80:oe}),{4:79,6:4,7:5,8:6,9:7,11:g,12:[1,81],13:[1,80],14:[1,82],15:d,17:u,19:33,20:f,21:y,22:32,23:h,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We},{7:85,16:83,17:[1,84],19:33,20:f,21:y,22:32,23:h,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We},{4:86,6:4,7:5,8:6,9:7,11:g,15:d,17:u,18:[1,87],19:33,20:f,21:y,22:32,23:h,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We},s(_e,[2,48]),s(_e,[2,49]),s(_e,[2,50]),s(_e,[2,96]),s(_e,[2,51]),s(_e,[2,52]),s(_e,[2,53]),s(_e,[2,54]),s(_e,[2,55]),s(_e,[2,56]),s(_e,[2,57]),s(_e,[2,58]),s(_e,[2,59]),s(_e,[2,60]),s(_e,[2,61]),s(_e,[2,62]),s(_e,[2,63]),s(_e,[2,64]),s(_e,[2,65]),s(_e,[2,66]),s(_e,[2,80]),s(_e,[2,81]),s(_e,[2,82]),s(_e,[2,83]),s(_e,[2,67]),s(_e,[2,68]),s(_e,[2,79]),s(_e,[2,84]),s(_e,[2,85]),s(_e,[2,86]),s(_e,[2,87]),s(_e,[2,88]),s(_e,[2,89]),s(_e,[2,90]),s(_e,[2,91]),s(_e,[2,92]),s(_e,[2,93]),s(_e,[2,94]),s(_e,[2,95]),s(_e,[2,97]),s(_e,[2,98]),s(_e,[2,99]),s(_e,[2,100]),s(_e,[2,102]),s(_e,[2,69]),s(_e,[2,70]),s(_e,[2,71]),s(_e,[2,72]),s(_e,[2,73]),s(_e,[2,74]),s(_e,[2,75]),s(_e,[2,76]),s(_e,[2,77]),s(_e,[2,78]),{4:88,6:4,7:5,8:6,9:7,11:g,15:d,17:u,19:33,20:f,21:y,22:32,23:h,24:[1,89],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We},s(_e,[2,31]),s(_e,[2,32]),{1:[2,1]},s(Z,[2,3]),s(C,[2,7]),s(C,[2,101]),s(ge,[2,41],{27:90,75:Ae}),s(C,[2,40],{10:91,80:oe}),s(C,[2,43]),s(C,[2,44]),{12:[1,92],13:[1,93],14:[1,94]},{12:[1,95],13:[1,96],14:[1,97]},{12:[1,99],13:[1,98],14:[1,100]},s(C,[2,24]),{17:[1,101]},{4:102,6:4,7:5,8:6,9:7,11:g,15:d,17:u,18:[1,103],19:33,20:f,21:y,22:32,23:h,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We},{7:85,16:104,17:[2,38],19:33,20:f,21:y,22:32,23:h,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We},{18:[1,105]},s(_e,[2,30]),{24:[1,106]},{4:107,6:4,7:5,8:6,9:7,11:g,15:d,17:u,19:33,20:f,21:y,22:32,23:h,25:[1,108],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We},s(C,[2,39]),s(C,[2,42]),{4:109,6:4,7:5,8:6,9:7,11:g,13:[1,110],14:[1,111],15:d,17:u,19:33,20:f,21:y,22:32,23:h,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We},{4:112,6:4,7:5,8:6,9:7,11:g,14:[1,113],15:d,17:u,19:33,20:f,21:y,22:32,23:h,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We},s(C,[2,17]),{14:[1,114]},{14:[1,115]},s(C,[2,22]),{14:[1,116]},{14:[1,117]},s(C,[2,23]),{4:118,6:4,7:5,8:6,9:7,11:g,15:d,17:u,18:[1,119],19:33,20:f,21:y,22:32,23:h,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We},{18:[1,120]},s(_e,[2,28]),{17:[2,37]},s(_e,[2,29]),{4:121,6:4,7:5,8:6,9:7,11:g,15:d,17:u,19:33,20:f,21:y,22:32,23:h,25:[1,122],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We},{25:[1,123]},s(_e,[2,36]),{13:[1,124],14:[1,125]},{4:126,6:4,7:5,8:6,9:7,11:g,14:[1,127],15:d,17:u,19:33,20:f,21:y,22:32,23:h,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We},s(C,[2,16]),{14:[1,128]},s(C,[2,15]),s(C,[2,18]),s(C,[2,20]),s(C,[2,19]),s(C,[2,21]),{18:[1,129]},s(_e,[2,27]),s(_e,[2,26]),{25:[1,130]},s(_e,[2,34]),s(_e,[2,35]),{4:131,6:4,7:5,8:6,9:7,11:g,14:[1,132],15:d,17:u,19:33,20:f,21:y,22:32,23:h,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:p,47:r,48:o,49:m,50:b,51:E,52:M,53:D,54:A,55:v,56:k,57:J,58:X,59:te,60:H,61:z,62:B,63:F,64:$,65:re,66:K,67:ue,68:ie,69:Q,70:pe,71:ee,72:ae,73:le,74:me,75:Ae,76:Be,77:Fe,78:Le,79:ze,81:We},s(C,[2,11]),{14:[1,133]},s(C,[2,14]),s(C,[2,13]),s(_e,[2,25]),s(_e,[2,33]),{14:[1,134]},s(C,[2,10]),s(C,[2,12]),s(C,[2,9])],defaultActions:{3:[2,2],71:[2,1],104:[2,37]},parseError:function(Ie,Oe){if(!Oe.recoverable){var N=new Error(Ie);throw N.hash=Oe,N}this.trace(Ie)},parse:function(Ie){var Oe=this,N=[0],Pe=[null],Xe=[],$e=this.table,ht="",ye=0,Ue=0,we=0,Te=Xe.slice.call(arguments,1),qe=Object.create(this.lexer),He={yy:{}};for(var Se in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Se)&&(He.yy[Se]=this.yy[Se]);qe.setInput(Ie,He.yy),He.yy.lexer=qe,He.yy.parser=this,qe.yylloc===void 0&&(qe.yylloc={});var Ce=qe.yylloc;Xe.push(Ce);var Re=qe.options&&qe.options.ranges;typeof He.yy.parseError=="function"?this.parseError=He.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Ve,rt,at,yt,Pt,vt,At,Ut,Dt,on=function(){var qt;return qt=qe.lex()||1,typeof qt!="number"&&(qt=Oe.symbols_[qt]||qt),qt},St={};;){if(at=N[N.length-1],this.defaultActions[at]?yt=this.defaultActions[at]:(Ve!=null||(Ve=on()),yt=$e[at]&&$e[at][Ve]),yt===void 0||!yt.length||!yt[0]){var Xt="";Dt=[];for(vt in $e[at])this.terminals_[vt]&&vt>2&&Dt.push("'"+this.terminals_[vt]+"'");Xt=qe.showPosition?"Parse error on line "+(ye+1)+`:
`+qe.showPosition()+`
Expecting `+Dt.join(", ")+", got '"+(this.terminals_[Ve]||Ve)+"'":"Parse error on line "+(ye+1)+": Unexpected "+(Ve==1?"end of input":"'"+(this.terminals_[Ve]||Ve)+"'"),this.parseError(Xt,{text:qe.match,token:this.terminals_[Ve]||Ve,line:qe.yylineno,loc:Ce,expected:Dt})}if(yt[0]instanceof Array&&yt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+at+", token: "+Ve);switch(yt[0]){case 1:N.push(Ve),Pe.push(qe.yytext),Xe.push(qe.yylloc),N.push(yt[1]),Ve=null,rt?(Ve=rt,rt=null):(Ue=qe.yyleng,ht=qe.yytext,ye=qe.yylineno,Ce=qe.yylloc,we>0);break;case 2:if(At=this.productions_[yt[1]][1],St.$=Pe[Pe.length-At],St._$={first_line:Xe[Xe.length-(At||1)].first_line,last_line:Xe[Xe.length-1].last_line,first_column:Xe[Xe.length-(At||1)].first_column,last_column:Xe[Xe.length-1].last_column},Re&&(St._$.range=[Xe[Xe.length-(At||1)].range[0],Xe[Xe.length-1].range[1]]),(Pt=this.performAction.apply(St,[ht,Ue,ye,He.yy,yt[1],Pe,Xe].concat(Te)))!==void 0)return Pt;At&&(N=N.slice(0,-1*At*2),Pe=Pe.slice(0,-1*At),Xe=Xe.slice(0,-1*At)),N.push(this.productions_[yt[1]][0]),Pe.push(St.$),Xe.push(St._$),Ut=$e[N[N.length-2]][N[N.length-1]],N.push(Ut);break;case 3:return!0}}return!0}},je=(function(){return{EOF:1,parseError:function(Ie,Oe){if(!this.yy.parser)throw new Error(Ie);this.yy.parser.parseError(Ie,Oe)},setInput:function(Ie,Oe){return this.yy=Oe||this.yy||{},this._input=Ie,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Ie=this._input[0];return this.yytext+=Ie,this.yyleng++,this.offset++,this.match+=Ie,this.matched+=Ie,Ie.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ie},unput:function(Ie){var Oe=Ie.length,N=Ie.split(/(?:\r\n?|\n)/g);this._input=Ie+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Oe),this.offset-=Oe;var Pe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),N.length-1&&(this.yylineno-=N.length-1);var Xe=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:N?(N.length===Pe.length?this.yylloc.first_column:0)+Pe[Pe.length-N.length].length-N[0].length:this.yylloc.first_column-Oe},this.options.ranges&&(this.yylloc.range=[Xe[0],Xe[0]+this.yyleng-Oe]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(Ie){this.unput(this.match.slice(Ie))},pastInput:function(){var Ie=this.matched.substr(0,this.matched.length-this.match.length);return(Ie.length>20?"...":"")+Ie.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Ie=this.match;return Ie.length<20&&(Ie+=this._input.substr(0,20-Ie.length)),(Ie.substr(0,20)+(Ie.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Ie=this.pastInput(),Oe=new Array(Ie.length+1).join("-");return Ie+this.upcomingInput()+`
`+Oe+"^"},test_match:function(Ie,Oe){var N,Pe,Xe;if(this.options.backtrack_lexer&&(Xe={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Xe.yylloc.range=this.yylloc.range.slice(0))),Pe=Ie[0].match(/(?:\r\n?|\n).*/g),Pe&&(this.yylineno+=Pe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Pe?Pe[Pe.length-1].length-Pe[Pe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ie[0].length},this.yytext+=Ie[0],this.match+=Ie[0],this.matches=Ie,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ie[0].length),this.matched+=Ie[0],N=this.performAction.call(this,this.yy,this,Oe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),N)return N;if(this._backtrack){for(var $e in Xe)this[$e]=Xe[$e];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Ie,Oe,N,Pe;this._more||(this.yytext="",this.match="");for(var Xe=this._currentRules(),$e=0;$e<Xe.length;$e++)if((N=this._input.match(this.rules[Xe[$e]]))&&(!Oe||N[0].length>Oe[0].length)){if(Oe=N,Pe=$e,this.options.backtrack_lexer){if((Ie=this.test_match(N,Xe[$e]))!==!1)return Ie;if(this._backtrack){Oe=!1;continue}return!1}if(!this.options.flex)break}return Oe?(Ie=this.test_match(Oe,Xe[Pe]))!==!1&&Ie:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Ie=this.next();return Ie||this.lex()},begin:function(Ie){this.conditionStack.push(Ie)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ie){return Ie=this.conditionStack.length-1-Math.abs(Ie||0),Ie>=0?this.conditionStack[Ie]:"INITIAL"},pushState:function(Ie){this.begin(Ie)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Ie,Oe,N,Pe){switch(N){case 0:return this.begin("modexp"),11;case 1:return 21;case 2:return this.begin("modexp"),11;case 3:return 12;case 4:return 13;case 5:return this.popState(),14;case 6:return 63;case 7:return 64;case 8:return 65;case 9:return 66;case 10:return 67;case 11:return 68;case 12:return 69;case 13:return 54;case 14:return 48;case 15:return 49;case 16:return 50;case 17:return 55;case 18:return 51;case 19:return 52;case 20:return 53;case 21:return 57;case 22:return 56;case 23:return 74;case 24:return 70;case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:return 72;case 34:return 71;case 35:case 36:return 72;case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:return 71;case 47:return 73;case 48:return 20;case 49:return 47;case 50:return 21;case 51:return 80;case 52:return 60;case 53:return 15;case 54:return this.begin("radical"),17;case 55:return this.popState(),18;case 56:return 18;case 57:return 77;case 58:return 79;case 59:return 78;case 60:case 61:return 59;case 62:return Oe.yytext=this.matches[1],75;case 63:return 23;case 64:return 24;case 65:return 25;case 66:return Oe.yytext=this.matches[1],62;case 67:return 61;case 68:return 76;case 69:return 81;case 70:return 46;case 71:return 47;case 72:return 58;case 73:return 5;case 74:return 83}},rules:[/^(?:"(?=[^>\]]+%))/,/^(?:")/,/^(?:"(?=[^>\]]+\]|[^>\]]+%))/,/^(?:%)/,/^(?:<)/,/^(?:\])/,/^(?:[+])/,/^(?:[-])/,/^(?:[*])/,/^(?:[@][*])/,/^(?:[@][\#])/,/^(?:[_][\/])/,/^(?:[.][\/])/,/^(?:[.][.][(])/,/^(?:[@][(])/,/^(?:[.][(])/,/^(?:[(])/,/^(?:[.][.][)])/,/^(?:[@][)])/,/^(?:[.][)])/,/^(?:[)])/,/^(?:[\\][\\])/,/^(?:[\\])/,/^(?:[_][3])/,/^(?:[@][0])/,/^(?:[ ][\^;]+[.]K[ ])/,/^(?:[\^;]+[=])/,/^(?:[ ][\^;]+[\/][.]K[ ])/,/^(?:[ ][\^;]+[@][:][@][:][ ])/,/^(?:[ ][\^;]+["]K[:][ ])/,/^(?:[ ][\^;]+[.]1[:][ ])/,/^(?:[ ][\^;]+["]K[ ])/,/^(?:[ ][\^;]+[.]1[ ])/,/^(?:[ ][\^;]+[\/][$][L][ ])/,/^(?:[ ][.]K[ ])/,/^(?:[ ][\^;]+[\/]?[$][L][ ])/,/^(?:[ ][\^;]+[$]P[ ])/,/^(?:[=])/,/^(?:[ ][\/][.]K[ ])/,/^(?:[ ][@][:][@][:][ ])/,/^(?:[ ]["]K[:][ ])/,/^(?:[ ][.]1[:][ ])/,/^(?:[ ]["]K[ ])/,/^(?:[ ][.]1[ ])/,/^(?:[@][:])/,/^(?:[ ][\/]?[$][L][ ])/,/^(?:[ ][$]P[ ])/,/^(?:[ ]['][']['][ ])/,/^(?:[\^;]+)/,/^(?:[.]["])/,/^(?:["])/,/^(?:[']+)/,/^(?:[.][,]?[ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[.]*[<])/,/^(?:[.]*[>])/,/^(?:[.]*\])/,/^(?:[.]*\])/,/^(?:!)/,/^(?:[_]&)/,/^(?:&)/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/,/^(?:#?(\d*\.?\d+))/,/^(?:[,]*[?])/,/^(?:[,]*[\/])/,/^(?:[,]*#)/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,][=])/,/^(?:[_][8])/,/^(?:[,][ ]?)/,/^(?:[.])/,/^(?:[ ])/,/^(?:$)/,/^(?:.)/],conditions:{radical:{rules:[0,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0},modexp:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0},INITIAL:{rules:[2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0}}}})();return De.lexer=je,i.prototype=De,De.Parser=i,new i})();c.parser=n,c.Parser=n.Parser,c.parse=function(){return n.parse.apply(n,arguments)},c.main=function(i){i[1]||(console.log("Usage: "+i[0]+" FILE"),t.exit(1));var s=x(4).readFileSync(x(5).normalize(i[1]),"utf8");return c.parser.parse(s)},l!==void 0&&x.c[x.s]===l&&c.main(t.argv.slice(1))}).call(c,x(1),x(8)(S))},function(S,c,x){(function(t,l){var n=(function(){function i(){this.yy={}}var s=function(ye,Ue,we,Te){for(we=we||{},Te=ye.length;Te--;we[ye[Te]]=Ue);return we},g=[1,15],d=[1,16],u=[1,17],f=[1,36],y=[1,18],h=[1,37],p=[1,38],r=[1,14],o=[1,46],m=[1,47],b=[1,39],E=[1,40],M=[1,41],D=[1,56],A=[1,42],v=[1,43],k=[1,44],J=[1,45],X=[1,54],te=[1,55],H=[1,57],z=[1,58],B=[1,59],F=[1,60],$=[1,61],re=[1,62],K=[1,63],ue=[1,64],ie=[1,65],Q=[1,66],pe=[1,67],ee=[1,68],ae=[1,69],le=[1,70],me=[1,71],Ae=[1,72],Be=[1,73],Fe=[1,74],Le=[1,75],ze=[1,48],We=[1,49],Z=[1,50],C=[1,51],oe=[1,52],ge=[1,76],_e=[1,53],De=[5,14,18,19,29,52,53,54],je=[5,10,13,14,15,18,19,29,52,53,54],Ie=[5,10,13,14,15,17,18,19,21,23,24,28,29,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87],Oe=[1,84],N=[1,85],Pe=[1,86],Xe=[10,13,15,17,21,23,24,28,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87],$e={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,expression_group:6,delimited_expression:7,level:8,radical:9,LEVEL:10,basic_token:11,bracketed_expression:12,RADICAL_WITH_INDEX:13,CLOSE_RADICAL:14,RADICAL:15,frac:16,OPEN_FRAC:17,OVER:18,CLOSE_FRAC:19,simple_frac:20,NUMBER:21,NUMBER_FRAC_DENOMINATOR:22,NUMBER_FRAC_NUMERATOR_BAD:23,NUMBER_FRAC_DENOMINATOR_BAD:24,atom:25,lbracket:26,rbracket:27,OPEN_GROUP:28,CLOSE_GROUP:29,command:30,greek:31,letter:32,comma:33,period:34,colon:35,infinity:36,integral:37,factorial:38,ampersand:39,question_mark:40,bracket:41,space:42,operation:43,comparison:44,ellipsis:45,primes:46,",":47,".":48,"[":49,"{":50,"(":51,"]":52,"}":53,")":54,SPACE:55,COMMAND:56,GREEK:57,CAPITAL_LETTER:58,LETTER:59,PIPE:60,DOUBLE_PIPE:61,"+":62,"-":63,CDOT:64,TIMES:65,"*":66,DIV:67,SLASH:68,PERCENT:69,"=":70,NEQ:71,"<":72,">":73,LEQ:74,APPROX:75,GEQ:76,TILDE:77,PARALLEL:78,PERPENDICULAR:79,ELLIPSIS:80,COLON:81,INFINITY:82,INTEGRAL:83,FACTORIAL:84,"&":85,PRIMES:86,"?":87,unknown:88,UNKNOWN:89,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"LEVEL",13:"RADICAL_WITH_INDEX",14:"CLOSE_RADICAL",15:"RADICAL",17:"OPEN_FRAC",18:"OVER",19:"CLOSE_FRAC",21:"NUMBER",22:"NUMBER_FRAC_DENOMINATOR",23:"NUMBER_FRAC_NUMERATOR_BAD",24:"NUMBER_FRAC_DENOMINATOR_BAD",28:"OPEN_GROUP",29:"CLOSE_GROUP",47:",",48:".",49:"[",50:"{",51:"(",52:"]",53:"}",54:")",55:"SPACE",56:"COMMAND",57:"GREEK",58:"CAPITAL_LETTER",59:"LETTER",60:"PIPE",61:"DOUBLE_PIPE",62:"+",63:"-",64:"CDOT",65:"TIMES",66:"*",67:"DIV",68:"SLASH",69:"PERCENT",70:"=",71:"NEQ",72:"<",73:">",74:"LEQ",75:"APPROX",76:"GEQ",77:"TILDE",78:"PARALLEL",79:"PERPENDICULAR",80:"ELLIPSIS",81:"COLON",82:"INFINITY",83:"INTEGRAL",84:"FACTORIAL",85:"&",86:"PRIMES",87:"?",89:"UNKNOWN"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[7,1],[7,1],[8,2],[8,2],[8,2],[9,4],[9,3],[9,3],[9,2],[9,4],[9,3],[9,2],[16,5],[16,4],[16,4],[16,3],[16,2],[20,2],[20,1],[20,1],[11,1],[11,1],[11,1],[6,2],[6,2],[6,1],[6,1],[12,3],[12,2],[12,3],[12,2],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[33,1],[34,1],[26,1],[26,1],[26,1],[27,1],[27,1],[27,1],[42,1],[30,1],[31,1],[32,1],[32,1],[41,1],[41,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[45,1],[35,1],[36,1],[37,1],[38,1],[39,1],[46,1],[40,1],[88,1]],performAction:function(ye,Ue,we,Te,qe,He,Se){var Ce=He.length-1;switch(qe){case 1:return He[Ce-1];case 2:return Te.group();case 3:case 35:this.$=Te.group(He[Ce-2],He[Ce-1],He[Ce]);break;case 4:case 6:case 31:case 32:case 36:this.$=Te.group(He[Ce-1],He[Ce]);break;case 5:case 7:case 33:case 34:this.$=Te.group(He[Ce]);break;case 10:case 11:case 12:this.$=Te.basic_level(He[Ce-1],Te.group(He[Ce]));break;case 13:case 17:this.$=Te.radical(He[Ce-1],Te.group(He[Ce-2]));break;case 14:case 15:this.$=Te.radical(Te.group(),Te.group(He[Ce-1]));break;case 16:this.$=Te.radical(Te.group(),Te.group());break;case 18:this.$=Te.radical(He[Ce-1]);break;case 19:this.$=Te.radical(Te.group());break;case 20:this.$=Te.fraction(He[Ce-3],He[Ce-1]);break;case 21:this.$=Te.fraction(He[Ce-2],Te.group());break;case 22:this.$=Te.fraction(Te.group(),He[Ce-1]);break;case 23:case 24:this.$=Te.fraction(Te.group(),Te.group());break;case 25:this.$=Te.fraction(Te.group(Te.terminal(Te.to_number(He[Ce-1]))),Te.group(Te.terminal(Te.to_number(He[Ce]))));break;case 26:this.$=Te.fraction(Te.group(Te.terminal(Te.to_number(He[Ce]))),Te.group());break;case 27:this.$=Te.fraction(Te.group(),Te.group(Te.terminal(Te.to_number(He[$01]))));break;case 37:this.$=Te.group(He[Ce-1]);break;case 38:this.$=Te.group();break;case 39:this.$=Te.terminal(Te.to_number(He[Ce]));break;case 57:this.$=Te.terminal(",");break;case 58:this.$=Te.terminal(".");break;case 59:this.$=Te.terminal("[");break;case 60:this.$=Te.terminal("\\{");break;case 61:this.$=Te.terminal("(");break;case 62:this.$=Te.terminal("]");break;case 63:this.$=Te.terminal("\\}");break;case 64:this.$=Te.terminal(")");break;case 65:this.$=Te.terminal(" ");break;case 66:this.$=Te.command("\\"+He[Ce].trim().toLowerCase());break;case 67:this.$=Te.terminal(Te.greek(He[Ce]));break;case 68:this.$=Te.terminal(He[Ce].toUpperCase());break;case 69:this.$=Te.terminal(He[Ce].toLowerCase());break;case 70:this.$=Te.terminal("|");break;case 71:this.$=Te.terminal("\\|");break;case 72:this.$=Te.terminal("+");break;case 73:this.$=Te.terminal("-");break;case 74:this.$=Te.terminal("\\cdot ");break;case 75:this.$=Te.terminal("\\times ");break;case 76:this.$=Te.terminal("*");break;case 77:this.$=Te.terminal("\\div ");break;case 78:this.$=Te.terminal("/");break;case 79:this.$=Te.terminal("\\%");break;case 80:this.$=Te.terminal("=");break;case 81:this.$=Te.terminal("\\neq ");break;case 82:this.$=Te.terminal("<");break;case 83:this.$=Te.terminal(">");break;case 84:this.$=Te.terminal("\\leq ");break;case 85:this.$=Te.terminal("\\approx ");break;case 86:this.$=Te.terminal("\\geq ");break;case 87:this.$=Te.terminal("\\sim ");break;case 88:this.$=Te.terminal("\\parallel ");break;case 89:this.$=Te.terminal("\\perp ");break;case 90:this.$=Te.terminal("\\ldots ");break;case 91:this.$=Te.terminal(":");break;case 92:this.$=Te.terminal("\\infty ");break;case 93:this.$=Te.terminal("\\int ");break;case 94:this.$=Te.terminal("!");break;case 95:this.$=Te.terminal("\\&");break;case 96:this.$=Te.primes(He[Ce]);break;case 97:this.$=Te.terminal("?")}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:8,9:9,10:g,11:6,12:7,13:d,15:u,16:11,17:f,20:12,21:y,23:h,24:p,25:10,26:13,28:r,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:o,48:m,49:b,50:E,51:M,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e},{1:[3]},{5:[1,77]},{1:[2,2]},s(De,[2,5],{8:8,9:9,7:78,10:g,13:d,15:u}),s(De,[2,7],{6:4,7:5,11:6,12:7,8:8,9:9,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,4:79,10:g,13:d,15:u,17:f,21:y,23:h,24:p,28:r,47:o,48:m,49:b,50:E,51:M,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e}),s(je,[2,33],{11:6,12:7,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,6:80,17:f,21:y,23:h,24:p,28:r,47:o,48:m,49:b,50:E,51:M,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e}),s(je,[2,34],{11:6,12:7,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,6:81,17:f,21:y,23:h,24:p,28:r,47:o,48:m,49:b,50:E,51:M,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e}),s(Ie,[2,8]),s(Ie,[2,9]),s(Ie,[2,28]),s(Ie,[2,29]),s(Ie,[2,30]),{4:82,6:4,7:5,8:8,9:9,10:g,11:6,12:7,13:d,15:u,16:11,17:f,20:12,21:y,23:h,24:p,25:10,26:13,27:83,28:r,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:o,48:m,49:b,50:E,51:M,52:Oe,53:N,54:Pe,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e},{4:87,6:4,7:5,8:8,9:9,10:g,11:6,12:7,13:d,15:u,16:11,17:f,20:12,21:y,23:h,24:p,25:10,26:13,28:r,29:[1,88],30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:o,48:m,49:b,50:E,51:M,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e},{9:91,11:89,12:90,13:d,15:u,16:11,17:f,20:12,21:y,23:h,24:p,25:10,26:13,28:r,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:o,48:m,49:b,50:E,51:M,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e},{11:92,12:93,14:[1,94],16:11,17:f,20:12,21:y,23:h,24:p,25:10,26:13,28:r,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:o,48:m,49:b,50:E,51:M,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e},{4:95,6:4,7:5,8:8,9:9,10:g,11:6,12:7,13:d,14:[1,96],15:u,16:11,17:f,20:12,21:y,23:h,24:p,25:10,26:13,28:r,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:o,48:m,49:b,50:E,51:M,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e},s(Ie,[2,39],{22:[1,97]}),s(Ie,[2,40]),s(Ie,[2,41]),s(Ie,[2,42]),s(Ie,[2,43]),s(Ie,[2,44]),s(Ie,[2,45]),s(Ie,[2,46]),s(Ie,[2,47]),s(Ie,[2,48]),s(Ie,[2,49]),s(Ie,[2,50]),s(Ie,[2,51]),s(Ie,[2,52]),s(Ie,[2,53]),s(Ie,[2,54]),s(Ie,[2,55]),s(Ie,[2,56]),{4:98,6:4,7:5,8:8,9:9,10:g,11:6,12:7,13:d,15:u,16:11,17:f,18:[1,99],19:[1,100],20:12,21:y,23:h,24:p,25:10,26:13,28:r,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:o,48:m,49:b,50:E,51:M,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e},s(Ie,[2,26]),s(Ie,[2,27]),s(Xe,[2,59]),s(Xe,[2,60]),s(Xe,[2,61]),s(Ie,[2,66]),s(Ie,[2,67]),s(Ie,[2,68]),s(Ie,[2,69]),s(Ie,[2,57]),s(Ie,[2,58]),s(Ie,[2,91]),s(Ie,[2,92]),s(Ie,[2,93]),s(Ie,[2,94]),s(Ie,[2,95]),s(Ie,[2,97]),s(Ie,[2,70]),s(Ie,[2,71]),s(Ie,[2,65]),s(Ie,[2,72]),s(Ie,[2,73]),s(Ie,[2,74]),s(Ie,[2,75]),s(Ie,[2,76]),s(Ie,[2,77]),s(Ie,[2,78]),s(Ie,[2,79]),s(Ie,[2,80]),s(Ie,[2,81]),s(Ie,[2,82]),s(Ie,[2,83]),s(Ie,[2,84]),s(Ie,[2,85]),s(Ie,[2,86]),s(Ie,[2,87]),s(Ie,[2,88]),s(Ie,[2,89]),s(Ie,[2,90]),s(Ie,[2,96]),{1:[2,1]},s(De,[2,4],{6:4,7:5,11:6,12:7,8:8,9:9,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,4:101,10:g,13:d,15:u,17:f,21:y,23:h,24:p,28:r,47:o,48:m,49:b,50:E,51:M,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e}),s(De,[2,6]),s(je,[2,31]),s(je,[2,32]),{27:102,52:Oe,53:N,54:Pe},s(Ie,[2,36]),s(Ie,[2,62]),s(Ie,[2,63]),s(Ie,[2,64]),{29:[1,103]},s(Ie,[2,38]),s(Ie,[2,10]),s(Ie,[2,11]),s(Ie,[2,12]),{4:104,6:4,7:5,8:8,9:9,10:g,11:6,12:7,13:d,14:[1,105],15:u,16:11,17:f,20:12,21:y,23:h,24:p,25:10,26:13,28:r,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:o,48:m,49:b,50:E,51:M,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e},{4:107,6:4,7:5,8:8,9:9,10:g,11:6,12:7,13:d,14:[1,106],15:u,16:11,17:f,20:12,21:y,23:h,24:p,25:10,26:13,28:r,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:o,48:m,49:b,50:E,51:M,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e},s(Ie,[2,16]),{14:[1,108]},s(Ie,[2,19]),s(Ie,[2,25]),{18:[1,109]},{4:110,6:4,7:5,8:8,9:9,10:g,11:6,12:7,13:d,15:u,16:11,17:f,19:[1,111],20:12,21:y,23:h,24:p,25:10,26:13,28:r,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:o,48:m,49:b,50:E,51:M,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e},s(Ie,[2,24]),s(De,[2,3]),s(Ie,[2,35]),s(Ie,[2,37]),{14:[1,112]},s(Ie,[2,15]),s(Ie,[2,14]),{14:[1,113]},s(Ie,[2,18]),{4:114,6:4,7:5,8:8,9:9,10:g,11:6,12:7,13:d,15:u,16:11,17:f,19:[1,115],20:12,21:y,23:h,24:p,25:10,26:13,28:r,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:o,48:m,49:b,50:E,51:M,55:D,56:A,57:v,58:k,59:J,60:X,61:te,62:H,63:z,64:B,65:F,66:$,67:re,68:K,69:ue,70:ie,71:Q,72:pe,73:ee,74:ae,75:le,76:me,77:Ae,78:Be,79:Fe,80:Le,81:ze,82:We,83:Z,84:C,85:oe,86:ge,87:_e},{19:[1,116]},s(Ie,[2,23]),s(Ie,[2,13]),s(Ie,[2,17]),{19:[1,117]},s(Ie,[2,21]),s(Ie,[2,22]),s(Ie,[2,20])],defaultActions:{3:[2,2],77:[2,1]},parseError:function(ye,Ue){if(!Ue.recoverable){var we=new Error(ye);throw we.hash=Ue,we}this.trace(ye)},parse:function(ye){var Ue=this,we=[0],Te=[null],qe=[],He=this.table,Se="",Ce=0,Re=0,Ve=0,rt=qe.slice.call(arguments,1),at=Object.create(this.lexer),yt={yy:{}};for(var Pt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Pt)&&(yt.yy[Pt]=this.yy[Pt]);at.setInput(ye,yt.yy),yt.yy.lexer=at,yt.yy.parser=this,at.yylloc===void 0&&(at.yylloc={});var vt=at.yylloc;qe.push(vt);var At=at.options&&at.options.ranges;typeof yt.yy.parseError=="function"?this.parseError=yt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Ut,Dt,on,St,Xt,qt,bn,Fn,sn,tn=function(){var U;return U=at.lex()||1,typeof U!="number"&&(U=Ue.symbols_[U]||U),U},se={};;){if(on=we[we.length-1],this.defaultActions[on]?St=this.defaultActions[on]:(Ut!=null||(Ut=tn()),St=He[on]&&He[on][Ut]),St===void 0||!St.length||!St[0]){var he="";sn=[];for(qt in He[on])this.terminals_[qt]&&qt>2&&sn.push("'"+this.terminals_[qt]+"'");he=at.showPosition?"Parse error on line "+(Ce+1)+`:
`+at.showPosition()+`
Expecting `+sn.join(", ")+", got '"+(this.terminals_[Ut]||Ut)+"'":"Parse error on line "+(Ce+1)+": Unexpected "+(Ut==1?"end of input":"'"+(this.terminals_[Ut]||Ut)+"'"),this.parseError(he,{text:at.match,token:this.terminals_[Ut]||Ut,line:at.yylineno,loc:vt,expected:sn})}if(St[0]instanceof Array&&St.length>1)throw new Error("Parse Error: multiple actions possible at state: "+on+", token: "+Ut);switch(St[0]){case 1:we.push(Ut),Te.push(at.yytext),qe.push(at.yylloc),we.push(St[1]),Ut=null,Dt?(Ut=Dt,Dt=null):(Re=at.yyleng,Se=at.yytext,Ce=at.yylineno,vt=at.yylloc,Ve>0);break;case 2:if(bn=this.productions_[St[1]][1],se.$=Te[Te.length-bn],se._$={first_line:qe[qe.length-(bn||1)].first_line,last_line:qe[qe.length-1].last_line,first_column:qe[qe.length-(bn||1)].first_column,last_column:qe[qe.length-1].last_column},At&&(se._$.range=[qe[qe.length-(bn||1)].range[0],qe[qe.length-1].range[1]]),(Xt=this.performAction.apply(se,[Se,Re,Ce,yt.yy,St[1],Te,qe].concat(rt)))!==void 0)return Xt;bn&&(we=we.slice(0,-1*bn*2),Te=Te.slice(0,-1*bn),qe=qe.slice(0,-1*bn)),we.push(this.productions_[St[1]][0]),Te.push(se.$),qe.push(se._$),Fn=He[we[we.length-2]][we[we.length-1]],we.push(Fn);break;case 3:return!0}}return!0}},ht=(function(){return{EOF:1,parseError:function(ye,Ue){if(!this.yy.parser)throw new Error(ye);this.yy.parser.parseError(ye,Ue)},setInput:function(ye,Ue){return this.yy=Ue||this.yy||{},this._input=ye,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ye=this._input[0];return this.yytext+=ye,this.yyleng++,this.offset++,this.match+=ye,this.matched+=ye,ye.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ye},unput:function(ye){var Ue=ye.length,we=ye.split(/(?:\r\n?|\n)/g);this._input=ye+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ue),this.offset-=Ue;var Te=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),we.length-1&&(this.yylineno-=we.length-1);var qe=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:we?(we.length===Te.length?this.yylloc.first_column:0)+Te[Te.length-we.length].length-we[0].length:this.yylloc.first_column-Ue},this.options.ranges&&(this.yylloc.range=[qe[0],qe[0]+this.yyleng-Ue]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(ye){this.unput(this.match.slice(ye))},pastInput:function(){var ye=this.matched.substr(0,this.matched.length-this.match.length);return(ye.length>20?"...":"")+ye.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var ye=this.match;return ye.length<20&&(ye+=this._input.substr(0,20-ye.length)),(ye.substr(0,20)+(ye.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var ye=this.pastInput(),Ue=new Array(ye.length+1).join("-");return ye+this.upcomingInput()+`
`+Ue+"^"},test_match:function(ye,Ue){var we,Te,qe;if(this.options.backtrack_lexer&&(qe={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(qe.yylloc.range=this.yylloc.range.slice(0))),Te=ye[0].match(/(?:\r\n?|\n).*/g),Te&&(this.yylineno+=Te.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Te?Te[Te.length-1].length-Te[Te.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ye[0].length},this.yytext+=ye[0],this.match+=ye[0],this.matches=ye,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ye[0].length),this.matched+=ye[0],we=this.performAction.call(this,this.yy,this,Ue,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),we)return we;if(this._backtrack){for(var He in qe)this[He]=qe[He];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ye,Ue,we,Te;this._more||(this.yytext="",this.match="");for(var qe=this._currentRules(),He=0;He<qe.length;He++)if((we=this._input.match(this.rules[qe[He]]))&&(!Ue||we[0].length>Ue[0].length)){if(Ue=we,Te=He,this.options.backtrack_lexer){if((ye=this.test_match(we,qe[He]))!==!1)return ye;if(this._backtrack){Ue=!1;continue}return!1}if(!this.options.flex)break}return Ue?(ye=this.test_match(Ue,qe[Te]))!==!1&&ye:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ye=this.next();return ye||this.lex()},begin:function(ye){this.conditionStack.push(ye)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ye){return ye=this.conditionStack.length-1-Math.abs(ye||0),ye>=0?this.conditionStack[ye]:"INITIAL"},pushState:function(ye){this.begin(ye)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(ye,Ue,we,Te){switch(we){case 0:return void this.begin("captext");case 1:return 58;case 2:return this.popState(),58;case 3:return 62;case 4:return 63;case 5:return 64;case 6:return 65;case 7:return 66;case 8:return 67;case 9:return 49;case 10:return 50;case 11:return 51;case 12:return 52;case 13:return 53;case 14:return 54;case 15:return 71;case 16:return 74;case 17:return 75;case 18:return 76;case 19:return 70;case 20:return 72;case 21:return 73;case 22:return 77;case 23:return 69;case 24:return 80;case 25:return 13;case 26:return 15;case 27:return 14;case 28:return 10;case 29:return 28;case 30:return 29;case 31:return 83;case 32:return 84;case 33:return 85;case 34:return 17;case 35:return 18;case 36:return 19;case 37:return 78;case 38:return 79;case 39:return 82;case 40:return Ue.yytext=this.matches[1],21;case 41:return Ue.yytext=this.matches[1],22;case 42:return Ue.yytext=this.matches[1],24;case 43:return 68;case 44:return 47;case 45:return 48;case 46:return 86;case 47:return 61;case 48:return 60;case 49:return 81;case 50:case 51:return 56;case 52:return 57;case 53:return Ue.yytext=this.matches[1],58;case 54:return 59;case 55:return;case 56:return 87;case 57:return;case 58:return 55;case 59:return 5;case 60:return 89}},rules:[/^(?:([,][,])(?=[A-Z]))/,/^(?:[A-Z](?=[A-Z]))/,/^(?:[A-Z])/,/^(?:["][6])/,/^(?:["][-])/,/^(?:["][4])/,/^(?:["][8])/,/^(?:["][9])/,/^(?:["][\/])/,/^(?:[.][<])/,/^(?:[_][<])/,/^(?:["][<])/,/^(?:[.][>])/,/^(?:[_][>])/,/^(?:["][>])/,/^(?:["][7][@][:])/,/^(?:[_][@][<])/,/^(?:[\^][9])/,/^(?:[_][@][>])/,/^(?:["][7])/,/^(?:[@][<])/,/^(?:[@][>])/,/^(?:[@][9])/,/^(?:[.][0])/,/^(?:[4][4][4])/,/^(?:[%][9])/,/^(?:[%])/,/^(?:[\+])/,/^(?:[95]+(?=.))/,/^(?:[<])/,/^(?:[>])/,/^(?:!)/,/^(?:[6])/,/^(?:[@]&)/,/^(?:[(])/,/^(?:[.][\/])/,/^(?:[)])/,/^(?:#[L])/,/^(?:#-)/,/^(?:#=)/,/^(?:#([A-J4]+))/,/^(?:[\/]([A-J4]+))/,/^(?:[#][\/]([A-J4]+))/,/^(?:[_]?[\/])/,/^(?:[1])/,/^(?:[4])/,/^(?:[7]+)/,/^(?:[_][\\][_][\\])/,/^(?:[_][\\])/,/^(?:[3])/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/,/^(?:[,]?[.][ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,]['])/,/^(?:[8])/,/^(?:[;])/,/^(?:[ ])/,/^(?:$)/,/^(?:.)/],conditions:{captext:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],inclusive:!0},INITIAL:{rules:[0,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],inclusive:!0}}}})();return $e.lexer=ht,i.prototype=$e,$e.Parser=i,new i})();c.parser=n,c.Parser=n.Parser,c.parse=function(){return n.parse.apply(n,arguments)},c.main=function(i){i[1]||(console.log("Usage: "+i[0]+" FILE"),t.exit(1));var s=x(4).readFileSync(x(5).normalize(i[1]),"utf8");return c.parser.parse(s)},l!==void 0&&x.c[x.s]===l&&c.main(t.argv.slice(1))}).call(c,x(1),x(8)(S))},function(S,c,x){function t(f){for(var y=[],h=0;h<f.length;h++){var p=f[h];switch(p.type){case"command":var r=p.value.slice(1).trim();d.hasOwnProperty(p.value)?y.push(s.command(d[p.value])):i.containsValue(r)?y.push(s.typeform("operator_name",l(r))):u[p.value]||y.push(p);break;case"level":var o={subscript:p.subscript&&p.subscript.length>0?t(p.subscript):void 0,superscript:p.superscript&&p.superscript.length>0?t(p.superscript):void 0,type:p.type};(o.subscript||o.superscript)&&y.push(o);break;case"fraction":y.push({denominator:t(p.denominator),numerator:t(p.numerator),type:p.type});break;case"radical":y.push({index:p.index?t(p.index):void 0,radicand:t(p.radicand),type:p.type});break;case"terminal":n(f.slice(h))?(y.push({type:"command",value:"\\ldots"}),h+=2):y.push({type:p.type,value:g.hasOwnProperty(p.value)?g[p.value]:p.value});break;case"typeform":y.push(p);break;case"greek":y.push({type:p.type,value:g.hasOwnProperty(p.value)?g[p.value]:p.value});break;default:throw new Error(`Unexpected item:
`+JSON.stringify({group:f,item:p}))}}return y}function l(f){for(var y=[],h=0,p=f;h<p.length;h++){var r=p[h];y.push(s.terminal(r))}return y}function n(f){for(var y=0,h=0;h<Math.min(3,f.length);h++){var p=f[h];p.type==="terminal"&&p.value==="."&&y++}return y===3}Object.defineProperty(c,"__esModule",{value:!0});var i=x(2),s=x(7),g={"~":"\\ ","\\,":"\\ ","\\:":"\\ ","\\;":"\\ ","\\!":"\\ "},d={"\\Vert":"\\|","\\ge":"\\geq","\\le":"\\leq","\\vert":"|"},u={"\\space":!0};c.default=t},function(S,c,x){function t(s){try{return{isError:!1,value:n.parser.parse(s)}}catch(g){return{isError:!0,error:l.default(g)}}}Object.defineProperty(c,"__esModule",{value:!0});var l=x(6),n=x(13),i=x(7);n.parser.yy=i,c.default=t},function(S,c,x){(function(t,l){var n=(function(){function i(){this.yy={}}var s=function(F,$,re,K){for(re=re||{},K=F.length;K--;re[F[K]]=$);return re},g=[1,13],d=[1,14],u=[1,15],f=[1,16],y=[1,17],h=[1,21],p=[1,18],r=[1,19],o=[1,20],m=[1,22],b=[1,23],E=[1,28],M=[1,30],D=[1,31],A=[1,32],v=[1,33],k=[1,29],J=[5,21,27,38],X=[5,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],te=[5,10,12,13,14,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],H=[5,10,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],z={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,level:6,expression:7,subscript:8,superscript:9,_:10,atom:11,"^":12,"PRIMES^":13,PRIMES:14,delimited_group:15,typeform:16,frac:17,radical:18,LEFT:19,delimiter:20,RIGHT:21,FRAC:22,OPERATOR_NAME:23,MATHRM:24,TEXT:25,RADICAL_OPTARG:26,CLOSE_OPTARG:27,RADICAL:28,curly_group:29,greek:30,command:31,SYMBOL:32,DELIMITER:33,DELIMITER_COMMAND:34,GREEK:35,COMMAND:36,"{":37,"}":38,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"_",12:"^",13:"PRIMES^",14:"PRIMES",19:"LEFT",21:"RIGHT",22:"FRAC",23:"OPERATOR_NAME",24:"MATHRM",25:"TEXT",26:"RADICAL_OPTARG",27:"CLOSE_OPTARG",28:"RADICAL",32:"SYMBOL",33:"DELIMITER",34:"DELIMITER_COMMAND",35:"GREEK",36:"COMMAND",37:"{",38:"}"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[6,2],[6,2],[6,1],[6,1],[8,2],[9,2],[9,2],[9,1],[7,1],[7,1],[7,1],[7,1],[7,1],[15,5],[15,4],[17,3],[16,2],[16,2],[16,2],[18,4],[18,3],[18,2],[18,2],[11,1],[11,1],[11,1],[11,1],[11,1],[20,1],[20,1],[30,1],[31,1],[29,3],[29,2]],performAction:function(F,$,re,K,ue,ie,Q){var pe=ie.length-1;switch(ue){case 1:return ie[pe-1];case 2:return K.group();case 3:this.$=K.group(ie[pe-2],ie[pe-1],ie[pe]);break;case 4:case 6:this.$=K.group(ie[pe-1],ie[pe]);break;case 5:case 7:this.$=K.group(ie[pe]);break;case 8:this.$=K.level({_:K.group(ie[pe-1]),"^":K.group(ie[pe])});break;case 9:this.$=K.level({_:K.group(ie[pe]),"^":K.group(ie[pe-1])});break;case 10:this.$=K.level({"^":K.group(ie[pe])});break;case 11:this.$=K.level({_:K.group(ie[pe])});break;case 12:case 13:this.$=ie[pe];break;case 14:this.$=K.processPrimes(ie[pe-1],ie[pe]);break;case 15:this.$=K.processPrimes(ie[pe],K.group());break;case 21:this.$=K.group(ie[pe-3],ie[pe-2],ie[pe]);break;case 22:this.$=K.group(ie[pe-2],ie[pe]);break;case 23:this.$=K.fraction(K.group(ie[pe-1]),K.group(ie[pe]));break;case 24:this.$=K.typeform("operator_name",K.group(ie[pe]));break;case 25:this.$=K.typeform("mathrm",K.group(ie[pe]));break;case 26:this.$=K.typeform("text",K.group(ie[pe]));break;case 27:this.$=K.radical(ie[pe],K.group(ie[pe-2]));break;case 28:this.$=K.radical(K.group(ie[pe]),K.group());break;case 29:case 30:this.$=K.radical(K.group(ie[pe]));break;case 35:case 36:this.$=K.terminal(ie[pe]);break;case 37:case 39:this.$=K.command(ie[pe]);break;case 38:this.$=K.greek(ie[pe]);break;case 40:this.$=ie[pe-1];break;case 41:this.$=K.group()}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,10:g,11:12,12:d,13:u,14:f,15:8,16:9,17:10,18:11,19:y,20:25,22:h,23:p,24:r,25:o,26:m,28:b,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k},{1:[3]},{5:[1,34]},{1:[2,2]},s(J,[2,5],{15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,7:35,19:y,22:h,23:p,24:r,25:o,26:m,28:b,32:E,33:M,34:D,35:A,36:v,37:k}),s(J,[2,7],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,4:36,10:g,12:d,13:u,14:f,19:y,22:h,23:p,24:r,25:o,26:m,28:b,32:E,33:M,34:D,35:A,36:v,37:k}),s(X,[2,11],{9:37,12:d,13:u,14:f}),s(X,[2,10],{8:38,10:g}),s(te,[2,16]),s(te,[2,17]),s(te,[2,18]),s(te,[2,19]),s(te,[2,20]),{11:39,20:25,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k},{11:40,20:25,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k},{11:41,20:25,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k},s(H,[2,15]),{20:42,33:M,34:D},{11:43,20:25,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k},{11:44,20:25,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k},{11:45,20:25,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k},{11:46,20:25,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k},{4:47,6:4,7:5,8:6,9:7,10:g,11:12,12:d,13:u,14:f,15:8,16:9,17:10,18:11,19:y,20:25,22:h,23:p,24:r,25:o,26:m,27:[1,48],28:b,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k},{11:49,17:50,20:25,22:h,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k},s(te,[2,31]),s(te,[2,32]),s(te,[2,33]),s(te,[2,34]),s(te,[2,35]),{4:51,6:4,7:5,8:6,9:7,10:g,11:12,12:d,13:u,14:f,15:8,16:9,17:10,18:11,19:y,20:25,22:h,23:p,24:r,25:o,26:m,28:b,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k,38:[1,52]},s(te,[2,36]),s(te,[2,37]),s(te,[2,38]),s(te,[2,39]),{1:[2,1]},s(J,[2,4],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,4:53,10:g,12:d,13:u,14:f,19:y,22:h,23:p,24:r,25:o,26:m,28:b,32:E,33:M,34:D,35:A,36:v,37:k}),s(J,[2,6]),s(X,[2,8]),s(X,[2,9]),s([5,12,13,14,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],[2,12]),s(H,[2,13]),s(H,[2,14]),{4:54,6:4,7:5,8:6,9:7,10:g,11:12,12:d,13:u,14:f,15:8,16:9,17:10,18:11,19:y,20:25,21:[1,55],22:h,23:p,24:r,25:o,26:m,28:b,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k},s(te,[2,24]),s(te,[2,25]),s(te,[2,26]),{11:56,20:25,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k},{27:[1,57]},{11:58,20:25,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k},s(te,[2,29]),s(te,[2,30]),{38:[1,59]},s(te,[2,41]),s(J,[2,3]),{21:[1,60]},{20:61,33:M,34:D},s(te,[2,23]),{11:62,20:25,29:24,30:26,31:27,32:E,33:M,34:D,35:A,36:v,37:k},s(te,[2,28]),s(te,[2,40]),{20:63,33:M,34:D},s(te,[2,22]),s(te,[2,27]),s(te,[2,21])],defaultActions:{3:[2,2],34:[2,1]},parseError:function(F,$){if(!$.recoverable){var re=new Error(F);throw re.hash=$,re}this.trace(F)},parse:function(F){var $=this,re=[0],K=[null],ue=[],ie=this.table,Q="",pe=0,ee=0,ae=0,le=ue.slice.call(arguments,1),me=Object.create(this.lexer),Ae={yy:{}};for(var Be in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Be)&&(Ae.yy[Be]=this.yy[Be]);me.setInput(F,Ae.yy),Ae.yy.lexer=me,Ae.yy.parser=this,me.yylloc===void 0&&(me.yylloc={});var Fe=me.yylloc;ue.push(Fe);var Le=me.options&&me.options.ranges;typeof Ae.yy.parseError=="function"?this.parseError=Ae.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var ze,We,Z,C,oe,ge,_e,De,je,Ie=function(){var Pe;return Pe=me.lex()||1,typeof Pe!="number"&&(Pe=$.symbols_[Pe]||Pe),Pe},Oe={};;){if(Z=re[re.length-1],this.defaultActions[Z]?C=this.defaultActions[Z]:(ze!=null||(ze=Ie()),C=ie[Z]&&ie[Z][ze]),C===void 0||!C.length||!C[0]){var N="";je=[];for(ge in ie[Z])this.terminals_[ge]&&ge>2&&je.push("'"+this.terminals_[ge]+"'");N=me.showPosition?"Parse error on line "+(pe+1)+`:
`+me.showPosition()+`
Expecting `+je.join(", ")+", got '"+(this.terminals_[ze]||ze)+"'":"Parse error on line "+(pe+1)+": Unexpected "+(ze==1?"end of input":"'"+(this.terminals_[ze]||ze)+"'"),this.parseError(N,{text:me.match,token:this.terminals_[ze]||ze,line:me.yylineno,loc:Fe,expected:je})}if(C[0]instanceof Array&&C.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Z+", token: "+ze);switch(C[0]){case 1:re.push(ze),K.push(me.yytext),ue.push(me.yylloc),re.push(C[1]),ze=null,We?(ze=We,We=null):(ee=me.yyleng,Q=me.yytext,pe=me.yylineno,Fe=me.yylloc,ae>0);break;case 2:if(_e=this.productions_[C[1]][1],Oe.$=K[K.length-_e],Oe._$={first_line:ue[ue.length-(_e||1)].first_line,last_line:ue[ue.length-1].last_line,first_column:ue[ue.length-(_e||1)].first_column,last_column:ue[ue.length-1].last_column},Le&&(Oe._$.range=[ue[ue.length-(_e||1)].range[0],ue[ue.length-1].range[1]]),(oe=this.performAction.apply(Oe,[Q,ee,pe,Ae.yy,C[1],K,ue].concat(le)))!==void 0)return oe;_e&&(re=re.slice(0,-1*_e*2),K=K.slice(0,-1*_e),ue=ue.slice(0,-1*_e)),re.push(this.productions_[C[1]][0]),K.push(Oe.$),ue.push(Oe._$),De=ie[re[re.length-2]][re[re.length-1]],re.push(De);break;case 3:return!0}}return!0}},B=(function(){return{EOF:1,parseError:function(F,$){if(!this.yy.parser)throw new Error(F);this.yy.parser.parseError(F,$)},setInput:function(F,$){return this.yy=$||this.yy||{},this._input=F,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var F=this._input[0];return this.yytext+=F,this.yyleng++,this.offset++,this.match+=F,this.matched+=F,F.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),F},unput:function(F){var $=F.length,re=F.split(/(?:\r\n?|\n)/g);this._input=F+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-$),this.offset-=$;var K=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),re.length-1&&(this.yylineno-=re.length-1);var ue=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:re?(re.length===K.length?this.yylloc.first_column:0)+K[K.length-re.length].length-re[0].length:this.yylloc.first_column-$},this.options.ranges&&(this.yylloc.range=[ue[0],ue[0]+this.yyleng-$]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(F){this.unput(this.match.slice(F))},pastInput:function(){var F=this.matched.substr(0,this.matched.length-this.match.length);return(F.length>20?"...":"")+F.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var F=this.match;return F.length<20&&(F+=this._input.substr(0,20-F.length)),(F.substr(0,20)+(F.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var F=this.pastInput(),$=new Array(F.length+1).join("-");return F+this.upcomingInput()+`
`+$+"^"},test_match:function(F,$){var re,K,ue;if(this.options.backtrack_lexer&&(ue={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ue.yylloc.range=this.yylloc.range.slice(0))),K=F[0].match(/(?:\r\n?|\n).*/g),K&&(this.yylineno+=K.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:K?K[K.length-1].length-K[K.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+F[0].length},this.yytext+=F[0],this.match+=F[0],this.matches=F,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(F[0].length),this.matched+=F[0],re=this.performAction.call(this,this.yy,this,$,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),re)return re;if(this._backtrack){for(var ie in ue)this[ie]=ue[ie];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var F,$,re,K;this._more||(this.yytext="",this.match="");for(var ue=this._currentRules(),ie=0;ie<ue.length;ie++)if((re=this._input.match(this.rules[ue[ie]]))&&(!$||re[0].length>$[0].length)){if($=re,K=ie,this.options.backtrack_lexer){if((F=this.test_match(re,ue[ie]))!==!1)return F;if(this._backtrack){$=!1;continue}return!1}if(!this.options.flex)break}return $?(F=this.test_match($,ue[K]))!==!1&&F:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var F=this.next();return F||this.lex()},begin:function(F){this.conditionStack.push(F)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(F){return F=this.conditionStack.length-1-Math.abs(F||0),F>=0?this.conditionStack[F]:"INITIAL"},pushState:function(F){this.begin(F)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(F,$,re,K){switch(re){case 0:break;case 1:return this.begin("optarg"),26;case 2:return this.popState(),27;case 3:return 23;case 4:return 24;case 5:return 25;case 6:return 28;case 7:return 22;case 8:return 13;case 9:return 14;case 10:return 12;case 11:return 10;case 12:return 19;case 13:return 21;case 14:return 34;case 15:return 33;case 16:return 37;case 17:return 38;case 18:case 19:case 20:return 32;case 21:case 22:return 35;case 23:return 36;case 24:return 32;case 25:return 5}},rules:[/^(?:\s+)/,/^(?:(\\sqrt)\s*\[)/,/^(?:\])/,/^(?:(\\operatorname))/,/^(?:(\\mathrm))/,/^(?:(\\text))/,/^(?:(\\sqrt))/,/^(?:(\\frac))/,/^(?:'+\^)/,/^(?:'+)/,/^(?:\^)/,/^(?:[_])/,/^(?:(\\left))/,/^(?:(\\right))/,/^(?:(\\langle|\\rangle|\\vert|\\Vert))/,/^(?:\[|\]|\\\{|\\\}|\(|\)|\||\\\|)/,/^(?:\{)/,/^(?:\})/,/^(?:\\(infty))/,/^(?:\\(int))/,/^(?:!)/,/^(?:\\(alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|omicron|pi|rho|sigma|tau|xi|upsilon|phi|chi|psi|omega))/,/^(?:\\(Alpha|Beta|Gamma|Delta|Epsilon|Zeta|Eta|Theta|Iota|Kappa|Lambda|Mu|Nu|Omicron|Pi|Rho|Sigma|Tau|Xi|Upsilon|Phi|Chi|Psi|Omega))/,/^(?:\\[A-Za-z]+)/,/^(?:\\.|.)/,/^(?:$)/],conditions:{optarg:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0}}}})();return z.lexer=B,i.prototype=z,z.Parser=i,new i})();c.parser=n,c.Parser=n.Parser,c.parse=function(){return n.parse.apply(n,arguments)},c.main=function(i){i[1]||(console.log("Usage: "+i[0]+" FILE"),t.exit(1));var s=x(4).readFileSync(x(5).normalize(i[1]),"utf8");return c.parser.parse(s)},l!==void 0&&x.c[x.s]===l&&c.main(t.argv.slice(1))}).call(c,x(1),x(8)(S))},function(S,c,x){function t(H){return k.map(v.default(H),function(z){return M(A.default(z))})}function l(H){return/^[a-z]$/.test(H.value)?H.value.toUpperCase():/^[A-Z]$/.test(H.value)?","+H.value:/^[0-9.]$/.test(H.value)||/^[+\-()]$/.test(H.value)?H.value:J.hasOwnProperty(H.value)?J[H.value]:"[terminal: "+H.value+"]"}function n(H){return X.hasOwnProperty(H.value)?X[H.value]:H.value.slice(1).toUpperCase()+" "}function i(H){return te.hasOwnProperty(H.value)?te[H.value]:H.value.slice(1).toUpperCase()+" "}function s(H){return H.value==="\\space"}function g(H,z){return H.isStartOfLine&&/^-?$/.test(z)||/\s-?$/.test(z)||H.wasFraction}function d(H){return H.value==="\\sum"||H.value==="\\prod"}function u(H,z){if(z>=H.length)return!1;var B=H[z];if(B.type==="terminal"){if(/^[0-9]$/.test(B.value))return!0;if(B.value!=="."||z+1>=H.length)return!1;if(B=H[z+1],B.type==="terminal")return/^[0-9]$/.test(B.value)}return!1}function f(H,z){for(var B="",F=H.levelIndicator,$=0,re=!1,K=0;K<z.length;K++){u(z,K)&&(F===""&&/[A-Z]$/.test(B)?B+=o(F):g(H,B)&&(B+="#"));var ue=z[K],ie=K<z.length-1?z[K+1]:null;switch(ue.type!=="level"&&F!==H.levelIndicator&&(E(ue)?F="":(H.wasModifiedExpression&&H.levelIndicator===""?H=b(H,{wasModifiedExpression:!1}):B+=o(H.levelIndicator),F=H.levelIndicator)),ue.type){case"terminal":!H.wasModifiedExpression&&F!==""&&E(ue)?B+=" "+o(F)+l(ue).trim()+" ":B+=l(ue),ue.value==="."&&ie&&(ie.type==="terminal"&&/^[^_\d,]/.test(l(ie))||ie.type==="greek")&&(B+='"'),H=b(H,{wasFraction:!1,wasRomanCommand:!1});break;case"command":if(!s(ue)){var Q=d(ue);Q&&(B+='"'),!Q&&F!==""&&E(ue)?B+=" "+o(F)+n(ue).trim()+" ":B+=n(ue),H=b(H,{wasFraction:!1,wasModifiedExpression:Q,wasRomanCommand:!0})}break;case"greek":B+=i(ue),H=b(H,{wasFraction:!1});break;case"fraction":var pe=y(H,ue);B+=pe.value,$=Math.max($,pe.fractionLevel),H=b(H,{wasFraction:!0,wasRomanCommand:!1});break;case"radical":var ee=h(H,ue);B+=ee.value,$=Math.max($,ee.fractionLevel),H=b(H,{wasFraction:!1,wasRomanCommand:!1});break;case"level":!H.wasModifiedExpression&&H.wasRomanCommand?(re=/\s$/.test(B))&&(B=B.replace(/\s$/,"")):re=!1;var ae=B.length>0&&/[A-Za-z]/.test(B[B.length-1])===!0,le=p(H,ae,re,ue);B+=le.value,F=le.levelIndicator,H=b(H,{wasFraction:!1,wasRomanCommand:!1});break;case"typeform":B+=f(H,ue.value).value,ue.name==="operator_name"&&(B+=" "),H=b(H,{wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1})}}return{fractionLevel:$,levelIndicator:F,value:B}}function y(H,z){H=b(H,{isStartOfLine:!1});for(var B=f(H,z.numerator),F=f(H,z.denominator),$=Math.max(B.fractionLevel,F.fractionLevel),re="",K=0;K<$;K++)re+=",";var ue=re+"?"+B.value;return B.levelIndicator!==H.levelIndicator&&(ue+=o(H.levelIndicator)),/\.$/.test(B.value)&&(ue+='"'),ue+=re+"/"+F.value,F.levelIndicator!==H.levelIndicator&&(ue+=o(H.levelIndicator)),/\.$/.test(F.value)&&(ue+='"'),ue+=re+"#",{fractionLevel:$+1,value:ue}}function h(H,z){for(var B=H.radicalLevel,F="",$="",re=0;re<B;re++)$+=".";if(z.index){F+=$+"<";var K=f(b(H,{isStartOfLine:!1}),z.index);F+=K.value,/\.$/.test(K.value)&&(F+='"'),K.levelIndicator!==H.levelIndicator&&(F+=o(H.levelIndicator)),F+=">"}else F+=$+">";var ue=f(b(H,{isStartOfLine:!1,radicalLevel:B+1}),z.radicand);return F+=ue.value,/\.$/.test(ue.value)&&(F+='"'),ue.levelIndicator!==H.levelIndicator&&(F+=o(H.levelIndicator)),F+=$+"]",{fractionLevel:ue.fractionLevel,value:F}}function p(H,z,B,F){var $=H.levelIndicator,re="",K=r(F.superscript);if(re+=K,F.subscript){H.wasModifiedExpression&&(re+="%"),$=H.levelIndicator+";";var ue=f(b(H,{isStartOfLine:!1,levelIndicator:$}),F.subscript);z&&/^[0-9]*(\.|\,)?[0-9]+$/.test(ue.value)&&$.length<=1?$=H.levelIndicator:!H.wasModifiedExpression&&F.subscript[0]&&F.subscript[0].type!=="level"&&(re+=o($)),re+=ue.value,/\.$/.test(ue.value)&&(re+='"')}if(F.superscript){H.wasModifiedExpression&&(re+="<"),$=H.levelIndicator+"^";var ie=f(b(H,{isStartOfLine:!1,levelIndicator:$}),F.superscript.slice(K.length));!H.wasModifiedExpression&&F.superscript[0]&&F.superscript[0].type!=="level"&&ie.value!==""&&(re+=o($)),re+=ie.value,/\.$/.test(ie.value)&&(re+='"')}return H.wasModifiedExpression?re+="]":H.wasRomanCommand&&B&&(re+=" ",$=$.slice(0,$.length-1)),{levelIndicator:$,value:re}}function r(H){var z="";if(H)for(var B=0,F=H;B<F.length;B++){var $=F[B];if($.type!=="command"||$.value!=="\\prime")break;z+="'"}return z}function o(H){return H||'"'}function m(){return{isStartOfLine:!0,levelIndicator:"",radicalLevel:0,wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1}}function b(H,z){return D(D({},H),z)}function E(H){return(H.type==="terminal"||H.type==="command")&&/^<|>|\=|\\leq?|\\geq?|\\neq?$/.test(H.value)}function M(H){return f(m(),H).value}var D=this&&this.__assign||function(){return D=Object.assign||function(H){for(var z,B=1,F=arguments.length;B<F;B++){z=arguments[B];for(var $ in z)Object.prototype.hasOwnProperty.call(z,$)&&(H[$]=z[$])}return H},D.apply(this,arguments)};Object.defineProperty(c,"__esModule",{value:!0});var A=x(11),v=x(12),k=x(0);c.default=t;var J={"!":"&","*":"@#",",":", ","/":"_/",":":"_3","<":' "K ',"=":" .K ",">":" .1 ","?":"_8","[":"@(","\\ ":" ","\\%":"@0","\\&":"_&","\\,":" ","\\infty":",=","\\int":"!","\\{":".(","\\|":"\\\\","\\}":".)","]":"@)","|":"\\"},X={"\\Vert":"\\\\","\\cdot":"*","\\div":"./","\\ge":" .1: ","\\geq":" .1: ","\\langle":"..(","\\ldots":" ''' ","\\le":' "K: ',"\\leq":' "K: ',"\\ne":" /.K ","\\neq":" /.K ","\\approx":" @:@: ","\\nparallel":" /$L ","\\parallel":" $L ","\\perp":" $P ","\\prime":"'","\\prod":".,P","\\rangle":"..)","\\sim":"@:","\\sum":".,S","\\times":"@*","\\vert":"\\"},te={"\\Alpha":".,A","\\Beta":".,B","\\Chi":".,&","\\Delta":".,D","\\Epsilon":".,E","\\Eta":".,:","\\Gamma":".,G","\\Iota":".,I","\\Kappa":".,K","\\Lambda":".,L","\\Mu":".,M","\\Nu":".,N","\\Omega":".,W","\\Omicron":".,O","\\Phi":".,F","\\Pi":".,P","\\Psi":".,Y","\\Rho":".,R","\\Sigma":".,S","\\Tau":".,T","\\Theta":".,?","\\Upsilon":".,U","\\Xi":".,X","\\Zeta":".,Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"}},function(S,c,x){function t(B){return X.map(J.default(B),function(F){return D(k.default(F))})}function l(B,F,$){var re="",K=F.value,ue=$&&$.type==="terminal"?$.value:"";return f(K,B)&&(re+=";"),/^[\D]/.test(K)&&(B=M(B,{wasNumber:!1})),/^[a-z]$/.test(K)?B.capsLock?(B=M(B,{capsLock:!1}),re+=",'"+K.toUpperCase()):re+=K.toUpperCase():/^[A-Z]$/.test(K)?B.capsLock?re+=K:/[A-Z]/.test(ue)?(B=M(B,{capsLock:!0}),re+=",,"+K):re+=","+K:(B=M(B,{capsLock:!1}),/^[0-9.]$/.test(K)?re+=d(K):te.hasOwnProperty(K)?re+=te[K]:re+="[terminal: "+K+"]"),{value:re,ctx:B}}function n(B,F){var $;return $=H.hasOwnProperty(B.value)?H[B.value]:B.value.slice(1).toUpperCase()+" ",f($,F)&&($=";"+$),/^[\D]/.test($)&&(F=M(F,{wasNumber:!1})),{value:$,ctx:F}}function i(B){return z.hasOwnProperty(B.value)?z[B.value]:B.value.slice(1).toUpperCase()+" "}function s(B){return B.value==="\\space"}function g(B,F){if(F<B.length){var $=B[F];if($.type==="terminal"){if(/^\d$/.test($.value))return!0;if($.value!=="."||F+1>=B.length)return!1;if($=B[F+1],$.type==="terminal")return/^\d$/.test($.value)}}return!1}function d(B){for(var F="",$=64,re=0,K=B;re<K.length;re++){var ue=K[re];F+=ue===","?"1":ue==="."?"4":ue==="0"?"J":String.fromCharCode($+Number(ue))}return F}function u(B,F){for(var $,re,K="",ue=!0,ie=0;ie<F.length;ie++){g(F,ie)?(B=M(B,{wasNumber:!0}),ue&&(K+="#",ue=!1)):ue=!0;var Q=F[ie];switch(Q.type){case"terminal":$=l(B,Q,ie<F.length-1?F[ie+1]:void 0),B=$.ctx,K+=$.value,K[K.length-1]===" "&&(ue=!0);break;case"command":s(Q)||(re=n(Q,B),B=re.ctx,K+=re.value,K[K.length-1]===" "&&(ue=!0));break;case"greek":K+=i(Q),K[K.length-1]===" "&&(ue=!0);break;case"fraction":var pe=y(B,Q);K+=pe.value,B=pe.ctx,ue=!1;break;case"radical":K+=p(B,Q).value,ue=!0;break;case"level":var ee=r(B,Q);K+=ee.value,B=ee.ctx,ue=!0;break;case"typeform":var ae=u(B,Q.value).value;K+=ae,/(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?/.test(ae)&&(K+=" ")}}return{ctx:B,value:K}}function f(B,F){return F.wasNumber&&/^[A-Ja-j]/.test(B)}function y(B,F){var $,re=u(B,F.numerator),K=u(B,F.denominator);return h(re.value)&&h(K.value)?(B=M(B,{wasNumber:!0}),$=re.value+"/"+K.value.slice(1)):(B=M(B,{wasNumber:!1}),$="("+re.value+"./"+K.value+")"),{ctx:B,value:$}}function h(B){return/^\#[A-J41]+$/.test(B)}function p(B,F){var $="%";return F.index&&($+=u(B,v.group(v.level({"^":F.index}))).value),$+=u(B,F.radicand).value+"+",{ctx:B,value:$}}function r(B,F){var $="",re=m(F.superscript);$+=re;var K;if(F.subscript){var ue=u(B,F.subscript);K=b(F.subscript,ue.value,0)?"<"+o(ue.value)+">":ue.value,B=M(B,{wasNumber:ue.ctx.wasNumber}),K!==""&&($+="5"+K)}if(F.superscript){var ie=u(B,F.superscript.slice(re.length));K=b(F.superscript,ie.value,re.length)?"<"+o(ie.value)+">":ie.value,B=M(B,{wasNumber:ie.ctx.wasNumber}),re!==""&&K===""||($+="9"+K)}return{ctx:B,value:$}}function o(B){return/^;/.test(B)?B.slice(1):B}function m(B){var F="";if(B)for(var $=0,re=B;$<re.length;$++){var K=re[$];if(K.type!=="command"||K.value!=="\\prime")break;F+="7"}return F}function b(B,F,$){var re=B[0],K=(F.match(/\</g)||[]).length,ue=/^["|\.|_]?\</.test(F),ie=(F.match(/\>/g)||[]).length,Q=/["|\.|_]?\>$/.test(F);return!h(F)&&B.length-$>1&&K===0&&ie===0||K>0&&ie>0&&(!ue||!Q)||K>1||ie>1||re&&re.type==="typeform"}function E(){return{capsLock:!1,wasNumber:!1}}function M(B,F){return A(A({},B),F)}function D(B){return u(E(),B).value}var A=this&&this.__assign||function(){return A=Object.assign||function(B){for(var F,$=1,re=arguments.length;$<re;$++){F=arguments[$];for(var K in F)Object.prototype.hasOwnProperty.call(F,K)&&(B[K]=F[K])}return B},A.apply(this,arguments)};Object.defineProperty(c,"__esModule",{value:!0});var v=x(7),k=x(11),J=x(12),X=x(0);c.default=t;var te={"!":"6","(":'"<',")":'">',"*":'"9',"+":'"6',",":"1","-":'"-',".":"4","/":"_/",":":"3","<":"@<","=":'"7',">":"@>","?":"8","[":".<","\\ ":" ","\\%":".0","\\&":"@&","\\,":" ","\\infty":"#=","\\int":"!","\\{":"_<","\\|":"_\\_\\","\\}":"_>","]":".>","|":"_\\"},H={"\\Vert":"_\\_\\","\\cdot":'"4',"\\div":'"/',"\\ge":"_@>","\\geq":"_@>","\\langle":"@<","\\ldots":"444","\\le":"_@<","\\leq":"_@<","\\ne":'"7@:',"\\neq":'"7@:',"\\approx":"^9","\\parallel":"#L","\\perp":"#-","\\prime":"7","\\prod":",.P","\\rangle":"@>","\\sim":"@9","\\sum":",.S","\\times":'"8',"\\vert":"_\\"},z={"\\Alpha":",.A","\\Beta":",.B","\\Chi":",.&","\\Delta":",.D","\\Epsilon":",.E","\\Eta":",.:","\\Gamma":",.G","\\Iota":",.I","\\Kappa":",.K","\\Lambda":",.L","\\Mu":",.M","\\Nu":",.N","\\Omega":",.W","\\Omicron":",.O","\\Phi":",.F","\\Pi":",.P","\\Psi":",.Y","\\Rho":",.R","\\Sigma":",.S","\\Tau":",.T","\\Theta":",.?","\\Upsilon":",.U","\\Xi":",.X","\\Zeta":",.Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"}},function(S,c,x){function t(E,M){for(var D="",A=M,v="",k=!1,J="",X="",te=l(E),H=0;H<E.length;H++){var z=E[H],B=H+1<E.length?E[H+1]:null;switch(z.type){case"terminal":var F=y.getAutoOperator(E.slice(H));F.value!==""?(D+=F.value,H+=F.terminalCount-1,k=k||F.modified):z.value===" "?(k?(v=J,D+=d(A,v),A=v):D+="\\ ",k=!1):(te[H]===r?D+="\\left":te[H]===o&&(D+="\\right"),D+=z.value);break;case"comparison":v="",D+=d(A,v),A=v,k=!1,D+=z.value;break;case"level_with_comparison":D+=d(A,z.level),A=z.level,k=!1,D+=z.value;break;case"command":var $=z.value.slice(1).trim();B&&B.type==="terminal"&&/[a-z]/.test(B.value)?(D+=$,k=!1):y.containsValue($)?(D+="\\operatorname{"+$+"}",k=!0):(D+=z.value,k=!0),J=A;break;case"expression":D+=z.value;break;case"fraction":D+=g(z.numerator,z.denominator,A);break;case"modified_expression":D+=t(z.expression,A)+" ",z.under&&(D+="_{"+t(z.under,A)+"}"),z.over&&(D+="^{"+t(z.over,A)+"}");break;case"radical":D+="\\sqrt",z.index&&(D+="["+t(z.index,A)+"]"),D+="{"+t(z.value,A)+"}";break;case"simple_subscript":A===""?(D+=z.base.value+"_{"+z.subscript.value+"}",z.base.type==="command"&&(k=!0,J=A)):D+=z.base.value+z.subscript.value;break;case"level":D+=d(A,z.value,X),A=z.value,z.value==="^"&&X!==""&&(X="");break;case"primes":B&&B.type==="level"&&B.value===";"?X=z.value:A!==""?(D+=Array(z.value.length+1).join("\\prime "),X=""):(D+=z.value,X="")}}return D+=d(A,M)+X,D.replace(/([^\\])( )$/,"$1")}function l(E){for(var M=[],D=[],A=0;A<E.length;A++){var v=E[A];if(n(v))M.push({direction:r,index:A}),D.push(m);else if(i(v)){for(;M.length&&M[M.length-1].direction===b;)M.pop();if(M.length){var k=M.pop();if(k){var J=k.index;D[J]=r,D.push(o)}}else D.push(m)}else if(s(v))if(M.length&&M[M.length-1].direction===b){var k=M.pop();if(k){var J=k.index;D[J]=r,D.push(o)}}else M.push({direction:b,index:A}),D.push(m);else D.push(m)}return D}function n(E){return E.type==="terminal"&&/^(\\langle |\[|\(|\\{)$/.test(E.value)}function i(E){return E.type==="terminal"&&/^(\\rangle |\]|\)|\\})$/.test(E.value)}function s(E){return E.type==="terminal"&&/^(\\\||\|)$/.test(E.value)}function g(E,M,D){return"\\frac{"+t(E,D)+"}{"+t(M,D)+"}"}function d(E,M,D){var A,v,k,J="",X=Math.max(E.length,M.length);for(A=0;A<X&&E[A]===M[A];A++);for(v=E.length-1;v>=A;v--)J+="}";for(k=A;k<M.length;k++)M[k]==="^"&&(D&&(J+=D),J+="^{"),M[k]===";"&&(J+="_{");return J}function u(E){return t(E,"")}function f(E,M){return M&&M.operatorNames?y.setOperatorNames(M.operatorNames):y.resetOperatorNames(),p.map(h.default(E,M),u)}Object.defineProperty(c,"__esModule",{value:!0});var y=x(2),h=x(18),p=x(0),r=1,o=-1,m=0,b=2;c.default=f},function(S,c,x){function t(E){return{type:"terminal",value:E}}function l(E){return{type:"command",value:"\\"+E.trim()+" "}}function n(E){var M=/[\^;]+/.exec(E),D=M?M.toString():"",A=E.slice(s.length);return{type:"level_with_comparison",level:D,value:m[A]}}function i(E){return{type:"comparison",value:m[E]}}function s(E){return{type:"level",value:E}}function g(){return s("")}function d(E){return{type:"primes",value:E}}function u(E,M){return{type:"fraction",numerator:E,denominator:M}}function f(E,M,D){return{type:"modified_expression",expression:E,under:M,over:D}}function y(E,M){return{type:"radical",value:E,index:M}}function h(E){return{type:"expression",value:E}}function p(E,M){return{type:"simple_subscript",base:E,subscript:M}}function r(E){if(b.hasOwnProperty(E))return b[E]+" ";throw new Error("Unknown Greek letter")}function o(){for(var E=[],M=0;M<arguments.length;M++)E[M]=arguments[M];return Array.prototype.concat.apply([],E)}Object.defineProperty(c,"__esModule",{value:!0}),c.terminal=t,c.command=l;var m={'"K':"<",'"K:':"\\leq ",$L:"\\parallel ",$P:"\\perp ",".1":">",".1:":"\\geq ",".K":"=","@:@:":"\\approx","/$L":"\\nparallel ","/.K":"\\neq ","=":"=","@:":"\\sim "};c.level_with_comparison=n,c.comparison=i,c.level=s,c.baseline=g,c.primes=d,c.fraction=u,c.modified_expression=f,c.radical=y,c.expression=h,c.simple_subscript=p;var b={".&":"\\chi",".,&":"\\Chi",".,:":"\\Eta",".,?":"\\Theta",".,A":"\\Alpha",".,B":"\\Beta",".,D":"\\Delta",".,E":"\\Epsilon",".,F":"\\Phi",".,G":"\\Gamma",".,I":"\\Iota",".,K":"\\Kappa",".,L":"\\Lambda",".,M":"\\Mu",".,N":"\\Nu",".,O":"\\Omicron",".,P":"\\prod",".,R":"\\Rho",".,S":"\\sum",".,T":"\\Tau",".,U":"\\Upsilon",".,W":"\\Omega",".,X":"\\Xi",".,Y":"\\Psi",".,Z":"\\Zeta",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};c.greek=r,c.group=o},function(S,c,x){function t(d,u){u||(u={});var f=i.parser,y=Object.create(f);y.yy=s,y.yy.warnOrError=function(p){y.parseError(p,{recoverable:!1})};var h=Object.create(f);h.yy=l({warnings:[]},s),h.yy.warnOrError=function(p){h.yy.warnings.push(p)},h.lexer=g.default,f=u.strict?y:h;try{return{isError:!1,value:f.parse(d),warnings:f.yy.warnings||[]}}catch(p){return{error:n.default(p),isError:!0}}}var l=this&&this.__assign||function(){return l=Object.assign||function(d){for(var u,f=1,y=arguments.length;f<y;f++){u=arguments[f];for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(d[h]=u[h])}return d},l.apply(this,arguments)};Object.defineProperty(c,"__esModule",{value:!0});var n=x(6),i=x(9),s=x(17),g=x(20);c.default=t},function(S,c,x){function t(d,u){u||(u={});var f=s.parser,y=Object.create(f);y.yy=g;var h=Object.create(f);h.yy=l({warnings:[]},g),h.lexer=i.default,f=u.strict?y:h;try{return{isError:!1,value:f.parse(d),warnings:f.yy.warnings||[]}}catch(p){return{error:n.default(p),isError:!0}}}var l=this&&this.__assign||function(){return l=Object.assign||function(d){for(var u,f=1,y=arguments.length;f<y;f++){u=arguments[f];for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(d[h]=u[h])}return d},l.apply(this,arguments)};Object.defineProperty(c,"__esModule",{value:!0});var n=x(6),i=x(21),s=x(10),g=x(24);c.default=t},function(S,c,x){Object.defineProperty(c,"__esModule",{value:!0});var t=x(9),l=t.parser.lexer,n=Object.create(l);c.default=n;var i=t.parser.terminals_,s=t.parser.symbols_;n.setInput=function(g,d){this.delimiterStack=[],this.outputQueue=[],this.canAcceptPrimes=!1,l.setInput.call(this,g,d)},n.lex=function(){var g=-1;if(!this)return g;if(this.outputQueue.length)return this.outputQueue.shift();for(var d=l.lex.call(this);i[d]==="UNKNOWN"||!this.canAcceptPrimes&&i[d]==="PRIMES";)this.warn(),d=l.lex.call(this);this.canAcceptPrimes=!0;var u,f,y=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(i[d]){case"OPEN_FRAC":case"OPEN_MODEXP":this.delimiterStack.push(d),this.canAcceptPrimes=!1;break;case"RADICAL_INDEX":y===s.RADICAL_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(y)),this.delimiterStack.push(d),this.canAcceptPrimes=!1;break;case"OPEN_RADICAL":y===s.RADICAL_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(d),this.canAcceptPrimes=!1;break;case"SLASH":for(u=!1;this.delimiterStack.length;){if((f=this.delimiterStack.pop()||-1)===s.OPEN_FRAC){u=!0;break}this.pushCloseTokens(f)}u||this.pushOpenTokens(d),this.delimiterStack.push(d),this.canAcceptPrimes=!1;break;case"CLOSE_FRAC":for(u=!1;this.delimiterStack.length;){if((f=this.delimiterStack.pop()||-1)===s.SLASH){u=!0;break}if(f===s.OPEN_FRAC){this.addMissingToken(s.SLASH),u=!0;break}this.pushCloseTokens(f)}if(!u)return this.warn(),this.canAcceptPrimes=!1,this.lex();break;case"CLOSE_RADICAL":for(u=!1;this.delimiterStack.length;){if((f=this.delimiterStack.pop()||-1)===s.OPEN_RADICAL){u=!0;break}if(f===s.RADICAL_INDEX){u=!0,this.addMissingToken(s.OPEN_RADICAL);break}this.pushCloseTokens(f)}u||this.pushOpenTokens(d);break;case"CLOSE_MODEXP":for(u=!1;this.delimiterStack.length;){if((f=this.delimiterStack.pop()||-1)===s.OPEN_MODEXP){u=!0;break}this.pushCloseTokens(f)}u||this.pushOpenTokens(d);break;case"EOF":for(;this.delimiterStack.length;)f=this.delimiterStack.pop()||-1,this.pushCloseTokens(f)}return this.outputQueue.push(d),g=this.outputQueue.shift()||-1},n.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})},n.addMissingToken=function(g){this.outputQueue.push(g),this.warn()},n.pushCloseTokens=function(g){switch(i[g]){case"OPEN_FRAC":this.addMissingToken(s.SLASH),this.addMissingToken(s.CLOSE_FRAC);break;case"SLASH":this.addMissingToken(s.CLOSE_FRAC);break;case"RADICAL_INDEX":this.addMissingToken(s.OPEN_RADICAL),this.addMissingToken(s.CLOSE_RADICAL);break;case"OPEN_RADICAL":this.addMissingToken(s.CLOSE_RADICAL);break;case"OPEN_MODEXP":this.addMissingToken(s.CLOSE_MODEXP)}},n.pushOpenTokens=function(g){switch(i[g]){case"SLASH":this.addMissingToken(s.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(s.OPEN_FRAC),this.addMissingToken(s.SLASH);break;case"CLOSE_RADICAL":this.addMissingToken(s.OPEN_RADICAL);break;case"CLOSE_MODEXP":this.addMissingToken(s.OPEN_MODEXP)}}},function(S,c,x){Object.defineProperty(c,"__esModule",{value:!0});var t=x(10),l=t.parser.lexer,n=Object.create(l);c.default=n;var i=t.parser.terminals_,s=t.parser.symbols_;n.setInput=function(g,d){this.delimiterStack=[],this.outputQueue=[],l.setInput.call(this,g,d)},n.lex=function(){if(this.outputQueue.length)return this.outputQueue.shift();for(var g=l.lex.call(this);i[g]==="UNKNOWN";)this.warn(),g=l.lex.call(this);var d,u,f=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(i[g]){case"OPEN_FRAC":case"OPEN_GROUP":this.delimiterStack.push(g);break;case"RADICAL_WITH_INDEX":f===s.RADICAL_WITH_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(f)),this.delimiterStack.push(g);break;case"RADICAL":f===s.RADICAL_WITH_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(g);break;case"OVER":for(d=!1;this.delimiterStack.length;){if((u=this.delimiterStack.pop()||-1)===s.OPEN_FRAC){d=!0;break}this.pushCloseTokens(u)}d||this.pushOpenTokens(g),this.delimiterStack.push(g);break;case"CLOSE_FRAC":for(d=!1;this.delimiterStack.length;){if((u=this.delimiterStack.pop()||-1)===s.OVER){d=!0;break}if(u===s.OPEN_FRAC){this.outputQueue.push(s.OVER),d=!0;break}this.pushCloseTokens(u)}d||this.pushOpenTokens(g);break;case"CLOSE_GROUP":for(d=!1;this.delimiterStack.length;){if((u=this.delimiterStack.pop()||-1)===s.OPEN_GROUP){d=!0;break}this.pushCloseTokens(u)}d||this.pushOpenTokens(g);break;case"CLOSE_RADICAL":for(d=!1;this.delimiterStack.length;){if((u=this.delimiterStack.pop()||-1)===s.RADICAL||u===s.RADICAL_WITH_INDEX){d=!0;break}this.pushCloseTokens(u)}d||this.pushOpenTokens(g);break;case"EOF":for(;this.delimiterStack.length;)u=this.delimiterStack.pop()||-1,this.pushCloseTokens(u)}return this.outputQueue.push(g),this.outputQueue.shift()||-1},n.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})},n.addMissingToken=function(g){this.outputQueue.push(g),this.warn()},n.pushCloseTokens=function(g){switch(i[g]){case"OPEN_FRAC":this.addMissingToken(s.OVER),this.addMissingToken(s.CLOSE_FRAC);break;case"OVER":this.addMissingToken(s.CLOSE_FRAC);break;case"OPEN_GROUP":this.addMissingToken(s.CLOSE_GROUP);break;case"RADICAL_WITH_INDEX":case"RADICAL":this.addMissingToken(s.CLOSE_RADICAL)}},n.pushOpenTokens=function(g){switch(i[g]){case"OVER":this.addMissingToken(s.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(s.OPEN_FRAC),this.addMissingToken(s.OVER);break;case"CLOSE_GROUP":this.addMissingToken(s.OPEN_GROUP);break;case"CLOSE_RADICAL":this.addMissingToken(s.RADICAL)}}},function(S,c,x){function t(i){return i.isError}function l(i){return!i.isError}function n(i,s){return t(i)?i:{isError:!1,value:s(i.value)}}Object.defineProperty(c,"__esModule",{value:!0}),c.isErr=t,c.isOk=l,c.map=n},function(S,c,x){function t(M,D){for(var A="",v=!1,k="",J=l(M),X=0;X<M.length;X++){var te=M[X],H=X+1<M.length?M[X+1]:null;switch(te.type){case"terminal":var z=y.getAutoOperator(M.slice(X));z.value!==""?(A+=z.value,X+=z.terminalCount-1):te.value!==" "||v?(J[X]===r?A+="\\left":J[X]===o&&(A+="\\right"),A+=te.value):A+="\\ ",v=!1;break;case"command":var B=te.value.slice(1).trim();H&&H.type==="terminal"&&/[a-z]/.test(H.value)?(A+=B,v=!1):y.containsValue(B)?(A+="\\operatorname{"+B+"}",v=!0):(A+=te.value,v=!0);break;case"expression":A+=te.value;break;case"fraction":A+=g(te.numerator,te.denominator);break;case"radical":A+="\\sqrt",te.index&&(A+="["+t(te.index)+"]"),A+="{"+t(te.value)+"}";break;case"basic_level":A+=d(te.level,te.value,k),te.level==="9"&&(k="");break;case"bracketed_level":A+=u(te.level,te.lbrack,te.value,te.rbrack,k),te.level==="9"&&(k="");break;case"primes":!H||H.type!=="basic_level"&&H.type!=="bracketed_level"||H.level!=="5"?D&&D!==""?(A+=Array(te.value.length+1).join("\\prime "),k=""):(A+=te.value,k=""):k=te.value}}return A+=k,A.replace(/([^\\])( )$/,"$1")}function l(M){for(var D=[],A=[],v=0;v<M.length;v++){var k=M[v];if(n(k))D.push({direction:r,index:v}),A.push(m);else if(i(k)){for(;D.length&&D[D.length-1].direction===b;)D.pop();if(D.length){var J=D.pop();if(J){var X=J.index;A[X]=r,A.push(o)}}else A.push(m)}else if(s(k))if(D.length&&D[D.length-1].direction===b){var J=D.pop();if(J){var X=J.index;A[X]=r,A.push(o)}}else D.push({direction:b,index:v}),A.push(m);else A.push(m)}return A}function n(M){return M.type==="terminal"&&/^(\\langle |\[|\(|\\{)$/.test(M.value)}function i(M){return M.type==="terminal"&&/^(\\rangle |\]|\)|\\})$/.test(M.value)}function s(M){return M.type==="terminal"&&/^(\\\||\|)$/.test(M.value)}function g(M,D){return"\\frac{"+t(M)+"}{"+t(D)+"}"}function d(M,D,A){var v="",k="{"+t(D,M)+"}";return M==="9"?v+=A+"^"+k:M==="5"&&(v+="_"+k),v}function u(M,D,A,v,k){var J="",X="{"+D+t(A,M)+v+"}";return M==="9"?J+=k+"^"+X:M==="5"&&(J+="_"+X),J}function f(M,D){return D&&D.operatorNames?y.setOperatorNames(D.operatorNames):y.resetOperatorNames(),p.map(h.default(M,D),function(A){return E(A,"")})}Object.defineProperty(c,"__esModule",{value:!0});var y=x(2),h=x(19),p=x(0),r=1,o=-1,m=0,b=2,E=t;c.default=f},function(S,c,x){function t(r){return{type:"terminal",value:r}}function l(r){return{type:"command",value:r}}function n(r,o){return{type:"basic_level",level:r,value:o}}function i(r,o,m,b){return{type:"bracketed_level",level:r,lbrack:o,value:m,rbrack:b}}function s(r){return{type:"primes",value:r.length>0?Array(r.length+1).join("'"):""}}function g(r,o){return{type:"fraction",numerator:r,denominator:o}}function d(r,o){return{type:"radical",value:r,index:o}}function u(r){return{type:"expression",value:r}}function f(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return Array.prototype.concat.apply([],r)}function y(r){if(p.hasOwnProperty(r))return p[r]+" ";throw new Error("Unknown Greek letter")}function h(r){for(var o="",m=64,b=0,E=r;b<E.length;b++){var M=E[b];o+=M==="4"?".":M==="J"?"0":M.charCodeAt(0)-m}return o}Object.defineProperty(c,"__esModule",{value:!0}),c.terminal=t,c.command=l,c.basic_level=n,c.bracketed_level=i,c.primes=s,c.fraction=g,c.radical=d,c.expression=u,c.group=f;var p={",.&":"\\Chi",",.:":"\\Eta",",.?":"\\Theta",",.A":"\\Alpha",",.B":"\\Beta",",.D":"\\Delta",",.E":"\\Epsilon",",.F":"\\Phi",",.G":"\\Gamma",",.I":"\\Iota",",.K":"\\Kappa",",.L":"\\Lambda",",.M":"\\Mu",",.N":"\\Nu",",.O":"\\Omicron",",.P":"\\prod",",.R":"\\Rho",",.S":"\\sum",",.T":"\\Tau",",.U":"\\Upsilon",",.W":"\\Omega",",.X":"\\Xi",",.Y":"\\Psi",",.Z":"\\Zeta",".&":"\\chi",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};c.greek=y,c.to_number=h},function(S,c,x){function t(p){return String.fromCharCode(h+p)}function l(p){return p.charCodeAt(0)-h}function n(p){return y[p]}function i(p){return y.indexOf(p)}function s(p){for(var r="",o=0,m=p;o<m.length;o++)r+=t(i(m[o]));return r}function g(p){for(var r="",o=0,m=p;o<m.length;o++)r+=n(l(m[o]));return r}function d(p){return g(p).replace(/[@-^]/g,function(r){return String.fromCharCode(r.charCodeAt(0)+32)})}function u(p){var r="";if(p)for(var o=0,m=p;o<m.length;o++){var b=m[o],E=b.charCodeAt(0);96<=E&&E<=127&&(E-=32,b=String.fromCharCode(E)),32<=E&&E<=95&&(b=s(b),E=b.charCodeAt(0)),10305<=E&&E<=10495&&(E=10240+(E-1024)%64,b=String.fromCharCode(E)),r+=10240<=E&&E<=10304?b:""}return r}function f(p){for(var r=0;r<p.length;r++){var o=p.charCodeAt(r);if(o<10240||o>10304)return!1}return!0}Object.defineProperty(c,"__esModule",{value:!0});var y=` A1B'K2L@CIF/MSP"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=`,h=10240;c.toBrailleAscii=g,c.toExpandedBrailleAscii=d,c.coerceToSixDotCells=u,c.isSixDotCells=f},function(S,c,x){x(3),S.exports=x(3)}])}),P("submodules/dcgview/src/attr-event-handler",[],function(){function S(c,x){if(x!=null){if(typeof c!="string")throw new Error("Must pass a string for an EventHandler name");if(typeof x!="function")throw new Error("Must pass a function for an EventHandler callback");return{bindings:{onMount:function(t){t[c.toLowerCase()]=function(l){l&&x.apply(this,arguments)}}}}}}return S}),P("submodules/dcgview/src/const",["require"],function(S){function c(t){var l=function(){return t};return l.isDCGViewConst=!0,l}function x(t){return!(typeof t!="function"||!t.isDCGViewConst)}return{isConst:x,makeConst:c}}),P("submodules/dcgview/src/attr",["require"],function(S){function c(x,t,l){l===void 0?x.removeAttribute(t):x.setAttribute(t,l+"")}return{update:c}}),P("submodules/dcgview/src/attr-generic",["require","./const","./attr"],function(S){function c(l,n){var i,s=n();return x.isConst(n)||(i={onUpdate:function(g){var d=n();d!==s&&(s=d,t.update(g,l,d))}}),{value:s,bindings:i}}var x=S("./const"),t=S("./attr");return c}),P("submodules/dcgview/src/is-event-handler",[],function(){function S(c){return c[0]==="o"&&c[1]==="n"&&c[2].toUpperCase()===c[2]}return S}),P("submodules/dcgview/src/custom-attributes",["require"],function(S){function c(n,i){l[n]=i}function x(n){return l.hasOwnProperty(n)}function t(n,i){return(0,l[n])(i)}var l={};return{isCustomAttribute:x,add:c,parse:t}}),P("submodules/dcgview/src/bindings",["require"],function(S){function c(t,l,n){var i=t._bindings[l];i?i.push(n):t._bindings[l]=[n]}function x(t,l){var n=t._bindings[l];if(n)for(var i=n.length,s=0;s<i;s++)n[s]()}return{add:c,invoke:x}}),P("submodules/dcgview/src/bind-attrs",["require","./attr-event-handler","./attr-generic","./is-event-handler","./custom-attributes","./bindings"],function(S){function c(u,f,y){var h=y.bindings;if(h)for(var p in h){var r=h[p];p in d&&(r=r.bind(null,f)),g.add(u,p,r)}}function x(u,f){if(typeof f!="function")throw new Error('The "'+u+'" attr must be a function. It is: '+JSON.stringify(f));return s.isCustomAttribute(u)?s.parse(u,f):i(u)?l(u,f):n(u,f)}function t(u,f,y){if(f)for(var h in f){var p=x(h,f[h]);if(p){var r=p.value;r!==void 0&&y.setAttribute(h,r),p.bindings&&c(u,y,p)}}}var l=S("./attr-event-handler"),n=S("./attr-generic"),i=S("./is-event-handler"),s=S("./custom-attributes"),g=S("./bindings"),d={onMount:!0,didMount:!0,willUnmount:!0,willUpdate:!0,onUpdate:!0,didUpdate:!0};return t}),P("submodules/dcgview/src/bind-text",["require","./bindings"],function(S){function c(){l=!0}function x(n,i,s){if(typeof s!="function")throw new Error("bindText expects a function");var g=s();g!=null||(g="");var d=document.createTextNode(g);if(l){var u=document.createElement("span");u.appendChild(d),i.appendChild(u)}else i.appendChild(d);t.add(n,"onUpdate",function(){var f=s();f!=null||(f=""),g!==f&&(d.nodeValue=f,g=f)})}var t=S("./bindings"),l=!1;return{bindText:x,enableSpanWrapping:c}}),P("submodules/dcgview/src/warnings",["require"],function(S){function c(n){l.push(n)}function x(n){var i=l;l=[];for(var s=0;s<i.length;s++){var g=i[s];g!==n&&l.push(g)}}function t(n){try{throw new Error(n)}catch(s){console.warn(s);for(var i=0;i<l.length;i++)l[i](s)}}var l=[];return{warn:t,addWarningHandler:c,removeWarningHandler:x}}),P("submodules/dcgview/src/dcg-element",["require","./bind-attrs","./bind-text","./const","./warnings"],function(S){function c(s,g){var d=document.createTextNode(g);s.appendChild(d)}function x(s,g,d){this.tagName=s,this.attrs=g,this.children=d}var t=S("./bind-attrs"),l=S("./bind-text").bindText,n=S("./const"),i=S("./warnings");return x.prototype._isDCGElement=!0,x.prototype.renderToDocFrag=function(s,g){if(this._domNode)throw new Error("Cannot remount a DCGElement");var d=this.children,u=document.createElement(this.tagName);this._domNode=u,t(g,this.attrs,u),s.appendChild(u);for(var f=d.length,y=0;y<f;y++){var h=d[y];h._isDCGElement?h.renderToDocFrag(u,g):n.isConst(h)?c(u,h()):typeof h=="function"?l(g,u,h):(i.warn("Text should be a const or a getter: "+JSON.stringify(h)),c(u,h))}},x}),P("submodules/dcgview/src/create-element",["require","./dcg-element"],function(S){function c(l,n){if(l!=null)if(Array.isArray(l))for(var i=0;i<l.length;i++)c(l[i],n);else n.push(l)}function x(l,n){for(var i=[],s=arguments.length-1,g=2;g<=s;g++)c(arguments[g],i);if(typeof l=="string")return new t(l,n,i);if(l&&l._isDCGViewClass)return new l(n,i);throw new Error("createElement expects a String or DCGViewClass")}var t=S("./dcg-element");return x}),P("submodules/dcgview/src/mounting",["require","./bindings"],function(S){function c(){for(var h=this._element;h._isDCGView;)h=h._element;return h._domNode}function x(h,p){if(p&&p._childViews.push(this),this.__generatedHTMLBefore)throw new Error("Cannot remount a DCGView");this.__generatedHTMLBefore=!0,this._element.renderToDocFrag(h,this)}function t(h,p,r){if(!h||!h._isDCGViewClass)throw new Error("Must pass a DCGView class to be mounted");if(!p||p.nodeType!==1)throw new Error("Must pass an HTMLElement for the node");if(p._mountedDCGView)throw new Error("This node is already mounted by a view");var o=new h(r),m=document.createDocumentFragment();return o.renderToDocFrag(m),p.innerHTML="",n(o),p._mountedDCGView=o,p.appendChild(m),i(o),s(o),o}function l(h){var p=h._mountedDCGView;if(!p)throw new Error("This node is not mounted by a DCGView");g(p),h.innerHTML="",delete h._mountedDCGView,d(p),u(p)}function n(h){h.willMount&&h.willMount(),y.invoke(h,"willMount"),h._childViews.forEach(n)}function i(h){h._isMounted=!0,h.onMount&&h.onMount(),y.invoke(h,"onMount"),h._childViews.forEach(i)}function s(h){h.didMount&&h.didMount(),y.invoke(h,"didMount"),h._childViews.forEach(s)}function g(h){h.willUnmount&&h.willUnmount(),y.invoke(h,"willUnmount"),h._childViews.forEach(g)}function d(h){h._isMounted=!1,h._childViews.forEach(d),y.invoke(h,"onUnmount"),h.onUnmount&&h.onUnmount()}function u(h){h._childViews.forEach(u),y.invoke(h,"didUnmount"),h.didUnmount&&h.didUnmount()}function f(h,p){var r=document.createDocumentFragment();return h.renderToDocFrag(r,p),r.firstChild}var y=S("./bindings");return{renderToDocFrag:x,findRootNode:c,createNodeForView:f,willMount:n,onMount:i,didMount:s,willUnmount:g,onUnmount:d,didUnmount:u,mountToNode:t,unmountFromNode:l}}),P("submodules/dcgview/src/update",["require","./bindings","./warnings"],function(S){function c(){if(!this._isMounted)return t.warn("Trying to update view that is not mounted. Ignoring update.");if(!this.shouldUpdate||this.shouldUpdate()){if(this.willUpdate&&this.willUpdate(),x.invoke(this,"willUpdate"),x.invoke(this,"onUpdate"),this.onUpdate&&this.onUpdate(),this.overrideChildUpdates)this.overrideChildUpdates();else for(var l=this._childViews,n=l.length,i=0;i<n;i++)l[i].update();x.invoke(this,"didUpdate"),this.didUpdate&&this.didUpdate()}}var x=S("./bindings"),t=S("./warnings");return{update:c}}),P("submodules/dcgview/src/spread",["require"],function(S){function c(x){var t=arguments.length;if(t<2)return x;for(var l=1;l<t;l++)for(var n=arguments[l],i=Object.keys(n),s=i.length,g=0;g<s;g++){var d=i[g];x[d]=n[d]}return x}return c}),P("submodules/dcgview/src/create-class",["require","./create-element","./mounting","./update","./const","./spread"],function(S){function c(s){if(!s)throw new Error("must pass a spec to DCGView.createClass");if(typeof s.template!="function")throw new Error("must pass a template function to DCGView.createClass");var g=function(u,f){this._setupProps(u,f),this.init&&this.init(),this._callTemplate()};g.prototype._setupProps=function(u,f){if(u){for(var y in u){var h=u[y];if(typeof h!="function"&&h!==void 0)throw new Error('The "'+y+'" prop must be a function. It is: '+JSON.stringify(h))}this.props=u}else this.props={};this.children=f,this._childViews=[],this._bindings={}},g.prototype._callTemplate=function(){if(this._element=this.template(),!this._element||!this._element._isDCGElement)throw new Error("template() must return a DCGElement")},g.prototype.bindFn=function(u){return u.bind(this)},g.prototype.findRootNode=t.findRootNode,g.prototype.renderToDocFrag=t.renderToDocFrag,g.prototype.const=n.makeConst,g.prototype.spread=i,g.prototype.createElement=x,g.prototype.update=l.update;for(var d in s)if(s.hasOwnProperty(d)){if(g.prototype.hasOwnProperty(d))throw new Error("Cannot override the "+d+"() method");g.prototype[d]=s[d]}return g._isDCGViewClass=!0,g.prototype._isDCGView=!0,g.prototype._isDCGElement=!0,g}var x=S("./create-element"),t=S("./mounting"),l=S("./update"),n=S("./const"),i=S("./spread");return c}),P("submodules/dcgview/src/attr-style",["require","./const","./attr"],function(S){function c(n){var i=n(),s=typeof i;if(s==="string")return i;if(!s||s!=="object")throw new Error("Unsupported type returned from style getter: "+s);var g="";for(var d in i){var u=i[d];i.hasOwnProperty(d)&&u!==null&&u!==void 0&&(g?g+=";"+d+":"+u:g=d+":"+u)}return g}function x(n){var i,s=c(n);return t.isConst(n)||(i={onUpdate:function(g){var d=c(n);s!==d&&(l.update(g,"style",d),s=d)}}),{value:s,bindings:i}}var t=S("./const"),l=S("./attr");return x}),P("submodules/dcgview/src/attr-class",["require","./const"],function(S){function c(s){var g=s(),d=typeof g;if(d==="string")return g;if(!d||d!=="object")throw new Error("Unsupported type returned from class getter: "+d);var u="";for(var f in g)if(g.hasOwnProperty(f)){var y=g[f];y&&(u?u+=" "+f:u=f)}return u}function x(s,g,d){for(var u=[],f=s.className.replace(n,"").split(i),y=g.replace(n,"").split(i),h={},p=y.length-1;p>=0;p--)h[y[p]]=!0;var r=f.length;for(p=0;p<r;p++){var o=f[p];h.hasOwnProperty(o)||u.push(o)}return d?u.length?d+" "+u.join(" "):d:u.join(" ")}function t(s){var g,d=c(s);return l.isConst(s)||(g={onUpdate:function(u){var f=c(s);d!==f&&(u.className===d?(u.className=f,d=f):(u.className=x(u,d,f),d=f))}}),{value:d,bindings:g}}var l=S("./const"),n=/^\s+|\s+$/g,i=/\s+/;return t}),P("submodules/dcgview/src/attr-lifecycle",["require","./const"],function(S){function c(t){return function(l){if(typeof l!="function")throw new Error("The "+t+" attribute expects a function for the value");if(x.isConst(l))throw new Error("The "+t+" attribute does not expect a const for the value");var n={bindings:{}};return n.bindings[t]=l,n}}var x=S("./const");return c}),P("submodules/dcgview/src/longest-subsequence",["require"],function(S){return function(c){var x,t,l=c.length,n=new Array(l),i=new Array(l+1),s=0;for(t=0;t<l;t++){if(c[i[s]]<c[t])x=s+1;else{for(var g=1,d=s-1;g<=d;){var u=Math.ceil((g+d)/2);c[i[u]]<c[t]?g=u+1:d=u-1}x=g}n[t]=i[x-1],i[x]=t,x>s&&(s=x)}var f=new Array(s),y=i[s];for(t=s-1;t>=0;t--)f[t]=c[y],y=n[y];return f}}),P("submodules/dcgview/src/compute-key-mutations",["require","./longest-subsequence"],function(S){function c(t,l){var n,i,s={},g=[],d=[];for(n=0;n<l.length;n++)i=l[n],s[i]=n;for(n=0;n<t.length;n++)i=t[n],s[i]===void 0&&g.push(i);var u=[];for(n=0;n<t.length;n++){i=t[n];var f=s[i];f!==void 0&&u.push(f)}var y=x(u),h={};for(n=0;n<y.length;n++)i=l[y[n]],h[i]=!0;for(n=l.length-1;n>=0;n--)i=l[n],h[i]||d.push({key:i,beforeKey:l[n+1]});return{removes:g,inserts:d}}var x=S("./longest-subsequence");return c}),P("submodules/dcgview/src/for",["require","./create-class","./compute-key-mutations","./const","./mounting"],function(S){var c=S("./create-class"),x=S("./compute-key-mutations"),t=S("./const"),l=S("./mounting"),n=c({template:function(){return this.children[0]}});return c({_isDCGFor:!0,getKeys:function(){this._keyToItem={};var i=this.props.each();if(!Array.isArray(i))throw new Error("<For each={}> must return an array");var s=this.props.key?i.map(this.props.key):i.slice(0);if(!this._chosenKeyType&&s.length&&(this._chosenKeyType=typeof s[0],this._chosenKeyType!=="string"&&this._chosenKeyType!=="number"))throw new Error("The key: "+JSON.stringify(s[0])+" is not a string or number");for(var g=0;g<s.length;g++){var d=s[g];if(typeof d!==this._chosenKeyType)throw new Error("Keys must be the same type. "+JSON.stringify(d)+" is not a "+this._chosenKeyType);if(d in this._keyToItem)throw new Error("The key: "+JSON.stringify(d)+" is not unique");this._keyToItem[d]=i[g]}return s},createViewForKey:function(i){var s=this._keyToItem[i],g=this._viewFunction.call(this,s,i),d=g;return d._isDCGView||(d=this.createElement(n,null,g)),this._keyToView[i]=d,d},template:function(){if(this._keyToView={},typeof this.props.each!="function")throw new Error("<For each={}> must be a function");if(this.children.length!==1)throw new Error("<For> expects a single child. You passed "+this.children.length);var i=this.children[0];if(!i||!i._isDCGElement)throw new Error("<For> expects the root node to be a DCGElement. You passed "+JSON.stringify(i));if(i._isDCGView)throw new Error("<For> expects the root node to not be a DCGView. Pass in something like <div> or <span>");if(i.children.length!==1)throw new Error("<For> expects a root node with a single child. You passed "+i.children.length);if(this._viewFunction=i.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<For> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var s=JSON.stringify(this._viewFunction);throw new Error("<For> expects a function that constructs a DCGElement. You passed "+s)}if(t.isConst(this._viewFunction))throw new Error("<For> expects a function that constructs a DCGElement. You passed a constant");this._keys=this.getKeys();for(var g=[],d=0;d<this._keys.length;d++){var u=this._keys[d];g.push(this.createViewForKey(u))}return i.children=g,i},detachAllRemovedViews:function(){for(var i,s=this._childViews,g=0,d=s.length,u=0;u<d;u++)i=s[u],i._will_be_unmounted_?g++:s[u-g]=i;s.splice(d-g,g)},overrideChildUpdates:function(){var i=this._keys,s=this.getKeys();this._keys=s;var g,d,u,f,y,h,p=this.findRootNode(),r=x(i,s),o=[];for(g=r.removes.length-1;g>=0;g--)h=r.removes[g],o.push(this._keyToView[h]);for(o.forEach(l.willUnmount),g=0;g<r.removes.length;g++)h=r.removes[g],d=this._keyToView[h],delete this._keyToView[h],d._will_be_unmounted_=!0,p.removeChild(d.findRootNode());o.length>0&&this.detachAllRemovedViews(),o.forEach(l.onUnmount),o.forEach(l.didUnmount);var m=[];for(g=r.inserts.length-1;g>=0;g--)(h=r.inserts[g].key)in this._keyToView||(d=this.createViewForKey(h),m.push(d),l.createNodeForView(d,this));for(m.forEach(l.willMount),g=0;g<r.inserts.length;g++)y=r.inserts[g],u=this._keyToView[y.key].findRootNode(),f=y.beforeKey!==void 0?this._keyToView[y.beforeKey].findRootNode():null,p.insertBefore(u,f);m.forEach(l.onMount),m.forEach(l.didMount);var b=this._childViews,E=b.length-m.length;for(g=0;g<E;g++)b[g].update()}})}),P("submodules/dcgview/src/switch",["require","./create-class","./const","./mounting"],function(S){var c=S("./create-class"),x=S("./const"),t=S("./mounting"),l=c({template:function(){return this.children[0]}});return c({_isDCGSwitch:!0,updateKey:function(){this._key=this.props.key()},createView:function(){var n=this._viewFunction(this._key);return n!=null||(n=this.createElement("div",{style:this.const("display: none")})),this.createElement(l,null,n)},template:function(){if(this._key=void 0,typeof this.props.key!="function")throw new Error("<Switch key={}> must be a function");if(this.children.length!==1)throw new Error("<Switch> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var n=JSON.stringify(this._viewFunction);throw new Error("<Switch> expects a function that constructs a DCGElement. You passed "+n)}if(x.isConst(this._viewFunction))throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a constant");return this.updateKey(),this.createView()},overrideChildUpdates:function(){var n=this._key;if(this.updateKey(),n===this._key)this._element.update();else{var i=this.findRootNode(),s=document.createTextNode("");i.parentNode.insertBefore(s,i),t.willUnmount(this._element),this._childViews=[],i.parentNode.removeChild(i),t.onUnmount(this._element),t.didUnmount(this._element),this._element=this.createView();var g=t.createNodeForView(this._element,this);t.willMount(this._element),s.parentNode.insertBefore(g,s),s.parentNode.removeChild(s),t.onMount(this._element),t.didMount(this._element)}}})}),P("submodules/dcgview/src/switch-union",["require","./create-class","./mounting","./create-element"],function(S){function c(g,d,u){return n(s,{getCase:function(){var f=d();return g?f&&f[g]:f},buildChildView:function(f){var y=u[f];if(y)return y(d)}})}function x(g,d){return typeof g=="string"?c.bind(this,g,d):c(void 0,g,d)}var t=S("./create-class"),l=S("./mounting"),n=S("./create-element"),i=t({template:function(){return this.children[0]}}),s=t({_isDCGSwitchUnion:!0,updateCase:function(){this._case=this.props.getCase()},createView:function(){var g=this.props.buildChildView(this._case);return g!=null||(g=this.createElement("div",{style:this.const("display: none")})),this.createElement(i,null,g)},template:function(){return this._case=void 0,this.updateCase(),this.createView()},overrideChildUpdates:function(){var g=this._case;if(this.updateCase(),g===this._case)this._element.update();else{var d=this.findRootNode(),u=document.createTextNode("");d.parentNode.insertBefore(u,d),l.willUnmount(this._element),this._childViews=[],d.parentNode.removeChild(d),l.onUnmount(this._element),l.didUnmount(this._element),this._element=this.createView();var f=l.createNodeForView(this._element,this);l.willMount(this._element),u.parentNode.insertBefore(f,u),u.parentNode.removeChild(u),l.onMount(this._element),l.didMount(this._element)}}});return x}),P("submodules/dcgview/src/if",["require","./create-class","./const","./switch"],function(S){var c=S("./create-class"),x=S("./const"),t=S("./switch");return c({_isDCGIf:!0,template:function(){if(typeof this.props.predicate!="function")throw new Error("<If predicate={}> must be a function");if(this.children.length!==1)throw new Error("<If> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<If> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var l=JSON.stringify(this._viewFunction);throw new Error("<If> expects a function that constructs a DCGElement. You passed "+l)}if(x.isConst(this._viewFunction))throw new Error("<If> expects a function that constructs a DCGElement. You passed a constant");var n=(function(){return!!this.props.predicate()}).bind(this),i=(function(s){if(s)return this._viewFunction()}).bind(this);return this.createElement(t,{key:n},i)}})}),P("submodules/dcgview/src/if-defined",["require","./create-class","./mounting","./create-element"],function(S){function c(s,g){return l(i,{isDefined:function(){return s()!=null},buildChildView:function(){return g(s)}})}var x=S("./create-class"),t=S("./mounting"),l=S("./create-element"),n=x({template:function(){return this.children[0]}}),i=x({_isDCGIfDefined:!0,updateIsDefined:function(){this._isDefined=this.props.isDefined()},createView:function(){var s;return this._isDefined&&(s=this.props.buildChildView()),s!=null||(s=this.createElement("div",{style:this.const("display: none")})),this.createElement(n,null,s)},template:function(){return this._isDefined=void 0,this.updateIsDefined(),this.createView()},overrideChildUpdates:function(){var s=this._isDefined;if(this.updateIsDefined(),s===this._isDefined)this._element.update();else{var g=this.findRootNode(),d=document.createTextNode("");g.parentNode.insertBefore(d,g),t.willUnmount(this._element),this._childViews=[],g.parentNode.removeChild(g),t.onUnmount(this._element),t.didUnmount(this._element),this._element=this.createView();var u=t.createNodeForView(this._element,this);t.willMount(this._element),d.parentNode.insertBefore(u,d),d.parentNode.removeChild(d),t.onMount(this._element),t.didMount(this._element)}}});return c}),P("submodules/dcgview/src/if-else",["require","./switch-union"],function(S){function c(t,l){return x(function(){return t()?"true":"false"},l)}var x=S("./switch-union");return c}),P("submodules/dcgview/src/textarea",["require","./create-class","./spread"],function(S){var c=S("./create-class"),x=S("./spread");return c({computeValue:function(){var t=this.props.value();return t==null?"":t+""},template:function(){if(!this.props.value)throw new Error('<Textarea> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Textarea> expects an "onInput={}" prop');var t=x({},this.props,{onInput:(function(l){this.props.onInput(l.target.value),this._isMounted&&this.update()}).bind(this)});return this.props.disabled&&(t.disabled=(function(){return!!this.props.disabled()||void 0}).bind(this)),delete t.value,this.createElement("textarea",t,this.const(this.computeValue()))},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var t=this.computeValue();this.rootDOM.value!==t&&(this.rootDOM.value=t)}})}),P("submodules/dcgview/src/input",["require","./create-class","./spread"],function(S){var c=S("./create-class"),x=S("./spread");return c({computeValue:function(){var t=this.props.value();return t==null?"":t+""},template:function(){if(!this.props.value)throw new Error('<Input> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Input> expects an "onInput={}" prop');var t=x({},this.props,{value:this.const(this.computeValue()),onInput:(function(l){this.props.onInput(l.target.value),this._isMounted&&this.update()}).bind(this)});return this.props.disabled&&(t.disabled=(function(){return!!this.props.disabled()||void 0}).bind(this)),t.hasOwnProperty("tabindex")||(t.tabindex=(function(){return this.props.disabled&&this.props.disabled()?"-1":"0"}).bind(this)),this.createElement("input",t)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var t=this.computeValue();this.rootDOM.value!==t&&(this.rootDOM.value=t)}})}),P("submodules/dcgview/src/checkbox",["require","./create-class","./spread"],function(S){var c=S("./create-class"),x=S("./spread");return c({computeChecked:function(){return!!this.props.checked()},template:function(){if(!this.props.checked)throw new Error('<Checkbox> expects a "checked={}" prop');if(!this.props.onChange)throw new Error('<Checkbox> expects an "onChange={}" prop');var t=x({},this.props,{type:this.const("checkbox"),checked:this.const(this.computeChecked()?"checked":void 0),onChange:(function(l){this.props.onChange(l.target.checked),this._isMounted&&this.update()}).bind(this)});return this.createElement("input",t)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var t=this.computeChecked();this.rootDOM.checked!==t&&(this.rootDOM.checked=t)}})}),P("submodules/dcgview/src/components",["require","./for","./switch","./switch-union","./if","./if-defined","./if-else","./textarea","./input","./checkbox"],function(S){return{For:S("./for"),Switch:S("./switch"),SwitchUnion:S("./switch-union"),If:S("./if"),IfDefined:S("./if-defined"),IfElse:S("./if-else"),Textarea:S("./textarea"),Input:S("./input"),Checkbox:S("./checkbox")}}),P("submodules/dcgview/src/class",["require","./create-class"],function(S){return S("./create-class")({template:function(){}})}),P("submodules/dcgview/src/dcg-view",["require","./create-element","./create-class","./mounting","./spread","./const","./custom-attributes","./attr-style","./attr-class","./attr-lifecycle","./components","./warnings","./bind-text","./class"],function(S){var c=S("./create-element"),x=S("./create-class"),t=S("./mounting"),l=S("./spread"),n=S("./const"),i=S("./custom-attributes"),s=S("./attr-style"),g=S("./attr-class"),d=S("./attr-lifecycle"),u=S("./components"),f=S("./warnings"),y=S("./bind-text").enableSpanWrapping,h=S("./class"),p={createElement:c,createClass:x,mountToNode:t.mountToNode,unmountFromNode:t.unmountFromNode,spread:l,const:n.makeConst,isConst:n.isConst,addCustomAttribute:i.add,Components:u,addWarningHandler:f.addWarningHandler,removeWarningHandler:f.removeWarningHandler,enableSpanWrapping:y,Class:h};return p.addCustomAttribute("style",s),p.addCustomAttribute("class",g),p.addCustomAttribute("willMount",d("willMount")),p.addCustomAttribute("onMount",d("onMount")),p.addCustomAttribute("didMount",d("didMount")),p.addCustomAttribute("willUnmount",d("willUnmount")),p.addCustomAttribute("onUnmount",d("onUnmount")),p.addCustomAttribute("didUnmount",d("didUnmount")),p.addCustomAttribute("willUpdate",d("willUpdate")),p.addCustomAttribute("onUpdate",d("onUpdate")),p.addCustomAttribute("didUpdate",d("didUpdate")),p}),P("submodules/dcgview/dcgview",["require","./src/dcg-view"],function(S){return S("./src/dcg-view")}),P("lib/urlparser",["require","exports"],function(S,c){function x(g,d){var u=new RegExp("[?|&]"+d+"=([^&;]+?)(&|#|;|$)"),f=u.exec(g);return f?decodeURIComponent(f[1].replace(/\+/g,"%20")):null}function t(g,d){return new RegExp("[?|&]"+d+"(=|&|;|$)").test(g)}function l(g,d,u){if(d!==encodeURIComponent(d))throw new Error("Programming error: parameter name should be URL-safe without encoding.");var f=encodeURIComponent(u);return g.length?/\?/.test(g)?g+"&"+d+"="+f:g+"?"+d+"="+f:"?"+d+"="+f}function n(g,d,u){var f=new RegExp("([?|&])"+d+"=([^&;]+?)(&|#|;|$)"),y=f.exec(g);if(!y)return g;var h=y[1],p=y[2],r=""+h+d+"="+p,o=encodeURIComponent(u),m=""+h+d+"="+o;return g.replace(r,m)}function i(g,d){var u=new RegExp("([?|&])"+d+"=([^&;]+?)(&|#|;|$)"),f=u.exec(g);if(!f)return g;var y=f[1],h=f[2],p=""+y+d+"="+h,r=g.replace(p,"");return r[0]==="&"?r.replace("&","?"):r}function s(g,d,u){return t(g,d)?n(g,d,u):l(g,d,u)}Object.defineProperty(c,"__esModule",{value:!0}),c.getParameter=x,c.hasParameter=t,c.pushParameter=l,c.replaceParameter=n,c.deleteParameter=i,c.setParameter=s}),P("lib/retain-lang",["require","exports","./parse-query-params","./urlparser"],function(S,c,x,t){function l(u){var f=g.exec(u);if(f){var y=f[1];return!d.test(y)}return!1}function n(u,f){var y="";if(f!==void 0)y=f;else{var h=x.getQueryParams();y=h.lang?""+h.lang:""}return u===""||y===""||i.test(u)||s.test(u)||l(u)?u:t.setParameter(u,"lang",y)}Object.defineProperty(c,"__esModule",{value:!0});var i=/lang=[A-Za-z]+/,s=/(cl|learn|support).desmos.com/,g=/^(?:https?:)?(?:\/\/)?([^\s\/\?]+)/i,d=/(^desmos\.com$)|(\.desmos.com$)/;c.domainNotDesmos=l,c.retainLang=n}),P("loadcss!dcgview-shim",function(){}),(function(){P("dcgview",["require","jquery","underscore","submodules/dcgview/dcgview","bugsnag","lib/retain-lang","loadcss!dcgview-shim"],function(S){var c,x,t,l,n,i;return c=S("jquery"),l=S("underscore"),t=S("submodules/dcgview/dcgview"),x=S("bugsnag"),n=S("lib/retain-lang").retainLang,S("loadcss!dcgview-shim"),t.addWarningHandler(function(s){return x.notify(s)}),i=[],t.onUrlChange=function(s){return i.push(s)},t.addCustomAttribute("href",function(s){var g,d;return g=n(s()),d={value:""+n(s()),bindings:{onMount:function(u){var f;if(!c(u).is("a")&&!c(u).is("use"))throw new Error("Cannot have an href on a non-link element.");return f=!1,c(u).on("dcg-tap",function(y){var h;if(!y.metaKey&&(f=!1,h=n(s()),l.any(i.map(function(p){return p(h,y)}))))return f=!0}),c(u).on("click",function(y){if(f)return f=!1,y.preventDefault()})}}},d.bindings.onUpdate=function(u){var f;if(f=n(s()),g!==f)return g=f,u.setAttribute("href",f)},d}),t.addCustomAttribute("onTap",function(s){return{value:"",bindings:{onMount:function(g){return c(g).on("dcg-tap",s)}}}}),t.addCustomAttribute("ignoreRealClick",function(s){return{bindings:{onMount:function(g){return c(g).on("click",function(d){if(s())return d.preventDefault()})}}}}),t.addCustomAttribute("onTapStart",function(s){return{bindings:{onMount:function(g){return c(g).on("dcg-tapstart",s)}}}}),t.addCustomAttribute("onTapMove",function(s){return{bindings:{onMount:function(g){return c(g).on("dcg-tapmove",s)}}}}),t.addCustomAttribute("onTapEnd",function(s){return{bindings:{onMount:function(g){return c(g).on("dcg-tapend",s)}}}}),t.addCustomAttribute("onLongHold",function(s){return{bindings:{onMount:function(g){return c(g).on("dcg-longhold",s)}}}}),t.addCustomAttribute("manageFocus",function(s){return s()===void 0?{}:{bindings:{onMount:function(g){return s().shouldBeFocused()&&g.focus(),g.onfocus=function(d){if(!s().shouldBeFocused())return s().onFocusedChanged(!0,d)},g.onblur=function(d){if(s().shouldBeFocused())return s().onFocusedChanged(!1,d)}},onUpdate:function(g){var d,u;return u=s().shouldBeFocused(),d=document.activeElement===g,u&&!d?g.focus():d&&!u?g.blur():void 0},willUnmount:function(g){return delete g.onfocus,delete g.onblur}}}}),t})}).call(this),P("expressions/braille-input",["require","exports","tslib","dcgview","jquery"],function(S,c,x,t,l){Object.defineProperty(c,"__esModule",{value:!0});var n=t.Components.Input,i=(function(s){function g(){return s!==null&&s.apply(this,arguments)||this}return x.__extends(g,s),g.prototype.init=function(){this.ASCIICharacters=` A1B'K2L@CIF/MSP"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=`,this.ASCIITable=[],this.HomeRowCharacters="FDSJKL",this.charCodes=[],this.sixKeyModel={keysDown:0,stickyKeysDown:0};var d;for(d=0;d<this.ASCIICharacters.length;d++)this.ASCIITable.push(this.ASCIICharacters.charCodeAt(d));for(d=0;d<this.HomeRowCharacters.length;d++)this.charCodes.push(this.HomeRowCharacters.charCodeAt(d))},g.prototype.template=function(){var d=this;return t.createElement(n,{class:this.const("dcg-braille-input dcg-do-blur"),tabindex:function(){return d.props.tabindex?d.props.tabindex():0},readonly:function(){return d.props.isStatic()?"true":void 0},autocomplete:this.const("off"),autocorrect:this.const("off"),autocapitalize:this.const("off"),spellcheck:this.const("false"),onKeydown:this.bindFn(this.onKeydown),onKeyup:this.bindFn(this.onKeyup),onInput:this.bindFn(this.props.onInput),value:function(){return d.props.value()},"aria-label":function(){return d.props.ariaLabel()||""},didMount:this.bindFn(this.didMount),didUnmount:this.bindFn(this.props.didUnmount),placeholder:function(){return d.props.placeholder?d.props.placeholder():""}})},g.prototype.didMount=function(d){var u=this;this.rootNode=d,l(this.rootNode).on("focus",function(f){u.props.shouldFocus()!==!0&&u.props.onFocusedChanged(!0,f.originalEvent)}).on("blur",function(f){u.props.shouldFocus()!==!1&&u.props.onFocusedChanged(!1,f.originalEvent)}),this.props.didMount(d),this.updateFocus()},g.prototype.didUpdate=function(){this.updateFocus()},g.prototype.updateFocus=function(){this.rootNode&&(this.props.shouldFocus()&&document.activeElement!==this.rootNode&&this.rootNode.focus(),this.props.shouldFocus()||document.activeElement!==this.rootNode||this.rootNode.blur())},g.prototype.onKeydown=function(d){var u=this.charCodes.indexOf(d.which);this.props.isStatic()||!this.isSixKeyInput()||d.altKey||d.ctrlKey||d.metaKey||d.shiftKey||u===-1?this.props.onKeydown&&this.props.onKeydown(d):(this.sixKeyModel=x.__assign(x.__assign({},this.sixKeyModel),{keysDown:this.addKey(this.sixKeyModel.keysDown,u),stickyKeysDown:this.addKey(this.sixKeyModel.stickyKeysDown,u)}),d.preventDefault())},g.prototype.onKeyup=function(d){var u=this.charCodes.indexOf(d.which),f=!1;return this.props.isStatic()||!this.isSixKeyInput()||d.altKey||d.ctrlKey||d.metaKey||d.shiftKey||u===-1?f=!0:(this.sixKeyModel=x.__assign(x.__assign({},this.sixKeyModel),{keysDown:this.removeKey(this.sixKeyModel.keysDown,u)}),this.sixKeyModel.keysDown===0&&(this.addCharacter(this.bitsToASCII(this.sixKeyModel.stickyKeysDown)),this.sixKeyModel=x.__assign(x.__assign({},this.sixKeyModel),{stickyKeysDown:0}))),f||d.preventDefault(),f},g.prototype.addKey=function(d,u){return d|1<<u},g.prototype.removeKey=function(d,u){return d&~(1<<u)},g.prototype.bitsToASCII=function(d){return String.fromCharCode(this.ASCIITable[d])},g.prototype.addCharacter=function(d){this.rootNode&&!this.props.isStatic()&&(this.rootNode.setRangeText(d,this.rootNode.selectionStart,this.rootNode.selectionEnd,"end"),this.props.onInput(this.rootNode.value))},g.prototype.isSixKeyInput=function(){return typeof this.props.sixKeyInput=="function"&&this.props.sixKeyInput()},g})(t.Class);c.default=i}),P("vendor/mathquill",["require","exports","toplevel/mathquill","mathquill"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0}),c.MQ=x.getInterface(1).config(t)}),P("loadcss!dcgview-helpers/static-mathquill-view",function(){}),P("dcgview-helpers/static-mathquill-view",["require","exports","tslib","dcgview","vendor/mathquill","jquery","lib/conditional_blur","loadcss!./static-mathquill-view"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=(function(g){function d(){return g!==null&&g.apply(this,arguments)||this}return x.__extends(d,g),d.prototype.template=function(){var u=this;return this.children.length===1?this.children[0]:t.createElement("div",{didMount:function(f){return u.didMountMathquill(f)}})},d.prototype.didMount=function(){this.children.length===1&&this.didMountMathquill(this.findRootNode())},d.prototype.didMountMathquill=function(u){this.staticMath=l.MQ.StaticMath(u),n(u).off(".mathquill").addClass("dcg-static-mathquill-view").on("dcg-tapstart",function(){i.default()}),this.updateMathquill()},d.prototype.didUpdate=function(){this.updateMathquill()},d.prototype.updateMathquill=function(){this.updateMathquillAria(),this.updateMathquillLatex()},d.prototype.updateMathquillLatex=function(){if(this.staticMath){var u=this.props.latex();this.lastLatex!==u&&(this.staticMath.latex(u),this.lastLatex=u,this.props.onReflow&&this.props.onReflow())}},d.prototype.updateMathquillAria=function(){if(this.staticMath&&this.props.getAriaLabel){var u=this.props.getAriaLabel();u!==this.staticMath.getAriaLabel()&&this.staticMath.setAriaLabel(u)}},d})(t.Class);c.default=s}),P("loadcss!lib/tooltip",function(){}),P("lib/tooltip",["require","exports","tslib","keys","dcgview","jquery","underscore","dcgview-helpers/static-mathquill-view","loadcss!./tooltip"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=l.Components.IfElse,d=(function(f){function y(){return f!==null&&f.apply(this,arguments)||this}return x.__extends(y,f),y.prototype.template=function(){var h=this;return l.createElement("div",{class:function(){var p;return p={},p[h.getCustomClassName()]=!0,p["dcg-tooltip-positioning-container"]=!0,p["dcg-latex-tooltip-positioning-container"]=h.props.renderAsLatex(),p["dcg-tooltip-gravity-ne-se"]=h.props.gravity()==="ne"||h.props.gravity()==="se",p["dcg-tooltip-gravity-nw-sw"]=h.props.gravity()==="nw"||h.props.gravity()==="sw",p["dcg-tooltip-gravity-n-s"]=h.props.gravity()==="n"||h.props.gravity()==="s",p["dcg-tooltip-gravity-e-w"]=h.props.gravity()==="e"||h.props.gravity()==="w",p},style:function(){return{top:h.props.hitAreaRect().top+(h.props.offset().top||0)+"px",left:h.props.hitAreaRect().left+(h.props.offset().left||0)+"px",width:h.props.hitAreaRect().width+"px",height:h.props.hitAreaRect().height+"px"}}},l.createElement("div",{class:l.const("dcg-tooltip-message-container"),style:this.bindFn(this.getMessageStyle)},g(function(){return h.props.renderAsLatex()},{true:function(){return l.createElement("div",{class:function(){return{"dcg-tooltip-message":!0,"dcg-latex":!0,"dcg-sticky-not-stuck":h.props.isStickyAndNotStuck(),"dcg-tooltip-overflow":h.messageOverflows()}},style:function(){return{"max-width":h.getMaxWidth()+"px"}},didMount:function(p){h.tooltipMessage=p}},l.createElement(s.default,{latex:function(){return h.props.tooltip()}}))},false:function(){return l.createElement("div",{class:l.const("dcg-tooltip-message"),style:function(){return{background:h.getBackgroundColor(),cursor:h.props.isStickyAndNotStuck()?"pointer":"default"}}},h.props.tooltip)}})),l.createElement("div",{class:l.const("dcg-tooltip-arrow"),style:function(){return h.props.renderAsLatex()?h.getArrowWithBorderStyle():h.getSolidArrowStyle()}}))},y.prototype.getCustomClassName=function(){return this.props.class?this.props.class():""},y.prototype.messageOverflows=function(){return this.tooltipMessage&&this.tooltipMessage.getBoundingClientRect().width>=this.getMaxWidth()},y.prototype.getArrowWithBorderStyle=function(){var h=this.props.gravity(),p=this.getBackgroundColor(),r=this.props.isStickyAndNotStuck()?".95":"1",o={width:"8px",height:"8px",border:"1px solid #bbb",background:p,opacity:r};switch(h){case"s":return x.__assign(x.__assign({},o),{top:"100%",left:"50%","margin-top":"1px","border-right":"0","border-bottom":"0"});case"sw":return x.__assign(x.__assign({},o),{top:"100%",right:"10px","margin-top":"1px","border-right":"0","border-bottom":"0"});case"se":return x.__assign(x.__assign({},o),{top:"100%",left:"10px","margin-top":"1px","border-right":"0","border-bottom":"0"});case"n":return x.__assign(x.__assign({},o),{bottom:"100%",left:"50%","margin-bottom":"1px","border-left":"0","border-top":"0"});case"nw":return x.__assign(x.__assign({},o),{bottom:"100%",right:"10px","margin-bottom":"1px","border-left":"0","border-top":"0"});case"ne":return x.__assign(x.__assign({},o),{bottom:"100%",left:"10px","margin-bottom":"1px","border-left":"0","border-top":"0"});case"e":return x.__assign(x.__assign({},o),{top:"50%",left:"100%","margin-left":"1px","border-right":"0","border-top":"0"});case"w":return x.__assign(x.__assign({},o),{top:"50%",right:"100%","margin-right":"1px","border-left":"0","border-bottom":"0"});default:return h}},y.prototype.getSolidArrowStyle=function(){var h=this.props.gravity(),p=this.getBackgroundColor(),r="transparent transparent "+p+" transparent",o=p+" transparent transparent transparent",m="transparent "+p+" transparent transparent",b="transparent transparent transparent "+p;switch(h){case"s":return{top:"100%",left:"50%",border:"5px solid transparent","border-color":r,"margin-top":"-5px","margin-left":"-5px"};case"sw":return{top:"100%",right:"10px",border:"5px solid transparent","border-color":r,"margin-top":"-5px","margin-left":"-5px"};case"se":return{top:"100%",left:"10px",border:"5px solid transparent","border-color":r,"margin-top":"-5px","margin-left":"-5px"};case"n":return{bottom:"100%",left:"50%",border:"5px solid transparent","border-color":o,"margin-bottom":"-5px","margin-left":"-5px"};case"nw":return{bottom:"100%",right:"10px",border:"5px solid transparent","border-color":o,"margin-bottom":"-5px","margin-left":"-5px"};case"ne":return{bottom:"100%",left:"10px",border:"5px solid transparent","border-color":o,"margin-bottom":"-5px","margin-left":"-5px"};case"e":return{top:"50%",left:"100%",border:"5px solid transparent","border-color":m,"margin-left":"-5px","margin-top":"-5px"};case"w":return{top:"50%",right:"100%",border:"5px solid transparent","border-color":b,"margin-right":"-5px","margin-top":"-5px"};default:return h}},y.prototype.getBackgroundColor=function(){return this.props.renderAsLatex()?"#fff":this.props.isStickyAndNotStuck()?"#666":"#000"},y.prototype.getMaxWidth=function(){var h=this.props.gravity(),p=this.props.hitAreaRect().left+(this.props.offset().left||0),r=p+this.props.hitAreaRect().width,o=.5*this.props.hitAreaRect().width+p,m=window.innerWidth-5;switch(h){case"se":case"ne":case"e":return m-p;case"sw":case"nw":case"w":return r-5;case"s":case"n":return 2*Math.min(m-o,o-5);default:return h}},y.prototype.getMessageStyle=function(){var h=this.props.hitAreaRect(),p=this.props.gravity();switch(p){case"s":return{top:"100%",transform:"translate(-50%, 0)",left:.5*h.width+"px","margin-top":"5px","text-align":"center"};case"sw":return{top:"100%",right:"0","margin-top":"5px","text-align":"right"};case"se":return{top:"100%","margin-top":"5px","text-align":"left"};case"n":return{bottom:"100%",transform:"translate(-50%, 0)",left:.5*h.width+"px","margin-bottom":"5px","text-align":"center"};case"nw":return{bottom:"100%",right:"0","margin-bottom":"5px","text-align":"right"};case"ne":return{bottom:"100%","margin-bottom":"5px","text-align":"left"};case"e":return{transform:"translate(0, -50%)",left:"100%",top:.5*h.height+"px","margin-left":"5px","text-align":"left"};case"w":return{transform:"translate(0, -50%)",right:"100%",top:.5*h.height+"px","margin-right":"5px","text-align":"right"};default:return p}},y})(l.Class),u=(function(f){function y(){return f!==null&&f.apply(this,arguments)||this}return x.__extends(y,f),y.prototype.init=function(){this.uuid=i.uniqueId(),this.isMounted=!0},y.prototype.template=function(){var h=this;return l.createElement("div",{class:l.const("dcg-tooltip-hit-area-container"),handleevent:l.const("true"),didMount:function(p){h.hitAreaNode=p,h.setupEventListeners(h.hitAreaNode)},onTap:function(){h.shouldHideOnTargetClick()?h.hideTooltip():h.shouldShowOnTargetClick()?h.showTooltip():h.shouldStickOnTargetClick()&&(h.isStuck?(h.clearTimeouts(),h.hideTooltip()):(h.showTooltip(),h.stickTooltip()))}},this.children)},y.prototype.didUpdate=function(){this.updateTooltip()},y.prototype.updateTooltip=function(){if(this.wrapperRef){if(!this.props.tooltip())return void this.hideTooltip();var h=this.hitAreaNode.getBoundingClientRect(),p=this.wrapperRef.elt.getBoundingClientRect(),r=this.wrapperRef,o=r.originalTop,m=r.originalLeft,b=h.top-p.top,E=h.left-p.left;Math.abs(b-o)>3||Math.abs(E-m)>3?this.hideTooltip():this.wrapperRef.view.update()}},y.prototype.handleShowEvent=function(h){if(!this.props.disabled||!this.props.disabled()){var p=this.props.delay?this.props.delay():500;this.clearTimeouts(),this.showTooltipTimeout=setTimeout(h,p)}},y.prototype.handleHideEvent=function(){this.clearTimeouts(),this.hideTooltipTimeout=setTimeout(this.bindFn(this.hideTooltip),150)},y.prototype.setupEventListeners=function(h){var p=this;n(h).on("tipsyshow",function(r){r.target===h&&p.handleShowEvent(function(){p.showTooltip()})}).on("tipsyhide",function(r){r.target!==h||p.isStuck||p.handleHideEvent()}),this.shouldShowOnTargetClick()&&this.setUpHideOnExternalMousedown()},y.prototype.willUnmount=function(){this.clearTimeouts(),this.isMounted=!1,this.hideTooltip()},y.prototype.setUpHideOnExternalMousedown=function(){var h=this;n(document).on("mousedown.dcg-tooltip-"+this.uuid+" touchstart.dcg-tooltip-"+this.uuid+" pointerdown.dcg-tooltip-"+this.uuid,function(p){h.wrapperRef&&(n(p.target).closest(h.hitAreaNode).length||n(p.target).closest(h.wrapperRef.elt).length||h.hideTooltip())})},y.prototype.stickTooltip=function(){this.isMounted&&this.wrapperRef&&(this.isStuck||(this.setUpHideOnExternalMousedown(),this.isStuck=!0,this.updateTooltip()))},y.prototype.clearTimeouts=function(){clearTimeout(this.showTooltipTimeout),clearTimeout(this.hideTooltipTimeout)},y.prototype.showTooltip=function(){var h=this;if(this.isMounted&&!this.wrapperRef&&this.props.tooltip()){var p=this.hitAreaNode.getBoundingClientRect(),r=document.createElement("div");r.className="dcg-tooltip-mount-pt",n(this.hitAreaNode).closest(".dcg-tap-container")[0].appendChild(r);var o=r.getBoundingClientRect(),m=p.left-o.left,b=p.top-o.top,E={tooltip:this.props.tooltip,class:this.props.class,isStickyAndNotStuck:function(){return h.shouldStickOnTargetClick()&&!h.isStuck},offset:function(){return h.props.offset?h.props.offset():{}},gravity:function(){return h.props.gravity?h.props.gravity():"s"},renderAsLatex:function(){return!!h.props.renderAsLatex&&h.props.renderAsLatex()},hitAreaRect:function(){return{top:b||0,left:m||0,width:p.width||0,height:p.height||0}}};this.setupEventListeners(r),n(r).on("dcg-tap",function(){h.shouldStickOnTargetClick()&&h.stickTooltip()});var M=l.mountToNode(d,r,E);n(document).on("keydown.dcg-tooltip-"+this.uuid,function(A){t.lookup(A)===t.ESCAPE&&h.hideTooltip()});var D=function(){return h.updateTooltip()};window.addEventListener("scroll",D,!0),this.wrapperRef={elt:r,view:M,originalLeft:m,originalTop:b,onScroll:D}}},y.prototype.hideTooltip=function(){this.clearTimeouts(),this.wrapperRef&&(this.isStuck=!1,n(document).off(".dcg-tooltip-"+this.uuid),window.removeEventListener("scroll",this.wrapperRef.onScroll,!0),l.unmountFromNode(this.wrapperRef.elt),this.wrapperRef.elt.parentNode&&this.wrapperRef.elt.parentNode.removeChild(this.wrapperRef.elt),this.wrapperRef=void 0)},y.prototype.shouldStickOnTargetClick=function(){return!!this.props.targetClickBehavior&&this.props.targetClickBehavior()==="stick"},y.prototype.shouldShowOnTargetClick=function(){return!!this.props.targetClickBehavior&&this.props.targetClickBehavior()==="show"},y.prototype.shouldHideOnTargetClick=function(){return!this.props.targetClickBehavior||this.props.targetClickBehavior()==="hide"},y})(l.Class);c.Tooltip=u}),P("lib/abraham-helpers",["require","exports","abraham"],function(S,c,x){function t(n,i){return i==="nemeth"?x.latexToNemeth(n):i==="ueb"?x.latexToUeb(n):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}}function l(n,i){return i==="nemeth"?x.nemethToLatex(n):i==="ueb"?x.uebToLatex(n):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}}Object.defineProperty(c,"__esModule",{value:!0}),c.latexToBraille=t,c.brailleToLatex=l}),P("loadcss!dcgview-helpers/mathquill-view",function(){}),P("dcgview-helpers/mathquill-view",["require","exports","tslib","keys","browser","dcgview","vendor/mathquill","jquery","./static-mathquill-view","loadcss!./mathquill-view"],function(S,c,x,t,l,n,i,s,g){Object.defineProperty(c,"__esModule",{value:!0});var d=n.Components.If;c.EXPRESSION_SIZE_LIMIT=100;var u=(function(f){function y(){var h=f!==null&&f.apply(this,arguments)||this;return h.lastLatexProp="",h.wasFocusedLastUpdate=!1,h}return x.__extends(y,f),y.prototype.template=function(){var h=this;return this.children.length===1?this.children[0]:n.createElement("div",{class:n.const("dcg-mq-container")},n.createElement(d,{predicate:function(){return h.getPlaceholder().trim().length>0}},function(){return n.createElement("span",{class:n.const("dcg-mq-placeholder")},n.createElement(g.default,{latex:function(){return h.getPlaceholder()}}))}),n.createElement("div",{class:function(){return{"dcg-math-field":!0,"dcg-no-fadeout":h.props.noFadeout&&h.props.noFadeout(),"dcg-invalid":h.props.hasError(),"dcg-focus":h.props.isFocused()}},didMount:function(p){return h.didMountMathquill(p)},"data-dcg-label":function(){return h.props.dataLabelAttributeValue?h.props.dataLabelAttributeValue():void 0}}))},y.prototype.didMount=function(){this.children.length===1&&this.didMountMathquill(this.findRootNode())},y.prototype.willUnmount=function(){this.$mathField.off(".view"),this.mathField=void 0},y.prototype.getPlaceholder=function(){return this.props.placeholder?this.props.isFocused()||this.props.latex()?"":this.props.placeholder():""},y.prototype.didMountMathquill=function(h){var p=this,r=x.__assign(x.__assign({},this.props.config()),{handlers:{reflow:function(o){p.props.onReflow&&p.mathField&&p.props.onReflow(o)}},onCut:function(){p.mathField&&p.props.onUserChangedLatex(p.mathField.latex())},onPaste:function(){p.mathField&&p.props.onUserChangedLatex(p.mathField.latex())},overrideTypedText:function(o){p.mathField&&p.viewCanAcceptText(o)&&(p.props.onUserTypedText?p.props.onUserTypedText(o):(p.mathField.typedText(o),p.props.onUserChangedLatex(p.mathField.latex())))},overrideKeystroke:function(o,m){if(o==="Backspace"&&m.preventDefault(),p.mathField){if(o==="Spacebar"&&p.props.disableSpace&&p.props.disableSpace())return m.preventDefault();if(m.originalEvent){var b=t.lookup(m.originalEvent);if(b==="Up"||b==="Down"||b==="Left"||b==="Right"||b==="Esc"){var E=[];m.ctrlKey&&E.push("Ctrl"),m.metaKey&&E.push("Meta"),m.altKey&&E.push("Alt"),m.shiftKey&&E.push("Shift"),E.length?(E.push(b),o=E.join("-")):o=b}}p.props.onUserPressedKey?p.props.onUserPressedKey(o,m):(p.mathField.keystroke(o,m),p.props.onUserChangedLatex(p.mathField.latex()))}}});this.props.needsSystemKeypad&&this.props.needsSystemKeypad()&&(r.substituteTextarea=function(){return s('<textarea autocorrect="off" autocapitalize="none" spellcheck="false" autocomplete="off">')[0]}),this.$mathField=s(h),this.mathField=i.MQ.MathField(h,r),h._mqMathFieldInstance=this.mathField,h._mqViewInstance=this,this.$mathField.on("focusin.view focusout.view",function(o){return p.onFocusEvent(o)}).on("paste.view",function(o){return p.onPasteEvent(o)}),(l.IS_IOS||l.IS_ANDROID)&&this.$mathField.on("keypress.view",function(o){return p.onKeypressEvent(o)}),this.hookupMQTapTouch(),this.updateMathquill()},y.prototype.didUpdate=function(){this.updateMathquill()},y.prototype.updateMathquill=function(){this.updateMathquillAria(),this.updateMathquillLatex(),this.updateMathquillFocused(),this.updateMathquillPostLabel()},y.prototype.onFocusEvent=function(h){var p=this.isFocused();p!==this.shouldBeFocused()&&this.props.onFocusedChanged(p,h)},y.prototype.onPasteEvent=function(h){var p="",r=window.clipboardData,o=h.originalEvent;r&&r.getData?p=r.getData("Text"):o&&o.clipboardData&&o.clipboardData.getData&&(p=o.clipboardData.getData("text/plain"));var m=this.viewCanAcceptText(p);return!m&&this.props.onExpressionSizeExceeded&&this.props.onExpressionSizeExceeded(),m},y.prototype.viewCanAcceptText=function(h){return y.canAcceptText(this.mathField,this.props.capExpressionSize(),h)},y.canAcceptText=function(h,p,r){return!!h&&(!p||h.latex().length+r.length<=c.EXPRESSION_SIZE_LIMIT)},y.prototype.onKeypressEvent=function(h){if(h.stopPropagation(),h.preventDefault(),this.mathField){var p=t.lookupChar(h.originalEvent);p&&this.viewCanAcceptText(p)&&(this.props.onUserTypedText?this.props.onUserTypedText(p):(this.mathField.typedText(p),this.props.onUserChangedLatex(this.mathField.latex())))}},y.prototype.hookupMQTapTouch=function(){var h=this;this.$mathField.on("dcg-tap.view",function(p){if(p.device==="touch"&&h.mathField){var r=p.originalEvent.changedTouches[0];h.mathField.clickAt(r.clientX,r.clientY,r.target),h.isFocused()||h.mathField.focus();var o=void 0;setTimeout(function(){o=Date.now()},0),h.mathField.ignoreNextMousedown(function(){return o===void 0||Date.now()-o<500})}})},y.prototype.updateMathquillAria=function(){if(this.mathField){var h=this.props.getAriaLabel();h!==this.mathField.getAriaLabel()&&this.mathField.setAriaLabel(h)}},y.prototype.updateMathquillPostLabel=function(){this.mathField&&this.mathField.setAriaPostLabel(this.props.getAriaPostLabel(),this.props.hasError()?5e3:1e3)},y.prototype.updateMathquillLatex=function(){var h=this.props.latex();this.mathField&&this.lastLatexProp!==h&&(this.props.capExpressionSize()&&h.length>c.EXPRESSION_SIZE_LIMIT||(this.lastLatexProp=h,this.mathField.latex()!==h&&this.mathField.latex(h)))},y.prototype.updateMathquillFocused=function(){if(this.mathField){var h=this.isFocused(),p=this.shouldBeFocused();p&&p!==this.wasFocusedLastUpdate&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.mathField.select(),this.wasFocusedLastUpdate=p,h!==p&&(p?this.mathField.focus():this.mathField.blur())}},y.prototype.isFocused=function(){return!(!document.activeElement||!s(document.activeElement).closest(this.$mathField).length)},y.prototype.shouldBeFocused=function(){return this.props.isFocused()},y.getFocusedMathquill=function(){if(document.activeElement){var h=s(document.activeElement).closest(".dcg-mq-editable-field")[0];return h?h._mqMathFieldInstance:void 0}},y.getMQViewInstance=function(h){var p=h.el();return p?p._mqViewInstance:void 0},y.applyArrowKeyAndReturnIfWasAtBounds=function(h,p,r){var o=s(h.el()),m=o.find(".dcg-mq-selection"),b=m.length===1&&m.parent().parent()[0]===o[0]&&m.parent().children().length===1;if((p==="Up"||p==="Down")&&b)return h.keystroke(p,r),!0;var E=o.find(".dcg-mq-cursor")[0];if(!E)return h.keystroke(p,r),!1;var M=E.previousSibling||E.parentElement;return h.keystroke(p,r),M===(E.previousSibling||E.parentElement)},y.simulateKeypress=function(h,p){var r=y.getMQViewInstance(h);r&&(r.props.onUserPressedKey?r.props.onUserPressedKey(p):(h.keystroke(p),r.props.onUserChangedLatex(h.latex())))},y.simulateUserChangedLatex=function(h){var p=y.getMQViewInstance(h);p&&p.mathField&&p.props.onUserChangedLatex(p.mathField.latex())},y.handleKeystrokeAndDecideIfSpecialEvent=function(h,p,r){return p==="Enter"||p==="Delete"&&h.latex()===""||p==="Backspace"&&h.latex()===""||(p==="Up"||p==="Down"||p==="Left"||p==="Right"?y.applyArrowKeyAndReturnIfWasAtBounds(h,p,r):(h.keystroke(p,r),!1))},y})(n.Class);c.default=u}),P("loadcss!Abraham",function(){}),P("loadcss!dcgview-helpers/mathquill-braille-wrapper",function(){}),P("dcgview-helpers/mathquill-braille-wrapper",["require","exports","tslib","jquery","abraham","dcgview","../expressions/braille-input","../lib/tooltip","../lib/abraham-helpers","dcgview-helpers/mathquill-view","loadcss!Abraham","loadcss!./mathquill-braille-wrapper"],function(S,c,x,t,l,n,i,s,g,d){function u(){if(document.activeElement&&t(document.activeElement).hasClass("dcg-braille-input"))return document.activeElement}function f(p){return!p||t(p).val()===""}Object.defineProperty(c,"__esModule",{value:!0});var y=n.Components.If,h=(function(p){function r(){return p!==null&&p.apply(this,arguments)||this}return x.__extends(r,p),r.prototype.init=function(){this.controller=this.props.controller(),this.currentBrailleValue=this.getBrailleFromLatex(this.props.latex()),this.currentBrailleMode=this.controller.getBrailleMode(),this.hasTranslationError=!1,this.currentLatex=this.props.latex()},r.prototype.isFocused=function(){return this.props.brailleShouldFocus()},r.prototype.isStatic=function(){return!!this.props.isStatic&&this.props.isStatic()},r.prototype.hasError=function(){return!!this.props.hasError&&this.props.hasError()},r.prototype.willUpdate=function(){if(!this.isFocused()||this.currentLatex!==this.props.latex()){var o=this.currentLatex!==this.props.latex();this.currentLatex=this.props.latex();var m=this.controller.getBrailleMode();(m!==this.currentBrailleMode&&m!=="none"||!this.hasTranslationError||o||this.isStatic())&&(this.currentBrailleValue=this.getBrailleFromLatex(this.props.latex()),this.hasTranslationError=!1),this.currentBrailleMode=m}},r.prototype.onBrailleInput=function(o){if(this.props.onBrailleInput){var m=this.getLatexFromBraille(o);if(this.hasTranslationError=m.isError,!m.isError&&this.controller.getCapExpressionSize()&&m.value.length>d.EXPRESSION_SIZE_LIMIT)return void(this.props.onExpressionSizeExceeded?this.props.onExpressionSizeExceeded():this.controller.dispatch({type:"expression-size-exceeded"}));this.currentBrailleValue=o,m.isError||(this.currentLatex=m.value,this.props.onBrailleInput(m.value))}},r.prototype.getBrailleFromLatex=function(o){var m=g.latexToBraille(o,this.controller.getBrailleMode());return m.isError?"":l.UnicodeBraille.toExpandedBrailleAscii(m.value)},r.prototype.getLatexFromBraille=function(o){return g.brailleToLatex(l.UnicodeBraille.coerceToSixDotCells(o),this.controller.getBrailleMode())},r.prototype.getBrailleLabel=function(o){return this.getBrailleFromLatex(o.replace(/\s/,"\\ "))},r.prototype.shouldShowBraille=function(){var o=this.controller.getBrailleMode();return o==="nemeth"||o==="ueb"},r.prototype.isOverflowingLeft=function(){return!!this.brailleInput&&this.brailleInput.scrollLeft>0},r.prototype.isOverflowingRight=function(){if(!this.brailleInput)return!1;var o=this.brailleInput.getBoundingClientRect().width;return this.brailleInput.scrollWidth>o+this.brailleInput.scrollLeft+2},r.prototype.didMountBrailleInput=function(o){this.brailleInput=o},r.prototype.didUnmountBrailleInput=function(){this.brailleInput=void 0},r.prototype.getTooltipGravity=function(){var o=this.props.tooltipOptions&&this.props.tooltipOptions();return o&&o.gravity?o.gravity:"se"},r.prototype.getTooltipDelay=function(){var o=this.props.tooltipOptions&&this.props.tooltipOptions();return o&&o.delay?o.delay:0},r.prototype.handleBrailleFocusChanged=function(o,m){this.props.onBrailleFocusedChanged&&this.props.onBrailleFocusedChanged(o,m),this.brailleInput&&(o&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.brailleInput.select(),this.isStatic()&&this.brailleInput.scrollTo(0,0))},r.prototype.getTooltipText=function(){var o=this.props.placeholder&&!this.isFocused()?this.props.placeholder():"";return this.props.latex()||o},r.prototype.template=function(){var o=this;return n.createElement("div",{class:n.const("dcg-mathquill-wrapper")},n.createElement(y,{predicate:function(){return o.shouldShowBraille()}},function(){return n.createElement("div",{class:function(){return{"dcg-mathquill-braille":!0,"dcg-focus":o.props.brailleShouldFocus&&o.props.brailleShouldFocus(),"dcg-invalid":o.hasError(),"dcg-mathquill-static-braille":o.isStatic(),"dcg-mathquill-braille-overflow-left":o.isOverflowingLeft(),"dcg-mathquill-braille-overflow-right":o.isOverflowingRight()}},"data-dcg-limit":function(){return o.props.dataDCGLimit?o.props.dataDCGLimit():void 0},"data-dcg-label":function(){return o.props.dataLabelAttributeValue?o.props.dataLabelAttributeValue():void 0}},n.createElement(s.Tooltip,{class:o.const("dcg-mathquill-braille-tooltip"),renderAsLatex:o.const(!0),tooltip:function(){return o.getTooltipText()},gravity:o.bindFn(o.getTooltipGravity),delay:o.bindFn(o.getTooltipDelay),targetClickBehavior:o.const("show")},n.createElement(i.default,{ariaLabel:function(){return o.props.ariaLabel?o.getBrailleLabel(o.props.ariaLabel()):""},didMount:o.bindFn(o.didMountBrailleInput),didUnmount:o.bindFn(o.didUnmountBrailleInput),onFocusedChanged:o.bindFn(o.handleBrailleFocusChanged),shouldFocus:o.props.brailleShouldFocus||o.const(!1),onKeydown:o.props.onBrailleKeydown,onInput:o.bindFn(o.onBrailleInput),sixKeyInput:function(){return o.controller.getSixKeyInput()},value:function(){return o.currentBrailleValue},placeholder:function(){return o.props.placeholder?o.getBrailleFromLatex(o.props.placeholder()):""},tabindex:function(){return o.props.tabindex?o.props.tabindex():0},isStatic:o.bindFn(o.isStatic)})))}),n.createElement("div",{class:n.const("dcg-typeset-math"),style:function(){return{display:o.shouldShowBraille()?"none":void 0}}},this.children))},r})(n.Class);c.default=h,c.getFocusedBrailleElement=u,c.brailleInputIsEmpty=f}),P("expressions/list_move_controller",["require","exports","core/lib/dragmode","core/lib/number-to-latex","core/lib/label","lib/rounding","graphing-calc/models/expression","graphing-calc/models/table","graphing-calc/models/list","graphing-calc/models/image","core/math/poi","core/math/functions"],function(S,c,x,t,l,n,i,s,g,d,u,f){function y(v,k,J){if(J.tableInfo){g.setSelected(k,void 0);var X=v.getItemModel(J.tableInfo.tableId);if(!X||X.type!=="table")return;s.setIsDraggingOnGrapher(X,!0)}else{var te=v.getItemModel(J.sketch.id);if(!te||te.type!=="expression"&&te.type!=="image"||(te.type!=="image"&&g.setSelected(k,void 0),!te.formula||!te.formula.move_strategy))return;for(var H=te.formula.move_strategy,z=0;z<H.length;z++)if(H[z].type==="updateCoordinate")te.type==="image"?d.setIsDraggingOnGrapher(te,!0):te.type==="expression"&&i.setIsDraggingOnGrapher(te,!0);else if(H[z].type==="updateSlider"||H[z].type==="updateSliderNonlinear"){var B=v.getItemModel(H[z].id);if(!B||B.type!=="expression")continue;var F;if((F=te.type==="expression"?te.reconciledDragMode:void 0)===x.DragMode.NONE||z===0&&F===x.DragMode.Y||z===1&&F===x.DragMode.X)continue;i.setSliderDragging(B,!0)}}}function h(v,k){if(k.tableInfo){var J=v.getItemModel(k.tableInfo.tableId);return!J||J.type!=="table"?void 0:void s.setIsDraggingOnGrapher(J,!1)}var X=v.getItemModel(k.sketch.id);if(X&&(X.type==="expression"||X.type==="image")&&X.formula&&X.formula.move_strategy){var te=X.formula.move_strategy;if(te[0].type==="updateSliderNonlinear"){var H=v.getItemModel(te[0].id);if(!H||H.type!=="expression")return;i.setSliderDragging(H,!1)}for(var z=0;z<te.length;z++)if(X.type==="image"?d.setIsDraggingOnGrapher(X,!1):X.type==="expression"&&i.setIsDraggingOnGrapher(X,!1),te[z].type==="updateSlider"||te[z].type==="updateSliderNonlinear"){var H=v.getItemModel(te[z].id);if(!H||H.type!=="expression")continue;i.setSliderDragging(H,!1)}}}function p(v,k,J,X){var te=k.tableInfo.tableId,H=k.tableInfo.rowIndex,z=k.tableInfo.columnId,B=k.tableInfo.dragX,F=k.tableInfo.dragY,$=v.getItemModel(te);if($&&$.type==="table"){var re=s.getColumnModel($,z);if(re){var K=X.closestPointOnScreen(J),ue=X.pixelsToMath.mapRect(r(K,.5)),ie={x:t.default(n.shortestDecimalBetween(ue.left,ue.right)),y:t.default(n.shortestDecimalBetween(ue.top,ue.bottom))};if(B&&s.setCellLatex($,{row:H+1,column:0},ie.x),F){var Q=re.index;s.setCellLatex($,{row:H+1,column:Q},ie.y)}}}}function r(v,k){return{left:v.x-k,right:v.x+k,top:v.y+k,bottom:v.y-k}}function o(v,k,J){var X;X=v.assignment?l.identifierToLatex(v.assignment)+"=":"";var te=n.shortestDecimalBetween(k[0].min,k[0].max),H=n.shortestDecimalBetween(k[1].min,k[1].max),z=v.move_strategy[0].type==="updateCoordinate"&&m(0,J),B=v.move_strategy[1].type==="updateCoordinate"&&m(1,J);return X+"\\left("+(z?t.default(te):v.move_strategy[0].inputString)+","+(B?t.default(H):v.move_strategy[1].inputString)+"\\right)"}function m(v,k){switch(k){case x.DragMode.X:return v===0;case x.DragMode.Y:return v===1;case x.DragMode.XY:return!0;default:return!1}}function b(v,k,J){if(J[0]===0&&J[1]===0)return{x:k.x,y:k.y,width:v.width,height:v.height};var X=Math.cos(v.radianAngle),te=Math.sin(v.radianAngle),H=k.x-v.x,z=k.y-v.y;if(J[0]===0)return{x:v.x,y:v.y,width:v.width,height:2*J[1]*(X*z+te*H)};if(J[1]===0)return{x:v.x,y:v.y,width:2*J[0]*(X*H-te*z),height:v.height};var B=2*(v.width*J[0]*(X*H-te*z)+v.height*J[1]*(te*H+X*z))/(v.width*v.width+v.height*v.height);return{x:v.x,y:v.y,width:B*v.width,height:B*v.height}}function E(v,k,J){for(var X=[{x:k.left,y:k.bottom},{x:k.left,y:k.top},{x:k.right,y:k.top},{x:k.right,y:k.bottom}],te=["x","y","width","height"],H={x:1/0,y:1/0,width:1/0,height:1/0},z={x:-1/0,y:-1/0,width:-1/0,height:-1/0},B=0,F=X;B<F.length;B++)for(var $=F[B],re=b(v,$,J),K=0,ue=te;K<ue.length;K++){var ie=ue[K];H[ie]=Math.min(H[ie],re[ie]),z[ie]=Math.max(z[ie],re[ie])}return{min:H,max:z}}function M(v,k,J,X,te){var H=k.formula;if(!H||!H.move_strategy)return!1;var z=H.dimensions,B=J.scaleFactor,F=B[0]!==0&&B[1]!==0,$=te.closestPointOnScreen(X),re=te.pixelsToMath.mapRect(r($,F?.05:.5)),K=E(z,re,B),ue=te.mathToPixels.mapRect({left:z.x-.5*z.width,right:z.x+.5*z.width,top:z.y-.5*z.height,bottom:z.y+.5*z.height}),ie=Math.abs(ue.right-ue.left),Q=Math.abs(ue.bottom-ue.top),pe=te.mathToPixels.mapRect({left:K.min.x-.5*K.min.width,right:K.min.x+.5*K.min.width,top:K.min.y-.5*K.min.height,bottom:K.min.y+.5*K.min.height}),ee=Math.abs(pe.right-pe.left),ae=Math.abs(pe.bottom-pe.top);if(ee<ie&&ee<1||ae<Q&&ae<1)return!1;for(var le=["width","height","x","y"],me=!1,Ae=0;Ae<le.length;Ae++){var Be=le[Ae],Fe=H.move_strategy[Ae];switch(Fe.type){case"updateCoordinate":var Le=n.shortestDecimalBetween(K.min[Be],K.max[Be]),ze=t.default(Le);switch(Be){case"width":case"height":d.setMQAttribute(k,Be,ze);break;case"x":if(H.move_strategy[3].type==="updateCoordinate"){var We=n.shortestDecimalBetween(K.min.y,K.max.y),Z=t.default(We),C="\\left("+ze+","+Z+"\\right)";d.setMQAttribute(k,"center",C)}else{var C="\\left("+ze+","+H.move_strategy[3].inputString+"\\right)";d.setMQAttribute(k,"center",C)}break;case"y":if(H.move_strategy[2].type!=="updateCoordinate"){var C="\\left("+H.move_strategy[2].inputString+","+ze+"\\right)";d.setMQAttribute(k,"center",C)}break;default:return Be}me=!0;break;case"updateSlider":var oe=v.getItemModel(Fe.id);if(!oe||oe.type!=="expression")continue;var ge=Fe.coefficients[0],_e=Fe.coefficients[1],De=_e*K.min[Be]+ge,je=_e*K.max[Be]+ge,Ie=n.shortestDecimalBetween(De,je),Oe=oe.latex;i.adjustSliderByMovablePoint(oe,Ie),oe.latex!==Oe&&(me=!0)}}return me}function D(v,k,J,X,te){var H=k.formula;if(!H||!H.move_strategy)return!1;var z=k.reconciledDragMode||x.DragMode.NONE,B=!1,F=X.closestPointOnScreen(J),$=X.pixelsToMath.mapRect(r(F,.5)),re=[{min:$.left,max:$.right},{min:$.top,max:$.bottom}];H.move_strategy[0].type!=="updateCoordinate"&&H.move_strategy[1].type!=="updateCoordinate"||(i.setLatex(k,o(H,re,z)),B=!0);for(var K,ue,ie,Q,pe,ee,ae,le=0;le<2;le++)(function(){if(K=H.move_strategy[le],K.type!=="updateSlider"&&K.type!=="updateSliderNonlinear"||!m(le,z)||!(ue=v.getItemModel(K.id))||ue.type!=="expression")return"continue";if(ie=ue.latex,Q=te&&te[le])i.adjustSliderByKeyboard(ue,Q);else if(K.type==="updateSlider")pe=K.coefficients[0],ee=K.coefficients[1],ae=n.shortestDecimalBetween(ee*re[le].min+pe,ee*re[le].max+pe),i.adjustSliderByMovablePoint(ue,ae);else if(K.type==="updateSliderNonlinear"){K.compiled.fn||f.rehydrateCompiledFunction(K.compiled);var me=K.compiled.fn,Ae=function(C){var oe,ge=me(C),_e=ge[0],De=ge[1];return oe=X.mathToPixels.mapPoint({x:_e,y:De}),_e=oe.x,De=oe.y,[_e,De]},Be=K.initialValue,Fe=K.min,Le=K.max,ze=[F.x,F.y],We=u.findLocalClosestPointOnParametric(Ae,ze,Be,Fe,Le,1);if(We){var Z=n.shortestDecimalBetween(We[0],We[1]);Fe!==void 0&&Z<Fe&&(Z=Fe),Le!==void 0&&Z>Le&&(Z=Le),i.adjustSliderByMovablePoint(ue,Z)}}ue.latex!==ie&&(B=!0)})();return B}function A(v,k,J,X,te){if(k.tableInfo)return p(v,k,J,X),!0;var H=v.getItemModel(k.sketch.id);return!!H&&(H.type==="image"?M(v,H,k,J,X):H.type==="expression"&&D(v,H,J,X,te))}Object.defineProperty(c,"__esModule",{value:!0}),c.onStartMovingPoint=y,c.onStopMovingPoint=h,c.onMovePoint=A}),P("main/blank_state",["require","exports","core/graphing-calc/migrate-state"],function(S,c,x){Object.defineProperty(c,"__esModule",{value:!0}),c.BLANK_STATE={version:x.currentVersion,randomSeed:"",graph:{viewport:{xmin:-10,ymin:-13.25,xmax:10,ymax:13.25}},expressions:{list:[{id:"1",type:"expression"}]}},c.default=c.BLANK_STATE}),P("expressions/measure-expressions",["require","exports","jquery"],function(S,c,x){function t(m){for(var b=[],E=m.getAllItemModels(),M=0,D=E;M<D.length;M++){var A=D[M],v=m.getItemRootNodeById(A.id);v&&b.push(v)}return b}function l(m){for(var b=m.getAllItemModels(),E=b.length-1;E>=0;E--){var M=b[E];if(M.dcgView)return M.id}}function n(m,b){for(var E=t(m),M=0,D=E.length-1;M<=D;){var A=M+Math.floor((D-M)/2),v=E[A],k=v.getBoundingClientRect();if(k.top>b)D=A-1;else{if(!(k.bottom<b))return v;M=A+1}}}function i(m,b){for(var E,M=t(m),D=0,A=M.length-1;D<=A;){var v=D+Math.floor((A-D)/2),k=M[v];k.getBoundingClientRect().top>b?(A=v-1,E=k):D=v+1}return E}function s(m,b){var E=h(m);if(E){if(b){var M=m.getItemRootNodeById(b);if(M){var D=M.getBoundingClientRect();if(D.height>0&&D.top<=E.top&&D.bottom>=E.top)return b}}var A=n(m,E.top);return A?x(A).attr("expr-id"):d(m)}}function g(m,b){var E=h(m);if(E){var M=l(m);if(M){if(b){var D=m.getItemRootNodeById(b);if(D){var A=D.getBoundingClientRect();if(A.height>0&&A.top<=E.bottom&&A.bottom>=E.bottom||b===M&&A.bottom<=E.bottom)return b}}var v=n(m,E.bottom);return v&&x(v).attr("expr-id")||M}}}function d(m){var b=h(m);if(b){var E=i(m,b.top-2);if(E)return x(E).attr("expr-id")}}function u(m){return m.find$(".dcg-exppanel")[0]}function f(m){var b=u(m);if(b)return x(b)}function y(m){var b=m.find$(".dcg-exppanel-outer")[0];if(b)return b.getBoundingClientRect()}function h(m){var b=u(m);if(b)return b.getBoundingClientRect()}function p(m){var b=u(m);if(b){var E=b.getBoundingClientRect(),M=b.scrollTop;return E.top-M}}function r(m){var b=m.find$(".dcg-expressionlist");if(b.length===1)return b.height()}function o(m){var b=f(m);return b?b.find(".dcg-drag-container").height():0}Object.defineProperty(c,"__esModule",{value:!0}),c.getFirstVisibleItemId=s,c.getLastVisibleItemId=g,c.getFirstFullyVisibleItemId=d,c.getExppanelElt=u,c.getExppanelSelector=f,c.getOuterExppanelRect=y,c.getExppanelRect=h,c.getExppanelScrolledTop=p,c.getExpListHeight=r,c.getDragContainerHeight=o}),P("animation-frame-src",["require"],function(S){var c=0,x=function(t,l){var n=new Date().getTime(),i=Math.max(0,16-(n-c)),s=window.setTimeout(function(){t(n+i)},i);return c=n+i,s};return window.requestAnimationFrame&&window.cancelAnimationFrame?{requestAnimationFrame:window.requestAnimationFrame.bind(window),cancelAnimationFrame:window.cancelAnimationFrame.bind(window)}:{requestAnimationFrame:x,cancelAnimationFrame:window.clearTimeout.bind(window)}}),P("lib/animation-frame",["require","exports","animation-frame-src"],function(S,c,x){Object.defineProperty(c,"__esModule",{value:!0}),c.requestAnimationFrame=x.requestAnimationFrame,c.cancelAnimationFrame=x.cancelAnimationFrame}),P("jquery.handleevent",["require","jquery"],function(S){var c=S("jquery");c.Event.prototype.wasHandled=function(x){x=x||"_*_";var t=this.originalEvent,l=t&&t.handledBy;if(l&&l[x])return!0;if(x!=="_*_")return!1;var n=c(this.target).closest("[handleEvent]");return!(!n.length||n[0]===this.currentTarget)&&n.attr("handleEvent")!=="false"},c.Event.prototype.handle=function(x){x=x||"_*_";var t=this.originalEvent;if(t){var l=t.handledBy;l||(l=t.handledBy={}),l[x]=!0}}}),P("expressions/dragdrop_expressions",["require","exports","tslib","jquery","expressions/measure-expressions","lib/animation-frame","jquery.handleevent"],function(S,c,x,t,l,n){Object.defineProperty(c,"__esModule",{value:!0});var i=(function(){function s(g){this.active=!1,this.controller=g;var d=l.getExppanelSelector(g);d&&(this.$exppanel=d)}return s.prototype.startDragging=function(g){this.active=!0,this.mouseY=g,this.setupEventListeners()},s.prototype.applyDrag=function(){var g=this.controller.getListModel(),d=g.dragState;if(d){this.scheduleUpdateScroll();var u=this.measureDOM(d);if(u){var f=u.floatingPreviewRect,y=this.controller.getItemModel(d.firstItemId);if(y){for(var h=y.index,p=0,r=u.visibleRects;p<r.length;p++){var o=r[p],m=o.id,b=o.rect;if(m!==y.id){var E=this.controller.getItemModel(m);if(!E)return;if(E.index<y.index){if(f.top<b.top+b.height/2){h=E.index;break}}else f.bottom>b.top+b.height/2&&(h=E.index,E.type==="folder"&&E.collapsed&&(h+=this.controller.getNumberOfItemsInFolder(E.id)))}}var M,D;h>y.index?(M=h,D=h+1):h<y.index?(M=h-1,D=h):(M=h-1,D=h+1);var A=this.controller.getItemModelByIndex(M),v=this.controller.getItemModelByIndex(D),k="",J="";A&&(k=A.type==="folder"?A.id:A.folderId),v&&(J=v.type==="folder"?v.id:v.folderId);var X="";return k&&(J===k?y.type==="folder"?h=y.index:X=k:y.type!=="folder"&&this.isPreviewTopContainedInFolder(u,k)&&(X=k)),{dragState:x.__assign({},u.dragState),newIndex:h,folderId:X}}}}},s.prototype.measureDOM=function(g){var d=l.getExppanelScrolledTop(this.controller),u=l.getExpListHeight(this.controller);if(d!==void 0&&u!==void 0){var f=l.getDragContainerHeight(this.controller),y=g.mouseY-g.grabOffset+2,h=y-d;h=Math.max(h,-f/2),h=Math.min(h,u-f);var p={top:y,bottom:y+f,height:f},r=this.controller.findFirstVisibleItem(),o=this.controller.findLastVisibleItem();if(r&&o){for(var m=[],b=r.index;b<=o.index;b++){var E=this.controller.getItemModelByIndex(b);if(E){var M=this.controller.getItemRootNodeById(E.id);if(M&&E.id!==g.firstItemId){var D=M.getBoundingClientRect();m.push({id:E.id,rect:D})}}}if(m.length!==0)return{dragState:x.__assign(x.__assign({},g),{itemTop:h}),floatingPreviewRect:p,visibleRects:m}}}},s.prototype.isPreviewTopContainedInFolder=function(g,d){for(var u=g.visibleRects,f=g.floatingPreviewRect,y=0,h=u;y<h.length;y++){var p=h[y],r=p.id,o=p.rect;if(o.top<=f.top&&o.bottom>=f.top){var m=this.controller.getItemModel(r);if(!m)return!1;if(m.type==="folder"&&m.id===d||m.type!=="folder"&&m.folderId===d)return!0}}return!1},s.prototype.scheduleUpdateScroll=function(){var g=this;this.updateScrollScheduled||(this.updateScrollScheduled=!0,n.requestAnimationFrame(function(){g.updateScroll(),g.updateScrollScheduled=!1}))},s.prototype.stop=function(){this.active=!1,this.tearDownEventListeners(),this.controller.dispatch({type:"stop-dragdrop"})},s.prototype.setupEventListeners=function(){var g=this;t(document).on("dcg-tapmove.dragdrop",function(d){g.mouseY=d.changedTouches[0].clientY,g.controller.dispatch({type:"update-dragdrop",mouseY:g.mouseY})}),t(document).on("dcg-tapend.dragdrop",function(d){g.stop(),d.handle("dragdrop")})},s.prototype.tearDownEventListeners=function(){t(document).off(".dragdrop")},s.prototype.updateScroll=function(){if(this.active){var g=this.$exppanel[0].getBoundingClientRect(),d=0;d=Math.min(d,this.mouseY-g.top),d=Math.max(d,this.mouseY-g.bottom+30),d=d*g.height/900,d&&this.$exppanel.scrollTop(this.$exppanel.scrollTop()+d)}},s})();c.default=i}),P("keypad/mq-commands",["require","exports"],function(S,c){function x(l,n){t[n](l)}Object.defineProperty(c,"__esModule",{value:!0});var t={loga:function(l){l.write("\\log_{}"),l.typedText("("),l.keystroke("Left"),l.keystroke("Down")},nthroot:function(l){l.write("\\sqrt[]{}"),l.keystroke("Left"),l.keystroke("Left")},ddx:function(l){l.write("\\frac{d}{dx}")},arcsin:function(l){l.write("sin^{-1}"),l.typedText("(")},arccos:function(l){l.write("cos^{-1}"),l.typedText("(")},arctan:function(l){l.write("tan^{-1}"),l.typedText("(")},arcsec:function(l){l.write("sec^{-1}"),l.typedText("(")},arccsc:function(l){l.write("csc^{-1}"),l.typedText("(")},arccot:function(l){l.write("cot^{-1}"),l.typedText("(")},"A^T":function(l){l.typedText("^T"),l.keystroke("Right")},"A^-1":function(l){l.typedText("^-1"),l.keystroke("Right")},"A^2":function(l){l.typedText("^2"),l.keystroke("Right")},"a^2":function(l){l.typedText("^2"),l.keystroke("Right")},"a^3":function(l){l.typedText("^3"),l.keystroke("Right")}};c.execute=x}),P("main/controller",["require","exports","main/propagate_selection","tslib","scroll_helpers","browser","core/lib/label","underscore","lib/i18n","flux","core/types/opacity","core/lib/dragmode","core/types/styles","lib/conditional_blur","core/lib/deepCopy","core/lib/number-to-latex","lib/state-stack","graphing/viewport","core/graphing-calc/migrate-state","core/math/expression-types","core/lib/color-helpers","graphing-calc/models/expression","core/graphing-calc/json/expression","graphing-calc/models/expression","graphing-calc/models/table","graphing-calc/models/image","graphing-calc/models/folder","graphing-calc/models/text","graphing-calc/models/list","graphing-calc/models/abstract-item","graphing-calc/models/focus","graphing-calc/actions/keyboard","main/expression-zoom-helpers","core/math/evaluate-single-expression","./layout-model","./settings-view-model","jquery","bugsnag","dcgview-helpers/mathquill-braille-wrapper","expressions/list_move_controller","./blank_state","dcgview-helpers/mathquill-view","expressions/measure-expressions","expressions/dragdrop_expressions","keypad/mq-commands","core/lib/random-seed"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r,o,m,b,E,M,D,A,v,k,J,X,te,H,z,B,F,$,re,K,ue,ie,Q,pe,ee,ae,le,me,Ae,Be,Fe){function Le(Z){return Z&&t.__assign(t.__assign({},Z),{wasCompleteSetState:void 0,layoutModel:void 0,settingsViewModel:void 0})}function ze(Z,C){return s.isEqual(Le(Z),Le(C))}Object.defineProperty(c,"__esModule",{value:!0});var We=(function(){function Z(C){var oe=this;this.__nextItemId=0,this.__pendingImageUploads={},this.__waitingForClickableObjectWorkerResponse=!1,this.nextSubscription=0,this.subscriptions={},this._queuedCallbacks=[],this._hasUnsavedChanges=!1,this.shouldScrollSelectedItemIntoViewAfterDispatch=!1,this.lastParsableObjects={},this.toastData={},this.t=function(ge,_e){var De=oe.graphSettings.config.language;return g.t(ge,_e,De)},this.raw=function(ge,_e){return g.raw(ge,_e)},this.unpack=function(ge){var _e=oe.graphSettings.config.language;return g.unpack(ge,_e)},this.dispatch=function(ge){if(ge.type==="blur-focus-location"&&oe.dispatcher.isDispatching())return void oe.runAfterDispatch(function(){oe.dispatch(ge)});if(ge.type==="set-focus-location"&&oe.dispatcher.isDispatching())return void oe.runAfterDispatch(function(){oe.dispatch(ge)});if(ge.type==="tick"&&oe.dispatcher.isDispatching())return void oe.runAfterDispatch(function(){oe.dispatch(ge)});ge.type==="tick"||(ge.type==="process-graph-data"?Q.leaveBreadcrumb("dispatch::"+oe.bugsnagContext,{type:ge.type}):Q.leaveBreadcrumb("dispatch::"+oe.bugsnagContext,ge)),oe.dispatcher.isDispatching()&&Q.leaveBreadcrumb("dispatch-in-dispatch::"+oe.bugsnagContext,{type:ge.type}),oe.dispatcher.dispatch(ge),oe.onEventsEmitted&&oe.onEventsEmitted(oe.enqueuedEvents);for(var _e;_e=oe._queuedCallbacks.shift();)_e()},this._requiresTickNextFrame=!1,this.updateViews=function(){for(var ge in oe.subscriptions)oe.subscriptions[ge]()},this.bugsnagContext="",this.inPrintMode=!1,this.lastInfiniteScrollFirstDOM=void 0,this.lastInfiniteScrollLastDOM=void 0,this.hasDispatchSinceLastInfiniteScrollUpdate=!1,this.stateStack=new o.default,this.isCurrentlyDoingSetState=!1,this.graphSettings=C,this.listModel=H.init(this),this.layoutModel=K.defaultLayoutModel(this.graphSettings.config),this.layoutMeasurements={width:0,height:0},this.settingsViewModel=ue.defaultSettingsViewModel(),this.imageRetryState={lastAttemptTime:0,attempts:0},this.setupDispatcher()}return Z.prototype.hasUnsavedChanges=function(){return this._hasUnsavedChanges},Z.prototype.hasVisibleAndUndoableToast=function(){return typeof this.toastData.undoCallback=="function"},Z.prototype.getToastData=function(){return this.toastData},Z.prototype.toastUndo=function(){typeof this.toastData.undoCallback=="function"&&(this.toastData.undoCallback(),this.dispatch({type:"toast/close"}))},Z.prototype.runAfterDispatch=function(C){this.dispatcher.isDispatching()?this._queuedCallbacks.push(C):C()},Z.prototype.enqueueEvent=function(C){this.enqueuedEvents[C]=!0},Z.prototype.setRandomSeed=function(C){this.graphSettings.setProperty("randomSeed",C)},Z.prototype.getRandomSeed=function(){return this.graphSettings.randomSeed},Z.prototype.shouldDispatchTickNextFrame=function(){return!!this._requiresTickNextFrame},Z.prototype.markTickRequiredNextFrame=function(){this._requiresTickNextFrame=!0},Z.prototype.setupDispatcher=function(){var C=this;this.dispatcher=new d.Dispatcher,this.dispatcher.register(function(oe){var ge=C.getSelectedItem(),_e=C.getFocusLocation();C.shouldScrollSelectedItemIntoViewAfterDispatch=!1;var De;C.enqueuedEvents={change:!1,graphReset:!1,clearUnsavedChanges:!1,openDrawer:!1,userMovedPoint:!1,userClickedObject:!1,userEditedLabel:!1},oe.type==="tick"&&(C._requiresTickNextFrame=!1),C.isCurrentlyDoingSetState=!1,C.handleDispatchedAction(oe),C.updateTheComputedWorld();var je=C.getImageToRetry();(C.getPlayingSliders().length>0||C.hasAnyTableThatRequiresTicks()||C.isDragDropActive()||je)&&C.markTickRequiredNextFrame(),je&&C.retryLoadingFailedImage(je),oe.type==="undo"||oe.type==="redo"||C.isDragDropActive()||C.commitUndoRedoSynchronously(oe.type),C.requestParseForAllItems(),oe.type==="clickable-item-clicked"&&(C.__waitingForClickableObjectWorkerResponse=!0,C.evaluator.notifyWhenSynced(function(){C.__waitingForClickableObjectWorkerResponse=!1})),C.isCurrentlyDoingSetState=!1,C.enqueuedEvents.change&&C.grapher&&C.grapher.markLabelsDirty(),C.enqueuedEvents.clearUnsavedChanges?C._hasUnsavedChanges=!1:C.enqueuedEvents.change&&(C._hasUnsavedChanges=!0);var Ie=C.getSelectedItem();Ie?ge&&ge.guid===Ie.guid||(C.shouldScrollSelectedItemIntoViewAfterDispatch=!0):C.shouldScrollSelectedItemIntoViewAfterDispatch=!1;var Oe=C.getFocusLocation();Oe&&!s.isEqual(Oe,_e)&&C.getFocusedItem()==Ie&&(C.shouldScrollSelectedItemIntoViewAfterDispatch=!0),_e&&ge&&ge.type==="table"&&_e.type==="table"&&(!Oe||Oe.type!=="table"||_e.id!==Oe.id)&&ge.isExpanded&&(k.setExpanded(ge,!1),Oe||(De=ge)),Oe&&Ie&&Ie.type==="table"&&k.updateIsCollapsedByFocusLocation(Ie),C.updateRenderShellsBeforePaint(),C.updateViews(),De?C.scrollItemIntoView(De):C.shouldScrollSelectedItemIntoViewAfterDispatch&&C.scrollSelectedItemIntoView(),C.updateDragDrop(),C.updateRenderShellsAfterDispatch()})},Z.prototype.handleDispatchedAction=function(C){var oe=this;switch(C.type){case"api-method-called":break;case"undo":this.undo();break;case"redo":this.redo();break;case"clear-undoredo-history":this.clearUndoRedoHistory();break;case"on-special-key-pressed":C.key==="Enter"?F.onEnterPressed(this):C.key==="Up"?F.onUpPressed(this):C.key==="Down"?F.onDownPressed(this):C.key==="Backspace"?F.onBackspacePressed(this):C.key==="Delete"&&F.onDeletePressed(this);break;case"select-previous-expression":H.selectPrevItem(this.listModel);break;case"select-next-expression":H.selectNextItem(this.listModel);break;case"upward-delete-selected-expression":F.upwardDeleteSelectedExpression(this);break;case"downward-delete-selected-expression":F.downwardDeleteSelectedExpression(this);break;case"table-show-more-rows":var j=this.getItemModel(C.id);if(!j||j.type!=="table")return;var ge=k.getCollapsedRange(j);if(!ge)return;H.setSelected(this.listModel,j),k.setExpanded(j,!0),B.setFocusLocation(this,{type:"table",id:j.id,location:{row:ge.min,column:0}});break;case"navigate-table-by-key":F.navigateTableByKey(this,C.id,C.key);break;case"delete-item-and-animate-out":this._deleteItemAndAnimateOut(C.id,C.setFocusAfterDelete);break;case"finish-deleting-item-after-animation":this._finishDeletingItemAfterAnimation(C.id,C.setFocusAfterDelete);break;case"expression-zoom-fit":this._expressionZoomFit(C.id);break;case"set-expression-properties-from-api":this._setExpressionPropertiesFromAPI(C.id,C.properties);break;case"add-item-to-end-from-api":this._addItemToEndFromAPI(this.createItemModel(C.state));break;case"duplicate-expression":var _e=this.getItemModel(C.id);if(!_e||_e.type!=="expression")return;var De=v.getState(_e,{stripDefaults:!1}),je=this.createItemModel(t.__assign(t.__assign({},De),{id:this.generateId()}));this._toplevelInsertItemAt(_e.index+1,je,!1,_e.folderId);break;case"insert-item-at-index":var Ie=this.createItemModel(C.state);this._toplevelInsertItemAt(C.index,Ie,C.focus,C.folderId);break;case"new-expression-at-end":var Oe=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});this.setEditListMode(!1),H.insertItemAtEnd(this.listModel,Oe),B.moveFocusToItem(this,Oe.id);break;case"new-expression":var N=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});this.setEditListMode(!1),this._toplevelNewItemAtSelection(N,{shouldFocus:!0}),this._closeAddExpression();break;case"new-text":var Pe=this.createItemModel({id:this.generateId(),type:"text"});this._toplevelNewItemAtSelection(Pe,{shouldFocus:!0}),this._closeAddExpression();break;case"new-folder":var Xe=this.createItemModel({type:"folder",id:this.generateId()});this._toplevelNewItemAtSelection(Xe,{shouldFocus:!0}),this._closeAddExpression();break;case"new-images":this._uploadImagesAndWaitForThemToLoad({files:C.files}),this._closeAddExpression();break;case"change-image":this._uploadImagesAndWaitForThemToLoad({files:C.files,id:C.id});break;case"new-table":var $e=this._createTableItem();this._toplevelNewItemAtSelection($e,{shouldFocus:!0}),this._closeAddExpression();break;case"paste-table":this._pasteTable(C.data);break;case"insert-several-expressions":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,this._insertSeveralExpressions(C.expressions);break;case"append-number-list":this._appendNumberList(C.latex);break;case"remove-item-by-id":H.removeItemById(this.listModel,C.id);break;case"replace-item-at-index":var ht=this.createItemModel(C.state);this._toplevelReplaceItemAt(C.index,ht,C.focus);break;case"create-sliders-for-item":this.createSlidersForItem(C.id,C.variables);break;case"start-dragdrop":var j=this.getItemModel(C.id);if(!j)return;var ye=this.getItemRootNodeById(j.id);if(!ye)return;var Ue=ye.getBoundingClientRect();H.setSelected(this.listModel,void 0);var we=C.grabY-Ue.top,Te=!1,qe=1;j.type==="folder"&&(qe+=this.getNumberOfItemsInFolder(j.id),j.collapsed||(Te=!0,X.setCollapsed(j,!0))),H.setDragState(this.listModel,{firstItemId:j.id,numberOfItems:qe,expandFolder:Te,grabOffset:we,mouseY:C.mouseY,itemTop:0}),this.dragdrop_expressions.startDragging(C.mouseY);break;case"update-dragdrop":var He=this.listModel.dragState;if(!He)return;H.setDragState(this.listModel,t.__assign(t.__assign({},He),{mouseY:C.mouseY}));break;case"stop-dragdrop":var He=this.listModel.dragState;if(!He)return;var sn=this.getItemModel(He.firstItemId);if(!sn)return;H.setSelected(this.listModel,sn),sn.type==="folder"&&He.expandFolder&&X.setCollapsed(sn,!1),H.setDragState(this.listModel,void 0);break;case"set-selected-id":var Se=this.getItemModel(C.id);H.setSelected(this.listModel,Se);break;case"set-selected-index":var Ce=this.getItemModelByIndex(C.index);H.setSelected(this.listModel,Ce);break;case"set-none-selected":H.setSelected(this.listModel,void 0);break;case"set-focus-location":(C.location?C.location.type:"")==="table"&&(this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{inEditListMode:!1})),B.setFocusLocation(this,C.location);break;case"move-focus-to-item":B.moveFocusToItem(this,C.id,C.where);break;case"blur-focus-location":this.isFocusLocationFocused(C.location)&&B.setFocusLocation(this,void 0);break;case"set-folder-collapsed":var j=this.getItemModel(C.id);if(!j||j.type!=="folder")return;X.setCollapsed(j,C.isCollapsed);break;case"set-item-secret":var Re=this.getItemModel(C.id);if(!Re)return;z.setSecret(Re,C.isSecret);break;case"set-tablecolumn-color":var j=this.getItemModel(C.tableId);if(!j||j.type!=="table")return;k.setColumnColor(j,C.columnId,C.color);break;case"set-show-cdf":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setShowCDF(j,C.showCDF);break;case"set-cdf-min":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setCDFMin(j,C.latex);break;case"set-cdf-max":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setCDFMax(j,C.latex);break;case"toggle-item-hidden":this._toggleItemHidden(C.id);break;case"toggle-tablecolumn-hidden":this._toggleTableColumnHidden(C.tableId,C.columnId);break;case"toggle-item-settings-menu":this.listModel.openItemMenu&&C.menu.model===this.listModel.openItemMenu.model?this.listModel.openItemMenu=void 0:(this.listModel.openItemMenu=C.menu,C.menu.focusFirstOption&&B.setFocusLocation(this,{type:"expression-menu",id:C.menu.model.id,location:"start"}));break;case"close-item-settings-menu":this.listModel.openItemMenu=void 0;break;case"toggle-fraction-evaluation":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;var Ve=v.shouldEvaluationDisplayAsFraction(j);v.setEvaluationAsFraction(j,!Ve);break;case"set-item-label":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setLabel(j,C.label),this.enqueueEvent("userEditedLabel");break;case"set-item-showlabel":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setShowLabel(j,C.showLabel),C.showLabel||(v.setInteractiveLabel(j,!1),v.setEditableLabelMode(j,A.EditableLabelMode.None));break;case"set-item-color":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setColor(j,C.color);break;case"set-item-fill":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setFill(j,C.fill),this._setItemHidden(j.id,v.areAllVisibilityPropsOff(j));break;case"set-image-opacity":var j=this.getItemModel(C.id);if(!j||j.type!=="image")return;J.setOpacity(j,C.opacity),this._setItemHidden(j.id,!1);break;case"set-image-in-foreground":var j=this.getItemModel(C.id);if(!j||j.type!=="image")return;J.setForeground(j,C.foreground);break;case"image-upload-error":this.__pendingImageUploads[C.token]&&(delete this.__pendingImageUploads[C.token],this._showToast({message:this.t("Image upload failed.")}));break;case"image-upload-success":if(this.__pendingImageUploads[C.token])if(delete this.__pendingImageUploads[C.token],C.id){var j=this.getItemModel(C.id);j&&j.type==="image"&&J.setImageURL(j,C.url)}else{var rt=this.createItemModel({type:"image",id:this.generateId(),width:C.width,height:C.height,image_url:C.url,name:C.name});this._toplevelNewItemAtSelection(rt,{shouldFocus:!1})}this.isUploadingImages()||(this.toastData={});break;case"image-load-success":var rt=this.getItemModel(C.id);if(!rt||rt.type!=="image")return;J.setLoadStatus(rt,"loaded"),this.imageRetryState={lastAttemptTime:0,attempts:0};break;case"image-load-error":var rt=this.getItemModel(C.id);if(!rt||rt.type!=="image")return;J.setLoadStatus(rt,"failed");break;case"image-retry-loading":var rt=this.getItemModel(C.id);if(!rt||rt.type!=="image")return;J.retryLoading(rt);break;case"set-item-dragmode":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setDragMode(j,C.dragMode),C.dragMode!==f.DragMode.NONE&&this._setItemHidden(C.id,!1);break;case"set-tablecolumn-dragmode":var j=this.getItemModel(C.tableId);if(!j||j.type!=="table")return;k.setColumnDragMode(j,C.columnId,C.dragMode),C.dragMode!==f.DragMode.NONE&&this._setTableColumnHidden(C.tableId,C.columnId,!1);break;case"set-tablecolumn-points":var j=this.getItemModel(C.tableId);if(!j||j.type!=="table")return;k.setColumnPoints(j,C.columnId,C.bool),this._setTableColumnHidden(C.tableId,C.columnId,k.shouldHideColumn(j,C.columnId));break;case"set-tablecolumn-lines":var j=this.getItemModel(C.tableId);if(!j||j.type!=="table")return;k.setColumnLines(j,C.columnId,C.bool),this._setTableColumnHidden(C.tableId,C.columnId,k.shouldHideColumn(j,C.columnId));break;case"set-tablecolumn-linestyle":var j=this.getItemModel(C.tableId);if(!j||j.type!=="table")return;k.setColumnLineStyle(j,C.columnId,C.lineStyle),this._setTableColumnHidden(C.tableId,C.columnId,!1);break;case"set-tablecolumn-pointstyle":var j=this.getItemModel(C.tableId);if(!j||j.type!=="table")return;k.setColumnPointStyle(j,C.columnId,C.pointStyle),this._setTableColumnHidden(C.tableId,C.columnId,!1);break;case"set-item-points":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setPoints(j,C.points),this._setItemHidden(C.id,v.areAllVisibilityPropsOff(j)),C.points||j.dragMode===f.DragMode.NONE||v.setDragMode(j,f.DragMode.NONE);break;case"set-item-pointstyle":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setPointStyle(j,C.pointStyle),this._setItemHidden(C.id,!1);break;case"set-item-lines":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setLines(j,C.lines),this._setItemHidden(C.id,v.areAllVisibilityPropsOff(j));break;case"set-item-linestyle":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setLineStyle(j,C.lineStyle),this._setItemHidden(C.id,!1);break;case"set-item-label-dropdown-open":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setLabelDropdownOpen(j,C.open);break;case"set-item-fillopacity":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setFillOpacity(j,C.fillOpacity),this._setItemHidden(C.id,!1);break;case"set-item-linewidth":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setLineWidth(j,C.lineWidth),this._setItemHidden(C.id,!1);break;case"set-item-labelSize":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setLabelSize(j,C.labelSize);break;case"set-item-label-orientation":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setLabelOrientation(j,C.labelOrientation);break;case"set-item-vertical-label":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setVerticalLabel(j,C.verticalLabel);break;case"set-suppress-text-outline":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setSuppressTextOutline(j,C.suppressTextOutline);break;case"set-item-interactive-label":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setInteractiveLabel(j,C.interactiveLabel),C.interactiveLabel&&v.setEditableLabelMode(j,A.EditableLabelMode.None);break;case"set-item-editable-label-mode":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;j.editableLabelMode!==A.EditableLabelMode.None&&C.editableLabelMode!==A.EditableLabelMode.None&&j.editableLabelMode!==C.editableLabelMode&&v.setLabel(j,""),v.setEditableLabelMode(j,C.editableLabelMode),C.editableLabelMode!==A.EditableLabelMode.None&&v.setInteractiveLabel(j,!1);break;case"plot-residuals":var at=this.getItemModel(C.id);if(!at||at.type!=="expression")return;var yt=at.formula.regression,Pt=yt.residualSuggestionId;if(!Pt)return;var vt=this.getItemModel(Pt);if(!vt)return;k.insertBlankColumn(vt,vt.columnModels.length-1,{id:this.generateId(),latex:i.identifierToLatex(yt.residualVariable),color:this.getNextColor()});break;case"toggle-logmode":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;var At=j.isLogModeRegression;v.setLogMode(j,!At);break;case"set-item-latex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var Ut=this.getItemModel(C.id);if(!Ut||Ut.type!=="expression")return;var Dt=C.latex;if(Dt==='"'&&this.areNotesEnabled()){var on=this.createItemModel({id:this.generateId(),type:"text"});this._toplevelReplaceItemAt(Ut.index,on,!0)}else if(Dt==="")v.blankOutExpressionAfterClearingLatex(Ut);else if(Dt==="folder"&&this.areFoldersEnabled()){var St=this.createItemModel({id:this.generateId(),type:"folder"});this._toplevelReplaceItemAt(Ut.index,St,!0)}else if(Dt==="table"){var Xt=this._createTableItem();this._toplevelReplaceItemAt(Ut.index,Xt,!0)}else Dt==="betchacant"?this.runAfterDispatch(function(){oe.triggerBetchacant&&oe.triggerBetchacant()}):v.setLatex(Ut,Dt);break;case"set-visualization-prop":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setVizProp(j,C.prop,C.latex);break;case"set-clickableinfo-prop":var j=this.getItemModel(C.id);if(!j)return;j.type==="expression"?v.setClickableInfoProp(j,C.prop,C.value):j.type==="image"&&J.setClickableInfoProp(j,C.prop,C.value),C.value===!0&&(B.setFocusLocation(this,{type:"clickableinfo-prop",id:C.id,location:"assignment"}),this.listModel.openItemMenu=void 0);break;case"set-folder-title":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var j=this.getItemModel(C.id);if(!j||j.type!=="folder")return;X.setTitle(j,C.title);break;case"set-image-mq-attribute":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var j=this.getItemModel(C.id);if(!j||j.type!=="image")return;J.setMQAttribute(j,C.attribute,C.latex);break;case"set-image-name":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var j=this.getItemModel(C.id);if(!j||j.type!=="image")return;J.setName(j,C.name);break;case"set-graph-settings":for(var qt in C)qt!=="type"&&this.graphSettings.setProperty(qt,C[qt]);break;case"set-polar-domain-minlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setPolarDomainMin(j,C.latex);break;case"set-polar-domain-maxlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setPolarDomainMax(j,C.latex);break;case"set-parametric-domain-minlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setParametricDomainMin(j,C.latex);break;case"set-parametric-domain-maxlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setParametricDomainMax(j,C.latex);break;case"set-note-text":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var j=this.getItemModel(C.id);if(!j||j.type!=="text")return;te.setText(j,C.text);break;case"set-edit-list-mode":var j=H.getSelected(this.listModel);if(this.setEditListMode(C.isEditListMode),C.focusExpressionList){if(j===void 0&&(j=this.getItemModelByIndex(0)),!j)return;B.moveFocusToItem(this,j.id,j.type==="table"&&C.isEditListMode?"container":"start")}else H.setSelected(this.listModel,void 0),B.setFocusLocation(this,void 0);break;case"set-projector-mode":this.getGraphSettings().config.setProperty("projectorMode",C.value);break;case"set-inverted-colors":this.getGraphSettings().config.setProperty("invertedColors",C.value);break;case"set-tablecell-latex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var j=this.getItemModel(C.tableId);if(!j||j.type!=="table")return;k.setCellLatex(j,C.cell,C.latex);break;case"set-state":this.externalSetState(C.state,C.opts);break;case"set-blank":this.externalSetState(this.getBlankState(),C.opts);break;case"clear-unsaved-changes":this.enqueueEvent("clearUnsavedChanges");break;case"reset-graph":var bn=this.getState();this.externalSetState(this.graphSettings.defaultState,{}),this._showToast({message:this.t("Graph reset."),undoCallback:function(){return oe.dispatch({type:"set-state",state:bn,opts:{}})}}),this.enqueueEvent("graphReset");break;case"clear-graph":if(this.triggerClearGraph)return void this.runAfterDispatch(function(){return oe.triggerClearGraph()});var Fn=this.getState();this.externalSetState(this.getBlankState(),{});var sn=this.getItemModelByIndex(0);sn&&B.moveFocusToItem(this,sn.id,"end"),this._showToast({message:this.t("Graph cleared."),undoCallback:function(){return oe.dispatch({type:"set-state",state:Fn,opts:{}})}}),this.enqueueEvent("graphReset");break;case"on-evaluator-changes":H.onEvaluatorFormulaUpdates(this.listModel,C.changes);break;case"process-graph-data":var tn;for(tn in C.graphData.addedGraphs){var se=C.graphData.addedGraphs[tn];this.grapher&&this.grapher.updateSketch(tn,se),H.onGraphComputed(this.listModel,tn,se)}for(tn in C.graphData.removedGraphs)this.grapher&&this.grapher.hide(tn);for(tn in C.graphData.intersections)this.grapher&&this.grapher.type==="2d"&&this.grapher.updateIntersections(tn,C.graphData.intersections[tn]);this.grapher&&this.grapher.poiController&&this.grapher.poiController.handleTraceUpdate();break;case"add-helper-expression":H.addHelperExpression(this.listModel,C.state);break;case"tick":this._tickSliders(C.time);break;case"adjust-slider-by-keyboard":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.adjustSliderByKeyboard(j,C.adjustment);break;case"adjust-slider-by-dragging-thumb":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.adjustSliderByDraggingThumb(j,C.target);break;case"set-slider-minlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setSliderMin(j,C.latex);break;case"set-slider-maxlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setSliderMax(j,C.latex);break;case"set-slider-steplatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setSliderStep(j,C.latex);break;case"set-slider-dragging":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setSliderDragging(j,C.dragging);break;case"play-slider-from-min":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;var he=v.getSliderMin(j);if(isNaN(he))return;var U=v.computeNewSliderLatex(j.latex,he);v.setSliderIsPlaying(j,!1),v.setLatex(j,U),v.setSliderIsPlaying(j,!0);break;case"set-slider-isplaying":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setSliderIsPlaying(j,C.isPlaying);break;case"set-slider-loopmode":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setSliderLoopMode(j,C.loopMode);break;case"set-slider-animationperiod":var j=this.getItemModel(C.id);if(!j||j.type!=="expression")return;v.setSliderAnimationPeriod(j,C.animationPeriod);break;case"show-expressions-list":this._showExpressions();break;case"hide-expressions-list":this._hideExpressions();break;case"open-drawer":this.enqueueEvent("openDrawer");break;case"re-randomize":this.setRandomSeed(Fe.default());break;case"resize-exp-list":this._setExpListWidth(C.expListWidth);break;case"toast/show":this._showToast(C.toast);break;case"toast/close":var V=this.toastData.onHide;V&&this.runAfterDispatch(V),this.toastData={};break;case"toast/undo":var O=this.toastData.undoCallback;O&&this.runAfterDispatch(O),this.toastData={};break;case"toast/learn-more":var de=this.toastData.undoCallback;de&&this.runAfterDispatch(de),this.toastData={};break;case"start-moving-point":ee.onStartMovingPoint(this,this.listModel,C.pointInfo);break;case"stop-moving-point":ee.onStopMovingPoint(this,C.pointInfo);break;case"on-move-point":ee.onMovePoint(this,C.pointInfo,C.screenPt,C.projection,C.keyboardDirection)&&this.enqueueEvent("userMovedPoint");break;case"commit-user-requested-viewport":this._commitUserRequestedViewport(C.viewport);break;case"set-viewport":this._setAxisLimitLatex("xmin",C.viewport.xmin+""),this._setAxisLimitLatex("xmax",C.viewport.xmax+""),this._setAxisLimitLatex("ymin",C.viewport.ymin+""),this._setAxisLimitLatex("ymax",C.viewport.ymax+"");break;case"set-axis-limit-latex":this._setAxisLimitLatex(C.limit,C.latex);break;case"toggle-graph-settings":this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{graphSettingsOpen:!this.layoutModel.graphSettingsOpen}),C.focusOnOpen&&this.layoutModel.graphSettingsOpen&&B.setFocusLocation(this,{type:"settings",location:"projector-mode"});break;case"close-graph-settings":this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{graphSettingsOpen:!1}),C.focusIconAfterClose&&B.setFocusLocation(this,{type:"settings",location:"icon"});break;case"toggle-add-expression":this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{addExpressionOpen:!this.layoutModel.addExpressionOpen}),C.focusOnOpen&&this.layoutModel.addExpressionOpen&&B.setFocusLocation(this,{type:"add-expression-btn"});break;case"close-add-expression":this._closeAddExpression(),C.focusIconAfterClose&&B.setFocusLocation(this,{type:"add-item-btn"});break;case"ui/container-resized":this.layoutMeasurements={width:C.size.width,height:C.size.height},this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;break;case"enter-printmode":this.inPrintMode=!0;break;case"exit-printmode":this.inPrintMode=!1;break;case"expression-size-exceeded":this._showToast({message:this.t("Expression size cannot exceed 100 characters.")});break;case"keypad/set-layout":this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{keypadLayout:C.layout,keypadFunctionsOpen:!1});break;case"keypad/set-functions-tab":this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{keypadFunctionsTab:C.tab});break;case"keypad/set-minimized":this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{keypadMinimized:C.minimized,keypadLayout:"mainNumbers"}),this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,this.needsFakeKeypad()||B.addFocusForKeypad(this);break;case"keypad/type-text":this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(function(){var tt=le.default.getFocusedMathquill();tt&&le.default.canAcceptText(tt,oe.getCapExpressionSize(),C.text)&&(tt.typedText(C.text),le.default.simulateUserChangedLatex(tt))});break;case"keypad/press-key":this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(function(){var tt=le.default.getFocusedMathquill();tt&&le.default.simulateKeypress(tt,C.key)});break;case"keypad/custom-command":this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(function(){var tt=le.default.getFocusedMathquill();tt&&(Be.execute(tt,C.command),le.default.simulateUserChangedLatex(tt))});break;case"keypad/shift":this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{keypadLayout:K.getShiftedLayoutForCurrentLayout(this.getKeypadLayout()),keypadFunctionsOpen:!1});break;case"keypad/123":this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{keypadLayout:"mainNumbers",keypadFunctionsOpen:!1});break;case"keypad/abc":this.isQwertyKeyboardEnabled()?this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{keypadLayout:"letters",keypadFunctionsOpen:!1}):this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{keypadLayout:"noQwertyLetters",keypadFunctionsOpen:!1});break;case"keypad/functions":this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{keypadFunctionsOpen:!this.isKeypadFunctionsPopoverOpen()});break;case"open-on-web":this._openOnWeb();break;case"file-is-dragged-over":this.listModel.openItemMenu=void 0,this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{isFileDraggedOver:!0});break;case"file-is-not-dragged-over":this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{isFileDraggedOver:!1});break;case"zoom":this.grapher&&this.grapher.viewportController.zoom(C.direction);break;case"set-hovered-image":var j=this.getItemModel(C.id);if(!j||j.type!=="image")return;J.setClickableInfoProp(j,"hoveredImage",C.url);break;case"set-depressed-image":var j=this.getItemModel(C.id);if(!j||j.type!=="image")return;J.setClickableInfoProp(j,"depressedImage",C.url);break;case"clickable-item-clicked":var j=this.getItemModel(C.id);if(!j)return;var xe;if(j.type==="expression"?xe=v.getClickableInfoUpdateLatex(j):j.type==="image"&&(xe=J.getClickableInfoUpdateLatex(j)),!xe)return;var be;if(j.type==="expression"?be=v.getClickableInfoUpdateIdentifier(j):j.type==="image"&&(be=J.getClickableInfoUpdateIdentifier(j)),be){var Ne=H.getItemsByIdentifier(this.listModel,be);if(Ne.length===1){var Ye=Ne[0];Ye.slider.isPlaying?(v.setSliderIsPlaying(Ye,!1),v.setLatex(Ye,xe),v.setSliderIsPlaying(Ye,!0)):v.setLatex(Ye,xe)}this.enqueueEvent("userClickedObject")}break;case"update-ide-search-str":this.updateIDESearchStr(C.str);break;case"set-braille-mode":this.setBrailleMode(C.mode);break;case"set-six-key-input":this.setSixKeyInput(C.useSixKeyInput);break;default:return C}},Z.prototype.updateIDESearchStr=function(C){this.ideSearchStr=C,H.filterItemsBySearch(this.listModel,C)},Z.prototype.getIDESearchStr=function(){return this.ideSearchStr||""},Z.prototype.areClickableObjectsTemporarilyDisabled=function(){return this.__waitingForClickableObjectWorkerResponse},Z.prototype.getBrailleMode=function(){return this.graphSettings.config.brailleMode},Z.prototype.setBrailleMode=function(C){this.graphSettings.config.brailleMode=C},Z.prototype.getSixKeyInput=function(){return this.graphSettings.config.sixKeyInput},Z.prototype.setSixKeyInput=function(C){this.graphSettings.config.sixKeyInput=C},Z.prototype.setEditListMode=function(C){this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{inEditListMode:C})},Z.prototype._createTableItem=function(){var C=H.findAvailableColumnSubscript(this.listModel),oe=k.makeTableState(C,[[""],[""]],this);return this.createItemModel(oe)},Z.prototype._populateSettingsViewLimitLatex=function(){this.grapher&&(this.settingsViewModel=t.__assign(t.__assign({},this.settingsViewModel),{limitLatex:ue.limitLatex(this.grapher.getCurrentViewport(),this.getGraphSettings().xAxisStep,this.getGraphSettings().yAxisStep)}))},Z.prototype.getSettingsViewModel=function(){return this.settingsViewModel},Z.prototype.getListModel=function(){return this.listModel},Z.prototype.hasBackgroundColor=function(){return this.getBackgroundColor()!=="#ffffff"},Z.prototype.getBackgroundColor=function(){return this.getGraphSettings().getBackgroundColor()},Z.prototype.getTextColor=function(){return this.getGraphSettings().getTextColor()},Z.prototype.getPillboxBackgroundColor=function(){return M.shadeColor(this.getBackgroundColor(),-.07)},Z.prototype.subToChanges=function(C){var oe=this,ge=this.nextSubscription;return this.nextSubscription+=1,this.subscriptions[ge]=C,function(){delete oe.subscriptions[ge]}},Z.prototype.updateTheComputedWorld=function(){var C=this;H.reindex(this.listModel),H.updateDrawOrder(this.listModel),this.grapher&&this.grapher.setSketchOrder(this.listModel.drawOrder);for(var oe=0,ge=this.getAllItemModels();oe<ge.length;oe++){var _e=ge[oe];switch(_e.type){case"expression":v.onControllerUpdate(_e);break;case"image":J.onControllerUpdate(_e);break;case"table":k.onControllerUpdate(_e);break;case"folder":X.onControllerUpdate(_e);break;case"text":te.onControllerUpdate(_e);break;default:return _e}}this.isCurrentFocusLocationValid()||B.setFocusLocation(this,void 0),this.listModel.openItemMenu&&(document.body&&document.body.contains(this.listModel.openItemMenu.icon)||(this.listModel.openItemMenu=void 0));var De=this.getSelectedItem();De&&!this.getItemModel(De.id)&&H.setSelected(this.listModel,void 0),this.layoutModel.graphSettingsOpen||this._populateSettingsViewLimitLatex(),this.propagateSelection(),this.isKeypadOpen()||(this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{keypadFunctionsOpen:!1})),this.runAfterDispatch(function(){C.grapher&&C.grapher.type==="2d"&&C.grapher.audioGraph.checkIfSelectedItemChanged(De?De.id:void 0),C.grapher&&C.grapher.type==="2d"&&C.focusLocation&&C.grapher.audioGraph.exitAudioTrace()})},Z.prototype.propagateSelection=function(){this.grapher&&this.evaluator?this.__lastSelectedId=x.propagateSelection(this,this.grapher,this.evaluator,this.__lastSelectedId):this.__lastSelectedId=void 0},Z.prototype.getIntersectId=function(){return this.__lastSelectedId},Z.prototype.areParsableObjectsEqual=function(C,oe){return C===oe||s.isEqual(t.__assign(t.__assign({},C),{regressionParameters:void 0}),t.__assign(t.__assign({},oe),{regressionParameters:void 0}))},Z.prototype.requestParseForAllItems=function(){this.isCurrentlyDoingSetState&&this.evaluator.clearStatementsAndStartCompleteState();for(var C={},oe=this.lastParsableObjects,ge=0,_e=this.getAllItemModels();ge<_e.length;ge++){var De=_e[ge];switch(De.type){case"expression":case"image":case"table":C[De.id]=De.cachedParsableState;break;case"folder":case"text":break;default:return De}}for(var je=0,Ie=H.getAllHelperItemModels(this.listModel);je<Ie.length;je++){var De=Ie[je];C[De.id]=De.cachedParsableState}for(var Oe in C){var N=C[Oe],Pe=oe[Oe];if(N.type==="image"&&(!Pe||N.type!==Pe.type||N.guid!==Pe.guid)&&this.grapher){var De=this.getItemModel(Oe);De&&De.type==="image"&&this.grapher.addGraphImage(De)}this.areParsableObjectsEqual(N,Pe)||(this.grapher&&N.type==="statement"&&N.latex===""&&this.grapher.removeGraphSketch(N.id),this.evaluator.addStatement(N))}for(var Oe in oe){var Pe=oe[Oe],N=C[Oe];if(Pe.type!=="image"||N&&N.type===Pe.type&&N.guid===Pe.guid||this.grapher&&this.grapher.removeGraphImage(Oe),!N&&(this.evaluator.removeStatement(Oe),Pe.type==="table"))for(var Xe=0,$e=Pe.columns;Xe<$e.length;Xe++){var ht=$e[Xe];this.evaluator.removeStatement(ht.id)}}this.lastParsableObjects=C},Z.prototype.getViewState=function(){if(this.grapher){var C=this.grapher.getProjection();return{viewport:C.viewport.toObject(),screen:C.screen}}},Z.prototype.setEvaluator=function(C){this.evaluator=C},Z.prototype.setGrapher=function(C){this.grapher=C},Z.prototype.getGrapher=function(){return this.grapher},Z.prototype.shouldExpressionZoomFit=function(C){return!!this.grapher&&(C.type==="expression"||C.type==="table")&&!!(C.type!=="expression"||!C.error&&C.shouldGraph&&C.formula.is_graphable)&&!(!C.boundingBoxes||!C.boundingBoxes.length)&&$.shouldExpressionZoomFit(C.boundingBoxes,this.grapher.viewportController.getProjection())},Z.prototype.setBugsnagContext=function(C){this.bugsnagContext=C},Z.prototype.getItemRootNodeById=function(C){var oe=this.getItemModel(C);return oe&&oe.dcgView?oe.dcgView.findRootNode():void 0},Z.prototype.getItemSelectorById=function(C){var oe=this.getItemRootNodeById(C);return oe?ie(oe):void 0},Z.prototype.generateId=function(){var C=this.__nextItemId;return this.__nextItemId+=1,C+""},Z.prototype.getNextColor=function(){return H.getNextColor(this.listModel)},Z.prototype.getNextDisplayIndex=function(){return this.listModel.nextDisplayIndex},Z.prototype._clearPendingImageUploads=function(){this.__pendingImageUploads={}},Z.prototype.isUploadingImages=function(){return Object.keys(this.__pendingImageUploads).length>0},Z.prototype.getExpressionAnalysis=function(){return this.listModel.expressionAnalysis},Z.prototype.createItemModel=function(C){return H.modelFromSpec(this.listModel,C)},Z.prototype.getItemModel=function(C){return H.getItemById(this.listModel,C)},Z.prototype.getItemModelByIndex=function(C){return H.getItemByIndex(this.listModel,C)},Z.prototype.getItemCount=function(){return H.getItemCount(this.listModel)},Z.prototype.getItemEditableLabelMode=function(C){var oe=this.getItemModel(C);if(oe&&oe.type==="expression")return v.getEditableLabelMode(oe)},Z.prototype.isItemSecret=function(C){var oe=this.getItemModel(C);return!!oe&&H.isItemSecret(oe)},Z.prototype.isItemSelected=function(C){var oe=this.getItemModel(C);return!!oe&&H.isItemSelected(oe)},Z.prototype.isItemSelectable=function(C){var oe=this.getItemModel(C);return!!oe&&H.isItemSelectable(oe)},Z.prototype.anyItemDependsOnRandomSeed=function(){return H.anyItemDependsOnRandomSeed(this.listModel)},Z.prototype.getAllItemModels=function(){return H.getAllItemModels(this.listModel)},Z.prototype.getAllModelsWithSliders=function(){return H.getAllModelsWithSliders(this.listModel)},Z.prototype.getGraphSettings=function(){return this.graphSettings},Z.prototype.getAudioGraph=function(){return this.grapher!==void 0&&this.grapher.type==="2d"?this.grapher.audioGraph:void 0},Z.prototype.inAudioTraceMode=function(){var C=this.getAudioGraph();return!(!C||!C.audioTraceActive)},Z.prototype.expressionsAreFullWidth=function(){return this.isNarrow()||this.graphSettings.config.graphpaper===!1},Z.prototype.getExpListWidthString=function(){return this.expressionsAreFullWidth()?"100%":this.rootElt?this._getExpListWidth()+"px":"0"},Z.prototype.getExpListWidth=function(){return this.rootElt?this._getExpListWidth():0},Z.prototype.findFirstVisibleItem=function(){var C=me.getFirstVisibleItemId(this,this._previousFirstVisibleId);return this._previousFirstVisibleId=C,C?this.getItemModel(C):void 0},Z.prototype.findLastVisibleItem=function(){var C=me.getLastVisibleItemId(this,this._previousLastVisibleId);return this._previousLastVisibleId=C,C?this.getItemModel(C):void 0},Z.prototype.updateRenderShellsAfterDispatch=function(){if(this.rootElt&&this.isListVisible()){var C=this.findFirstVisibleItem(),oe=this.findLastVisibleItem(),ge=C&&this.getItemRootNodeById(C.id),_e=oe&&this.getItemRootNodeById(oe.id);if(ge!==this.lastInfiniteScrollFirstDOM||_e!==this.lastInfiniteScrollLastDOM||this.hasDispatchSinceLastInfiniteScrollUpdate){this.lastInfiniteScrollFirstDOM=ge,this.lastInfiniteScrollLastDOM=_e,this.hasDispatchSinceLastInfiniteScrollUpdate=!1;for(var De=!1,je=C?C.index:1/0,Ie=oe?oe.index:1/0,Oe=this.listModel.dragState&&this.listModel.dragState.firstItemId,N=0,Pe=this.getAllItemModels();N<Pe.length;N++){var Xe=Pe[N],$e=!(Xe.index>=je&&Xe.index<=Ie&&!Xe.isHiddenFromUI);if(Oe==Xe.id&&($e=!1),Xe.renderShell!==$e&&(Xe.renderShell=$e,De=!0,$e)){var ht=this.getItemRootNodeById(Xe.id);if(ht){var ye=ht.getBoundingClientRect().height;ye>0&&(Xe.cachedRenderHeight=ye)}}}De&&this.markTickRequiredNextFrame()}}},Z.prototype.updateRenderShellsBeforePaint=function(){if(this.hasDispatchSinceLastInfiniteScrollUpdate=!0,this.inPrintMode)for(var C=0,oe=this.getAllItemModels();C<oe.length;C++){var ge=oe[C];ge.renderShell=!1}else{for(var _e=0,De=this.getAllItemModels();_e<De.length;_e++){var ge=De[_e];ge.isHiddenFromUI&&(ge.renderShell=!0)}var je=this.getSelectedItem();je&&(je.renderShell=!1)}},Z.prototype.updateDragDrop=function(){var C=this.listModel.dragState;if(C){var oe=this.getItemModel(C.firstItemId);if(oe){var ge=this.dragdrop_expressions.applyDrag();ge&&(H.setDragState(this.listModel,ge.dragState),z.setFolderId(oe,ge.folderId),oe.index!==ge.newIndex&&H.moveItemsTo(this.listModel,oe.index,ge.newIndex,C.numberOfItems))}}},Z.prototype._tickSliders=function(C){this.getPlayingSliders().forEach(function(oe){v.tickSliderStep(oe,C)})},Z.prototype.getPlayingSliders=function(){for(var C=this.getAllItemModels(),oe=[],ge=0,_e=C;ge<_e.length;ge++){var De=_e[ge];De.type==="expression"&&De.sliderExists&&De.slider.isPlaying&&oe.push(De)}return oe},Z.prototype.hasAnyTableThatRequiresTicks=function(){for(var C=this.getAllItemModels(),oe=0,ge=C;oe<ge.length;oe++){var _e=ge[oe];if(!_e.renderShell&&_e.type==="table"&&_e.rowModels.length>=25)return!0}return!1},Z.prototype.areAnyImagesLoading=function(){return H.areAnyImagesLoading(this.listModel)},Z.prototype._commitUserRequestedViewport=function(C){this.grapher&&this.grapher.setUserRequestedViewport(C)},Z.prototype._setAxisLimitLatex=function(C,oe){var ge,_e;this.settingsViewModel=t.__assign(t.__assign({},this.settingsViewModel),{limitLatex:t.__assign(t.__assign({},this.settingsViewModel.limitLatex),(ge={},ge[C]=oe,ge))});var De=oe===""&&(C==="xstep"||C==="ystep"),je=De?0:re.default(oe,this.graphSettings.degreeMode);switch(C){case"xstep":if(je<0||!isFinite(je))return;this.graphSettings.setProperty("xAxisStep",je);break;case"ystep":if(je<0||!isFinite(je))return;this.graphSettings.setProperty("yAxisStep",je);break;case"xmin":case"xmax":case"ymin":case"ymax":if(!this.grapher)return;var Ie=this.grapher.viewportController.getViewport(),Oe="xmin";C==="xmin"&&(Oe="xmax"),C==="ymax"&&(Oe="ymin"),C==="ymin"&&(Oe="ymax");var N=re.default(this.settingsViewModel.limitLatex[Oe],this.graphSettings.degreeMode),Pe=m.Viewport.fromObject(t.__assign(t.__assign({},Ie.toObject()),(_e={},_e[C]=je,_e[Oe]=N,_e)));if(!Pe.isValid())return;this.grapher.viewportController.setViewport(Pe);var Xe=C==="xmin"||C==="xmax"?"x":"y";this.graphSettings.setProperty("lastChangedAxis",Xe);var $e=Pe.isSquare(this.grapher.getProjection().screen);this.graphSettings.setProperty("squareAxes",$e)}if(this.grapher){var ht=this.grapher.viewportController.getViewport().toObject();this._commitUserRequestedViewport(ht)}},Z.prototype.canUserAddExpressions=function(){return!!this.graphSettings.config.expressions},Z.prototype.areNotesEnabled=function(){return!!this.graphSettings.config.notes},Z.prototype.areSlidersEnabled=function(){return!!this.graphSettings.config.sliders},Z.prototype.areLinksEnabled=function(){return!!this.graphSettings.config.links},Z.prototype.areImagesEnabled=function(){var C=window.FileReader,oe=n.IS_IPAD&&n.IOS_VERSION&&n.IOS_VERSION[0]===8&&n.IOS_VERSION[1]===0&&n.IOS_VERSION[2]===0;return!(!this.graphSettings.config.images||!C||oe)},Z.prototype.areFoldersEnabled=function(){return!!this.graphSettings.config.folders},Z.prototype.isDecimalToFractionEnabled=function(){return!!this.graphSettings.config.decimalToFraction},Z.prototype.isTraceEnabled=function(){return!!this.graphSettings.config.trace},Z.prototype.areFunctionsRestricted=function(){return!!this.graphSettings.config.restrictedFunctions},Z.prototype.isQwertyKeyboardEnabled=function(){return!!this.graphSettings.config.qwertyKeyboard},Z.prototype.canEditOnWeb=function(){return!!this.graphSettings.config.editOnWeb},Z.prototype.hasTransparentBackground=function(){return!!this.graphSettings.config.transparentBackground},Z.prototype.shouldAudioTraceReverseExpressions=function(){return!!this.graphSettings.config.audioTraceReverseExpressions},Z.prototype.hasDefaultState=function(){return!!this.graphSettings.defaultState},Z.prototype.getDefaultStateViewport=function(){var C=this.graphSettings.defaultState;if(C&&C.graph)return C.graph.viewport},Z.prototype.getColors=function(){return this.graphSettings.config.colors},Z.prototype.getImageOpacities=function(){return["0.2","0.4","0.6","0.8","1"]},Z.prototype.getUIDragModes=function(){return[f.DragMode.X,f.DragMode.Y,f.DragMode.XY]},Z.prototype.getNumberOfItemsInFolder=function(C){return H.getNumberOfItemsInFolder(this.listModel,C)},Z.prototype.getEnabledDragModesForItem=function(C){var oe=this.getItemModel(C);if(!oe||oe.type!=="expression")return[];var ge=oe.formula,_e=[];if(!ge.move_strategy)return _e;var De=ge.move_strategy[0].type!=="none",je=ge.move_strategy[1].type!=="none",Ie=De&&je;return De&&_e.push(f.DragMode.X),je&&_e.push(f.DragMode.Y),Ie&&_e.push(f.DragMode.XY),_e},Z.prototype.shouldShowEvaluationForItem=function(C){var oe=this.getItemModel(C);return!!oe&&oe.type==="expression"&&v.shouldShowEvaluation(oe)},Z.prototype.getEvaluationValueForItem=function(C){var oe=this.getItemModel(C);return oe?oe.type!=="expression"?NaN:v.getEvaluationValue(oe):NaN},Z.prototype.canDisplayEvaluationForItemAsFraction=function(C){if(!this.isDecimalToFractionEnabled())return!1;var oe=this.getItemModel(C);if(!oe||oe.type!=="expression"||v.isGraphable(oe))return!1;var ge=this.getEvaluationValueForItem(C);return!Array.isArray(ge)&&i.canDisplayAsFraction(ge)},Z.prototype.shouldEvaluationForItemDisplayAsFraction=function(C){if(!this.isDecimalToFractionEnabled())return!1;var oe=this.getItemModel(C);return!!oe&&oe.type==="expression"&&v.shouldEvaluationDisplayAsFraction(oe)},Z.prototype.getEvaluationLabelOptionsForItem=function(C){return t.__assign(t.__assign({},D.EvaluationLabelOptions),{displayAsFraction:this.shouldEvaluationForItemDisplayAsFraction(C)})},Z.prototype.getPointStyles=function(){return[y.PointStyle.POINT,y.PointStyle.OPEN,y.PointStyle.CROSS]},Z.prototype.getLineStyles=function(){return[y.LineStyle.SOLID,y.LineStyle.DASHED,y.LineStyle.DOTTED]},Z.prototype.getOpacities=function(){return[u.LOW,u.DEFAULT,u.HIGH]},Z.prototype.isInEditListMode=function(){return this.layoutModel.inEditListMode},Z.prototype.canAdministerSecretFolders=function(){return this.graphSettings.config.administerSecretFolders},Z.prototype.getInvertedColors=function(){return!!this.graphSettings.config.invertedColors},Z.prototype.canUseAdvancedStyling=function(){return this.graphSettings.config.advancedStyling||this.graphSettings.config.authorIDE},Z.prototype.isAuthorIDE=function(){return this.graphSettings.config.authorIDE},Z.prototype.canAuthorClickableObjects=function(){return this.graphSettings.config.clickableObjects},Z.prototype.isDegreeMode=function(){return this.graphSettings.degreeMode},Z.prototype.isGraphSettingsOpen=function(){return this.layoutModel.graphSettingsOpen},Z.prototype.isAddExpressionOpen=function(){return this.layoutModel.addExpressionOpen},Z.prototype.shouldRenderList=function(){if(this.layoutModel.expressionsVisible)return!0;var C=this.layoutModel.expressionsHiddenTime;return C!==void 0&&Date.now()-C<=500},Z.prototype.isListVisible=function(){return this.layoutModel.expressionsVisible},Z.prototype.isGrapherEnabled=function(){return this.graphSettings.config.graphpaper!==!1},Z.prototype.isListEnabled=function(){return this.graphSettings.config.expressions!==!1},Z.prototype.areDistributionsEnabled=function(){return this.graphSettings.config.distributions===!0},Z.prototype.needsFakeKeypad=function(){var C=this.getFocusLocation();if(!C||this.getBrailleMode()!=="none"&&pe.getFocusedBrailleElement())return!1;switch(C.type){case"settings":return C.location!=="icon"&&C.location!=="degree-mode";case"distribution-param":case"cdf-limit":case"slider-limit":case"domain-limit":case"expression":case"visualization-prop":return!0;case"expression-menu":return C.location==="opacity"||C.location==="linewidth";case"clickableinfo-prop":return C.location!=="description";case"table":if(this.isInEditListMode())return!1;var oe=C.location;if(oe.row===0)return!0;var ge=this.getItemModel(C.id);if(!ge||ge.type!=="table")return!1;var _e=ge.columnModels[oe.column];return!!_e&&!_e.disabled;case"image":return C.location!=="name";case"readonly-expression":case"braille-output":case"table-container":case"text":case"folder":case"add-item-btn":case"add-expression-btn":case"add-table-btn":case"add-folder-btn":case"add-image-btn":case"change-image-btn":case"edit-list-toggle":return!1;case"expression-icon":case"image-icon":case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":return!1;case"editable-label":return this.getItemEditableLabelMode(C.id)===A.EditableLabelMode.Math;default:return C}},Z.prototype.getBrandingMode=function(){return this.getEditLink()?"static-edit-link":this.getGraphSettings().config.editOnWeb?"edit-link":"powered-by"},Z.prototype.getEditLink=function(){return window.iframeEmbedBrandingLink},Z.prototype._expressionZoomFit=function(C){var oe=this.getItemModel(C);if(this.grapher&&oe&&(oe.type==="expression"||oe.type==="table")&&oe.boundingBoxes&&oe.boundingBoxes.length){var ge=$.getRecommendedViewportForExpression(oe.boundingBoxes,this.grapher.viewportController.getProjection());ge&&this.grapher.viewportController.zoomCustom(ge)}},Z.prototype._deleteItemAndAnimateOut=function(C,oe){var ge=this,_e=this.getItemSelectorById(C);_e&&(_e.css({transition:"0.2s",opacity:"0",transform:"scale(.1, .1)"}),setTimeout(function(){ge.dispatch({type:"finish-deleting-item-after-animation",id:C,setFocusAfterDelete:oe})},200))},Z.prototype._finishDeletingItemAfterAnimation=function(C,oe){var ge=this.getItemModel(C);if(ge){var _e=this.getItemSelectorById(C),De=_e&&document.activeElement&&ie(document.activeElement).closest(_e).length>0,je=H.findPrevSelectableItem(this.listModel,ge.index);if(this._removeExpressionSynchronously(ge),oe&&De){if(!je){var Ie=H.getFirstSelectableItem(this.listModel);Ie&&(je=Ie)}je&&B.moveFocusToItem(this,je.id,"end")}}},Z.prototype._removeExpressionSynchronously=function(C){if(H.removeItemAtIndex(this.listModel,C.index),H.hasNoVisibleExpressions(this.listModel)){var oe=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});H.insertItemAtEnd(this.listModel,oe)}},Z.prototype.setRootElt=function(C){this.rootElt=C,this.dragdrop_expressions=new Ae.default(this)},Z.prototype._hideExpressions=function(){this.graphSettings.config.expressions&&(H.setSelected(this.listModel,void 0),this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{expressionsVisible:!1,expressionsHiddenTime:Date.now()}),h.default())},Z.prototype._showExpressions=function(){this.graphSettings.config.expressions&&(this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{expressionsVisible:!0}),h.default())},Z.prototype._showToast=function(C){var oe=this;if(this.toastData=C,this.toastData.hasOwnProperty("undoCallback")&&!n.IS_MOBILE){var ge=n.IS_APPLE?this.t("Press CMD+Z to undo."):this.t("Press CTRL+Z to undo.");this.toastData.message+=" "+ge}clearTimeout(this._hideToastTimeout);var _e=typeof C.hideAfter=="number"?C.hideAfter:6e3;_e>0&&(this._hideToastTimeout=setTimeout(function(){oe.dispatch({type:"toast/close",onHide:oe.toastData.onHide})},_e))},Z.prototype._setExpressionPropertiesFromAPI=function(C,oe){var ge=this.getItemModel(C);if(ge)if(ge.type==="table"&&oe.columns){oe=p.default(oe);var _e=k.cloneTableAndExtendWithProperties(ge,oe),De=H.modelFromSpec(this.listModel,_e);this._toplevelReplaceItemAt(ge.index,De,!1)}else{var je=this.getItemModel(C);if(!je)return;for(var Ie in oe)if(oe.hasOwnProperty(Ie))switch(Ie){case"slider":if(je.type!=="expression")continue;var Oe=oe[Ie];Oe.hasOwnProperty("min")&&v.setSliderMin(je,Oe.min),Oe.hasOwnProperty("max")&&v.setSliderMax(je,Oe.max),Oe.hasOwnProperty("step")&&v.setSliderStep(je,Oe.step);break;case"polarDomain":if(je.type!=="expression")continue;v.setPolarDomainMin(je,r.default(oe.polarDomain.min)),v.setPolarDomainMax(je,r.default(oe.polarDomain.max));break;case"parametricDomain":if(je.type!=="expression")continue;v.setParametricDomainMin(je,r.default(oe.parametricDomain.min)),v.setParametricDomainMax(je,r.default(oe.parametricDomain.max));break;case"hidden":this._setItemHidden(C,oe.hidden);break;case"secret":z.setSecret(je,oe.secret);break;case"color":if(je.type!=="expression")continue;v.setColor(je,oe.color);break;case"dragMode":if(je.type!=="expression")continue;v.setDragMode(je,oe.dragMode);break;case"label":if(je.type!=="expression")continue;v.setLabel(je,oe.label);break;case"showLabel":if(je.type!=="expression")continue;v.setShowLabel(je,oe.showLabel);break;case"labelSize":if(je.type!=="expression")continue;v.setLabelSize(je,oe.labelSize);break;case"labelOrientation":if(je.type!=="expression")continue;v.setLabelOrientation(je,oe.labelOrientation);break;case"verticalLabel":if(je.type!=="expression")continue;v.setVerticalLabel(je,oe.verticalLabel);break;case"latex":if(je.type!=="expression")continue;v.setLatex(je,oe.latex);break;case"points":if(je.type!=="expression")continue;v.setPoints(je,!!oe.points);break;case"lines":if(je.type!=="expression")continue;v.setLines(je,!!oe.lines);break;case"pointStyle":if(je.type!=="expression")continue;v.setPointStyle(je,oe.pointStyle);break;case"lineStyle":if(je.type!=="expression")continue;v.setLineStyle(je,oe.lineStyle);break;case"fill":if(je.type!=="expression")continue;v.setFill(je,oe.fill);break;case"fillOpacity":if(je.type!=="expression")continue;v.setFillOpacity(je,oe.fillOpacity);break;case"id":case"type":case"domain":break;default:throw new Error("trying to call setProperty for: "+Ie)}}},Z.prototype._isParentFolderHidden=function(C){var oe=this.getItemModel(C);if(!oe)return!1;var ge=H.getParentFolderModel(oe);return!!ge&&ge.hidden},Z.prototype._toggleItemHidden=function(C){if(this._isParentFolderHidden(C))this._setItemHidden(C,!1);else{var oe=this.getItemModel(C);if(!oe)return;switch(oe.type){case"expression":case"image":case"folder":this._setItemHidden(C,!oe.hidden);break;case"table":case"text":break;default:return oe}}},Z.prototype._toggleTableColumnHidden=function(C,oe){if(this._isParentFolderHidden(C))this._setTableColumnHidden(C,oe,!1);else{var ge=this.getItemModel(C);if(!ge||ge.type!=="table")return;var _e=k.getColumnModel(ge,oe);if(!_e)return;this._setTableColumnHidden(C,oe,!_e.hidden)}},Z.prototype._setTableColumnHidden=function(C,oe,ge){var _e=this.getItemModel(C);if(_e&&_e.type==="table"){var De=k.shouldHideColumn(_e,oe);!ge&&this._isParentFolderHidden(C)&&this._setItemHidden(_e.folderId,!1),k.setColumnHidden(_e,oe,ge),!ge&&De&&k.setColumnPoints(_e,oe,!0)}},Z.prototype._setItemHidden=function(C,oe){var ge=this.getItemModel(C);if(ge)switch(!oe&&ge.type!=="folder"&&this._isParentFolderHidden(ge.id)&&this._setItemHidden(ge.folderId,!1),ge.type){case"expression":v.setHidden(ge,oe);break;case"folder":X.setHidden(ge,oe);break;case"image":J.setHidden(ge,oe);break;case"table":case"text":break;default:return ge}},Z.prototype._addItemToEndFromAPI=function(C){var oe=H.getLastSelectableItem(this.listModel);!C.secret&&oe&&oe.type==="expression"&&oe.latex===""&&H.removeItemAtIndex(this.listModel,oe.index),H.insertItemAtEnd(this.listModel,C)},Z.prototype._toplevelInsertItemAt=function(C,oe,ge,_e){var De=oe;H.insertItemAtIndex(this.listModel,De,C),_e&&z.setFolderId(De,_e),ge&&B.moveFocusToItem(this,De.id)},Z.prototype._toplevelNewItemAtSelection=function(C,oe){var ge=this.getSelectedItem();if(ge){var _e=ge.type==="expression"&&!ge.latex;if(_e&&!ge.folderId&&(C.type!=="expression"||C.latex))return this._toplevelReplaceItemAt(ge.index,C,oe.shouldFocus);if(_e&&ge.folderId&&C.type!=="expression"&&C.type!=="folder")return this._toplevelReplaceItemAt(ge.index,C,oe.shouldFocus);if(ge.type!=="folder"&&!ge.folderId)return this._toplevelInsertItemAt(ge.index+1,C,oe.shouldFocus,void 0);if(ge.type!=="folder"&&ge.folderId&&C.type!=="folder")return this._toplevelInsertItemAt(ge.index+1,C,oe.shouldFocus,ge.folderId);if(ge.type==="folder"&&!ge.collapsed&&C.type!=="folder")return this._toplevelInsertItemAt(ge.index+1,C,oe.shouldFocus,ge.id)}var De=this.getFirstFullyVisibleItem();for(De&&De.type==="folder"&&(De=this.getItemModelByIndex(De.index+1));De&&De.type!=="folder"&&De.folderId;)De=this.getItemModelByIndex(De.index+1);var je=De?De.index:this.getItemCount();return this._toplevelInsertItemAt(je,C,oe.shouldFocus,void 0)},Z.prototype.getFirstFullyVisibleItem=function(){var C=me.getFirstFullyVisibleItemId(this);if(C)return H.getItemById(this.listModel,C)},Z.prototype.find$=function(C){return ie(this.rootElt).find(C)},Z.prototype.getExppanelSelectorOrThrow=function(){var C=me.getExppanelElt(this);if(C)return ie(C);throw new Error("expected to find $exppanel but could not")},Z.prototype.scrollItemIntoView=function(C){if(this.rootElt&&this.isListVisible()){var oe=this.getItemSelectorById(C.id),ge=me.getExppanelSelector(this);if(oe&&ge){if(C.type==="table"){var _e=oe.find(".dcg-row .dcg-selected");if(_e.length===1)return void l.scrollVisible(_e,ge,60)}l.scrollVisible(oe,ge,90)}}},Z.prototype.scrollSelectedItemIntoView=function(){var C=this.getSelectedItem();C&&this.scrollItemIntoView(C)},Z.prototype._pasteTable=function(C){var oe=this;if(this.grapher){var ge=H.findAvailableColumnSubscript(this.listModel),_e=k.makeTableState(ge,C,this),De=this.createItemModel(_e);this._toplevelNewItemAtSelection(De,{shouldFocus:!0}),this._closeAddExpression();var je=this.grapher.viewportController.getViewport(),Ie=s.map(C[0],function($e){return parseFloat($e)}),Oe=s.map(C[1],function($e){return parseFloat($e)}),N={xmin:s.min(Ie),xmax:s.max(Ie),ymin:s.min(Oe),ymax:s.max(Oe),type:"table"};if(isFinite(N.xmin)&&isFinite(N.xmax)&&isFinite(N.ymin)&&isFinite(N.ymax)&&(N.xmax>je.xmax||N.xmin<je.xmin||N.ymax>je.ymax||N.ymin<je.ymin)){var Pe=$.getRecommendedViewportForExpression([N],je);if(Pe){var Xe=new m.Viewport(Pe.xmin,Pe.xmax,Pe.ymin,Pe.ymax);this.grapher.viewportController.setViewport(Xe),this._showToast({message:this.t("We zoomed to fit your data."),undoCallback:function(){oe.dispatch({type:"undo"})}})}}}},Z.prototype._insertSeveralExpressions=function(C){for(var oe=0;oe<C.length;oe++){var ge=void 0;ge=this.createItemModel(C[oe]),this._toplevelNewItemAtSelection(ge,{shouldFocus:!0})}},Z.prototype._appendNumberList=function(C){var oe=this.getSelectedItem();if(oe&&oe.type==="expression"){var ge=oe.latex,_e=this.createItemModel({type:"expression",id:this.generateId(),latex:ge+C});return this._toplevelReplaceItemAt(oe.index,_e,!0)}},Z.prototype._openOnWeb=function(){var C=this;this.runAfterDispatch(function(){if(C.grapher){var oe=JSON.stringify(C.getState()),ge=C.grapher.screenshot({width:100,height:100}),_e=C.getGraphSettings().config.crossOriginSaveTest,De=_e?"/":"https://www.desmos.com/",je=De+"api/v1/calculator/cross_origin_save",Ie=ie('<input type="text" name="calc_state" />').val(oe),Oe=ie('<input type="text" name="thumb_data" />').val(ge),N=ie('<form target="_blank" method="POST" style="display:none;"></form>').attr("action",je).append(ie('<input type="text" name="is_open_on_web" value="true" />')).append(ie('<input type="text" name="my_graphs" value="false" />')).append(ie('<input type="text" name="is_update" value="false" />')).append(Ie).append(Oe);ie(C.rootElt).append(N),N.submit().remove()}})},Z.prototype.notifyBugsnagAboutMissingSelectedItem=function(C,oe){var ge=H.getSelected(this.listModel),_e="";try{_e=ge?JSON.stringify(ge.cachedUndoRedoState,null,2):"undefined"}catch{_e="[[could not stringify]]"}var De="";try{if(ge){var je={id:ge.id,index:ge.index,displayIndex:ge.index,secretIndex:ge.secretIndex,guid:ge.guid,renderShell:ge.renderShell,isHiddenFromUI:ge.isHiddenFromUI,hasDCGView:!!ge.dcgView,cachedRenderHeight:ge.cachedRenderHeight};De=JSON.stringify(je,null,2)}else De="undefined"}catch{De="[[could not stringify]]"}var Ie="";try{Ie=JSON.stringify(H.getUndoRedoState(this.listModel),null,2)}catch{Ie="[[could not stringify]]"}Q.notify("ReplaceItemAtError: no item at index",{metaData:{index:C,shouldFocus:oe,selectedModelJSON:De,selectedItemJSON:_e,listStateJSON:Ie}})},Z.prototype._toplevelReplaceItemAt=function(C,oe,ge){var _e=oe,De=this.getItemModelByIndex(C);De||this.notifyBugsnagAboutMissingSelectedItem(C,ge);var je=De.type!=="folder"&&De.folderId;H.removeItemAtIndex(this.listModel,C),H.insertItemAtIndex(this.listModel,_e,C),je&&z.setFolderId(_e,je),ge&&B.moveFocusToItem(this,_e.id)},Z.prototype.createSlidersForItem=function(C,oe){var ge=this,_e=this.getItemModel(C);if(_e){for(var De=_e.type!=="folder"&&_e.folderId,je=_e.index+1,Ie=oe.map(function(Xe){var $e=Xe?i.identifierToLatex(Xe)+"=1":"";return{type:"expression",id:ge.generateId(),latex:$e,color:ge.getNextColor(),hidden:!!$e}}),Oe=Ie.length-1;Oe>=0;Oe--){var N=this.createItemModel(Ie[Oe]);H.insertItemAtIndex(this.listModel,N,je),De&&z.setFolderId(N,De)}var Pe=Ie[Ie.length-1];Pe.latex===""?B.moveFocusToItem(this,Pe.id):B.setFocusLocation(this,void 0)}},Z.prototype._uploadImagesAndWaitForThemToLoad=function(C){var oe=this,ge=C.files,_e=C.id;if(!ge||ge.length===0)return void this._showToast({message:this.t("You did not select a file")});if(_e&&ge.length>1)return void this._showToast({message:this.t("You can only choose one file as a replacement")});var De=J.uploadImages({controller:this,files:ge,id:_e}),je=De.errors[0];je&&this._showToast({message:je});for(var Ie=0,Oe=De.tokens;Ie<Oe.length;Ie++){var N=Oe[Ie];this.__pendingImageUploads[N]=!0}this.isUploadingImages()&&this._showToast({message:this.t("Uploading images..."),onHide:function(){oe._clearPendingImageUploads()}})},Z.prototype.getImageToRetry=function(){for(var C,oe=0,ge=this.getAllItemModels();oe<ge.length;oe++){var _e=ge[oe];_e.type==="image"&&_e.loadStatus==="failed"&&(!C||C.failures>_e.failures)&&(C=_e)}return C},Z.prototype.retryLoadingFailedImage=function(C){var oe=Date.now(),ge=oe-this.imageRetryState.lastAttemptTime,_e=1e3*Math.pow(2,this.imageRetryState.attempts);this.imageRetryState.attempts>0&&ge<_e||(J.retryLoading(C),this.imageRetryState={lastAttemptTime:oe,attempts:this.imageRetryState.attempts+1})},Z.prototype.getSelectedItem=function(){return H.getSelected(this.listModel)},Z.prototype.getOpenItemMenu=function(){return this.listModel.openItemMenu},Z.prototype.getFocusedItem=function(){return B.getFocusedItem(this)},Z.prototype.getFocusLocation=function(){return this.focusLocation},Z.prototype.isFocusLocationFocused=function(C){var oe=this.focusLocation,ge=C;return!(!oe||!ge)&&s.isEqual(oe,ge)},Z.prototype.isCurrentFocusLocationValid=function(){var C=this.focusLocation;if(!C)return!0;if(C.type==="settings")return C.location==="icon"||this.isGraphSettingsOpen();if(C.type==="add-item-btn"||C.type==="edit-list-toggle")return!0;if(C.type==="add-expression-btn"||C.type==="add-table-btn")return this.layoutModel.addExpressionOpen;if(C.type==="add-folder-btn")return this.layoutModel.addExpressionOpen&&this.areFoldersEnabled();if(C.type==="add-image-btn")return this.layoutModel.addExpressionOpen&&this.areImagesEnabled();var oe=this.getItemModel(C.id);if(!oe)return!1;if(C.type==="change-image-btn")return oe.type==="image"&&!(!this.listModel||!this.listModel.openItemMenu)&&this.listModel.openItemMenu.model===oe;if(C.type==="expression-menu"){if(C.location==="start"||C.location==="end"||C.location==="anywhere")return!0;if(oe.type!=="expression")return!1;var ge=oe.points,_e=oe.lines,De=oe.fill,je=E.getReconciledExpressionProps(oe.formula.expression_type,{points:ge,lines:_e,fill:De});return!(!je.fill&&!je.lines)}if(!this.isItemSelected(C.id)&&C.type!=="editable-label")return!1;switch(C.type){case"domain-limit":return oe.type==="expression"&&!!v.hasDomain(oe);case"expression-icon":return!0;case"image-icon":return oe.type==="image"&&oe.loadStatus!=="loading"&&oe.loadStatus!=="failed"&&!oe.error;case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":case"slider-limit":return oe.type==="expression"&&!!v.hasSlider(oe);case"visualization-prop":return oe.type==="expression"&&!!v.isVisualization(oe);case"clickableinfo-prop":return oe.type==="expression"?!!v.isClickableAllowed(oe)&&oe.clickableInfo.enabled:oe.type==="image"&&oe.clickableInfo.enabled;case"distribution-param":if(oe.type!=="expression")return!1;var Ie=v.parseToplevelFunction(oe);return!!Ie&&C.location in Ie.values;case"cdf-limit":return oe.type==="expression"&&v.shouldShowCDFFooter(oe);case"image":return oe.type==="image";case"folder":return oe.type==="folder";case"text":return oe.type==="text";case"expression":return oe.type==="expression"&&!this.isInEditListMode();case"readonly-expression":return oe.type==="expression"&&this.isInEditListMode();case"braille-output":return oe.type==="expression"&&this.getBrailleMode()!=="none";case"table":return oe.type==="table"&&!!k.doesCellExist(oe,C.location);case"table-container":return oe.type==="table"&&this.isInEditListMode();case"editable-label":return oe.type==="expression"&&v.hasEditableLabel(oe);default:return C}},Z.prototype.isDragDropActive=function(){return!!this.listModel.dragState},Z.prototype.isItemBeingDragged=function(C){var oe=this.listModel.dragState;return!(!oe||oe.firstItemId!==C)},Z.prototype.getDraggedItemId=function(){var C=this.listModel.dragState;return C&&C.firstItemId},Z.prototype.getRawDragState=function(){return this.listModel.dragState},Z.prototype.initStateStack=function(){this.stateStack=new o.default,this.stateStack.addState(this.getUndoRedoState())},Z.prototype.getUndoRedoState=function(){return{randomSeed:this.getRandomSeed(),layoutModel:this.layoutModel,settingsViewModel:this.settingsViewModel,graph:this.grapher?this.grapher.getUndoRedoState():void 0,expressions:H.getUndoRedoState(this.listModel),wasCompleteSetState:this.isCurrentlyDoingSetState}},Z.prototype.getState=function(C){var oe={stripDefaults:!0};C&&C.hasOwnProperty("stripDefaults")&&(oe.stripDefaults=!!C.stripDefaults);var ge={version:b.currentVersion,randomSeed:this.getRandomSeed(),graph:this.grapher?this.grapher.getState(oe):this.getBlankState().graph,expressions:H.getState(this.listModel,oe)};return C&&C.avoidBackMigration?p.default(ge):b.migrateToPersisted(p.default(ge))},Z.prototype.getBlankState=function(){return this.graphSettings.config.clearIntoDegreeMode?t.__assign(t.__assign({},ae.default),{graph:t.__assign(t.__assign({},ae.default.graph),{degreeMode:!0})}):ae.default},Z.prototype.externalSetState=function(C,oe){this._clearPendingImageUploads(),oe||(oe={}),C||(C=this.getBlankState()),typeof C=="string"&&(C=JSON.parse(C)),C&&(C=b.migrateToLatest(C));var ge=this.layoutModel;this.setState(C,oe),this.layoutModel=t.__assign(t.__assign({},K.defaultLayoutModel(this.graphSettings.config)),{keypadMinimized:ge.keypadMinimized,keypadLayout:ge.keypadLayout,keypadFunctionsTab:ge.keypadFunctionsTab,keypadFunctionsOpen:ge.keypadFunctionsOpen,expressionsVisible:!!this.graphSettings.config.expressions&&(this.isListVisible()||!!oe.forceExpressionsOpen)}),this.settingsViewModel=ue.defaultSettingsViewModel(),B.setFocusLocation(this,void 0),this.enqueueEvent("clearUnsavedChanges")},Z.prototype.setState=function(C,oe){if(this.lastParsableObjects={},this.isCurrentlyDoingSetState=!0,"graph"in C&&this.grapher&&this.grapher.setGrapherState(C.graph),"expressions"in C){H.setSelected(this.listModel,void 0);var ge=H.getLargestIntegerId(C.expressions);ge>=this.__nextItemId&&(this.__nextItemId=ge+1),H.setListState(this.listModel,C.expressions,oe||{})}C.layoutModel&&(this.layoutModel=C.layoutModel),C.settingsViewModel&&(this.settingsViewModel=C.settingsViewModel),oe&&oe.allowUndo||this.clearUndoRedoHistory(),this.setRandomSeed(C.randomSeed||Fe.default())},Z.prototype.updateToState=function(C){"graph"in C&&this.grapher&&this.grapher.setGrapherState(C.graph,{doNotClear:!0}),"expressions"in C&&H.restoreListState(this.listModel,C.expressions),C.layoutModel&&(this.layoutModel=C.layoutModel),C.settingsViewModel&&(this.settingsViewModel=C.settingsViewModel)},Z.prototype.commitUndoRedoSynchronously=function(C){var oe=this.getUndoRedoState();ze(this.stateStack.getState(),oe)||(this.stateStack.addState(oe),this.enqueueEvent("change"))},Z.prototype.undo=function(){if(this.canUndo()){this.stateStack.undo();var C=this.stateStack.getState();C.wasCompleteSetState?this.setState(C,{allowUndo:!0}):this.updateToState(C),this.enqueueEvent("change")}},Z.prototype.redo=function(){if(this.canRedo()){this.stateStack.redo();var C=this.stateStack.getState();C.wasCompleteSetState?this.setState(C,{allowUndo:!0}):this.updateToState(C),this.enqueueEvent("change")}},Z.prototype.clearUndoRedoHistory=function(){this.stateStack.clear()},Z.prototype.canUndo=function(){return this.stateStack.canUndo()},Z.prototype.canRedo=function(){return this.stateStack.canRedo()},Z.prototype._closeAddExpression=function(){this.layoutModel=t.__assign(t.__assign({},this.layoutModel),{addExpressionOpen:!1})},Z.prototype.doesDOMHaveSize=function(){return this.layoutMeasurements.width>0&&this.layoutMeasurements.height>0},Z.prototype._getExpListWidth=function(){var C;if(this.userSpecifiedExpListWidth!==void 0)C=Math.max(280,Math.min(this.layoutMeasurements.width-200,this.userSpecifiedExpListWidth));else{if(!(C=this.layoutMeasurements.width))return 356;var oe=.2*C+160;C=Math.min(500,Math.max(280,oe))}var ge=this.layoutMeasurements.width-this.layoutMeasurements.height;return Math.abs(ge-C)<=10?ge:C},Z.prototype._setExpListWidth=function(C){this.userSpecifiedExpListWidth!==C&&(this.userSpecifiedExpListWidth=C)},Z.prototype.getKeypadHeight=function(){return this.computeMajorLayout().keypad.height},Z.prototype.isKeypadEnabled=function(){return!!this.graphSettings.config.keypad},Z.prototype.isKeypadOpen=function(){var C=this.layoutModel.keypadMinimized&&!this.isNarrow();return this.needsFakeKeypad()&&!C},Z.prototype.isKeypadFunctionsPopoverOpen=function(){return!!this.layoutModel.keypadFunctionsOpen},Z.prototype.getKeypadLayout=function(){return this.layoutModel.keypadLayout},Z.prototype.isLetterKeypadOpen=function(){var C=this.getKeypadLayout();return this.isKeypadOpen()&&(C==="letters"||C==="noQwertyLetters"||C==="capitalLetters"||C==="noQwertyCapitalLetters")},Z.prototype.getKeypadFunctionsTab=function(){return this.layoutModel.keypadFunctionsTab},Z.prototype.isFileDraggedOver=function(){return this.layoutModel.isFileDraggedOver},Z.prototype.computeMajorLayout=function(){var C=this.layoutMeasurements.width,oe=this.layoutMeasurements.height,ge=this.isNarrow(),_e=this.isListVisible(),De=this.isKeypadOpen(),je=!this.isGrapherEnabled(),Ie=!this.isListEnabled(),Oe=!!this.getGraphSettings().config.projectorMode,N={left:0,top:0,width:0,height:0},Pe={left:0,top:0,width:0,height:0},Xe={left:0,top:oe,width:C,height:Oe?ge?185:193:169};return Ie?(Pe.width=C,Pe.height=oe):je?(N.width=C,N.height=oe):_e?ge?(N.width=C,N.height=Math.round(.58*oe),N.top=oe-N.height,Pe.width=C,Pe.height=oe-N.height):(N.width=this.getExpListWidth(),N.height=oe,Pe.left=N.width,Pe.width=C-Pe.left,Pe.height=oe):_e||(ge?(N.width=C,N.height=Math.round(.58*oe),N.top=oe,Pe.width=C,Pe.height=oe):(N.width=this.getExpListWidth(),N.height=oe,N.left=-N.width,Pe.width=C,Pe.height=oe)),De&&(Xe.top-=Xe.height,Ie||(N.height-=Xe.height)),{list:N,grapher:Pe,keypad:Xe}},Z.prototype.isNarrow=function(){return this.layoutMeasurements.width<450},Z.prototype.getCapExpressionSize=function(){return!!this.getGraphSettings().config.capExpressionSize},Z})();c.default=We}),P("lib/aria",["require","exports","browser","jquery"],function(S,c,x,t){function l(d){s.push(d)}function n(d){if(d!==void 0&&l(d),i!==void 0&&s.length>0){var u=s.join(" ").replace(/ +(?= )/g,"");i.attr("aria-relevant",g===u&&x.IS_APPLE?"all":"additions text"),i.empty().text(u),g=u}s.length=0}Object.defineProperty(c,"__esModule",{value:!0});var i,s=[],g="";c.queue=l,c.alert=n,t(document).ready(function(){var d=".dcg-aria-alert";t(d).length===0&&t("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-aria-alert'></p>"),i=t(d)})}),P("main/instancehotkeys",["require","exports","keys","lib/aria","jquery","graphing-calc/models/expression","browser","touchtracking"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(){function d(u){this.controller=u}return d.prototype.handleKeydown=function(u){var f=this;if(x.isUndo(u))u.stopPropagation(),u.preventDefault(),this.controller.hasVisibleAndUndoableToast()?this.controller.toastUndo():this.controller.dispatch({type:"undo"});else if(x.isRedo(u))u.stopPropagation(),u.preventDefault(),this.controller.dispatch({type:"redo"});else if(u.ctrlKey&&(u.altKey||u.metaKey)&&!u.shiftKey){if(x.lookupChar(u)==="E"){u.preventDefault(),u.stopPropagation(),this.controller.getSelectedItem()||this.controller.dispatch({type:"set-selected-index",index:0});var y=this.controller.getSelectedItem();y?(t.alert(this.controller.t("Expression list")),this.controller.dispatch({type:"move-focus-to-item",id:y.id})):t.alert(this.controller.t("Unable to focus expression list"))}else if(x.lookupChar(u)==="X")u.preventDefault(),u.stopPropagation(),this.controller.canUserAddExpressions()?(t.alert(this.controller.t("Add expression")),this.controller.dispatch({type:"new-expression"})):t.alert(this.controller.t("Unable to add expression"));else if(x.lookupChar(u)==="O")u.preventDefault(),u.stopPropagation(),this.controller.canUserAddExpressions()&&this.controller.areNotesEnabled()?(t.alert(this.controller.t("Add note")),this.controller.dispatch({type:"new-text"})):t.alert(this.controller.t("Unable to add note"));else if(x.lookupChar(u)==="F"&&this.controller.canUserAddExpressions()&&this.controller.areFoldersEnabled())u.preventDefault(),u.stopPropagation(),t.alert(this.controller.t("Add folder")),this.controller.dispatch({type:"new-folder"});else if(x.lookupChar(u)==="I"&&this.controller.canUserAddExpressions()&&this.controller.areImagesEnabled())u.preventDefault(),u.stopPropagation(),this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:!1}),this.controller.runAfterDispatch(function(){f.controller.find$(".dcg-add-expression-container input[type=file]").click(),t.alert(f.controller.t("Add image"))});else if(x.lookupChar(u)==="T")u.preventDefault(),u.stopPropagation(),this.controller.canUserAddExpressions()?(t.alert(this.controller.t("Add table")),this.controller.dispatch({type:"new-table"})):t.alert(this.controller.t("Unable to add table"));else if(x.lookupChar(u)==="G")u.preventDefault(),u.stopPropagation(),this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:!0});else if(x.lookupChar(u)==="P"){u.preventDefault(),u.stopPropagation();var h=this.controller.find$(".dcg-tabbable-point").filter("[tabindex=0]");h.length===0&&(h=this.controller.find$(".dcg-editable-label-border").find('input, textarea, [role="textbox"]')),this.focusElement(h.first(),this.controller.t("No interactive points on screen"))}else if(x.lookupChar(u)==="Z"){var p=this.controller.getSelectedItem();p&&p.id&&this.controller.dispatch({type:"expression-zoom-fit",id:p.id})}else if(x.lookupChar(u)==="D"&&this.controller.canUserAddExpressions()){u.preventDefault(),u.stopPropagation();var r=!this.controller.isInEditListMode();this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:r,focusExpressionList:!0})}}else if((u.altKey||u.metaKey)&&!u.ctrlKey&&u.shiftKey&&x.lookupChar(u)==="F"&&this.controller.isDecimalToFractionEnabled()){var o=this.controller.getSelectedItem();o&&o.type==="expression"&&(u.preventDefault(),u.stopPropagation(),this.controller.dispatch({type:"toggle-fraction-evaluation",id:o.id}),this.controller.runAfterDispatch(function(){n.shouldEvaluationDisplayAsFraction(o)?t.alert(f.controller.t("Show as Fraction")):t.alert(f.controller.t("Show as Decimal"))}))}else if(u.altKey||u.ctrlKey||u.metaKey||u.shiftKey){if(!u.metaKey&&!u.shiftKey&&u.ctrlKey===i.IS_APPLE&&u.altKey===!i.IS_APPLE){var m=x.lookupChar(u);if(m==="N")u.preventDefault(),u.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"nemeth"}),t.alert(this.controller.t("Braille mode Nemeth"));else if(m==="U")u.preventDefault(),u.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"ueb"}),t.alert(this.controller.t("Braille mode UEB"));else if(m==="Q"||m==="X")u.preventDefault(),u.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"none"}),t.alert(this.controller.t("Braille mode off"));else if(m==="6"){u.preventDefault(),u.stopPropagation();var b=!this.controller.getSixKeyInput();this.controller.dispatch({type:"set-six-key-input",useSixKeyInput:b}),t.alert(b?this.controller.t("Six Key Braille Input on"):this.controller.t("Six Key Braille Input off"))}}}else x.lookup(u)===x.BACKSPACE?document.activeElement&&s.elIsFocusable(l(document.activeElement))||u.preventDefault():x.lookup(u)===x.ESCAPE&&this.controller.isInEditListMode()&&this.controller.find$(".dcg-options-menu").length===0&&(u.preventDefault(),u.stopPropagation(),this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!0}))},d.prototype.focusElement=function(u,f){u.length?u.focus():f&&t.alert(f)},d})();c.default=g}),P("lib/defocus-mobile",["require","exports","jquery","touchtracking"],function(S,c,x,t){function l(){if(document.activeElement){var n=x(document.activeElement);t.elIsFocusable(n)&&x("<input />").prependTo("body").focus().attr({readonly:"readonly",disabled:"true"}).blur().remove()}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=l}),P("ipad.scrollfix",["require","jquery"],function(S){var c=S("jquery"),x=!1,t=function(){l(document),x=!0},l=function(n){x||c(n).bind("touchstart",function(i){var s=c(i.target),g=0,d=null;if(!s.closest("[disablescroll]").length)for(;g===0&&s.length&&s[0].tagName!==void 0;){var u=s.css("overflow"),f=s.css("overflow-y");if(u!=="hidden"&&u!=="visible"&&f!=="hidden"&&f!=="hidden"){var y=s.scrollTop();y!==0&&(g=2),s.scrollTop(y+1),s.scrollTop()!==y&&(g|=1,s.scrollTop(y))}s=s.parent()}if(g!==0){d=[];for(var h=i.originalEvent.touches,p=0;p<h.length;p++){var r={};for(var o in h[p])h[p].hasOwnProperty(o)&&(r[o]=h[p][o]);d.push(r)}}c(document).on("touchmove.scrollfix",function(m){if(d){var b=d[0],E=m.originalEvent.touches[0],M=E.screenY-b.screenY;(M>0&&!(2&g)||M<0&&!(1&g))&&(g=0),M&&(d=null)}g===0&&m.preventDefault()}),c(document).on("touchend.scrollfix",function(){c(document).off(".scrollfix")})})};return{limitScrollOnElement:l,limitScrollOnDocument:t}}),P("expressions/abstract-item-view",["require","exports","tslib","dcgview","jquery.handleevent"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=(function(n){function i(){return n!==null&&n.apply(this,arguments)||this}return x.__extends(i,n),i.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,this._isFirstRender=!0,this._isDragCopy=this.props.isDragCopy()},i.prototype.onItemViewMounted=function(){this._isDragCopy||(this.model.dcgView=this),this._isFirstRender=!1},i.prototype.onItemViewUnmounted=function(){this._isDragCopy||(this.model.dcgView=void 0)},i.prototype.isFirstRender=function(){return this._isFirstRender},i.prototype.onMouseSelect=function(s){if(this.controller.isInEditListMode())return void this.exitEditListMode();s.type==="dcg-tap"&&s.device==="mouse"||s.type==="dcg-tapstart"&&s.device==="touch"||s.wasHandled()||(s.handle(),this.controller.dispatch({type:"set-selected-id",id:this.id}))},i.prototype.onDelete=function(){this.controller.dispatch({type:"delete-item-and-animate-out",id:this.id,setFocusAfterDelete:!this.controller.isInEditListMode()})},i.prototype.onDragPending=function(s){this.props.onDragPending(s)},i.prototype.exitEditListMode=function(){this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!0})},i})(t.Class);c.default=l}),P("loadcss!dcgview-helpers/tooltipped-error",function(){}),P("dcgview-helpers/tooltipped-error",["require","exports","tslib","dcgview","lib/tooltip","loadcss!./tooltipped-error"],function(S,c,x,t,l){Object.defineProperty(c,"__esModule",{value:!0});var n=(function(i){function s(){return i!==null&&i.apply(this,arguments)||this}return x.__extends(s,i),s.prototype.template=function(){var g=this;return t.createElement(l.Tooltip,{tooltip:this.props.error,targetClickBehavior:this.const("stick"),gravity:this.props.gravity},t.createElement("div",{class:function(){return{"dcg-tooltipped-error":!0,"dcg-white":g.props.isWhite&&g.props.isWhite(),"dcg-small":g.props.size&&g.props.size()==="small"}}},t.createElement("i",{class:t.const("dcg-icon-error")})))},s})(t.Class);c.TooltippedError=n}),P("loadcss!expressions/circular-icon-view",function(){}),P("expressions/circular-icon-view",["require","exports","tslib","dcgview","loadcss!./circular-icon-view"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=t.Components.If,n=(function(i){function s(){return i!==null&&i.apply(this,arguments)||this}return x.__extends(s,i),s.prototype.template=function(){var g=this;return t.createElement("span",{class:function(){var d;return d={"dcg-do-not-blur":!0,"dcg-circular-icon":!0,"dcg-thick-outline":g.isThickOutline(),"dcg-white-icon":!!g.props.whiteIcon&&g.props.whiteIcon(),"dcg-hidden":g.isHidden(),"dcg-semi-transparent":g.props.semiTransparent&&g.props.semiTransparent(),"dcg-colored-icon":!g.isThickOutline()&&!g.isHidden()&&!g.hasBackgroundImage()&&g.props.iconType()!=="loading","dcg-has-background-image":g.hasBackgroundImage()},d[g.iconModifier()]=g.iconModifier().length>0,d},style:function(){return{background:g.getBackgroundColor()}}},t.createElement(l,{predicate:this.bindFn(this.hasBackgroundImage)},function(){return t.createElement("span",{class:t.const("dcg-background-image"),style:function(){return{"background-image":g.props.backgroundImage&&g.props.backgroundImage(),opacity:g.props.backgroundOpacity&&g.props.backgroundOpacity()}}})}),t.createElement(l,{predicate:function(){return!!g.backgroundIcon()}},function(){return t.createElement("i",{class:function(){var d;return d={},d[g.backgroundIcon()]=!0,d["dcg-layered-icon"]=!0,d},style:function(){return{opacity:g.backgroundOpacity()}}})}),t.createElement(l,{predicate:function(){return!!g.primaryIcon()}},function(){return t.createElement("i",{class:function(){var d;return d={},d[g.primaryIcon()]=!0,d["dcg-layered-icon"]=!0,d},style:function(){return{color:g.props.foregroundColor&&g.props.foregroundColor()}}})}),t.createElement(l,{predicate:function(){return g.props.iconType()==="loading"}},function(){return t.createElement("span",{class:t.const("dcg-spinner")})}))},s.prototype.iconModifier=function(){if(!this.props.iconModifier)return"";switch(this.props.iconModifier()){case"medium":return"dcg-modifier-size-medium";case"large":return"dcg-modifier-size-large";case"small":return"dcg-modifier-size-small";case"rotated":return"dcg-modifier-rotated";case"none":return""}},s.prototype.getBackgroundColor=function(){if(!this.isHidden()&&this.props.backgroundColor)return this.props.backgroundColor()},s.prototype.isHidden=function(){return this.props.iconType()==="hidden"},s.prototype.isThickOutline=function(){var g=this.props.iconType();return g==="folder"||g==="pause"||g==="play"||g==="fraction"},s.prototype.hasBackgroundImage=function(){return!!this.props.backgroundImage&&!this.isHidden()&&!!this.props.backgroundImage()},s.prototype.primaryIcon=function(){var g=this.props.iconType();switch(g){case"folder":return"dcg-icon-folder";case"pause":return"dcg-icon-pause";case"play":return"dcg-icon-play";case"polygon-dashed":case"polygon-dashed-filled":return"dcg-icon-polygon-dashed";case"polygon-dotted":case"polygon-dotted-filled":return"dcg-icon-polygon-dotted";case"polygon-default":case"polygon-default-filled":return"dcg-icon-polygon-solid";case"graph-dashed":case"parametric-dashed-filled":return"dcg-icon-parametric-dashed";case"graph-dotted":case"parametric-dotted-filled":return"dcg-icon-parametric-dotted";case"graph-default":case"parametric-default-filled":return"dcg-icon-parametric-solid";case"movable-vertical":return"dcg-icon-move-vertical";case"movable-both":return"dcg-icon-move";case"movable-horizontal":return"dcg-icon-move-horizontal";case"point-open":return"dcg-icon-open";case"point-cross":return"dcg-icon-cross";case"point-default":return"dcg-icon-point";case"table-points":case"table-points-and-lines":return"dcg-icon-points";case"table-lines":return"dcg-icon-lines-solid";case"shaded-inequality":case"inequality":return"dcg-icon-shaded-inequality-dash";case"check":return"dcg-icon-check";case"none":case"background":case"hidden":case"polygon-none-filled":case"parametric-none-filled":case"loading":return"";case"fraction":return"dcg-icon-fraction";case"boxplot":return"dcg-icon-boxplot";case"dotplot-cross":return"dcg-icon-dotplot-cross";case"dotplot-default":return"dcg-icon-dotplot-default";case"dotplot-open":return"dcg-icon-dotplot-open";case"histogram":return"dcg-icon-histogram";case"unfilled-distribution":case"filled-distribution":return"dcg-icon-distribution";default:return g}},s.prototype.backgroundOpacity=function(){var g=this.backgroundIcon();return g==="dcg-icon-polygon-filled"||g==="dcg-icon-parametric-filled"||g==="dcg-icon-shaded-inequality-shade2"||g==="dcg-icon-distribution-fill"||g==="dcg-icon-histogram-fill"?.5:1},s.prototype.backgroundIcon=function(){var g=this.props.iconType();return g==="filled-distribution"?"dcg-icon-distribution-fill":g==="histogram"?"dcg-icon-histogram-fill":g==="polygon-dashed-filled"||g==="polygon-dotted-filled"||g==="polygon-default-filled"||g==="polygon-none-filled"?"dcg-icon-polygon-filled":g==="parametric-dashed-filled"||g==="parametric-dotted-filled"||g==="parametric-default-filled"||g==="parametric-none-filled"?"dcg-icon-parametric-filled":g==="table-points-and-lines"?"dcg-icon-lines-solid":g==="shaded-inequality"?"dcg-icon-shaded-inequality-shade2":""},s})(t.Class);c.CircularIconView=n}),P("main/manage-focus-helper",["require","exports","underscore"],function(S,c,x){function t(i){return{shouldBeFocused:function(){return l(i)},onFocusedChanged:function(s){n(i,s)}}}function l(i){var s=i.controller.getFocusLocation();return s&&x.isEqual(s,i.location)}function n(i,s){s?i.controller.dispatch({type:"set-focus-location",location:i.location}):i.controller.dispatch({type:"blur-focus-location",location:i.location})}Object.defineProperty(c,"__esModule",{value:!0}),c.manageFocusHelper=t,c.defaultShouldBeFocused=l,c.defaultOnFocusChanged=n}),P("loadcss!expressions/play-pause-icon-view",function(){}),P("expressions/play-pause-icon-view",["require","exports","tslib","dcgview","lib/aria","./circular-icon-view","main/manage-focus-helper","graphing-calc/models/expression","core/types/slider-loop-modes","../lib/tooltip","jquery.handleevent","loadcss!./play-pause-icon-view"],function(S,c,x,t,l,n,i,s,g,d){Object.defineProperty(c,"__esModule",{value:!0});var u=(function(f){function y(){return f!==null&&f.apply(this,arguments)||this}return x.__extends(y,f),y.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},y.prototype.template=function(){var h=this;return t.createElement("div",{class:t.const("dcg-play-pause-icon-view")},t.createElement("div",{class:t.const("dcg-circular-icon-container"),"aria-label":this.bindFn(this.getAriaLabel),role:t.const("button"),tabindex:t.const("0"),onTap:function(p){p.wasHandled("dragdrop")||h.toggleSliderIsPlaying()},manageFocus:this.const(i.manageFocusHelper({controller:this.controller,location:{type:"slider-icon",id:this.model.id}}))},t.createElement(n.CircularIconView,{iconType:function(){return h.getIconType()},whiteIcon:function(){return!h.controller.isInEditListMode()&&h.controller.isItemSelected(h.model.id)||h.controller.isItemBeingDragged(h.model.id)}})),t.createElement("div",{class:t.const("dcg-slider-menu-container"),didMount:function(p){return h.rootElt=p}},t.createElement(d.Tooltip,{tooltip:function(){return h.controller.t("Animation Properties")},gravity:this.const("e"),offset:this.const({left:5})},t.createElement("div",{class:function(){return{"dcg-slider-menu-opener":!0,"dcg-menu-open":h.myOptionsOpen()}},tabindex:t.const(0),role:t.const("button"),"aria-label":function(){return h.myOptionsOpen()?h.controller.t("Hide Animation Properties"):h.controller.t("Show Animation Properties")},onTap:function(p){p.wasHandled("dragdrop")||p.wasLongheld()||h.toggleOptions(p)},manageFocus:this.const(i.manageFocusHelper({controller:this.controller,location:{type:"slider-animation-properties-icon",id:this.model.id}}))},t.createElement("i",{class:this.bindFn(this.getIcon)})))))},y.prototype.getIcon=function(){return g.getSliderIcon(this.model.slider.loopMode)},y.prototype.getIconType=function(){return this.model.slider.isPlaying?s.isSliderAtEndOfPlayOnce(this.model)?"play":"pause":"play"},y.prototype.myOptionsOpen=function(){var h=this.controller.getOpenItemMenu();return!!h&&h.model===this.model},y.prototype.toggleOptions=function(h){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"slider",model:this.model,icon:this.rootElt,focusFirstOption:h.device==="keyboard"}})},y.prototype.getAriaLabel=function(){if(!this.model.sliderExists)return"";var h=this.model.dependent;return h?this.model.slider.isPlaying?this.controller.t("Pause __variable__ Animation",{variable:h}):this.controller.t("Play __variable__ Animation",{variable:h}):""},y.prototype.toggleSliderIsPlaying=function(){if(this.model.sliderExists){var h="",p=this.model.dependent;s.isSliderAtEndOfPlayOnce(this.model)?(h=this.controller.t("__variable__ restarted",{variable:p}),this.controller.dispatch({type:"play-slider-from-min",id:this.model.id})):this.model.slider.isPlaying?(h=this.controller.t("__variable__ playing",{variable:p}),this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!1})):(h=this.controller.t("__variable__ paused",{variable:p}),this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!0})),l.alert(h)}},y})(t.Class);c.PlayPauseIconView=u}),P("expressions/expression-icon-view",["require","exports","tslib","dcgview","core/lib/dragmode","core/types/styles","core/math/comparators","core/math/expression-types","graphing-calc/models/expression","../dcgview-helpers/tooltipped-error","./play-pause-icon-view","./circular-icon-view","main/manage-focus-helper","jquery.handleevent"],function(S,c,x,t,l,n,i,s,g,d,u,f,y){Object.defineProperty(c,"__esModule",{value:!0});var h=t.Components.SwitchUnion,p=(function(r){function o(){return r!==null&&r.apply(this,arguments)||this}return x.__extends(o,r),o.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},o.prototype.template=function(){var m=this;return t.createElement("div",{class:t.const("dcg-expression-icon-container")},h(this.bindFn(this.getIconMode),{error:function(){return t.createElement(d.TooltippedError,{error:function(){return m.controller.unpack(m.model.error)},isWhite:function(){return m.controller.isItemSelected(m.model.id)||m.controller.isItemBeingDragged(m.model.id)},gravity:m.const("se")})},none:function(){return t.createElement("span",null)},slider:function(){return t.createElement(u.PlayPauseIconView,{controller:m.props.controller,model:m.props.model})},icon:function(){return t.createElement("div",{class:t.const("dcg-circular-icon-container"),role:t.const("button"),tabindex:t.const("0"),"aria-label":m.bindFn(m.getIconAriaLabel),onTap:function(b){if(!b.wasHandled("dragdrop")&&!b.wasLongheld())return m.myOptionsOpen()||m.controller.isInEditListMode()&&!m.isFraction()?m.toggleOptions(b):m.isFraction()?m.onToggleFractionDisplay():void m.toggleGraphShown()},didMount:function(b){return m.rootElt=b},onLongHold:function(b){b.handle("dcg-longhold"),b.handle("dcg-tap"),m.isFraction()||m.toggleOptions(b)},manageFocus:m.const(y.manageFocusHelper({controller:m.controller,location:{type:"expression-icon",id:m.model.id}}))},t.createElement(f.CircularIconView,{iconType:m.bindFn(m.getIconType),backgroundColor:m.bindFn(m.getBackgroundColor),whiteIcon:m.bindFn(m.isSelected),foregroundColor:m.bindFn(m.getForegroundColor),iconModifier:m.bindFn(m.getIconModifier)}))}}))},o.prototype.myOptionsOpen=function(){var m=this.controller.getOpenItemMenu();return!!m&&m.model===this.model},o.prototype.toggleOptions=function(m){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"expression",model:this.model,icon:this.rootElt,focusFirstOption:m.device==="keyboard"}})},o.prototype.isSelected=function(){return this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)},o.prototype.isFraction=function(){return this.controller.canDisplayEvaluationForItemAsFraction(this.model.id)},o.prototype.getIconMode=function(){return this.hasError()?"error":this.controller.getGraphSettings().config.graphpaper?this.model.isGraphable&&!this.model.loading?"icon":this.hasSlider()?"slider":this.isFraction()?"icon":"none":"none"},o.prototype.toggleGraphShown=function(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id})},o.prototype.hasError=function(){return!!this.model.error&&!g.isEmpty(this.model)&&this.controller.getBrailleMode()==="none"},o.prototype.hasSlider=function(){return!!this.model.sliderExists},o.prototype.getDisplayProps=function(){var m=this.model,b=m.points,E=m.lines,M=m.fill;return s.getReconciledExpressionProps(this.model.formula.expression_type,{points:b,lines:E,fill:M})},o.prototype.getBackgroundColor=function(){if(!this.isFraction())return this.model.color;var m=this.isSelected();return this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id)?m?"#fff":"#000":""},o.prototype.getForegroundColor=function(){if(!this.isFraction())return"";var m=this.isSelected();return m!==this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id)?"#fff":m?"#6399cb":"#000"},o.prototype.onToggleFractionDisplay=function(){this.controller.dispatch({type:"toggle-fraction-evaluation",id:this.model.id})},o.prototype.getIconModifier=function(){return g.isBoxPlot(this.model)&&g.getVizPropLatex(this.model,"alignedAxis")==="y"?"rotated":"none"},o.prototype.getIconType=function(){if(this.isFraction())return"fraction";if(!this.model.shouldGraph)return"hidden";if(this.controller.isInEditListMode())return"none";var m=this.model.pointStyle,b=this.model.lineStyle,E=this.getDisplayProps(),M=this.model.formula;if(g.isBoxPlot(this.model))return"boxplot";if(g.isDotPlot(this.model)){if(this.model.pointStyle==="POINT")return"dotplot-default";if(this.model.pointStyle==="CROSS")return"dotplot-cross";if(this.model.pointStyle==="OPEN")return"dotplot-open"}if(g.isHistogram(this.model))return"histogram";if(g.isToplevelDistribution(this.model))return g.shouldShowCDFFooter(this.model)?"filled-distribution":"unfilled-distribution";if(this.model.reconciledDragMode===l.DragMode.X)return"movable-horizontal";if(this.model.reconciledDragMode===l.DragMode.Y)return"movable-vertical";if(this.model.reconciledDragMode===l.DragMode.XY)return"movable-both";if(g.isPointOrPointList(this.model))return g.isSinglePoint(this.model)?m===n.PointStyle.OPEN?"point-open":m===n.PointStyle.CROSS?"point-cross":"point-default":E.lines&&E.points?"table-points-and-lines":E.lines?"table-lines":"table-points";var D=this.getDisplayProps().fill;if(g.isPolygon(this.model))return D?E.lines?b===n.LineStyle.DASHED?"polygon-dashed-filled":b===n.LineStyle.DOTTED?"polygon-dotted-filled":"polygon-default-filled":"polygon-none-filled":E.lines?b===n.LineStyle.DASHED?"polygon-dashed":b===n.LineStyle.DOTTED?"polygon-dotted":"polygon-default":"none";if(g.isParametric(this.model))return D?E.lines?b===n.LineStyle.DASHED?"parametric-dashed-filled":b===n.LineStyle.DOTTED?"parametric-dotted-filled":"parametric-default-filled":"parametric-none-filled":E.lines?b===n.LineStyle.DASHED?"graph-dashed":b===n.LineStyle.DOTTED?"graph-dotted":"graph-default":"none";var A=M.operator,v=i.table[A].direction!==0,k=i.table[A].inclusive===!1;return M.is_shade_between||!k&&v?"shaded-inequality":k&&!v?"inequality":k&&v?"shaded-inequality":b===n.LineStyle.DASHED?"graph-dashed":b===n.LineStyle.DOTTED?"graph-dotted":"graph-default"},o.prototype.getIconAriaLabel=function(){return this.isFraction()?g.shouldEvaluationDisplayAsFraction(this.model)?this.controller.t("Displaying as fraction. Press Enter to display as Decimal"):this.controller.t("Displaying as decimal. Press Enter to display as Fraction"):this.controller.isInEditListMode()?this.myOptionsOpen()?this.controller.t("Hide Options"):this.controller.t("Show Options"):this.model.hidden?this.controller.t("Show Expression"):this.controller.t("Hide Expression")},o})(t.Class);c.default=p}),P("loadcss!expressions/evaluation-view",function(){}),P("expressions/evaluation-view",["require","exports","tslib","dcgview","core/lib/label","../dcgview-helpers/mathquill-braille-wrapper","dcgview-helpers/static-mathquill-view","loadcss!./evaluation-view"],function(S,c,x,t,l,n,i){function s(y,h){return l.numericLabel(y,h)}Object.defineProperty(c,"__esModule",{value:!0});var g=t.Components,d=g.If,u=g.SwitchUnion,f=(function(y){function h(){return y!==null&&y.apply(this,arguments)||this}return x.__extends(h,y),h.prototype.init=function(){this.controller=this.props.controller()},h.prototype.template=function(){var p=this;return t.createElement("div",{class:t.const("dcg-evaluation-container")},t.createElement("div",{class:function(){return{"dcg-evaluation":!0,"dcg-do-blur":!0,"dcg-hidden":p.props.controller().isInEditListMode()}},handleEvent:t.const("true"),tabindex:function(){return p.props.focusable()&&p.controller.getBrailleMode()==="none"?"0":"-1"}},t.createElement(n.default,{latex:this.bindFn(this.getBrailleEvaluation),tooltipOptions:function(){return{gravity:"sw"}},ariaLabel:this.const(""),brailleShouldFocus:function(){var r=p.controller.getFocusLocation();return!!r&&r.type==="braille-output"&&r.id===p.props.id()},onBrailleInput:function(){},controller:this.props.controller,isStatic:this.const(!0),onBrailleFocusedChanged:function(r){r?p.controller.dispatch({type:"set-focus-location",location:{type:"braille-output",id:p.props.id()}}):p.controller.dispatch({type:"blur-focus-location",location:{type:"braille-output",id:p.props.id()}})}},t.createElement("div",{class:t.const("dcg-evaluation-label-container"),onTap:this.bindFn(this.onSelectEvaluation)},t.createElement(d,{predicate:function(){return!!p.props.dependent()}},function(){return t.createElement(i.default,{latex:function(){return l.identifierToLatex(p.props.dependent())}},t.createElement("span",null))}),t.createElement("span",{class:t.const("dcg-equals")},t.createElement(i.default,{latex:this.const("=")}))),t.createElement("span",{class:t.const("dcg-text-selectable dcg-evaluation-html"),didMount:this.bindFn(this.didMountEvaluation)},u(function(){return p.getEvaluationType()},{list:function(){return t.createElement("span",null,function(){return p.controller.t("__count__ element list",{count:p.props.val().length})})},fraction:function(){return t.createElement(i.default,{latex:function(){return l.truncatedLatexLabel(p.props.val(),p.getLabelOptions())}})},undefined:function(){return t.createElement("span",null,t.const("undefined"))},scientific:function(){return t.createElement(i.default,{latex:function(){return p.getNumberLabel().mantissa+"\\times10^{"+p.getNumberLabel().exponent+"}"}})},decimal:function(){return t.createElement(i.default,{latex:function(){return p.getNumberLabel().value}})}})))),t.createElement("div",{class:t.const("dcg-clear")}))},h.prototype.getNumberLabel=function(){return s(this.props.val(),this.getLabelOptions())},h.prototype.getEvaluationType=function(){var p=this.props.val();return Array.isArray(p)?"list":this.getNumberLabel().type},h.prototype.getLabelOptions=function(){return this.props.controller().getEvaluationLabelOptionsForItem(this.props.id())},h.prototype.didMountEvaluation=function(p){this.evaluationNode=p},h.prototype.onSelectEvaluation=function(){var p=document.createRange();p.selectNodeContents(this.evaluationNode);var r=window.getSelection();r&&(r.removeAllRanges(),(r=window.getSelection())&&r.addRange(p))},h.prototype.getBrailleEvaluation=function(){var p="";this.props.dependent()&&(p=l.identifierToLatex(this.props.dependent())),p+="=";var r=this.getEvaluationType();switch(r){case"list":p+=this.controller.t("__count__ element list",{count:this.props.val().length});break;case"fraction":p+=l.truncatedLatexLabel(this.props.val(),this.getLabelOptions());break;case"undefined":p="undefined";break;case"scientific":p+=this.getNumberLabel().mantissa+"\\times10^{"+this.getNumberLabel().exponent+"}";break;case"decimal":p+=this.getNumberLabel().value;break;default:return r}return p},h})(t.Class);c.default=f}),P("expressions/unresolved_view",["require","exports","tslib","dcgview"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=(function(n){function i(){return n!==null&&n.apply(this,arguments)||this}return x.__extends(i,n),i.prototype.template=function(){var s=this;return this.controller=this.props.controller(),t.createElement("div",{class:t.const("dcg-unresolved")},t.createElement("i",{class:t.const("dcg-icon-error")}),t.const(""),function(){return s.controller.t("This equation contains fine detail that has not been fully resolved.")},t.createElement("a",{href:t.const("http://support.desmos.com/entries/29577773-Unresolved-Detail-In-Plotted-Functions"),target:t.const("_blank")},function(){return s.controller.t("Learn more.")}))},i})(t.Class);c.default=l}),P("loadcss!domain",function(){}),P("expressions/domain_view",["require","exports","tslib","dcgview","jquery","keys","dcgview-helpers/mathquill-braille-wrapper","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","graphing-calc/models/expression","core/lib/label","bugsnag","loadcss!domain"],function(S,c,x,t,l,n,i,s,g,d,u,f){Object.defineProperty(c,"__esModule",{value:!0});var y=(function(h){function p(){return h!==null&&h.apply(this,arguments)||this}return x.__extends(p,h),p.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},p.prototype.template=function(){var r=this;return t.createElement("div",{class:t.const("dcg-domain dcg-do-blur"),handleEvent:t.const("true")},t.createElement("div",{class:t.const("dcg-display-domain dcg-do-blur"),handleEvent:t.const("true")},t.createElement("div",{class:t.const("dcg-editable-mathquill-container")},t.createElement(i.default,{latex:function(){return r.getMinLatex()},ariaLabel:function(){return r.controller.raw("dmin")},placeholder:function(){return u.value(d.getDomainMin(r.model)).string},brailleShouldFocus:function(){return r.getFocusedInput()==="min"},selectOnFocus:this.const(!0),onBrailleInput:function(o){return r.dispatchMinLatexIfChanged(o)},controller:this.props.controller,hasError:function(){return!d.isDomainMinValid(r.model)},onBrailleFocusedChanged:function(o){return r.handleFocusedChanged("min",o)},onBrailleKeydown:function(o){return r.handleBrailleKeydown("min",o)},dataLabelAttributeValue:this.const("domain-min")},t.createElement(g.default,{latex:function(){return r.getMinLatex()},placeholder:function(){return u.value(d.getDomainMin(r.model)).string},isFocused:function(){return r.getFocusedInput()==="min"},capExpressionSize:function(){return r.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.const({}),getAriaLabel:function(){return r.controller.t("domain Minimum: ")},getAriaPostLabel:this.const(""),hasError:function(){return!d.isDomainMinValid(r.model)},onUserPressedKey:function(o,m){r.handlePressedKey("min",o,m)},onUserChangedLatex:function(o){return r.dispatchMinLatexIfChanged(o)},onExpressionSizeExceeded:function(){return r.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(o){return r.handleFocusedChanged("min",o)},dataLabelAttributeValue:this.const("domain-min"),needsSystemKeypad:function(){return!r.controller.isKeypadEnabled()}})),t.createElement("span",{class:t.const("dcg-interval-interior")},t.createElement(s.default,{latex:function(){return r.getDomainVariableLatex()}},t.createElement("span",null))),t.createElement(i.default,{latex:function(){return r.getMaxLatex()},ariaLabel:function(){return r.controller.raw("dmax")},placeholder:function(){return u.value(d.getDomainMax(r.model)).string},brailleShouldFocus:function(){return r.getFocusedInput()==="max"},selectOnFocus:this.const(!0),onBrailleInput:function(o){return r.dispatchMaxLatexIfChanged(o)},controller:this.props.controller,hasError:function(){return!d.isDomainMaxValid(r.model)},onBrailleFocusedChanged:function(o){return r.handleFocusedChanged("max",o)},onBrailleKeydown:function(o){return r.handleBrailleKeydown("max",o)},dataLabelAttributeValue:this.const("domain-max")},t.createElement(g.default,{latex:function(){return r.getMaxLatex()},placeholder:function(){return u.value(d.getDomainMax(r.model)).string},isFocused:function(){return r.getFocusedInput()==="max"},capExpressionSize:function(){return r.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.const({}),getAriaLabel:function(){return r.controller.t("domain Maximum: ")},getAriaPostLabel:this.const(""),hasError:function(){return!d.isDomainMaxValid(r.model)},onUserPressedKey:function(o,m){r.handlePressedKey("max",o,m)},onUserChangedLatex:function(o){return r.dispatchMaxLatexIfChanged(o)},onExpressionSizeExceeded:function(){return r.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(o){return r.handleFocusedChanged("max",o)},dataLabelAttributeValue:this.const("domain-max"),needsSystemKeypad:function(){return!r.controller.isKeypadEnabled()}})))))},p.prototype.handleBrailleKeydown=function(r,o){var m=n.lookup(o);m&&this.handlePressedKey(r,m,l.Event(o))},p.prototype.handlePressedKey=function(r,o,m){if(!this.controller.isInEditListMode()){if(o==="Esc")return void this.controller.dispatch({type:"set-focus-location",location:void 0});if(o==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"})}var b=g.default.getFocusedMathquill(),E=i.getFocusedBrailleElement();if(o==="Left"||o==="Right"||o==="Down"||o==="Up")return void((b?g.default.applyArrowKeyAndReturnIfWasAtBounds(b,o,m):!(!E||!(E.selectionStart===0&&o==="Left"||E.selectionStart===l(E).val().length&&o==="Right"||o==="Up"||o==="Down")))&&(m&&m.preventDefault(),o==="Left"?r==="max"&&this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.model.id,location:"min"}}):o==="Right"?r==="min"&&this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.model.id,location:"max"}}):o==="Down"?this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}):o==="Up"&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.model.id}})));b&&(b.keystroke(o,m),r==="min"?this.dispatchMinLatexIfChanged(b.latex()):r==="max"&&this.dispatchMaxLatexIfChanged(b.latex()))},p.prototype.handleFocusedChanged=function(r,o){o?this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.id,location:r}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"domain-limit",id:this.id,location:r}})},p.prototype.dispatchMinLatexIfChanged=function(r){if(this.getMinLatex()!==r){var o=this.getDomainType();if(o==="unknown")return void f.notify("DomainView is in use for a non-parametric, non-polar expression",{severity:"error",metaData:{expression:d.getState(this.model,{stripDefaults:!0})}});this.controller.dispatch(o==="polar"?{type:"set-polar-domain-minlatex",id:this.id,latex:r}:{type:"set-parametric-domain-minlatex",id:this.id,latex:r})}},p.prototype.dispatchMaxLatexIfChanged=function(r){if(this.getMaxLatex()!==r){var o=this.getDomainType();if(o==="unknown")return void f.notify("DomainView is in use for a non-parametric, non-polar expression",{severity:"error",metaData:{expression:d.getState(this.model,{stripDefaults:!0})}});this.controller.dispatch(o==="polar"?{type:"set-polar-domain-maxlatex",id:this.id,latex:r}:{type:"set-parametric-domain-maxlatex",id:this.id,latex:r})}},p.prototype.getFocusedInput=function(){var r=this.controller.getFocusLocation();if(r&&r.type==="domain-limit"&&r.id===this.id)return r.location},p.prototype.getMinLatex=function(){switch(this.getDomainType()){case"parametric":return d.getParametricDomainMin(this.model);case"polar":return d.getPolarDomainMin(this.model);default:return""}},p.prototype.getMaxLatex=function(){switch(this.getDomainType()){case"parametric":return d.getParametricDomainMax(this.model);case"polar":return d.getPolarDomainMax(this.model);default:return""}},p.prototype.getDomainVariableLatex=function(){switch(this.getDomainType()){case"parametric":return"\\le t \\le";case"polar":return"\\le \\theta \\le";default:return""}},p.prototype.getDomainType=function(){return d.isPolar(this.model)?"polar":d.isParametric(this.model)?"parametric":"unknown"},p})(t.Class);c.default=y}),P("loadcss!regression",function(){}),P("expressions/regression_view",["require","exports","tslib","dcgview","core/lib/label","dcgview-helpers/static-mathquill-view","loadcss!regression"],function(S,c,x,t,l,n){function i(y,h){return l.truncatedLatexLabel(y.parameters[h],{zeroCutoff:1e-15,digits:6,smallCutoff:1e-6,bigCutoff:1e9})}function s(y,h){return l.truncatedLatexLabel(y.statistics[h],{zeroCutoff:1e-15,digits:4,smallCutoff:1e-6,bigCutoff:1e9})}Object.defineProperty(c,"__esModule",{value:!0});var g=t.Components,d=g.If,u=g.For,f=(function(y){function h(){return y!==null&&y.apply(this,arguments)||this}return x.__extends(h,y),h.prototype.template=function(){var p=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,t.createElement(d,{predicate:this.bindFn(this.getRegression)},function(){return t.createElement("div",{class:t.const("dcg-regression-container")},t.createElement("div",{class:t.const("dcg-handle-event"),handleEvent:t.const("true")},t.createElement(d,{predicate:p.bindFn(p.getShouldSuggestLogMode)},function(){return t.createElement("div",{class:t.const("dcg-log-mode-toggle")},t.createElement("div",{class:function(){return{"dcg-action-log-mode-toggle":!0,"dcg-toggled-on":p.getIsLogModeRegression()}},onTap:p.bindFn(p.onTapLogMode)},t.createElement("span",{class:t.const("dcg-log-mode-checkbox"),role:t.const("checkbox"),"aria-checked":function(){return p.getIsLogModeRegression()},tabindex:t.const("0"),"aria-label":function(){return p.controller.t("Log Mode")}},t.createElement("i",{class:t.const("dcg-icon-check")})),function(){return p.controller.t("Log Mode")}),t.createElement("a",{"aria-label":function(){return p.controller.t("Log Mode Help")},class:t.const("dcg-log-mode-toggle-help"),target:t.const("_blank"),href:t.const("http://support.desmos.com/hc/en-us/articles/204349605")},t.createElement("i",{class:t.const("dcg-icon-question-sign")})))}),t.createElement("div",{class:t.const("dcg-statistics"),role:t.const("group"),"aria-label":function(){return p.controller.t("Statistics")}},t.createElement("div",{class:t.const("dcg-expression-footer-title")},function(){return p.controller.t("Statistics")},t.createElement(d,{predicate:function(){return p.getRegression().statistics.hasOwnProperty("RMSE")}},function(){return t.createElement("a",{class:t.const("dcg-expression-footer-title-help"),target:t.const("_blank"),href:t.const("http://support.desmos.com/entries/60176149-What-is-RMSE-"),"aria-label":function(){return p.controller.t("What is RMSE?")}},t.createElement("i",{class:t.const("dcg-icon-question-sign")}))}),t.createElement(d,{predicate:function(){return p.getRegression().statistics.Rsquared<0}},function(){return t.createElement("a",{"aria-label":function(){return p.controller.t("Why am I seeing a negative R Squared value?")},class:t.const("dcg-expression-footer-title-help"),target:t.const("_blank"),href:t.const("http://support.desmos.com/entries/60460125-Why-am-I-seeing-a-negative-R-2-value-")},t.createElement("i",{class:t.const("dcg-icon-question-sign")}))})),t.createElement("div",{class:t.const("dcg-statistics-values")},t.createElement(d,{predicate:function(){return p.getRegression().statistics.hasOwnProperty("Rsquared")}},function(){return t.createElement("div",null,t.createElement(n.default,{latex:function(){return"R^2="+s(p.getRegression(),"Rsquared")}},t.createElement("span",{tabindex:t.const("0")})))}),t.createElement(d,{predicate:function(){return p.getRegression().statistics.hasOwnProperty("rsquared")}},function(){return t.createElement("div",null,t.createElement(n.default,{latex:function(){return"r^2="+s(p.getRegression(),"rsquared")}},t.createElement("span",{tabindex:t.const("0")})))}),t.createElement(d,{predicate:function(){return p.getRegression().statistics.hasOwnProperty("r")}},function(){return t.createElement("div",null,t.createElement(n.default,{latex:function(){return"r="+s(p.getRegression(),"r")}},t.createElement("span",{class:t.const("dcg-r-value"),tabindex:t.const("0")})))}),t.createElement(d,{predicate:function(){return p.getRegression().statistics.hasOwnProperty("RMSE")}},function(){return t.createElement("div",null,t.createElement(n.default,{latex:function(){return"\\operatorname{RMSE}="+s(p.getRegression(),"RMSE")}},t.createElement("span",{tabindex:t.const("0")})))}))),t.createElement("div",{role:t.const("group"),"aria-label":function(){return p.controller.t("Residuals")},class:t.const("dcg-residuals")},t.createElement("div",{class:t.const("dcg-expression-footer-title")},function(){return p.controller.t("Residuals")}),t.createElement(n.default,{latex:p.bindFn(p.getResidualVariable)},t.createElement("span",{class:t.const("dcg-residuals-variable"),tabindex:t.const("0")})),t.createElement("div",{class:function(){return{"dcg-residual-suggestion":!0,"dcg-action-plot-residual":!0,"dcg-btn":!0,"dcg-btn-light-gray":!0,"dcg-visible":p.getResidualSuggestionVisible()}},"aria-hidden":function(){return!p.getResidualSuggestionVisible()},role:t.const("button"),tabindex:function(){return p.getResidualSuggestionVisible()?"0":void 0},onTap:p.bindFn(p.onTapResidualsSuggestion)},function(){return p.controller.t("plot")})),t.createElement(d,{predicate:function(){return Object.keys(p.getRegression().parameters).length>0}},function(){return t.createElement("div",{class:t.const("dcg-parameters-container")},t.createElement("div",{class:t.const("dcg-expression-footer-title")},function(){return p.controller.t("Parameters")}),t.createElement(u,{each:function(){return Object.keys(p.getRegression().parameters)}},t.createElement("div",{role:t.const("group"),"aria-label":function(){return p.controller.t("Parameters")},class:t.const("dcg-parameters")},function(r){return t.createElement(n.default,{latex:function(){return r+"="+i(p.getRegression(),r)}},t.createElement("span",{class:t.const("dcg-parameter"),tabindex:t.const("0")}))})))}),t.createElement("div",{class:t.const("dcg-clear")})))})},h.prototype.onTapResidualsSuggestion=function(){this.controller.dispatch({type:"plot-residuals",id:this.id})},h.prototype.onTapLogMode=function(){this.controller.dispatch({type:"toggle-logmode",id:this.id})},h.prototype.getRegression=function(){return this.model.formula.regression},h.prototype.getResidualVariable=function(){return this.getRegression().residualVariable||""},h.prototype.getResidualSuggestionVisible=function(){return this.getRegression().residualSuggestionId!==void 0},h.prototype.getShouldSuggestLogMode=function(){return!!this.getRegression().shouldSuggestLogMode},h.prototype.getIsLogModeRegression=function(){return!!this.model.isLogModeRegression},h})(t.Class);c.default=f,c.getRoundedParam=i,c.getRoundedStat=s}),(function(){P("dcgview-helpers/dragdrop",["require","underscore","underscore_model","jquery","pjs","lib/animation-frame"],function(S){var c,x,t,l;return S("underscore"),l=S("underscore_model").UnderscoreModel,c=S("jquery"),t=S("pjs"),x=S("lib/animation-frame"),t(l,function(n,i){return{init:function(s){return this.options=s??{},i.init.call(this),this.dragging=!1},_evt2pt:function(s){return{x:s.changedTouches[0].pageX-this._offsetPt.x,y:s.changedTouches[0].pageY-this._offsetPt.y}},_dispatch:function(s,g){var d;if(!this._destroyed)return d=this._evt2pt(g),this.triggerEvent(s,{x:d.x,y:d.y,dx:d.x-this._startPt.x,dy:d.y-this._startPt.y,evt:g})},destroy:function(){return c(document).off("."+this.guid),this._destroyed=!0},startDrag:function(s,g){if(g==null&&(g={}),!this.dragging)return c(document).on("dcg-tapmove."+this.guid,(function(d){return function(u){if(u.originalEvent.preventDefault(),!d.options.doNotThrottle)return x.cancelAnimationFrame(d.frameThrottle),d.frameThrottle=x.requestAnimationFrame(function(){return d.doDrag(u)});d.doDrag(u)}})(this)),c(document).on("dcg-tapend."+this.guid+" dcg-tapcancel."+this.guid,(function(d){return function(u){return d.endDrag(u)}})(this)),this._offsetPt={x:0,y:0},g.origin!=null&&(this._offsetPt={x:this._evt2pt(s).x-g.origin.x,y:this._evt2pt(s).y-g.origin.y}),this._startPt=this._evt2pt(s),this.setProperty("dragging",!0),this._dispatch("onGrab",s)},doDrag:function(s){if(this.dragging)return this._dispatch("onDrag",s)},endDrag:function(s){if(this.dragging)return c(document).off("."+this.guid),this.doDrag(s),this.setProperty("dragging",!1),this._dispatch("onDrop",s)}}})})}).call(this),P("loadcss!dcgview-helpers/slider",function(){}),P("dcgview-helpers/slider",["require","exports","./dragdrop","lib/rounding","tslib","keys","dcgview","jquery","lib/conditional_blur","loadcss!./slider"],function(S,c,x,t,l,n,i,s,g){function d(y,h,p){return Math.min(Math.max(y,h),p)}Object.defineProperty(c,"__esModule",{value:!0});var u=i.Components.If,f=(function(y){function h(){return y!==null&&y.apply(this,arguments)||this}return l.__extends(h,y),h.prototype.template=function(){var p=this;return i.createElement("div",{class:function(){return{"dcg-slider-interior":!0,"dcg-disable-slider":p.shouldDisableSlider()}},didMount:this.bindFn(this.didMountRoot),onTapStart:this.bindFn(this.onStartDrag),style:i.const({"touch-action":"none"})},i.createElement("div",{class:i.const("dcg-track")},i.createElement("div",{class:i.const("dcg-ticks"),onMount:this.bindFn(this.didMountTickMarks)}),i.createElement("div",{class:i.const("dcg-graphic")})),i.createElement(u,{predicate:this.bindFn(this.shouldShowZeroMarker)},function(){return i.createElement("div",{class:i.const("dcg-zeroMarker"),style:function(){return{left:p.getZeroMarkerPercent()+"%"}}})}),i.createElement("div",{class:function(){return{"dcg-thumb":!0,"dcg-down":p.isDragging}},role:i.const("slider"),tabindex:i.const("0"),disablescroll:i.const("true"),style:function(){return{left:p.getThumbPercent()+"%"}},onKeyDown:this.bindFn(this.onKeyDown),"aria-label":this.props.ariaLabel,"aria-valuemin":this.props.min,"aria-valuemax":this.props.max,"aria-valuenow":this.props.value,manageFocus:this.buildFocusManager()},i.createElement("div",{class:i.const("dcg-graphic")}),i.createElement("div",{class:i.const("dcg-center")})))},h.prototype.willUnmount=function(){this.dragDrop.destroy()},h.prototype.didMountRoot=function(p){var r=this;this.rootNode=p,this.dragDrop=x(),this.isMounted=!0,this.dragDrop.observeEvent("onDrop",function(){r.isDragging=!1,r.update(),r.props.onDrop&&r.props.onDrop()}),this.dragDrop.observeEvent("onGrab",function(){r.isDragging=!0,r.update(),r.props.onGrab&&r.props.onGrab()}),this.dragDrop.observeEvent("onDrag",function(o,m){r.props.onDragUpdate(r.valueFromPixels(m.x))})},h.prototype.didMountTickMarks=function(p){this.tickMarksNode=p,this.renderTickMarks()},h.prototype.didUpdate=function(){this.renderTickMarks()},h.prototype.shouldDisableSlider=function(){return this.props.min()===this.props.max()},h.prototype.renderTickMarks=function(){if(this.tickMarksNode){var p,r=this.props.step(),o=this.props.min(),m=this.props.max();if(p=r===void 0?0:100*r/(m-o),p<3&&(p=0),p>100&&(p=0),isNaN(p)&&(p=0),this.lastTickMarksPercent!==p){this.lastTickMarksPercent=p;var b="";if(p>0&&p<100)for(var E=p;E<100;E+=p)b+='<div class="dcg-tick" style="left:'+E+'%"></div>';this.tickMarksNode.innerHTML=b}}},h.prototype.shouldShowZeroMarker=function(){return this.props.min()<=0&&this.props.max()>=0},h.prototype.getZeroMarkerPercent=function(){var p=this.props.min();return 100*(0-p)/(this.props.max()-p)},h.prototype.getThumbPercent=function(){return 100*this.percentFromValue(this.props.value())},h.prototype.valueFromPixels=function(p){if(!this.isMounted)return 0;var r=this.props.min(),o=this.props.max(),m=this.rootNode.getBoundingClientRect().width,b=d(p/m,0,1),E=r+(o-r)*b,M=(o-r)/m;return t.shortestDecimalBetween(E-M,E+M)},h.prototype.percentFromValue=function(p){var r=this.props.min();return d((p-r)/(this.props.max()-r),0,1)},h.prototype.pixelsFromValue=function(p){if(!this.isMounted)return 0;var r=this.percentFromValue(p);return this.rootNode.getBoundingClientRect().width*r},h.prototype.onKeyDown=function(p){switch(n.lookup(p)){case n.UP:this.props.onUpPress&&(this.props.onUpPress(),p.preventDefault());break;case n.DOWN:this.props.onDownPress&&(this.props.onDownPress(),p.preventDefault());break;case n.ENTER:this.props.onEnterPress&&(this.props.onEnterPress(),p.preventDefault());break;case n.ESCAPE:document.activeElement&&s(document.activeElement).blur();break;case n.LEFT:this.props.onKeyboardUpdate("down"),p.preventDefault();break;case n.RIGHT:this.props.onKeyboardUpdate("up"),p.preventDefault();break;case n.PAGEDOWN:this.props.onKeyboardUpdate("bigdown"),p.preventDefault();break;case n.PAGEUP:this.props.onKeyboardUpdate("bigup"),p.preventDefault();break;case n.HOME:this.props.onKeyboardUpdate("min"),p.preventDefault();break;case n.END:this.props.onKeyboardUpdate("max"),p.preventDefault()}},h.prototype.onStartDrag=function(p){if(p.device!=="keyboard"&&p.target){p.preventDefault(),g.default();var r={x:0,y:0};s(p.target).closest(".dcg-thumb").length===1?r.x=this.pixelsFromValue(this.props.value()):r.x=p.changedTouches[0].clientX-this.rootNode.getBoundingClientRect().left,this.dragDrop.startDrag(p,{origin:r})}},h.prototype.buildFocusManager=function(){return this.props.onFocusedChanged&&this.props.isFocused?this.const({shouldBeFocused:this.props.isFocused,onFocusedChanged:this.props.onFocusedChanged}):this.const(void 0)},h})(i.Class);c.default=f}),P("expressions/slider_limits_view",["require","exports","tslib","jquery","dcgview","dcgview-helpers/mathquill-braille-wrapper","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","keys","graphing-calc/models/expression","core/lib/label","core/types/slider-loop-modes"],function(S,c,x,t,l,n,i,s,g,d,u,f){Object.defineProperty(c,"__esModule",{value:!0});var y=l.Components.If,h=(function(p){function r(){return p!==null&&p.apply(this,arguments)||this}return x.__extends(r,p),r.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},r.prototype.template=function(){var o=this;return l.createElement("div",{class:l.const("dcg-slider_menu dcg-do-blur"),handleEvent:l.const("true"),didMount:function(m){return o.node=m}},l.createElement("div",{class:l.const("dcg-editable-mathquill-container")},l.createElement(y,{predicate:function(){return!o.shouldOnlyShowStep()}},function(){return l.createElement("span",null,l.createElement(n.default,{latex:function(){return o.model.slider.hardMin?o.model.slider.min:""},ariaLabel:function(){return o.controller.raw("sldrmin")},brailleShouldFocus:function(){return o.getFocusedInput()==="min"},onBrailleInput:function(m){return o.handleLatexChanged("min",m)},controller:o.props.controller,hasError:function(){return!d.isSliderMinValid(o.model)},onBrailleFocusedChanged:function(m,b){return o.handleFocusedChanged("min",m,b)},onBrailleKeydown:function(m){return o.handleBrailleKeydown("min",m)},selectOnFocus:o.const(!0),dataDCGLimit:o.const("slidermin")},l.createElement(s.default,{latex:function(){return o.model.slider.hardMin?o.model.slider.min:""},isFocused:function(){return o.getFocusedInput()==="min"},capExpressionSize:function(){return o.controller.getCapExpressionSize()},selectOnFocus:o.const(!0),config:o.const({}),getAriaLabel:function(){return o.controller.t("Slider Minimum: ")},getAriaPostLabel:o.const(""),hasError:o.const(!1),onUserPressedKey:function(m,b){return o.handlePressedKey("min",m,b)},onUserChangedLatex:function(m){return o.handleLatexChanged("min",m)},onExpressionSizeExceeded:function(){return o.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(m,b){return o.handleFocusedChanged("min",m,b)},needsSystemKeypad:function(){return!o.controller.isKeypadEnabled()}},l.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":o.getFocusedInput()==="min","dcg-invalid":!d.isSliderMinValid(o.model)}},"data-dcg-limit":l.const("slidermin")}))),l.createElement("span",{class:l.const("dcg-interval-interior")},l.createElement(i.default,{latex:o.bindFn(o.getDependentLatex)},l.createElement("span",null))),l.createElement(n.default,{latex:function(){return o.model.slider.hardMax?o.model.slider.max:""},ariaLabel:function(){return o.controller.raw("sldrmax")},brailleShouldFocus:function(){return o.getFocusedInput()==="max"},onBrailleInput:function(m){return o.handleLatexChanged("max",m)},controller:o.props.controller,hasError:function(){return!d.isSliderMaxValid(o.model)},onBrailleFocusedChanged:function(m,b){return o.handleFocusedChanged("max",m,b)},onBrailleKeydown:function(m){return o.handleBrailleKeydown("max",m)},selectOnFocus:o.const(!0),dataDCGLimit:o.const("slidermax")},l.createElement(s.default,{latex:function(){return o.model.slider.hardMax?o.model.slider.max:""},isFocused:function(){return o.getFocusedInput()==="max"},capExpressionSize:function(){return o.controller.getCapExpressionSize()},selectOnFocus:o.const(!0),config:o.const({}),getAriaLabel:function(){return o.controller.t("Slider Maximum: ")},getAriaPostLabel:o.const(""),hasError:o.const(!1),onUserPressedKey:function(m,b){return o.handlePressedKey("max",m,b)},onUserChangedLatex:function(m){return o.handleLatexChanged("max",m)},onExpressionSizeExceeded:function(){return o.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(m,b){return o.handleFocusedChanged("max",m,b)},needsSystemKeypad:function(){return!o.controller.isKeypadEnabled()}},l.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":o.getFocusedInput()==="max","dcg-invalid":!d.isSliderMaxValid(o.model)}},"data-dcg-limit":l.const("slidermax")}))))}),l.createElement("span",{class:function(){return{"dcg-slider-step-container":!o.shouldOnlyShowStep()}}},l.createElement("span",{class:l.const("dcg-slider-step-label"),"aria-hidden":l.const("true")},function(){return o.controller.t("Step:")}),l.createElement(n.default,{latex:function(){return o.model.slider.step},ariaLabel:function(){return o.controller.raw("sldrstp")},brailleShouldFocus:function(){return o.getFocusedInput()==="step"},onBrailleInput:function(m){return o.handleLatexChanged("step",m)},controller:this.props.controller,hasError:function(){return!d.isSliderStepValid(o.model)},onBrailleFocusedChanged:function(m,b){return o.handleFocusedChanged("step",m,b)},onBrailleKeydown:function(m){return o.handleBrailleKeydown("step",m)},selectOnFocus:this.const(!0),dataDCGLimit:this.const("sliderstep")},l.createElement(s.default,{latex:function(){return o.model.slider.step},isFocused:function(){return o.getFocusedInput()==="step"},capExpressionSize:function(){return o.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.const({}),getAriaLabel:function(){return o.controller.t("Slider Step Size: ")},getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserPressedKey:function(m,b){return o.handlePressedKey("step",m,b)},onUserChangedLatex:function(m){return o.handleLatexChanged("step",m)},onExpressionSizeExceeded:function(){return o.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(m,b){return o.handleFocusedChanged("step",m,b)},needsSystemKeypad:function(){return!o.controller.isKeypadEnabled()}},l.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":o.getFocusedInput()==="step","dcg-invalid":!d.isSliderStepValid(o.model)}},"data-dcg-limit":l.const("sliderstep")}))))))},r.prototype.handleBrailleKeydown=function(o,m){var b=g.lookup(m);b&&this.handlePressedKey(o,b,t.Event(m))},r.prototype.handlePressedKey=function(o,m,b){if(!(this.controller.isInEditListMode()||this.shouldOnlyShowStep()||m!=="Esc"&&m!=="Enter"))return void this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.id}});var E=s.default.getFocusedMathquill(),M=n.getFocusedBrailleElement();if(m==="Left"||m==="Right"||m==="Down"||m==="Up")return void((E?s.default.applyArrowKeyAndReturnIfWasAtBounds(E,m,b):!(!M||!(M.selectionStart===0&&m==="Left"||M.selectionStart===t(M).val().length&&m==="Right"||m==="Up"||m==="Down")))&&(b&&b.preventDefault(),m!=="Left"||this.shouldOnlyShowStep()?m!=="Right"||this.shouldOnlyShowStep()?m==="Down"?this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}):m==="Up"&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.model.id}}):o==="min"?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"max"}}):o==="max"&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"step"}}):o==="max"?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"min"}}):o==="step"&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"max"}})));E&&(E.keystroke(m,b),this.handleLatexChanged(o,E.latex()))},r.prototype.shouldOnlyShowStep=function(){return this.model.slider.loopMode===f.SliderLoopMode.PLAY_INDEFINITELY},r.prototype.handleLatexChanged=function(o,m){o==="min"?this.dispatchMinLatexIfChanged(m):o==="max"?this.dispatchMaxLatexIfChanged(m):o==="step"&&this.dispatchStepLatexIfChanged(m)},r.prototype.handleFocusedChanged=function(o,m,b){m&&this.getFocusedInput()!==o?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:o}}):this.getFocusedInput()!==o||this.controller.getBrailleMode()!=="none"||b.relatedTarget&&this.node.contains(b.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"slider-limit",id:this.id,location:o}})},r.prototype.dispatchMinLatexIfChanged=function(o){this.model.slider.min!==o&&this.controller.dispatch({type:"set-slider-minlatex",id:this.id,latex:o})},r.prototype.dispatchMaxLatexIfChanged=function(o){this.model.slider.max!==o&&this.controller.dispatch({type:"set-slider-maxlatex",id:this.id,latex:o})},r.prototype.dispatchStepLatexIfChanged=function(o){this.model.slider.step!==o&&this.controller.dispatch({type:"set-slider-steplatex",id:this.id,latex:o})},r.prototype.getDependentLatex=function(){var o=this.model.dependent||"";return" \\le "+u.identifierToLatex(o)+" \\le "},r.prototype.getFocusedInput=function(){var o=this.controller.getFocusLocation();if(o&&o.type==="slider-limit"&&o.id===this.id)return o.location},r})(l.Class);c.default=h}),P("loadcss!expressions/slider-view",function(){}),P("expressions/slider_view",["require","exports","tslib","jquery","keys","dcgview","dcgview-helpers/slider","./slider_limits_view","dcgview-helpers/static-mathquill-view","graphing-calc/models/expression","core/types/slider-loop-modes","loadcss!./slider-view"],function(S,c,x,t,l,n,i,s,g,d,u){Object.defineProperty(c,"__esModule",{value:!0});var f=n.Components.If,y=(function(h){function p(){return h!==null&&h.apply(this,arguments)||this}return x.__extends(p,h),p.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},p.prototype.template=function(){var r=this;return n.createElement("span",{class:n.const("dcg-slider-container"),tapboundary:n.const("true"),onKeydown:function(o){l.lookup(o)!=="Tab"||o.altKey||o.metaKey||o.ctrlKey||(o.shiftKey?r.isSliderMinFocused()&&r.controller.isInEditListMode()?(o.target!==null&&t(o.target).closest(".dcg-expressionitem").find('[tabindex="0"]:visible:first').focus(),o.preventDefault(),o.stopPropagation()):r.isSliderThumbFocused()&&(r.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:r.id,location:"step"}}),o.preventDefault(),o.stopPropagation()):!o.shiftKey&&r.isSliderStepFocused()&&(r.controller.isInEditListMode()?r.controller.dispatch({type:"set-focus-location",location:{type:"slider-icon",id:r.id}}):r.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:r.id}}),o.preventDefault(),o.stopPropagation()))}},n.createElement(f,{predicate:function(){return r.shouldShowSlider()}},function(){return n.createElement("div",{class:n.const("dcg-do-blur dcg-slider"),handleEvent:n.const("true")},n.createElement("div",{class:n.const("dcg-minLabel dcg-template-minlabelhtml"),role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return r.controller.t("Edit __variable__ Limits",{variable:r.controller.getBrailleMode()==="none"?'"'+r.model.dependent+'"':""+r.model.dependent})},onTap:function(){return r.onEditLimit("min")}},n.createElement(g.default,{latex:function(){return d.getDisplaySliderMin(r.model)}})),n.createElement(i.default,{min:function(){return d.getSliderMin(r.model)},max:function(){return d.getSliderMax(r.model)},step:function(){return d.getSliderStep(r.model)},value:function(){return d.getSliderValue(r.model)},ariaLabel:function(){return r.controller.getBrailleMode()==="none"?'"'+r.model.dependent+'"':""+r.model.dependent},onGrab:r.bindFn(r.onGrab),onDrop:r.bindFn(r.onDrop),onDragUpdate:r.bindFn(r.onDragUpdate),onKeyboardUpdate:r.bindFn(r.onKeyboardUpdate),onUpPress:function(){return r.controller.dispatch({type:"on-special-key-pressed",key:"Up"})},onDownPress:function(){return r.controller.dispatch({type:"on-special-key-pressed",key:"Down"})},onEnterPress:function(){return r.controller.dispatch({type:"on-special-key-pressed",key:"Enter"})},isFocused:r.bindFn(r.isSliderThumbFocused),onFocusedChanged:function(o){o?r.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:r.id}}):r.controller.dispatch({type:"blur-focus-location",location:{type:"slider-thumb",id:r.id}})}}),n.createElement("div",{class:n.const("dcg-maxLabel dcg-template-maxlabelhtml"),onTap:function(){return r.onEditLimit("max")}},n.createElement(g.default,{latex:function(){return d.getDisplaySliderMax(r.model)}})))}),n.createElement(f,{predicate:function(){return r.shouldShowLimitInputs()}},function(){return n.createElement(s.default,{model:r.props.model,controller:r.props.controller})}))},p.prototype.onGrab=function(){this.dispatchIsDraggingIfChanged(!0)},p.prototype.onDrop=function(){this.controller.dispatch({type:"set-none-selected"}),this.dispatchIsPlayingIfChanged(!1),this.dispatchIsDraggingIfChanged(!1)},p.prototype.onKeyboardUpdate=function(r){this.controller.dispatch({type:"adjust-slider-by-keyboard",id:this.id,adjustment:r})},p.prototype.onDragUpdate=function(r){this.controller.dispatch({type:"adjust-slider-by-dragging-thumb",id:this.model.id,target:r})},p.prototype.onEditLimit=function(r){this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:r}})},p.prototype.dispatchIsPlayingIfChanged=function(r){this.model.slider.isPlaying!==r&&this.controller.dispatch({type:"set-slider-isplaying",id:this.id,isPlaying:r})},p.prototype.dispatchIsDraggingIfChanged=function(r){this.model.sliderDragging!==r&&this.controller.dispatch({type:"set-slider-dragging",id:this.id,dragging:r})},p.prototype.shouldShowLimitInputs=function(){if(this.controller.isInEditListMode()||!d.isSliderMinValid(this.model)||!d.isSliderMaxValid(this.model)||!d.isSliderStepValid(this.model)||this.model.slider.loopMode===u.SliderLoopMode.PLAY_INDEFINITELY)return!0;var r=this.controller.getFocusLocation();return!(!r||r.type!=="slider-limit"&&r.type!=="expression"||r.id!==this.id)},p.prototype.shouldShowSlider=function(){return!this.shouldShowLimitInputs()},p.prototype.isSliderThumbFocused=function(){var r=this.controller.getFocusLocation();return!(!r||r.type!=="slider-thumb"||r.id!==this.id)},p.prototype.isSliderMinFocused=function(){var r=this.controller.getFocusLocation();return!(!r||r.type!=="slider-limit"||r.id!==this.id||r.location!=="min")},p.prototype.isSliderStepFocused=function(){var r=this.controller.getFocusLocation();return!(!r||r.type!=="slider-limit"||r.id!==this.id||r.location!=="step")},p})(n.Class);c.default=y}),P("loadcss!prompt-sliders",function(){}),P("expressions/promptslider_view",["require","exports","tslib","core/lib/label","jquery","lib/aria","dcgview","loadcss!prompt-sliders"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=i.Components,g=s.For,d=s.If,u=(function(f){function y(){return f!==null&&f.apply(this,arguments)||this}return x.__extends(y,f),y.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},y.prototype.template=function(){var h=this;return i.createElement("div",{class:i.const("dcg-create-sliders dcg-action-createslider"),handleEvent:i.const("true"),onTap:this.bindFn(this.onCreateSlider)},i.createElement("span",{class:i.const("dcg-msg")},function(){return h.controller.t("add slider:")}),i.createElement("span",{class:i.const("btns")},i.createElement(g,{each:function(){return h.model.missingVariables.slice(0,4)}},i.createElement("span",null,function(p){return i.createElement("div",{class:i.const("dcg-slider-btn-container"),var_name:h.const(p)},i.createElement("div",{role:i.const("button"),tabindex:i.const("0"),class:function(){return{"dcg-btn-slider":!0,"dcg-btn-blue":h.model.missingVariables.length===1,"dcg-btn-light-gray":h.model.missingVariables.length!==1}},didMount:function(r){r.innerHTML=t.identifierToHTML(p)}}))})),i.createElement(d,{predicate:function(){return h.model.missingVariables.length>1}},function(){return i.createElement("div",{class:i.const("dcg-slider-btn-container dcg-all")},i.createElement("div",{role:i.const("button"),tabindex:i.const("0"),class:i.const("dcg-btn-slider dcg-btn-blue")},function(){return h.controller.t("all")}))})))},y.prototype.onCreateSlider=function(h){if(this.controller.dispatch({type:"set-none-selected"}),h.target){var p=l(h.target).closest(".dcg-slider-btn-container");if(p.length){var r=!1;if(p.hasClass("dcg-all"))this.controller.dispatch({type:"create-sliders-for-item",id:this.model.id,variables:this.model.missingVariables}),r=!0;else{var o=[p.attr("var_name")];this.controller.dispatch({type:"create-sliders-for-item",id:this.model.id,variables:o}),r=this.model.missingVariables.length==1}if(h.device==="keyboard"){var m=this.model.id,b=this.props.controller().getItemSelectorById(m);if(!b)return;r?this.controller.dispatch({type:"move-focus-to-item",id:m}):b.find(".dcg-btn-blue").focus()}}}},y.prototype.didMount=function(){var h=this;this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout),this.promptAlertTimeout=setTimeout(function(){for(var p=[],r=h.model.missingVariables,o=0;o<r.length;o++)p.push('"'+r[o]+'"');n.alert(h.controller.t("Add slider for __vars__",{vars:p.join(",")})),h.promptAlertTimeout=0},2e3)},y.prototype.didUnmount=function(){this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout)},y})(i.Class);c.default=u}),P("loadcss!dcgview-helpers/checkbox",function(){}),P("dcgview-helpers/checkbox",["require","exports","tslib","dcgview","jquery","loadcss!./checkbox"],function(S,c,x,t,l){Object.defineProperty(c,"__esModule",{value:!0});var n=(function(i){function s(){return i!==null&&i.apply(this,arguments)||this}return x.__extends(s,i),s.prototype.template=function(){var g=this;return t.createElement("div",{class:function(){return{"dcg-component-checkbox":!0,"dcg-checked":g.props.checked(),"dcg-disabled":g.props.disabled&&g.props.disabled(),"dcg-small":g.props.small&&g.props.small(),"dcg-green":g.props.green&&g.props.green()}},onTap:this.bindFn(this.onChange)},t.createElement("span",{tabindex:t.const(0),class:t.const("dcg-checkbox"),role:t.const("checkbox"),"aria-label":this.props.ariaLabel,"aria-disabled":function(){return g.props.disabled&&g.props.disabled()},"aria-checked":this.props.checked},t.createElement("i",{class:t.const("dcg-icon-check"),"aria-hidden":t.const("true")})),t.createElement("span",{class:t.const("dcg-checkbox-children")},this.children))},s.prototype.onChange=function(g){g.target&&l(g.target).attr("href")||this.props.disabled&&this.props.disabled()||this.props.onChange(!this.props.checked())},s})(t.Class);c.Checkbox=n}),P("loadcss!expressions/label-dropdown-view",function(){}),P("expressions/label-dropdown-view",["require","exports","tslib","dcgview","graphing-calc/models/expression","core/graphing-calc/json/expression","core/types/label-sizes","core/lib/dragmode","core/types/label-orientations","dcgview-helpers/checkbox","core/math/interpolatedlabel","loadcss!./label-dropdown-view"],function(S,c,x,t,l,n,i,s,g,d,u){Object.defineProperty(c,"__esModule",{value:!0});var f=t.Components,y=f.For,h=f.IfElse,p=f.If,r=(function(o){function m(){return o!==null&&o.apply(this,arguments)||this}return x.__extends(m,o),m.prototype.template=function(){var b=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,t.createElement("div",{class:t.const("dcg-label-dropdown-view dcg-popover dcg-left")},t.createElement("div",{class:t.const("dcg-arrow")}),t.createElement("div",{class:t.const("dcg-label-group-container")},t.createElement("div",{class:t.const("dcg-label-group")},t.createElement("div",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-label-group-title")},function(){return b.controller.t("Label Position")}),t.createElement(y,{each:this.bindFn(this.getLabelOrientations)},t.createElement("div",{role:t.const("group"),"aria-label":function(){return b.controller.t("Label Position")},class:t.const("dcg-label-options")},function(E){return t.createElement("a",{role:t.const("button"),tabindex:t.const(0),class:function(){return{"dcg-menu-option":!0,"dcg-label-position":!0,"dcg-menu-option-selected":b.isorientationSelected(E)}},"aria-pressed":function(){return b.isorientationSelected(E)},onTap:function(){return b.setorientation(E)},"aria-label":function(){return b.getOrientationText(E)}},t.createElement("span",{class:t.const("dcg-menu-option-icon")},t.createElement("i",{class:t.const("dcg-icon-position-arrows")}),t.createElement("span",{class:function(){var M;return M={"dcg-position-direction-icon":!0},M[b.getPositionIconClass(E)]=!0,M}},h(function(){return E==="default"},{true:function(){return t.createElement("div",{class:t.const("dcg-default-position")})},false:function(){return t.createElement("i",{class:t.const("dcg-icon-position-arrows-single")})}}))),t.createElement("span",{class:t.const("dcg-menu-option-label")},function(){return b.getOrientationText(E)}))}))),t.createElement("div",{class:t.const("dcg-label-group")},t.createElement("div",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-label-group-title")},function(){return b.controller.t("Font Size")}),t.createElement(y,{each:this.bindFn(this.getLabelSizes)},t.createElement("div",{role:t.const("group"),"aria-label":function(){return b.controller.t("Font Size")},class:t.const("dcg-label-options")},function(E){return t.createElement("a",{role:t.const("button"),tabindex:t.const(0),class:function(){var M;return M={"dcg-menu-option":!0,"dcg-menu-option-selected":b.isSizeSelected(E),"dcg-label-size":!0},M[b.getSizeClass(E)]=!0,M},"aria-pressed":function(){return b.isSizeSelected(E)},onTap:function(){return b.setLabelSize(E)},"aria-label":function(){return b.getSizeText(E)}},t.createElement("span",{class:t.const("dcg-menu-option-icon")},t.const("A")),t.createElement("span",{class:t.const("dcg-menu-option-label")},function(){return b.getSizeText(E)}))})),t.createElement("div",{class:t.const("dcg-label-group dcg-additional-group-in-column")},t.createElement("div",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-label-group-title")},function(){return b.controller.t("Orientation")}),t.createElement("div",{role:t.const("group"),"aria-label":function(){return b.controller.t("Orientation")}},t.createElement(d.Checkbox,{checked:this.bindFn(this.getVerticalLabel),onChange:this.bindFn(this.setVerticalLabel),ariaLabel:this.const(this.controller.t("Vertical"))},function(){return b.controller.t("Vertical")}))),t.createElement(p,{predicate:function(){return b.controller.canUseAdvancedStyling()}},function(){return t.createElement("div",{class:t.const("dcg-label-group dcg-additional-group-in-column")},t.createElement("div",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-label-group-title")},function(){return b.controller.t("Advanced")}),t.createElement(d.Checkbox,{checked:b.bindFn(b.getWhiteTextOutline),onChange:b.bindFn(b.setWhiteTextOutline),ariaLabel:b.const("Text outline"),disabled:function(){return b.getEditable()}},t.const("Text outline")),t.createElement("div",{role:t.const("group"),"aria-label":function(){return b.controller.t("Advanced")}},t.createElement(p,{predicate:function(){return b.shouldShowInteractiveLabelCheckbox()}},function(){return t.createElement(d.Checkbox,{checked:b.bindFn(b.getInteractiveLabel),onChange:b.bindFn(b.setInteractiveLabel),ariaLabel:b.const("Interactive Label")},t.const("Show on hover"))}),t.createElement(p,{predicate:b.bindFn(b.shouldShowEditableLabelToggle)},function(){return t.createElement(d.Checkbox,{checked:b.bindFn(b.getEditable),onChange:b.bindFn(b.setEditable),ariaLabel:b.const("Editable")},t.const("Editable"))})))}))))},m.prototype.getLabelOrientations=function(){return[g.LabelOrientation.DEFAULT,g.LabelOrientation.LEFT,g.LabelOrientation.RIGHT,g.LabelOrientation.ABOVE,g.LabelOrientation.BELOW]},m.prototype.getOrientationText=function(b){switch(b){case g.LabelOrientation.DEFAULT:return this.controller.t("Default");case g.LabelOrientation.LEFT:return this.controller.t("Left");case g.LabelOrientation.RIGHT:return this.controller.t("Right");case g.LabelOrientation.ABOVE:return this.controller.t("Above");case g.LabelOrientation.BELOW:return this.controller.t("Below");default:var E=b;throw new Error("Unexpected label orientation: "+E)}},m.prototype.getLabelSizes=function(){return[i.LabelSize.SMALL,i.LabelSize.MEDIUM,i.LabelSize.LARGE]},m.prototype.getSizeText=function(b){switch(b){case i.LabelSize.SMALL:return this.controller.t("Small");case i.LabelSize.LARGE:return this.controller.t("Large");case i.LabelSize.MEDIUM:return this.controller.t("Medium");default:var E=b;throw new Error("Unexpected label size: "+E)}},m.prototype.getSizeClass=function(b){switch(b){case i.LabelSize.SMALL:return"dcg-small-label";case i.LabelSize.LARGE:return"dcg-large-label";case i.LabelSize.MEDIUM:return"dcg-medium-label";default:var E=b;throw new Error("Unexpected label size: "+E)}},m.prototype.isSizeSelected=function(b){return this.model.labelSize===b},m.prototype.isorientationSelected=function(b){return this.model.labelOrientation===b},m.prototype.getPositionIconClass=function(b){switch(b){case g.LabelOrientation.ABOVE:return"dcg-position-icon-above";case g.LabelOrientation.BELOW:return"dcg-position-icon-below";case g.LabelOrientation.LEFT:return"dcg-position-icon-left";case g.LabelOrientation.RIGHT:return"dcg-position-icon-right";case g.LabelOrientation.DEFAULT:return"dcg-position-icon-default";default:var E=b;throw new Error("Unexpected label orientation: "+E)}},m.prototype.setorientation=function(b){this.controller.dispatch({type:"set-item-label-orientation",id:this.id,labelOrientation:b})},m.prototype.setVerticalLabel=function(b){this.controller.dispatch({type:"set-item-vertical-label",id:this.id,verticalLabel:b})},m.prototype.getWhiteTextOutline=function(){return!this.getEditable()&&!this.model.suppressTextOutline},m.prototype.setWhiteTextOutline=function(b){this.controller.dispatch({type:"set-suppress-text-outline",id:this.id,suppressTextOutline:!b})},m.prototype.getVerticalLabel=function(){return!!this.model.verticalLabel},m.prototype.setInteractiveLabel=function(b){this.controller.dispatch({type:"set-item-interactive-label",id:this.id,interactiveLabel:b})},m.prototype.getInteractiveLabel=function(){return!!this.model.interactiveLabel},m.prototype.setEditable=function(b){if(b){var E=u.isMathLabel(this.model.label)?n.EditableLabelMode.Math:n.EditableLabelMode.Text;this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id,editableLabelMode:E})}else this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id,editableLabelMode:n.EditableLabelMode.None})},m.prototype.getEditable=function(){return this.model.editableLabelMode!==n.EditableLabelMode.None},m.prototype.getEditableLabelMode=function(){return this.model.editableLabelMode},m.prototype.shouldShowEditableLabelToggle=function(){return l.isSinglePoint(this.model)},m.prototype.setLabelSize=function(b){this.controller.dispatch({type:"set-item-labelSize",id:this.id,labelSize:b})},m.prototype.getLabelSize=function(){return this.model.labelSize},m.prototype.shouldShowInteractiveLabelCheckbox=function(){return this.model.reconciledDragMode===s.DragMode.NONE},m})(t.Class);c.LabelDropdownView=r}),P("loadcss!expressions/label_view",function(){}),P("loadcss!toggle",function(){}),P("expressions/label_view",["require","exports","tslib","keys","dcgview","graphing-calc/models/expression","./label-dropdown-view","jquery","core/graphing-calc/json/expression","loadcss!./label_view","loadcss!toggle"],function(S,c,x,t,l,n,i,s,g){Object.defineProperty(c,"__esModule",{value:!0});var d=l.Components,u=d.Input,f=d.If,y=d.IfElse,h=(function(p){function r(){return p!==null&&p.apply(this,arguments)||this}return x.__extends(r,p),r.prototype.template=function(){var o=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,l.createElement("div",{class:function(){return{"dcg-label-visible":o.getShowLabel(),"dcg-label-container":!0,"dcg-do-blur":!0}},tapboundary:l.const("true"),handleEvent:l.const("true")},l.createElement("span",{role:l.const("checkbox"),"aria-checked":this.bindFn(this.getShowLabel),tabindex:l.const("0"),class:function(){return{"dcg-checkbox":!0,"dcg-checkbox-label-colon":o.getShowLabel()&&!o.hasEditableLabel()}},"aria-label":function(){return o.controller.t("Label")},onTap:this.bindFn(this.onCheckboxInput)},l.createElement("span",{class:function(){return{"dcg-checkbox-box":!0,"dcg-checked":o.getShowLabel()}}},l.createElement("i",{class:l.const("dcg-icon-check")})),l.const(""),l.createElement("span",{class:l.const("dcg-checkbox-label"),"aria-hidden":l.const("true")},function(){return o.controller.t("Label")})),y(this.bindFn(this.hasEditableLabel),{true:function(){return l.createElement("div",{class:l.const("dcg-editable-mode-toggle")},l.createElement("div",{class:l.const("dcg-option-toggle-view")},l.createElement("div",{class:l.const("dcg-toggle-container")},l.createElement("div",{class:l.const("dcg-toggle")},l.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":o.model.editableLabelMode===g.EditableLabelMode.Math}},role:l.const("button"),tabindex:l.const(0),"aria-pressed":function(){return o.model.editableLabelMode===g.EditableLabelMode.Math},"aria-label":function(){return o.controller.t("Editable label mode: Editable Math")},didMount:function(m){o.lastToggleOption!==void 0&&o.lastToggleOption==="math"&&(o.lastToggleOption=void 0,m.focus())},onTap:function(){o.lastToggleOption="Editable Math",o.controller.dispatch({type:"set-item-editable-label-mode",id:o.id,editableLabelMode:g.EditableLabelMode.Math})}},function(){return o.controller.t("Editable Math")}),l.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":o.model.editableLabelMode===g.EditableLabelMode.Text}},role:l.const("button"),tabindex:l.const(0),"aria-pressed":function(){return o.model.editableLabelMode===g.EditableLabelMode.Text},"aria-label":function(){return o.controller.t("Editable label mode: Editable Text")},didMount:function(m){o.lastToggleOption!==void 0&&o.lastToggleOption==="text"&&(o.lastToggleOption=void 0,m.focus())},onTap:function(){o.lastToggleOption="Editable Text",o.controller.dispatch({type:"set-item-editable-label-mode",id:o.id,editableLabelMode:g.EditableLabelMode.Text})}},function(){return o.controller.t("Editable Text")})))))},false:function(){return l.createElement(u,{class:function(){return{"dcg-label-input":!0,"dcg-disabled-input":o.getIsDisabled(),"dcg-disabled-editable-input":o.hasEditableLabel()}},"aria-label":function(){return o.controller.t("Label Text")},"aria-disabled":function(){return o.getIsDisabled()||o.hasEditableLabel()},value:o.bindFn(o.getLabel),onInput:o.bindFn(o.onLabelInput)})}}),l.createElement("span",{class:function(){return{"dcg-dropdown-container":!0,"dcg-no-label":!o.getShowLabel()}},didMount:function(m){return o.$dropdownContainer=s(m)}},l.createElement("span",{class:l.const("dcg-dropdown-wrench-container"),role:l.const("button"),tabindex:l.const(0),"aria-label":function(){return o.controller.t("Label Settings")},onTap:this.bindFn(this.toggleDropdown),selected:this.bindFn(this.showLabelDropdown),"aria-expanded":this.bindFn(this.showLabelDropdown)},l.createElement("i",{class:l.const("dcg-icon-wrench")})),l.createElement(f,{predicate:this.bindFn(this.showLabelDropdown)},function(){return l.createElement(i.LabelDropdownView,{controller:o.props.controller,model:o.props.model})})))},r.prototype.showLabelDropdown=function(){return this.model.labelDropdownOpen},r.prototype.showDropdown=function(o){var m=this,b=s(o.target);s(document).on("mousedown.dcg-"+this.id+" touchstart.dcg-"+this.id+" pointerdown.dcg-"+this.id,function(E){m.showLabelDropdown()&&(s(E.target).closest(m.$dropdownContainer).length>0||m.hideDropdown())}),s(document).on("keydown.dcg-"+this.id,function(E){t.lookup(E)===t.ESCAPE&&(m.hideDropdown(),b.focus())}),this.controller.dispatch({type:"set-item-label-dropdown-open",id:this.id,open:!0})},r.prototype.hideDropdown=function(){s(document).off(".dcg-"+this.id),this.controller.dispatch({type:"set-item-label-dropdown-open",id:this.id,open:!1})},r.prototype.toggleDropdown=function(o){this.showLabelDropdown()?this.hideDropdown():this.showDropdown(o)},r.prototype.getLabel=function(){return this.model.label||""},r.prototype.hasEditableLabel=function(){return n.hasEditableLabel(this.model)},r.prototype.getShowLabel=function(){return!!this.model.showLabel},r.prototype.getIsDisabled=function(){return this.getLabel().length===0&&!this.getShowLabel()},r.prototype.onLabelInput=function(o){var m=o;this.controller.dispatch({type:"set-item-label",id:this.id,label:m}),this.controller.dispatch({type:"set-item-showlabel",id:this.id,showLabel:!!m})},r.prototype.onCheckboxInput=function(){this.controller.dispatch({type:"set-item-showlabel",id:this.id,showLabel:!this.getShowLabel()})},r})(l.Class);c.default=h}),P("loadcss!expressions/cdf-footer-view",function(){}),P("expressions/cdf-footer-view",["require","exports","tslib","dcgview","jquery","keys","graphing-calc/models/expression","dcgview-helpers/mathquill-view","dcgview-helpers/mathquill-braille-wrapper","./evaluation-view","dcgview-helpers/checkbox","loadcss!./cdf-footer-view"],function(S,c,x,t,l,n,i,s,g,d,u){Object.defineProperty(c,"__esModule",{value:!0});var f=t.Components.If,y=(function(h){function p(){var r=h!==null&&h.apply(this,arguments)||this;return r.focusedValues={},r}return x.__extends(p,h),p.prototype.template=function(){var r=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,t.createElement("div",{class:t.const("dcg-cdf-footer-container dcg-do-blur"),tapboundary:t.const("true"),handleEvent:t.const("true")},t.createElement(u.Checkbox,{checked:function(){return i.shouldShowCDFFooter(r.model)},disabled:function(){return i.isListValuedDistribution(r.model)},onChange:function(o){r.controller.dispatch({type:"set-show-cdf",id:r.model.id,showCDF:o})},ariaLabel:function(){return r.controller.t("Find Cumulative Probability (CDF)")}},function(){return r.controller.t("Find Cumulative Probability (CDF)")}),t.createElement(f,{predicate:function(){return i.shouldShowCDFFooter(r.model)}},function(){return t.createElement("div",null,t.createElement("span",{class:t.const("dcg-cdf-limit-name")},function(){return r.controller.t("Min:")}),t.createElement(g.default,{latex:function(){return i.getCDFMin(r.model)},hasError:function(){return!i.isCDFMinValid(r.model)},brailleShouldFocus:function(){return r.isInputFocused("min")},onBrailleFocusedChanged:function(o){return r.handleFocusedChanged("min",o)},ariaLabel:function(){return r.controller.t("Min")},placeholder:function(){return i.getCDFMinPlaceholder(r.model)},onBrailleInput:r.bindFn(r.updateCDFMin),controller:r.props.controller,onBrailleKeydown:function(o){return r.handleBraillePressedKey(o,"min")}},t.createElement(s.default,{latex:function(){return i.getCDFMin(r.model)},hasError:function(){return!i.isCDFMinValid(r.model)},isFocused:function(){return r.isInputFocused("min")},onFocusedChanged:function(o){return r.handleFocusedChanged("min",o)},config:r.const({}),getAriaLabel:function(){return r.controller.t("Min")},getAriaPostLabel:function(){return""},placeholder:function(){return i.getCDFMinPlaceholder(r.model)},onUserPressedKey:function(o,m){return r.handlePressedKey(o,m,"min")},onUserChangedLatex:r.bindFn(r.updateCDFMin),onExpressionSizeExceeded:function(){return r.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return r.model.controller.getCapExpressionSize()},needsSystemKeypad:function(){return!r.controller.isKeypadEnabled()}})),t.createElement("span",{class:t.const("dcg-cdf-limit-name")},function(){return r.controller.t("Max:")}),t.createElement(g.default,{latex:function(){return i.getCDFMax(r.model)},hasError:function(){return!i.isCDFMaxValid(r.model)},brailleShouldFocus:function(){return r.isInputFocused("max")},onBrailleFocusedChanged:function(o){return r.handleFocusedChanged("max",o)},ariaLabel:function(){return r.controller.t("Max")},placeholder:function(){return i.getCDFMaxPlaceholder(r.model)},onBrailleInput:r.bindFn(r.updateCDFMax),controller:r.props.controller,onBrailleKeydown:function(o){return r.handleBraillePressedKey(o,"max")}},t.createElement(s.default,{latex:function(){return i.getCDFMax(r.model)},hasError:function(){return!i.isCDFMaxValid(r.model)},isFocused:function(){return r.isInputFocused("max")},onFocusedChanged:function(o){return r.handleFocusedChanged("max",o)},config:r.const({}),getAriaLabel:function(){return r.controller.t("Max")},getAriaPostLabel:function(){return""},placeholder:function(){return i.getCDFMaxPlaceholder(r.model)},onUserPressedKey:function(o,m){return r.handlePressedKey(o,m,"max")},onUserChangedLatex:r.bindFn(r.updateCDFMax),onExpressionSizeExceeded:function(){return r.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return r.model.controller.getCapExpressionSize()},needsSystemKeypad:function(){return!r.controller.isKeypadEnabled()}})),t.createElement(f,{predicate:r.bindFn(r.showEvaluation)},function(){return t.createElement("div",{class:t.const("dcg-cdf-evaluation-container")},t.createElement(d.default,{val:function(){return i.getCDFEvaluation(r.model)},controller:r.props.controller,dependent:r.const(""),id:function(){return r.model.id},focusable:r.const(!0)}))}))}))},p.prototype.handleBraillePressedKey=function(r,o){var m=n.lookup(r);m&&this.handlePressedKey(m,l.Event(r),o)},p.prototype.handlePressedKey=function(r,o,m){if(r==="Esc")return void this.controller.dispatch({type:"set-focus-location",location:void 0});if(r==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var b=s.default.getFocusedMathquill();b&&(b.keystroke(r,o),m==="min"&&i.getCDFMin(this.model)!==b.latex()&&this.updateCDFMin(b.latex()),m==="max"&&i.getCDFMax(this.model)!==b.latex()&&this.updateCDFMax(b.latex()))},p.prototype.updateCDFMax=function(r){this.controller.dispatch({type:"set-cdf-max",id:this.model.id,latex:r})},p.prototype.updateCDFMin=function(r){this.controller.dispatch({type:"set-cdf-min",id:this.model.id,latex:r})},p.prototype.showEvaluation=function(){return!!i.isCDFMaxValid(this.model)&&!!i.isCDFMinValid(this.model)},p.prototype.isInputFocused=function(r){var o=this.controller.getFocusLocation();return!(!o||o.type!=="cdf-limit"||o.id!==this.id)&&o.location===r},p.prototype.handleFocusedChanged=function(r,o){o?this.controller.dispatch({type:"set-focus-location",location:{type:"cdf-limit",id:this.id,location:r}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"cdf-limit",id:this.id,location:r}})},p})(t.Class);c.default=y}),P("loadcss!expressions/parameter_suggestions_view",function(){}),P("expressions/parameters_suggestions_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","loadcss!./parameter_suggestions_view"],function(S,c,x,t,l){Object.defineProperty(c,"__esModule",{value:!0});var n=t.Components,i=n.If,s=n.For,g=n.SwitchUnion,d=(function(u){function f(){return u!==null&&u.apply(this,arguments)||this}return x.__extends(f,u),f.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},f.prototype.template=function(){var y=this;return g(this.bindFn(this.getSuggestionType),{list:function(){return t.createElement(s,{each:y.bindFn(y.getListOfParameters)},t.createElement("div",{class:function(){return{"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":y.controller.getBrailleMode()!=="none"}}},function(h){return t.createElement("span",{class:t.const("dcg-parameter-name")},function(){return y.getParamName(h)})}))},listWithDefault:function(){return t.createElement(s,{each:y.bindFn(y.getListOfParameters)},t.createElement("div",{class:function(){return{"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":y.controller.getBrailleMode()!=="none"}},onTap:y.bindFn(y.fillInDefaults)},function(h){return t.createElement("span",{class:t.const("dcg-parameter-name")},function(){return y.getParamName(h)},t.createElement(i,{predicate:function(){return y.shouldShowDefaultValue(h)}},function(){return t.createElement("span",{class:t.const("dcg-default-marker")},t.const("= "),function(){return y.getDefaultValue(h)})}))}))},individual:function(){return t.createElement("div",{class:function(){return{"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":y.controller.getBrailleMode()!=="none"}}},y.bindFn(y.getMissingRequiredParamText))},none:function(){}})},f.prototype.getExtractedAndDefaultArgString=function(y){var h=y.params,p=y.values,r=y.defaults;return h.map(function(o,m){var b=p[o],E=r[m];return b||E||""}).join(",")},f.prototype.fillInDefaults=function(){var y=l.parseToplevelFunction(this.model);if(y){var h=y.symbol,p=y.span,r=p.input,o=p.start,m=p.end,b=this.getExtractedAndDefaultArgString(y),E="\\operatorname{"+h+"}\\left("+b+"\\right)",M=""+r.slice(0,o)+E+r.slice(m);this.controller.dispatch({type:"set-item-latex",id:this.id,latex:M}),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}),this.controller.dispatch({type:"keypad/press-key",key:"Left"})}},f.prototype.isMissingDefault=function(){if(!l.isPrimaryLatexValid(this.model))return!1;var y=l.parseToplevelFunction(this.model);if(!y)return!1;for(var h=0;h<y.params.length;h++)if(this.shouldShowDefaultValue(y.params[h]))return!0;return!1},f.prototype.getSuggestionType=function(){return this.getListOfParameters().length>1?this.isMissingDefault()?"listWithDefault":"list":this.missingRequiredParam()?"individual":"none"},f.prototype.missingRequiredParam=function(){var y=l.parseToplevelFunction(this.model);if(y&&y.params.length===1){var h=y.params[0];if(!this.getDefaultValue(h)&&!this.getParameterExtractedValue(h))return h}},f.prototype.getMissingRequiredParamText=function(){var y=this.missingRequiredParam();return y?this.controller.t("Enter the __param__.",{param:this.getParamName(y)}):""},f.prototype.getDefaultValue=function(y){var h=l.parseToplevelFunction(this.model);if(!h||!h.params)return"";for(var p=0;p<h.params.length;p++)if(h.params[p]===y)return h.defaults[p]||"";return""},f.prototype.getParameterExtractedValue=function(y){var h=l.parseToplevelFunction(this.model);return h&&h.values[y]||""},f.prototype.shouldShowDefaultValue=function(y){return!this.getParameterExtractedValue(y)&&!!this.getDefaultValue(y)},f.prototype.getListOfParameters=function(){var y=l.parseToplevelFunction(this.model);return y?y.params:[]},f.prototype.getParamName=function(y){switch(y){case"mean":return this.controller.t("Mean");case"stdev":return this.controller.t("Standard Deviation");case"dof":return this.controller.t("Degrees of Freedom");case"probsuccess":return this.controller.t("Success Probability");case"trials":return this.controller.t("Trials");case"data":return this.controller.t("Data Set");case"binwidth":return this.controller.t("Bin Width");case"min":return this.controller.t("Minimum");case"max":return this.controller.t("Maximum");case"height":case"offset":case"data":return y;default:return y}},f})(t.Class);c.ParametersSuggestionsView=d}),P("loadcss!expressions/distribution_parameters_view",function(){}),P("expressions/distribution_parameters_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","expressions/cdf-footer-view","./parameters_suggestions_view","loadcss!./distribution_parameters_view"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=t.Components.If,g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){var f=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,t.createElement("div",{class:t.const("dcg-distribution-parameters-container dcg-do-blur"),tapboundary:t.const("true"),handleEvent:t.const("true")},t.createElement(i.ParametersSuggestionsView,{model:this.props.model,controller:this.props.controller}),t.createElement(s,{predicate:function(){return l.shouldShowCDFCheckbox(f.model)}},function(){return t.createElement(n.default,{model:f.props.model,controller:f.props.controller})}))},u})(t.Class);c.default=g}),P("loadcss!expressions/visualization_parameters_view",function(){}),P("expressions/visualization_parameters_view",["require","exports","tslib","dcgview","jquery","keys","graphing-calc/models/expression","dcgview-helpers/mathquill-view","dcgview-helpers/mathquill-braille-wrapper","./parameters_suggestions_view","loadcss!./visualization_parameters_view","loadcss!toggle"],function(S,c,x,t,l,n,i,s,g,d){Object.defineProperty(c,"__esModule",{value:!0});var u=t.Components.For,f=t.Components,y=f.SwitchUnion,h=f.If,p=(function(o){function m(){return o!==null&&o.apply(this,arguments)||this}return x.__extends(m,o),m.prototype.template=function(){var b=this;return t.createElement("div",{class:t.const("dcg-toggle-container")},t.createElement("div",{class:t.const("dcg-expression-footer-title")},this.props.title,t.createElement(h,{predicate:function(){return!!b.props.helpLink}},function(){return t.createElement("a",{"aria-label":function(){return b.props.controller().t("Help")},class:t.const("dcg-expression-footer-title-help"),target:t.const("_blank"),href:b.props.helpLink},t.createElement("i",{class:t.const("dcg-icon-question-sign")}))})),t.createElement(u,{each:this.props.options,key:function(E){return E.name}},t.createElement("div",{class:t.const("dcg-toggle")},function(E){return t.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":b.isSelected(E.name)}},role:t.const("button"),tabindex:t.const(0),"aria-label":function(){return b.props.title()+": "+E.displayName},"aria-pressed":function(){return b.isSelected(E.name)},onTap:function(){return b.props.controller().dispatch({type:"set-visualization-prop",id:b.props.model().id,prop:b.props.vizProp(),latex:E.name})}},function(){return E.displayName})})))},m.prototype.isSelected=function(b){return i.getVizPropLatex(this.props.model(),this.props.vizProp())===b},m})(t.Class),r=(function(o){function m(){return o!==null&&o.apply(this,arguments)||this}return x.__extends(m,o),m.prototype.template=function(){var b=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,t.createElement("div",{class:t.const("dcg-visualization-parameters-container dcg-do-blur"),tapboundary:t.const("true"),handleEvent:t.const("true")},t.createElement(d.ParametersSuggestionsView,x.__assign({},this.props)),t.createElement("div",{class:t.const("dcg-smaller-font")},y(function(){return b.getVisualizationType()},{boxplot:function(){return t.createElement("div",null,t.createElement("div",{class:t.const("dcg-expression-footer-title")},function(){return b.controller.t("Display Properties")}),b.makeMQInput({prop:"axisOffset",siblingProps:["breadth"],default:"1",name:function(){return b.controller.t("Offset")}}),b.makeMQInput({prop:"breadth",siblingProps:["axisOffset"],default:"1",name:function(){return i.getVizPropLatex(b.model,"alignedAxis")==="y"?b.controller.t("Width"):b.controller.t("Height")}}))},dotplot:function(){return t.createElement(h,{predicate:function(){return i.needsDotplotXMode(b.model)}},function(){return t.createElement("div",{class:t.const("dcg-toggles-container")},t.createElement(p,x.__assign({},b.props,{vizProp:function(){return"dotplotXMode"},options:function(){return[{name:"exact",displayName:b.controller.t("Exact")},{name:"bin",displayName:b.controller.t("Binned")}]},title:function(){return b.controller.t("X Values")}})),t.createElement(p,x.__assign({},b.props,{vizProp:function(){return"binAlignment"},options:function(){return[{name:"center",displayName:b.controller.t("Center")},{name:"left",displayName:b.controller.t("Left")}]},title:function(){return b.controller.t("Bin Alignment")}})))})},histogram:function(){return t.createElement("div",{class:t.const("dcg-toggles-container")},t.createElement(p,x.__assign({},b.props,{vizProp:function(){return"histogramMode"},options:function(){return[{name:"",displayName:b.controller.t("Count")},{name:"relative",displayName:b.controller.t("Relative")},{name:"density",displayName:b.controller.t("Density")}]},title:function(){return b.controller.t("Bar Heights")},helpLink:b.const("https://support.desmos.com/hc/en-us/articles/360022405991")})),t.createElement(p,x.__assign({},b.props,{vizProp:function(){return"binAlignment"},options:function(){return[{name:"center",displayName:b.controller.t("Center")},{name:"left",displayName:b.controller.t("Left")}]},title:function(){return b.controller.t("Bin Alignment")}})))},none:function(){return t.createElement("span",null)}})))},m.prototype.makeMQInput=function(b){var E=this;return t.createElement("span",null,t.createElement("span",{class:t.const("dcg-parameter-name")},b.name,t.const(":")),t.createElement(g.default,{latex:function(){return i.getVizPropLatex(E.model,b.prop)},ariaLabel:b.name,placeholder:function(){return b.default},brailleShouldFocus:function(){return E.isInputFocused(b.prop)},onBrailleInput:function(M){return E.handleLatexChanged(b.prop,M)},controller:this.props.controller,hasError:function(){return!i.isVizPropValid(E.model,b.prop)},onBrailleFocusedChanged:function(M){return E.handleFocusedChanged(b.prop,M)},onBrailleKeydown:function(M){return E.handleBraillePressedKey(M,b.prop)}},t.createElement(s.default,{latex:function(){return i.getVizPropLatex(E.model,b.prop)},hasError:function(){return!i.isVizPropValid(E.model,b.prop)},isFocused:function(){return E.isInputFocused(b.prop)},onFocusedChanged:function(M){return E.handleFocusedChanged(b.prop,M)},placeholder:function(){return b.default},config:this.const({}),getAriaLabel:b.name,onUserPressedKey:function(M,D){return E.handlePressedKey(M,D,b.prop)},getAriaPostLabel:function(){return""},onUserChangedLatex:function(M){return E.handleLatexChanged(b.prop,M)},onExpressionSizeExceeded:function(){return E.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return E.model.controller.getCapExpressionSize()},needsSystemKeypad:function(){return!E.controller.isKeypadEnabled()}})))},m.prototype.handleBraillePressedKey=function(b,E){var M=n.lookup(b);M&&this.handlePressedKey(M,l.Event(b),E)},m.prototype.handlePressedKey=function(b,E,M){if(b==="Esc")return void this.controller.dispatch({type:"set-focus-location",location:void 0});if(b==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var D=s.default.getFocusedMathquill();D&&(D.keystroke(b,E),this.handleLatexChanged(M,D.latex()))},m.prototype.isInputFocused=function(b){var E=this.controller.getFocusLocation();return!(!E||E.type!=="visualization-prop"||E.id!==this.id)&&E.location===b},m.prototype.handleFocusedChanged=function(b,E){E?this.controller.dispatch({type:"set-focus-location",location:{type:"visualization-prop",id:this.id,location:b}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"visualization-prop",id:this.id,location:b}})},m.prototype.handleLatexChanged=function(b,E){i.getVizPropLatex(this.model,b)!==E&&this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:b,latex:E})},m.prototype.getVisualizationType=function(){return i.isPrimaryLatexValid(this.model)?i.isBoxPlot(this.model)?"boxplot":i.isDotPlot(this.model)?"dotplot":i.isHistogram(this.model)?"histogram":"none":"none"},m})(t.Class);c.default=r}),P("loadcss!expressions/ttest_footer_view",function(){}),P("expressions/ttest_footer_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","core/lib/number-to-latex","dcgview-helpers/static-mathquill-view","loadcss!./ttest_footer_view"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=(function(g){function d(){return g!==null&&g.apply(this,arguments)||this}return x.__extends(d,g),d.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},d.prototype.template=function(){var u=this;return t.createElement("div",{class:t.const("dcg-ttest-footer-container dcg-do-blur"),handleEvent:t.const("true")},t.createElement("table",null,t.createElement("tr",null,t.createElement("td",null,t.createElement("div",{class:t.const("dcg-value"),role:t.const("textbox"),"aria-readonly":t.const("true"),tabindex:t.const("0"),"aria-label":function(){return"Less than: "+u.getLessThan()}},t.createElement("span",{class:t.const("dcg-operator")},t.createElement(i.default,{latex:this.const("<")})),t.createElement("span",{class:t.const("dcg-evaluation")},t.createElement(i.default,{latex:function(){return u.getLessThan()}}))))),t.createElement("tr",null,t.createElement("td",null,t.createElement("div",{class:t.const("dcg-value"),role:t.const("textbox"),"aria-readonly":t.const("true"),tabindex:t.const("0"),"aria-label":function(){return"Greater than: "+u.getGreaterThan()}},t.createElement("span",{class:t.const("dcg-operator")},t.createElement(i.default,{latex:this.const(">")})),t.createElement("span",{class:t.const("dcg-evaluation")},t.createElement(i.default,{latex:function(){return u.getGreaterThan()}}))))),t.createElement("tr",null,t.createElement("td",null,t.createElement("div",{class:t.const("dcg-value"),role:t.const("textbox"),"aria-readonly":t.const("true"),tabindex:t.const("0"),"aria-label":function(){return"Not equal: "+u.getNotEqual()}},t.createElement("span",{class:t.const("dcg-operator")},t.createElement(i.default,{latex:this.const("")})),t.createElement("span",{class:t.const("dcg-evaluation")},t.createElement(i.default,{latex:function(){return u.getNotEqual()}})))))))},d.prototype.getLessThan=function(){var u=l.getTTestResults(this.model);return u?n.numberToStatsConfidenceLatex(u.lessThan,5):""},d.prototype.getGreaterThan=function(){var u=l.getTTestResults(this.model);return u?n.numberToStatsConfidenceLatex(u.greaterThan,5):""},d.prototype.getNotEqual=function(){var u=l.getTTestResults(this.model);return u?n.numberToStatsConfidenceLatex(u.notEqual,5):""},d})(t.Class);c.default=s}),P("loadcss!expressions/stats_footer_view",function(){}),P("expressions/stats_footer_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","dcgview-helpers/static-mathquill-view","core/lib/number-to-latex","loadcss!./stats_footer_view"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=(function(g){function d(){return g!==null&&g.apply(this,arguments)||this}return x.__extends(d,g),d.prototype.template=function(){var u=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,t.createElement("div",{class:t.const("dcg-stats-footer-container dcg-do-blur"),handleEvent:t.const("true")},t.createElement("table",null,t.createElement("tr",null,t.createElement("td",null,t.createElement("div",{class:t.const("dcg-value"),role:t.const("textbox"),"aria-readonly":t.const("true"),tabindex:t.const("0"),"aria-label":function(){return"Min: "+u.getMin()}},t.createElement("span",{class:t.const("dcg-row-header")},t.const("Min")),t.createElement("span",{class:t.const("dcg-evaluation")},t.createElement(n.default,{latex:this.bindFn(this.getMin)}))))),t.createElement("tr",null,t.createElement("td",null,t.createElement("div",{class:t.const("dcg-value"),role:t.const("textbox"),"aria-readonly":t.const("true"),tabindex:t.const("0"),"aria-label":function(){return"Q1: "+u.getQ1()}},t.createElement("span",{class:t.const("dcg-row-header")},t.const("Q1")),t.createElement("span",{class:t.const("dcg-evaluation")},t.createElement(n.default,{latex:this.bindFn(this.getQ1)}))))),t.createElement("tr",null,t.createElement("td",null,t.createElement("div",{class:t.const("dcg-value"),role:t.const("textbox"),"aria-readonly":t.const("true"),tabindex:t.const("0"),"aria-label":function(){return"Median: "+u.getMedian()}},t.createElement("span",{class:t.const("dcg-row-header")},t.const("Median")),t.createElement("span",{class:t.const("dcg-evaluation")},t.createElement(n.default,{latex:this.bindFn(this.getMedian)}))))),t.createElement("tr",null,t.createElement("td",null,t.createElement("div",{class:t.const("dcg-value"),role:t.const("textbox"),"aria-readonly":t.const("true"),tabindex:t.const("0"),"aria-label":function(){return"Q3: "+u.getQ3()}},t.createElement("span",{class:t.const("dcg-row-header")},t.const("Q3")),t.createElement("span",{class:t.const("dcg-evaluation")},t.createElement(n.default,{latex:this.bindFn(this.getQ3)}))))),t.createElement("tr",null,t.createElement("td",null,t.createElement("div",{class:t.const("dcg-value"),role:t.const("textbox"),"aria-readonly":t.const("true"),tabindex:t.const("0"),"aria-label":function(){return"Max: "+u.getMax()}},t.createElement("span",{class:t.const("dcg-row-header")},t.const("Max")),t.createElement("span",{class:t.const("dcg-evaluation")},t.createElement(n.default,{latex:this.bindFn(this.getMax)})))))))},d.prototype.getMin=function(){var u=l.getStatsResults(this.model);return u?i.numberToDecimalString(u.min):""},d.prototype.getQ1=function(){var u=l.getStatsResults(this.model);return u?i.numberToDecimalString(u.q1):""},d.prototype.getMedian=function(){var u=l.getStatsResults(this.model);return u?i.numberToDecimalString(u.median):""},d.prototype.getQ3=function(){var u=l.getStatsResults(this.model);return u?i.numberToDecimalString(u.q3):""},d.prototype.getMax=function(){var u=l.getStatsResults(this.model);return u?i.numberToDecimalString(u.max):""},d})(t.Class);c.default=s}),P("loadcss!expressions/expression-edit-actions",function(){}),P("expressions/expression-edit-actions",["require","exports","tslib","dcgview","lib/tooltip","core/lib/dragmode","core/types/styles","graphing-calc/models/expression","lib/aria","loadcss!./expression-edit-actions"],function(S,c,x,t,l,n,i,s,g){Object.defineProperty(c,"__esModule",{value:!0});var d=t.Components.If,u=(function(f){function y(){return f!==null&&f.apply(this,arguments)||this}return x.__extends(y,f),y.prototype.init=function(){this.controller=this.props.controller()},y.prototype.template=function(){var h=this;return t.createElement(d,{predicate:function(){return h.controller.isInEditListMode()}},function(){return t.createElement("span",{class:function(){return{"dcg-expression-edit-actions":!0,"dcg-limited-height":h.limitedHeight()}},style:function(){return{background:h.controller.getBackgroundColor()}},didMount:function(){h.controller.isInEditListMode()&&g.alert(h.controller.t("Edit list mode on."))},didUnmount:function(){h.controller.isInEditListMode()||g.alert(h.controller.t("Edit list mode off."))}},t.createElement(d,{predicate:function(){return!h.controller.hasBackgroundColor()}},function(){return t.createElement("span",{class:t.const("dcg-graphic"),handleEvent:t.const("true ")})}),t.createElement(d,{predicate:h.bindFn(h.canConvertToTable)},function(){return t.createElement(l.Tooltip,{tooltip:function(){return h.controller.t("Convert to Table")},gravity:h.const("s")},t.createElement("span",{class:t.const("dcg-action-createtable dcg-exp-action-button"),handleEvent:t.const("true"),role:t.const("button"),tabindex:t.const("0"),"aria-label":function(){return h.controller.t("Convert to Table")},onTap:h.bindFn(h.onCreateTable)},t.createElement("i",{class:t.const("dcg-icon-table")})))}),t.createElement(d,{predicate:h.bindFn(h.canDuplicate)},function(){return t.createElement(l.Tooltip,{tooltip:function(){return h.controller.t("Duplicate")},gravity:h.const("s")},t.createElement("span",{class:t.const("dcg-duplicate-btn dcg-exp-action-button"),handleEvent:t.const("true"),role:t.const("button"),tabindex:t.const("0"),"aria-label":function(){return h.controller.t("Duplicate")},onTap:h.bindFn(h.onDuplicateWithoutFocus)},t.createElement("i",{class:t.const("dcg-icon-duplicate")})))}),t.createElement(l.Tooltip,{tooltip:function(){return h.controller.t("Delete")},gravity:h.const("sw")},t.createElement("span",{class:t.const("dcg-delete-btn dcg-exp-action-button"),handleEvent:t.const("true"),role:t.const("button"),tabindex:t.const("0"),"aria-label":function(){return h.controller.t("Delete")},onTap:h.bindFn(h.onDelete)},t.createElement("i",{class:t.const("dcg-icon-remove")}))))})},y.prototype.model=function(){return this.controller.getItemModel(this.props.id())},y.prototype.canConvertToTable=function(){var h=this.model();return!(!h||h.type!=="expression"||!h.isTableable)},y.prototype.canDuplicate=function(){var h=this.model();return!(!h||h.type!=="expression"||this.isSlider())},y.prototype.limitedHeight=function(){var h=this.model();return h&&(h.type==="image"||this.isSlider())},y.prototype.isSlider=function(){var h=this.model();return h&&h.type==="expression"&&h.sliderExists},y.prototype.onCreateTable=function(){var h=this.model();if(h&&h.type==="expression"){var p=h.formula;if(h.isTableable){var r,o=p.table_info,m=h.index,b=[],E=[];if(o.values)for(r=0;r<o.values.length;r++){var M=o.values[r][0];b.push(isNaN(M)?"":M+"");var D=o.values[r][1];E.push(isNaN(D)?"":D+"")}else for(r=-2;r<=2;r++)b.push(r+""),E.push("");var A={id:this.controller.generateId(),type:"table",columns:[{id:this.controller.generateId(),latex:o.independent_variable,color:this.controller.getNextColor(),hidden:!1,values:b,points:!0,lines:!1,dragMode:n.DragMode.NONE,pointStyle:i.PointStyle.POINT,lineStyle:i.LineStyle.SOLID},{id:this.controller.generateId(),latex:o.dependent_column,color:h.color,hidden:!1,values:E,points:!0,lines:!(s.isPointOrPointList(h)||h.hidden),dragMode:n.DragMode.NONE,pointStyle:i.PointStyle.POINT,lineStyle:i.LineStyle.SOLID}]},v=this.controller;this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!1}),o.by_reference?this.controller.dispatch({type:"insert-item-at-index",index:m+1,state:A,folderId:h.folderId,focus:!0}):this.controller.dispatch({type:"replace-item-at-index",index:m,state:A,focus:!0});var k=function(){v.dispatch({type:"undo"}),v.dispatch({type:"set-edit-list-mode",isEditListMode:!0,focusExpressionList:!1})};this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("Table created."),undoCallback:k}})}}},y.prototype.onDelete=function(h){this.controller.dispatch({type:"delete-item-and-animate-out",id:this.props.id(),setFocusAfterDelete:h.device==="keyboard"})},y.prototype.onDuplicateWithoutFocus=function(){this.controller.dispatch({type:"duplicate-expression",id:this.props.id()})},y})(t.Class);c.ExpressionEditActions=u}),P("loadcss!expressions/suggested-zoom-view",function(){}),P("expressions/suggested-zoom-view",["require","exports","tslib","dcgview","lib/tooltip","loadcss!./suggested-zoom-view"],function(S,c,x,t,l){Object.defineProperty(c,"__esModule",{value:!0});var n=t.Components.If,i=(function(s){function g(){return s!==null&&s.apply(this,arguments)||this}return x.__extends(g,s),g.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},g.prototype.template=function(){var d=this;return t.createElement(n,{predicate:function(){return d.controller.shouldExpressionZoomFit(d.model)}},function(){return t.createElement("div",{class:t.const("dcg-suggested-zoom-view dcg-do-blur"),handleEvent:t.const(!0)},t.createElement(l.Tooltip,{tooltip:d.bindFn(d.getZoomText),gravity:function(){return"e"}},t.createElement("i",{onTap:d.bindFn(d.onZoom),role:t.const("button"),"aria-label":d.bindFn(d.getZoomText),class:t.const("dcg-icon-zoom-fit")})))})},g.prototype.getZoomText=function(){return this.controller.t("Zoom Fit")},g.prototype.onZoom=function(){this.controller.dispatch({type:"expression-zoom-fit",id:this.model.id})},g})(t.Class);c.SuggestedZoomView=i}),P("loadcss!expressions/clickable_info_view",function(){}),P("expressions/clickable_info_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","graphing-calc/models/image","dcgview-helpers/mathquill-view","loadcss!./clickable_info_view"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=t.Components.Input,g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},u.prototype.template=function(){var f=this;return t.createElement("div",{class:t.const("dcg-clickable-info-container dcg-do-blur"),tapboundary:t.const("true"),handleEvent:t.const("true")},t.createElement("div",{class:t.const("dcg-smaller-font")},t.createElement("div",{role:t.const("group"),"aria-label":function(){return f.controller.t("Clickable Properties")}},t.createElement("div",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-expression-footer-title")},function(){return f.controller.t("Clickable Properties")}),this.const(this.controller.t("set")),this.makeMQInput({prop:"assignment",name:function(){return f.controller.t("Assignment")}}),this.const(this.controller.t("to")),this.makeMQInput({prop:"expression",name:function(){return f.controller.t("Expression")}})),t.createElement(s,{"aria-label":function(){return f.controller.t("Screen reader label")},placeholder:function(){return f.controller.t("Add screen reader label")},value:function(){return f.model.clickableInfo.description},onInput:function(y){return f.controller.dispatch({type:"set-clickableinfo-prop",id:f.model.id,prop:"description",value:y})}})))},u.prototype.makeMQInput=function(f){var y=this;return t.createElement(i.default,{latex:function(){return y.getClickableInfoPropLatex(f.prop)},hasError:function(){return y.isClickableInfoPropInvalid(f.prop)},isFocused:function(){return y.isInputFocused(f.prop)},onFocusedChanged:function(h){return y.handleFocusedChanged(f.prop,h)},config:this.const({}),getAriaLabel:f.name,onUserPressedKey:function(h,p){return y.handlePressedKey(h,p,f.prop)},getAriaPostLabel:function(){return""},onUserChangedLatex:function(h){return y.handleLatexChanged(f.prop,h)},onExpressionSizeExceeded:function(){return y.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return!!y.model.controller.getGraphSettings().config.capExpressionSize},needsSystemKeypad:function(){return!y.controller.isKeypadEnabled()}})},u.prototype.handlePressedKey=function(f,y,h){if(f==="Esc")return void this.controller.dispatch({type:"set-focus-location",location:void 0});if(f==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var p=i.default.getFocusedMathquill();p&&(p.keystroke(f,y),this.handleLatexChanged(h,p.latex()))},u.prototype.isInputFocused=function(f){var y=this.controller.getFocusLocation();return!(!y||y.type!=="clickableinfo-prop"||y.id!==this.id)&&y.location===f},u.prototype.handleFocusedChanged=function(f,y){y?this.controller.dispatch({type:"set-focus-location",location:{type:"clickableinfo-prop",id:this.id,location:f}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"clickableinfo-prop",id:this.id,location:f}})},u.prototype.getClickableInfoPropLatex=function(f){return this.model.type==="image"?n.getClickableInfoPropLatex(this.model,f):l.getClickableInfoPropLatex(this.model,f)},u.prototype.isClickableInfoPropInvalid=function(f){return this.model.type==="image"?!n.isClickableInfoPropValid(this.model,f):!l.isClickableInfoPropValid(this.model,f)},u.prototype.handleLatexChanged=function(f,y){if(this.getClickableInfoPropLatex(f)!==y)if(f==="assignment")this.controller.dispatch({type:"set-clickableinfo-prop",id:this.id,prop:f,value:y});else{if(f!=="expression"){var h=f;return h}this.controller.dispatch({type:"set-clickableinfo-prop",id:this.id,prop:f,value:y})}},u})(t.Class);c.ClickableInfoView=g}),P("loadcss!expressions/expression-footer",function(){}),P("expressions/expression_view",["require","exports","config","tslib","browser","keys","jquery","./abstract-item-view","dcgview-helpers/mathquill-view","dcgview-helpers/static-mathquill-view","lib/conditional_blur","./expression-icon-view","./evaluation-view","expressions/unresolved_view","expressions/domain_view","expressions/regression_view","expressions/slider_view","expressions/promptslider_view","expressions/label_view","expressions/distribution_parameters_view","expressions/visualization_parameters_view","expressions/ttest_footer_view","expressions/stats_footer_view","graphing-calc/models/expression","core/lib/label","./expression-edit-actions","./suggested-zoom-view","dcgview","./clickable_info_view","main/manage-focus-helper","dcgview-helpers/mathquill-braille-wrapper","jquery.handleevent","loadcss!./expression-footer"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r,o,m,b,E,M,D,A,v,k,J,X,te,H,z,B){Object.defineProperty(c,"__esModule",{value:!0});var F=te.Components,$=F.If,re=F.SwitchUnion,K=(function(ue){function ie(){return ue!==null&&ue.apply(this,arguments)||this}return t.__extends(ie,ue),ie.prototype.didMount=function(){this.onItemViewMounted()},ie.prototype.didMountRootNode=function(Q){this.rootNode=Q},ie.prototype.willUnmount=function(){this.onItemViewUnmounted()},ie.prototype.template=function(){var Q=this;return te.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-mathitem":!0,"dcg-inFolder":!!Q.model.folderId,"dcg-selected":Q.controller.isItemSelected(Q.id)&&!Q.controller.isInEditListMode(),"dcg-dragging":!!Q.controller.isItemBeingDragged(Q.id),"dcg-hasSlider":Q.hasSlider(),"dcg-hasEvaluation":Q.controller.shouldShowEvaluationForItem(Q.id),"dcg-hasRegression":Q.hasRegression(),"dcg-hasDomain":Q.hasDomain(),"dcg-author-ide":Q.controller.isAuthorIDE()}},"expr-id":function(){return Q.model.id},didMount:this.bindFn(this.didMountRootNode)},te.createElement("div",{class:te.const("dcg-fade-container"),onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},te.createElement("div",{class:te.const("dcg-main")},te.createElement($,{predicate:function(){return!Q.controller.isInEditListMode()}},function(){return te.createElement(B.default,{latex:function(){return v.getDisplayLatex(Q.model)},ariaLabel:function(){return Q.getAriaLabel("braille")},brailleShouldFocus:function(){return Q.isFocused()},onBrailleInput:function(pe){return Q.handleLatexChanged(pe)},controller:Q.props.controller,onBrailleFocusedChanged:function(pe,ee){return Q.handleMQFocusedChanged(pe,ee)},onBrailleKeydown:Q.bindFn(Q.handleBraillePressedKey)},te.createElement(g.default,{latex:function(){return v.getDisplayLatex(Q.model)},getAriaLabel:function(){return Q.getAriaLabel("speech")},getAriaPostLabel:Q.bindFn(Q.getFormulaAria),isFocused:function(){return Q.isFocused()},capExpressionSize:function(){return Q.controller.getCapExpressionSize()},config:Q.const({}),hasError:Q.const(!1),onUserPressedKey:function(pe,ee){return Q.handlePressedKey(pe,ee)},onUserChangedLatex:function(pe){return Q.handleLatexChanged(pe)},onExpressionSizeExceeded:function(){return Q.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(pe,ee){return Q.handleMQFocusedChanged(pe,ee)},needsSystemKeypad:function(){return!Q.controller.isKeypadEnabled()}},te.createElement("div",{class:te.const("dcg-expression-mathquill")})))}),te.createElement($,{predicate:function(){return Q.controller.isInEditListMode()}},function(){return te.createElement("div",{class:te.const("dcg-edit-list-mathquill"),tabindex:function(){return Q.controller.getBrailleMode()==="none"?"0":"-1"},onTap:Q.bindFn(Q.exitEditListMode),manageFocus:Q.const({shouldBeFocused:function(){return Q.controller.getBrailleMode()==="none"&&z.defaultShouldBeFocused({controller:Q.controller,location:{type:"readonly-expression",id:Q.model.id}})},onFocusedChanged:function(pe){Q.controller.getBrailleMode()==="none"&&(pe?Q.controller.dispatch({type:"set-focus-location",location:{type:"readonly-expression",id:Q.model.id}}):Q.controller.dispatch({type:"blur-focus-location",location:{type:"readonly-expression",id:Q.model.id}}))}})},te.createElement(B.default,{latex:function(){return v.getDisplayLatex(Q.model)},ariaLabel:function(){return Q.getAriaLabel("braille")},controller:Q.props.controller,isStatic:Q.const(!0),brailleShouldFocus:function(){var pe=Q.controller.getFocusLocation();return!!pe&&pe.type==="readonly-expression"&&pe.id===Q.id},onBrailleFocusedChanged:function(pe){pe?Q.controller.dispatch({type:"set-focus-location",location:{type:"readonly-expression",id:Q.model.id}}):Q.controller.dispatch({type:"blur-focus-location",location:{type:"readonly-expression",id:Q.model.id}})}},te.createElement(d.default,{latex:function(){return v.getDisplayLatex(Q.model)},getAriaLabel:function(){return Q.getAriaLabel("speech")}})))})),te.createElement("i",{class:te.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:te.const("true"),onTap:this.bindFn(this.onDelete)}),te.createElement($,{predicate:this.bindFn(this.shouldShowFooter)},function(){return te.createElement("div",{class:Q.getFooterClass()},re(function(){return Q.getFooterType()},{none:function(){},regression:function(){return te.createElement(r.default,{model:Q.props.model,controller:Q.props.controller})},label:function(){return te.createElement(b.default,{model:Q.props.model,controller:Q.props.controller})},slider:function(){return te.createElement(o.default,{model:Q.props.model,controller:Q.props.controller})},domain:function(){return te.createElement(p.default,{model:Q.props.model,controller:Q.props.controller})},evaluation:function(){return te.createElement(y.default,{id:function(){return Q.props.model().id},dependent:function(){return Q.model.dependent||""},val:function(){return Q.controller.getEvaluationValueForItem(Q.id)},controller:Q.props.controller,focusable:Q.const(!1)})},distribution:function(){return te.createElement(E.default,{model:Q.props.model,controller:Q.props.controller})},visualization:function(){return te.createElement(M.default,{model:Q.props.model,controller:Q.props.controller})},ttest:function(){return te.createElement(D.default,{model:Q.props.model,controller:Q.props.controller})},stats:function(){return te.createElement(A.default,{model:Q.props.model,controller:Q.props.controller})},unresolved:function(){return te.createElement(h.default,{controller:Q.props.controller})}}),te.createElement($,{predicate:Q.bindFn(Q.shouldShowClickableProperties)},function(){return te.createElement(H.ClickableInfoView,{controller:function(){return Q.props.controller()},model:function(){return Q.model}})}),te.createElement($,{predicate:Q.bindFn(Q.shouldShowBrailleError)},function(){return te.createElement("div",{tabindex:te.const(0),class:te.const("dcg-expression-braille-error"),"aria-roledescription":te.const("error"),"aria-label":function(){return Q.controller.unpack(Q.model.error)}},te.createElement("i",{class:te.const("dcg-icon-error")}),function(){return Q.controller.unpack(Q.model.error)})}),te.createElement($,{predicate:Q.bindFn(Q.shouldShowSliderPrompt)},function(){return te.createElement(m.default,{model:Q.props.model,controller:Q.props.controller})}))})),te.createElement("span",{class:te.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleevent:te.const("true"),tapboundary:te.const("true"),disablescroll:te.const("true"),style:te.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},te.createElement("span",{class:te.const("dcg-num")},function(){return Q.model.displayIndex}),te.createElement("div",{class:te.const("dcg-tab-interior dcg-action-icon-mouse")},te.createElement(f.default,{model:this.props.model,controller:this.props.controller})),te.createElement(X.SuggestedZoomView,{model:this.props.model,controller:this.props.controller})),te.createElement(J.ExpressionEditActions,{controller:this.props.controller,id:function(){return Q.model.id}}))},ie.prototype.shouldShowFooter=function(){return!!this.shouldShowBrailleError()||!!this.shouldShowSliderPrompt()||!!this.shouldShowClickableProperties()||this.getFooterType()!=="none"},ie.prototype.shouldShowClickableProperties=function(){return!!this.controller.canAuthorClickableObjects()&&!!v.isClickableAllowed(this.model)&&this.model.clickableInfo.enabled},ie.prototype.getFooterType=function(){return this.hasRegression()?"regression":this.shouldShowLabelView()?"label":this.hasSlider()?"slider":this.hasDomain()?"domain":this.isTTest()?"ttest":this.isStats()?"stats":this.controller.shouldShowEvaluationForItem(this.id)?"evaluation":this.isToplevelDistribution()?"distribution":this.isVisualization()?"visualization":this.model.unresolved?"unresolved":"none"},ie.prototype.getFooterClass=function(){return this.isFirstRender()?this.const("dcg-expression-bottom dcg-indent-in-folder"):this.const("dcg-expression-bottom dcg-indent-in-folder dcg-fadein-bottom")},ie.prototype.onCreateSliders=function(Q){this.controller.dispatch({type:"create-sliders-for-item",id:this.id,variables:Q})},ie.prototype.shouldShowLabelView=function(){return x.get("labels")&&v.isPointOrPointList(this.model)},ie.prototype.shouldShowSliderPrompt=function(){return!!this.controller.areSlidersEnabled()&&this.model.missingVariables.length>0},ie.prototype.shouldShowBrailleError=function(){return this.controller.getBrailleMode()!=="none"&&this.hasError()},ie.prototype.hasRegression=function(){return!(!this.model.formula||!this.model.formula.is_regression)},ie.prototype.hasDomain=function(){return v.hasDomain(this.model)},ie.prototype.isToplevelDistribution=function(){return v.isToplevelDistribution(this.model)},ie.prototype.isVisualization=function(){return v.isVisualization(this.model)},ie.prototype.isTTest=function(){return v.isTTest(this.model)},ie.prototype.isStats=function(){return v.isStats(this.model)},ie.prototype.hasSlider=function(){return!!this.model.sliderExists},ie.prototype.getLabelOptions=function(){return this.controller.getEvaluationLabelOptionsForItem(this.model.id)},ie.prototype.getAriaLabel=function(Q){if(this.shouldShowLabelView()){var pe;return pe=this.model.label&&this.model.label!==""?this.model.label:Q==="speech"?this.controller.t("Label"):this.controller.raw("lbl"),this.model.showLabel?pe:Q==="speech"?this.controller.t("Hidden __label__",{label:pe}):this.controller.raw("h __label__",{label:pe})}return Q==="speech"?this.controller.t("Expression __index__",{index:this.model.displayIndex}):this.controller.raw("eq__index__",{index:this.model.displayIndex})},ie.prototype.getFormulaAria=function(){var Q=this.model.formula,pe="";if(!Q||v.isEmpty(this.model))return pe;if(this.controller.shouldShowEvaluationForItem(this.id)){pe="equals ";var ee=Q.zero_values&&Q.zero_values.length?Q.zero_values[0].val:Q.constant_value;Array.isArray(ee)?pe+=ee.length+" element list.":pe+=k.truncatedAriaLabel(ee,this.getLabelOptions())}else Q.error&&!this.shouldShowSliderPrompt()?pe=this.controller.unpack(Q.error):v.isToplevelDistribution(this.model)?pe=this.controller.t("is distribution. "):this.isTTest()&&(pe=this.controller.t("is T test. To access statistics, press Tab."));if(this.model.shouldGraph&&(Q.is_graphable||Q.is_regression)){Q.is_graphable&&Q.is_regression?pe+=this.controller.t("Has graph and regression. To access statistics, press Tab."):Q.is_regression?pe+=this.controller.t("Has regression. To access statistics, press Tab."):pe+=this.controller.t("Has graph.");var ae=this.controller.getAudioGraph();ae&&ae.agNavigator.canTrace(this.model)&&(l.IS_APPLE?pe+=this.controller.t(" To audio trace, press OPTION+T."):pe+=this.controller.t(" To audio trace, press ALT+T."))}return pe},ie.prototype.handleBraillePressedKey=function(Q){var pe=n.lookup(Q);if(pe){if(pe==="Esc")u.default(),this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}});else if(pe==="Up"||pe==="Down"||pe==="Enter")this.controller.dispatch({type:"on-special-key-pressed",key:pe});else if(pe==="Del"||pe==="Backspace"){var ee=B.getFocusedBrailleElement();v.isEmpty(this.model)&&B.brailleInputIsEmpty(ee)&&(this.controller.dispatch({type:"on-special-key-pressed",key:pe==="Del"?"Delete":pe}),Q.preventDefault(),Q.stopPropagation())}}},ie.prototype.handlePressedKey=function(Q,pe){var ee=g.default.getFocusedMathquill();if(ee){if(Q==="Esc")return u.default(),void(this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}}));if(Q==="Up"||Q==="Down")return g.default.applyArrowKeyAndReturnIfWasAtBounds(ee,Q,pe)?this.controller.dispatch({type:"on-special-key-pressed",key:Q}):void 0;if(Q==="Delete"||Q==="Backspace"){if(v.isEmpty(this.model))return this.controller.dispatch({type:"on-special-key-pressed",key:Q})}else if(Q==="Enter")return pe&&(pe.preventDefault(),pe.stopPropagation()),this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});ee.keystroke(Q,pe),this.handleLatexChanged(ee.latex())}},ie.prototype.handleLatexChanged=function(Q){Q!==this.model.latex&&this.controller.dispatch({type:"set-item-latex",id:this.id,latex:Q})},ie.prototype.doesNodeBelongToSliderLimit=function(Q){return!!Q&&!!this.rootNode.contains(Q)&&!!i(Q).closest("[data-dcg-limit]").length},ie.prototype.handleMQFocusedChanged=function(Q,pe){Q?this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}):this.doesNodeBelongToSliderLimit(pe.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"expression",id:this.id}})},ie.prototype.onMouseSelect=function(Q){Q.device!=="keyboard"&&(Q.type==="dcg-tap"&&Q.device==="mouse"||Q.type==="dcg-tapstart"&&Q.device==="touch"||Q.wasHandled()||(Q.handle(),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}})))},ie.prototype.isFocused=function(){var Q=this.controller.getFocusLocation();return!!Q&&Q.type==="expression"&&Q.id===this.id},ie.prototype.isSliderThumbFocused=function(){var Q=this.controller.getFocusLocation();return!!Q&&Q.type==="slider-thumb"&&Q.id===this.id},ie.prototype.hasError=function(){return!!this.model.error&&!v.isEmpty(this.model)},ie})(s.default);c.default=K}),P("loadcss!expressions/smart_textarea",function(){}),P("expressions/smart_textarea",["require","exports","tslib","keys","browser","dcgview","jquery","lib/conditional_blur","jquery.handleevent","loadcss!./smart_textarea"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=n.Components.Textarea,d=(function(u){function f(){return u!==null&&u.apply(this,arguments)||this}return x.__extends(f,u),f.prototype.template=function(){var y=this;return n.createElement("div",{class:n.const("dcg-smart-textarea-container")},n.createElement("div",{class:n.const("dcg-displayTextarea dcg-fixed-width-element"),didMount:this.bindFn(this.didMountDisplay)}),n.createElement(g,{class:function(){return{"dcg-do-blur":!0,"dcg-fixed-width-element":!0,"dcg-smart-textarea":!0,"dcg-empty":!y.props.text()}},"aria-label":function(){return y.props.ariaLabel?y.props.ariaLabel():void 0},placeholder:this.props.placeholder,readonly:function(){return!!y.props.readonly()||void 0},value:this.props.text,onInput:this.props.onInput,didMount:this.bindFn(this.didMountTextarea),onKeydown:this.bindFn(this.onKeydownEvent)}))},f.prototype.getDisplayTextHTML=function(){var y=this.props.text()||"";if(y=y.replace(/</g,"&lt;").replace(/>/g,"&gt;"),!this.props.showLinks())return y;var h=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return y=y.replace(h,"<a href='$1' target ='_blank'>$1</a>")},f.prototype.willUnmount=function(){this.textareaNode=void 0},f.prototype.didMountDisplay=function(y){this.displayNode=y,i(y).on("touchend",function(h){h.preventDefault()}),i(y).on("dcg-tap dcg-tapstart","a",function(h){h.handle()}),this.renderDisplayText()},f.prototype.didMountTextarea=function(y){var h=this;this.textareaNode=y,i(y).on("dcg-tapstart",function(p){p.handle()}),i(y).on("focusin focusout",function(){return h.onFocusEvent()}),this.updateFocused()},f.prototype.didUpdate=function(){this.updateFocused(),this.renderDisplayText()},f.prototype.onFocusEvent=function(){if(this.textareaNode){var y=document.activeElement===this.textareaNode;this.shouldBeFocused()!==y&&this.props.onFocusChange(y)}},f.prototype.renderDisplayText=function(){if(this.displayNode){var y=this.getDisplayTextHTML();this.lastDisplayTextHTML!==y&&(this.lastDisplayTextHTML=y,this.displayNode.innerHTML=y)}},f.prototype.isFocused=function(){return document.activeElement===this.textareaNode},f.prototype.shouldBeFocused=function(){return this.props.shouldFocus()},f.prototype.updateFocused=function(){if(this.textareaNode){var y=this.isFocused(),h=this.shouldBeFocused();if(y!==h)if(h){if(l.IS_IPAD&&l.IS_IN_IFRAME)return;this.textareaNode.focus(),this.textareaNode.selectionStart=this.textareaNode.selectionEnd=this.textareaNode.value.length}else this.textareaNode.blur()}},f.prototype.onKeydownEvent=function(y){var h=this.textareaNode;if(h){var p=t.lookup(y);if(this.props.readonly()&&this.props.readonlyAction!==void 0)return void(y.altKey||y.ctrlKey||y.metaKey||y.shiftKey||p!==t.ENTER&&p!==t.SPACEBAR||(y.preventDefault(),this.props.readonlyAction()));p!==t.ENTER||y.metaKey?p===t.ESCAPE?s.default():p===t.UP?h.selectionStart===0&&h.selectionEnd===0&&(y.preventDefault(),this.props.onSpecialKey("Up")):p===t.DOWN?h.selectionStart===h.value.length&&h.selectionEnd===h.value.length&&(y.preventDefault(),this.props.onSpecialKey("Down")):p===t.BACKSPACE?h.value.length===0&&(y.preventDefault(),this.props.onSpecialKey("Backspace")):p===t.DELETE&&h.value.length===0&&(y.preventDefault(),this.props.onSpecialKey("Delete")):(y.preventDefault(),this.props.onSpecialKey("Enter")),this.props.onKeydown&&this.props.onKeydown(y)}},f})(n.Class);c.default=d}),P("expressions/text_view",["require","exports","tslib","./abstract-item-view","./smart_textarea","dcgview","./expression-edit-actions","jquery.handleevent"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=(function(g){function d(){return g!==null&&g.apply(this,arguments)||this}return x.__extends(d,g),d.prototype.didMount=function(){this.onItemViewMounted()},d.prototype.willUnmount=function(){this.onItemViewUnmounted()},d.prototype.template=function(){var u=this;return n.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressiontext":!0,"dcg-inFolder":!!u.model.folderId,"dcg-selected":!!u.controller.isItemSelected(u.id),"dcg-dragging":!!u.controller.isItemBeingDragged(u.id),"dcg-author-ide":u.controller.isAuthorIDE()}},"expr-id":function(){return u.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},n.createElement("div",{class:n.const("dcg-fade-container")},n.createElement("div",{class:n.const("dcg-main")},n.createElement(l.default,{shouldFocus:this.bindFn(this.isFocused),text:function(){return u.model.text},placeholder:function(){return u.controller.t("Enter a note...")},showLinks:function(){return u.controller.areLinksEnabled()},onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),readonly:function(){return u.controller.isInEditListMode()},readonlyAction:this.bindFn(this.exitEditListMode)})),n.createElement("i",{class:n.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:n.const("true"),onTap:this.bindFn(this.onDelete)})),n.createElement("span",{class:n.const("dcg-tab dcg-action-drag"),handleevent:n.const("true"),tapboundary:n.const("true"),disablescroll:n.const("true"),style:n.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},n.createElement("span",{class:n.const("dcg-num")},function(){return u.model.displayIndex}),n.createElement("div",{class:n.const("dcg-tab-interior")}),n.createElement("i",{class:n.const("dcg-icon-text")})),n.createElement(i.ExpressionEditActions,{controller:this.props.controller,id:function(){return u.model.id}}))},d.prototype.onInput=function(u){this.controller.dispatch({type:"set-note-text",id:this.id,text:u})},d.prototype.onFocusChange=function(u){u?this.controller.dispatch({type:"set-focus-location",location:{type:"text",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"text",id:this.id}})},d.prototype.onSpecialKey=function(u){return this.controller.dispatch({type:"on-special-key-pressed",key:u})},d.prototype.isFocused=function(){var u=this.controller.getFocusLocation();return!(!u||u.type!=="text"||u.id!==this.id)},d})(t.default);c.default=s}),P("expressions/tables/table_icon_view",["require","exports","tslib","dcgview","dcgview-helpers/tooltipped-error","../circular-icon-view","jquery.handleevent"],function(S,c,x,t,l,n){Object.defineProperty(c,"__esModule",{value:!0});var i=t.Components.SwitchUnion,s=(function(g){function d(){return g!==null&&g.apply(this,arguments)||this}return x.__extends(d,g),d.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},d.prototype.template=function(){var u=this;return t.createElement("div",{class:t.const("dcg-table-icon-container")},i(this.bindFn(this.typeOfIcon),{error:function(){return t.createElement(l.TooltippedError,{error:function(){return u.controller.unpack(u.model.error)},gravity:u.const("se")})},none:function(){return t.createElement("span",null)},icon:function(){return t.createElement("div",{class:t.const("dcg-circular-icon-container"),role:t.const("button"),handleevent:t.const("true"),onTap:function(f){if(!f.wasHandled("dragdrop")&&!f.wasLongheld())return u.myOptionsOpen()||u.controller.isInEditListMode()?u.toggleOptions():void u.toggleGraphShown()},didMount:function(f){return u.rootElt=f},onLongHold:function(f){f.handle("dcg-longhold"),f.handle("dcg-tap"),u.toggleOptions()}},t.createElement(n.CircularIconView,{iconType:u.bindFn(u.getIcon),backgroundColor:function(){return u.model.color}}))}}))},d.prototype.myOptionsOpen=function(){var u=this.controller.getOpenItemMenu();return!!u&&u.model===this.model},d.prototype.toggleOptions=function(){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"table-column",model:this.model,icon:this.rootElt,focusFirstOption:!1}})},d.prototype.didMountRoot=function(u){this.rootElt=u},d.prototype.toggleGraphShown=function(){this.controller.dispatch({type:"toggle-tablecolumn-hidden",tableId:this.model.table.id,columnId:this.model.id})},d.prototype.hasError=function(){return!!this.model.error},d.prototype.getIcon=function(){return this.model.shouldGraph?this.controller.isInEditListMode()?"none":this.model.points&&this.model.lines?"table-points-and-lines":this.model.points&&!this.model.lines?"table-points":!this.model.points&&this.model.lines?"table-lines":"none":"hidden"},d.prototype.typeOfIcon=function(){return this.model.latex===""?"none":this.controller.getGraphSettings().config.graphpaper?this.model.error?"error":this.model.index===0?"none":"icon":"none"},d})(t.Class);c.default=s}),P("expressions/tables/header-view",["require","exports","tslib","keys","jquery","browser","dcgview","./table_icon_view","dcgview-helpers/mathquill-view","dcgview-helpers/static-mathquill-view","underscore","graphing-calc/models/table","core/lib/dragmode","dcgview-helpers/mathquill-braille-wrapper"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h){Object.defineProperty(c,"__esModule",{value:!0});var p=i.Components.If,r=(function(o){function m(){return o!==null&&o.apply(this,arguments)||this}return x.__extends(m,o),m.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller(),this.table=this.model.table},m.prototype.isRightSide=function(){return this.lookupCellPosition().column>=this.table.columnModels.length-1},m.prototype.template=function(){var b=this;return i.createElement("div",{role:i.const("columnheader"),class:function(){return{"dcg-cell":!0,"dcg-table-header":!0,"dcg-do-not-blur":!0,"dcg-left":b.model.index===0,"dcg-right":b.isRightSide(),"dcg-selected":b.shouldFocus(),"dcg-error":!!b.model.error}},index:function(){return b.model.index},onTapStart:this.bindFn(this.focusThisCell)},i.createElement("div",{class:i.const("dcg-inner-border")}),i.createElement(p,{predicate:function(){return!b.isRightSide()}},function(){return i.createElement(s.default,{model:b.props.model,controller:b.props.controller})}),i.createElement(p,{predicate:function(){return!b.controller.isInEditListMode()}},function(){return i.createElement(h.default,{latex:function(){return b.model.latex||""},tooltipOptions:function(){return{gravity:"s"}},brailleShouldFocus:b.bindFn(b.shouldFocus),ariaLabel:function(){return b.getAriaLabel("braille")},onBrailleInput:function(E){return b.handleLatexChanged(E)},controller:b.props.controller,onBrailleFocusedChanged:b.bindFn(b.handleMQFocusedChanged),selectOnFocus:b.const(!0),onBrailleKeydown:b.bindFn(b.handleKeydownOnBrailleInput)},i.createElement(g.default,{latex:function(){return b.model.latex||""},isFocused:b.bindFn(b.shouldFocus),capExpressionSize:function(){return b.controller.getCapExpressionSize()},config:b.const({}),getAriaLabel:function(){return b.getAriaLabel("speech")},getAriaPostLabel:b.bindFn(b.getAriaPostLabel),hasError:b.const(!1),onUserPressedKey:function(E,M){return b.handlePressedKey(E,M)},onUserChangedLatex:function(E){return b.handleLatexChanged(E)},onExpressionSizeExceeded:function(){return b.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:b.bindFn(b.handleMQFocusedChanged),selectOnFocus:b.const(!0),needsSystemKeypad:function(){return!b.controller.isKeypadEnabled()}},i.createElement("span",{class:i.const("dcg-math-field dcg-cell-math-content")})))}),i.createElement(p,{predicate:function(){return b.controller.isInEditListMode()}},function(){return i.createElement(h.default,{latex:function(){return b.model.latex||""},tooltipOptions:function(){return{gravity:"s"}},ariaLabel:function(){return b.getAriaLabel("braille")},onBrailleInput:function(E){return b.handleLatexChanged(E)},controller:b.props.controller,tabindex:b.const(-1),isStatic:b.const(!0),brailleShouldFocus:b.bindFn(b.shouldFocusNonEditCell),onBrailleFocusedChanged:b.bindFn(b.handleMQFocusedChanged)},i.createElement(d.default,{latex:function(){return b.model.latex||""},getAriaLabel:function(){return b.getAriaLabel("speech")}},i.createElement("span",{class:i.const("dcg-math-field dcg-cell-math-content"),role:i.const("textbox"),"aria-roledescription":i.const("cell"),"aria-readonly":i.const("true"),tabindex:i.const("-1")})))}),i.createElement(p,{predicate:function(){return b.model.dragMode!==y.DragMode.NONE&&!b.model.error}},function(){return i.createElement("span",{class:i.const("dcg-drag-icon"),"dcg-drag-mode":function(){return b.model.dragMode},style:function(){return{color:b.model.color}}},i.createElement("i",{class:function(){return{"dcg-icon-move":b.model.dragMode===y.DragMode.XY,"dcg-icon-move-horizontal":b.model.dragMode===y.DragMode.X,"dcg-icon-move-vertical":b.model.dragMode===y.DragMode.Y}}}))}),i.createElement("div",{class:i.const("dcg-empty-line")}),i.createElement(p,{predicate:function(){return b.isRightSide()}},function(){return i.createElement("span",{class:i.const("dcg-fade-right")})}))},m.prototype.focusThisCell=function(b){b.wasHandled()||(b.handle(),this.shouldFocus()||this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}))},m.prototype.lookupCellPosition=function(){return{row:0,column:this.model.index}},m.prototype.getAriaLabel=function(b){var E=this.lookupCellPosition();return b==="speech"?this.controller.t("Column header __column__",{column:E.column+1}):this.controller.raw("h__column__",{column:E.column+1})},m.prototype.getAriaPostLabel=function(){var b="",E=this.model;return E.shouldGraph&&(E.points||E.lines)&&!f.isColumnEmpty(E)&&(b=this.controller.t("Has graph."),n.IS_APPLE?b+=" "+this.controller.t("To audio trace, press OPTION+T."):b+=" "+this.controller.t(" To audio trace, press ALT+T.")),b},m.prototype.handlePressedKey=function(b,E){var M=g.default.getFocusedMathquill();M&&(g.default.handleKeystrokeAndDecideIfSpecialEvent(M,b,E)?this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:b}):this.handleLatexChanged(M.latex()))},m.prototype.handleKeydownOnBrailleInput=function(b){var E=t.lookup(b);if(E){var M=E==="Enter"||E==="Up"||E==="Down",D=h.getFocusedBrailleElement(),A=D&&E==="Left"&&D.selectionStart===0||E==="Right"&&D.selectionStart===l(D).val().length,v=this.model.latex.length===0&&h.brailleInputIsEmpty(D),k=E==="Del"||E==="Backspace";(M||A||k&&v)&&(this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:E==="Del"?"Delete":E}),b.preventDefault())}},m.prototype.handleLatexChanged=function(b){this.model.latex!==b&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:b})},m.prototype.shouldFocus=function(){return!this.controller.isInEditListMode()&&u.isEqual(this.lookupCellPosition(),f.getSelectedCell(this.table))},m.prototype.shouldFocusNonEditCell=function(){return u.isEqual(this.lookupCellPosition(),f.getSelectedCell(this.table))},m.prototype.isNodeWithinTableCell=function(b){if(!b||l(b).closest(".dcg-cell").length===0)return!1;var E=this.controller.getItemRootNodeById(this.table.id);return!!E&&l.contains(E,b)},m.prototype.handleMQFocusedChanged=function(b,E){b?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(E.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})},m})(i.Class);c.default=r}),P("expressions/tables/cell-view",["require","exports","tslib","keys","dcgview","jquery","dcgview-helpers/mathquill-view","dcgview-helpers/static-mathquill-view","underscore","graphing-calc/models/table","../../dcgview-helpers/tooltipped-error","lib/conditional_blur","dcgview-helpers/mathquill-braille-wrapper"],function(S,c,x,t,l,n,i,s,g,d,u,f,y){Object.defineProperty(c,"__esModule",{value:!0});var h=l.Components.If,p=(function(r){function o(){return r!==null&&r.apply(this,arguments)||this}return x.__extends(o,r),o.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller(),this.table=this.model.column.table},o.prototype.template=function(){var m=this;return l.createElement("div",{role:l.const("gridcell"),class:function(){return{"dcg-cell":!0,"dcg-do-not-blur":!0,"dcg-empty":m.isEmpty(),"dcg-non-editable":!!m.model.column.disabled,"dcg-error":!!m.hasError(),"dcg-selected":m.shouldFocus()}},onTapStart:this.bindFn(this.focusThisCell)},l.createElement("div",{class:l.const("dcg-inner-border")}),l.createElement(h,{predicate:this.bindFn(this.hasError)},function(){return l.createElement("span",{class:l.const("dcg-table-icon-error-container")},l.createElement(u.TooltippedError,{error:m.bindFn(m.getErrorMessage),gravity:m.const("se"),size:m.const("small")}))}),l.createElement(h,{predicate:function(){return!!m.model.column.disabled||m.controller.isInEditListMode()}},function(){return l.createElement(y.default,{latex:function(){return m.getValue()},tooltipOptions:function(){return{gravity:"s"}},brailleShouldFocus:m.bindFn(m.shouldFocusReadonlyCell),ariaLabel:function(){return m.getAriaLabel("braille")},controller:m.props.controller,tabindex:function(){return m.controller.isInEditListMode()?-1:0},isStatic:m.const(!0),onBrailleFocusedChanged:m.bindFn(m.handleFocusedChanged),onBrailleKeydown:function(b){return m.handleKeydownOnReadonlyCell(b),!0}},l.createElement(s.default,{getAriaLabel:function(){return m.getAriaLabel("speech")},latex:function(){return m.getValue()}},l.createElement("span",{class:l.const("dcg-math-field dcg-cell-math-content dcg-mathquill-input-span"),role:l.const("textbox"),"aria-roledescription":l.const("computed cell"),"aria-readonly":l.const("true"),tabindex:function(){return m.controller.isInEditListMode()||m.isEmpty()?-1:0},onKeyDown:m.bindFn(m.handleKeydownOnReadonlyCell),manageFocus:m.const({shouldBeFocused:m.bindFn(m.shouldFocusReadonlyCell),onFocusedChanged:m.bindFn(m.handleFocusedChanged)})})))}),l.createElement(h,{predicate:function(){return!m.model.column.disabled&&!m.controller.isInEditListMode()}},function(){return l.createElement(y.default,{latex:function(){return m.getValue()},tooltipOptions:function(){return{gravity:"s"}},brailleShouldFocus:m.bindFn(m.shouldFocusEditableCell),ariaLabel:function(){return m.getAriaLabel("braille")},onBrailleInput:function(b){return m.handleLatexChanged(b)},controller:m.props.controller,onBrailleFocusedChanged:m.bindFn(m.handleFocusedChanged),onBrailleKeydown:m.bindFn(m.handleKeydownOnBrailleInput),selectOnFocus:m.const(!0)},l.createElement(i.default,{latex:function(){return m.getValue()},isFocused:m.bindFn(m.shouldFocusEditableCell),capExpressionSize:function(){return m.controller.getCapExpressionSize()},config:m.const({}),getAriaLabel:function(){return m.getAriaLabel("speech")},getAriaPostLabel:m.bindFn(m.getErrorMessage),hasError:m.const(!1),onUserPressedKey:function(b,E){return m.handlePressedKey(b,E)},onUserChangedLatex:function(b){return m.handleLatexChanged(b)},onExpressionSizeExceeded:function(){return m.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:m.bindFn(m.handleFocusedChanged),selectOnFocus:m.const(!0),needsSystemKeypad:function(){return!m.controller.isKeypadEnabled()}},l.createElement("span",{class:l.const("dcg-math-field dcg-cell-math-content")})))}),l.createElement("div",{class:l.const("dcg-empty-line")}))},o.prototype.focusThisCell=function(m){m.wasHandled()||(m.handle(),this.shouldFocus()||this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}))},o.prototype.handlePressedKey=function(m,b){var E=i.default.getFocusedMathquill();if(E){var M=i.default.handleKeystrokeAndDecideIfSpecialEvent(E,m,b);m===t.ESCAPE&&f.default(),M?this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:m}):this.handleLatexChanged(E.latex())}},o.prototype.handleKeydownOnBrailleInput=function(m){var b=t.lookup(m);if(b){b===t.ESCAPE&&f.default();var E=b==="Enter"||b==="Up"||b==="Down",M=y.getFocusedBrailleElement(),D=M&&b==="Left"&&M.selectionStart===0||b==="Right"&&M.selectionStart===n(M).val().length,A=b==="Del"||b==="Backspace";(E||D||A&&this.getValue().length===0)&&(this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:b==="Del"?"Delete":b}),m.preventDefault())}},o.prototype.handleKeydownOnReadonlyCell=function(m){var b=t.lookup(m);b!=="Tab"&&(m.preventDefault(),b==="Esc"&&f.default(),b&&this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:b}))},o.prototype.handleLatexChanged=function(m){this.getValue()!==m&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:m})},o.prototype.shouldFocus=function(){return g.isEqual(this.lookupCellPosition(),d.getSelectedCell(this.table))},o.prototype.shouldFocusReadonlyCell=function(){return!this.controller.isInEditListMode()&&!!this.model.column.disabled&&this.shouldFocus()},o.prototype.shouldFocusEditableCell=function(){return!this.model.column.disabled&&this.shouldFocus()},o.prototype.isNodeWithinTableCell=function(m){if(!m||n(m).closest(".dcg-cell").length===0)return!1;var b=this.controller.getItemRootNodeById(this.table.id);return!!b&&n.contains(b,m)},o.prototype.handleFocusedChanged=function(m,b){m?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(b.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})},o.prototype.lookupCellPosition=function(){return{row:this.model.row.index,column:this.model.column.index}},o.prototype.getPackedError=function(){return this.model.column.packedErrors[this.model.row.index-1]},o.prototype.hasError=function(){return!!this.getPackedError()},o.prototype.getErrorMessage=function(){var m=this.getPackedError();return m?this.controller.unpack(m):""},o.prototype.getValue=function(){var m=this.model.column.index,b=this.model.row.index-1;return this.model.column.disabled?this.model.column.computedValues[b]||"":this.table.columns[m].values[b]||""},o.prototype.isEmpty=function(){var m=y.getFocusedBrailleElement();return this.getValue()===""&&y.brailleInputIsEmpty(m)},o.prototype.getAriaLabel=function(m){var b=this.lookupCellPosition(),E=b.row,M=b.column+1;return m==="speech"?this.controller.t("Row __row__ Col __column__",{row:E.toString(),column:M.toString()}):this.controller.raw("r__row__c__column__",{row:E.toString(),column:M.toString()})},o})(l.Class);c.default=p}),P("loadcss!expressions/table-view",function(){}),P("expressions/table-view",["require","exports","tslib","keys","lib/aria","./abstract-item-view","dcgview","./tables/header-view","./tables/cell-view","graphing-calc/models/table","vendor/mathquill","jquery","./expression-edit-actions","expressions/measure-expressions","./suggested-zoom-view","main/manage-focus-helper","loadcss!./table-view","jquery.handleevent"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r){Object.defineProperty(c,"__esModule",{value:!0});var o=i.Components.For,m=(function(b){function E(){return b!==null&&b.apply(this,arguments)||this}return x.__extends(E,b),E.prototype.didMount=function(){this.onItemViewMounted()},E.prototype.willUnmount=function(){this.onItemViewUnmounted()},E.prototype.template=function(){var M=this;return i.createElement("div",{class:function(){return{"dcg-expressionitem":!0,"dcg-expressiontable":!0,"dcg-inFolder":!!M.model.folderId,"dcg-selected":!!M.controller.isItemSelected(M.id),"dcg-dragging":!!M.controller.isItemBeingDragged(M.id),"dcg-no-faded-h":M.isRightFocused(),"dcg-no-faded-v":M.isBottomFocused(),"dcg-author-ide":M.controller.isAuthorIDE()}},"expr-id":function(){return M.model.id},didMount:this.bindFn(this.didMountContainer),onKeydown:this.bindFn(this.onKeydown)},i.createElement("div",{class:i.const("dcg-fade-container dcg-disable-horizontal-scroll-to-cursor")},i.createElement("div",{class:i.const("dcg-main")},i.createElement("div",{class:i.const("dcg-table-container"),tabindex:function(){return M.controller.isInEditListMode()?0:-1},"aria-label":function(){return M.controller.getBrailleMode()==="none"?M.controller.t("Expression __index__ table",{index:M.model.displayIndex}):M.controller.t("eq__index__ table",{index:M.model.displayIndex})},didMount:this.bindFn(this.didMountContainer),manageFocus:this.const(r.manageFocusHelper({controller:this.controller,location:{type:"table-container",id:this.model.id}}))},i.createElement("div",{class:i.const("dcg-table-sliding-container"),style:function(){return{transform:"translateX("+M.computeScrolledX()+"px)"}}},i.createElement(o,{each:function(){return M.getVisibleRowModels()},key:function(D){return D.type==="blank-row"?"blank-row-"+D.guid+"-"+D.rows+"-"+M.getCols():D.guid}},i.createElement("div",{role:i.const("grid"),class:function(){return{"dcg-tabledata":!0,"dcg-focus-in-bottom-row":M.isBottomFocused(),"dcg-focus-in-right-column":M.isRightFocused()}}},function(D){return D.type==="show-more"?i.createElement("tr",{role:i.const("row"),class:i.const("dcg-show-more-row")},i.createElement("td",{colspan:M.bindFn(M.getCols)},M.bindFn(M.missingRowMessage),i.createElement("div",{tabindex:i.const(0),role:i.const("button"),class:i.const("dcg-show-more"),onTap:function(){return M.controller.dispatch({type:"table-show-more-rows",id:M.id})}},function(){return M.controller.t("Show all")}))):D.type==="blank-row"?i.createElement("tr",{role:i.const("row"),class:i.const("dcg-blank-row")},i.createElement("td",{colspan:M.bindFn(M.getCols),style:function(){return{height:D.rows*M.getRowHeight()+"px"}}})):i.createElement(o,{each:function(){return D.cells},key:function(A){return A.guid}},i.createElement("tr",{role:i.const("row"),"aria-rowindex":function(){return D.index},class:function(){return{"dcg-row":D,"dcg-braille-row":M.controller.getBrailleMode()!=="none"}}},function(A){return A.type==="header"?i.createElement(s.default,{controller:M.props.controller,model:M.const(A)}):i.createElement(g.default,{controller:M.props.controller,model:M.const(A)})}))}))))),i.createElement("i",{class:i.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:i.const("true"),onTap:this.bindFn(this.onDelete)})),i.createElement("span",{class:i.const("dcg-tab dcg-action-drag"),handleevent:i.const("true"),tapboundary:i.const("true"),disablescroll:i.const("true"),style:i.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},i.createElement("span",{class:i.const("dcg-num")},function(){return M.model.displayIndex}),i.createElement("div",{class:i.const("dcg-tab-interior")}),i.createElement(p.SuggestedZoomView,{model:this.props.model,controller:this.props.controller})),i.createElement(y.ExpressionEditActions,{controller:this.props.controller,id:function(){return M.model.id}}))},E.prototype.getCols=function(){return this.model.rowModels[0].cells.length-1},E.prototype.getRowHeight=function(){return this.controller.getGraphSettings().config.projectorMode?38:33},E.prototype.getVisibleRowModels=function(){var M=this.model.rowModels;if(M.length<=25)return M;var D=d.getCollapsedRange(this.model);if(D!==void 0){var A=M.slice(0,D.min);return A=A.concat({type:"show-more",guid:"show-more"}),A.concat(M.slice(D.max))}var v=h.getExppanelRect(this.controller),k=v?v.height:0,J=f(this.node).offset(),X=(J?J.top:0)-(v?v.top:0),te=f(this.node).find(".dcg-row:eq(0)").height(),H=this.getRowHeight();if(k/H>M.length)return M;for(var z=[],B=(-X-te)/H,F=(k-X)/H,$=0;$<M.length;$++){var re=d.getSelectedCell(this.model);if($===0||$===M.length-2||re&&re.row===$)z.push(M[$]);else if($>F||$<B){var K=z[z.length-1];K&&K.type==="blank-row"?K.rows++:z.push({type:"blank-row",guid:M[$].guid,rows:1})}else z.push(M[$])}return z},E.prototype.missingRowMessage=function(){var M=d.getCollapsedRange(this.model);return M===void 0?"":this.controller.t("__rowCount__ more rows",{rowCount:M.max-M.min})},E.prototype.didMountContainer=function(M){this.node=M,f(M).on("scroll",function(){return M.scrollLeft=0})},E.prototype.getSelectedCell=function(){return d.getSelectedCell(this.model)},E.prototype.computeScrolledX=function(){if(!this.getSelectedCell()||!this.node)return 0;var M=this.node.children[0],D=this.node.querySelector(".dcg-selected");if(M===null||D===null)return 0;var A=this.node.getBoundingClientRect(),v=D.getBoundingClientRect(),k=v.left-M.getBoundingClientRect().left,J=A.width-k-v.width-80,X=Math.min(0,A.width-M.scrollWidth-30);return J=Math.max(J,X),Math.min(0,J)},E.prototype.isBottomFocused=function(){var M=this.getSelectedCell();return!!M&&M.row===this.model.columnModels[0].cells.length},E.prototype.isRightFocused=function(){var M=this.getSelectedCell();return!!M&&M.column===this.model.columnModels.length-1},E.prototype.isFocused=function(){return!!this.getSelectedCell()},E.prototype.onKeydown=function(M){this.controller.isInEditListMode()||!M.ctrlKey||M.shiftKey||M.altKey||M.metaKey||(t.lookup(M)==="Up"?(M.preventDefault(),M.stopPropagation(),this.moveToFirstCellInColumn()):t.lookup(M)==="Down"?(M.preventDefault(),M.stopPropagation(),this.moveToLastCellInColumn()):t.lookup(M)==="Left"?(M.preventDefault(),M.stopPropagation(),this.moveToFirstCellInRow()):t.lookup(M)==="Right"?(M.preventDefault(),M.stopPropagation(),this.moveToLastCellInRow()):t.lookupChar(M)==="H"&&(M.preventDefault(),M.stopPropagation(),this.speakColumnHeader()))},E.prototype.moveToFirstCellInColumn=function(){var M=this.getSelectedCell();M&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:0,column:M.column}}})},E.prototype.moveToLastCellInColumn=function(){var M=this.getSelectedCell();M&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:this.model.rowModels.length-1,column:M.column}}})},E.prototype.moveToFirstCellInRow=function(){var M=this.getSelectedCell();M&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:M.row,column:0}}})},E.prototype.moveToLastCellInRow=function(){var M=this.getSelectedCell();M&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:M.row,column:this.model.columnModels[0].cells.length-1}}})},E.prototype.speakColumnHeader=function(){var M=this.controller.t("No column header"),D=this.getSelectedCell();if(D){var A=this.model.rowModels[0].cells[D.column];A&&A.type==="header"&&A.latex&&A.latex!==""&&(M=u.MQ.StaticMath(f("<span>"+A.latex+"</span>")[0]).mathspeak())}l.alert(M)},E})(n.default);c.default=m}),P("loadcss!expressions/folder-view",function(){}),P("expressions/folder-view",["require","exports","tslib","browser","keys","lib/aria","./expression-edit-actions","./abstract-item-view","./smart_textarea","dcgview","./circular-icon-view","jquery.handleevent","loadcss!./folder-view"],function(S,c,x,t,l,n,i,s,g,d,u){Object.defineProperty(c,"__esModule",{value:!0});var f=(function(y){function h(){return y!==null&&y.apply(this,arguments)||this}return x.__extends(h,y),h.prototype.didMount=function(){this.onItemViewMounted()},h.prototype.willUnmount=function(){this.onItemViewUnmounted()},h.prototype.template=function(){var p=this;return d.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressionfolder":!0,"dcg-inFolder":!1,"dcg-selected":p.controller.isItemSelected(p.id),"dcg-dragging":!!p.controller.isItemBeingDragged(p.id),"dcg-collapsed":!!p.model.collapsed,"dcg-hidden":!!p.model.hidden,"dcg-author-ide":p.controller.isAuthorIDE(),"dcg-has-items":p.controller.getNumberOfItemsInFolder(p.id)>0,"dcg-secretFolder":p.model.secret&&!p.controller.canAdministerSecretFolders()}},"expr-id":function(){return p.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},d.createElement("div",{class:d.const("dcg-fade-container")},d.createElement("div",{class:d.const("dcg-main")},d.createElement("div",{role:d.const("button"),tabindex:d.const("0"),"aria-pressed":function(){return p.model.collapsed},"aria-label":function(){return p.controller.t("Collapse Folder")},class:d.const("dcg-caret-container dcg-action-toggle-folder-collapsed dcg-do-not-blur"),handleEvent:d.const("true"),onTap:this.bindFn(this.toggleCollapsed)},d.createElement("i",{class:d.const("dcg-icon-caret-down")})),d.createElement(g.default,{shouldFocus:this.bindFn(this.isFocused),text:function(){return p.model.title},placeholder:function(){return p.controller.t("Enter a note...")},showLinks:function(){return p.controller.areLinksEnabled()},onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),ariaLabel:this.bindFn(this.getAriaLabel),readonly:function(){return p.controller.isInEditListMode()},readonlyAction:this.bindFn(this.exitEditListMode)}),d.createElement("div",{role:d.const("checkbox"),"aria-checked":function(){return p.model.secret},"aria-label":function(){return p.controller.t("Hide this folder from students")},class:function(){return{"dcg-action-toggle-secret-folder":!0,"dcg-do-not-blur":!0,"dcg-checked":p.model.secret}},style:function(){return{display:p.controller.canAdministerSecretFolders()?void 0:"none"}},handleEvent:d.const("true"),onTap:this.bindFn(this.toggleSecret)},d.createElement("span",{class:d.const("dcg-checkbox-box")},d.createElement("i",{class:d.const("dcg-icon-check")})),d.createElement("span",{class:d.const("dcg-checkbox-label")},function(){return p.controller.t("Hide this folder from students.")}))),d.createElement("i",{class:d.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:d.const("true"),onTap:this.bindFn(this.onDelete)})),d.createElement("span",{class:d.const("dcg-tab dcg-action-drag"),handleevent:d.const("true"),tapboundary:d.const("true"),disablescroll:d.const("true"),style:d.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},d.createElement("span",{class:d.const("dcg-num")},function(){return p.model.displayIndex}),d.createElement("div",{class:d.const("dcg-tab-interior")},d.createElement("span",{role:d.const("button"),tabindex:d.const("0"),"aria-pressed":function(){return!!p.model.hidden},"aria-label":function(){return p.controller.t("Hide Folder")},class:d.const("dcg-circular-icon-container dcg-expression-icon-container"),onTap:this.bindFn(this.toggleHidden)},d.createElement(u.CircularIconView,{iconType:function(){return p.model.hidden?"hidden":"folder"},whiteIcon:function(){return p.controller.isItemSelected(p.model.id)||p.controller.isItemBeingDragged(p.model.id)}})))),d.createElement(i.ExpressionEditActions,{controller:this.props.controller,id:function(){return p.model.id}}))},h.prototype.toggleHidden=function(){this.controller.dispatch({type:"toggle-item-hidden",id:this.id})},h.prototype.toggleSecret=function(){this.controller.dispatch({type:"set-item-secret",id:this.id,isSecret:!this.model.secret})},h.prototype.toggleCollapsed=function(){this.controller.dispatch({type:"set-folder-collapsed",id:this.id,isCollapsed:!this.model.collapsed})},h.prototype.onInput=function(p){this.controller.dispatch({type:"set-folder-title",id:this.id,title:p})},h.prototype.onFocusChange=function(p){p?this.controller.dispatch({type:"set-focus-location",location:{type:"folder",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"folder",id:this.id}})},h.prototype.onSpecialKey=function(p){return this.controller.dispatch({type:"on-special-key-pressed",key:p})},h.prototype.onKeydown=function(p){var r=p.altKey&&!p.metaKey&&!p.ctrlKey&&!p.shiftKey,o=p.metaKey&&!p.altKey&&!p.shiftKey&&!p.ctrlKey;(t.IS_APPLE?o:r)&&l.lookup(p)===l.UP&&(p.preventDefault(),p.stopPropagation(),this.controller.dispatch({type:"set-folder-collapsed",id:this.id,isCollapsed:!this.model.collapsed}),this.model.collapsed?n.alert(this.controller.t("folder collapsed")):n.alert(this.controller.t("folder expanded")))},h.prototype.isFocused=function(){var p=this.controller.getFocusLocation();return!(!p||p.type!=="folder"||p.id!==this.id)},h.prototype.getAriaLabel=function(){var p="";this.model.hidden||this.model.collapsed||this.model.secret?!this.model.hidden||this.model.collapsed||this.model.secret?this.model.hidden||!this.model.collapsed||this.model.secret?this.model.hidden||this.model.collapsed||!this.model.secret?this.model.hidden&&this.model.collapsed&&!this.model.secret?p=this.controller.t("Hidden Collapsed Folder"):this.model.hidden&&!this.model.collapsed&&this.model.secret?p=this.controller.t("Hidden Secret Folder"):!this.model.hidden&&this.model.collapsed&&this.model.secret?p=this.controller.t("Collapsed Secret Folder"):this.model.hidden&&this.model.collapsed&&this.model.secret&&(p=this.controller.t("Hidden Collapsed Secret Folder")):p=this.controller.t("Secret Folder"):p=this.controller.t("Collapsed Folder"):p=this.controller.t("Hidden Folder"):p=this.controller.t("Folder");var r=this.controller.getNumberOfItemsInFolder(this.id);return r>0?this.controller.t("__folder__ has __count__ items",{folder:p,count:r}):p},h})(s.default);c.default=f}),P("lib/coerce-url",["require","exports"],function(S,c){function x(t){var l=document.createElement("a");return l.href=t,l.href}Object.defineProperty(c,"__esModule",{value:!0}),c.coerceURL=x}),P("loadcss!expressions/image-icon-view",function(){}),P("expressions/image-icon-view",["require","exports","tslib","lib/coerce-url","dcgview","main/manage-focus-helper","../dcgview-helpers/tooltipped-error","./circular-icon-view","jquery.handleevent","loadcss!./image-icon-view"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=l.Components.SwitchUnion,d=(function(u){function f(){return u!==null&&u.apply(this,arguments)||this}return x.__extends(f,u),f.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},f.prototype.template=function(){var y=this;return l.createElement("div",{class:l.const("dcg-expression-icon-container dcg-image-icon-container")},g(this.bindFn(this.typeOfIcon),{error:function(){return l.createElement(i.TooltippedError,{error:function(){return y.controller.unpack(y.model.error)},isWhite:y.bindFn(y.isSelected),gravity:y.const("se")})},failed:function(){return l.createElement("span",null)},loading:function(){return l.createElement(s.CircularIconView,{iconType:y.const("loading")})},hidden:function(){return y.buildIconView()},image:function(){return y.buildIconView()}}))},f.prototype.buildIconView=function(){var y=this;return l.createElement("div",{class:l.const("dcg-circular-icon-container"),role:l.const("button"),tabindex:l.const("0"),"aria-label":this.bindFn(this.getIconAriaLabel),onTap:function(h){if(!h.wasHandled("dragdrop")&&!h.wasLongheld())return y.myOptionsOpen()||y.controller.isInEditListMode()?y.toggleOptions(h):void y.toggleImageShown()},didMount:function(h){return y.rootElt=h},onLongHold:function(h){h.handle("dcg-longhold"),h.handle("dcg-tap"),y.toggleOptions(h)},manageFocus:this.const(n.manageFocusHelper({controller:this.controller,location:{type:"image-icon",id:this.model.id}}))},l.createElement(s.CircularIconView,{iconType:function(){return y.typeOfIcon()==="hidden"?"hidden":"background"},backgroundImage:this.bindFn(this.getBackgroundImage),backgroundOpacity:this.const(1),whiteIcon:this.bindFn(this.isSelected)}))},f.prototype.isSelected=function(){return this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)},f.prototype.typeOfIcon=function(){return this.model.loadStatus==="loading"?"loading":this.model.loadStatus==="failed"?"failed":this.hasError()?"error":this.model.shouldGraph?"image":"hidden"},f.prototype.myOptionsOpen=function(){var y=this.controller.getOpenItemMenu();return!!y&&y.model===this.model},f.prototype.toggleOptions=function(y){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"image",model:this.model,icon:this.rootElt,focusFirstOption:y.device==="keyboard"}})},f.prototype.hasError=function(){return!!this.model.error&&this.controller.getBrailleMode()==="none"},f.prototype.getBackgroundImage=function(){return this.model.image_url===this.lastURL?this.lastEncodedURL:(this.lastURL=this.model.image_url,this.lastEncodedURL='url("'+t.coerceURL(this.model.image_url)+'")',this.lastEncodedURL)},f.prototype.toggleImageShown=function(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id}),this.controller.dispatch({type:"set-focus-location",location:{type:"image-icon",id:this.model.id}})},f.prototype.getIconAriaLabel=function(){return this.controller.isInEditListMode()?this.myOptionsOpen()?this.controller.t("Hide Options"):this.controller.t("Show Options"):this.model.hidden?this.controller.t("Show Image"):this.controller.t("Hide Image")},f})(l.Class);c.default=d}),P("expressions/image-upload-view",["require","exports","tslib","dcgview","jquery","main/manage-focus-helper"],function(S,c,x,t,l,n){Object.defineProperty(c,"__esModule",{value:!0});var i=(function(s){function g(){return s!==null&&s.apply(this,arguments)||this}return x.__extends(g,s),g.prototype.init=function(){this.controller=this.props.controller()},g.prototype.template=function(){return t.createElement("div",{class:t.const("dcg-do-not-blur"),onTap:this.bindFn(this.newImage),handleEvent:t.const("true"),role:t.const("button"),tabindex:t.const(0),"aria-label":this.props.ariaLabel,manageFocus:this.const(this.props.location?n.manageFocusHelper({controller:this.controller,location:this.props.location()}):void 0)},this.children,t.createElement("input",{type:t.const("file"),accept:t.const("image/*"),style:t.const("display: none"),didMount:this.bindFn(this.didMountFileInput)}))},g.prototype.didMountFileInput=function(d){var u=this;this.fileInputNode=d,l(d).on("change",function(){u.props.onFileChange(d.files),l(d).val("")})},g.prototype.newImage=function(){this.fileInputNode.click()},g})(t.Class);c.ImageUploadView=i}),P("loadcss!expressions/clickable_image_info_view",function(){}),P("expressions/clickable_image_info_view",["require","exports","tslib","dcgview","./circular-icon-view","../lib/tooltip","./image-upload-view","./clickable_info_view","loadcss!./clickable_image_info_view"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=t.Components.Switch,d=(function(u){function f(){return u!==null&&u.apply(this,arguments)||this}return x.__extends(f,u),f.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},f.prototype.template=function(){var y=this;return t.createElement("div",{class:t.const("dcg-do-blur dcg-indent-in-folder"),tapboundary:t.const("true"),handleEvent:t.const("true")},t.createElement(s.ClickableInfoView,{controller:function(){return y.props.controller()},model:function(){return y.model}}),t.createElement("div",{class:t.const("dcg-clickable-image-info-view"),role:t.const("group"),"aria-label":function(){return y.controller.t("Clickable Image Options")}},t.createElement("div",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-clickable-image-label")},t.const("Hovered:")),t.createElement(n.Tooltip,{tooltip:function(){return y.tooltip("hovered")},gravity:this.const("s")},t.createElement(i.ImageUploadView,{controller:function(){return y.controller},ariaLabel:function(){return y.tooltip("hovered")},onFileChange:function(h){return y.updateImage("hovered",h)}},t.createElement(g,{key:this.bindFn(this.hoveredStatus)},function(){return t.createElement(l.CircularIconView,{iconType:y.bindFn(y.hoveredStatus),backgroundImage:y.const(y.hoveredStatus()==="background"?"url("+y.model.clickableInfo.hoveredImage+")":"")})}))),t.createElement("div",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-clickable-image-label")},t.const("Depressed:")),t.createElement(n.Tooltip,{tooltip:function(){return y.tooltip("depressed")},gravity:this.const("s")},t.createElement(i.ImageUploadView,{controller:function(){return y.controller},ariaLabel:function(){return y.tooltip("depressed")},onFileChange:function(h){return y.updateImage("depressed",h)}},t.createElement(g,{key:this.bindFn(this.depressedStatus)},function(){return t.createElement(l.CircularIconView,{iconType:function(){return y.depressedStatus()},backgroundImage:y.const(y.depressedStatus()==="background"?"url("+y.model.clickableInfo.depressedImage+")":"")})})))))},f.prototype.hoveredStatus=function(){return this.hoveredUploading?"loading":this.model.clickableInfo.hoveredImage?"background":"hidden"},f.prototype.depressedStatus=function(){return this.depressedUploading?"loading":this.model.clickableInfo.depressedImage?"background":"hidden"},f.prototype.tooltip=function(y){return(y==="hovered"?this.model.clickableInfo.hoveredImage:this.model.clickableInfo.depressedImage)?y==="depressed"?this.controller.t("Change Depressed Image"):this.controller.t("Change Hovered Image"):y==="depressed"?this.controller.t("Add Depressed Image"):this.controller.t("Add Hovered Image")},f.prototype.updateImage=function(y,h){var p=this;if(h&&h[0]){var r=h[0];y==="hovered"&&(this.hoveredUploading=!0),y==="depressed"&&(this.depressedUploading=!0),this.controller.getGraphSettings().config.imageUploadCallback(r,function(o,m){y==="hovered"&&(p.hoveredUploading=!1),y==="depressed"&&(p.depressedUploading=!1),!o&&m&&(y==="hovered"?p.controller.dispatch({type:"set-hovered-image",id:p.model.id,url:m}):p.controller.dispatch({type:"set-depressed-image",id:p.model.id,url:m}))})}},f})(t.Class);c.ClickableImageInfoView=d}),P("loadcss!expressions/image-view",function(){}),P("expressions/image-view",["require","exports","tslib","keys","jquery","underscore","./abstract-item-view","./smart_textarea","dcgview","dcgview-helpers/mathquill-view","lib/conditional_blur","expressions/promptslider_view","./image-icon-view","./clickable_image_info_view","graphing-calc/models/image","./expression-edit-actions","../dcgview-helpers/mathquill-braille-wrapper","jquery.handleevent","loadcss!./image-view"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r,o){Object.defineProperty(c,"__esModule",{value:!0});var m=g.Components,b=m.If,E=m.SwitchUnion,M=(function(A){function v(){return A!==null&&A.apply(this,arguments)||this}return x.__extends(v,A),v.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},v.prototype.template=function(){var k=this;return g.createElement("div",{class:g.const("dcg-image-input-mathquill")},g.createElement(o.default,{latex:function(){return k.model[k.props.name()]},controller:this.props.controller,brailleShouldFocus:function(){return k.props.focusedInput()===k.props.name()},selectOnFocus:this.const(!0),onBrailleInput:this.bindFn(this.handleLatexChanged),onBrailleFocusedChanged:this.bindFn(this.handleMQFocusedChanged),onBrailleKeydown:this.bindFn(this.handleBrailleKeydown),hasError:function(){return p.hasInputError(k.model,k.props.name())},ariaLabel:function(){return k.controller.t(k.props.name())}},g.createElement(d.default,{latex:function(){return k.model[k.props.name()]},isFocused:function(){return k.props.focusedInput()===k.props.name()},capExpressionSize:function(){return k.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.const({}),getAriaLabel:function(){return k.controller.t(k.props.name())},getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserPressedKey:function(J,X){return k.handlePressedKey(J,X)},onUserChangedLatex:this.bindFn(this.handleLatexChanged),onExpressionSizeExceeded:function(){return k.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:this.bindFn(this.handleMQFocusedChanged),needsSystemKeypad:function(){return!k.controller.isKeypadEnabled()}},g.createElement("span",{class:function(){return{"dcg-focus":k.props.focusedInput()===k.props.name(),"dcg-invalid":p.hasInputError(k.model,k.props.name())}}}))))},v.prototype.getInputs=function(){return this.controller.canUseAdvancedStyling()?["center","angle","opacity","width","height"]:["center","angle","width","height"]},v.prototype.handlePressedKey=function(k,J){var X=this.props.name(),te=d.default.getFocusedMathquill(),H=this.getInputs(),z=H.indexOf(X);if(!this.controller.isInEditListMode()){if(k==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});if(k==="Esc")return void u.default()}var B=-1;k==="Up"&&(B=z-1),k==="Down"&&(B=z+1),k==="Left"&&(B=z-2),k==="Right"&&(B=z+2);var F=k;if(B>=0&&B<H.length){var $=!1;if(te)$=d.default.applyArrowKeyAndReturnIfWasAtBounds(te,F,J);else if(k==="Up"||k==="Down")$=!0;else{var re=o.getFocusedBrailleElement();$=re&&(k==="Left"&&re.selectionStart===0||k==="Right"&&re.selectionStart===l(re).val().length)}return void($&&(this.focusInput(H[B]),J&&J.preventDefault()))}te&&(te.keystroke(k,J),this.handleLatexChanged(te.latex()))},v.prototype.handleBrailleKeydown=function(k){var J=t.lookup(k);J&&this.handlePressedKey(J,l.Event(k))},v.prototype.focusInput=function(k){this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.model.id,location:k}})},v.prototype.anyInputHasError=function(){var k=this;return n.any(this.getInputs(),function(J){return p.hasInputError(k.model,J)})},v.prototype.handleLatexChanged=function(k){var J=this.props.name();this.model.draggingOnGraphpaper||p.getMQAttribute(this.model,J)!==k&&this.controller.dispatch({type:"set-image-mq-attribute",id:this.model.id,attribute:J,latex:k})},v.prototype.handleMQFocusedChanged=function(k){var J=this.props.name();k?this.props.focusedInput()!==J&&this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.model.id,location:J}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.model.id,location:J}})},v})(g.Class),D=(function(A){function v(){return A!==null&&A.apply(this,arguments)||this}return x.__extends(v,A),v.prototype.didMount=function(){this.onItemViewMounted()},v.prototype.willUnmount=function(){this.onItemViewUnmounted()},v.prototype.template=function(){var k=this;return g.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressionimage":!0,"dcg-inFolder":!!k.model.folderId,"dcg-selected":k.controller.isItemSelected(k.id),"dcg-dragging":!!k.controller.isItemBeingDragged(k.id),"dcg-input-focused":k.getFocusedInput()&&k.getFocusedInput()!=="name"}},"expr-id":function(){return k.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},g.createElement("div",{class:g.const("dcg-fade-container")},g.createElement("div",{class:g.const("dcg-main")},E(function(){return k.model.loadStatus},{failed:function(){return g.createElement("div",null,g.createElement("div",{class:g.const("dcg-image-failed")},function(){return k.controller.t("Failed to load image.")}),g.createElement("div",{role:g.const("button"),tabindex:g.const(0),class:g.const("dcg-retry-loading-image"),onTap:k.bindFn(k.onRetryLoad)},function(){return k.controller.t("Retry.")}))},loading:function(){return g.createElement("div",null,g.createElement("div",{class:g.const("dcg-image-loading")},function(){return k.controller.t("Loading image...")}),g.createElement("div",{role:g.const("button"),tabindex:g.const(0),class:g.const("dcg-retry-loading-image"),onTap:k.bindFn(k.onRetryLoad)},function(){return k.controller.t("Retry.")}))},loaded:function(){return g.createElement("div",{class:g.const("dcg-image-loaded")},g.createElement(s.default,{shouldFocus:function(){return k.getFocusedInput()==="name"},text:function(){return k.model.name},placeholder:function(){return k.controller.t("Enter a note...")},showLinks:function(){return k.controller.areLinksEnabled()},onInput:k.bindFn(k.onNameInput),onFocusChange:k.bindFn(k.onNameFocusChange),onSpecialKey:k.bindFn(k.onNameSpecialKey),readonly:k.const(!1)}),g.createElement("div",{class:function(){return{"dcg-do-blur":!0,"dcg-image-input-grid":!0}},handleEvent:g.const("true")},g.createElement("div",{class:g.const("dcg-image-input-name")},function(){return k.controller.t("Center:")}),g.createElement(M,{name:k.const("center"),controller:function(){return k.controller},model:function(){return k.model},focusedInput:k.bindFn(k.getFocusedInput)}),g.createElement("div",{class:g.const("dcg-image-input-name")},function(){return k.controller.t("Width:")}),g.createElement(M,{name:k.const("width"),controller:function(){return k.controller},model:function(){return k.model},focusedInput:k.bindFn(k.getFocusedInput)}),g.createElement("div",{class:g.const("dcg-image-input-name")},function(){return k.controller.t("Angle:")}),g.createElement(M,{name:k.const("angle"),controller:function(){return k.controller},model:function(){return k.model},focusedInput:k.bindFn(k.getFocusedInput)}),g.createElement("div",{class:g.const("dcg-image-input-name")},function(){return k.controller.t("Height:")}),g.createElement(M,{name:k.const("height"),controller:function(){return k.controller},model:function(){return k.model},focusedInput:k.bindFn(k.getFocusedInput)}),g.createElement(b,{predicate:function(){return k.controller.canUseAdvancedStyling()}},function(){return g.createElement("div",{class:g.const("dcg-image-input-name")},function(){return k.controller.t("Opacity:")})}),g.createElement(b,{predicate:function(){return k.controller.canUseAdvancedStyling()}},function(){return g.createElement(M,{name:k.const("opacity"),controller:function(){return k.controller},model:function(){return k.model},focusedInput:k.bindFn(k.getFocusedInput)})})))}})),g.createElement("span",{class:g.const("dcg-fadeout")}),g.createElement("i",{class:g.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:g.const("true"),onTap:this.bindFn(this.onDelete)}),g.createElement(b,{predicate:function(){return k.shouldShowClickableProperties()}},function(){return g.createElement(h.ClickableImageInfoView,{controller:function(){return k.props.controller()},model:function(){return k.model}})}),g.createElement(b,{predicate:this.bindFn(this.shouldShowBrailleError)},function(){return g.createElement("div",{class:k.getFooterClass()},g.createElement("div",{tabindex:g.const(0),class:g.const("dcg-expression-braille-error"),"aria-roledescription":g.const("error"),"aria-label":function(){return k.controller.unpack(k.model.error)}},g.createElement("i",{class:g.const("dcg-icon-error")}),function(){return k.controller.unpack(k.model.error)}))}),g.createElement(b,{predicate:function(){return k.model.missingVariables.length>0&&k.controller.areSlidersEnabled()}},function(){return g.createElement("div",{class:k.getFooterClass()},g.createElement(f.default,{model:k.props.model,controller:k.props.controller}))})),g.createElement("span",{class:g.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleevent:g.const("true"),tapboundary:g.const("true"),disablescroll:g.const("true"),style:g.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},g.createElement("span",{class:g.const("dcg-num")},function(){return k.model.displayIndex}),g.createElement("div",{class:g.const("dcg-tab-interior dcg-action-icon-mouse")},g.createElement(y.default,{model:this.props.model,controller:this.props.controller}))),g.createElement(r.ExpressionEditActions,{controller:this.props.controller,id:function(){return k.model.id}}))},v.prototype.getFooterClass=function(){return this.isFirstRender()?this.const("dcg-expression-bottom dcg-indent-in-folder"):this.const("dcg-expression-bottom dcg-fadein-bottom dcg-indent-in-folder")},v.prototype.onNameInput=function(k){this.controller.dispatch({type:"set-image-name",id:this.id,name:k})},v.prototype.onNameFocusChange=function(k){k?this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.id,location:"name"}}):this.getFocusedInput()==="name"&&this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.id,location:"name"}})},v.prototype.onNameSpecialKey=function(k){return this.controller.dispatch({type:"on-special-key-pressed",key:k})},v.prototype.getFocusedInput=function(){var k=this.controller.getFocusLocation();if(k&&k.type==="image"&&k.id===this.model.id)return k.location},v.prototype.onRetryLoad=function(){this.controller.dispatch({type:"image-retry-loading",id:this.id})},v.prototype.shouldShowClickableProperties=function(){return!!this.controller.canAuthorClickableObjects()&&this.model.clickableInfo.enabled},v.prototype.shouldShowBrailleError=function(){return this.controller.getBrailleMode()!=="none"&&!!this.model.error},v.prototype.onMouseSelect=function(k){k.type==="dcg-tap"&&k.device==="mouse"||k.type==="dcg-tapstart"&&k.device==="touch"||k.wasHandled()||(k.handle(),this.controller.dispatch({type:"set-selected-id",id:this.id}))},v})(i.default);c.default=D}),P("expressions/shell_view",["require","exports","tslib","dcgview","./abstract-item-view"],function(S,c,x,t,l){Object.defineProperty(c,"__esModule",{value:!0});var n=(function(i){function s(){return i!==null&&i.apply(this,arguments)||this}return x.__extends(s,i),s.prototype.didMount=function(){this.onItemViewMounted()},s.prototype.willUnmount=function(){this.onItemViewUnmounted()},s.prototype.template=function(){var g="";return this.model.cachedRenderHeight&&(g="height:"+this.model.cachedRenderHeight+"px"),t.createElement("div",{class:t.const("dcg-do-not-blur dcg-expressionitem dcg-shell"),"expr-id":this.const(this.model.id),onTap:this.bindFn(this.onMouseSelect),style:t.const(g)})},s})(l.default);c.default=n}),P("expressions/drag_container_view",["require","exports","tslib","dcgview"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=(function(n){function i(){return n!==null&&n.apply(this,arguments)||this}return x.__extends(i,n),i.prototype.init=function(){this.controller=this.props.controller()},i.prototype.template=function(){var s=this;return t.createElement("div",{class:t.const("dcg-drag-container"),style:function(){return{top:s.getTopPx()}}},this.children)},i.prototype.getTopPx=function(){var s=this.controller.getRawDragState();if(s)return s.itemTop+"px"},i})(t.Class);c.default=l}),P("vendor/papaparse",["require","jquery"],function(S){function c(h,p){var r=s(p);if(typeof h=="string"){if(!r.download)return new n(r).parse(h);var o=new t(r);o.stream(h)}else if(h instanceof File)if(r.step||r.chunk){var o=new l(r);o.stream(h)}else new n(r),reader=new FileReader,reader.onload=function(m){var b=new n(r);b.parse(m.target.result)},reader.onerror=function(){d(r.error)&&r.error(reader.error,h)},reader.readAsText(h,r.encoding)}function x(h,p){function r(A){if(typeof A!="object")return[];var v=[];for(var k in A)v.push(k);return v}function o(A,v){var k="";typeof A=="string"&&(A=JSON.parse(A)),typeof v=="string"&&(v=JSON.parse(v));var J=A instanceof Array&&A.length>0,X=!(v[0]instanceof Array);if(J){for(var te=0;te<A.length;te++)te>0&&(k+=M),k+=m(A[te],te);v.length>0&&(k+=D)}for(var H=0;H<v.length;H++){for(var z=J?A.length:v[H].length,B=0;B<z;B++){B>0&&(k+=M);var F=J&&X?A[B]:B;k+=m(v[H][F],B)}H<v.length-1&&(k+=D)}return k}function m(A,v){return A==null?"":(A=A.toString().replace(/"/g,'""'),typeof E=="boolean"&&E||E instanceof Array&&E[v]||b(A,y.BAD_DELIMITERS)||A.indexOf(M)>-1||A.charAt(0)==" "||A.charAt(A.length-1)==" "?'"'+A+'"':A)}function b(A,v){for(var k=0;k<v.length;k++)if(A.indexOf(v[k])>-1)return!0;return!1}var E=!1,M=",",D=`\r
`;if((function(){typeof p=="object"&&(typeof p.delimiter=="string"&&p.delimiter.length==1&&y.BAD_DELIMITERS.indexOf(p.delimiter)==-1&&(M=p.delimiter),(typeof p.quotes=="boolean"||p.quotes instanceof Array)&&(E=p.quotes),typeof p.newline=="string"&&(D=p.newline))})(),typeof h=="string"&&(h=JSON.parse(h)),h instanceof Array){if(!h.length||h[0]instanceof Array)return o(null,h);if(typeof h[0]=="object")return o(r(h[0]),h)}else if(typeof h=="object")return typeof h.data=="string"&&(h.data=JSON.parse(h.data)),h.data instanceof Array&&(h.fields||(h.fields=h.data[0]instanceof Array?h.fields:r(h.data[0])),h.data[0]instanceof Array||typeof h.data[0]=="object"||(h.data=[h.data])),o(h.fields||[],h.data||[]);throw"exception: Unable to serialize unrecognized input"}function t(h){h=h||{},h.chunkSize||(h.chunkSize=y.RemoteChunkSize);var p,r,o=0,m="",b="",E=new n(g(h));this.stream=function(M){function D(){if(p=new XMLHttpRequest,p.onload=A,p.onerror=v,p.open("GET",M,!0),h.step){var J=o+h.chunkSize-1;p.setRequestHeader("Range","bytes="+o+"-"+J)}p.send(),o+=h.chunkSize}function A(){if(p.readyState==4){if(p.status<200||p.status>=400)return void v();m+=b+p.responseText,b="";var J=!h.step||o>k(p);if(!J){var X=m.lastIndexOf(`
`);if(X<0&&(X=m.lastIndexOf("\r")),!(X>-1))return void r();b=m.substring(X+1),m=m.substring(0,X)}var te=E.parse(m);m="",d(h.chunk)&&(h.chunk(te),te=void 0),J||te.meta.paused||r()}}function v(){d(h.error)&&h.error(p.statusText)}function k(J){var X=J.getResponseHeader("Content-Range");return parseInt(X.substr(X.lastIndexOf("/")+1))}(r=function(){D()})()}}function l(h){h=h||{},h.chunkSize||(h.chunkSize=y.LocalChunkSize);var p,r=0,o="",m="",b=new n(g(h)),E=typeof FileReader=="function";this.stream=function(M){function D(){r<M.size&&A()}function A(){var X=Math.min(r+h.chunkSize,M.size),te=p.readAsText(J.call(M,r,X),h.encoding);E||v({target:{result:te}})}function v(X){r+=h.chunkSize,o+=m+X.target.result,m="";var te=r>=M.size;if(!te){var H=o.lastIndexOf(`
`);if(H<0&&(H=o.lastIndexOf("\r")),!(H>-1))return void D();m=o.substring(H+1),o=o.substring(0,H)}var z=b.parse(o);o="",d(h.chunk)&&(h.chunk(z,M),z=void 0),te||z.meta.paused||D()}function k(){d(h.error)&&h.error(p.error,M)}var J=M.slice||M.webkitSlice||M.mozSlice;E?(p=new FileReader,p.onload=v,p.onerror=k):p=new FileReaderSync,D()}}function n(h){function p(){return H&&v&&(M("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+y.DefaultDelimiter+"'"),v=!1),r()&&o(),m()}function r(){return h.header&&te.length==0}function o(){if(H){for(var z=0;r()&&z<H.data.length;z++)for(var B=0;B<H.data[z].length;B++)te.push(H.data[z][B]);H.data.splice(0,1)}}function m(){if(!H||!h.header&&!h.dynamicTyping)return H;for(var z=0;z<H.data.length;z++){for(var B={},F=0;F<H.data[z].length;F++){if(h.dynamicTyping){var $=H.data[z][F];H.data[z][F]=$=="true"||$!="false"&&E($)}h.header&&(F>=te.length?(B.__parsed_extra||(B.__parsed_extra=[]),B.__parsed_extra.push(H.data[z][F])):B[te[F]]=H.data[z][F])}h.header&&(H.data[z]=B,F>te.length?M("FieldMismatch","TooManyFields","Too many fields: expected "+te.length+" fields but parsed "+F,z):F<te.length&&M("FieldMismatch","TooFewFields","Too few fields: expected "+te.length+" fields but parsed "+F,z))}return h.header&&H.meta&&(H.meta.fields=te),H}function b(z){for(var B,F,$,re=[",","	","|",";",y.RECORD_SEP,y.UNIT_SEP],K=0;K<re.length;K++){var ue=re[K],ie=0,Q=0;$=void 0;for(var pe=new i({delimiter:ue,preview:10}).parse(z),ee=0;ee<pe.data.length;ee++){var ae=pe.data[ee].length;Q+=ae,$!==void 0?ae>1&&(ie+=Math.abs(ae-$),$=ae):$=ae}Q/=pe.data.length,(F===void 0||ie<F)&&Q>1.99&&(F=ie,B=ue)}return h.delimiter=B,{successful:!!B,bestDelimiter:B}}function E(z){return k.test(z)?parseFloat(z):z}function M(z,B,F,$){H.errors.push({type:z,code:B,message:F,row:$})}var D,A,v,k=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,J=this,X=!1,te=[],H={data:[],errors:[],meta:{}};h=g(h),this.parse=function(z){if(v=!1,!h.delimiter){var B=b(z);B.successful?h.delimiter=B.bestDelimiter:(v=!0,h.delimiter=y.DefaultDelimiter),H.meta.delimiter=h.delimiter}if(d(h.step)){var F=h.step;h.step=function($){H=$,r()?p():F(p(),J)}}return h.preview&&h.header&&h.preview++,D=z,A=new i(h),H=A.parse(D),p(),d(h.complete)&&!X&&h.complete(H),X?{meta:{paused:!0}}:H},this.pause=function(){X=!0,A.abort(),D=D.substr(A.getCharIndex())},this.resume=function(){X=!1,A=new i(h),A.parse(D),d(h.complete)&&!X&&h.complete(H)},this.abort=function(){A.abort(),d(h.complete)&&h.complete(H),D=""}}function i(h){function p(){for(;me<ie.length&&!oe&&!(ae>0&&Z>=ae);)le=='"'?m():Ae?b():E(),r();return o()}function r(){me++,le=ie[me]}function o(){if(oe&&$("Abort","ParseAbort","Parsing was aborted by the user's step function"),Ae&&$("Quotes","MissingQuotes","Unescaped or mismatched quotes"),J(),!d(ee))return ue()}function m(){B()&&!z()?Ae=!Ae:(A(),Ae&&z()?me++:$("Quotes","UnexpectedQuotes","Unexpected quotes"))}function b(){(te(me)||H(me))&&Be++,A()}function E(){le==Q?v():te(me)?(k(),r()):H(me)?k():M()?D():A()}function M(){return!!pe&&(me==0||H(me-1)||te(me-2))&&ie[me]===pe}function D(){for(;!te(me)&&!H(me)&&me<ie.length;)r()}function A(){Fe[ze][We]+=le}function v(){Fe[ze].push(""),We=Fe[ze].length-1}function k(){J(),Be++,Z++,Fe.push([]),ze=Fe.length-1,v()}function J(){X(),d(ee)&&(Fe[ze]&&ee(ue()),K())}function X(){Fe[ze].length==1&&C.test(Fe[ze][0])&&(h.keepEmptyRows?Fe[ze].splice(0,1):Fe.splice(ze,1),ze=Fe.length-1)}function te(ge){return ge<ie.length-1&&(ie[ge]=="\r"&&ie[ge+1]==`
`||ie[ge]==`
`&&ie[ge+1]=="\r")}function H(ge){return ie[ge]=="\r"||ie[ge]==`
`}function z(){return!B()&&me<ie.length-1&&ie[me+1]=='"'}function B(){return!Ae&&F(me-1)||F(me+1)}function F(ge){typeof ge!="number"&&(ge=me);var _e=ie[ge];return ge<=-1||ge>=ie.length||_e==Q||_e=="\r"||_e==`
`}function $(ge,_e,De){Le.push({type:ge,code:_e,message:De,line:Be,row:ze,index:me})}function re(ge){ie=ge,Ae=!1,me=0,Z=0,Be=1,K(),Fe=[[""]],le=ie[me]}function K(){Fe=[],Le=[],ze=0,We=0}function ue(){return{data:Fe,errors:Le,meta:{lines:Be,delimiter:Q,aborted:oe,truncated:ae>0&&me<ie.length}}}var ie,Q,pe,ee,ae,le,me,Ae,Be,Fe,Le,ze,We,Z,C=/^\s*$/,oe=!1;h=h||{},Q=h.delimiter,pe=h.comments,ee=h.step,ae=h.preview,(typeof Q!="string"||Q.length!=1||y.BAD_DELIMITERS.indexOf(Q)>-1)&&(Q=","),pe===!0?pe="#":(typeof pe!="string"||pe.length!=1||y.BAD_DELIMITERS.indexOf(pe)>-1||pe==Q)&&(pe=!1),this.parse=function(ge){if(typeof ge!="string")throw"Input must be a string";return re(ge),p()},this.abort=function(){oe=!0},this.getCharIndex=function(){return me}}function s(h){typeof h!="object"&&(h={});var p=g(h);return(typeof p.delimiter!="string"||p.delimiter.length!=1||y.BAD_DELIMITERS.indexOf(p.delimiter)>-1)&&(p.delimiter=f.delimiter),typeof p.header!="boolean"&&(p.header=f.header),typeof p.dynamicTyping!="boolean"&&(p.dynamicTyping=f.dynamicTyping),typeof p.preview!="number"&&(p.preview=f.preview),typeof p.step!="function"&&(p.step=f.step),typeof p.complete!="function"&&(p.complete=f.complete),typeof p.error!="function"&&(p.error=f.error),typeof p.encoding!="string"&&(p.encoding=f.encoding),typeof p.download!="boolean"&&(p.download=f.download),typeof p.keepEmptyRows!="boolean"&&(p.keepEmptyRows=f.keepEmptyRows),p}function g(h){if(typeof h!="object")return h;var p=h instanceof Array?[]:{};for(var r in h)p[r]=g(h[r]);return p}function d(h){return typeof h=="function"}var u=S("jquery"),f={delimiter:"",header:!1,dynamicTyping:!1,preview:0,step:void 0,encoding:"",complete:void 0,error:void 0,download:!1,keepEmptyRows:!1},y={};return y.parse=c,y.unparse=x,y.RECORD_SEP="",y.UNIT_SEP="",y.BYTE_ORDER_MARK="\uFEFF",y.BAD_DELIMITERS=["\r",`
`,'"',y.BYTE_ORDER_MARK],y.LocalChunkSize=10485760,y.RemoteChunkSize=5242880,y.DefaultDelimiter=",",y.Parser=i,y.ParserHandle=n,y.NetworkStreamer=t,y.FileStreamer=l,u.fn.parse=function(h){function p(){if(b.length!=0){var E=b[0];if(d(h.before)){var M=h.before(E.file,E.inputElem);if(typeof M=="object"){if(M.action=="abort")return void r("AbortError",E.file,E.inputElem,M.reason);if(M.action=="skip")return void o();typeof M.config=="object"&&(E.instanceConfig=u.extend(E.instanceConfig,M.config))}else if(M=="skip")return void o()}var D=E.instanceConfig.complete;E.instanceConfig.complete=function(A){d(D)&&D(A,E.file,E.inputElem),o()},y.parse(E.file,E.instanceConfig)}}function r(E,M,D,A){d(h.error)&&h.error({name:E},M,D,A)}function o(){b.splice(0,1),p()}var m=h.config||{},b=[];return this.each(function(E){if(u(this).prop("tagName").toUpperCase()!="INPUT"||u(this).attr("type").toLowerCase()!="file"||!window.FileReader||!this.files||this.files.length==0)return!0;for(var M=0;M<this.files.length;M++)b.push({file:this.files[M],inputElem:this,instanceConfig:u.extend({},m)})}),p(),this},y}),P("geometry/math/isNumber",["require","exports"],function(S,c){function x(t){var l;if(typeof t=="number")l=t+"";else{if(typeof t!="string")return!1;l=t}return l.trim().match(/^-?[0-9]*\.?[0-9]*$/)}Object.defineProperty(c,"__esModule",{value:!0}),c.isNumber=x}),P("main/data_helpers",["require","exports","vendor/papaparse","underscore","bugsnag","geometry/math/isNumber"],function(S,c,x,t,l,n){function i(g){var d=g.split(/\r?\n/),u=[],f=!1;if(!(d.length<2)){for(var y=0;y<d.length;y++){var h=d[y];if(h.trim()){y>0&&!n.isNumber(h.replace(/,(\d{3})/g,"$1"))&&(f=!0);var p={content:h};u.push(p)}}if(!f){var r=t.pluck(u,"content").map(function(o){return o.replace(/,(\d{3})/g,"$1")});return n.isNumber(r[0])||(r=r.slice(1)),[{content:"\\left["+r.join(",")+"\\right]",numberList:!0}]}return u}}function s(g){if(!/^\s*$/.test(g)){var d=x.parse(g,{preview:1e3}),u=[];if(d.errors.length&&!d.data.length)return void l.notify("PapaParse.parse returned errors.",{metaData:{input:g,output:d.errors}});if(d.data.length&&!(d.data.length<2)){for(var f=d.data[0].length,y=0;y<f;y++)u.push([]);for(var h=0;h<d.data.length;h++)if(h!==0||!isNaN(parseFloat(d.data[h][0]))){if(d.data[h].length<2)return;if(d.data[h][0]||d.data[h][1])for(var y=0;y<f;y++){var p=(d.data[h][y]||"").replace(/,(\d{3})/g,"$1");if(p&&isNaN(parseFloat(p)))return;u[y].push(p)}}if(!(u[0].length<2))return u}}}Object.defineProperty(c,"__esModule",{value:!0}),c.getExpressions=i,c.parse=s}),P("loadcss!new_expression",function(){}),P("expressions/new_expression_view",["require","exports","tslib","dcgview","loadcss!new_expression"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=(function(n){function i(){return n!==null&&n.apply(this,arguments)||this}return x.__extends(i,n),i.prototype.template=function(){return this.controller=this.props.controller(),t.createElement("div",{class:t.const("dcg-expressionitem dcg-new-expression dcg-opened")},t.createElement("div",{class:t.const("dcg-new-math-div dcg-do-not-blur dcg-action-newmath"),onTap:this.bindFn(this.newMath)},t.createElement("div",{class:t.const("dcg-new-expression-fade")})),t.createElement("span",{class:t.const("dcg-tab")},t.createElement("span",{class:t.const("dcg-num dcg-variable-index")},this.bindFn(this.getIndex)),t.createElement("div",{class:t.const("dcg-tab-interior")})))},i.prototype.getIndex=function(){return this.controller.getNextDisplayIndex()},i.prototype.newMath=function(){this.controller.dispatch({type:"new-expression-at-end"})},i})(t.Class);c.default=l}),P("loadcss!add_expression",function(){}),P("expressions/add_expression_view",["require","exports","tslib","keys","browser","lib/tooltip","dcgview","jquery","./image-upload-view","main/manage-focus-helper","loadcss!add_expression"],function(S,c,x,t,l,n,i,s,g,d){Object.defineProperty(c,"__esModule",{value:!0});var u=i.Components.If,f=(function(y){function h(){return y!==null&&y.apply(this,arguments)||this}return x.__extends(h,y),h.prototype.init=function(){this.controller=this.props.controller()},h.prototype.template=function(){var p=this;return i.createElement("div",{class:i.const("dcg-add-expression-container")},i.createElement(n.Tooltip,{tooltip:function(){return p.controller.t("Add Item")},gravity:function(){return p.controller.isNarrow()?"ne":"se"}},i.createElement("span",{class:function(){return{"dcg-icon-btn":!0,"dcg-add-expression-btn":!0,"dcg-action-add-expression":!0,"dcg-do-blur":!0,"dcg-active":p.controller.isAddExpressionOpen()}},handleEvent:i.const("true"),role:i.const("button"),tabindex:i.const("0"),"aria-haspopup":i.const("true"),"aria-expanded":function(){return p.controller.isAddExpressionOpen()},"aria-label":function(){return p.controller.t("Add Item")},didMount:function(r){p.toggleButtonNode=r},onTap:this.bindFn(this.toggleAddExpression),manageFocus:this.const(d.manageFocusHelper({controller:this.controller,location:{type:"add-item-btn"}}))},i.createElement("i",{class:i.const("dcg-icon-plus")}))),i.createElement(u,{predicate:function(){return p.controller.isAddExpressionOpen()}},function(){return i.createElement("div",{class:function(){return{"dcg-add-expression-dropdown":!0,"dcg-popover":!0,"dcg-bottom":!p.controller.isNarrow(),"dcg-right":p.controller.isNarrow()}},role:i.const("complementary"),"aria-label":i.const("Add Item Menu"),didMount:p.bindFn(p.didMountPopover),didUnmount:p.bindFn(p.didUnmountPopover)},i.createElement("div",{class:i.const("dcg-popover-interior")},i.createElement("div",{class:i.const("dcg-new-item dcg-do-not-blur dcg-action-newexpression"),role:i.const("button"),tabindex:i.const(0),"aria-label":function(){return p.controller.t("Add Expression")},onTap:p.bindFn(p.newExpression),handleEvent:i.const("true"),manageFocus:p.const(d.manageFocusHelper({controller:p.controller,location:{type:"add-expression-btn"}}))},i.createElement("i",{class:i.const("dcg-icon-new-expression dcg-expression-icon")}),function(){return p.controller.t("expression")}),i.createElement(u,{predicate:function(){return p.controller.areNotesEnabled()}},function(){return i.createElement("div",{class:i.const("dcg-new-item dcg-do-not-blur dcg-action-newtext"),role:i.const("button"),tabindex:i.const(0),"aria-label":function(){return p.controller.t("Add Note")},onTap:p.bindFn(p.newText),handleEvent:i.const("true")},i.createElement("i",{class:i.const("dcg-icon-new-text dcg-expression-icon")}),function(){return p.controller.t("note")})}),i.createElement("div",{class:i.const("dcg-new-item dcg-do-not-blur dcg-action-newtable"),role:i.const("button"),tabindex:i.const(0),"aria-label":function(){return p.controller.t("Add Table")},onTap:p.bindFn(p.newTable),handleEvent:i.const("true"),manageFocus:p.const(d.manageFocusHelper({controller:p.controller,location:{type:"add-table-btn"}}))},i.createElement("i",{class:i.const("dcg-icon-new-table dcg-expression-icon")}),function(){return p.controller.t("table")}),i.createElement(u,{predicate:function(){return p.controller.areFoldersEnabled()}},function(){return i.createElement("div",{class:i.const("dcg-new-item dcg-do-not-blur dcg-action-newfolder"),role:i.const("button"),tabindex:i.const(0),"aria-label":function(){return p.controller.t("Add Folder")},onTap:p.bindFn(p.newFolder),handleEvent:i.const("true"),manageFocus:p.const(d.manageFocusHelper({controller:p.controller,location:{type:"add-folder-btn"}}))},i.createElement("i",{class:i.const("dcg-icon-new-folder dcg-expression-icon")}),function(){return p.controller.t("folder")})}),i.createElement(u,{predicate:function(){return p.controller.areImagesEnabled()}},function(){return i.createElement(g.ImageUploadView,{controller:function(){return p.controller},ariaLabel:function(){return p.controller.t("Add Image")},onFileChange:function(r){return p.insertFiles(r)},location:p.const({type:"add-image-btn"})},i.createElement("div",{class:i.const("dcg-new-item dcg-action-newimage")},i.createElement("i",{class:i.const("dcg-icon-new-image dcg-expression-icon")}),function(){return p.controller.t("image")}))})),i.createElement("span",{class:i.const("dcg-arrow")}))}))},h.prototype.didMountPopover=function(p){var r=this;this.popoverNode=p,s(document).on("dcg-tapstart.add-expression-view wheel.add-expression-view",function(o){r.eventShouldClosePopover(o)&&r.controller.dispatch({type:"close-add-expression",focusIconAfterClose:o.device==="keyboard"})}),s(document).on("keydown.add-expression-view",function(o){if(t.lookup(o)==="Esc"&&r.controller.dispatch({type:"close-add-expression",focusIconAfterClose:!0}),t.lookup(o)==="Tab"&&!o.altKey&&!o.metaKey&&!o.ctrlKey){var m=r.controller.getFocusLocation();if(!m)return;var b=void 0;b=r.controller.areImagesEnabled()?{type:"add-image-btn"}:r.controller.areFoldersEnabled()?{type:"add-folder-btn"}:{type:"add-table-btn"},o.shiftKey||m.type!==b.type?o.shiftKey&&m.type==="add-item-btn"&&(r.controller.dispatch({type:"set-focus-location",location:b}),o.preventDefault(),o.stopPropagation()):(r.controller.dispatch({type:"set-focus-location",location:{type:"add-item-btn"}}),o.preventDefault(),o.stopPropagation())}}),l.IS_IPAD&&l.IS_IN_IFRAME&&s(p).on("dcg-tapstart",function(o){return o.preventDefault()}),s(p).find(".dcg-new-item").on("touchstart",function(o){return o.preventDefault()})},h.prototype.didUnmountPopover=function(){s(document).off(".add-expression-view")},h.prototype.toggleAddExpression=function(p){this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:p.device==="keyboard"})},h.prototype.newExpression=function(){this.controller.dispatch({type:"new-expression"})},h.prototype.newText=function(){this.controller.dispatch({type:"new-text"})},h.prototype.newFolder=function(){this.controller.dispatch({type:"new-folder"})},h.prototype.newTable=function(){this.controller.dispatch({type:"new-table"})},h.prototype.insertFiles=function(p){this.controller.dispatch({type:"new-images",files:p})},h.prototype.eventShouldClosePopover=function(p){var r=!!s(p.target).closest(this.popoverNode).length,o=!!s(p.target).closest(this.toggleButtonNode).length;return!(r||o)},h})(i.Class);c.default=f}),P("loadcss!expressions/expressions-header",function(){}),P("expressions/expressions-header",["require","exports","tslib","./add_expression_view","dcgview","lib/tooltip","main/manage-focus-helper","loadcss!./expressions-header"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=l.Components.If,g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.init=function(){this.controller=this.props.controller()},u.prototype.template=function(){var f=this;return l.createElement("div",{class:function(){return{"dcg-expression-top-bar":!0,"dcg-expressions-scrolled":f.props.expsScrolled()}},role:l.const("toolbar"),"aria-label":function(){return f.controller.t("Expression Bar")},didMount:function(y){f.node=y},onTapStart:this.bindFn(this.clearSelectionOnMobile),style:function(){return{background:f.controller.hasBackgroundColor()?f.controller.getPillboxBackgroundColor():void 0}}},l.createElement("div",{class:l.const("dcg-left-buttons")},l.createElement(s,{predicate:this.bindFn(this.showHamburger)},function(){return l.createElement("span",{class:l.const("dcg-action-opendrawer dcg-tooltip dcg-icon-btn dcg-in-api-action-opendrawer"),handleEvent:l.const("true"),tooltip:function(){return f.controller.t("Open Graph (ctrl+o)")},role:l.const("button"),tabindex:l.const("0"),"aria-label":function(){return f.controller.t("Open Graph")},onTap:function(){return f.controller.dispatch({type:"open-drawer"})}},l.createElement("i",{class:l.const("dcg-icon-hamburger")}))}),l.createElement(s,{predicate:function(){return!f.controller.isInEditListMode()}},function(){return l.createElement(t.default,{controller:function(){return f.props.controller()}})}),l.createElement(s,{predicate:this.bindFn(this.showRerandomize)},function(){return l.createElement(n.Tooltip,{tooltip:function(){return f.controller.t("Randomize")},gravity:function(){return f.controller.isNarrow()?"n":"s"}},l.createElement("span",{class:l.const("dcg-icon-btn"),handleEvent:l.const("true"),role:l.const("button"),tabindex:l.const("0"),"aria-label":function(){return f.controller.t("Randomize")},onTap:function(){return f.controller.dispatch({type:"re-randomize"})}},l.createElement("i",{class:l.const("dcg-icon-randomize")})))}),l.createElement(s,{predicate:function(){return f.controller.isInEditListMode()&&!f.controller.hasDefaultState()}},function(){return l.createElement("span",{class:l.const("dcg-btn-red dcg-action-clearall"),role:l.const("button"),tabindex:l.const("0"),onTap:function(){return f.controller.dispatch({type:"clear-graph"})}},function(){return f.controller.t("Delete All")})}),l.createElement(s,{predicate:function(){return f.controller.isInEditListMode()&&f.controller.hasDefaultState()}},function(){return l.createElement("span",{class:l.const("dcg-btn-red dcg-action-reset"),role:l.const("button"),tabindex:l.const("0"),onTap:function(){return f.controller.dispatch({type:"reset-graph"})}},function(){return f.controller.t("Reset")})})),l.createElement("div",{class:l.const("dcg-center-buttons")},l.createElement(n.Tooltip,{tooltip:function(){return f.controller.t("Undo (ctrl+z)")},gravity:function(){return f.controller.isNarrow()?"n":"s"},disabled:function(){return!f.controller.canUndo()}},l.createElement("span",{class:function(){return{"dcg-action-undo":!0,"dcg-icon-btn":!0,"dcg-disabled":!f.controller.canUndo()}},role:l.const("button"),tabindex:function(){return f.controller.canUndo()?0:-1},"aria-label":function(){return f.controller.t("Undo")},onTap:function(){return f.controller.dispatch({type:"undo"})},"aria-disabled":function(){return!f.controller.canUndo()}},l.createElement("i",{class:l.const("dcg-icon-undo")}))),l.createElement(n.Tooltip,{tooltip:function(){return f.controller.t("Redo (ctrl+y)")},gravity:function(){return f.controller.isNarrow()?"n":"s"},disabled:function(){return!f.controller.canRedo()}},l.createElement("span",{class:function(){return{"dcg-action-redo":!0,"dcg-icon-btn":!0,"dcg-disabled":!f.controller.canRedo()}},role:l.const("button"),tabindex:function(){return f.controller.canRedo()?0:-1},"aria-label":function(){return f.controller.t("Redo")},onTap:function(){return f.controller.dispatch({type:"redo"})},"aria-disabled":function(){return!f.controller.canRedo()}},l.createElement("i",{class:l.const("dcg-icon-redo")})))),l.createElement("div",{class:l.const("dcg-right-buttons")},l.createElement(s,{predicate:function(){return!f.controller.isInEditListMode()}},function(){return l.createElement(n.Tooltip,{tooltip:function(){return f.controller.t("Edit List")},gravity:function(){return f.controller.isNarrow()?"n":"s"}},l.createElement("span",{class:l.const("dcg-icon-btn dcg-action-toggle-edit"),handleEvent:l.const("true"),role:l.const("button"),tabindex:l.const("0"),"aria-label":function(){return f.controller.t("Edit Expression List")},onTap:f.bindFn(f.toggleEditListMode),manageFocus:f.const(i.manageFocusHelper({controller:f.controller,location:{type:"edit-list-toggle"}}))},l.createElement("i",{class:l.const("dcg-icon-settings")})))}),l.createElement(s,{predicate:function(){return f.controller.isInEditListMode()}},function(){return l.createElement("span",{class:l.const("dcg-btn-blue dcg-action-toggle-edit dcg-do-not-blur"),handleEvent:l.const("true"),role:l.const("button"),tabindex:l.const("0"),onTap:f.bindFn(f.toggleEditListMode),manageFocus:f.const(i.manageFocusHelper({controller:f.controller,location:{type:"edit-list-toggle"}}))},function(){return f.controller.t("Done")})}),l.createElement(s,{predicate:function(){return!f.controller.isInEditListMode()&&f.controller.getGraphSettings().config.graphpaper}},function(){return l.createElement(n.Tooltip,{tooltip:function(){return f.controller.t("Hide Expression List")},gravity:function(){return f.controller.isNarrow()?"nw":"sw"}},l.const(" "),l.createElement("span",{class:function(){return{"dcg-resize-list-btn":!0,"dcg-action-hideexpressions":!0,"dcg-icon-btn":!0,"dcg-rotated":f.controller.isNarrow()}},role:l.const("button"),tabindex:l.const("0"),"aria-label":function(){return f.controller.t("Hide Expression List")},onTap:function(){return f.controller.dispatch({type:"hide-expressions-list"})}},l.createElement("i",{class:l.const("dcg-icon-hide")})))})))},u.prototype.showRerandomize=function(){return this.controller.anyItemDependsOnRandomSeed()},u.prototype.showHamburger=function(){return!!this.controller.getGraphSettings().config.showHamburger&&!this.controller.isInEditListMode()&&!this.controller.isNarrow()},u.prototype.clearSelectionOnMobile=function(f){f.wasHandled()||this.controller.dispatch({type:"set-none-selected"})},u.prototype.toggleEditListMode=function(f){this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!this.controller.isInEditListMode(),focusExpressionList:!1}),f.device==="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:{type:"edit-list-toggle"}})},u})(l.Class);c.default=g}),P("main/load-graph-from-link",["require","exports","core/graphing-calc/migrate-state","jquery"],function(S,c,x,t){function l(n,i,s,g){var d=!1;n.dispatch({type:"toast/show",toast:{message:n.t("Importing graph..."),hideAfter:0,toastStyle:"cover",onHide:function(){d=!0}}});var u=n.getState(),f=function(){d||n.dispatch({type:"toast/show",toast:{message:n.t("Error importing graph. Check the URL?"),toastStyle:"error",hideAfter:12e3}})},y=function(r){if(!r||!r.expressions||!r.expressions.list)return!1;for(var o=r.expressions.list,m=0;m<o.length;m++)if(o[m].type==="folder")return!1;return!0},h=function(r,o){if(!d){var m=n.getSelectedItem();if(!y(r))return void n.dispatch({type:"toast/show",toast:{message:n.t("Only graphs without folders can be inserted into a folder."),toastStyle:"error",hideAfter:12e3}});m&&n.dispatch({type:"set-folder-title",id:m.id,title:o}),r.expressions.list.forEach(function(b){b.id=n.generateId()}),n.dispatch({type:"insert-several-expressions",expressions:r.expressions.list}),n.dispatch({type:"toast/show",toast:{message:n.t("Graph imported!")}})}},p=function(r){d||(n.dispatch({type:"set-state",state:r}),n.dispatch({type:"toast/show",toast:{message:n.t("Graph imported!"),undoCallback:function(){n.dispatch({type:"set-state",state:u})}}}))};t.getJSON(i).done(function(r){var o=x.migrateToLatest(r.state);g(o,function(m,b){m||!b?f():s==="set-state"?p(b):h(b,r.title)})}).fail(f)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=l}),P("lib/get-clipboard-data",["require","exports"],function(S,c){function x(t){return window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):t&&t.clipboardData&&t.clipboardData.getData?t.clipboardData.getData("text/plain"):void 0}Object.defineProperty(c,"__esModule",{value:!0}),c.default=x}),P("loadcss!expressions/exp-list-resizer",function(){}),P("expressions/exp-list-resizer",["require","exports","tslib","dcgview","jquery","underscore","loadcss!./exp-list-resizer"],function(S,c,x,t,l,n){Object.defineProperty(c,"__esModule",{value:!0});var i=t.Components.If,s=(function(g){function d(){return g!==null&&g.apply(this,arguments)||this}return x.__extends(d,g),d.prototype.init=function(){this.guid=n.uniqueId("dcg-exp-list-resize")},d.prototype.template=function(){var u=this;return t.createElement(i,{predicate:this.bindFn(this.isVisible)},function(){return t.createElement("div",{class:t.const("dcg-exp-list-resizer"),onTapStart:u.bindFn(u.onTapStart)})})},d.prototype.isVisible=function(){return!this.props.controller().expressionsAreFullWidth()&&this.props.controller().isListVisible()},d.prototype.onTapStart=function(u){var f=this;this.initialWidth=this.props.controller().getExpListWidth(),this.initialLeft=u.changedTouches[0].clientX,l(document).on("dcg-tapmove."+this.guid,function(y){if(f.initialLeft!==void 0&&f.initialWidth!==void 0){var h=y.changedTouches[0].clientX-f.initialLeft+f.initialWidth;f.props.controller().dispatch({type:"resize-exp-list",expListWidth:h})}}),l(document).on("dcg-tapend."+this.guid,this.bindFn(this.onTapEnd)),l(document).on("dcg-tapcancel."+this.guid,this.bindFn(this.onTapEnd))},d.prototype.onTapEnd=function(){l(document).off("."+this.guid),this.initialLeft=void 0,this.initialWidth=void 0},d})(t.Class);c.ExpListResizer=s}),P("loadcss!expressions/color-menu",function(){}),P("expressions/color-menu",["require","exports","tslib","dcgview","underscore","core/lib/color-helpers","expressions/colors","./circular-icon-view","loadcss!./color-menu"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=t.Components,d=g.For,u=g.If,f=g.Input,y=(function(h){function p(){return h!==null&&h.apply(this,arguments)||this}return x.__extends(p,h),p.prototype.init=function(){this.controller=this.props.controller()},p.prototype.template=function(){var r=this;return t.createElement("div",null,t.createElement(d,{each:function(){return l.values(r.controller.getColors())}},t.createElement("div",{class:t.const("dcg-color-menu dcg-do-not-blur")},function(o){return t.createElement("span",{class:t.const("dcg-color-option"),handleevent:t.const("true"),role:t.const("button"),tabindex:t.const(0),"aria-label":function(){return i.getColorName(r.controller,o)},"aria-pressed":function(){return r.props.selectedColor()===o},onTap:function(){return r.props.onColorSelected(o)}},t.createElement(s.CircularIconView,{iconType:function(){return r.props.selectedColor()===o?"check":"none"},backgroundColor:function(){return o}}))})),t.createElement(u,{predicate:function(){return r.controller.canUseAdvancedStyling()}},function(){return t.createElement("div",{class:t.const("dcg-advanced-color-styling")},t.const("Hex:"),t.createElement(f,{class:function(){return{"dcg-error":!n.isValidHexColor(r.props.selectedColor())}},value:r.props.selectedColor,onInput:function(o){r.props.onColorSelected(o)}}))}))},p})(t.Class);c.default=y}),P("loadcss!expressions/toggle-view",function(){}),P("expressions/toggle-view",["require","exports","tslib","dcgview","loadcss!./toggle-view"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=(function(n){function i(){return n!==null&&n.apply(this,arguments)||this}return x.__extends(i,n),i.prototype.template=function(){var s=this;return t.createElement("div",{class:function(){return{"dcg-toggle-view":!0,"dcg-toggled":s.props.toggled()}},"aria-label":function(){return s.props.ariaLabel()},role:t.const("checkbox"),tabindex:t.const("0"),"aria-checked":function(){return s.props.toggled()},toggled:function(){return s.props.toggled()},onTap:this.bindFn(this.props.onChange)},t.createElement("div",{class:t.const("dcg-toggle-switch")}))},i})(t.Class);c.default=l}),P("expressions/expression_options_view",["require","exports","tslib","dcgview","underscore","core/lib/dragmode","./color-menu","core/math/expression-types","graphing-calc/models/expression","core/types/styles","expressions/toggle-view","dcgview-helpers/checkbox","./circular-icon-view","lib/aria","dcgview-helpers/mathquill-view","core/types/opacity","core/types/line-width"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r,o){Object.defineProperty(c,"__esModule",{value:!0});var m=t.Components,b=m.For,E=m.If,M=(function(D){function A(){return D!==null&&D.apply(this,arguments)||this}return x.__extends(A,D),A.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},A.prototype.template=function(){var v=this;return t.createElement("div",{class:function(){return{"dcg-exp-options-menu":!0,"dcg-options-menu":!0,"dcg-colors-only":v.sections().length===0}},role:t.const("group"),"aria-label":function(){return v.controller.t("Options Menu")},didMount:function(){h.alert(v.controller.t("Options menu open."))},didUnmount:function(){h.alert(v.controller.t("Options menu closed."))}},t.createElement("div",{class:t.const("dcg-triangle")}),t.createElement("div",{class:t.const("dcg-options-menu-column-left")},t.createElement(E,{predicate:function(){return v.sections().indexOf("pointStyles")>=0}},function(){return t.createElement("div",{class:t.const("dcg-styles-div dcg-options-menu-section dcg-styles-section")},t.createElement("div",{class:function(){return{"dcg-styles-menu":!0,"dcg-dividing-line-after":v.hasNextSection("pointStyles")}},role:t.const("group"),"aria-label":function(){return v.controller.t("Point Style Options")}},t.createElement("span",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-toggle-title")},function(){return v.shouldPreventPointsToggle()?v.controller.t("Style"):v.controller.t("Points")}),t.createElement(E,{predicate:function(){return!v.shouldPreventPointsToggle()}},function(){return t.createElement(u.default,{ariaLabel:function(){return v.controller.t("Points")},toggled:function(){return v.getDisplayProps().points},onChange:v.bindFn(v.onTogglePoints)})}),t.createElement(E,{predicate:function(){return v.getDisplayProps().points||v.shouldPreventPointsToggle()}},function(){return t.createElement(b,{each:v.bindFn(v.getValidPointStyles)},t.createElement("div",{class:t.const("dcg-style-icons")},function(k){return t.createElement("div",{class:t.const("dcg-style-icon-container"),onTap:function(){return v.onPointStyleSelected(k)},role:t.const("button"),tabindex:t.const("0"),"aria-label":function(){return k},"aria-pressed":function(){return v.model.pointStyle!==k}},t.createElement(y.CircularIconView,{backgroundColor:function(){return v.model.color},semiTransparent:function(){return v.model.pointStyle!==k},iconType:function(){return k==="CROSS"?"point-cross":k==="OPEN"?"point-open":"point-default"}}))}))})))}),t.createElement(E,{predicate:function(){return v.sections().indexOf("pointSizes")>=0}},function(){return t.createElement("div",{class:t.const("dcg-styles-div dcg-options-menu-section dcg-sizes-section")},t.createElement("div",{class:function(){return{"dcg-styles-menu":!0,"dcg-dividing-line-after":v.hasNextSection("pointSizes")}},role:t.const("group"),"aria-label":function(){return v.controller.t("Size Options")}},t.createElement("span",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-toggle-title")},function(){return v.controller.t("Size")}),t.createElement(b,{each:v.bindFn(v.getValidPointSizes)},t.createElement("div",{class:t.const("dcg-style-icons")},function(k){return t.createElement("div",{class:t.const("dcg-style-icon-container"),onTap:function(){return v.onDotplotPointSizeSelected(k)},role:t.const("button"),tabindex:t.const("0"),"aria-label":function(){return k},"aria-pressed":function(){return v.model.vizProps.dotplotSize!==k}},t.createElement(y.CircularIconView,{backgroundColor:function(){return v.model.color},semiTransparent:function(){return v.model.vizProps.dotplotSize!==k},iconType:function(){return v.model.pointStyle==="CROSS"?"point-cross":v.model.pointStyle==="OPEN"?"point-open":"point-default"},iconModifier:function(){return k==="medium"?"medium":k==="large"?"large":"small"}}))}))))}),t.createElement(E,{predicate:function(){return v.sections().indexOf("lineStyles")>=0}},function(){return t.createElement("div",{class:t.const("dcg-styles-div dcg-options-menu-section dcg-lines-menu")},t.createElement("div",{class:function(){return{"dcg-styles-menu":!0,"dcg-dividing-line-after":v.hasNextSection("lineStyles")}},role:t.const("group"),"aria-label":function(){return v.controller.t("Line Style Options")}},t.createElement("span",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-toggle-title")},function(){return v.shouldShowLinesToggle()?v.controller.t("Lines"):v.controller.t("Style")}),t.createElement(E,{predicate:function(){return v.shouldShowLinesToggle()}},function(){return t.createElement(u.default,{ariaLabel:function(){return v.controller.t("Lines")},toggled:function(){return v.getDisplayProps().lines},onChange:v.bindFn(v.onToggleLines)})}),t.createElement(E,{predicate:function(){return v.shouldShowLineStyles()}},function(){return t.createElement(b,{each:v.bindFn(v.getValidLineStyles)},t.createElement("div",{class:t.const("dcg-style-icons")},function(k){return t.createElement("div",{class:t.const("dcg-style-icon-container"),onTap:function(){return v.onLineStyleSelected(k)},role:t.const("button"),tabindex:t.const("0"),"aria-label":function(){return k},"aria-pressed":function(){return v.model.lineStyle!==k}},t.createElement(y.CircularIconView,{backgroundColor:function(){return v.model.color},semiTransparent:function(){return v.model.lineStyle!==k},iconType:function(){return k==="DOTTED"?"graph-dotted":k==="DASHED"?"graph-dashed":"graph-default"}}))}))}),t.createElement(E,{predicate:function(){return v.shouldShowLineStyles()&&v.controller.canUseAdvancedStyling()&&!v.isRegresssion()}},function(){return t.createElement("div",{class:t.const("dcg-variable-width")},t.const("Width:"),t.createElement(p.default,{latex:function(){return v.model.lineWidth},placeholder:function(){return""+o.DEFAULT},isFocused:function(){return v.getFocusedInput()==="linewidth"},capExpressionSize:function(){return!!v.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:v.const(!0),config:v.const({}),getAriaLabel:function(){return v.controller.t("Line Width: ")},getAriaPostLabel:v.const(""),hasError:function(){return!g.isLineWidthValid(v.model)},onUserChangedLatex:function(k){return v.dispatchLineWidthLatexIfChanged(k)},onExpressionSizeExceeded:function(){return v.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(k){return v.handleFocusedChanged(k,"linewidth")},dataLabelAttributeValue:v.const("line-width")}))})))}),t.createElement(E,{predicate:function(){return v.sections().indexOf("dragModes")>=0}},function(){return t.createElement("div",{class:function(){return{"dcg-styles-menu":!0,"dcg-dividing-line-after":v.hasNextSection("dragModes")}},role:t.const("group"),"aria-label":function(){return v.controller.t("Drag Options")}},t.createElement("div",{class:t.const("dcg-drag-menu")},t.createElement("span",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-toggle-title")},function(){return v.controller.t("Drag")}),t.createElement(u.default,{ariaLabel:function(){return v.controller.t("Drag")},toggled:function(){return v.model.reconciledDragMode!==n.DragMode.NONE},onChange:v.bindFn(v.onToggleDrag)}),t.createElement(E,{predicate:function(){return v.model.reconciledDragMode!==n.DragMode.NONE}},function(){return t.createElement(b,{each:function(){return v.getUIDragModes()}},t.createElement("div",{class:t.const("dcg-style-icons")},function(k){return t.createElement("div",{class:function(){return{"dcg-style-icon-container":!0,"dcg-disabled":v.isDisabled(k)}},onTap:function(){return v.onDragModeSelected(k)},role:t.const("button"),tabindex:function(){return v.isDisabled(k)?-1:0},"aria-label":function(){return k},"aria-pressed":function(){return v.model.reconciledDragMode!==k}},t.createElement(y.CircularIconView,{backgroundColor:function(){return v.isDisabled(k)?"#bbb":v.model.color},semiTransparent:function(){return v.model.reconciledDragMode!==k},iconType:function(){return k==="X"?"movable-horizontal":k==="Y"?"movable-vertical":"movable-both"}}))}))})))}),t.createElement(E,{predicate:function(){return v.sections().indexOf("isFillable")>=0}},function(){return t.createElement("div",{class:t.const("dcg-styles-div dcg-options-menu-section")},t.createElement("div",{class:t.const("dcg-styles-menu")},t.createElement(f.Checkbox,{checked:function(){return v.getDisplayProps().fill},onChange:v.bindFn(v.onToggleFill),ariaLabel:function(){return v.controller.t("Fill")}},function(){return v.controller.t("Fill")}),t.createElement(E,{predicate:function(){return v.getDisplayProps().fill&&v.controller.canUseAdvancedStyling()}},function(){return t.createElement("div",{class:t.const("dcg-variable-opacity")},t.const("Opacity:"),t.createElement(p.default,{latex:function(){return v.model.fillOpacity},placeholder:function(){return""+r.DEFAULT},isFocused:function(){return v.getFocusedInput()==="opacity"},capExpressionSize:function(){return!!v.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:v.const(!0),config:v.const({}),getAriaLabel:function(){return v.controller.t("Fill Opacity: ")},getAriaPostLabel:v.const(""),hasError:function(){return!g.isFillOpacityValid(v.model)},onUserChangedLatex:function(k){return v.dispatchOpacityLatexIfChanged(k)},onExpressionSizeExceeded:function(){return v.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(k){return v.handleFocusedChanged(k,"opacity")},dataLabelAttributeValue:v.const("fill-opacity"),needsSystemKeypad:function(){return!v.controller.isKeypadEnabled()}}))})))}),t.createElement(E,{predicate:function(){return v.sections().indexOf("isClickable")>=0}},function(){return t.createElement("div",null,t.createElement(f.Checkbox,{checked:function(){return!!v.model.clickableInfo.enabled},onChange:function(k){v.controller.dispatch({type:"set-clickableinfo-prop",id:v.model.id,prop:"enabled",value:k})},ariaLabel:function(){return v.controller.t("Clickable")}},function(){return v.controller.t("Clickable")}))})),t.createElement("div",{class:t.const("dcg-options-menu-column-right")},t.createElement("div",{class:t.const("dcg-colors-div dcg-options-menu-section"),role:t.const("group"),"aria-label":function(){return v.controller.t("Color Options")}},t.createElement("div",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-title")},function(){return v.controller.t("Color")}),t.createElement(i.default,{controller:function(){return v.props.controller()},selectedColor:function(){return v.model.color},onColorSelected:this.bindFn(this.onColorSelected)}))))},A.prototype.getFocusedInput=function(){var v=this.controller.getFocusLocation();if(v&&v.type==="expression-menu"&&v.id===this.id)return v.location},A.prototype.handleFocusedChanged=function(v,k){v?this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:this.id,location:k}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"expression-menu",id:this.id,location:k}})},A.prototype.dispatchOpacityLatexIfChanged=function(v){this.model.fillOpacity!==v&&this.controller.dispatch({type:"set-item-fillopacity",id:this.id,fillOpacity:v})},A.prototype.dispatchLineWidthLatexIfChanged=function(v){this.model.lineWidth!==v&&this.controller.dispatch({type:"set-item-linewidth",id:this.id,lineWidth:v})},A.prototype.hasNextSection=function(v){var k=this.sections();return k.indexOf(v)<k.length-1},A.prototype.sections=function(){if(g.isToplevelDistribution(this.model))return[];var v=[];return this.getValidPointStyles().length>0&&v.push("pointStyles"),this.shouldShowDotplotPointSizes()&&v.push("pointSizes"),this.getValidLineStyles().length>0&&!g.isSinglePoint(this.model)&&v.push("lineStyles"),this.getUIDragModes().length>0&&v.push("dragModes"),(g.isPolygon(this.model)||g.isParametric(this.model))&&v.push("isFillable"),this.shouldShowClickable()&&v.push("isClickable"),v},A.prototype.getValidPointStyles=function(){return g.isPointOrPointList(this.model)||g.isDotPlot(this.model)?[d.PointStyle.POINT,d.PointStyle.OPEN,d.PointStyle.CROSS]:[]},A.prototype.getValidPointSizes=function(){return g.isDotPlot(this.model)?["small","medium","large"]:[]},A.prototype.shouldShowDotplotPointSizes=function(){return this.getValidPointSizes().length>0},A.prototype.shouldShowClickable=function(){return!!this.controller.canAuthorClickableObjects()&&g.isClickableAllowed(this.model)},A.prototype.getUIDragModes=function(){return this.model.formula.move_strategy?[n.DragMode.X,n.DragMode.Y,n.DragMode.XY]:[]},A.prototype.getValidLineStyles=function(){return g.isVisualization(this.model)?[]:this.model.formula.is_inequality||g.isSinglePoint(this.model)?[]:[d.LineStyle.SOLID,d.LineStyle.DASHED,d.LineStyle.DOTTED]},A.prototype.shouldPreventPointsToggle=function(){return g.isSinglePoint(this.model)||g.isDotPlot(this.model)},A.prototype.onToggleFill=function(){this.controller.dispatch({type:"set-item-fill",id:this.id,fill:!this.getDisplayProps().fill})},A.prototype.onColorSelected=function(v){this.controller.dispatch({type:"set-item-color",id:this.id,color:v})},A.prototype.shouldShowLinesToggle=function(){return g.isPointOrPointList(this.model)||g.isParametric(this.model)||g.isPolygon(this.model)},A.prototype.shouldShowLineStyles=function(){return this.getDisplayProps().lines||!this.shouldShowLinesToggle()},A.prototype.onTogglePoints=function(){this.controller.dispatch({type:"set-item-points",id:this.id,points:!this.getDisplayProps().points})},A.prototype.onPointStyleSelected=function(v){this.model.pointStyle!==v&&this.controller.dispatch({type:"set-item-pointstyle",id:this.id,pointStyle:v})},A.prototype.onDotplotPointSizeSelected=function(v){this.model.vizProps.dotplotSize!==v&&this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:"dotplotSize",latex:v})},A.prototype.onToggleLines=function(){this.controller.dispatch({type:"set-item-lines",id:this.id,lines:!this.getDisplayProps().lines})},A.prototype.onLineStyleSelected=function(v){this.model.lineStyle!==v&&this.controller.dispatch({type:"set-item-linestyle",id:this.id,lineStyle:v})},A.prototype.isDisabled=function(v){var k=this.controller.getEnabledDragModesForItem(this.id);return!l.contains(k,v)},A.prototype.getDragMode=function(){return this.model.reconciledDragMode||this.model.dragMode},A.prototype.getDisplayProps=function(){var v=this.model,k=v.points,J=v.lines,X=v.fill;return s.getReconciledExpressionProps(this.model.formula.expression_type,{points:k,lines:J,fill:X})},A.prototype.onToggleDrag=function(){var v=this.model.reconciledDragMode!==n.DragMode.NONE?n.DragMode.NONE:n.DragMode.XY;this.controller.dispatch({type:"set-item-dragmode",id:this.id,dragMode:v})},A.prototype.onDragModeSelected=function(v){this.isDisabled(v)||this.controller.dispatch({type:"set-item-dragmode",id:this.id,dragMode:v})},A.prototype.isRegresssion=function(){return this.model.formula&&this.model.formula.is_regression},A})(t.Class);c.ExpressionOptionsMenuView=M}),P("expressions/image_options_view",["require","exports","tslib","dcgview","dcgview-helpers/checkbox","./circular-icon-view","./image-upload-view","lib/coerce-url"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=t.Components,d=g.For,u=g.If,f=(function(y){function h(){return y!==null&&y.apply(this,arguments)||this}return x.__extends(h,y),h.prototype.template=function(){var p=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,t.createElement("div",{class:t.const("dcg-exp-options-menu dcg-image-options-menu dcg-options-menu")},t.createElement("div",{class:t.const("dcg-triangle")}),t.createElement("div",{class:t.const("dcg-opacities-menu dcg-dividing-line-after")},t.createElement("div",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-title")},function(){return p.controller.t("Opacity")}),t.createElement(d,{each:function(){return p.controller.getImageOpacities()}},t.createElement("div",{class:t.const("dcg-opacities-menu"),role:t.const("group"),"aria-label":function(){return p.controller.t("Opacity")}},function(r){return t.createElement("span",{class:t.const("dcg-opacity-option"),role:t.const("button"),tabindex:t.const(0),"aria-label":function(){return"opacity: "+r},"aria-pressed":function(){return p.isOpacitySelected(r)},handleevent:t.const("true"),onTap:function(){return p.onSelectOpacity(r)}},t.createElement(n.CircularIconView,{backgroundImage:p.bindFn(p.getBackgroundImage),iconType:function(){return p.isOpacitySelected(r)?"check":"none"},backgroundOpacity:function(){return parseFloat(r)}}))}))),t.createElement("div",{class:t.const("dcg-styles-div dcg-options-menu-section")},t.createElement("div",{class:t.const("dcg-styles-menu"),role:t.const("group"),"aria-label":function(){return p.controller.t("Styles")}},t.createElement(l.Checkbox,{checked:function(){return!p.model.foreground},onChange:this.bindFn(this.onToggleForeground),ariaLabel:function(){return p.controller.t("Place behind graphs")}},function(){return p.controller.t("Place behind graphs")})),t.createElement(u,{predicate:this.bindFn(this.shouldShowClickable)},function(){return t.createElement("div",null,t.createElement(l.Checkbox,{checked:function(){return!!p.model.clickableInfo.enabled},onChange:function(r){p.controller.dispatch({type:"set-clickableinfo-prop",id:p.model.id,prop:"enabled",value:r})},ariaLabel:function(){return p.controller.t("Clickable")}},function(){return p.controller.t("Clickable")}))}),t.createElement(u,{predicate:function(){return p.controller.canUseAdvancedStyling()}},function(){return t.createElement(i.ImageUploadView,{controller:function(){return p.controller},ariaLabel:function(){return p.controller.t("Change Image")},onFileChange:function(r){return p.insertFiles(r)},location:p.const({type:"change-image-btn",id:p.id})},t.createElement("div",{class:t.const("dcg-action-changeimage")},function(){return p.controller.t("Change Image")}))})))},h.prototype.onToggleForeground=function(p){this.controller.dispatch({type:"set-image-in-foreground",id:this.id,foreground:!p})},h.prototype.onSelectOpacity=function(p){this.controller.dispatch({type:"set-image-opacity",id:this.id,opacity:p})},h.prototype.isOpacitySelected=function(p){return this.model.opacity===p},h.prototype.insertFiles=function(p){this.controller.dispatch({type:"change-image",files:p,id:this.id})},h.prototype.getBackgroundImage=function(){return this.model.image_url===this.lastURL?this.lastEncodedURL:(this.lastURL=this.model.image_url,this.lastEncodedURL='url("'+s.coerceURL(this.model.image_url)+'")',this.lastEncodedURL)},h.prototype.shouldShowClickable=function(){return!!this.controller.canAuthorClickableObjects()},h})(t.Class);c.ImageOptionsView=f}),P("expressions/tables/table_column_menu_view",["require","exports","tslib","dcgview","expressions/color-menu","core/lib/dragmode","core/types/styles","expressions/toggle-view","../circular-icon-view"],function(S,c,x,t,l,n,i,s,g){Object.defineProperty(c,"__esModule",{value:!0});var d=t.Components,u=d.For,f=d.If,y=(function(h){function p(){return h!==null&&h.apply(this,arguments)||this}return x.__extends(p,h),p.prototype.template=function(){var r=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.columnId=this.model.id,this.tableModel=this.model.table,this.tableId=this.tableModel.id,t.createElement("div",{class:t.const("dcg-table-column-menu dcg-options-menu")},t.createElement("div",{class:t.const("dcg-triangle")}),t.createElement("div",{class:t.const("dcg-options-menu-column-left")},t.createElement("div",{class:t.const("dcg-options-menu-section")},t.createElement("span",{class:t.const("dcg-toggle-title")},function(){return r.controller.t("Points")}),t.createElement(s.default,{ariaLabel:function(){return r.controller.t("Points")},toggled:function(){return r.model.points},onChange:function(){return r.onTogglePoints(!r.model.points)}}),t.createElement(f,{predicate:function(){return r.model.points}},function(){return t.createElement(u,{each:function(){return r.controller.getPointStyles()}},t.createElement("div",{class:t.const("dcg-style-icons")},function(o){return t.createElement("div",{class:t.const("dcg-style-icon-container"),onTap:function(){return r.onPointStyleSelected(o)}},t.createElement(g.CircularIconView,{backgroundColor:function(){return r.model.color},semiTransparent:function(){return r.model.pointStyle!==o},iconType:function(){return o==="CROSS"?"point-cross":o==="OPEN"?"point-open":"point-default"}}))}))})),t.createElement("div",{class:t.const("dcg-options-menu-section")},t.createElement("span",{class:t.const("dcg-toggle-title")},function(){return r.controller.t("Lines")}),t.createElement(s.default,{ariaLabel:function(){return r.controller.t("Lines")},toggled:function(){return r.model.lines},onChange:function(){return r.onToggleLines(!r.model.lines)}}),t.createElement(f,{predicate:function(){return r.model.lines}},function(){return t.createElement("div",{class:t.const("dcg-line-options")},t.createElement(u,{each:function(){return r.controller.getLineStyles()}},t.createElement("div",{class:t.const("dcg-style-icons")},function(o){return t.createElement("div",{class:t.const("dcg-style-icon-container"),onTap:function(){return r.onLineStyleSelected(o)}},t.createElement(g.CircularIconView,{backgroundColor:function(){return r.model.color},semiTransparent:function(){return r.model.lineStyle!==o},iconType:function(){return o==="DOTTED"?"graph-dotted":o==="DASHED"?"graph-dashed":"graph-default"}}))})))})),t.createElement(f,{predicate:function(){return r.model.draggable}},function(){return t.createElement("div",{class:t.const("dcg-drag-div dcg-options-menu-section")},t.createElement("span",{class:t.const("dcg-toggle-title")},function(){return r.controller.t("Drag")}),t.createElement(s.default,{ariaLabel:function(){return r.controller.t("Drag")},toggled:function(){return r.model.dragMode!==n.DragMode.NONE},onChange:function(){return r.onToggleDrag()}}),t.createElement(f,{predicate:function(){return r.model.dragMode!==n.DragMode.NONE}},function(){return t.createElement(u,{each:function(){return r.controller.getUIDragModes()}},t.createElement("div",{class:t.const("dcg-style-icons")},function(o){return t.createElement("div",{class:t.const("dcg-style-icon-container"),onTap:function(){return r.onDragModeSelected(o)}},t.createElement(g.CircularIconView,{backgroundColor:function(){return r.model.color},semiTransparent:function(){return r.model.dragMode!==o},iconType:function(){return o==="X"?"movable-horizontal":o==="Y"?"movable-vertical":"movable-both"}}))}))}))})),t.createElement("div",{class:t.const("dcg-options-menu-column-right")},t.createElement("div",{class:t.const("dcg-colors-div dcg-options-menu-section")},t.createElement("div",{class:t.const("dcg-toggle-title")},function(){return r.controller.t("Color")}),t.createElement(l.default,{controller:function(){return r.props.controller()},selectedColor:function(){return r.model.color},onColorSelected:this.bindFn(this.onColorSelected)}))))},p.prototype.getPointStyleClass=function(r){switch(r){case i.PointStyle.CROSS:return"dcg-graph-CROSS";case i.PointStyle.OPEN:return"dcg-graph-OPEN";default:return"dcg-graph-POINT"}},p.prototype.getLineStyleClass=function(r){switch(r){case i.LineStyle.DASHED:return"dcg-graph-DASHED";case i.LineStyle.DOTTED:return"dcg-graph-DOTTED";default:return"dcg-graph-SOLID"}},p.prototype.onColorSelected=function(r){this.controller.dispatch({type:"set-tablecolumn-color",tableId:this.tableId,columnId:this.columnId,color:r})},p.prototype.onTogglePoints=function(r){this.controller.dispatch({type:"set-tablecolumn-points",tableId:this.tableId,columnId:this.columnId,bool:r})},p.prototype.onPointStyleSelected=function(r){this.controller.dispatch({type:"set-tablecolumn-pointstyle",tableId:this.tableId,columnId:this.columnId,pointStyle:r})},p.prototype.onToggleLines=function(r){this.controller.dispatch({type:"set-tablecolumn-lines",tableId:this.tableId,columnId:this.columnId,bool:r})},p.prototype.onLineStyleSelected=function(r){this.controller.dispatch({type:"set-tablecolumn-linestyle",tableId:this.tableId,columnId:this.columnId,lineStyle:r})},p.prototype.onToggleDrag=function(){var r=this.columnId,o=this.tableId,m=this.model.dragMode===n.DragMode.NONE?n.DragMode.XY:n.DragMode.NONE;this.controller.dispatch({type:"set-tablecolumn-dragmode",tableId:o,columnId:r,dragMode:m})},p.prototype.onDragModeSelected=function(r){var o=this.columnId,m=this.tableId;this.model.dragMode!==r&&this.controller.dispatch({type:"set-tablecolumn-dragmode",tableId:m,columnId:o,dragMode:r})},p})(t.Class);c.TableColumnMenuView=y}),P("loadcss!expressions/slider-speed-view",function(){}),P("expressions/slider_speed_view",["require","exports","tslib","underscore","lib/aria","dcgview","core/graphing-calc/json/expression","loadcss!./slider-speed-view"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=[.05,.1,.15,.2,.35,.5,.75,1,1.5,2,3.5,5,7.5,10,15,20],g=t.min(s),d=t.max(s),u=(function(f){function y(){return f!==null&&f.apply(this,arguments)||this}return x.__extends(y,f),y.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},y.prototype.template=function(){var h=this;return n.createElement("div",{class:n.const("dcg-slider-speed-container dcg-do-not-blur"),handleEvent:n.const("true")},n.createElement("span",{class:function(){return{"dcg-action-slower":!0,"dcg-disabled":h.isSlowerDisabled()}},onTap:function(){return h.animateSlower()},role:n.const("button"),"aria-label":function(){return h.getSlowerAriaLabel()},tabindex:function(){return h.isSlowerDisabled()?-1:0},"aria-disabled":function(){return h.isSlowerDisabled()}},n.createElement("i",{class:n.const("dcg-icon-show")})),n.createElement("span",{class:n.const("dcg-variable-speed")},this.bindFn(this.computeSpeed),n.const("x")),n.createElement("span",{class:function(){return{"dcg-action-faster":!0,"dcg-disabled":h.isFasterDisabled()}},onTap:function(){return h.animateFaster()},role:n.const("button"),"aria-label":function(){return h.getFasterAriaLabel()},tabindex:function(){return h.isFasterDisabled()?-1:0},"aria-disabled":function(){return h.isFasterDisabled()}},n.createElement("i",{class:n.const("dcg-icon-show")})))},y.prototype.computeSpeed=function(){var h=i.DEFAULT_SLIDER_PERIOD/this.model.slider.animationPeriod;return h=Number(h.toFixed(3))},y.prototype.isSlowerDisabled=function(){return g>=this.computeSpeed()},y.prototype.isFasterDisabled=function(){return d<=this.computeSpeed()},y.prototype.animateSlower=function(){var h=this.computeSpeed(),p=t.filter(s,function(r){return r<h});p.length!==0&&this.setPeriodFromSpeed(t.max(p))},y.prototype.animateFaster=function(){var h=this.computeSpeed(),p=t.filter(s,function(r){return r>h});p.length!==0&&this.setPeriodFromSpeed(t.min(p))},y.prototype.setPeriodFromSpeed=function(h){var p=i.DEFAULT_SLIDER_PERIOD/h;this.controller.dispatch({type:"set-slider-animationperiod",id:this.model.id,animationPeriod:p}),l.alert(this.controller.t("Animating at __speed__x",{speed:h+""}))},y.prototype.getSlowerAriaLabel=function(){return this.controller.t("Animate Slower")},y.prototype.getFasterAriaLabel=function(){return this.controller.t("Animate Faster")},y})(n.Class);c.default=u}),P("loadcss!expressions/slider-options-view",function(){}),P("expressions/slider-options-view",["require","exports","tslib","dcgview","core/types/slider-loop-modes","../lib/tooltip","./slider_speed_view","loadcss!toggle","loadcss!./slider-options-view"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=t.Components.For,g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},u.prototype.template=function(){var f=this;return t.createElement("div",{class:t.const("dcg-exp-options-menu dcg-slider-options-view dcg-options-menu")},t.createElement("div",{class:t.const("dcg-triangle")}),t.createElement("div",{class:t.const("dcg-slider-menu")},t.createElement("div",{role:t.const("group"),"aria-label":function(){return f.controller.t("Animation Mode")}},t.createElement("div",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-title")},function(){return f.controller.t("Animation Mode")}),t.createElement(s,{each:this.bindFn(this.getAnimationOptions),key:function(y){return y.key}},t.createElement("div",{class:t.const("dcg-toggle")},function(y){return t.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":f.isSelected(y.key)}},role:t.const("button"),tabindex:t.const(0),"aria-label":function(){return y.aria},"aria-pressed":function(){return f.isSelected(y.key)},onTap:function(){return f.props.controller().dispatch({type:"set-slider-loopmode",id:f.props.model().id,loopMode:y.key})}},t.createElement(n.Tooltip,{tooltip:function(){return y.aria},offset:function(){return{top:5}},gravity:f.getAnimationOptionTooltipGravity(y)},t.createElement("i",{class:function(){return l.getSliderIcon(y.key)}})))})))),t.createElement("div",{class:t.const("dcg-slider-menu dcg-slider-speed-menu"),role:t.const("group"),"aria-label":function(){return f.controller.t("Speed")}},t.createElement("div",{role:t.const("heading"),"aria-level":t.const("2"),class:t.const("dcg-title")},function(){return f.controller.t("Speed")}),t.createElement("div",{class:t.const("dcg-slider-speed-container")},t.createElement(i.default,x.__assign({},this.props)))))},u.prototype.getAnimationOptionTooltipGravity=function(f){return this.getAnimationOptions()[0].key===f.key?this.const("se"):this.const("s")},u.prototype.getAnimationOptions=function(){return[{key:l.SliderLoopMode.LOOP_FORWARD_REVERSE,aria:this.controller.t("Loop forwards and backwards")},{key:l.SliderLoopMode.LOOP_FORWARD,aria:this.controller.t("Repeat in one direction")},{key:l.SliderLoopMode.PLAY_ONCE,aria:this.controller.t("Play once")},{key:l.SliderLoopMode.PLAY_INDEFINITELY,aria:this.controller.t("Play indefinitely")}]},u.prototype.isSelected=function(f){return this.model.slider.loopMode===f},u})(t.Class);c.SliderOptionsView=g}),P("loadcss!expressions/item-settings-view",function(){}),P("expressions/item-settings-view",["require","exports","tslib","dcgview","keys","underscore","jquery","./expression_options_view","./image_options_view","./tables/table_column_menu_view","./slider-options-view","lib/animation-frame","loadcss!./item-settings-view"],function(S,c,x,t,l,n,i,s,g,d,u,f){Object.defineProperty(c,"__esModule",{value:!0});var y=t.Components.Switch,h=(function(p){function r(){return p!==null&&p.apply(this,arguments)||this}return x.__extends(r,p),r.prototype.init=function(){this.controller=this.props.controller()},r.prototype.template=function(){var o=this;return t.createElement(y,{key:this.bindFn(this.getActiveGuid)},function(){var m=o.controller.getOpenItemMenu();return m?m.type==="expression"?t.createElement("div",{class:t.const("dcg-options-menu-container"),didMount:o.bindFn(o.didMountView),didUnmount:o.bindFn(o.didUnmountView)},t.createElement(s.ExpressionOptionsMenuView,{controller:o.props.controller,model:function(){return m.model}})):m.type==="image"?t.createElement("div",{class:t.const("dcg-options-menu-container"),didMount:o.bindFn(o.didMountView),didUnmount:o.bindFn(o.didUnmountView)},t.createElement(g.ImageOptionsView,{controller:o.props.controller,model:function(){return m.model}})):m.type==="table-column"?t.createElement("div",{class:t.const("dcg-options-menu-container"),didMount:o.bindFn(o.didMountView),didUnmount:o.bindFn(o.didUnmountView)},t.createElement(d.TableColumnMenuView,{controller:o.props.controller,model:function(){return m.model}})):m.type==="slider"?t.createElement("div",{class:t.const("dcg-options-menu-container"),didMount:o.bindFn(o.didMountView),didUnmount:o.bindFn(o.didUnmountView)},t.createElement(u.SliderOptionsView,{controller:o.props.controller,model:function(){return m.model}})):m:t.createElement("span",null)})},r.prototype.getActiveGuid=function(){var o=this.controller.getOpenItemMenu();if(o)return o.model.guid},r.prototype.getActiveIcon=function(){var o=this.controller.getOpenItemMenu();if(o)return i(o.icon)},r.prototype.didMountView=function(o){var m=this;this.guid=n.uniqueId("dcg-item-settings-view"),this.openView=o,this.positionMenu(),this.moveFocusIfAppropriate(),i(document).on("keydown."+this.guid,function(b){var E=l.lookup(b);E==="Esc"?(m.focusIcon(),m.hideOptions()):E!=="Tab"||b.altKey||b.ctrlKey||b.metaKey||(b.shiftKey?b.shiftKey&&(m.isIconModelFocused()?(b.preventDefault(),b.stopPropagation(),m.focusLastOption()):m.isFirstOptionViewFocused()?(b.preventDefault(),b.stopPropagation(),m.focusIcon()):m.focusAnywhere()):m.isIconModelFocused()?(b.preventDefault(),b.stopPropagation(),m.focusFirstOption()):m.isLastOptionViewFocused()?(b.preventDefault(),b.stopPropagation(),m.focusIcon()):m.focusAnywhere())}),f.requestAnimationFrame(function(){m.openView&&m.controller.getExppanelSelectorOrThrow().on("scroll."+m.guid,function(){m.hideOptions()})}),i(document).on("dcg-tapstart."+this.guid,function(b){if(m.openView){var E=i(b.target);if(!E.closest(m.getActiveIcon()).length){if(E.closest(m.openView).length){if(!E.is(':input, [role="textbox"], [tabindex="0"]:visible'))return;var M=m.getDOMTabStops(),D=M.$first,A=M.$last;return void(D!==void 0&&D.is(E)?m.focusFirstOption():A!==void 0&&A.is(E)?m.focusLastOption():b.target.hasAttribute("dataLabelAttributeValue")||b.target.getAttribute("dataLabelAttributeValue")==="fill-opacity"||m.focusAnywhere())}E.closest(".dcg-keypad,.dcg-show-keypad-container").length||m.hideOptions()}}})},r.prototype.didUnmountView=function(){i(document).off("."+this.guid),this.openView=void 0},r.prototype.didUpdate=function(){this.moveFocusIfAppropriate()},r.prototype.moveFocusIfAppropriate=function(){var o=this.getDOMTabStops(),m=o.$first,b=o.$last;m!==void 0&&b!==void 0&&(this.shouldMoveFocusToFirstOption()?m.focus():this.shouldMoveFocusToLastOption()&&b.focus())},r.prototype.open=function(){return!!this.controller.getOpenItemMenu()},r.prototype.hideOptions=function(){this.open()&&this.controller.dispatch({type:"close-item-settings-menu"})},r.prototype.positionMenu=function(){var o=this.getActiveIcon();if(o&&this.openView){var m=this.controller.getExppanelSelectorOrThrow(),b=o.offset(),E={top:b.top-m.closest(".dcg-container").offset().top,left:b.left-m.closest(".dcg-container").offset().left};i(this.openView).css({top:E.top+"px",left:E.left+"px",display:"block"})}},r.prototype.isIconModelFocused=function(){var o=this.controller.getOpenItemMenu();return o!==void 0&&(o.type==="slider"?this.controller.isFocusLocationFocused({type:"slider-animation-properties-icon",id:o.model.id}):o.type==="image"?this.controller.isFocusLocationFocused({type:"image-icon",id:o.model.id}):this.controller.isFocusLocationFocused({type:"expression-icon",id:o.model.id}))},r.prototype.focusIcon=function(){var o=this.controller.getOpenItemMenu();o&&(o.type==="slider"?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-animation-properties-icon",id:o.model.id}}):o.type==="image"?this.controller.dispatch({type:"set-focus-location",location:{type:"image-icon",id:o.model.id}}):this.controller.dispatch({type:"set-focus-location",location:{type:"expression-icon",id:o.model.id}}))},r.prototype.isFirstOptionViewFocused=function(){var o=this.getDOMTabStops().$first;return o!==void 0&&o.is(":focus")},r.prototype.shouldMoveFocusToFirstOption=function(){var o=this.controller.getOpenItemMenu();return o!==void 0&&!this.isFirstOptionViewFocused()&&this.controller.isFocusLocationFocused({type:"expression-menu",id:o.model.id,location:"start"})},r.prototype.focusFirstOption=function(){var o=this.controller.getOpenItemMenu();o&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:o.model.id,location:"start"}})},r.prototype.isLastOptionViewFocused=function(){var o=this.getDOMTabStops().$last;return o!==void 0&&o.is(":focus")},r.prototype.shouldMoveFocusToLastOption=function(){var o=this.controller.getOpenItemMenu();return o!==void 0&&!this.isLastOptionViewFocused()&&this.controller.isFocusLocationFocused({type:"expression-menu",id:o.model.id,location:"end"})},r.prototype.focusLastOption=function(){var o=this.controller.getOpenItemMenu();o&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:o.model.id,location:"end"}})},r.prototype.focusAnywhere=function(){var o=this.controller.getOpenItemMenu();o&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:o.model.id,location:"anywhere"}})},r.prototype.getDOMTabStops=function(){if(this.openView===void 0)return{};var o=i(this.openView),m=o.find(':input, [role="textbox"], [tabindex="0"]:visible');return{$first:m.first(),$last:m.last()}},r})(t.Class);c.ItemSettingsView=h}),P("loadcss!expressions/author-ide-bar-view",function(){}),P("expressions/author-ide-bar-view",["require","exports","tslib","dcgview","loadcss!./author-ide-bar-view"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=t.Components,n=l.Input,i=l.If,s=(function(g){function d(){return g!==null&&g.apply(this,arguments)||this}return x.__extends(d,g),d.prototype.init=function(){this.controller=this.props.controller()},d.prototype.template=function(){var u=this;return t.createElement("div",{class:t.const("dcg-author-ide-bar")},t.const("search:"),t.const(" "),t.createElement(n,{onInput:this.bindFn(this.onChange),value:function(){return u.controller.getIDESearchStr()}}),t.createElement(i,{predicate:function(){return!!u.controller.getIDESearchStr()}},function(){return t.createElement("i",{onTap:function(){return u.onChange("")},class:t.const("dcg-icon-remove")})}))},d.prototype.onChange=function(u){this.controller.dispatch({type:"update-ide-search-str",str:u})},d})(t.Class);c.AuthorIDEBar=s}),P("loadcss!expressions/list-view",function(){}),P("loadcss!expressions",function(){}),P("expressions/list-view",["require","exports","tslib","touchtracking","keys","dcgview","jquery","underscore","lib/conditional_blur","./expression_view","./text_view","./table-view","./folder-view","./image-view","./shell_view","./drag_container_view","main/data_helpers","./new_expression_view","./expressions-header","main/load-graph-from-link","lib/get-clipboard-data","graphing-calc/models/abstract-item","graphing-calc/models/list","./exp-list-resizer","./item-settings-view","./author-ide-bar-view","loadcss!./list-view","loadcss!expressions","jquery.handleevent"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r,o,m,b,E,M,D,A,v,k,J){Object.defineProperty(c,"__esModule",{value:!0});var X=n.Components,te=X.If,H=X.For,z=X.Switch,B=X.SwitchUnion,F=(function($){function re(){var K=$!==null&&$.apply(this,arguments)||this;return K.guid=s.uniqueId("listView"),K}return x.__extends(re,$),re.prototype.init=function(){this.controller=this.props.controller()},re.prototype.template=function(){var K=this;return n.createElement("div",{didMount:this.bindFn(this.didMountContainer)},n.createElement("div",{class:n.const("dcg-exppanel-outer"),onDrop:this.bindFn(this.onDrop),style:function(){return K.computeExppanelOuterStyle()}},n.createElement("div",{class:function(){return{"dcg-exppanel-container":!0,"dcg-add-shadow":K.controller.shouldRenderList()}},style:function(){return{transform:K.controller.isListVisible()?void 0:K.controller.isNarrow()?"translate(0, 100%)":"translate(-100%, 0)"}}},n.createElement(te,{predicate:function(){return K.controller.isFileDraggedOver()}},function(){return n.createElement("div",{class:n.const("dcg-drop-image")},n.createElement("span",null,function(){return K.controller.t("Drop Image Here")}))}),n.createElement(te,{predicate:function(){return K.controller.shouldRenderList()}},function(){return n.createElement("div",{class:function(){return{"dcg-exppanel":!0,"dcg-disable-horizontal-scroll-to-cursor":!0,"dcg-isDragging":K.controller.isDragDropActive(),"dcg-has-background-color":K.controller.hasBackgroundColor()}},style:function(){return{background:K.controller.getBackgroundColor()}},onPaste:K.bindFn(K.onPaste),onTapStart:K.bindFn(K.onExppanelTapstart),didMount:K.bindFn(K.didMountExppanel)},n.createElement(v.ExpListResizer,{controller:K.props.controller}),n.createElement("div",{class:n.const("dcg-expressionlist"),role:n.const("complementary"),"aria-label":n.const("Expression List")},n.createElement(H,{each:function(){return K.controller.getAllItemModels()},key:function(ue){return ue.guid}},n.createElement("span",{class:n.const("dcg-template-expressioneach")},function(ue){return B(function(){return D.getDisplayState(ue)},{shell:function(){return K.makeShellViewForModel(ue)},render:function(){return K.makeViewForModel(ue)},none:function(){}})})),n.createElement(te,{predicate:function(){return!K.props.controller().getIDESearchStr()}},function(){return n.createElement(m.default,{controller:function(){return K.props.controller()}})}),n.createElement(z,{key:function(){return K.controller.getDraggedItemId()}},function(ue){if(ue){var ie=K.controller.getItemModel(ue);return n.createElement(r.default,{controller:K.props.controller},K.makeDragCopyViewForModel(ie))}}),n.createElement("div",{class:n.const("dcg-expressions-branding"),style:function(){return{opacity:K.controller.isKeypadOpen()?0:1}}},n.createElement(te,{predicate:function(){return K.controller.canEditOnWeb()}},function(){return n.createElement("span",{role:n.const("link"),tabindex:n.const(0),class:n.const("dcg-edit-branding"),onTap:function(){return K.controller.dispatch({type:"open-on-web"})}},n.createElement("div",{class:n.const("dcg-powered-by"),"aria-label":function(){return K.controller.t("Edit graph on Desmos")}},function(){return K.controller.t("edit graph on")}),n.createElement("i",{class:n.const("dcg-icon-desmos")}))}),n.createElement(te,{predicate:function(){return!K.controller.canEditOnWeb()}},function(){return n.createElement("span",{class:n.const("dcg-noedit-branding")},n.createElement("div",{class:n.const("dcg-powered-by"),"aria-label":function(){return K.controller.t("powered by Desmos")}},function(){return K.controller.t("powered by")}),n.createElement("i",{class:n.const("dcg-icon-desmos")}))}))))}),n.createElement(te,{predicate:function(){return K.controller.isAuthorIDE()}},function(){return n.createElement(J.AuthorIDEBar,x.__assign({},K.props))}),n.createElement(te,{predicate:function(){return K.controller.shouldRenderList()}},function(){return n.createElement(b.default,{controller:K.props.controller,expsScrolled:function(){return!!K.exppanel&&K.exppanel.scrollTop>0}})}))),n.createElement(k.ItemSettingsView,{controller:this.props.controller}))},re.prototype.makeShellViewForModel=function(K){return n.createElement(p.default,{controller:this.props.controller,model:function(){return K},onDragPending:function(){},isDragCopy:function(){return!1}})},re.prototype.computeExppanelOuterStyle=function(){this.getListBottomAndUpdateLastExpressionPadding();var K=this.controller.computeMajorLayout().list,ue=K.top;return K.top>0&&!this.controller.isListVisible()&&(ue-=K.height),{position:"absolute",left:"0px",top:ue+"px",width:K.width+"px",height:K.height+"px"}},re.prototype.makeDragCopyViewForModel=function(K){return this.makeViewForModel(K,!0)},re.prototype.makeViewForModel=function(K,ue){var ie=this;ue===void 0&&(ue=!1);var Q;if(K.type==="table")Q=n.createElement(f.default,{controller:this.props.controller,model:function(){return K},onDragPending:function(pe){return ie.onDragPending(pe,K.id)},isDragCopy:function(){return ue}});else if(K.type==="folder")Q=n.createElement(y.default,{controller:this.props.controller,model:function(){return K},onDragPending:function(pe){return ie.onDragPending(pe,K.id)},isDragCopy:function(){return ue}});else if(K.type==="text")Q=n.createElement(u.default,{controller:this.props.controller,model:function(){return K},onDragPending:function(pe){return ie.onDragPending(pe,K.id)},isDragCopy:function(){return ue}});else if(K.type==="image")Q=n.createElement(h.default,{controller:this.props.controller,model:function(){return K},onDragPending:function(pe){return ie.onDragPending(pe,K.id)},isDragCopy:function(){return ue}});else{if(K.type!=="expression")return;Q=n.createElement(d.default,{controller:this.props.controller,model:function(){return K},onDragPending:function(pe){return ie.onDragPending(pe,K.id)},isDragCopy:function(){return ue}})}return Q},re.prototype.didUnmount=function(){i(document.documentElement).off("."+this.guid)},re.prototype.didMountContainer=function(K){this.node=K,i(document.documentElement).on("keydown."+this.guid,this.bindFn(this.handleKeyDown))},re.prototype.didMountExppanel=function(K){this.exppanel=K},re.prototype.getListBottomAndUpdateLastExpressionPadding=function(){var K=this.controller.getKeypadHeight(),ue=this.__listBottom||0;return this.__listBottom=K,K===0&&ue!==0&&t.isTapActive()&&this.padLastExpressionUntilTapEnd(ue),K},re.prototype.padLastExpression=function(K){i(this.node).find(".dcg-expressionitem.dcg-new-expression").css("margin-bottom",K+"px")},re.prototype.unpadLastExpression=function(){i(this.node).find(".dcg-expressionitem.dcg-new-expression").css("margin-bottom","0")},re.prototype.padLastExpressionUntilTapEnd=function(K){var ue=this;this.padLastExpression(K),i(document).on("dcg-tap.animating-bottom",function(){ue.unpadLastExpression(),i(document).off("dcg-tap.animating-bottom")})},re.prototype.handleKeyDown=function(K){if(!this.controller.inAudioTraceMode()){var ue=l.lookup(K);if(!this.controller.isInEditListMode()||K.altKey||K.ctrlKey||K.metaKey){if((!document.activeElement||!i.contains(document.body,document.activeElement))&&!i(K.target).closest(this.exppanel).length&&i.contains(document.documentElement,K.target)){var ie=this.controller.getSelectedItem();if(ie)switch(ue){case l.UP:K.preventDefault(),this.controller.dispatch({type:"select-previous-expression"});break;case l.DOWN:K.preventDefault(),this.controller.dispatch({type:"select-next-expression"});break;case l.ESCAPE:K.preventDefault(),this.controller.dispatch({type:"set-none-selected"});break;case l.RIGHT:K.preventDefault(),ie&&(ie.type==="expression"&&ie.sliderExists?(this.controller.dispatch({type:"adjust-slider-by-keyboard",id:ie.id,adjustment:"up"}),this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:ie.id}})):this.controller.dispatch({type:"move-focus-to-item",id:ie.id,where:"start"}));break;case l.TAB:K.preventDefault(),ie&&this.controller.dispatch({type:"move-focus-to-item",id:ie.id,where:"start"});break;case l.LEFT:K.preventDefault(),ie&&(ie.type==="expression"&&ie.sliderExists?(this.controller.dispatch({type:"adjust-slider-by-keyboard",id:ie.id,adjustment:"down"}),this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:ie.id}})):this.controller.dispatch({type:"move-focus-to-item",id:ie.id,where:"end"}));break;case l.BACKSPACE:K.preventDefault(),ie&&this.controller.dispatch({type:"upward-delete-selected-expression"});break;case l.DELETE:K.preventDefault(),ie&&this.controller.dispatch({type:"downward-delete-selected-expression"});break;case l.ENTER:K.wasHandled("create-expression-with-keyboard")||(K.preventDefault(),K.handle("create-expression-with-keyboard"),ie&&this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"}));break;default:if(K.metaKey||K.ctrlKey||ue===l.SHIFT||ue===l.SPACEBAR)return;ie&&(ie.type==="table"||this.controller.dispatch({type:"move-focus-to-item",id:ie.id,where:"end"}))}}}else if(ue===l.TAB){var Q=this.controller.getItemModelByIndex(0);if(!Q)return;var pe=this.controller.getFocusLocation();if(!pe)return;var ee=(pe.type==="readonly-expression"&&Q.type==="expression"||pe.type==="table-container"&&Q.type==="table"||pe.type===Q.type)&&pe.id===Q.id,ae={type:"edit-list-toggle"},le=this.controller.isFocusLocationFocused(ae);K.shiftKey&&ee?(K.preventDefault(),K.stopPropagation(),this.controller.dispatch({type:"set-focus-location",location:ae})):!K.shiftKey&&le&&(K.preventDefault(),K.stopPropagation(),this.controller.dispatch({type:"move-focus-to-item",id:Q.id,where:Q.type==="table"?"container":void 0}))}else if(ue===l.UP||ue===l.DOWN){var ie=this.controller.getSelectedItem();if(!ie)return;var me=this.controller.getListModel(),Ae=ue===l.UP?A.findPrevSelectableItem(me,ie.index):A.findNextSelectableItem(me,ie.index);if(!Ae)return;this.controller.dispatch({type:"move-focus-to-item",id:Ae.id,where:Ae.type==="table"?"container":"start"})}}},re.prototype.onDragPending=function(K,ue){var ie=this;K.preventDefault(),g.default();var Q=K.touches[0].clientY,pe=Q,ee=setTimeout(function(){i(document).off(".dragpending"),ie.onDragStart(K,ue,Q,pe)},500);i(document).on("dcg-tapmove.dragpending",function(ae){pe=ae.touches[0].clientY,Math.abs(pe-Q)>3&&(clearTimeout(ee),i(document).off(".dragpending"),ie.onDragStart(K,ue,Q,pe))}),i(document).on("dcg-tapend.dragpending",function(){clearTimeout(ee),i(document).off(".dragpending")})},re.prototype.onDragStart=function(K,ue,ie,Q){K.touches.length===1&&(K.wasHandled("dcg-longhold")||this.controller.dispatch({type:"start-dragdrop",id:ue,grabY:ie,mouseY:Q}))},re.prototype.onExppanelTapstart=function(K){K.device!=="mouse"&&i(K.target).closest(".dcg-expressionitem").length===0&&g.default()},re.prototype.onPaste=function(K){var ue=this,ie=this.controller.getGraphSettings().config,Q=M.default(K);if(Q){var pe=/^\s*https?:\/\/([a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/calculator\/./.test(Q),ee=this.controller.getSelectedItem();if(ie.pasteGraphLink&&ee&&ee.type==="folder"&&pe&&ee.title===""&&this.controller.getNumberOfItemsInFolder(ee.id)===0)return K.stopPropagation(),K.preventDefault(),void E.default(this.controller,Q,"inject",function(Be,Fe){return Fe(null,Be)});if(!ee||ee.type!=="text"&&ee.type!=="folder"){if(ie.pasteGraphLink&&pe){K.stopPropagation(),K.preventDefault();var ae=ie.pasteGraphLinkCallback?ie.pasteGraphLinkCallback:function(Be,Fe){return Fe(null,Be)};return void E.default(this.controller,Q,"set-state",ae)}if(ie.pasteTableData){var le=o.parse(Q);if(le!==void 0)return K.stopPropagation(),K.preventDefault(),this.controller.dispatch({type:"paste-table",data:le})}var me=o.getExpressions(Q);if(me!==void 0){K.stopPropagation(),K.preventDefault();var Ae=[];return void(me.length===1&&me[0].numberList?this.controller.dispatch({type:"append-number-list",latex:me[0].content}):(me.forEach(function(Be){Ae.push({type:"expression",id:ue.controller.generateId(),latex:Be.content})}),this.controller.dispatch({type:"insert-several-expressions",expressions:Ae})))}}}},re.prototype.onDrop=function(K){if(this.controller.areImagesEnabled()){var ue=K.dataTransfer&&K.dataTransfer.files;ue&&this.controller.dispatch({type:"new-images",files:ue})}},re})(n.Class);c.default=F}),P("graphing-calc/keypads/dcgview-graphing",["require","exports","tslib","dcgview"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=(function(n){function i(){return n!==null&&n.apply(this,arguments)||this}return x.__extends(i,n),i.prototype.init=function(){this.controller=this.props.controller(),this.dispatch=this.controller.dispatch},i})(t.Class);c.default=l}),P("loadcss!keypad/btn",function(){}),P("keypad/btn",["require","exports","tslib","dcgview","loadcss!./btn"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=(function(n){function i(){return n!==null&&n.apply(this,arguments)||this}return x.__extends(i,n),i.prototype.template=function(){var s=this;return t.createElement("div",{class:function(){return{"dcg-keypad-btn-container":!0,"dcg-keypad-short-btn":s.props.style()==="popover-short"}},style:function(){return{"flex-grow":s.getColSpan()}}},t.createElement("span",{role:t.const("button"),class:this.bindFn(this.getClasses),"dcg-command":this.props.command,"aria-label":this.bindFn(this.getAriaLabel),onTap:this.props.onTap},t.createElement("span",{class:t.const("dcg-keypad-btn-content")},this.children)))},i.prototype.getClasses=function(){var s={"dcg-keypad-btn":!0,"dcg-keypad-btn-active":this.isActive()},g=this.props.style();switch(g){case"default":s["dcg-btn-light-on-gray"]=!0;break;case"highlight":s["dcg-btn-dark-on-gray"]=!0;break;case"popover-short":case"popover":s["dcg-btn-light-gray"]=!0;break;case"blue":s["dcg-btn-short-blue"]=!0;break;case"tall-blue":s["dcg-btn-tall-blue"]=!0;break;default:return g}return s},i.prototype.isActive=function(){return!!this.props.active&&this.props.active()},i.prototype.getAriaLabel=function(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()},i.prototype.getColSpan=function(){return this.props.colspan?this.props.colspan():void 0},i})(t.Class);c.default=l}),P("keypad/keys",["require","exports","./btn","dcgview-helpers/static-mathquill-view","dcgview","lib/i18n"],function(S,c,x,t,l,n){function i(m,b){return m===void 0?l.const(b):l.const(m)}function s(m){return function(b,E,M){return M===void 0&&(M={}),l.createElement(x.default,{command:l.const(m.command||m.typedText||m.keys[0]),ariaLabel:l.const(m.ariaLabel||m.typedText||m.keys[0]),colspan:i(M.colspan,1),style:function(){return M.style||"default"},onTap:function(){return E({type:"keypad/type-text",text:m.typedText||m.keys[0]})}},r(function(){return m.keys[0]==="{"||m.keys[0]==="["},{true:function(){return l.createElement("span",{class:l.const("dcg-mq-math-mode"),style:l.const("font-size: 120%")},l.const(m.keys[0]),l.const(""),l.createElement("span",{style:l.const("color: #999")},l.const(m.keys[1])))},false:function(){return l.createElement("span",null,l.createElement(t.default,{latex:l.const(m.keys[0])}),l.createElement("span",{style:l.const("color: #999")},l.createElement(t.default,{latex:l.const(m.keys[1])})))}}))}}function g(m){return function(b,E,M){return M===void 0&&(M={}),l.createElement(x.default,{command:l.const(m.command||m.typedText||m.keys[1]),ariaLabel:l.const(m.ariaLabel||m.typedText||m.keys[1]),colspan:i(M.colspan,1),style:i(M.style,"default"),onTap:function(){return E({type:"keypad/type-text",text:m.typedText||m.keys[1]})}},r(function(){return m.keys[1]==="}"||m.keys[1]==="]"},{true:function(){return l.createElement("span",{class:l.const("dcg-mq-math-mode"),style:l.const("font-size: 120%")},l.createElement("span",{style:l.const("color: #999")},l.const(m.keys[0])),l.const(""),l.const(m.keys[1]))},false:function(){return l.createElement("span",null,l.createElement("span",{style:l.const("color: #999")},l.createElement(t.default,{latex:l.const(m.keys[0])})),l.createElement(t.default,{latex:l.const(m.keys[1])}))}}))}}function d(m){return function(b,E,M){return M===void 0&&(M={}),l.createElement(x.default,{command:l.const(m.command||b),ariaLabel:l.const(m.ariaLabel||b),colspan:i(M.colspan,1),style:function(){return M.style||"default"},onTap:function(){return E({type:"keypad/type-text",text:m.typedText||b})}},l.createElement(t.default,{latex:l.const(m.content||b)}))}}function u(m){return function(b,E,M){return M===void 0&&(M={}),l.createElement(x.default,{command:l.const(m.command||b),ariaLabel:l.const(m.ariaLabel||b),colspan:i(M.colspan,1),style:function(){return M.style||"default"},onTap:function(){return E({type:"keypad/type-text",text:m.typedText||b})}},l.createElement("span",{class:l.const("dcg-mq-math-mode")},l.const(m.content||b)))}}function f(m){return function(b,E,M){return M===void 0&&(M={}),l.createElement(x.default,{command:l.const(b),ariaLabel:l.const(m.ariaLabel||b),colspan:i(M.colspan,1),style:function(){return M.style||"default"},onTap:function(){return E({type:"keypad/type-text",text:b+"("})}},l.createElement(t.default,{latex:l.const(b)}))}}function y(m){return function(b,E,M){return M===void 0&&(M={}),l.createElement(x.default,{command:l.const(m.command),ariaLabel:l.const(m.ariaLabel||m.command),colspan:i(M.colspan,1),style:function(){return M.style||"default"},onTap:function(){E({type:"keypad/custom-command",command:m.command})}},l.createElement(t.default,{latex:l.const(m.content)}))}}function h(m,b,E){E===void 0&&(E={});var M=m.dispatch;return o[b](b,M,E)}function p(m){return m===void 0&&(m=1),l.createElement("div",{style:l.const("flex-grow:"+m)})}Object.defineProperty(c,"__esModule",{value:!0});var r=l.Components.IfElse,o={"{":u({ariaLabel:n.t("Left Bracket")}),"}":u({ariaLabel:n.t("Right Bracket")}),"(":d({ariaLabel:n.t("Left Parenthesis")}),")":d({ariaLabel:n.t("Right Parenthesis")}),sqrt:d({content:"\\sqrt{}",ariaLabel:n.t("Square Root")}),"/":d({content:"",ariaLabel:n.t("Divide")}),"*":d({content:"",ariaLabel:n.t("Times")}),"-":d({ariaLabel:n.t("Minus")}),"+":d({ariaLabel:n.t("Plus")}),".":d({ariaLabel:n.t("Decimal")}),ans:function(m,b,E){return E===void 0&&(E={}),l.createElement(x.default,{command:l.const(m),ariaLabel:function(){return n.t("Answer")},colspan:i(E.colspan,1),style:function(){return E.style||"default"},onTap:function(){return b({type:"keypad/type-text",text:m})}},l.const("ans"))},enter:function(m,b,E){return E===void 0&&(E={}),l.createElement(x.default,{command:l.const(m),ariaLabel:function(){return n.t("Enter")},colspan:i(E.colspan,1),style:function(){return E.style||"default"},onTap:function(){return b({type:"keypad/press-key",key:"Enter"})}},l.createElement("i",{class:l.const("dcg-icon-arrow-enter")}))},shift:function(m,b,E){return E===void 0&&(E={}),l.createElement(x.default,{command:l.const(m),ariaLabel:function(){return n.t("Shift")},colspan:i(E.colspan,1),style:function(){return E.style||"default"},active:i(E.active,!1),onTap:function(){return b({type:"keypad/shift"})}},l.createElement("i",{class:l.const("dcg-icon-shift")}))},left:function(m,b,E){return E===void 0&&(E={}),l.createElement(x.default,{command:l.const(m),ariaLabel:function(){return n.t("Left Arrow")},colspan:i(E.colspan,1),style:function(){return E.style||"default"},onTap:function(){return b({type:"keypad/press-key",key:"Left"})}},l.createElement("i",{class:l.const("dcg-icon-arrow-left")}))},right:function(m,b,E){return E===void 0&&(E={}),l.createElement(x.default,{command:l.const(m),ariaLabel:function(){return n.t("Right Arrow")},colspan:i(E.colspan,1),style:function(){return E.style||"default"},onTap:function(){return b({type:"keypad/press-key",key:"Right"})}},l.createElement("i",{class:l.const("dcg-icon-arrow-right")}))},123:function(m,b,E){return E===void 0&&(E={}),l.createElement(x.default,{command:l.const(m),ariaLabel:function(){return n.t("Toggle Numbers")},colspan:i(E.colspan,1),style:function(){return E.style||"default"},onTap:function(){return b({type:"keypad/123"})}},l.const("1 2 3"))},ABC:function(m,b,E){return E===void 0&&(E={}),l.createElement(x.default,{command:l.const(m),ariaLabel:function(){return n.t("Toggle Letters")},colspan:i(E.colspan,1),style:function(){return E.style||"default"},onTap:function(){return b({type:"keypad/abc"})}},l.const("A B C"))},backspace:function(m,b,E){return E===void 0&&(E={}),l.createElement(x.default,{command:l.const(m),ariaLabel:function(){return n.t("Backspace")},colspan:i(E.colspan,1),style:function(){return E.style||"default"},onTap:function(){return b({type:"keypad/press-key",key:"Backspace"})}},l.createElement("i",{class:l.const("dcg-icon-delete")}))},pi:d({content:"\\pi",ariaLabel:n.t("Pi")}),alpha:d({content:"\\alpha",ariaLabel:n.t("Alpha")}),beta:d({content:"\\beta",ariaLabel:n.t("Beta")}),theta:d({content:"\\theta",ariaLabel:n.t("Theta")}),tau:d({content:"\\tau",ariaLabel:n.t("Tau")}),"a^2":y({command:"a^2",content:"a^2",ariaLabel:n.t("Squared")}),"a^3":y({command:"a^3",content:"a^3",ariaLabel:n.t("Cubed")}),"x^3":y({command:"a^3",content:"x^3",ariaLabel:n.t("Cubed")}),"a^b":d({content:"a^b",typedText:"^",ariaLabel:n.t("Superscript")}),a_b:d({content:"a_b",typedText:"_",ariaLabel:n.t("Subscript")}),"a/b":d({content:"\\frac{a}{b}",typedText:"/",ariaLabel:n.t("A over B")}),"x^2":y({command:"a^2",content:"x^2",ariaLabel:n.t("Squared")}),"x^y":d({content:"x^y",typedText:"^",ariaLabel:n.t("Superscript")}),"x/y":d({content:"\\frac{x}{y}",typedText:"/",ariaLabel:n.t("A over B")}),nthroot:y({command:"nthroot",content:"\\sqrt[n]{}",ariaLabel:n.t("Nth Root")}),ythroot:y({command:"nthroot",content:"\\sqrt[y]{}",ariaLabel:n.t("Yth Root")}),sin:f({ariaLabel:n.t("Sine")}),cos:f({ariaLabel:n.t("Cosine")}),tan:f({ariaLabel:n.t("Tangent")}),sec:f({ariaLabel:n.t("Secant")}),csc:f({ariaLabel:n.t("Cosecant")}),cot:f({ariaLabel:n.t("Cotangent")}),sinh:f({ariaLabel:n.t("Hyperbolic Sine")}),cosh:f({ariaLabel:n.t("Hyperbolic Cosine")}),tanh:f({ariaLabel:n.t("Hyperbolic Tangent")}),sech:f({ariaLabel:n.t("Hyperbolic Secant")}),csch:f({ariaLabel:n.t("Hyperbolic Cosecant")}),coth:f({ariaLabel:n.t("Hyperbolic Cotangent")}),arcsin:y({command:"arcsin",content:"sin^{-1}",ariaLabel:n.t("Inverse Sine")}),arccos:y({command:"arccos",content:"cos^{-1}",ariaLabel:n.t("Inverse Cosine")}),arctan:y({command:"arctan",content:"tan^{-1}",ariaLabel:n.t("Inverse Tangent")}),arccsc:y({command:"arccsc",content:"csc^{-1}",ariaLabel:n.t("Inverse Cosecant")}),arcsec:y({command:"arcsec",content:"sec^{-1}",ariaLabel:n.t("Inverse Secant")}),arccot:y({command:"arccot",content:"cot^{-1}",ariaLabel:n.t("Inverse Cotangent")}),"|a|":d({typedText:"|",ariaLabel:n.t("Absolute Value")}),"|x|":d({typedText:"|",ariaLabel:n.t("Absolute Value")}),ln:f({ariaLabel:n.t("Natural Log")}),log:f({ariaLabel:n.t("Log")}),quantile:f({ariaLabel:n.t("Quantile")}),quartile:f({ariaLabel:n.t("Quartile")}),var:f({}),varp:f({}),nCr:f({}),loga:y({command:"loga",content:"log_a",ariaLabel:n.t("Log A")}),stdev:f({ariaLabel:n.t("Standard Deviation")}),mad:f({}),nPr:f({}),total:f({}),length:f({}),min:f({}),max:f({}),cov:f({ariaLabel:n.t("Co Variance")}),corr:f({ariaLabel:n.t("Correlation")}),spearman:f({ariaLabel:n.t("Spearman Rank Correlation")}),stats:f({ariaLabel:n.t("Summary statistics")}),polygon:f({ariaLabel:n.t("Polygon")}),mean:f({ariaLabel:n.t("Mean")}),stdevp:f({ariaLabel:n.t("Standard Deviation of Population")}),mod:f({}),"e^x":d({typedText:"e^",ariaLabel:n.t("Exponent")}),"10^n":d({content:"\\times10^{n}",typedText:"*10^",ariaLabel:n.t("Times ten to the power of")}),"a^{-1}":d({typedText:"^-1",ariaLabel:n.t("Reciprocal")}),sum:d({content:"\\sum",ariaLabel:n.t("Sum")}),prod:d({content:"\\prod",ariaLabel:n.t("Product")}),floor:f({ariaLabel:n.t("Floor")}),ceil:f({ariaLabel:n.t("Ceiling")}),round:f({ariaLabel:n.t("Round")}),abs:f({ariaLabel:n.t("Absolute Value")}),"!":d({ariaLabel:n.t("Factorial")}),"n!":d({typedText:"!",ariaLabel:n.t("Factorial")}),median:f({ariaLabel:n.t("Median")}),lcm:f({}),gcd:f({}),gcf:f({}),ddx:y({command:"ddx",content:"\\frac{d}{dx}"}),int:d({content:"\\int",ariaLabel:n.t("Integral")}),"%":d({content:"\\%",ariaLabel:n.t("Percent Of")}),exp:d({}),sign:f({}),normaldist:f({ariaLabel:n.t("Normal Distribution")}),poissondist:f({ariaLabel:n.t("Poisson Distribution")}),binomialdist:f({ariaLabel:n.t("Binomial Distribution")}),uniformdist:f({ariaLabel:n.t("Uniform Distribution")}),erf:f({ariaLabel:n.t("Error Function")}),histogram:f({ariaLabel:n.t("Histogram")}),boxplot:f({ariaLabel:n.t("Box Plot")}),dotplot:f({ariaLabel:n.t("Dot Plot")}),tscore:f({ariaLabel:n.t("T Score")}),ittest:f({ariaLabel:n.t("Independent T Test")}),ttest:f({ariaLabel:n.t("T Test")}),tdist:f({ariaLabel:n.t("Student-t Distribution")}),pdf:f({ariaLabel:n.t("Probability Density Function")}),cdf:f({ariaLabel:n.t("Cumulative Density Function")}),random:f({ariaLabel:n.t("Random Number")}),inversecdf:f({ariaLabel:n.t("Inverse CDF function")}),"A^-1":y({command:"A^-1",content:"A^{-1}",ariaLabel:n.t("Inverse")}),"A^T":y({command:"A^T",content:"A^T",ariaLabel:n.t("Transpose")}),"A^2":y({command:"A^2",content:"A^2",ariaLabel:n.t("Squared")}),det:f({ariaLabel:"Determinant"}),"A^n":d({content:"A^n",typedText:"^",ariaLabel:n.t("Exponent")}),a:d({}),b:d({}),c:d({}),d:d({}),e:d({}),f:d({}),g:d({}),h:d({}),i:d({}),j:d({}),k:d({}),l:d({}),m:d({}),n:d({}),o:d({}),p:d({}),q:d({}),r:d({}),s:d({}),t:d({}),u:d({}),v:d({}),w:d({}),x:d({}),boldX:d({content:"x",typedText:"x"}),y:d({}),boldY:d({content:"y",typedText:"y"}),z:d({}),A:d({}),B:d({}),C:d({}),D:d({}),E:d({}),F:d({}),G:d({}),H:d({}),I:d({}),J:d({}),K:d({}),L:d({}),M:d({}),N:d({}),O:d({}),P:d({}),Q:d({}),R:d({}),S:d({}),T:d({}),U:d({}),V:d({}),W:d({}),X:d({}),Y:d({}),Z:d({}),0:d({}),1:d({}),2:d({}),3:d({}),4:d({}),5:d({}),6:d({}),7:d({}),8:d({}),9:d({}),",":d({}),"=":d({}),"[":d({}),"]":d({}),"{}_left":s({keys:["{","}"]}),"{}_right":g({keys:["{","}"]}),"()_left":s({keys:["(",")"]}),"()_right":g({keys:["(",")"]}),"[]_left":s({keys:["[","]"]}),"[]_right":g({keys:["[","]"]}),",'_left":s({keys:[",",""]}),",'_right":g({keys:[",",""],typedText:"'"}),'"':d({}),"'":d({}),"~":d({}),":":d({}),">":d({}),"<":d({}),">=":d({content:"\\ge"}),"<=":d({content:"\\le"}),"!%_left":s({keys:["!","{}^{%}"]}),"!%_right":g({keys:["!","{}^{%}"],typedText:"%"}),"~:_left":s({keys:["~","{}^{:}"]}),"~:_right":g({keys:["~","{}^{:}"],typedText:":"})};c.view=h,c.spacer=p}),P("keypad/dcgview-keypad",["require","exports","tslib","dcgview"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=(function(n){function i(){return n!==null&&n.apply(this,arguments)||this}return x.__extends(i,n),i.prototype.init=function(){this.controller=this.props.controller()},i})(t.Class);c.default=l}),P("loadcss!keypad/keypad",function(){}),P("keypad/keypad",["require","exports","tslib","dcgview","./dcgview-keypad","loadcss!./keypad"],function(S,c,x,t,l){Object.defineProperty(c,"__esModule",{value:!0});var n=(function(i){function s(){return i!==null&&i.apply(this,arguments)||this}return x.__extends(s,i),s.prototype.template=function(){return t.createElement("div",{class:t.const("dcg-basic-keypad dcg-do-not-blur")},this.children)},s})(l.default);c.default=n}),P("loadcss!keypad/row",function(){}),P("keypad/row",["require","exports","tslib","dcgview","loadcss!./row"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=(function(n){function i(){return n!==null&&n.apply(this,arguments)||this}return x.__extends(i,n),i.prototype.template=function(){return t.createElement("div",{class:t.const("dcg-keypad-row")},this.children)},i})(t.Class);c.default=l}),P("graphing-calc/keypads/qwerty",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){return t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"q"),n.view(this,"w"),n.view(this,"e"),n.view(this,"r"),n.view(this,"t"),n.view(this,"y"),n.view(this,"u"),n.view(this,"i"),n.view(this,"o"),n.view(this,"p")),t.createElement(s.default,null,n.view(this,"a"),n.view(this,"s"),n.view(this,"d"),n.view(this,"f"),n.view(this,"g"),n.view(this,"h"),n.view(this,"j"),n.view(this,"k"),n.view(this,"l"),n.view(this,"theta")),t.createElement(s.default,null,n.view(this,"shift",{colspan:1.364,style:"highlight"}),n.spacer(.136),n.view(this,"z"),n.view(this,"x"),n.view(this,"c"),n.view(this,"v"),n.view(this,"b"),n.view(this,"n"),n.view(this,"m"),n.spacer(.136),n.view(this,"backspace",{colspan:1.364,style:"highlight"})),t.createElement(s.default,null,n.view(this,"123",{colspan:1.818,style:"highlight"}),n.spacer(.182),n.view(this,"a_b"),n.view(this,"!%_left"),n.view(this,"[]_left"),n.view(this,"{}_left"),n.view(this,"~:_left"),n.view(this,",'_left"),n.spacer(.182),n.view(this,"enter",{colspan:1.818,style:"blue"})))},u})(l.default);c.default=g}),P("graphing-calc/keypads/qwerty-capital",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){return t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"Q"),n.view(this,"W"),n.view(this,"E"),n.view(this,"R"),n.view(this,"T"),n.view(this,"Y"),n.view(this,"U"),n.view(this,"I"),n.view(this,"O"),n.view(this,"P")),t.createElement(s.default,null,n.view(this,"A"),n.view(this,"S"),n.view(this,"D"),n.view(this,"F"),n.view(this,"G"),n.view(this,"H"),n.view(this,"J"),n.view(this,"K"),n.view(this,"L"),n.view(this,"tau")),t.createElement(s.default,null,n.view(this,"shift",{colspan:1.364,active:!0,style:"highlight"}),n.spacer(.136),n.view(this,"Z"),n.view(this,"X"),n.view(this,"C"),n.view(this,"V"),n.view(this,"B"),n.view(this,"N"),n.view(this,"M"),n.spacer(.136),n.view(this,"backspace",{colspan:1.364,style:"highlight"})),t.createElement(s.default,null,n.view(this,"123",{colspan:1.818,style:"highlight"}),n.spacer(.182),n.view(this,"a^b"),n.view(this,"!%_right"),n.view(this,"[]_right"),n.view(this,"{}_right"),n.view(this,"~:_right"),n.view(this,",'_right"),n.spacer(.182),n.view(this,"enter",{colspan:1.818,style:"blue"})))},u})(l.default);c.default=g}),P("graphing-calc/keypads/numbers",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row","keypad/btn"],function(S,c,x,t,l,n,i,s,g){Object.defineProperty(c,"__esModule",{value:!0});var d=(function(u){function f(){return u!==null&&u.apply(this,arguments)||this}return x.__extends(f,u),f.prototype.template=function(){var y=this;return t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"boldX"),n.view(this,"boldY"),n.view(this,"a^2"),n.view(this,"a^b"),n.spacer(.5),n.view(this,"7",{style:"highlight"}),n.view(this,"8",{style:"highlight"}),n.view(this,"9",{style:"highlight"}),n.view(this,"/"),n.spacer(.5),t.createElement(g.default,{command:this.const("functions"),ariaLabel:function(){return y.controller.t("Functions")},colspan:this.const(2),style:this.const("highlight"),active:function(){return y.controller.isKeypadFunctionsPopoverOpen()},onTap:function(){return y.dispatch({type:"keypad/functions"})}},this.bindFn(this.getFuncsBtnText))),t.createElement(s.default,null,n.view(this,"("),n.view(this,")"),n.view(this,"<"),n.view(this,">"),n.spacer(.5),n.view(this,"4",{style:"highlight"}),n.view(this,"5",{style:"highlight"}),n.view(this,"6",{style:"highlight"}),n.view(this,"*"),n.spacer(.5),n.view(this,"left",{style:"highlight"}),n.view(this,"right",{style:"highlight"})),t.createElement(s.default,null,n.view(this,"|a|"),n.view(this,","),n.view(this,"<="),n.view(this,">="),n.spacer(.5),n.view(this,"1",{style:"highlight"}),n.view(this,"2",{style:"highlight"}),n.view(this,"3",{style:"highlight"}),n.view(this,"-"),n.spacer(1),n.view(this,"backspace",{colspan:1.5,style:"highlight"})),t.createElement(s.default,null,n.view(this,"ABC",{colspan:2,style:"highlight"}),n.view(this,"sqrt"),n.view(this,"pi"),n.spacer(.5),n.view(this,"0",{style:"highlight"}),n.view(this,".",{style:"highlight"}),n.view(this,"="),n.view(this,"+"),n.spacer(.5),n.view(this,"enter",{colspan:2,style:"blue"})))},f.prototype.getFuncsBtnText=function(){return this.controller.isNarrow()?this.controller.t("funcs"):this.controller.t("functions")},f})(l.default);c.default=d}),P("graphing-calc/keypads/letters",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){return t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"a"),n.view(this,"b"),n.view(this,"c"),n.view(this,"d"),n.view(this,"e"),n.view(this,"f"),n.view(this,"g"),n.view(this,"h"),n.view(this,"i"),n.view(this,"j")),t.createElement(s.default,null,n.view(this,"k"),n.view(this,"l"),n.view(this,"m"),n.view(this,"n"),n.view(this,"o"),n.view(this,"p"),n.view(this,"q"),n.view(this,"r"),n.view(this,"s"),n.view(this,"t")),t.createElement(s.default,null,n.view(this,"shift",{style:"highlight"}),n.view(this,"u"),n.view(this,"v"),n.view(this,"w"),n.view(this,"x"),n.view(this,"y"),n.view(this,"z"),n.view(this,"theta"),n.view(this,"backspace",{colspan:2,style:"highlight"})),t.createElement(s.default,null,n.view(this,"123",{colspan:2,style:"highlight"}),n.view(this,"a_b"),n.view(this,"!%_left"),n.view(this,"[]_left"),n.view(this,"{}_left"),n.view(this,"~:_left"),n.view(this,",'_left"),n.view(this,"enter",{colspan:2,style:"blue"})))},u})(l.default);c.default=g}),P("graphing-calc/keypads/letters-capital",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){return t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"A"),n.view(this,"B"),n.view(this,"C"),n.view(this,"D"),n.view(this,"E"),n.view(this,"F"),n.view(this,"G"),n.view(this,"H"),n.view(this,"I"),n.view(this,"J")),t.createElement(s.default,null,n.view(this,"K"),n.view(this,"L"),n.view(this,"M"),n.view(this,"N"),n.view(this,"O"),n.view(this,"P"),n.view(this,"Q"),n.view(this,"R"),n.view(this,"S"),n.view(this,"T")),t.createElement(s.default,null,n.view(this,"shift",{style:"highlight"}),n.view(this,"U"),n.view(this,"V"),n.view(this,"W"),n.view(this,"X"),n.view(this,"Y"),n.view(this,"Z"),n.view(this,"tau"),n.view(this,"backspace",{colspan:2,style:"highlight"})),t.createElement(s.default,null,n.view(this,"123",{colspan:2,style:"highlight"}),n.view(this,"a^b"),n.view(this,"!%_right"),n.view(this,"[]_right"),n.view(this,"{}_right"),n.view(this,"~:_right"),n.view(this,",'_right"),n.view(this,"enter",{colspan:2,style:"blue"})))},u})(l.default);c.default=g}),P("graphing-calc/keypads/trig",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=t.Components.If,g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){var f=this;return t.createElement(i.default,{controller:this.props.controller},this.b("sin"),this.b("arcsin"),this.b("sinh"),this.b("cos"),this.b("arccos"),this.b("cosh"),this.b("tan"),this.b("arctan"),this.b("tanh"),t.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return f.b("csc")}),t.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return f.b("arccsc")}),t.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return f.b("csch")}),t.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return f.b("sec")}),t.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return f.b("arcsec")}),t.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return f.b("sech")}),t.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return f.b("cot")}),t.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return f.b("arccot")}),t.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return f.b("coth")}))},u.prototype.b=function(f){return n.view(this,f,{style:"popover"})},u.prototype.isNotRestricted=function(){return!this.controller.areFunctionsRestricted()},u})(l.default);c.default=g}),P("graphing-calc/keypads/stats",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=t.Components.If,g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){var f=this;return t.createElement(i.default,{controller:this.props.controller},this.b("total"),this.b("length"),this.b("mean"),this.b("median"),this.b("min"),this.b("max"),this.b("quartile"),this.b("quantile"),this.b("stdev"),this.b("stdevp"),t.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return f.b("mad")}),this.b("var"),t.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return f.b("cov")}),this.b("corr"),this.b("spearman"),this.b("nCr"),this.b("nPr"),this.b("stats"),t.createElement(s,{predicate:this.bindFn(this.areDistributionsEnabled)},function(){return f.b("ttest")}),t.createElement(s,{predicate:this.bindFn(this.areDistributionsEnabled)},function(){return f.b("tscore")}),t.createElement(s,{predicate:this.bindFn(this.areDistributionsEnabled)},function(){return f.b("ittest")}))},u.prototype.b=function(f){return n.view(this,f,{style:"popover-short"})},u.prototype.isNotRestricted=function(){return!this.controller.areFunctionsRestricted()},u.prototype.areDistributionsEnabled=function(){return this.controller.areDistributionsEnabled()},u})(l.default);c.default=g}),P("graphing-calc/keypads/misc",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=(function(g){function d(){return g!==null&&g.apply(this,arguments)||this}return x.__extends(d,g),d.prototype.template=function(){return t.createElement(i.default,{controller:this.props.controller},this.b("lcm"),this.b("gcd"),this.b("mod"),this.b("ceil"),this.b("floor"),this.b("round"),this.b("sign"),this.b("%"),this.b("exp"),this.b("ln"),this.b("nthroot"),this.b("polygon"),this.b("log"),this.b("loga"),this.b("ddx"),this.b("int"),this.b("sum"),this.b("prod"))},d.prototype.b=function(u){return n.view(this,u,{style:"popover"})},d})(l.default);c.default=s}),P("graphing-calc/keypads/distributions",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=(function(g){function d(){return g!==null&&g.apply(this,arguments)||this}return x.__extends(d,g),d.prototype.template=function(){var u=this;return t.createElement(i.default,{controller:this.props.controller},t.createElement("div",{class:t.const("dcg-section-heading")},function(){return u.controller.t("Visualizations")},t.createElement("a",{href:t.const("https://support.desmos.com/hc/en-us/articles/360022405991"),target:t.const("_blank"),"aria-label":function(){return u.controller.t("Visualizations")}},t.createElement("i",{class:t.const("dcg-icon-question-sign")}))),this.b("histogram"),this.b("dotplot"),this.b("boxplot"),t.createElement("div",{class:t.const("dcg-section-heading")},function(){return u.controller.t("Distributions")},t.createElement("a",{href:t.const("https://support.desmos.com/hc/en-us/articles/360022401451#distributions"),target:t.const("_blank"),"aria-label":function(){return u.controller.t("Distributions")}},t.createElement("i",{class:t.const("dcg-icon-question-sign")}))),this.b("normaldist"),this.b("tdist"),this.b("poissondist"),this.b("binomialdist"),this.b("uniformdist"),t.createElement("div",{class:t.const("dcg-popover-section-separator")}),this.b("pdf"),this.b("cdf"),this.b("inversecdf"),this.b("random"))},d.prototype.b=function(u){return n.view(this,u,{style:"popover-short"})},d})(l.default);c.default=s}),P("loadcss!graphing-calc/keypads/functions-popover",function(){}),P("graphing-calc/keypads/functions-popover",["require","exports","tslib","dcgview","./dcgview-graphing","./trig","./stats","./misc","./distributions","loadcss!./functions-popover"],function(S,c,x,t,l,n,i,s,g){Object.defineProperty(c,"__esModule",{value:!0});var d=t.Components,u=d.SwitchUnion,f=d.If,y=(function(h){function p(){return h!==null&&h.apply(this,arguments)||this}return x.__extends(p,h),p.prototype.template=function(){var r=this;return t.createElement("div",{class:t.const("dcg-functions-popover dcg-popover dcg-top")},t.createElement("div",{class:t.const("dcg-popover-interior")},t.createElement("div",{class:t.const("dcg-popover-header")},t.createElement("span",{role:t.const("button"),"dcg-command":t.const("trigTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":r.controller.getKeypadFunctionsTab()==="trig"}},onTap:function(){r.dispatch({type:"keypad/set-functions-tab",tab:"trig"})}},function(){return r.controller.t("trig")}),t.createElement("span",{role:t.const("button"),"dcg-command":t.const("statsTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":r.controller.getKeypadFunctionsTab()==="stats"}},onTap:function(){r.dispatch({type:"keypad/set-functions-tab",tab:"stats"})}},function(){return r.controller.t("stats")}),t.createElement(f,{predicate:function(){return r.controller.areDistributionsEnabled()}},function(){return t.createElement("span",{role:t.const("button"),"dcg-command":t.const("distTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":r.controller.getKeypadFunctionsTab()==="dist"}},onTap:function(){r.dispatch({type:"keypad/set-functions-tab",tab:"dist"})}},function(){return r.controller.t("dist")})}),t.createElement("span",{role:t.const("button"),"dcg-command":t.const("miscTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":r.controller.getKeypadFunctionsTab()==="misc"}},onTap:function(){r.dispatch({type:"keypad/set-functions-tab",tab:"misc"})}},function(){return r.controller.t("misc")})),t.createElement("div",{class:t.const("dcg-interior-buttons")},u(function(){return r.controller.getKeypadFunctionsTab()},{trig:function(){return t.createElement(n.default,{controller:r.props.controller})},stats:function(){return t.createElement(i.default,{controller:r.props.controller})},misc:function(){return t.createElement(s.default,{controller:r.props.controller})},dist:function(){return t.createElement(g.default,{controller:r.props.controller})}}))),t.createElement("div",{class:t.const("dcg-arrow")}))},p})(l.default);c.default=y}),P("loadcss!graphing-calc/keypads/graphing-keypad-container",function(){}),P("graphing-calc/keypads/main",["require","exports","tslib","dcgview","./dcgview-graphing","./qwerty","./qwerty-capital","./numbers","./letters","./letters-capital","./functions-popover","jquery","underscore","../../lib/tooltip","loadcss!./graphing-keypad-container"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h){Object.defineProperty(c,"__esModule",{value:!0});var p=t.Components,r=p.SwitchUnion,o=p.If,m=(function(b){function E(){return b!==null&&b.apply(this,arguments)||this}return x.__extends(E,b),E.prototype.template=function(){var M=this;return t.createElement("div",{class:t.const("dcg-keypad"),role:t.const("complementary"),"aria-label":t.const("Keypad")},t.createElement("div",{class:t.const("dcg-keys-container"),style:this.bindFn(this.computeStyles),didMount:this.bindFn(this.didMountContainer)},t.createElement("div",{class:t.const("dcg-keys-background dcg-do-not-blur"),style:function(){return{background:M.controller.getPillboxBackgroundColor()}}},t.createElement("div",{class:t.const("dcg-keys")},r(function(){return M.controller.getKeypadLayout()},{letters:function(){return t.createElement(n.default,{controller:M.props.controller})},capitalLetters:function(){return t.createElement(i.default,{controller:M.props.controller})},mainNumbers:function(){return t.createElement(s.default,{controller:M.props.controller})},noQwertyLetters:function(){return t.createElement(g.default,{controller:M.props.controller})},noQwertyCapitalLetters:function(){return t.createElement(d.default,{controller:M.props.controller})}}),t.createElement(o,{predicate:function(){return M.controller.isKeypadFunctionsPopoverOpen()}},function(){return t.createElement(u.default,{controller:M.props.controller})})),t.createElement(o,{predicate:this.bindFn(this.isHideKeypadButtonVisible)},function(){return t.createElement("div",{class:t.const("dcg-minimize-keypad-container")},t.createElement(h.Tooltip,{tooltip:function(){return M.controller.t("Hide Keypad")},gravity:M.const("ne"),offset:M.const({left:6})},t.createElement("div",{role:t.const("button"),"aria-label":function(){return M.controller.t("Hide Keypad")},class:t.const("dcg-minimize-keypad"),style:function(){return{"border-bottom-color":M.controller.getPillboxBackgroundColor(),background:M.controller.getPillboxBackgroundColor()}},onTap:function(){M.controller.dispatch({type:"keypad/set-minimized",minimized:!0})}},t.createElement("i",{class:t.const("dcg-icon-keyboard")}),t.createElement("i",{class:t.const("dcg-icon-caret-down")}))))}))),t.createElement(o,{predicate:this.bindFn(this.isShowKeypadButtonVisible)},function(){return t.createElement("div",{class:t.const("dcg-show-keypad-container")},t.createElement(h.Tooltip,{tooltip:function(){return M.controller.t("Show Keypad")},gravity:M.const("ne")},t.createElement("div",{role:t.const("button"),"aria-label":function(){return M.controller.t("Show Keypad")},class:t.const("dcg-btn-flat-gray dcg-show-keypad dcg-do-not-blur"),style:function(){return{background:M.controller.getPillboxBackgroundColor()}},onTap:function(){M.controller.dispatch({type:"keypad/set-minimized",minimized:!1})}},t.createElement("i",{class:t.const("dcg-icon-keyboard")}),t.createElement("i",{class:t.const("dcg-icon-caret-up dcg-do-not-blur")}))))}))},E.prototype.didMountContainer=function(M){this.containerElt=M},E.prototype.isShowKeypadButtonVisible=function(){return!this.controller.isAuthorIDE()&&this.controller.getBrailleMode()==="none"&&!this.controller.isKeypadOpen()&&!this.controller.isNarrow()&&!this.controller.isInEditListMode()&&this.controller.isListVisible()},E.prototype.isHideKeypadButtonVisible=function(){return this.controller.getBrailleMode()==="none"&&this.controller.isKeypadOpen()&&!this.controller.isNarrow()},E.prototype.didMount=function(){this.updatePopoverPosition()},E.prototype.didUpdate=function(){this.updatePopoverPosition()},E.prototype.computeStyles=function(){var M={};return this.controller.isNarrow()||(M.transition="transform .3s, opacity .3s"),this.controller.isKeypadOpen()||(M.opacity="0",M.transform="translate3d(0, 255px, 0)"),M},E.prototype.updatePopoverPosition=function(){if(!this.controller.isKeypadFunctionsPopoverOpen())return void(this.__popoverCache=void 0);var M=this.controller.computeMajorLayout(),D={keypadTop:M.keypad.top,keypadWidth:M.keypad.width,keypadHeight:M.keypad.height,showToLeft:M.grapher.height<525};if(!y.isEqual(D,this.__popoverCache)){this.__popoverCache=D;var A=f(this.containerElt),v=A.find("[dcg-command=functions]"),k=A.find(".dcg-functions-popover"),J=A.find(".dcg-arrow");if(D.showToLeft){k.removeClass("dcg-top").addClass("dcg-left");var X=D.keypadHeight-(v.offset().top-A.offset().top),te=X-v.outerHeight()/2-2-10;J.css({left:"auto",bottom:te})}else k.removeClass("dcg-left").addClass("dcg-top"),J.css({left:k.width()-v.width()/2,bottom:"auto"})}},E})(l.default);c.default=m}),P("loadcss!pillboxes",function(){}),P("main/graphpaper-branding-view",["require","exports","tslib","dcgview","loadcss!pillboxes"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=t.Components.SwitchUnion,n=(function(i){function s(){return i!==null&&i.apply(this,arguments)||this}return x.__extends(s,i),s.prototype.template=function(){var g=this;return this.controller=this.props.controller(),l(function(){return g.controller.getBrandingMode()},{"static-edit-link":function(){return t.createElement("div",{class:t.const("dcg-graphpaper-branding")},t.createElement("a",{href:function(){return g.controller.getEditLink()},target:t.const("_blank")},t.createElement("span",{class:t.const("dcg-powered-by"),"aria-label":function(){return g.controller.t("Edit graph on Desmos")}},function(){return g.controller.t("edit graph on")}),t.createElement("i",{class:t.const("dcg-icon-desmos")})))},"edit-link":function(){return t.createElement("div",{class:t.const("dcg-graphpaper-branding")},t.createElement("span",{class:t.const("dcg-edit-branding"),onTap:function(){return g.controller.dispatch({type:"open-on-web"})}},t.createElement("span",{class:t.const("dcg-powered-by"),"aria-label":function(){return g.controller.t("Edit graph on Desmos")}},function(){return g.controller.t("edit graph on")}),t.createElement("i",{class:t.const("dcg-icon-desmos")})))},"powered-by":function(){return t.createElement("div",{class:t.const("dcg-graphpaper-branding dcg-unclickable")},t.createElement("span",{class:t.const("dcg-powered-by"),"aria-label":function(){return g.controller.t("Powered by Desmos")}},function(){return g.controller.t("powered by")}),t.createElement("i",{class:t.const("dcg-icon-desmos")}))}})},s})(t.Class);c.default=n}),P("loadcss!main/settings-view",function(){}),P("main/settings-view",["require","exports","tslib","keys","scroll_helpers","lib/tooltip","dcgview","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","jquery","core/graphing-calc/json/graph-settings","core/math/evaluate-single-expression","graphing/viewport","dcgview-helpers/checkbox","main/manage-focus-helper","../dcgview-helpers/mathquill-braille-wrapper","loadcss!./settings-view"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r){Object.defineProperty(c,"__esModule",{value:!0});var o=i.Components,m=o.Input,b=o.If,E=(function(D){function A(){return D!==null&&D.apply(this,arguments)||this}return x.__extends(A,D),A.prototype.template=function(){var v=this;return i.createElement(r.default,{latex:function(){return v.props.parent().getLimitLatex(v.props.limit())},controller:this.props.controller,ariaLabel:function(){return v.props.ariaLabel()},onBrailleInput:function(k){return v.props.parent().setLimitLatex(v.props.limit(),k)},onBrailleFocusedChanged:function(k){return v.props.parent().onFocusedChanged(v.props.limit(),k)},brailleShouldFocus:function(){return v.props.parent().getFocusedLimit()===v.props.limit()},hasError:function(){return v.props.parent().isLimitInvalid(v.props.limit())},onExpressionSizeExceeded:function(){},dataDCGLimit:function(){return v.props.limit()}},i.createElement(g.default,{isFocused:function(){return v.props.parent().getFocusedLimit()===v.props.limit()},latex:function(){return v.props.parent().getLimitLatex(v.props.limit())},capExpressionSize:function(){return v.props.parent().getCapExpressionSize()},config:this.const({}),getAriaLabel:function(){return v.props.ariaLabel()},getAriaPostLabel:this.const(""),onUserChangedLatex:function(k){return v.props.parent().setLimitLatex(v.props.limit(),k)},onFocusedChanged:function(k){return v.props.parent().onFocusedChanged(v.props.limit(),k)},hasError:this.const(!1),selectOnFocus:this.const(!0),needsSystemKeypad:function(){return v.props.needsSystemKeypad()}},i.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-math-input":!0,"dcg-invalid":v.props.parent().isLimitInvalid(v.props.limit()),"dcg-focus":v.props.parent().getFocusedLimit()===v.props.limit()}},"data-dcg-limit":function(){return v.props.limit()}})))},A})(i.Class),M=(function(D){function A(){return D!==null&&D.apply(this,arguments)||this}return x.__extends(A,D),A.prototype.template=function(){var v=this;return this.controller=this.props.controller(),i.createElement("div",{class:i.const("dcg-settings-view-container")},i.createElement(n.Tooltip,{tooltip:function(){return v.controller.t("Graph Settings")},gravity:this.const("w")},i.createElement("div",{class:i.const("dcg-btn-flat-gray dcg-settings-pillbox dcg-action-settings"),role:i.const("button"),tabindex:i.const("0"),"aria-haspopup":i.const("true"),"aria-expanded":function(){return v.controller.isGraphSettingsOpen()},"aria-label":function(){return v.controller.t("Graph Settings")},onTap:this.bindFn(this.onTapSettingsButton),manageFocus:this.const(p.manageFocusHelper({controller:this.controller,location:{type:"settings",location:"icon"}})),style:function(){return{background:v.controller.getPillboxBackgroundColor()}}},i.createElement("i",{class:i.const("dcg-icon-wrench"),"aria-hidden":i.const("true")}))),i.createElement(b,{predicate:function(){return v.controller.isGraphSettingsOpen()}},function(){return i.createElement("div",{class:i.const("dcg-settings-container dcg-left dcg-popover dcg-constrained-height-popover"),style:v.bindFn(v.getContainerStyle),didMount:v.bindFn(v.didMountContainer),didUnmount:v.bindFn(v.didUnmountContainer)},i.createElement("div",{class:i.const("dcg-popover-interior"),role:i.const("complementary"),"aria-label":i.const("Graph Settings")},i.createElement("div",{class:i.const("dcg-visual-settings")},i.createElement("div",{class:function(){return{"dcg-modern-btn":!0,"dcg-action-projectormode":!0,"dcg-active":v.getProjectorMode()}},role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return v.controller.t("Projector Mode")},"aria-pressed":v.bindFn(v.getProjectorMode),onTap:v.bindFn(v.toggleProjectorMode),manageFocus:v.const(p.manageFocusHelper({controller:v.controller,location:{type:"settings",location:"projector-mode"}}))},function(){return v.controller.t("Projector Mode")}),i.createElement(h.Checkbox,{ariaLabel:function(){return v.controller.t("Reverse Contrast")},onChange:v.bindFn(v.toggleInvertedColors),checked:function(){return v.controller.getInvertedColors()},green:v.const(!0)},function(){return v.controller.t("Reverse Contrast")})),i.createElement("div",{class:i.const("dcg-braille-container")},i.createElement("div",{class:i.const("dcg-group-title")},i.const("Braille Mode")),i.createElement("div",{role:i.const("group"),"aria-label":function(){return v.controller.t("Braille Mode")},class:i.const("dcg-braille-options-buttons")},i.createElement("span",{class:function(){return{"dcg-modern-btn":!0,"dcg-braille-option":!0,"dcg-active":v.controller.getBrailleMode()==="none"}},role:i.const("button"),onTap:function(){return v.controller.dispatch({type:"set-braille-mode",mode:"none"})},tabindex:i.const(0),"aria-label":function(){return v.controller.t("Off")},"aria-pressed":function(){return v.controller.getBrailleMode()==="none"}},function(){return v.controller.t("Off")}),i.createElement("span",{class:function(){return{"dcg-modern-btn":!0,"dcg-braille-option":!0,"dcg-active":v.controller.getBrailleMode()==="nemeth"}},role:i.const("button"),onTap:function(){return v.controller.dispatch({type:"set-braille-mode",mode:"nemeth"})},tabindex:i.const(0),"aria-label":function(){return v.controller.t("Nemeth")},"aria-pressed":function(){return v.controller.getBrailleMode()==="nemeth"}},function(){return v.controller.t("Nemeth")}),i.createElement("span",{class:function(){return{"dcg-modern-btn":!0,"dcg-braille-option":!0,"dcg-active":v.controller.getBrailleMode()==="ueb"}},role:i.const("button"),onTap:function(){return v.controller.dispatch({type:"set-braille-mode",mode:"ueb"})},tabindex:i.const(0),"aria-label":function(){return v.controller.t("UEB")},"aria-pressed":function(){return v.controller.getBrailleMode()==="ueb"}},function(){return v.controller.t("UEB")})),i.createElement(b,{predicate:function(){return v.controller.getBrailleMode()!=="none"}},function(){return i.createElement("div",{class:i.const("dcg-checkbox-title dcg-six-key-checkbox")},i.createElement(h.Checkbox,{ariaLabel:function(){return v.controller.t("Six Key Braille Input")},onChange:function(k){return v.controller.dispatch({type:"set-six-key-input",useSixKeyInput:k})},checked:function(){return v.controller.getSixKeyInput()},green:v.const(!0)},function(){return v.controller.t("Six Key Braille Input")}),i.createElement("a",{href:i.const("https://www.desmos.com/accessibility#braille"),class:i.const("dcg-six-key-info"),target:i.const("_blank")},i.createElement("i",{class:i.const("dcg-icon-question-sign")})))})),i.createElement("div",{class:i.const("dcg-top-section-flex dcg-grid-settings-container")},i.createElement("div",{class:i.const("dcg-grid-settings")},i.createElement(h.Checkbox,{ariaLabel:function(){return v.controller.t("Grid")},onChange:v.bindFn(v.toggleGrid),checked:v.bindFn(v.getShowGrid),green:v.const(!0)},function(){return v.controller.t("Grid")}),i.createElement(b,{predicate:v.bindFn(v.getShowGrid)},function(){return i.createElement("div",{class:i.const("dcg-circle-icon-group dcg-grid-group")},i.createElement("div",{class:function(){return{"dcg-circle-icon":!0,"dcg-action-cartesian":!0,"dcg-active":!v.getPolarMode()}},role:i.const("button"),tabindex:i.const("0"),ariaPressed:function(){return!v.getPolarMode()},"aria-label":function(){return v.controller.t("Cartesian Grid")},onTap:v.bindFn(v.setCartesianMode)}),i.const(""),i.createElement("div",{class:function(){return{"dcg-circle-icon":!0,"dcg-action-polar":!0,"dcg-active":v.getPolarMode()}},role:i.const("button"),tabindex:i.const("0"),ariaPressed:function(){return v.getPolarMode()},"aria-label":function(){return v.controller.t("Polar Grid")},onTap:v.bindFn(v.setPolarMode)}))}),i.createElement(h.Checkbox,{ariaLabel:function(){return v.controller.t("Arrows")},onChange:v.bindFn(v.toggleArrows),checked:function(){return v.getAxisArrowMode()!==u.AxisArrowModes.NONE},green:v.const(!0)},function(){return v.controller.t("Arrows")}),i.createElement(b,{predicate:function(){return v.getAxisArrowMode()!==u.AxisArrowModes.NONE}},function(){return i.createElement("div",{class:i.const("dcg-circle-icon-group dcg-arrow-group")},i.createElement("div",{role:i.const("button"),tabindex:i.const("0"),class:function(){return{"dcg-circle-icon":!0,"dcg-arrows":!0,"dcg-active":v.getAxisArrowMode()===u.AxisArrowModes.BOTH}},"dcg-arrows":i.const("BOTH"),"aria-label":function(){return v.controller.t("Show Both")},"aria-pressed":function(){return v.getAxisArrowMode()===u.AxisArrowModes.BOTH},onTap:function(){return v.setAxisArrowMode(u.AxisArrowModes.BOTH)}},i.createElement("i",{class:i.const("dcg-icon-arrows-two")})),i.const(""),i.createElement("div",{role:i.const("button"),tabindex:i.const("0"),class:function(){return{"dcg-circle-icon":!0,"dcg-arrows":!0,"dcg-active":v.getAxisArrowMode()===u.AxisArrowModes.POSITIVE}},"dcg-arrows":i.const("POSITIVE"),"aria-label":function(){return v.controller.t("Show Positive")},"aria-pressed":function(){return v.getAxisArrowMode()===u.AxisArrowModes.POSITIVE},onTap:function(){return v.setAxisArrowMode(u.AxisArrowModes.POSITIVE)}},i.createElement("i",{class:i.const("dcg-icon-arrows-one")})))})),i.createElement("div",{class:i.const("dcg-top-checkboxes-container")},i.createElement(h.Checkbox,{ariaLabel:function(){return v.controller.t("Axis Numbers")},onChange:v.bindFn(v.toggleAxisNumbers),checked:v.bindFn(v.getAxisNumbers),small:v.const(!0),green:v.const(!0)},function(){return v.controller.t("Axis Numbers")}),i.createElement(b,{predicate:function(){return v.getShowGrid()&&!v.getPolarMode()}},function(){return i.createElement(h.Checkbox,{ariaLabel:function(){return v.controller.t("Minor Gridlines")},onChange:v.bindFn(v.toggleMinorGridlines),checked:v.bindFn(v.getMinorGridlines),small:v.const(!0),green:v.const(!0)},function(){return v.controller.t("Minor Gridlines")})}),i.createElement(b,{predicate:function(){return v.controller.canUseAdvancedStyling()&&!v.getPolarMode()}},function(){return i.createElement(h.Checkbox,{checked:function(){return v.controller.getGraphSettings().restrictGridToFirstQuadrant},ariaLabel:v.const("One Quadrant"),onChange:function(k){return v.controller.dispatch({type:"set-graph-settings",restrictGridToFirstQuadrant:k})},small:v.const(!0),green:v.const(!0)},i.const("One Quadrant"))}),i.createElement(b,{predicate:function(){return!v.getSquareAxes()}},function(){return i.createElement("div",{role:i.const("button"),tabindex:i.const("0"),class:i.const("dcg-action-zoom-square dcg-btn-light-gray"),onTap:v.bindFn(v.zoomSquare)},function(){return v.controller.t("Zoom Square")})}))),i.createElement("div",{class:i.const("dcg-axes-settings-container")},i.createElement("div",{class:i.const("dcg-checkbox-title dcg-x-axis-title")},i.createElement(h.Checkbox,{ariaLabel:function(){return v.controller.t("X-Axis")},onChange:v.bindFn(v.toggleXAxis),checked:v.bindFn(v.getShowXAxis),green:v.const(!0)},function(){return v.controller.t("X-Axis")}),i.createElement(m,{class:v.const("dcg-axis-label dcg-x-axis-label"),placeholder:function(){return v.controller.t("add a label")},"aria-label":function(){return v.controller.t("add x-axis label")},disabled:function(){return!v.getShowXAxis()||void 0},"aria-disabled":function(){return!v.getShowXAxis()||void 0},onInput:v.bindFn(v.onXAxisLabelInput),value:v.bindFn(v.getXAxisLabel)})),i.createElement("div",{class:i.const("dcg-editable-mathquill-container dcg-x-axis-options")},i.createElement(E,{limit:v.const("xmin"),ariaLabel:function(){return v.controller.t("X Axis Minimum: ")},needsSystemKeypad:function(){return!v.controller.isKeypadEnabled()},parent:v.const(v),controller:v.props.controller}),i.createElement(s.default,{latex:v.const("\\le x\\le")},i.createElement("span",{class:i.const("dcg-interval-interior")})),i.createElement(E,{limit:v.const("xmax"),ariaLabel:function(){return v.controller.t("X Axis Maximum: ")},needsSystemKeypad:function(){return!v.controller.isKeypadEnabled()},parent:v.const(v),controller:v.props.controller}),i.createElement(b,{predicate:function(){return!v.getPolarMode()}},function(){return i.createElement("span",{class:i.const("dcg-step-container")},i.createElement("span",{class:i.const("dcg-step-label"),"aria-hidden":i.const("true")},function(){return v.controller.t("Step:")}),i.createElement(E,{limit:v.const("xstep"),ariaLabel:function(){return v.controller.t("X Axis Step Size: ")},needsSystemKeypad:function(){return!v.controller.isKeypadEnabled()},parent:v.const(v),controller:v.props.controller}))})),i.createElement("div",{class:i.const("dcg-checkbox-title dcg-y-axis-title")},i.createElement(h.Checkbox,{ariaLabel:function(){return v.controller.t("Y-Axis")},onChange:v.bindFn(v.toggleYAxis),checked:v.bindFn(v.getShowYAxis),green:v.const(!0)},function(){return v.controller.t("Y-Axis")}),i.createElement(m,{class:v.const("dcg-axis-label dcg-y-axis-label"),placeholder:function(){return v.controller.t("add a label")},"aria-label":function(){return v.controller.t("add y-axis label")},disabled:function(){return!v.getShowYAxis()||void 0},"aria-disabled":function(){return!v.getShowYAxis()||void 0},onInput:v.bindFn(v.onYAxisLabelInput),value:v.bindFn(v.getYAxisLabel)})),i.createElement("div",{class:i.const("dcg-editable-mathquill-container dcg-y-axis-options")},i.createElement(E,{limit:v.const("ymin"),ariaLabel:function(){return v.controller.t("Y Axis Minimum: ")},needsSystemKeypad:function(){return!v.controller.isKeypadEnabled()},parent:v.const(v),controller:v.props.controller}),i.createElement(s.default,{latex:v.const("\\le y\\le")},i.createElement("span",{class:i.const("dcg-interval-interior")})),i.createElement(E,{limit:v.const("ymax"),ariaLabel:function(){return v.controller.t("Y Axis Maximum: ")},needsSystemKeypad:function(){return!v.controller.isKeypadEnabled()},parent:v.const(v),controller:v.props.controller}),i.createElement(b,{predicate:function(){return!v.getPolarMode()}},function(){return i.createElement("span",{class:i.const("dcg-step-container")},i.createElement("span",{class:i.const("dcg-step-label"),"aria-hidden":i.const("true")},function(){return v.controller.t("Step:")}),i.createElement(E,{limit:v.const("ystep"),ariaLabel:function(){return v.controller.t("Y Axis Step Size: ")},needsSystemKeypad:function(){return!v.controller.isKeypadEnabled()},parent:v.const(v),controller:v.props.controller}))}))),i.createElement("div",{class:i.const("dcg-radiangroup"),role:i.const("group"),"aria-label":function(){return v.controller.t("Angle Settings")}},i.createElement("div",{class:function(){return{"dcg-action-radianmode":!0,"dcg-modern-btn":!0,"dcg-active":!v.getDegreeMode()}},"aria-pressed":function(){return!v.getDegreeMode()},role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return v.controller.t("Radians")},onTap:v.bindFn(v.setRadianMode)},function(){return v.controller.t("Radians")}),i.createElement("div",{class:function(){return{"dcg-action-degreemode":!0,"dcg-modern-btn":!0,"dcg-active":v.getDegreeMode()}},"aria-pressed":v.bindFn(v.getDegreeMode),role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return v.controller.t("Degrees")},onTap:v.bindFn(v.setDegreeMode),manageFocus:v.const(p.manageFocusHelper({controller:v.controller,location:{type:"settings",location:"degree-mode"}}))},function(){return v.controller.t("Degrees")})),i.createElement("div",{class:i.const("dcg-arrow")})))}))},A.prototype.didMountContainer=function(v){var k=this;this.node=v,d(document).on("dcg-tapstart.settings-view wheel.settings-view",function(J){k.eventShouldClosePopover(J)&&k.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:J.device==="keyboard"})}),d(document).on("keydown.settings-view",function(J){if(t.lookup(J)==="Esc"&&k.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:!0}),k.controller.isGraphSettingsOpen()&&t.lookup(J)==="Tab"&&!J.altKey&&!J.metaKey&&!J.ctrlKey){var X=k.controller.getFocusLocation();if(!X||X.type!=="settings")return;J.shiftKey||X.location!=="degree-mode"?J.shiftKey&&X.location==="icon"&&(k.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"degree-mode"}}),J.preventDefault(),J.stopPropagation()):(k.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),J.preventDefault(),J.stopPropagation())}})},A.prototype.didUnmountContainer=function(){d(document).off(".settings-view")},A.prototype.didUpdate=function(){if(this.controller.isGraphSettingsOpen()){var v=this.controller.getKeypadHeight();v!==this.cachedKeypadHeight&&document.activeElement&&d(document.activeElement).closest(this.node).length&&l.scrollVisible(d(document.activeElement),d(this.node).find(".dcg-popover-interior"),50),this.cachedKeypadHeight=v}},A.prototype.eventShouldClosePopover=function(v){var k=d(v.target),J=!!k.closest(this.node).length,X=!!k.closest(".dcg-action-settings").length,te=this.isMathquillFocused()&&k.closest(".dcg-keypad").length,H=!!k.closest(".dcg-action-undo").length||!!k.closest(".dcg-action-redo").length;return!(J||X||te||H)},A.prototype.onTapSettingsButton=function(v){this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:v.device==="keyboard"})},A.prototype.isMathquillFocused=function(){return this.getFocusedLimit()!==void 0},A.prototype.getLimitLatex=function(v){return this.controller.getSettingsViewModel().limitLatex[v]},A.prototype.setLimitLatex=function(v,k){k!==this.controller.getSettingsViewModel().limitLatex[v]&&this.controller.dispatch({type:"set-axis-limit-latex",limit:v,latex:k})},A.prototype.getFocusedLimit=function(){var v=this.controller.getFocusLocation();if(v&&v.type==="settings")return v.location},A.prototype.getInvalidLimits=function(){var v=!!this.controller.getGraphSettings().degreeMode,k=f.default(this.getLimitLatex("xmin"),v),J=f.default(this.getLimitLatex("xmax"),v),X=f.default(this.getLimitLatex("ymin"),v),te=f.default(this.getLimitLatex("ymax"),v),H=this.getLimitLatex("xstep")===""?0:f.default(this.getLimitLatex("xstep"),v),z=this.getLimitLatex("ystep")===""?0:f.default(this.getLimitLatex("ystep"),v),B={},F=new y.Viewport(k,J,X,te);return isFinite(k)&&isFinite(J)?(B.xmin=!F.isXValid(),B.xmax=B.xmin):(B.xmin=!isFinite(k),B.xmax=!isFinite(J)),isFinite(X)&&isFinite(te)?(B.ymin=!F.isYValid(),B.ymax=B.ymin):(B.ymin=!isFinite(X),B.ymax=!isFinite(te)),B.xstep=!isFinite(H)||H<0,B.ystep=!isFinite(z)||z<0,B},A.prototype.isLimitInvalid=function(v){return this.getInvalidLimits()[v]},A.prototype.onFocusedChanged=function(v,k){k?this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:v}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"settings",location:v}})},A.prototype.onXAxisLabelInput=function(v){this.controller.dispatch({type:"set-graph-settings",xAxisLabel:v})},A.prototype.onYAxisLabelInput=function(v){this.controller.dispatch({type:"set-graph-settings",yAxisLabel:v})},A.prototype.getXAxisLabel=function(){return this.controller.getGraphSettings().xAxisLabel},A.prototype.getYAxisLabel=function(){return this.controller.getGraphSettings().yAxisLabel},A.prototype.getShowXAxis=function(){return!!this.controller.getGraphSettings().showXAxis},A.prototype.toggleXAxis=function(){this.controller.dispatch({type:"set-graph-settings",showXAxis:!this.getShowXAxis()})},A.prototype.getShowYAxis=function(){return!!this.controller.getGraphSettings().showYAxis},A.prototype.toggleYAxis=function(){this.controller.dispatch({type:"set-graph-settings",showYAxis:!this.getShowYAxis()})},A.prototype.getAxisNumbers=function(){return!!this.controller.getGraphSettings().xAxisNumbers},A.prototype.toggleAxisNumbers=function(){var v=this.getAxisNumbers();this.controller.dispatch({type:"set-graph-settings",xAxisNumbers:!v,yAxisNumbers:!v,polarNumbers:!v})},A.prototype.getMinorGridlines=function(){return this.controller.getGraphSettings().xAxisMinorSubdivisions===0},A.prototype.toggleMinorGridlines=function(){var v=this.getMinorGridlines()?1:0;this.controller.dispatch({type:"set-graph-settings",yAxisMinorSubdivisions:v,xAxisMinorSubdivisions:v})},A.prototype.getPolarMode=function(){return!!this.controller.getGraphSettings().polarMode},A.prototype.setPolarMode=function(){this.controller.dispatch({type:"set-graph-settings",polarMode:!0})},A.prototype.setCartesianMode=function(){this.controller.dispatch({type:"set-graph-settings",polarMode:!1})},A.prototype.getDegreeMode=function(){return!!this.controller.getGraphSettings().degreeMode},A.prototype.setRadianMode=function(){this.controller.dispatch({type:"set-graph-settings",degreeMode:!1})},A.prototype.setDegreeMode=function(){this.controller.dispatch({type:"set-graph-settings",degreeMode:!0})},A.prototype.getProjectorMode=function(){return!!this.controller.getGraphSettings().config.projectorMode},A.prototype.toggleInvertedColors=function(){this.controller.dispatch({type:"set-inverted-colors",value:!this.controller.getInvertedColors()})},A.prototype.toggleProjectorMode=function(){this.controller.dispatch({type:"set-projector-mode",value:!this.getProjectorMode()})},A.prototype.getAxisArrowMode=function(){return this.controller.getGraphSettings().xAxisArrowMode},A.prototype.setAxisArrowMode=function(v){this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:v,yAxisArrowMode:v})},A.prototype.getShowGrid=function(){return this.controller.getGraphSettings().showGrid},A.prototype.toggleGrid=function(){this.controller.dispatch({type:"set-graph-settings",showGrid:!this.getShowGrid()})},A.prototype.toggleArrows=function(){var v=this.getAxisArrowMode()===u.AxisArrowModes.NONE?u.AxisArrowModes.BOTH:u.AxisArrowModes.NONE;this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:v,yAxisArrowMode:v})},A.prototype.getSquareAxes=function(){return!!this.controller.getGraphSettings().squareAxes},A.prototype.getContainerStyle=function(){return this.controller.getKeypadHeight()?"bottom: 0":""},A.prototype.zoomSquare=function(){this.controller.dispatch({type:"zoom",direction:"square"})},A.prototype.getCapExpressionSize=function(){return!!this.controller.getGraphSettings().config.capExpressionSize},A})(i.Class);c.default=M}),P("main/zoom-buttons-view",["require","exports","tslib","dcgview","lib/tooltip","loadcss!pillboxes"],function(S,c,x,t,l){Object.defineProperty(c,"__esModule",{value:!0});var n=(function(i){function s(){return i!==null&&i.apply(this,arguments)||this}return x.__extends(s,i),s.prototype.init=function(){this.controller=this.props.controller()},s.prototype.template=function(){var g=this;return t.createElement("div",{class:t.const("dcg-zoom-container")},t.createElement("div",{class:t.const("dcg-zoominout-pillbox dcg-btn-flat-gray dcg-btn-flat-gray-group"),style:function(){return{background:g.controller.getPillboxBackgroundColor()}}},t.createElement(l.Tooltip,{tooltip:function(){return g.controller.t("Zoom In")},gravity:this.const("w")},t.createElement("div",{class:t.const("dcg-action-zoomin"),role:t.const("button"),tabindex:t.const("0"),"aria-label":function(){return g.controller.t("Zoom In")},onTap:this.bindFn(this.zoomIn),style:function(){return{background:g.controller.getPillboxBackgroundColor()}}},t.createElement("i",{class:t.const("dcg-icon dcg-icon-plus"),"aria-hidden":t.const("true")}))),t.createElement(l.Tooltip,{tooltip:function(){return g.controller.t("Zoom Out")},gravity:this.const("w")},t.createElement("div",{class:t.const("dcg-option dcg-action-zoomout dcg-tooltip-e"),tooltip:function(){return g.controller.t("Zoom Out")},role:t.const("button"),tabindex:t.const("0"),"aria-label":function(){return g.controller.t("Zoom Out")},onTap:this.bindFn(this.zoomOut),style:function(){return{background:g.controller.getPillboxBackgroundColor()}}},t.createElement("i",{class:t.const("dcg-icon dcg-icon-minus"),"aria-hidden":t.const("true")})))),t.createElement(l.Tooltip,{tooltip:function(){return g.controller.t("Default Zoom")},gravity:this.const("w")},t.createElement("div",{class:function(){return{"dcg-btn-flat-gray":!0,"dcg-option":!0,"dcg-action-zoomrestore":!0,"dcg-disabled":g.getZoomedDefault()}},"aria-disabled":this.bindFn(this.getZoomedDefault),role:t.const("button"),tabindex:t.const("0"),"aria-label":function(){return g.controller.t("Restore Default Zoom")},onTap:this.bindFn(this.zoomRestore),style:function(){return{background:g.controller.getPillboxBackgroundColor()}}},t.createElement("i",{class:t.const("dcg-icon dcg-icon-home"),"aria-hidden":t.const("true")}))))},s.prototype.zoomIn=function(){this.controller.dispatch({type:"zoom",direction:"in"})},s.prototype.zoomOut=function(){this.controller.dispatch({type:"zoom",direction:"out"})},s.prototype.zoomRestore=function(){this.controller.dispatch({type:"zoom",direction:"default"})},s.prototype.getZoomedDefault=function(){return this.controller.getGraphSettings().zoomedDefault},s})(t.Class);c.default=n}),P("main/reset-button-view",["require","exports","tslib","dcgview","lib/tooltip","loadcss!pillboxes"],function(S,c,x,t,l){Object.defineProperty(c,"__esModule",{value:!0});var n=(function(i){function s(){return i!==null&&i.apply(this,arguments)||this}return x.__extends(s,i),s.prototype.init=function(){this.controller=this.props.controller()},s.prototype.template=function(){var g=this;return t.createElement("div",{class:t.const("dcg-reset-container")},t.createElement(l.Tooltip,{tooltip:function(){return g.controller.t("Reset")},gravity:this.const("w")},t.createElement("div",{class:t.const("dcg-reset-pillbox dcg-action-reset dcg-btn-flat-gray"),role:t.const("button"),tabindex:t.const("0"),"aria-label":function(){return g.controller.t("Reset")},onTap:this.bindFn(this.reset),style:function(){return{background:g.controller.getPillboxBackgroundColor()}}},t.createElement("i",{class:t.const("dcg-icon dcg-icon-reset"),"aria-hidden":t.const("true")}))))},s.prototype.reset=function(){this.controller.dispatch({type:"reset-graph"})},s})(t.Class);c.default=n}),P("main/pillbox-view",["require","exports","tslib","dcgview","./graphpaper-branding-view","./settings-view","./zoom-buttons-view","./reset-button-view","loadcss!pillboxes"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=t.Components.If,d=(function(u){function f(){return u!==null&&u.apply(this,arguments)||this}return x.__extends(f,u),f.prototype.init=function(){this.controller=this.props.controller()},f.prototype.template=function(){var y=this;return t.createElement("div",null,t.createElement(g,{predicate:this.bindFn(this.shouldShowContainer)},function(){return t.createElement("div",{class:t.const("dcg-pillbox-container"),role:t.const("group"),"aria-label":function(){return y.controller.t("Graph Settings Controls")}},t.createElement("div",{class:t.const("dcg-overgraph-pillbox-elements"),style:y.bindFn(y.getContainerStyle)},t.createElement(g,{predicate:y.bindFn(y.shouldShowSettings)},function(){return t.createElement(n.default,{controller:y.props.controller})}),t.createElement(g,{predicate:y.bindFn(y.shouldShowResetButton)},function(){return t.createElement(s.default,{controller:y.props.controller})}),t.createElement(g,{predicate:y.bindFn(y.shouldShowZoomButtons)},function(){return t.createElement(i.default,{controller:y.props.controller})})))}),t.createElement(l.default,{controller:function(){return y.props.controller()}}))},f.prototype.getContainerStyle=function(){var y=this.controller.isKeypadOpen()?this.controller.getKeypadHeight():0;return this.controller.isGraphSettingsOpen()?"bottom: "+y+"px;":"bottom: auto"},f.prototype.shouldShowContainer=function(){return this.shouldShowSettings()||this.shouldShowZoomButtons()||this.shouldShowResetButton()},f.prototype.shouldShowSettings=function(){return this.controller.getGraphSettings().config.settingsMenu},f.prototype.shouldShowZoomButtons=function(){return this.controller.getGraphSettings().config.zoomButtons},f.prototype.shouldShowResetButton=function(){return this.controller.getGraphSettings().config.showResetButtonOnGraphpaper&&this.controller.hasDefaultState()},f})(t.Class);c.default=d}),P("loadcss!main/toast-view",function(){}),P("main/toast-view",["require","exports","tslib","dcgview","loadcss!./toast-view"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=t.Components.If,n=(function(s){function g(){return s!==null&&s.apply(this,arguments)||this}return x.__extends(g,s),g.prototype.template=function(){var d=this;return t.createElement("span",{class:t.const("dcg-toast")},t.createElement("i",{class:t.const("dcg-icon-error")}),t.createElement(l,{predicate:function(){return!d.props.showUndo()&&(!d.props.showClose||d.props.showClose())}},function(){return t.createElement("i",{class:t.const("dcg-icon-remove"),onTap:function(){return d.props.onClose&&d.props.onClose()},role:t.const("link"),tabindex:t.const(0),"aria-label":t.const("Dismiss Notice")})}),t.createElement("span",{class:t.const("dcg-msg"),"aria-atomic":function(){return!d.props.noAria()},"aria-live":function(){return d.props.noAria()?"":"assertive"}},function(){return d.props.t(d.props.message())}),t.createElement(l,{predicate:this.props.showUndo},function(){return t.createElement("a",{role:t.const("link"),tabindex:t.const(0),class:t.const("dcg-undo"),onTap:function(){return d.props.onUndo&&d.props.onUndo()}},function(){return d.props.t("Undo")})}),t.createElement(l,{predicate:this.props.showLearnMore},function(){return t.createElement("a",{role:t.const("link"),tabindex:t.const(0),class:t.const("dcg-learn-more-link"),target:t.const("_blank"),onTap:function(){return d.props.onLearnMore&&d.props.onLearnMore()}},function(){return d.props.t("Learn more")})}),t.createElement(l,{predicate:function(){return!!d.props.link&&!!d.props.link()}},function(){return t.createElement("a",{role:t.const("link"),tabindex:t.const(0),class:t.const("dcg-learn-more-link"),target:t.const("_blank"),href:function(){return d.props.link().url}},function(){return d.props.link().text})}))},g.prototype.shouldUpdate=function(){return!!this.props.message()},g})(t.Class),i=(function(s){function g(){return s!==null&&s.apply(this,arguments)||this}return x.__extends(g,s),g.prototype.template=function(){var d=this;return t.createElement("div",{class:function(){return{"dcg-toast-view":!0,"dcg-visible":!!d.props.message()}},"toast-style":function(){return d.props.toastStyle&&d.props.toastStyle()}},t.createElement(l,{predicate:function(){return!!d.props.message()}},function(){return t.createElement("div",{class:t.const("dcg-toast-wrapper")},t.createElement("div",{class:t.const("dcg-toast-cover")}),t.createElement(n,x.__assign({},d.props)))}))},g})(t.Class);c.ToastView=i}),P("main/disable-dragdrop-events",["require","exports"],function(S,c){function x(t){t.on("drag dragend dragenter dragover dragleave drop",function(l){l.preventDefault(),l.stopPropagation()})}Object.defineProperty(c,"__esModule",{value:!0}),c.default=x}),P("graphing-calc/views/main",["require","exports","tslib","touchtracking","ipad.scrollfix","dcgview","jquery","../../expressions/list-view","graphing-calc/keypads/main","main/pillbox-view","main/toast-view","main/disable-dragdrop-events","lib/tooltip"],function(S,c,x,t,l,n,i,s,g,d,u,f,y){Object.defineProperty(c,"__esModule",{value:!0});var h=n.Components.If,p=(function(r){function o(){return r!==null&&r.apply(this,arguments)||this}return x.__extends(o,r),o.prototype.init=function(){this.controller=this.props.controller()},o.prototype.settings=function(){return this.controller.getGraphSettings()},o.prototype.template=function(){var m=this;return n.createElement("div",{class:n.const("dcg-calculator-api-container"),style:n.const("width: 100%; height: 100%; position: relative;")},n.createElement("div",{class:function(){return{"dcg-container":!0,"dcg-fullscreen":!m.controller.isListVisible(),"dcg-narrow":m.controller.isNarrow(),"dcg-PROJECTOR-MODE":m.settings().config.projectorMode,"dcg-inverted-colors":!!m.settings().config.invertedColors,"dcg-EDIT-LIST-MODE":m.controller.isInEditListMode(),"dcg-no-graphpaper":!m.settings().config.graphpaper,"dcg-no-branding":!m.settings().config.branding,"dcg-no-expression-topbar":!m.settings().config.expressionsTopbar,"dcg-default-border":!!m.settings().config.border,"dcg-no-hyperlinks":!m.settings().config.links,"dcg-has-background-color":m.controller.hasBackgroundColor(),"dcg-is-interactive":m.settings().config.expressions||!m.settings().config.lockViewport}},style:function(){return{"font-size":m.settings().config.fontSize+"px",background:m.getContainerBackgroundColor(),color:m.controller.getTextColor()}},role:n.const("application"),"aria-label":function(){return m.controller.t("Desmos Graphing Calculator")},"x-ms-format-detection":n.const("none"),didMount:this.bindFn(this.didMountRoot)},n.createElement(h,{predicate:function(){return m.controller.getGraphSettings().config.expressions}},function(){return n.createElement(s.default,{controller:m.props.controller})}),n.createElement(h,{predicate:function(){return m.controller.isListEnabled()&&!m.controller.isListVisible()}},function(){return n.createElement("div",{class:function(){return{"dcg-overgraph-icon-container":!0,"dcg-bottom-right":m.controller.isNarrow()}}},n.createElement(y.Tooltip,{tooltip:function(){return m.controller.t("Show List")},gravity:function(){return m.controller.isNarrow()?"nw":"se"}},n.createElement("div",{class:function(){return{"dcg-show-expressions-tab":!0,"dcg-overgraph-icon":!0,"dcg-rotated":m.controller.isNarrow()}},"aria-label":function(){return m.controller.t("Show List")},role:n.const("button"),tabindex:n.const("0"),onTap:function(){return m.controller.dispatch({type:"show-expressions-list"})}},n.createElement("i",{class:n.const("dcg-icon-show")}))))}),n.createElement(h,{predicate:this.bindFn(this.showHamburger)},function(){return n.createElement("div",{class:n.const("dcg-overgraph-icon-container")},n.createElement(y.Tooltip,{tooltip:function(){return m.controller.t("Open Graph")},gravity:m.const("se")},n.createElement("div",{role:n.const("button"),"aria-label":function(){return m.controller.t("Open Graph")},class:n.const("dcg-action-opendrawer dcg-in-api-action-opendrawer dcg-overgraph-icon"),onTap:function(){return m.controller.dispatch({type:"open-drawer"})}},n.createElement("i",{class:n.const("dcg-icon-hamburger")}))))}),n.createElement(d.default,{controller:this.props.controller}),n.createElement(u.ToastView,{message:function(){var b=m.controller.getToastData().message;return b||""},link:function(){return m.controller.getToastData().link||void 0},showUndo:function(){return!!m.controller.getToastData().undoCallback},showLearnMore:function(){return!!m.controller.getToastData().learnMoreCallback},noAria:function(){return!!m.controller.getToastData().noAria},toastStyle:function(){return m.controller.getToastData().toastStyle},t:this.controller.t,onUndo:function(){return m.controller.dispatch({type:"toast/undo"})},onLearnMore:function(){return m.controller.dispatch({type:"toast/learn-more"})},onClose:function(){return m.controller.dispatch({type:"toast/close"})}}),n.createElement("div",{class:n.const("dcg-grapher")}),n.createElement(h,{predicate:function(){return m.controller.getGraphSettings().config.keypad}},function(){return n.createElement(g.default,{controller:m.props.controller})})))},o.prototype.showHamburger=function(){return!!this.controller.getGraphSettings().config.showHamburger&&!this.controller.isInEditListMode()&&this.controller.isNarrow()},o.prototype.getContainerBackgroundColor=function(){return this.controller.hasTransparentBackground()?"none":this.controller.getBackgroundColor()},o.prototype.didMountRoot=function(m){t.monitor(m),this.controller.getGraphSettings().config.disableScrollFix||l.limitScrollOnElement(m),this.setupFileDragDrop(m)},o.prototype.setupFileDragDrop=function(m){function b(){D=i(),M.off(".filedraggedover"),A.controller.dispatch({type:"file-is-not-dragged-over"})}var E=this,M=i(m);f.default(M);var D=i(),A=this;M.on("dragenter",function(v){E.controller.areImagesEnabled()&&(D.length===0&&M.on("dcg-tapstart.filedraggedover",b),D=D.add(v.target),E.controller.dispatch({type:"file-is-dragged-over"}))}).on("dragleave",function(v){D=D.not(v.target),D.length===0&&b()}).on("drop",b)},o})(n.Class);c.default=p}),P("worker/workerpoolconnection",["require","pjs","underscore_model"],function(S){return S("pjs")(S("underscore_model").UnderscoreModel,function(c,x){c.init=function(t){x.init.call(this),this.workerPool=t,this.worker=t.allocateWorker(),this.worker.__connections[this.guid]=this},c.destroy=function(){this.sendMessage({type:"destroy"}),delete this.worker.__connections[this.guid]},c.killWorker=function(){this.worker.__isFake||this.workerPool.killWorker(this.worker)},c.onWorkerKilled=function(){},c.onResponse=function(t){},c.sendMessage=function(t){this.worker.__isFake?this.worker.postMessage(t):this.worker.postMessage({connectionId:this.guid,originalMessage:t})}})}),P("text!worker_src_underlying",[],function(){return`var requirejs,require,define;!function(e){function t(e,t){return g.call(e,t)}function r(e,t){var r,n,i,a,o,s,u,c,l,p,f=t&&t.split("/"),h=m.map,d=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(f=f.slice(0,f.length-1),e=f.concat(e.split("/")),c=0;c<e.length;c+=1)if("."===(p=e[c]))e.splice(c,1),c-=1;else if(".."===p){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||d)&&h){for(r=e.split("/"),c=r.length;c>0;c-=1){if(n=r.slice(0,c).join("/"),f)for(l=f.length;l>0;l-=1)if((i=h[f.slice(0,l).join("/")])&&(i=i[n])){a=i,o=c;break}if(a)break;!s&&d&&d[n]&&(s=d[n],u=c)}!a&&s&&(a=s,o=u),a&&(r.splice(0,o,a),e=r.join("/"))}return e}function n(t,r){return function(){return l.apply(e,v.call(arguments,0).concat([t,r]))}}function i(e){return function(t){return r(t,e)}}function a(e){return function(t){h[e]=t}}function o(r){if(t(d,r)){var n=d[r];delete d[r],y[r]=!0,c.apply(e,n)}if(!t(h,r)&&!t(y,r))throw new Error("No "+r);return h[r]}function s(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function u(e){return function(){return m&&m.config&&m.config[e]||{}}}var c,l,p,f,h={},d={},m={},y={},g=Object.prototype.hasOwnProperty,v=[].slice;p=function(e,t){var n,a=s(e),u=a[0];return e=a[1],u&&(u=r(u,t),n=o(u)),u?e=n&&n.normalize?n.normalize(e,i(t)):r(e,t):(e=r(e,t),a=s(e),u=a[0],e=a[1],u&&(n=o(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:n}},f={require:function(e){return n(e)},exports:function(e){var t=h[e];return void 0!==t?t:h[e]={}},module:function(e){return{id:e,uri:"",exports:h[e],config:u(e)}}},c=function(r,i,s,u){var c,l,m,g,v,b,x=[];if(u=u||r,"function"==typeof s){for(i=!i.length&&s.length?["require","exports","module"]:i,v=0;v<i.length;v+=1)if(g=p(i[v],u),"require"===(l=g.f))x[v]=f.require(r);else if("exports"===l)x[v]=f.exports(r),b=!0;else if("module"===l)c=x[v]=f.module(r);else if(t(h,l)||t(d,l)||t(y,l))x[v]=o(l);else{if(!g.p)throw new Error(r+" missing "+l);g.p.load(g.n,n(u,!0),a(l),{}),x[v]=h[l]}m=s.apply(h[r],x),r&&(c&&c.exports!==e&&c.exports!==h[r]?h[r]=c.exports:m===e&&b||(h[r]=m))}else r&&(h[r]=s)},requirejs=require=l=function(t,r,n,i,a){return"string"==typeof t?f[t]?f[t](r):o(p(t,r).f):(t.splice||(m=t,r.splice?(t=r,r=n,n=null):t=e),r=r||function(){},"function"==typeof n&&(n=i,i=a),i?c(e,t,r,n):setTimeout(function(){c(e,t,r,n)},4),l)},l.config=function(e){return m=e,m.deps&&l(m.deps,m.callback),l},define=function(e,r,n){r.splice||(n=r,r=[]),t(h,e)||t(d,e)||(d[e]=[e,r,n])},define.amd={jQuery:!0}}(),"undefined"!=typeof ALMOND_OVERRIDES&&ALMOND_OVERRIDES&&(define=ALMOND_OVERRIDES.define||define,require=ALMOND_OVERRIDES.require||require,requirejs=ALMOND_OVERRIDES.requirejs||requirejs),define("core/vendor/almond",function(){}),define("pjs",[],function(){return function(e,t,r){function n(e){return"object"==typeof e}function i(e){return"function"==typeof e}function a(){}function o(s,u){function c(){var e=new l;return i(e.init)&&e.init.apply(e,arguments),e}function l(){}u===r&&(u=s,s=Object),c.Bare=l;var p,f=a[e]=s[e],h=l[e]=c[e]=new a;return h.constructor=c,c.mixin=function(t){return l[e]=c[e]=o(c,t)[e],c},(c.open=function(e){if(p={},i(e)?p=e.call(c,h,f,c,s):n(e)&&(p=e),n(p))for(var r in p)t.call(p,r)&&(h[r]=p[r]);return i(h.init)||(h.init=s),c})(u)}return o}("prototype",{}.hasOwnProperty)}),function(){function e(e){function t(t,r,n,i,a,o){for(;a>=0&&a<o;a+=e){var s=i?i[a]:a;n=r(n,t[s],s,t)}return n}return function(r,n,i,a){n=b(n,a,4);var o=!w(r)&&v.keys(r),s=(o||r).length,u=e>0?0:s-1;return arguments.length<3&&(i=r[o?o[u]:u],u+=e),t(r,n,i,o,u,s)}}function t(e){return function(t,r,n){r=x(r,n);for(var i=D(t),a=e>0?0:i-1;a>=0&&a<i;a+=e)if(r(t[a],a,t))return a;return-1}}function r(e,t,r){return function(n,i,a){var o=0,s=D(n);if("number"==typeof a)e>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(r&&a&&s)return a=r(n,i),n[a]===i?a:-1;if(i!==i)return a=t(l.call(n,o,s),v.isNaN),a>=0?a+o:-1;for(a=e>0?o:s-1;a>=0&&a<s;a+=e)if(n[a]===i)return a;return-1}}function n(e,t){var r=O.length,n=e.constructor,i=v.isFunction(n)&&n.prototype||s,a="constructor";for(v.has(e,a)&&!v.contains(t,a)&&t.push(a);r--;)(a=O[r])in e&&e[a]!==i[a]&&!v.contains(t,a)&&t.push(a)}var i=this,a=i._,o=Array.prototype,s=Object.prototype,u=Function.prototype,c=o.push,l=o.slice,p=s.toString,f=s.hasOwnProperty,h=Array.isArray,d=Object.keys,m=u.bind,y=Object.create,g=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):i._=v,v.VERSION="1.8.3";var b=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,a){return e.call(t,r,n,i,a)}}return function(){return e.apply(t,arguments)}},x=function(e,t,r){return null==e?v.identity:v.isFunction(e)?b(e,t,r):v.isObject(e)?v.matcher(e):v.property(e)};v.iteratee=function(e,t){return x(e,t,1/0)};var _=function(e,t){return function(r){var n=arguments.length;if(n<2||null==r)return r;for(var i=1;i<n;i++)for(var a=arguments[i],o=e(a),s=o.length,u=0;u<s;u++){var c=o[u];t&&void 0!==r[c]||(r[c]=a[c])}return r}},S=function(e){if(!v.isObject(e))return{};if(y)return y(e);g.prototype=e;var t=new g;return g.prototype=null,t},M=function(e){return function(t){return null==t?void 0:t[e]}},E=Math.pow(2,53)-1,D=M("length"),w=function(e){var t=D(e);return"number"==typeof t&&t>=0&&t<=E};v.each=v.forEach=function(e,t,r){t=b(t,r);var n,i;if(w(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var a=v.keys(e);for(n=0,i=a.length;n<i;n++)t(e[a[n]],a[n],e)}return e},v.map=v.collect=function(e,t,r){t=x(t,r);for(var n=!w(e)&&v.keys(e),i=(n||e).length,a=Array(i),o=0;o<i;o++){var s=n?n[o]:o;a[o]=t(e[s],s,e)}return a},v.reduce=v.foldl=v.inject=e(1),v.reduceRight=v.foldr=e(-1),v.find=v.detect=function(e,t,r){var n;if(void 0!==(n=w(e)?v.findIndex(e,t,r):v.findKey(e,t,r))&&-1!==n)return e[n]},v.filter=v.select=function(e,t,r){var n=[];return t=x(t,r),v.each(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n},v.reject=function(e,t,r){return v.filter(e,v.negate(x(t)),r)},v.every=v.all=function(e,t,r){t=x(t,r);for(var n=!w(e)&&v.keys(e),i=(n||e).length,a=0;a<i;a++){var o=n?n[a]:a;if(!t(e[o],o,e))return!1}return!0},v.some=v.any=function(e,t,r){t=x(t,r);for(var n=!w(e)&&v.keys(e),i=(n||e).length,a=0;a<i;a++){var o=n?n[a]:a;if(t(e[o],o,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,r,n){return w(e)||(e=v.values(e)),("number"!=typeof r||n)&&(r=0),v.indexOf(e,t,r)>=0},v.invoke=function(e,t){var r=l.call(arguments,2),n=v.isFunction(t);return v.map(e,function(e){var i=n?t:e[t];return null==i?i:i.apply(e,r)})},v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,r){var n,i,a=-1/0,o=-1/0;if(null==t&&null!=e){e=w(e)?e:v.values(e);for(var s=0,u=e.length;s<u;s++)(n=e[s])>a&&(a=n)}else t=x(t,r),v.each(e,function(e,r,n){((i=t(e,r,n))>o||i===-1/0&&a===-1/0)&&(a=e,o=i)});return a},v.min=function(e,t,r){var n,i,a=1/0,o=1/0;if(null==t&&null!=e){e=w(e)?e:v.values(e);for(var s=0,u=e.length;s<u;s++)(n=e[s])<a&&(a=n)}else t=x(t,r),v.each(e,function(e,r,n){((i=t(e,r,n))<o||i===1/0&&a===1/0)&&(a=e,o=i)});return a},v.shuffle=function(e){for(var t,r=w(e)?e:v.values(e),n=r.length,i=Array(n),a=0;a<n;a++)t=v.random(0,a),t!==a&&(i[a]=i[t]),i[t]=r[a];return i},v.sample=function(e,t,r){return null==t||r?(w(e)||(e=v.values(e)),e[v.random(e.length-1)]):v.shuffle(e).slice(0,Math.max(0,t))},v.sortBy=function(e,t,r){return t=x(t,r),v.pluck(v.map(e,function(e,r,n){return{value:e,index:r,criteria:t(e,r,n)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,r,n){var i={};return r=x(r,n),v.each(t,function(n,a){var o=r(n,a,t);e(i,n,o)}),i}};v.groupBy=T(function(e,t,r){v.has(e,r)?e[r].push(t):e[r]=[t]}),v.indexBy=T(function(e,t,r){e[r]=t}),v.countBy=T(function(e,t,r){v.has(e,r)?e[r]++:e[r]=1}),v.toArray=function(e){return e?v.isArray(e)?l.call(e):w(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:w(e)?e.length:v.keys(e).length},v.partition=function(e,t,r){t=x(t,r);var n=[],i=[];return v.each(e,function(e,r,a){(t(e,r,a)?n:i).push(e)}),[n,i]},v.first=v.head=v.take=function(e,t,r){if(null!=e)return null==t||r?e[0]:v.initial(e,e.length-t)},v.initial=function(e,t,r){return l.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},v.last=function(e,t,r){if(null!=e)return null==t||r?e[e.length-1]:v.rest(e,Math.max(0,e.length-t))},v.rest=v.tail=v.drop=function(e,t,r){return l.call(e,null==t||r?1:t)},v.compact=function(e){return v.filter(e,v.identity)};var P=function(e,t,r,n){for(var i=[],a=0,o=n||0,s=D(e);o<s;o++){var u=e[o];if(w(u)&&(v.isArray(u)||v.isArguments(u))){t||(u=P(u,t,r));var c=0,l=u.length;for(i.length+=l;c<l;)i[a++]=u[c++]}else r||(i[a++]=u)}return i};v.flatten=function(e,t){return P(e,t,!1)},v.without=function(e){return v.difference(e,l.call(arguments,1))},v.uniq=v.unique=function(e,t,r,n){v.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=x(r,n));for(var i=[],a=[],o=0,s=D(e);o<s;o++){var u=e[o],c=r?r(u,o,e):u;t?(o&&a===c||i.push(u),a=c):r?v.contains(a,c)||(a.push(c),i.push(u)):v.contains(i,u)||i.push(u)}return i},v.union=function(){return v.uniq(P(arguments,!0,!0))},v.intersection=function(e){for(var t=[],r=arguments.length,n=0,i=D(e);n<i;n++){var a=e[n];if(!v.contains(t,a)){for(var o=1;o<r&&v.contains(arguments[o],a);o++);o===r&&t.push(a)}}return t},v.difference=function(e){var t=P(arguments,!0,!0,1);return v.filter(e,function(e){return!v.contains(t,e)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(e){for(var t=e&&v.max(e,D).length||0,r=Array(t),n=0;n<t;n++)r[n]=v.pluck(e,n);return r},v.object=function(e,t){for(var r={},n=0,i=D(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},v.findIndex=t(1),v.findLastIndex=t(-1),v.sortedIndex=function(e,t,r,n){r=x(r,n,1);for(var i=r(t),a=0,o=D(e);a<o;){var s=Math.floor((a+o)/2);r(e[s])<i?a=s+1:o=s}return a},v.indexOf=r(1,v.findIndex,v.sortedIndex),v.lastIndexOf=r(-1,v.findLastIndex),v.range=function(e,t,r){null==t&&(t=e||0,e=0),r=r||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),a=0;a<n;a++,e+=r)i[a]=e;return i};var I=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var a=S(e.prototype),o=e.apply(a,i);return v.isObject(o)?o:a};v.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,l.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),n=function(){return I(e,n,t,this,r.concat(l.call(arguments)))};return n},v.partial=function(e){var t=l.call(arguments,1),r=function(){for(var n=0,i=t.length,a=Array(i),o=0;o<i;o++)a[o]=t[o]===v?arguments[n++]:t[o];for(;n<arguments.length;)a.push(arguments[n++]);return I(e,r,this,this,a)};return r},v.bindAll=function(e){var t,r,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)r=arguments[t],e[r]=v.bind(e[r],e);return e},v.memoize=function(e,t){var r=function(n){var i=r.cache,a=""+(t?t.apply(this,arguments):n);return v.has(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return r.cache={},r},v.delay=function(e,t){var r=l.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,r){var n,i,a,o=null,s=0;r||(r={});var u=function(){s=!1===r.leading?0:v.now(),o=null,a=e.apply(n,i),o||(n=i=null)};return function(){var c=v.now();s||!1!==r.leading||(s=c);var l=t-(c-s);return n=this,i=arguments,l<=0||l>t?(o&&(clearTimeout(o),o=null),s=c,a=e.apply(n,i),o||(n=i=null)):o||!1===r.trailing||(o=setTimeout(u,l)),a}},v.debounce=function(e,t,r){var n,i,a,o,s,u=function(){var c=v.now()-o;c<t&&c>=0?n=setTimeout(u,t-c):(n=null,r||(s=e.apply(a,i),n||(a=i=null)))};return function(){a=this,i=arguments,o=v.now();var c=r&&!n;return n||(n=setTimeout(u,t)),c&&(s=e.apply(a,i),a=i=null),s}},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},v.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},v.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},v.once=v.partial(v.before,2);var C=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];v.keys=function(e){if(!v.isObject(e))return[];if(d)return d(e);var t=[];for(var r in e)v.has(e,r)&&t.push(r);return C&&n(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var r in e)t.push(r);return C&&n(e,t),t},v.values=function(e){for(var t=v.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n},v.mapObject=function(e,t,r){t=x(t,r);for(var n,i=v.keys(e),a=i.length,o={},s=0;s<a;s++)n=i[s],o[n]=t(e[n],n,e);return o},v.pairs=function(e){for(var t=v.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n},v.invert=function(e){for(var t={},r=v.keys(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t},v.functions=v.methods=function(e){var t=[];for(var r in e)v.isFunction(e[r])&&t.push(r);return t.sort()},v.extend=_(v.allKeys),v.extendOwn=v.assign=_(v.keys),v.findKey=function(e,t,r){t=x(t,r);for(var n,i=v.keys(e),a=0,o=i.length;a<o;a++)if(n=i[a],t(e[n],n,e))return n},v.pick=function(e,t,r){var n,i,a={},o=e;if(null==o)return a;v.isFunction(t)?(i=v.allKeys(o),n=b(t,r)):(i=P(arguments,!1,!1,1),n=function(e,t,r){return t in r},o=Object(o));for(var s=0,u=i.length;s<u;s++){var c=i[s],l=o[c];n(l,c,o)&&(a[c]=l)}return a},v.omit=function(e,t,r){if(v.isFunction(t))t=v.negate(t);else{var n=v.map(P(arguments,!1,!1,1),String);t=function(e,t){return!v.contains(n,t)}}return v.pick(e,t,r)},v.defaults=_(v.allKeys,!0),v.create=function(e,t){var r=S(e);return t&&v.extendOwn(r,t),r},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var r=v.keys(t),n=r.length;if(null==e)return!n;for(var i=Object(e),a=0;a<n;a++){var o=r[a];if(t[o]!==i[o]||!(o in i))return!1}return!0};var A=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var i=p.call(e);if(i!==p.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(v.isFunction(o)&&o instanceof o&&v.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var u=r.length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),a){if((u=e.length)!==t.length)return!1;for(;u--;)if(!A(e[u],t[u],r,n))return!1}else{var c,l=v.keys(e);if(u=l.length,v.keys(t).length!==u)return!1;for(;u--;)if(c=l[u],!v.has(t,c)||!A(e[c],t[c],r,n))return!1}return r.pop(),n.pop(),!0};v.isEqual=function(e,t){return A(e,t)},v.isEmpty=function(e){return null==e||(w(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length)},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=h||function(e){return"[object Array]"===p.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){v["is"+e]=function(t){return p.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return v.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&e!==+e},v.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===p.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){return null!=e&&f.call(e,t)},v.noConflict=function(){return i._=a,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=M,v.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,r){var n=Array(Math.max(0,e));t=b(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","\`":"&#x60;"},N=v.invert(L),q=function(e){var t=function(t){return e[t]},r="(?:"+v.keys(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}};v.escape=q(L),v.unescape=q(N),v.result=function(e,t,r){var n=null==e?void 0:e[t];return void 0===n&&(n=r),v.isFunction(n)?n.call(e):n};var F=0;v.uniqueId=function(e){var t=++F+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var R=/(.)^/,V={"'":"'","\\\\":"\\\\","\\r":"r","\\n":"n","\\u2028":"u2028","\\u2029":"u2029"},k=/\\\\|'|\\r|\\n|\\u2028|\\u2029/g,B=function(e){return"\\\\"+V[e]};v.template=function(e,t,r){!t&&r&&(t=r),t=v.defaults({},t,v.templateSettings);var n=RegExp([(t.escape||R).source,(t.interpolate||R).source,(t.evaluate||R).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(n,function(t,r,n,o,s){return a+=e.slice(i,s).replace(k,B),i=s+t.length,r?a+="'+\\n((__t=("+r+"))==null?'':_.escape(__t))+\\n'":n?a+="'+\\n((__t=("+n+"))==null?'':__t)+\\n'":o&&(a+="';\\n"+o+"\\n__p+='"),t}),a+="';\\n",t.variable||(a="with(obj||{}){\\n"+a+"}\\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\\n"+a+"return __p;\\n";try{var o=new Function(t.variable||"obj","_",a)}catch(e){throw e.source=a,e}var s=function(e){return o.call(this,e,v)};return s.source="function("+(t.variable||"obj")+"){\\n"+a+"}",s},v.chain=function(e){var t=v(e);return t._chain=!0,t};var j=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){v.each(v.functions(e),function(t){var r=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),j(this,r.apply(v,e))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];v.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],j(this,r)}}),v.each(["concat","join","slice"],function(e){var t=o[e];v.prototype[e]=function(){return j(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}.call(this),function(){var e,t,r,n,i,a,o,s,u,c,l,p,f,h,d,m,y,g,v,b,x={};!function(e){function t(e,t){return e!==r&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(r,n){return e[r]=t?t(r,n):n}}var r="object"==typeof x?x:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof define&&define.amd?define("tslib",["exports"],function(n){e(t(r,t(n)))}):e("object"==typeof module&&"object"==typeof module.exports?t(r,t(module.exports)):t(r))}(function(x){var _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};e=function(e,t){function r(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},n=function(e,t,r,n){var i,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,r,o):i(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},i=function(e,t){return function(r,n){t(r,n,e)}},a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}u((n=n.apply(e,t||[])).next())})},s=function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,a=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(e){r=[6,e],a=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,a,o,s,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},u=function(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])},c=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},l=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e},f=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n},h=function(e){return this instanceof h?(this.v=e,this):new h(e)},d=function(e,t,r){function n(e){l[e]&&(c[e]=function(t){return new Promise(function(r,n){p.push([e,t,r,n])>1||i(e,t)})})}function i(e,t){try{a(l[e](t))}catch(e){u(p[0][3],e)}}function a(e){e.value instanceof h?Promise.resolve(e.value.v).then(o,s):u(p[0][2],e)}function o(e){i("next",e)}function s(e){i("throw",e)}function u(e,t){e(t),p.shift(),p.length&&i(p[0][0],p[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,l=r.apply(e,t||[]),p=[];return c={},n("next"),n("throw"),n("return"),c[Symbol.asyncIterator]=function(){return this},c},m=function(e){function t(t,i){r[t]=e[t]?function(r){return(n=!n)?{value:h(e[t](r)),done:"return"===t}:i?i(r):r}:i}var r,n;return r={},t("next"),t("throw",function(e){throw e}),t("return"),r[Symbol.iterator]=function(){return this},r},y=function(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(i,a){n=e[t](n),r(i,a,n.done,n.value)})}}function r(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof c?c(e):e[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)},g=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},b=function(e){return e&&e.__esModule?e:{default:e}},x("__extends",e),x("__assign",t),x("__rest",r),x("__decorate",n),x("__param",i),x("__metadata",a),x("__awaiter",o),x("__generator",s),x("__exportStar",u),x("__values",c),x("__read",l),x("__spread",p),x("__spreadArrays",f),x("__await",h),x("__asyncGenerator",d),x("__asyncDelegator",m),x("__asyncValues",y),x("__makeTemplateObject",g),x("__importStar",v),x("__importDefault",b)})}(),define("core/math/distance",["require","exports"],function(e,t){"use strict";function r(e){return e===1/0||e===-1/0}function n(e,t){return e>0==t>0?e+.5*(t-e):.5*(e+t)}function i(e,t,r,n,i,a){return e*n+t*i+r*a}function a(e,r,n,a,o,s,u,c,l){var p=t.hypot(u-a,c-o,l-s);return 0===p?0:i((e-a)/p,(r-o)/p,(n-s)/p,(u-a)/p,(c-o)/p,(l-s)/p)}function o(e,t,r,n,i,o){var s=a(e,t,0,r,n,0,i,o,0);return s<=0?[r,n]:s>=1?[i,o]:[r+s*(i-r),n+s*(o-n)]}function s(e,r,n,i,a,s){var u=o(e,r,n,i,a,s);return t.hypot(e-u[0],r-u[1])}function u(e,t,r){if(void 0===r&&(r=1),r>50)throw new Error("Within "+(52-r)+" bits isn't really approximate any more");var n=Math.max(Math.max(Math.abs(e),Math.abs(t)),1);return n===n+(1===r?.5:Math.pow(.5,r))*Math.abs(t-e)}Object.defineProperty(t,"__esModule",{value:!0});var c=Math.hypot&&Math.hypot(1/0,NaN)===1/0;t.hypot=c?Math.hypot:function(e,t,n){if(r(e)||r(t)||void 0!==n&&r(n))return 1/0;if(isNaN(e)||isNaN(t)||void 0!==n&&isNaN(n))return NaN;if(0===e&&0===t&&(void 0===n||0===n))return 0;for(var i=0,a=0,o=0;o<arguments.length;o+=1){var s=Math.abs(Number(arguments[o]));s>i&&(a*=i/s*(i/s),i=s),a+=0===s&&0===i?0:s/i*(s/i)}return i===1/0?1/0:i*Math.sqrt(a)},t.mean=n,t.pointToSegmentParameter=a,t.closestPointOnSegment=o,t.pointToSegment=s,t.approx=u}),define("core/math/poi",["require","exports","core/math/distance"],function(e,t,r){"use strict";function n(e,t){var n;e>t&&(n=e,e=t,t=n);var i=e>0,a=t>0,o=Math.abs(e)>.01,s=Math.abs(t)>.01;if(o||s)return r.mean(e,t);if(0===e)return t*Math.abs(t);if(0===t)return e*Math.abs(e);if(i!==a)return 0;var u=i?Math.sqrt(e*t):-Math.sqrt(e*t);return u>=e&&t>=u?u:r.mean(e,t)}function i(e,t,r,i,o){if(!isNaN(t)&&!isNaN(i)&&t<0!=i<0)for(;;){var s=n(e,r),u=o(s);if(!isFinite(u))return;if(s===e||s===r)return Math.abs(t)<=Math.abs(i)?[e,t]:[r,i];if(0===u)return a(e,t,s,u,r,i,o);t<0!=u<0?(r=s,i=u):(e=s,t=u)}}function a(e,t,r,i,a,u,c){var l;if(isFinite(i)){isFinite(t)||(l=o(e,t,r,i,c))&&(e=l[0],t=l[1]),isFinite(u)||(l=o(r,i,a,u,c))&&(a=l[0],u=l[1]);var p,f;p=t===i?[e,t]:s(e,t,r,i,c,i),f=u===i?[a,u]:s(r,i,a,u,c,i);var h;return p&&f&&(h=n(p[0],f[0])),void 0!==h?[h,c(h)]:void 0}}function o(e,t,r,i,a){if(isFinite(t)!==isFinite(i))for(;;){var o=n(e,r),s=a(o);if(o===e||o===r)return isFinite(t)?[e,t]:[r,i];isFinite(s)!==isFinite(t)?(r=o,i=s):(e=o,t=s)}}function s(e,t,r,i,a,o){if(t===o!=(i===o))for(;;){var s=n(e,r),u=a(s);if(s===e||s===r)return t===o?[e,t]:[r,i];u===o!=(t===o)?(r=s,i=u):(e=s,t=u)}}function u(e,t,r,i,o,s,u){if(e<r&&r<o&&isFinite(t)&&isFinite(i)&&isFinite(s)&&t!==i&&i!==s&&i>t==i>s)for(;;){var c=n(e,r),l=u(c),p=n(r,o),f=u(p);if(!isFinite(l)||!isFinite(f))return;if(c===e||c===r||p===r||p===o)return l>i==i>t?[c,l]:f>i==i>t?[p,f]:[r,i];if(l===i||f===i)return a(e,t,r,i,o,s,u);l>t==i>t&&l>t==l>i?(o=r,s=i,r=c,i=l):f>s==i>s&&f>i==f>s?(e=r,t=i,r=p,i=f):(e=c,t=l,o=p,s=f)}}function c(e,t){var r=e[0],n=e[1],i=t[0],a=t[1];return(i-r)*(i-r)+(a-n)*(a-n)}function l(e,t,r,i,a,o){var s,u,l,p,f,h,d,m,y,g=o(e),v=o(t),b=o(r),x=c(g,i),_=c(v,i),S=c(b,i);if(!(t<=e||r<=t)&&isFinite(x)&&isFinite(_)&&isFinite(S)&&!(_>=x||_>=S))for(;;){if(Math.abs(b[0]-g[0])<a&&Math.abs(b[1]-g[1])<a)return[e,r];var M=n(e,t),E=o(M),D=c(E,i),w=n(t,r),T=o(w),P=c(T,i);if(!isFinite(D)||!isFinite(P))return;if(M===e||M===t||w===t||w===r)return D<_&&D<P?[M,M]:P<D&&P<_?[w,w]:[t,t];if((D===_||P===_)&&(t=.5*(M+t),v=o(t),_=c(v,i),D===_||P===_))return[e,r];D<_&&D<P?(s=[t,M],r=s[0],t=s[1],u=[v,E],b=u[0],v=u[1],l=[_,D],S=l[0],_=l[1]):P<D&&P<_?(p=[t,w],e=p[0],t=p[1],f=[v,T],g=f[0],v=f[1],h=[_,P],x=h[0],_=h[1]):(d=[M,w],e=d[0],r=d[1],m=[E,T],g=m[0],b=m[1],y=[D,P],x=y[0],S=y[1])}}function p(e,t,r){return void 0===t&&(t=-1/0),void 0===r&&(r=1/0),Math.min(r,Math.max(t,e))}function f(e,t,r,n,i,a){var o,s,u,f,h;if(void 0!==n&&void 0!==i){h=r+.01*(r<.5*(n+i)?i-n:n-i)}else h=Math.abs(r)>1?1.00001*r:r+1e-5;var d=e(r),m=e(h),y=c(d,t),g=c(m,t);if(isFinite(y)&&isFinite(g)){if(y===g)return[r,h];for(g>y&&(o=[h,r],r=o[0],h=o[1],s=[m,d],d=s[0],m=s[1],u=[g,y],y=u[0],g=u[1]);isFinite(r)&&isFinite(h)&&r!==h;){if(void 0!==i&&h>i)return[i,i];if(void 0!==n&&h<n)return[n,n];var v=r+3*(h-r),b=e(v),x=c(b,t);if(!isFinite(x))return[r,h];if(x===g)return[r,h];if(x>g){var _=h>r?l(r,h,v,t,a,e):l(v,h,r,t,a,e);return _?[p(_[0],n,i),p(_[1],n,i)]:_}f=[h,g,v,x],r=f[0],y=f[1],h=f[2],g=f[3]}return[r,h]}}function h(e,t,r,n){return!r||!!n&&Math.min(c(e(n[0]),t),c(e(n[1]),t))<Math.min(c(e(r[0]),t),c(e(r[1]),t))}function d(e,t,r,n,i,a){var o=f(e,t,r,n,i,a);if(void 0!==n){var s=f(e,t,n,n,i,a);h(e,t,o,s)&&(o=s)}if(void 0!==i){var u=f(e,t,i,n,i,a);h(e,t,o,u)&&(o=u)}return o}function m(e,t,r,n,i,a,o,s){var u=Math.abs(n-t),c=Math.abs(a-n),l=Math.abs(s-a);return u>c&&u>l?[[e,t],[r,n]]:l>c&&l>u?[[i,a],[o,s]]:[[r,n],[i,a]]}function y(e,t,i,a,s,u,c,l){if(l||(l=0),!((i-e)*(s-i)<=0)&&isFinite(e)&&isFinite(i)&&isFinite(s)&&isFinite(t)&&isFinite(u)){if(!isFinite(a)){var p=o(e,t,i,a,c),f=o(i,a,s,u,c);if(!p||!f)return;return[p,f]}if(!(Math.abs(a-((s-i)*t+(i-e)*u)/(s-e))<l))for(;;){var h=n(e,i),d=c(h),y=n(i,s),g=c(y),v=Math.abs(d-r.mean(t,a)),b=Math.abs(a-r.mean(d,g)),x=Math.abs(g-r.mean(a,u));if(v<=l&&b<=l&&x<=l)return;if(!isFinite(d)){var p=o(e,t,h,d,c),f=o(h,d,s,u,c);if(!p||!f)return;return[p,f]}if(!isFinite(g)){var p=o(e,t,y,g,c),f=o(y,g,s,u,c);if(!p||!f)return;return[p,f]}if(!(h!==e&&h!==i||y!==i&&y!==s))return Math.abs(a-t)>Math.abs(u-a)?[[e,t],[i,a]]:[[i,a],[s,u]];if(h===e||h===i)return m(e,t,i,a,y,g,s,u);if(y===i||y===s)return m(e,t,h,d,i,a,s,u);v>x&&v>=b?(s=i,u=a,i=h,a=d):x>v&&x>=b?(e=i,t=a,i=y,a=g):(e=h,t=d,s=y,u=g)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.floatMiddle=n,t.bisectZero=i,t.flatCenter=a,t.bisectFinite=o,t.bisectExtremum=u,t.bisectClosestPointOnParametric=l,t.findLocalClosestPointOnParametric=d,t.bisectJump=y}),define("core/math/curve-accumulator",["require","exports","core/math/distance"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){e?(this.xtolerance=e.xtolerance||e.tolerance||0,this.ytolerance=e.ytolerance||e.tolerance||0,this.ztolerance=e.ztolerance||e.tolerance||0,this.map=e.map):this.xtolerance=this.ytolerance=this.ztolerance=0,this.segments=[],this.segment=[],this.pivotPoint=void 0,this.pendingPoint=void 0}return e.prototype.colinear=function(e,t,n){this.map&&(e=this.map(e),t=this.map(t),n=this.map(n));var i=r.pointToSegmentParameter(n[0],n[1],n[2]||0,e[0],e[1],e[2]||0,t[0],t[1],t[2]||0);if(i<1)return!1;var a=[e[0]+i*(t[0]-e[0]),e[1]+i*(t[1]-e[1]),3===e.length?e[2]+i*(t[2]-e[2]):0]
;return Math.abs(n[0]-a[0])<=this.xtolerance&&Math.abs(n[1]-a[1])<=this.ytolerance&&(2===e.length||Math.abs(n[2]-a[2])<=this.ztolerance)},e.prototype.addPoint=function(e){if(this.dimensions=e.length,this.xtolerance<0&&this.ytolerance<0&&(2===this.dimensions||this.ztolerance<0))return void this.segment.push.apply(this.segment,e);if(!this.segment.length)return void this.segment.push.apply(this.segment,e);var t=2===this.dimensions?[this.segment[this.segment.length-2],this.segment[this.segment.length-1]]:[this.segment[this.segment.length-3],this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]){if(!this.pivotPoint||!this.pendingPoint)return this.pivotPoint=e,void(this.pendingPoint=e);(!this.colinear(t,this.pivotPoint,e)||r.hypot(t[0]-e[0],t[1]-e[1],(t[2]||0)-(e[2]||0))<r.hypot(t[0]-this.pendingPoint[0],t[1]-this.pendingPoint[1],(t[2]||0)-(this.pendingPoint[2]||0)))&&(this.flushPending(),this.pivotPoint=e),this.pendingPoint=e}},e.prototype.flushPending=function(){this.pendingPoint&&(this.segment.push.apply(this.segment,this.pendingPoint),this.pivotPoint=void 0,this.pendingPoint=void 0)},e.prototype.breakSegment=function(){this.flushPending(),this.segment.length>(this.dimensions||2)&&this.segments.push(this.segment),this.segment=[]},e.prototype.getSegments=function(){return this.breakSegment(),this.segments},e.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0}},e}();t.Accumulator=n}),define("core/math/implicit-plotter",["require","exports","core/math/distance","./curve-accumulator"],function(e,t,r,n){"use strict";function i(e,t){var r=a(e,t);return{segments:r.contours.strokeSegments,fillSegments:r.contours.fillSegments,resolved:r.quadTree.resolved}}function a(e,t){var r=Math.pow(2,-W),n=c(t,r),i=c(t,2*r),a=f(e,n,i),o=P(a.root,e,n);return{paddedDomain:n,rootDomain:i,quadTree:a,triangles:o,contours:j(o,e,n)}}function o(e,t,r){return{x:e,y:t,z:r}}function s(e,t,r){return{x:e,y:t,isZero:r}}function u(e,t,r){return{vertices:[e,t,r],visited:!1,next:void 0}}function c(e,t){var r=(1+t)*e.xmin-t*e.xmax,n=(1+t)*e.xmax-t*e.xmin;return{xmin:r,ymin:(1+t)*e.ymin-t*e.ymax,xmax:n,ymax:(1+t)*e.ymax-t*e.ymin,xtolerance:e.xtolerance,ytolerance:e.ytolerance}}function l(e,t){return{depth:e,vertices:t,children:void 0,center:void 0}}function p(e,t,r){e.center=E(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],t,r)}function f(e,t,r){var n=h(e,r),i=[],a=[];a.push(n);var o=1,s=!0;e:for(;a.length;){var u=i;i=a,a=u;for(var c=void 0;c=i.pop();)if(m(c,e,t)){if(d(c,e),!c.children){s=!1;break e}if(a.push(c.children[0]),a.push(c.children[1]),a.push(c.children[2]),a.push(c.children[3]),(o+=3)>=Y){s=!1;break e}}else p(c,e,t)}for(var l=0;l<i.length;l++)p(i[l],e,t);for(var l=0;l<a.length;l++)p(a[l],e,t);return{root:n,resolved:s}}function h(e,t){var r=t.xmin,n=t.xmax,i=t.ymin,a=t.ymax;return l(0,[_(r,a,e),_(n,a,e),_(n,i,e),_(r,i,e)])}function d(e,t){var r=e.depth+1,n=e.vertices[0],i=e.vertices[1],a=e.vertices[2],o=e.vertices[3],s=S(n,i,t),u=S(i,a,t),c=S(a,o,t),p=S(o,n,t),f=S(n,a,t);e.children=[l(r,[n,s,f,p]),l(r,[s,i,u,f]),l(r,[f,u,a,c]),l(r,[p,f,c,o])]}function m(e,t,r){if(e.depth<W)return!0;if(b(e,r))return!1;if(v(e,r))return!1;var n=e.vertices[0],i=e.vertices[1],a=e.vertices[2],o=e.vertices[3];if(isNaN(n.z)&&isNaN(i.z)&&isNaN(a.z)&&isNaN(o.z))return!1;if(isNaN(n.z)||isNaN(i.z)||isNaN(a.z)||isNaN(o.z))return!0;var s=E(n,i,a,o,t,r),u=M(n,i,t,r),c=M(i,a,t,r),l=M(a,o,t,r),p=M(o,n,t,r);return g(n,u,t)||g(i,u,t)||g(i,c,t)||g(a,c,t)||g(a,l,t)||g(o,l,t)||g(o,p,t)||g(n,p,t)||y(n,u,s,t,r)||y(u,i,s,t,r)||y(i,c,s,t,r)||y(c,a,s,t,r)||y(a,l,s,t,r)||y(l,o,s,t,r)||y(o,p,s,t,r)||y(p,n,s,t,r)}function y(e,t,n,i,a){if(e.z>0==t.z>0&&t.z>0==n.z>0)return!1;var o,s,u,c;if(e.z>0==t.z>0){if(o=S(e,t,i),o.z>0!=e.z>0)return!0;s=w(e,n,i,a),u=w(t,n,i,a),c=w(o,n,i,a)}else if(t.z>0==n.z>0){if(o=S(t,n,i),o.z>0!=t.z>0)return!0;s=w(t,e,i,a),u=w(n,e,i,a),c=w(o,e,i,a)}else{if(o=S(n,e,i),o.z>0!=n.z>0)return!0;s=w(n,t,i,a),u=w(e,t,i,a),c=w(o,t,i,a)}var l=a.xtolerance,p=a.ytolerance;return r.pointToSegment(p*c.x,l*c.y,p*s.x,l*s.y,p*u.x,l*u.y)>l*p}function g(e,t,r){if(isNaN(e.z)&&isNaN(t.z))return!1;if(isNaN(e.z)||isNaN(t.z))return e.z>0||t.z>0;var n=S(e,t,r),i=4*n.z-t.z-3*e.z,a=(r(.9999*e.x+1e-4*t.x,.9999*e.y+1e-4*t.y)-e.z)/1e-4,o=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.abs(i-a)>.125*o}function v(e,t){return e.vertices[1].x-e.vertices[0].x<10*t.xtolerance||e.vertices[0].y-e.vertices[3].y<10*t.ytolerance}function b(e,t){return e.vertices[0].x<t.xmin||e.vertices[0].y>t.ymax||e.vertices[2].x>t.xmax||e.vertices[2].y<t.ymin}function x(e,t){return e.x<t.xmin||e.x>t.xmax||e.y<t.ymin||e.y>t.ymax}function _(e,t,r){return o(e,t,r(e,t))}function S(e,t,r){return _(.5*(e.x+t.x),.5*(e.y+t.y),r)}function M(e,t,r,n){if(x(e,n)||x(t,n))return S(e,t,r);if(isNaN(e.z)||isNaN(t.z))return T(e,t,r,n);if(e.z>0!=t.z>0)return S(e,t,r);var i=r(.99*e.x+.01*t.x,.99*e.y+.01*t.y)-e.z,a=t.z-r(.01*e.x+.99*t.x,.01*e.y+.99*t.y);return isNaN(i)||isNaN(a)?S(e,t,r):i>0==a>0?S(e,t,r):D(o(e.x,e.y,i),o(t.x,t.y,a),r)}function E(e,t,r,n,i,a){var o=M(e,r,i,a);return e.z>0==r.z>0&&o.z>0!=e.z>0?o:(o=M(t,n,i,a),t.z>0==n.z>0&&o.z>0!=t.z>0?o:S(e,r,i))}function D(e,t,r){if(isNaN(e.z))return t;if(isNaN(t.z))return e;if(isFinite(e.z)||isFinite(t.z)){if(isFinite(e.z)){if(isFinite(t.z)){var n=1-e.z/t.z,i=1-t.z/e.z;return _(e.x/n+t.x/i,e.y/n+t.y/i,r)}return e}return t}return S(e,t,r)}function w(e,t,r,n){var i=e.x,a=t.x,u=e.y,c=t.y,l=e.z,p=t.z,f=n.xtolerance,h=n.ytolerance;if(x(e,n)||x(t,n)){var d=S(e,t,r);return s(d.x,d.y,!1)}for(;Math.abs(i-a)>f||Math.abs(u-c)>h;){var m=.5*(i+a),y=.5*(u+c),g=r(m,y);g>0==l>0?(i=m,u=y,l=g):(a=m,c=y,p=g)}if(isNaN(l))return s(a,c,!1);if(isNaN(p))return s(i,u,!1);var v=D(o(i,u,l),o(a,c,p),r),b=0===l||0===p||0===v.z||v.z>=l==p>=v.z&&Math.abs(v.z)<1e250;return s(v.x,v.y,b)}function T(e,t,r,n){if(isNaN(e.z)===isNaN(t.z))return S(e,t,r);if(isNaN(e.z)){var i=e;e=t,t=i}for(var a=e.x,s=t.x,u=e.y,c=t.y,l=e.z,p=n.xtolerance,f=n.ytolerance;Math.abs(a-s)>p||Math.abs(u-c)>f;){var h=.5*(a+s),d=.5*(u+c),m=r(h,d);isNaN(m)===isNaN(l)?(a=h,u=d,l=m):(s=h,c=d)}return o(a,u,l)}function P(e,t,r){var n={triangles:[],edgeCache:{},domain:r,fn:t};return I(e,n),n.triangles}function I(e,t){e.children&&(I(e.children[0],t),I(e.children[1],t),I(e.children[2],t),I(e.children[3],t),C(e.children[0],e.children[1],t),C(e.children[3],e.children[2],t),O(e.children[1],e.children[2],t),O(e.children[0],e.children[3],t))}function C(e,t,r){e.children&&t.children?(C(e.children[1],t.children[0],r),C(e.children[2],t.children[3],r)):e.children?(C(e.children[1],t,r),C(e.children[2],t,r)):t.children?(C(e,t.children[0],r),C(e,t.children[3],r)):A(e,t,r)}function O(e,t,r){e.children&&t.children?(O(e.children[2],t.children[1],r),O(e.children[3],t.children[0],r)):e.children?(O(e.children[2],t,r),O(e.children[3],t,r)):t.children?(O(e,t.children[1],r),O(e,t.children[0],r)):L(e,t,r)}function A(e,t,r){if(e.center&&t.center){var n,i;e.depth>=t.depth?(n=M(e.vertices[1],e.vertices[2],r.fn,r.domain),i=N(e.vertices[1],t.center,e.vertices[2],e.center,n)):(n=M(t.vertices[0],t.vertices[3],r.fn,r.domain),i=N(t.vertices[0],t.center,t.vertices[3],e.center,n)),R(i,r.edgeCache,r.domain);for(var a=0;a<4;a++)r.triangles.push(i[a])}}function L(e,t,r){if(e.center&&t.center){var n,i;e.depth>=t.depth?(n=M(e.vertices[3],e.vertices[2],r.fn,r.domain),i=N(e.vertices[2],t.center,e.vertices[3],e.center,n)):(n=M(t.vertices[1],t.vertices[0],r.fn,r.domain),i=N(t.vertices[1],t.center,t.vertices[0],e.center,n)),R(i,r.edgeCache,r.domain);for(var a=0;a<4;a++)r.triangles.push(i[a])}}function N(e,t,r,n,i){return[u(e,i,t),u(t,i,r),u(r,i,n),u(n,i,e)]}function q(e,t,r){return e.z>0&&!x(e,r)&&(!(t.z>0)||x(t,r))}function F(e,t){return e.x+","+e.y+","+t.x+","+t.y}function R(e,t,r){V(e[0],e[1],e[2],F(e[1].vertices[2],e[1].vertices[0]),t,r),V(e[1],e[2],e[3],F(e[2].vertices[0],e[2].vertices[2]),t,r),V(e[2],e[3],e[0],F(e[3].vertices[2],e[3].vertices[0]),t,r),V(e[3],e[0],e[1],F(e[0].vertices[0],e[0].vertices[2]),t,r)}function V(e,t,r,n,i,a){var o=t.vertices[0],s=t.vertices[1],u=t.vertices[2];q(s,u,a)&&(t.next=r),q(o,s,a)&&(t.next=e),q(u,o,a)&&B(t,n,i),q(o,u,a)&&k(t,n,i)}function k(e,t,r){r[t]?r[t].next=e:r[t]=e}function B(e,t,r){r[t]?e.next=r[t]:r[t]=e}function j(e,t,r){for(var i={fillAccumulator:new n.Accumulator(r),strokeAccumulator:new n.Accumulator(r),fn:t,domain:r},a=0;a<e.length;a++){var o=e[a];o.next&&!o.visited&&z(o,i)}return{strokeSegments:i.strokeAccumulator.finish().segments,fillSegments:i.fillAccumulator.finish().segments}}function z(e,t){for(;;){var r=e.vertices[0],n=e.vertices[1],i=e.vertices[2];if(G(r,n,t),G(n,i,t),G(i,r,t),e.visited)break;if(!e.next)break;e.visited=!0,e=e.next}t.strokeAccumulator.breakSegment(),t.fillAccumulator.breakSegment()}function G(e,t,r){if(q(e,t,r.domain)){var n=w(e,t,r.fn,r.domain);r.fillAccumulator.addPoint([n.x,n.y]),n.isZero?r.strokeAccumulator.addPoint([n.x,n.y]):r.strokeAccumulator.breakSegment()}}function U(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push([n.vertices[0].x,n.vertices[0].y,n.vertices[1].x,n.vertices[1].y,n.vertices[2].x,n.vertices[2].y,n.vertices[0].x,n.vertices[0].y])}return t}Object.defineProperty(t,"__esModule",{value:!0});var W=5,Y=Math.pow(2,14);t.sampleImplicit=i,t.sampleImplicitDiagnostic=a,t.buildQuadTree=f,t.triangulate=P,t.traceContours=j,t.displayTriangles=U}),define("core/math/workerconfig",[],function(){"use strict";return{pointsOfInterest:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,sliders:!0}}),define("core/math/poi-finding-accumulator",["require","exports","core/math/workerconfig","tslib","./curve-accumulator","./poi"],function(e,t,r,n,i,a){"use strict";function o(e){return Math.abs(e)<5e-8}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.domain=t,i.fn=r,i.derivative=n,i.poiData={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}},i.zeroBuffer=[],i.extremumBuffer=[],i}return n.__extends(t,e),t.prototype.getPOI=function(){return r.pointsOfInterest?(void 0!==this.fn&&(this.poiData.intercept=this.findIntercept(this.fn)),this.poiData):{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}}},t.prototype.addLinearZero=function(e){var t=-e[0]/e[1];this.isOutsideDomain(t)||(this.poiData.zeros={x:[t],y:[0]})},t.prototype.addLinearIntercept=function(e){this.isOutsideDomain(0)||(this.poiData.intercept={x:[0],y:[e[0]]})},t.prototype.isOutsideDomain=function(e){return!this.domain||void 0===this.domain.min||void 0===this.domain.max||(e<this.domain.min||e>this.domain.max||isNaN(e))},t.prototype.addPoint=function(t){0===this.segment.length&&o(t[1])&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.updateZeroBuffer(t),this.updateExtremumBuffer(t),e.prototype.addPoint.call(this,t)},t.prototype.updateZeroBuffer=function(e){if(this.fn){if(!isFinite(e[0])||!isFinite(e[1]))return void(this.zeroBuffer.length=0);switch(this.zeroBuffer.length){case 0:if(o(e[1]))return;return void this.zeroBuffer.push(e);case 1:if(0===e[1])return void this.zeroBuffer.push(e);if(e[1]>0!=this.zeroBuffer[0][1]>0){var t=a.bisectZero(this.zeroBuffer[0][0],this.zeroBuffer[0][1],e[0],e[1],this.fn);return t&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.zeroBuffer.length=0,void this.zeroBuffer.push(e)}return this.zeroBuffer.length=0,void this.zeroBuffer.push(e);case 2:if(0===e[1])return;if(e[1]>0!=this.zeroBuffer[0][1]>0){var t=a.flatCenter(this.zeroBuffer[0][0],this.zeroBuffer[0][1],this.zeroBuffer[1][0],this.zeroBuffer[1][1],e[0],e[1],this.fn);return t&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.zeroBuffer.length=0,void this.zeroBuffer.push(e)}return this.zeroBuffer.length=0,void this.zeroBuffer.push(e)}}},t.prototype.updateExtremumBuffer=function(e){if(this.fn){if(!isFinite(e[0])||!isFinite(e[1]))return void(this.zeroBuffer.length=0);switch(this.extremumBuffer.length){case 0:return void this.extremumBuffer.push(e);case 1:return e[1]===this.extremumBuffer[0][1]&&(this.extremumBuffer.length=0),void this.extremumBuffer.push(e);case 2:if(e[1]===this.extremumBuffer[1][1])return void this.extremumBuffer.push(e);if(e[1]>this.extremumBuffer[1][1]!=this.extremumBuffer[1][1]>this.extremumBuffer[0][1]){var t=this.bisectExtremumUsingDerivative(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],e[0],e[1]);if(t){this.poiData.extrema.x.push(t[0]),this.poiData.extrema.y.push(t[1]);!!!a.bisectJump(this.extremumBuffer[0][0],this.extremumBuffer[0][1],t[0],t[1],e[0],e[1],this.fn,this.ytolerance)&&t[0]>this.segment[this.segment.length-2]&&(this.pendingPoint=t)}return this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}return this.extremumBuffer.shift(),void this.extremumBuffer.push(e);case 3:if(e[1]===this.extremumBuffer[1][1])return;if(e[1]>this.extremumBuffer[1][1]!=this.extremumBuffer[1][1]>this.extremumBuffer[0][1]){var t=void 0,r=.5*(this.extremumBuffer[1][0]+this.extremumBuffer[2][0]),n=this.fn(r);return t=n===this.extremumBuffer[1][1]?a.flatCenter(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],e[0],e[1],this.fn):this.bisectExtremumUsingDerivative(this.extremumBuffer[1][0],this.extremumBuffer[1][1],r,n,this.extremumBuffer[2][0],this.extremumBuffer[2][1]),t&&(this.poiData.extrema.x.push(t[0]),this.poiData.extrema.y.push(t[1])),this.extremumBuffer.shift(),this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}return this.extremumBuffer.shift(),this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}}},t.prototype.bisectExtremumUsingDerivative=function(e,t,r,n,i,o){if(this.fn){var s;if(this.derivative){var u=this.derivative(e),c=this.derivative(i);if(!isNaN(u)&&!isNaN(c)&&u<0!=c<0){var l=a.bisectZero(e,u,i,c,this.derivative);l&&(s=[l[0],this.fn(l[0])])}}return s||(s=a.bisectExtremum(e,t,r,n,i,o,this.fn)),s}},t.prototype.breakSegment=function(){this.zeroBuffer.length=0,this.extremumBuffer.length=0,this.flushPending(),this.segment.length>2&&(this.segments.push(this.segment),o(this.segment[this.segment.length-1])&&(this.poiData.zeros.x.push(this.segment[this.segment.length-2]),this.poiData.zeros.y.push(this.segment[this.segment.length-1]))),this.segment=[]},t.prototype.findIntercept=function(e){if(!e)return{x:[],y:[]};var t=e(0);return isFinite(t)?{x:[0],y:[e(0)]}:{x:[],y:[]}},t.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0,poi:this.getPOI()}},t}(i.Accumulator);t.default=s}),define("core/types/graphmode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.X=1,t.Y=2,t.XYPOINT=3,t.XYPOINT_MOVABLE=4,t.PARAMETRIC=5,t.POLAR=6,t.POLYGONFILL=7,t.IMPLICIT=8,t.NONE=10,t.VISUALIZATION=11,t.OBJECT3D=12,t.Z_3D=13,t.PARAMETRIC_CURVE_3D=14}),define("core/math/domaintypes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emptyDomain=function(){return{type:"empty"}},t.unknownDomain=function(){return{type:"unknown"}},t.knownDomain=function(e){return isNaN(e[0])||isNaN(e[1])||e[1]<e[0]?t.emptyDomain():{type:"known",bounds:e}},t.allReals=function(){return t.knownDomain([-1/0,1/0])},t.intersectDomains=function(e,r){if("empty"===e.type||"empty"===r.type)return t.emptyDomain();if("unknown"===e.type||"unknown"===r.type)return t.unknownDomain();if(e.bounds&&r.bounds){var n=[Math.max(e.bounds[0],r.bounds[0]),Math.min(e.bounds[1],r.bounds[1])];return t.knownDomain(n)}return t.emptyDomain()}}),define("core/math/plotter",["require","exports","tslib","core/math/distance","./poi","./implicit-plotter","./curve-accumulator","./poi-finding-accumulator","core/types/graphmode","./domaintypes"],function(e,t,r,n,i,a,o,s,u,c){"use strict";function l(e,t){for(var r,n=new s.default(t,e),i=t.min;i<=t.max+t.step/2;i+=t.step)r=e(i),isFinite(r)?n.addPoint([i,r]):n.breakSegment();return n.finish()}function p(e,t){var r=new s.default(t),n=e[0]+t.min*e[1],i=e[0]+t.max*e[1];return isFinite(n)&&isFinite(i)?(r.addPoint([t.min,n]),r.addPoint([t.max,i]),r.addLinearZero(e),r.addLinearIntercept(e),r.finish()):r.finish()}function f(e,t){var r=p(e[0],t),n=p(e[1],t);return r.segments.length&&n.segments.length&&4===r.segments[0].length&&4===n.segments[0].length?{segments:[[r.segments[0][1],n.segments[0][1],r.segments[0][3],n.segments[0][3]]],resolved:!0}:{segments:[],resolved:!0}}function h(e,t){var n=e(t);return{segments:[r.__spreadArrays(n,n)],resolved:!0}}function d(e,t,r){var a=r.fn,o=r.jumpTolerance,s=e[0],u=e[1],c=t[0],l=t[1],p=n.mean(s,c),f=a(p);return i.bisectJump(s,u,p,f,c,l,a,o)}function m(e,t,r){var n=t,i=e(n);return isFinite(i)||(n=t+r,i=e(n)),isFinite(i)||(n=t-r,i=e(n)),[n,i]}function y(e,t,r){var n,a,o,s,u,c,l,p=new O(e,t,r),f=t.step/10,h=t.min;n=m(e,h,f),l=n[0],c=n[1];var d=[l,c];isFinite(c)&&p.accumulator.addPoint([l,c]);for(var y=Math.ceil((t.max-t.min)/t.step),g=1;g<=y;g++)h=(y-g)/y*t.min+g/y*t.max,a=m(e,h,f),l=a[0],c=a[1],isFinite(c)&&isFinite(d[1])?(o=C(d,[l,c],p),l=o[0],c=o[1],p.accumulator.addPoint([l,c])):isFinite(c)&&!isFinite(d[1])?(u=i.bisectFinite(d[0],d[1],l,c,e))&&(u[0]!==l&&p.accumulator.addPoint(u),s=C(u,[l,c],p),l=s[0],c=s[1],p.accumulator.addPoint([l,c])):!isFinite(c)&&isFinite(d[1])&&(u=i.bisectFinite(d[0],d[1],l,c,e))&&(u=C(d,u,p),u[0]!==d[0]&&p.accumulator.addPoint(u),p.accumulator.breakSegment()),d=[l,c];return p.accumulator.finish()}function g(e){for(var t=e.fn,r=e.domain,n=r.min,i=r.max,a=Math.floor(n),o=Math.ceil(i),s=[],u=a;u<=o;u++){var c=t(u);isFinite(u)&&isFinite(c)&&s.push([u,c])}return{segments:s,resolved:!0}}function v(e,t,r,n){function i(e,t){var i=t%2==0?1:-1;if(!n&&-1===i)return!1;for(var a=t*(Math.PI/r),o=[u,u+1,u+2,u+3],s=!1,c=0,p=o.length;c<p;c++){var f=e(o[c]),h=e(o[c]+a);if(isFinite(f)&&isFinite(h)&&(s=!0),isFinite(f)!==isFinite(h)||Math.abs(f-i*h)>l)return!1}return!!s}var a,o,s,u=t.min,c=t.max-t.min,l=t.xtolerance&&t.ytolerance?Math.min(t.xtolerance,t.ytolerance):t.tolerance?t.tolerance:0,p=Math.floor(c/(Math.PI/r));for(a=1;a<=p;a++)if(i(e,a)){for(s=a,o=2;o*a<=p;o++)i(e,o*a)||(s=void 0);if(s)break}return s?s*(Math.PI/r):null}function b(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function x(e,t){return t.map=b,y(e,t)}function _(e,t){for(var r=e.min,n=e.max,i=e.step,a=n-r,o=Math.ceil(a/i),s=a/o,u=0;u<o;u++)t(r+u*s);t(n)}function S(e,t){if(t.max<t.min)return{segments:[],resolved:!0};var r=new o.Accumulator(t),n=t.min,i=e(n);isFinite(i[0])&&isFinite(i[1])&&r.addPoint(i);var a;return _(t,function(t){a=e(t),M(e,n,i,t,a,10,r),n=t,i=a}),r.finish()}function M(e,t,r,i,a,o,s){if(i!==t){var u=s.xtolerance,c=s.ytolerance,l=s.ztolerance,p=n.mean(t,i),f=e(p),h=isFinite(r[0])&&isFinite(r[1])&&(2===r.length||isFinite(r[2])),d=isFinite(a[0])&&isFinite(a[1])&&(2===a.length||isFinite(a[2])),m=isFinite(f[0])&&isFinite(f[1])&&(2===f.length||isFinite(f[2]));if(0===o||p===t||p===i)return s.breakSegment(),void(d&&s.addPoint(a));if(h||d){if(h!==d){for(var y=t,g=i,v=r,b=a;t!==p&&p!==i;)m==h?(t=p,r=f,h=m):(i=p,a=f,d=m),p=t+(i-t)/2,f=e(p),m=isFinite(f[0])&&isFinite(f[1])&&(2===f.length||isFinite(f[2]));return void(h?(M(e,y,v,t,r,o-1,s),s.breakSegment()):(s.breakSegment(),s.addPoint(a),M(e,i,a,g,b,o-1,s)))}if(h&&m&&d){var x=n.pointToSegmentParameter(f[0],f[1],f[2]||0,r[0],r[1],r[2]||0,a[0],a[1],a[2]||0);if(x>.2&&x<.8&&Math.abs(f[0]-(r[0]+x*(a[0]-r[0])))<=u&&Math.abs(f[1]-(r[1]+x*(a[1]-r[1])))<=c&&(2===r.length||Math.abs(f[2]-(r[2]+x*(a[2]-r[2])))<=l))return void s.addPoint(a)}r[0]===f[0]&&r[1]===f[1]||M(e,t,r,p,f,o-1,s),a[0]===f[0]&&a[1]===f[1]||M(e,p,f,i,a,o-1,s)}}}function E(e,t){for(var r=e.fn,n=t.xmin,i=t.xmax,a=t.ymin,o=t.ymax,s=(i-n)/30,u=(o-a)/30,c=[],l=[],p=[],f=s/1e3,h=u/1e3,d=0;d<30;d++)for(var m=0;m<30;m++){var y=n+d*s,g=a+m*u,v=r(y,g);c.push(y,g,v);var b=r(y+f,g)-v,x=r(y,g+h)-v,_=b*h,S=x*f,M=-f*h,E=Math.sqrt(_*_+S*S+M*M);l.push(_/E,S/E,M/E)}for(var d=0;d<29;d++)for(var m=0;m<29;m++){var D=30*m+d,w=30*m+d+1,T=30*(m+1)+d,P=30*(m+1)+d+1;p.push(D,T,w),p.push(T,P,w)}return{cacheKey:e.source+":"+JSON.stringify(t),positions:new Float32Array(c),normals:new Float32Array(l),faces:new Int16Array(p)}}function D(e){if(!e)return!1;var t=e.viewport.xmin,r=e.viewport.xmax,n=e.viewport.ymin,i=e.viewport.ymax;return!(!isFinite(t)||!isFinite(r)||r<=t)&&(!(!isFinite(n)||!isFinite(i)||i<=n)&&(!(!isFinite(e.screen.width)||e.screen.width<=0)&&!(!isFinite(e.screen.height)||e.screen.height<=0)))}function w(e,t,r){var n,i,a=e.viewport.xmin,o=e.viewport.xmax,s=e.viewport.ymin,l=e.viewport.ymax,p=e.trigAngleMultiplier||1,f=e.oversample||4,h=1/f*(o-a)/e.screen.width,d=1/f*(l-s)/e.screen.height,m=t.domainBound;switch(t.graphMode){case u.X:switch(n=c.intersectDomains(c.knownDomain([s,l]),m),n.type){case"empty":return!1;case"known":s=n.bounds[0],l=n.bounds[1]}i={min:s,max:l,xtolerance:d,ytolerance:h,step:d};break;case u.Y:switch(n=c.intersectDomains(c.knownDomain([a,o]),m),n.type){case"empty":return!1;case"known":a=n.bounds[0],o=n.bounds[1]}i={min:a,max:o,xtolerance:h,ytolerance:d,step:h};break;case u.POLAR:if(!t.domain)throw new Error("Expected polar graph to have domain");if(i={min:t.domain.min,max:t.domain.max,step:2*Math.PI/p/1e3,tolerance:Math.min(h,d)},!t.domain.isExplicit){var y=v(r,i,p,"="===t.operator);y&&(i.max=i.min+y)}i.step=Math.max(i.step,(i.max-i.min)/11999);break;case u.PARAMETRIC:case u.PARAMETRIC_CURVE_3D:var g=t.domain?t.domain.min:0,b=t.domain?t.domain.max:1,x=t.domain?t.domain.step:.01;switch(n=c.intersectDomains(c.knownDomain([g,b]),m),n.type){case"empty":return!1;case"known":g=n.bounds[0],b=n.bounds[1]}i={min:g,max:b,step:x,xtolerance:h,ytolerance:d,ztolerance:Math.min(h,d)};break;case u.IMPLICIT:i={xmin:a,xmax:o,ymin:s,ymax:l,xtolerance:h,ytolerance:d};break;case u.Z_3D:return{xmin:-10,xmax:10,ymin:-10,ymax:10};default:return!1}return i}function T(e){var t,r,n,i=e.viewState,o=e.graphInfo,s=e.compiled,c=e.derivative,l=e.discrete,d=e.maxOverride,m=s.fn,v=w(i,o,m),b=o.graphMode;if(v){switch(b){case u.X:case u.Y:var _=c?c.fn:void 0;if(l){var M=v,D=M.min,T=M.max,P=M.step;t=g({fn:m,domain:{min:Math.max(D,0),max:void 0!==d?Math.min(d,T):T,step:P}})}else t=o.isLinear?p(o.linearCoefficients,v):y(m,v,_);break;case u.POLAR:t=x(m,v);break;case u.IMPLICIT:t=a.sampleImplicit(m,v);break;case u.PARAMETRIC:v.step||(v.step=(v.max-v.min)/1e3),t=v.max===v.min?h(m,v.min):o.isLinear?f(o.linearCoefficients,v):S(m,v);break;case u.PARAMETRIC_CURVE_3D:return v.step||(v.step=(v.max-v.min)/1e3),t=v.max===v.min?h(m,v.min):S(m,v),{graphMode:u.PARAMETRIC_CURVE_3D,segments:t.segments,cacheKey:s.source+":"+JSON.stringify(v),color:o.color,style:"dummy"};case u.Z_3D:return{meshData:E(s,v),color:o.color,graphMode:u.Z_3D,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},compiled:s,style:"dummy"};default:throw new Error("Programming Error: unexpected graphmode "+b)}n=t.poi}else t={segments:[],resolved:!0};if((!n||n.zeros.x.length+n.extrema.x.length+n.intercept.x.length>250)&&(n={zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}),b===u.X)for(var I in n)if(n.hasOwnProperty(I)){var C=I;r=n[C].y,n[C].y=n[C].x,n[C].x=r}var O={segments:t.segments,resolved:t.resolved,graphMode:b,color:o.color,style:l?o.pointStyle:o.lineStyle,lineWidth:o.lineWidth,operator:o.operator,poi:n,compiled:s};if(b===u.POLAR){var A=v;O.sampledDomain={min:A.min,max:A.max,step:A.step}}return t.fillSegments&&(O.fillSegments=t.fillSegments),O}function P(e,t,r){var n,i,a,o,s=[],c=null;switch(r){case u.POLAR:c=b;break;case u.X:c=function(e){return[e[1],e[0]]}}for(n=0;n<e.length;n++)for(o=e[n],i=0;i<o.length;i+=2)a=[o[i],o[i+1]],c&&(a=c(a)),s.push(a[0],a[1]);for(n=t.length-1;n>=0;n--)for(o=t[n],i=o.length-2;i>=0;i-=2)a=[o[i],o[i+1]],c&&(a=c(a)),s.push(a[0],a[1]);return s}function I(e,t,r){for(var i=function(e){var t=e[e.length-1];return t[t.length-2]},a=[],o=0,s=0,u=[],c=[],l=-1/0,p=-1/0;;){if(l<=p){if(o>=t.length)break;c.push(t[o++])}if(p<=l){if(s>=e.length)break;u.push(e[s++])}if(l=i(c),p=i(u),n.approx(l,p,4)){a.push(P(u,c,r)),c=[],u=[];var f=Math.max(l,p);l=f,p=f}}return a}Object.defineProperty(t,"__esModule",{value:!0});var C=function(e,t,r){var n=r.fn,i=r.jumpTolerance,a=r.accumulator;if(!isFinite(i)||i<=0)return t;var o=d(e,t,r);if(!o)return t;for(var s=(t[0]-e[0])/10,u=[-s,s],c=t,l=0;l<u.length;l++){var p=e[0]+u[l],f=n(p);isFinite(f)||(p=e[0],f=e[1],p=e[0],f=e[1]);var h=t[0]+u[l],m=n(h);if(isFinite(m)?c=[h,m]:(h=t[0],m=t[1]),d([p,f],[h,m],r)){var y=o[0],g=o[1];return a.addPoint(y),a.breakSegment(),a.addPoint(g),t}}return c},O=function(){function e(e,t,r){this.derivative=r,this.accumulator=new s.default(t,e,r),this.fn=e,this.jumpTolerance=t.ytolerance||t.tolerance||0}return e}();t.default={sampleXYNaive:l,sampleLinear:p,sampleXY:y,findPiPeriod:v,samplePolar:x,sampleParametricRecursive:S,subsampleParametricRecursive:M,validateViewState:D,computeDomain:w,computeGraphData:T,polygonsFromSegments:I}}),define("core/lib/worker-i18n",["require","exports"],function(e,t){"use strict";function r(e,t){return{msg:e,vars:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.t=r}),define("core/math/mathshim",["require"],function(e){"use strict";var t={};return t.cosh=Math.cosh||function(e){return.5*(Math.exp(e)+Math.exp(-e))},t.sinh=Math.sinh&&0!==Math.sinh(1e-20)?Math.sinh:function(e){var r=e>0?1:-1;return e=e>0?e:-e,.5*-r*Math.exp(e)*t.expm1(-2*e)},t.tanh=Math.tanh&&0!==Math.tanh(1e-20)?Math.tanh:function(e){var r=e>0?1:-1;e=e>0?e:-e;var n=t.expm1(-2*e);return-r*n/(2+n)},t.acosh=Math.acosh||function(e){return e<1?NaN:Math.log(e+t.sqrtxsqm1(e))},t.asinh=Math.asinh&&0!==Math.asinh(1e-20)?Math.asinh:function(e){var r=e>0?1:-1;return e=e>0?e:-e,1+e*e==1?r*t.log1p(e):r*Math.log(e+t.sqrtxsqp1(e))},t.atanh=Math.atanh&&0!==Math.atanh(1e-20)?Math.atanh:function(e){return.5*(t.log1p(e)-t.log1p(-e))},t.expm1=Math.expm1||function(e){return e+.5*e*e===e?e:Math.exp(e)-1},t.log1p=Math.log1p||function(e){return e-.5*e*e===e?e:Math.log(1+e)},t.sqrtxsqp1=function(e){var t=e*e;return 1+t===1?1:1+t===t?Math.abs(e):Math.sqrt(t+1)},t.sqrtxsqm1=function(e){var t=e*e;return t<1?NaN:t-1===t?Math.abs(e):Math.sqrt(t-1)},t}),define("core/math/quadrature",["require","core/math/mathshim","core/math/poi"],function(e){"use strict";function t(e,t,r){return.5*(t*(2-r)+e*r)}function r(e,t,r){var n=.5*(t+r),i=l(t,e(t),n,e(n),r,e(r),e,0);return i?.5*(i[0][0]+i[1][0]):n}function n(e,t,r,n,i){return{x1:e,x2:t,value:r,error:n,minerror:i}}function i(e,r,n){var i=Math.abs(e(t(r,n,d))),a=Math.abs(e(t(r,n,2*d)));return!(i<d||a<d)&&i>1.95*a}function a(e,r,a){var o,s,u=t(a,r,v[0]),c=t(r,a,v[0]),l=e(u),f=e(c),h=t(r,a,1),d=e(h);if(isFinite(d)&&!isFinite(l)){if(o=p(u,l,h,d,e),Math.abs((o[0]-r)/(a-r))>y)return n(r,a,NaN,NaN,NaN);r=o[0],l=o[1]}if(isFinite(d)&&!isFinite(f)){if(s=p(h,d,c,f,e),Math.abs((s[0]-a)/(a-r))>y)return n(r,a,NaN,NaN,NaN);a=s[0],f=s[1]}if(isFinite(l)&&isFinite(f)&&!isFinite(d)){if(o=p(u,l,h,d,e),s=p(h,d,c,f,e),Math.abs((s[0]-o[0])/(a-r))>y)return n(r,a,NaN,NaN,NaN);d=.5*(o[1]+s[1])}if(i(e,r,a)||i(e,a,r))return n(r,a,NaN,NaN,NaN);for(var m=d,x=0,_=0,M=0,E=0,D=0,w=0,T=0;T<g;T+=4)D=e(t(r,a,v[T])),w=e(t(a,r,v[T])),E=Math.max(E,Math.abs(D),Math.abs(w)),x+=b[T]*(D+w),D=e(t(r,a,v[T+1])),w=e(t(a,r,v[T+1])),E=Math.max(E,Math.abs(D),Math.abs(w)),M+=b[T+1]*(D+w),D=e(t(r,a,v[T+2])),w=e(t(a,r,v[T+2])),E=Math.max(E,Math.abs(D),Math.abs(w)),_+=b[T+2]*(D+w),D=e(t(r,a,v[T+3])),w=e(t(a,r,v[T+3])),E=Math.max(E,Math.abs(D),Math.abs(w)),M+=b[T+3]*(D+w);var P,I=m+x,C=I+_,O=C+M,A=Math.abs(_-I),L=Math.abs(M-C),N=S*(a-r)*O,q=S*Math.abs(a-r)*E*b[0];return P=0===A?S*Math.abs(a-r)*L:S*Math.abs(a-r)*L*(L/A)*(L/A),P=Math.max(P,q),n(r,a,N,P,q)}function o(e){for(var t=-1/0,r=-1/0,n=-1,i=0,a=0;a<e.length;a++){var o=e[a];i+=o.value,o.error>t&&(t=o.error,n=a),o.minerror>r&&(r=o.minerror)}return{maxerror:t,maxminerror:r,maxindex:n,totalvalue:i}}function s(e,n,i,s){if(void 0===s&&(s=32),!isFinite(n)||!isFinite(i))return NaN;for(var u=[a(e,n,i)],c=o(u),l=1;l<s&&(!(Math.abs(c.maxerror/c.totalvalue)<=32*m||c.maxerror<=32*m||c.maxerror<=32*c.maxminerror)&&isFinite(c.maxerror)&&isFinite(c.maxminerror));l++){var p=u[u.length-1];u[u.length-1]=u[c.maxindex],u[c.maxindex]=p;var f=u.pop(),h=r(e,t(f.x2,f.x1,.125),t(f.x1,f.x2,.125));u.push(a(e,f.x1,h)),u.push(a(e,h,f.x2)),c=o(u)}return isFinite(c.maxerror)&&isFinite(c.maxminerror)?Math.abs(c.totalvalue)<=10*c.maxminerror?0:c.totalvalue:NaN}var u=e("core/math/mathshim"),c=e("core/math/poi"),l=c.bisectJump,p=c.bisectFinite,f=3.154019550531224,h=Math.pow(2,-13),d=h*h,m=d*d,y=d,g=32,v=[],b=[];!function(e,t){for(var r=g;r>0;r--){var n=f/g*r,i=u.sinh(n),a=u.cosh(Math.PI/2*i),o=1/(Math.exp(Math.PI/2*i)*a),s=u.cosh(n)/(a*a);e.push(o),t.push(s)}}(v,b);for(var x=0,_=0;_<b.length;_++)x+=b[_];var S=1/(1+2*x);return{quad:s}}),define("core/math/tofraction",["require","exports"],function(e,t){"use strict";function r(e,t){if(void 0===t&&(t=1e6),e===1/0)return{n:1/0,d:1};if(e===-1/0)return{n:-1/0,d:1};if(!isFinite(e))return{n:NaN,d:1};for(var r,n,i,a=0,o=1,s=1,u=0;;){if(r=Math.floor(e),n=r*o+a,(i=r*u+s)>t)break;if(a=o,s=u,o=n,u=i,e===r)break;e=1/(e-r)}return{n:o,d:u}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}),function(e){"use strict";function t(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function r(e,t){return e<<t|e>>>32-t}function n(e,n,i,a,o,s){return t(r(t(t(n,e),t(a,s)),o),i)}function i(e,t,r,i,a,o,s){return n(t&r|~t&i,e,t,a,o,s)}function a(e,t,r,i,a,o,s){return n(t&i|r&~i,e,t,a,o,s)}function o(e,t,r,i,a,o,s){return n(t^r^i,e,t,a,o,s)}function s(e,t,r,i,a,o,s){return n(r^(t|~i),e,t,a,o,s)}function u(e,r){e[r>>5]|=128<<r%32,e[14+(r+64>>>9<<4)]=r;var n,u,c,l,p,f=1732584193,h=-271733879,d=-1732584194,m=271733878;for(n=0;n<e.length;n+=16)u=f,c=h,l=d,p=m,f=i(f,h,d,m,e[n],7,-680876936),m=i(m,f,h,d,e[n+1],12,-389564586),d=i(d,m,f,h,e[n+2],17,606105819),h=i(h,d,m,f,e[n+3],22,-1044525330),f=i(f,h,d,m,e[n+4],7,-176418897),m=i(m,f,h,d,e[n+5],12,1200080426),d=i(d,m,f,h,e[n+6],17,-1473231341),h=i(h,d,m,f,e[n+7],22,-45705983),f=i(f,h,d,m,e[n+8],7,1770035416),m=i(m,f,h,d,e[n+9],12,-1958414417),d=i(d,m,f,h,e[n+10],17,-42063),h=i(h,d,m,f,e[n+11],22,-1990404162),f=i(f,h,d,m,e[n+12],7,1804603682),m=i(m,f,h,d,e[n+13],12,-40341101),d=i(d,m,f,h,e[n+14],17,-1502002290),h=i(h,d,m,f,e[n+15],22,1236535329),f=a(f,h,d,m,e[n+1],5,-165796510),m=a(m,f,h,d,e[n+6],9,-1069501632),d=a(d,m,f,h,e[n+11],14,643717713),h=a(h,d,m,f,e[n],20,-373897302),f=a(f,h,d,m,e[n+5],5,-701558691),m=a(m,f,h,d,e[n+10],9,38016083),d=a(d,m,f,h,e[n+15],14,-660478335),h=a(h,d,m,f,e[n+4],20,-405537848),f=a(f,h,d,m,e[n+9],5,568446438),m=a(m,f,h,d,e[n+14],9,-1019803690),d=a(d,m,f,h,e[n+3],14,-187363961),h=a(h,d,m,f,e[n+8],20,1163531501),f=a(f,h,d,m,e[n+13],5,-1444681467),m=a(m,f,h,d,e[n+2],9,-51403784),d=a(d,m,f,h,e[n+7],14,1735328473),h=a(h,d,m,f,e[n+12],20,-1926607734),f=o(f,h,d,m,e[n+5],4,-378558),m=o(m,f,h,d,e[n+8],11,-2022574463),d=o(d,m,f,h,e[n+11],16,1839030562),h=o(h,d,m,f,e[n+14],23,-35309556),f=o(f,h,d,m,e[n+1],4,-1530992060),m=o(m,f,h,d,e[n+4],11,1272893353),d=o(d,m,f,h,e[n+7],16,-155497632),h=o(h,d,m,f,e[n+10],23,-1094730640),f=o(f,h,d,m,e[n+13],4,681279174),m=o(m,f,h,d,e[n],11,-358537222),d=o(d,m,f,h,e[n+3],16,-722521979),h=o(h,d,m,f,e[n+6],23,76029189),f=o(f,h,d,m,e[n+9],4,-640364487),m=o(m,f,h,d,e[n+12],11,-421815835),d=o(d,m,f,h,e[n+15],16,530742520),h=o(h,d,m,f,e[n+2],23,-995338651),f=s(f,h,d,m,e[n],6,-198630844),m=s(m,f,h,d,e[n+7],10,1126891415),d=s(d,m,f,h,e[n+14],15,-1416354905),h=s(h,d,m,f,e[n+5],21,-57434055),f=s(f,h,d,m,e[n+12],6,1700485571),m=s(m,f,h,d,e[n+3],10,-1894986606),d=s(d,m,f,h,e[n+10],15,-1051523),h=s(h,d,m,f,e[n+1],21,-2054922799),f=s(f,h,d,m,e[n+8],6,1873313359),m=s(m,f,h,d,e[n+15],10,-30611744),d=s(d,m,f,h,e[n+6],15,-1560198380),h=s(h,d,m,f,e[n+13],21,1309151649),f=s(f,h,d,m,e[n+4],6,-145523070),m=s(m,f,h,d,e[n+11],10,-1120210379),d=s(d,m,f,h,e[n+2],15,718787259),h=s(h,d,m,f,e[n+9],21,-343485551),f=t(f,u),h=t(h,c),
d=t(d,l),m=t(m,p);return[f,h,d,m]}function c(e){var t,r="",n=32*e.length;for(t=0;t<n;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function l(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function p(e){return c(u(l(e),8*e.length))}function f(e,t){var r,n,i=l(e),a=[],o=[];for(a[15]=o[15]=void 0,i.length>16&&(i=u(i,8*e.length)),r=0;r<16;r+=1)a[r]=909522486^i[r],o[r]=1549556828^i[r];return n=u(a.concat(l(t)),512+8*t.length),c(u(o.concat(n),640))}function h(e){var t,r,n="0123456789abcdef",i="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),i+=n.charAt(t>>>4&15)+n.charAt(15&t);return i}function d(e){return unescape(encodeURIComponent(e))}function m(e){return p(d(e))}function y(e){return h(m(e))}function g(e,t){return f(d(e),d(t))}function v(e,t){return h(g(e,t))}function b(e,t,r){return t?r?g(t,e):v(t,e):r?m(e):y(e)}"function"==typeof define&&define.amd?define("core/lib/md5",[],function(){return b}):"object"==typeof module&&module.exports?module.exports=b:e.md5=b}(this),define("core/math/builtin",["require","core/math/mathshim","core/math/distance","core/math/quadrature","core/math/tofraction","core/math/poi","core/lib/md5"],function(e){"use strict";function t(e,t,r){return Math.max(t,Math.min(r,e))}function r(e){return!(e>1e12)&&Math.round(m*e)*Math.PI===e}function n(e){if(e>1e12)return!1;var t=Math.round(2*m*e);return t%2==1&&t*Math.PI==2*e}function i(e,t,r){return r<0?p.tcdf(-1/0,e,t):r>0?p.tcdf(-1/0,-e,t):2*p.tcdf(-1/0,-Math.abs(e),t)}var a=e("core/math/mathshim"),o=e("core/math/distance"),s=e("core/math/quadrature"),u=e("core/math/tofraction").default,c=e("core/math/poi").floatMiddle,l=e("core/lib/md5"),p={};p.cosh=a.cosh,p.sinh=a.sinh,p.tanh=a.tanh,p.acosh=a.acosh,p.asinh=a.asinh,p.atanh=a.atanh,p.expm1=a.expm1,p.log1p=a.log1p,p.sqrtxsqp1=a.sqrtxsqp1,p.sqrtxsqm1=a.sqrtxsqm1,p.mod=function(e,t){return e-t*Math.floor(e/t)},p.round=function(e,t){if(void 0===t&&(t=0),0===(t=Math.round(t)))return Math.round(e);var r=Math.pow(10,t);return Math.round(e*r)/r},p.sign=Math.sign||function(e){return 0===e?0:e>0?1:e<0?-1:NaN},p.lcm=function(e,t){e=Math.round(e),t=Math.round(t);var r=p.gcd(e,t);return Math.abs(e/r*t)},p.gcd=function(e,t){if(e=Math.round(e),t=Math.round(t),e<0&&(e=-e),t<0&&(t=-t),t>e){var r=t;t=e,e=r}if(0===t)return e;for(var n=e%t;n>0;)e=t,t=n,n=e%t;return t},p.listGCD=function(e){if(0===e.length)return NaN;for(var t=e[0],r=1;r<e.length;r++)t=p.gcd(t,e[r]);return t},p.listLCM=function(e){if(0===e.length)return NaN;for(var t=e[0],r=1;r<e.length;r++)t=p.lcm(t,e[r]);return t},p.nCr=function(e,t){if(e=Math.round(e),(t=Math.round(t))>e||e<0||t<0)return 0;if(t===1/0||e===1/0)return NaN;for(var r=1,n=0;n<t;n++)r*=(e-n)/(n+1);return r},p.nPr=function(e,t){if(e=Math.round(e),(t=Math.round(t))>e||e<0||t<0)return 0;if(t===1/0||e===1/0)return NaN;for(var r=1,n=0;n<t;n++)r*=e-n;return r},p.factorial=function(e){return p.gamma(e+1)},p.gamma=function(e){if(e<0)return Math.PI/(p.sin(Math.PI*e)*p.gamma(1-e));if(e>170)return 1/0;var t,r=Math.round(e)===e;return t=e<15?f(e):e<120?h(e):Math.exp(d(e)),r?Math.round(t):t};var f=function(e){var t=1+e*(4.077131788261185+e*(7.024675027156382+e*(6.657107767450176+e*(3.766266976716022+e*(1.2792371666711133+e*(.24304596436338005+.020049769312165774*e)))))),r=1+e*(4.154347453162709+e*(7.270007565107539+e*(6.97805297331391+e*(3.989651532924167+e*(1.367176195613119+e*(.26175627691546965+.021742722739397567*e))))));return Math.E*Math.pow((1+e)/Math.E,1+e)/(e*Math.sqrt(1+e))*(t/r)},h=function(e){var t=e-1;return Math.pow(t,t)*Math.exp(g(t)-t)*Math.sqrt(2*Math.PI*t)},d=function(e){var t=e-1;return t*(Math.log(t)-1)+.5*Math.log(2*Math.PI*t)+g(t)};p.lnGamma=function(e){return e<0?NaN:e<15?Math.log(f(e)):d(e)},p.bernoulliTable=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870],p.cotDerivative=function(e,t){if(e!==Math.floor(e))return NaN;if(e<0)return NaN;if(0===e)return 1/p.tan(t);var r=p.sin(t);if(1===e)return-1/(r*r);var n=p.cos(t);if(2===e)return 2*n/(r*r*r);var i,a,o,s,u,c=[0,2];for(a=3;a<=e;a++){for(i=[],o=0;o<a;o++)s=0,u=0,o>0&&(s=(a-o+1)*c[o-1]),o+2<a&&(u=(o+1)*c[o+1]),i.push(-(s+u));c=i}var l=0;for(o=e-1;o>=0;o--)l=i[o]+n*l;return l/Math.pow(r,e+1)},p.polyGamma=function(e,t){if(e<0)return NaN;if(e!==Math.floor(e))return NaN;var r=e%2==0?-1:1;if(t<0)return-r*p.polyGamma(e,1-t)-Math.pow(Math.PI,e+1)*p.cotDerivative(e,Math.PI*t);for(var n=p.factorial(e),i=0,a=Math.pow(t,-(e+1));t<10;)i+=a,t++,a=Math.pow(t,-(e+1));i+=0===e?-Math.log(t):a*t/e,i+=.5*a;for(var o=p.bernoulliTable,s=e+1,u=2,c=a*t*s/u,l=1/(t*t),f=1;f<=14;f++)c*=l,i+=c*o[f-1],s++,u++,c*=s/u,s++,u++,c*=s/u;return n*r*i},p.toFraction=u,p.log=function(e){var t=Math.log(e);return Math.exp(Math.round(t))===e?Math.round(t):t},p.log_base=function(e,t){if(0===t)return NaN;var r=Math.log(e)/Math.log(t);return Math.pow(t,Math.round(r))===e?Math.round(r):r},p.common_log=function(e){return p.log_base(e,10)},p.pow=function(e,t){if(!isFinite(e)&&0===t)return NaN;if(e>=0||t===Math.floor(t))return Math.pow(e,t);var r=p.toFraction(t,100);return o.approx(r.n/r.d,t,2)&&r.d%2==1?(r.n%2==0?1:-1)*Math.pow(-e,t):NaN},p.nthroot=function(e,t){return p.pow(e,1/t)};var m=1/Math.PI;p.sin=function(e){return r(Math.abs(e))?0:Math.sin(e)},p.cos=function(e){return n(Math.abs(e))?0:Math.cos(e)},p.tan=function(e){var t=Math.abs(e);return r(t)?0:n(t)?1/0:Math.tan(e)},p.sec=function(e){return n(Math.abs(e))?1/0:1/Math.cos(e)},p.csc=function(e){return r(Math.abs(e))?1/0:1/Math.sin(e)},p.cot=function(e){var t=Math.abs(e);return r(t)?1/0:n(t)?0:1/Math.tan(e)},p.acot=function(e){return Math.PI/2-Math.atan(e)},p.acsc=function(e){return Math.asin(1/e)},p.asec=function(e){return Math.acos(1/e)},p.sech=function(e){return 1/p.cosh(e)},p.csch=function(e){return 1/p.sinh(e)},p.coth=function(e){return 1/p.tanh(e)},p.asech=function(e){return p.acosh(1/e)},p.acsch=function(e){return p.asinh(1/e)},p.acoth=function(e){return p.atanh(1/e)},p.mean=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length},p.total=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t};var y=function(e){return e>50?Math.exp(.5*((1-e)*a.log1p(-1/(e-1))-1)+g(.5*(e-1))-g(.5*(e-2)))*Math.sqrt((1-1/e)/(2*Math.PI)):p.gamma((e+1)/2)/(p.gamma(e/2)*Math.sqrt(e*Math.PI))},g=function(e){var t=e*e;return(.08333333333333333-(.002777777777777778-(.0007936507936507937-(.0005952380952380953-.0008417508417508417/t)/t)/t)/t)/e};p.tpdf=function(e,t){return t<=0?NaN:y(t)*Math.pow(1+e*e/t,-(t+1)/2)};var v=function(e,t){if(t>0)return 1-v(e,-t);if(t===-1/0)return 0;var r=Math.sqrt(2*e/(e+1));if(Math.abs(t/r)<.001)return.5*(1+Math.sqrt(Math.PI)*y(e)*r*p.erf(t/r));if(t/e<-1e3){var n=t*t;return y(e)*Math.pow(e,.5*(e-1))*Math.pow(Math.abs(t),-e)*(1-e*e*(e+1)*(1/(2+e)+e*(e+3)/(4*(4+e)*n))/(2*n))}var i=Math.sqrt(t*t+e);return b((t+i)/(2*i),e/2,e/2)};p.tcdf=function(e,t,r){return r<=0?NaN:e===-1/0?v(r,t):e>0&&t>0?v(r,-e)-v(r,-t):v(r,t)-v(r,e)};var b=function(e,t,r){if(e<0||e>1)throw new RangeError("First argument must be between 0 and 1.");if(1===t&&1===r)return e;if(0===e)return 0;if(1===e)return 1;if(0===t)return 1;if(0===r)return 0;var n=Math.exp(p.lnGamma(t+r)-p.lnGamma(t)-p.lnGamma(r)+t*Math.log(e)+r*a.log1p(-e));return e<(t+1)/(t+r+2)?n*x(e,t,r)/t:1-n*x(1-e,r,t)/r},x=function(e,t,r){var n,i,a,o,s,u,c,l,p,f=1;for(c=t+r,p=t+1,l=t-1,a=1,o=1-c*e/p,Math.abs(o)<1e-30&&(o=1e-30),o=1/o,u=o;f<=100&&(n=2*f,i=f*(r-f)*e/((l+n)*(t+n)),o=1+i*o,Math.abs(o)<1e-30&&(o=1e-30),a=1+i/a,Math.abs(a)<1e-30&&(a=1e-30),o=1/o,u*=o*a,i=-(t+f)*(c+f)*e/((t+n)*(p+n)),o=1+i*o,Math.abs(o)<1e-30&&(o=1e-30),a=1+i/a,Math.abs(a)<1e-30&&(a=1e-30),o=1/o,s=o*a,u*=s,!(Math.abs(s-1)<3e-7));f++);return u},_=function(e,t,r){return(e-t)/(Math.SQRT2*Math.abs(r))},S=function(e){return e<0?.5*Math.exp(-e*e)*p.erfcx(-e):1-.5*Math.exp(-e*e)*p.erfcx(e)};p.normalcdf=function(e,t,r,n){var i=_(t,r,n);if(e===-1/0)return S(i);var a=_(e,r,n);return e>0&&t>0?S(-a)-S(-i):S(i)-S(a)},p.normalpdf=function(e,t,r){return 1/Math.sqrt(2*Math.PI*r*r)*Math.exp(-(e-t)*(e-t)/(2*r*r))},p.random=function(e){var t=l(e);return(4294967296*(2097151&parseInt(t.slice(0,8),16))+parseInt(t.slice(8,16),16))/9007199254740992},p.uniformSample=function(e,t,r){return p.random(e)*(r-t)+t},p.normalSample=function(e,t,r){var n,i,a,o,s=0;do{n=e+"::sc"+s,s+=1,i=2*p.uniformSample(n,0,1)-1,n=e+"::sc"+s,s+=1,a=2*p.uniformSample(n,0,1)-1,o=i*i+a*a}while(o>=1||0===o);return t+r*i*Math.sqrt(-2*Math.log(o)/o)},p.tSample=function(e,t){if(t<=0)return NaN;var r,n,i,a,o=0;do{r=e+"::sc"+o,o+=1,n=2*p.uniformSample(r,0,1)-1,r=e+"::sc"+o,o+=1,i=2*p.uniformSample(r,0,1)-1,a=n*n+i*i}while(a>1);var s=n*n/a,u=t*(Math.pow(a,-2/t)-1);return r=e+"::sc"+o,o+=1,(p.uniformSample(r,0,1)<.5?-1:1)*Math.sqrt(s*u)},p.binomSample=function(e,r,n){return(r=t(Math.round(r),0,1/0))===1/0?NaN:(n=t(n,0,1),p.invBinom(p.uniformSample(e,0,1),r,n))},p.poissonSample=function(e,t){return t<=0?NaN:p.invPoisson(p.uniformSample(e,0,1),t)};var M=function(e,t,r){if(e>=t)return 1;if(e<0)return 0;for(var n=r/(1-r),i=Math.pow(1-r,t),a=i,o=1;o<=Math.min(t,e);o++)i*=(t-o+1)/o*n,a+=i;return a};p.binomcdf=function(e,r,n,i){return(n=t(Math.round(n),0,1/0))===1/0?NaN:(i=t(i,0,1),r<0?0:(e=Math.ceil(e),r=Math.floor(r),e===-1/0?M(r,n,i):M(r,n,i)-M(e-1,n,i)))},p.binompdf=function(e,r,n){return e=Math.round(e),(r=t(Math.round(r),0,1/0))===1/0?NaN:(n=t(n,0,1),e<0||e>r?0:p.nCr(r,e)*Math.pow(n,e)*Math.pow(1-n,r-e))},p.poissonpdf=function(e,t){return t<=0?NaN:(e=Math.round(e),e<0?0:Math.exp(-t+e*Math.log(t)-p.lnGamma(e+1)))};var E=function(e,t){if(e===1/0)return 1;if(e<0)return 0;for(var r=1,n=1,i=1;i<=e;i++){r*=t/i;var a=n;if((n+=r)===a)break}return Math.exp(-t)*n};p.poissoncdf=function(e,t,r){return r<=0?NaN:(e=Math.ceil(e),t=Math.floor(t),t<0?0:e===-1/0?E(t,r):E(t,r)-E(e-1,r))},p.uniformpdf=function(e,t,r){return r<=t?NaN:e<t||e>r?0:1/(r-t)};var D=function(e,t,r){return r<=t?NaN:e<t?0:e>r?1:(e-t)/(r-t)};p.uniformcdf=function(e,t,r,n){return D(t,r,n)-D(e,r,n)},p.erf=function(e){var t=-e*e;if(t<-750)return e>=0?1:-1;if(e>=.065)return 1-Math.exp(t)*p.erfcx(e);if(e<=-.065)return Math.exp(t)*p.erfcx(-e)-1;return e*(1.1283791670955126+t*(.37612638903183754+t*(.11283791670955126+t*(.026866170645131252+.005223977625442188*t))))},p.erfcx=function(e){if(e<0)return e<-6.1?2*Math.exp(e*e):2*Math.exp(e*e)-p.erfcx(-e);if(e>50){var t=.5641895835477563,r=e*e;return e>5e7?t/e:t*(r*(r+4.5)+2)/(e*(r*(r+5)+3.75))}return(.9999999999999999+e*(2.224574423459406+e*(2.444115549920689+e*(1.7057986861852539+e*(.8257463703357973+e*(.28647031042892007+e*(.07124513844341643+e*(.012296749268608364+e*(.001347817214557592+7263959403471071e-20*e)))))))))/(1+e*(3.352953590554884+e*(5.227518529742423+e*(5.003720878235473+e*(3.266590890998987+e*(1.5255421920765353+e*(.5185887413188858+e*(.12747319185915415+e*(.02185979575963238+e*(.0023889438122503674+.00012875032817508128*e))))))))))},p.invNorm=function(e){var t,r,n;return e>.5?-p.invNorm(1-e):.5===e?0:e<0?NaN:0===e?-1/0:(e<.02425?(t=Math.sqrt(-2*Math.log(e)),n=(((((-.00778489400243029*t-.322396458041136)*t-2.40075827716184)*t-2.54973253934373)*t+4.37466414146497)*t+2.93816398269878)/((((.00778469570904146*t+.32246712907004)*t+2.445134137143)*t+3.75440866190742)*t+1)):(t=e-.5,r=t*t,n=(((((-39.6968302866538*r+220.946098424521)*r-275.928510446969)*r+138.357751867269)*r-30.6647980661472)*r+2.50662827745924)*t/(((((-54.4760987982241*r+161.585836858041)*r-155.698979859887)*r+66.8013118877197)*r-13.2806815528857)*r+1)),n-Math.sqrt(2*Math.PI)*(.5*p.erfcx(-n/Math.SQRT2)-Math.exp(.5*n*n)*e))},p.invPoisson=function(e,t){if(t<=0||e<0||e>1)return NaN;if(0===e)return 0;if(1===e)return 1/0;for(var r=1,n=1,i=1;Math.exp(-t)*n<e;){if(r*=t/i,n+r===n)return 1/0;n+=r,i+=1}return i-1},p.invBinom=function(e,t,r){if(t!==Math.round(t))return NaN;if(r<0||r>1)return NaN;if(e<0||e>1)return NaN;if(0===e)return 0;if(1===e)return t;if(0===t)return 0;if(1===r)return t;if(0===r)return 0;for(var n=r/(1-r),i=Math.pow(1-r,t),a=i,o=1;a<e;){if(i*=(t-o+1)/o*n,a+i===a)return t;if(o>t)return t;a+=i,o+=1}return o-1},p.invT=function(e,t){if(t<=0||e<0||e>1)return NaN;if(0===e)return-1/0;if(1===e)return 1/0;if(1===t||2===t||4===t)return w(t,e);var r,n;return.5===e?0:e>.5?(r=t>1?p.invNorm(e):w(1,e),n=t>1?w(1,e):Math.pow(p.tpdf(0,t)*Math.pow(t,(t-1)/2)/(1-e),1/t),T(t,e,r,n)):-p.invT(1-e,t)};var w=function(e,t){var r=4*t*(1-t);switch(e){case 1:return Math.tan(Math.PI*(t-.5));case 2:return 2*(t-.5)*Math.sqrt(2/r);case 4:var n=Math.cos(Math.acos(Math.sqrt(r))/3)/Math.sqrt(r);return 2*Math.sign(t-.5)*Math.sqrt(n-1);default:throw new Error("_invTSimple() must be called with 1, 2, or 4 df.")}},T=function(e,t,r,n){for(var i,a,o=r,s=n;;){if(i=c(o,s),a=v(e,i),i===o||i===s)return a>t?o:s;a<t?o=i:s=i}};return p.invUniform=function(e,t,r){return e<0||e>1||r<=t?NaN:0===e?t:1===e?r:t+e*(r-t)},p.tscore=function(e,t){var r=p.stdev(e);return(p.mean(e)-t)*Math.sqrt(e.length)/r},p.itscore=function(e,t){var r=e.length,n=p.mean(e),i=p.stdev(e),a=t.length,o=p.mean(t),s=p.stdev(t);return(n-o)/(Math.sqrt(((r-1)*i*i+(a-1)*s*s)/(r+a-2))*Math.sqrt(1/r+1/a))},p.ttest=function(e,t){1===arguments.length&&(t=0);var r=p.tscore(e,t),n=e.length-1;return{lessThan:i(r,n,-1),greaterThan:i(r,n,1),notEqual:i(r,n,0)}},p.ittest=function(e,t){var r=p.itscore(e,t),n=e.length+t.length-2;return{lessThan:i(r,n,-1),greaterThan:i(r,n,1),notEqual:i(r,n,0)}},p.stats=function(e){return{min:p.listMin(e),q1:p.quartile(e,1),median:p.median(e),q3:p.quartile(e,3),max:p.listMax(e)}},p.length=function(e){return e.length},p.listMin=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]<t&&(t=e[r])}return t},p.listMax=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]>=t&&(t=e[r])}return t},p.quantile=function(e,t){if(!isFinite(t)||t<0||t>1)return NaN;if(e.some(isNaN))return NaN;var r=e.length,n=p.sortPerm(e),i=t*(r-1);return Math.floor(i)===i?e[n[i]]:(Math.ceil(i)-i)*e[n[Math.floor(i)]]+(i-Math.floor(i))*e[n[Math.ceil(i)]]},p.quartile=function(e,t){if(!isFinite(t)||t<0||t>4)return NaN;if(e.some(isNaN))return NaN;var r=p.sortPerm(e),n=p.quartileIndex(e,t),i=Math.floor(n),a=Math.ceil(n);return(e[r[i]]+e[r[a]])/2},p.sortPerm=function(e){for(var t=e.length,r=[],n=0;n<t;n++)r.push(n);return r.sort(function(t,r){return e[t]-e[r]}),r},p.quartileIndex=function(e,t){t=Math.round(t);var r,n=e.length,i=n%2==1;return 1===n?0:(0===t&&(r=0),2===t&&(r=(n-1)/2),4===t&&(r=n-1),1===t&&(r=i?(n+1)/4-1:(n+2)/4-1),3===t&&(r=i?(3*n+3)/4-1:(3*n+2)/4-1),r)},p.upperQuantileIndex=function(e,t){return p.sortPerm(e)[Math.ceil(t*(e.length-1))]+1},p.lowerQuantileIndex=function(e,t){return p.sortPerm(e)[Math.floor(t*(e.length-1))]+1},p.upperQuartileIndex=function(e,t){return p.sortPerm(e)[Math.ceil(p.quartileIndex(e,t))]+1},p.lowerQuartileIndex=function(e,t){return p.sortPerm(e)[Math.floor(p.quartileIndex(e,t))]+1},p.median=function(e){return p.quantile(e,.5)},p.argMin=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var r=0,n=1;n<e.length;n++){if(isNaN(e[n]))return 0;e[n]<t&&(r=n,t=e[n])}return r+1},p.argMax=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var r=0,n=1;n<e.length;n++)if(e[n]>=t){if(isNaN(e[n]))return 0;r=n,t=e[n]}return r+1},p.varp=function(e){for(var t=p.mean(e),r=0,n=0;n<e.length;n++){var i=e[n]-t;r+=i*i}return r/e.length},p.mad=function(e){for(var t=p.mean(e),r=0,n=0;n<e.length;n++)r+=Math.abs(e[n]-t);return r/e.length},p.var=function(e){var t=e.length;return p.varp(e)*t/(t-1)},p.covp=function(e,t){if(e.length!==t.length)return NaN;for(var r=e.length,n=p.mean(e),i=p.mean(t),a=0,o=0;o<r;o++)a+=(e[o]-n)*(t[o]-i);return a/r},p.cov=function(e,t){if(e.length!==t.length)return NaN;var r=e.length;return p.covp(e,t)*r/(r-1)},p.corr=function(e,t){if(e.length!==t.length)return NaN;for(var r,n,i=e.length,a=p.mean(e),o=p.mean(t),s=0,u=0,c=0,l=0;l<i;l++)r=e[l]-a,n=t[l]-o,s+=r*r,u+=n*n,c+=r*n;return c/Math.sqrt(s*u)},p.rank=function(e){var t=e.length;if(0===t)return[];for(var r=[],n=[],i=0;i<t;i++)n.push([e[i],i]);n.sort(function(e,t){var r=e[0],n=t[0];return r===1/0&&n===1/0||r===-1/0&&n===-1/0?0:r-n}),i=0;for(var a,o=1,s=1;i<t;){for(a=i;a<t-1&&n[a][0]===n[a+1][0];)a+=1;s=a-i+1;var u;for(a=0;a<s;a++)u=n[i+a][1],r[u]=isNaN(e[u])?NaN:o+.5*(s-1);o+=s,i+=s}return r},p.spearman=function(e,t){return p.corr(p.rank(e),p.rank(t))},p.stdev=function(e){return Math.sqrt(p.var(e))},p.stdevp=function(e){return Math.sqrt(p.varp(e))},p.quad=s.quad,p.distance=function(e,t){return o.hypot(t[0]-e[0],t[1]-e[1])},p.midpoint=function(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]},p}),define("core/math/functions",["require","exports","core/math/builtin"],function(e,t,r){"use strict";function n(e){for(var t=0,r=e;t<r.length;t++){var n=r[t].compiled;n&&a(n)}}function i(e){for(var t=0,r=e;t<r.length;t++){var n=r[t].compiled;n&&o(n)}}function a(e){delete e.fn}function o(e){e.fn=u(e.args,e.source)}function s(e,t){for(var r=[],n=0;n<t;n++)r.push("values["+n+"]");return u(["values"],"return "+e(r))}function u(e,t){var n=e.join(","),i="return (function("+n+'){"use strict"; '+t+"})";return new Function("BuiltIn",i)(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.dehydrateGraphData=n,t.rehydrateGraphData=i,t.dehydrateCompiledFunction=a,t.rehydrateCompiledFunction=o,t.createEvaluateFunction=s,t.closureFunctionWithBuiltIn=u}),define("core/math/parser/input-span",["require","exports"],function(e,t){"use strict";function r(e,t,r){return{input:e,start:t,end:r}}function n(e,t){return r(e,t,t)}function i(e,t){if(e.input!==t.input)throw new Error("Programming Error: cannot form a span on different inputs");return r(e.input,e.start,t.end)}function a(e){return e.input.slice(e.start,e.end)}Object.defineProperty(t,"__esModule",{value:!0}),t.Span=r,t.emptySpanAt=n,t.joinSpans=i,t.slice=a}),define("core/math/policy",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"];t.defaultPolicy={assignmentForbidden:function(e){return!0},graphingEnabled:function(){return!1},isValidSlider:function(e){return!1},sliderVariables:function(e){return[]},ansEnabled:function(){return!1},disabledFeatures:function(){return r}}}),define("core/math/parsenode/base",["require","pjs","core/math/functions","core/math/parser/input-span","core/math/policy"],function(e){"use strict";var t=e("pjs"),r=e("core/math/functions"),n=e("core/math/parser/input-span"),i=e("core/math/policy").defaultPolicy;return t(function(e,t,a){e.init=function(){this._dependencies=[],this._dummyDependencies=[],this._exports=[]},e.exportPenalty=0;var o=0;e.tmpVar=function(){return"tmp"+o++},e.dependencies=function(){return this.getDependencies()},e.evaluateOnce=function(e){void 0===e&&(e={});var t=this.getConcreteTree(i,e),r=t.getEvaluationInfo();return r?r[0].val:NaN},e.setInputSpan=function(e){this._inputSpan=e},e.getInputString=function(){return void 0===this._inputSpan?"":n.slice(this._inputSpan)},e.getInputSpan=function(){return this._inputSpan},e.shouldExportAns=function(){return!1},e.getAnsVariable=function(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty("index")?["ans_"+this.userData.index]:[]},e.addDependency=function(e){this.dependsOn(e)||this._dependencies.push(e)},e.addDependencies=function(e){for(var t=0;t<e.length;t++)this.addDependency(e[t])},e.addDummyDependency=function(e){-1===this._dummyDependencies.indexOf(e)&&this._dummyDependencies.push(e)},e.addDummyDependencies=function(e){for(var t=0;t<e.length;t++)this.addDummyDependency(e[t])},e.mergeDependencies=function(){for(var e=0;e<arguments.length;e++)this.addDependencies(arguments[e].getDependencies()),this.addDummyDependencies(arguments[e].getDummyDependencies())},e.getDependencies=function(){return this._dependencies},e.getDummyDependencies=function(){return this._dummyDependencies},e.removeDependency=function(e){var t=this._dependencies.indexOf(e);t>=0&&this._dependencies.splice(t,1)},e.dependsOn=function(e){return this._dependencies.indexOf(e)>-1},e.getExports=function(){return(this._exports||[]).concat(this.getAnsVariable())},e.getLegalExports=function(e){return this.getExports().filter(function(t){return!e.assignmentForbidden(t)})},e.exportsSymbol=function(e){return this._exports.indexOf(e)>-1},e.exportTo=function(e,t,r){for(var n=this.getLegalExports(e),i=0;i<n.length;i++){var a=n[i];if(r[a])return;r[a]=t.blocksExport?t:this}},e.getOperator=function(){return this.operator||"="},e.isInequality=function(){return!1},e.isShadeBetween=function(){return!1},e.getAllIds=function(){return this.userData?[this.userData.id]:[]},e.getEvaluationInfo=function(){return!1},e.shouldPromoteToSlider=function(e){return!1},e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies())},e.getCompiledFunction=function(e){var t=this.getEvalStrings(),n=t.statements.join(";")+";return "+t.expression;if(void 0===e){e=this.getDependencies();var i=e.indexOf("x");if(-1!==i){var a=e[0];e[0]=e[i],e[i]=a}}return{args:e,source:n,fn:r.closureFunctionWithBuiltIn(e,n)}},e.getCompiledDerivative=function(){var e=this.getDependencies();return this.takeDerivative(e[0]||"x").getCompiledFunction()},e.asValue=function(){}})}),define("core/math/parsenode/error",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t){e.init=function(e){t.init.call(this),this._msg=e,this._sliderVariables=[],this.blocksExport=!0},e.evaluateOnce=function(e){return this._msg},e.isError=!0,e.getError=function(){return this._msg},e.setDependencies=function(e){return this._dependencies=e,this},e.allowExport=function(){return this.blocksExport=!1,this}})}),define("core/lib/label",["require","exports","underscore","core/math/distance","core/math/tofraction"],function(e,t,r,n,i){"use strict";function a(e,t){if(void 0===t&&(t=e),isNaN(e)||!isFinite(e))return{ariaString:"undefined",string:"undefined",value:e};if(0===e)return{ariaString:"0",string:"0",value:e};Math.abs(e)>Math.abs(t)&&(t=e);var r,a,o,s=i.default(e/Math.PI,24);if(h(t)&&n.approx(s.n/s.d*Math.PI,e,3))return r=0===s.n?"0":1===s.n?"":-1===s.n?"-":s.n.toString()+"",a=1===s.d?"":"/"+s.d.toString(),o=r+a,{ariaString:u(o),string:o,value:s.n/s.d*Math.PI};if(h(t))return o=f(l(e.toFixed(d(t)))),{ariaString:u(o),string:o,value:parseFloat(o)};var c=p(e.toExponential(d(t/e))).split("e"),m=c[0]+"10",y=c[1].replace("+","");return o=p(e.toExponential(d(t/e))).replace("+",""),{ariaString:u(o),string:o,mantissa:m,superscript:y,value:parseFloat(o)}}function o(e){return T["["+e+"]"]}function s(e){return e[0]+e.slice(1).split("").join(" ")}function u(e){return e.replace(I,s).replace(P,o).replace(/ +/gi," ").trim()}function c(e,t,r,n){var i=a(e,t);return[i,a(n(i.value),r)]}function l(e){return-1===e.indexOf(".")?e:e.replace(C,"")}function p(e){var t=/\\.?0+e/;return e.replace(t,"e")}function f(e){return"-0"===e?"0":e}function h(e){return 1e-4<(e=Math.abs(e))&&e<1e7}function d(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(3,Math.floor(4.5-Math.log(e)/Math.LN10))}function m(e){return 1e6/Math.sqrt(Math.abs(e))}function y(e){var t=m(e);if(t<1)return!1;if(t>1e12)return!1;var r=i.default(e,t),n=r.n,a=r.d;return 1!==a&&e===e+Math.pow(2,-3)*Math.abs(n/a-e)}function g(e,t){if(t=t||{},isNaN(e)||!isFinite(e))return{type:"undefined"};if(0===e||t.zeroCutoff&&Math.abs(e)<t.zeroCutoff)return{type:"decimal",value:"0"};var r=t.smallCutoff||.001,n=t.bigCutoff||1e6,a=t.digits||10,o=p(e.toExponential(a-2)),s=o.match(/([\\d\\.\\-]+)e\\+?([\\d\\-]+)/);if(!s)return{type:"undefined"};var u=parseInt(s[2],10)>=a,c=y(e);if(Math.abs(e)>n||Math.abs(e)<r||u)return{type:"scientific",mantissa:s[1],exponent:s[2]};if(c&&t.displayAsFraction){var f=i.default(e,m(e));return{type:"fraction",numerator:f.n.toString(),denominator:f.d.toString()}}var h=l(e.toPrecision(a));return e!==Number(h)&&t.addEllipses&&(h+="..."),{type:"decimal",value:h}}function v(e,t){var r=g(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+"<span class='dcg-cross'></span>10<sup>"+r.exponent+"</sup>";case"fraction":return"1"===r.denominator?r.numerator:r.numerator+"/"+r.denominator;default:return r}}function b(e,t){var r=g(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+" * 10^"+r.exponent;case"fraction":return"1"===r.denominator?r.numerator:r.numerator+"/"+r.denominator;default:return r}}function x(e,t){var r=g(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+"\\\\times10^{"+r.exponent+"}";case"fraction":return"1"===r.denominator?r.numerator:"-"===r.numerator[0]?"-\\\\frac{"+r.numerator.slice(1)+"}{"+r.denominator+"}":"\\\\frac{"+r.numerator+"}{"+r.denominator+"}";default:return r}}function _(e,t){var r=g(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return u(r.value);case"scientific":return u(r.mantissa+"e"+r.exponent);case"fraction":return u(r.numerator+"/"+r.denominator);default:return r}}function S(e){e=e.replace("\\\\","");var t={pi:"",tau:"",theta:"",phi:"",div:"",cdot:"",times:"",lt:"<",gt:">",le:"",ge:"",sim:"",ldots:"",prime:"",approx:""};return t.hasOwnProperty(e)?t[e]:e}function M(e){var t=e.split("_"),r="";return t[0].length>1&&(r+="\\\\"),r+=t[0],t[1]&&(r+="_{"+t[1]+"}"),r}function E(e){if(!e)return"";var t=e.split("_").map(S).map(r.escape),n=t[0];return t[1]&&(n+="<sub>"+t[1]+"</sub>"),n}function D(e){return e=e.replace(/\\\\operatorname\\{(.*)\\}/,"$1"),e.replace(/[{}\\\\]/g,"")}function w(e){return e.replace(/^(\\\\ | |\\\\space)+/,"").replace(/(\\\\ | |\\\\space)+$/,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.value=a;var T={"[e]":" times 10 to the ","[+]":" plus ","[-]":" minus ","[*]":" times ","[/]":" over ","[]":" pi ","[]":" tau ","[]":" theta ","[]":" phi "},P=new RegExp(Object.keys(T).join("|"),"gi"),I=/\\.\\d+/g;t.point=c;var C=/\\.?0+$/;t.canDisplayAsFraction=y,t.numericLabel=g,t.truncatedHTMLLabel=v,t.truncatedPlainmathLabel=b,t.truncatedLatexLabel=x,t.truncatedAriaLabel=_,t.formatSymbol=S,t.identifierToLatex=M,t.identifierToHTML=E,t.latexToIdentifier=D,t.trimLatex=w}),define("core/math/types",["require","core/lib/worker-i18n"],function(e){"use strict";function t(e){switch(e){case u:return"Any";case c:return"Number";case l:return"Bool";case p:return"Point";case f:return"Distribution";case h:return"ListOfAny";case d:return"ListOfNumber";case m:return"ListOfBool";case y:return"ListOfPoint";case g:return"ListOfDistribution";case v:return"ErrorType";case b:return"SeedType";default:throw new Error("Invalid type")}}function r(e){switch(e){case u:return s.t("an unknown object");case c:return s.t("a number");case l:return s.t("a true/false value");case p:return s.t("a point");case f:return s.t("a distribution");case h:return s.t("a list of unknown objects");case d:return s.t("a list of numbers");case m:return s.t("a list of true/false values");case y:return s.t("a list of points");case g:return s.t("a list of distributions");case v:return s.t("an error object");case b:return s.t("a string");default:throw new Error("Invalid type")}}function n(e){switch(e){case h:case d:case m:case y:case g:return!0;default:return!1}}function i(e){switch(e){case h:return u;case d:return c;case m:return l;case y:return p;case g:return f;default:return u}}function a(e){switch(e){case u:return h;case c:return d;case l:return m;case p:return y;case f:return g;default:throw new Error("Type "+t(e)+" does not implement listType.")}}function o(e){switch(e){case u:case c:case l:case p:case f:return!0;default:return!1}}var s=e("core/lib/worker-i18n"),u=0,c=1,l=2,p=3,f=4,h=5,d=6,m=7,y=8,g=9,v=10,b=11;return{Any:u,Number:c,Bool:l,Point:p,Distribution:f,ListOfAny:h,ListOfNumber:d,ListOfBool:m,ListOfPoint:y,ListOfDistribution:g,ErrorType:v,SeedType:b,repr:t,prettyPrint:r,isList:n,elementType:i,listType:a,hasListType:o}}),define("core/math/errormsg",["require","core/lib/worker-i18n","core/math/parsenode/error","core/lib/label","core/math/types"],function(e){"use strict";var t=e("core/lib/worker-i18n"),r=e("core/math/parsenode/error"),n=e("core/lib/label"),i=e("core/math/types");return{parseError:function(){return r(t.t("Sorry, I don't understand this."))},unrecognizedSymbol:function(e){return e=n.formatSymbol(e),r(t.t("Sorry, I don't understand the '__symbol__' symbol.",{symbol:e}))},unexpectedInequality:function(){return r(t.t("Cannot use an inequality here."))},unexpectedSymbol:function(e){return e=n.formatSymbol(e),r(t.t("Sorry, I don't understand the way that '__symbol__' is used here.",{symbol:e}))},addTypeError:function(e){return r(t.t("Cannot add __symbol1__ and __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},subtractTypeError:function(e){return r(t.t("Cannot subtract __symbol2__ from __symbol1__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},multiplyTypeError:function(e){return r(t.t("Cannot multiply __symbol1__ by __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},divideTypeError:function(e){return r(t.t("Cannot divide __symbol1__ by __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},exponentTypeError:function(e){return r(t.t("Cannot raise __symbol1__ to __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},negativeTypeError:function(e){return r(t.t("Cannot negate __symbol__.",{symbol:e[0]})).allowExport()},comparatorTypeError:function(e){return r(t.t("Cannot compare __symbol1__ to __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},andTypeError:function(e){return r(t.t("Cannot apply __symbol__ to __symbol1__ and __symbol2__.",{symbol:"and",symbol1:e[0],symbol2:e[1]})).allowExport()},listTypeError:function(e){return r(t.t("Cannot store __symbol1__ in a list.",{symbol1:e[0]})).allowExport()},pointTypeError:function(e){return r(t.t("Cannot use __symbol1__ as a coordinate of __symbol2__.",{symbol1:e,symbol2:i.prettyPrint(i.Point)})).allowExport()},indexTypeError:function(e){return r(t.t("Cannot index __symbol1__ with __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},orderedPairAccessTypeError:function(e){return r(t.t("Cannot access a coordinate of __symbol__.",{symbol:e[0]})).allowExport()},functionTypeError:function(e,i){switch(i.length){case 1:return r(t.t("Function '__fn__' cannot be applied to __arg__.",{fn:n.formatSymbol(e),arg:i[0]})).allowExport();case 2:return r(t.t("Function '__fn__' cannot be applied to __arg1__ and __arg2__.",{fn:n.formatSymbol(e),arg1:i[0],arg2:i[1]})).allowExport();default:return r(t.t("Function '__fn__' cannot be applied to these arguments.",{fn:n.formatSymbol(e)})).allowExport()}},illegalDotCall:function(e){return r(t.t("Function '__symbol__' cannot be called with dot notation.",{symbol:n.formatSymbol(e)}))},dotLHSTypeError:function(e,i){return r(t.t("Cannot call '__symbol__' on __type__.",{symbol:n.formatSymbol(e),type:i}))},sumLowerBoundTypeError:function(e){return r(t.t("Lower bound of a sum cannot be __symbol__.",{symbol:e[0]})).allowExport()},sumUpperBoundTypeError:function(e){return r(t.t("Upper bound of a sum cannot be __symbol__.",{symbol:e[0]})).allowExport()},sumInfiniteBoundError:function(){return r(t.t("Summation bounds must be finite numbers."))},sumArgumentTypeError:function(e){return r(t.t("Cannot take the sum of __symbol__.",{symbol:e[0]})).allowExport()},productLowerBoundTypeError:function(e){return r(t.t("Lower bound of a product cannot be __symbol__.",{symbol:e[0]})).allowExport()},productUpperBoundTypeError:function(e){return r(t.t("Upper bound of a product cannot be __symbol__.",{symbol:e[0]})).allowExport()},productInfiniteBoundError:function(){return r(t.t("Product bounds must be finite numbers."))},productArgumentTypeError:function(e){
return r(t.t("Cannot take the product of __symbol__.",{symbol:e[0]})).allowExport()},integralLowerBoundTypeError:function(e){return r(t.t("Lower bound of an integral cannot be __symbol__.",{symbol:e[0]})).allowExport()},integralUpperBoundTypeError:function(e){return r(t.t("Upper bound of an integral cannot be __symbol__.",{symbol:e[0]})).allowExport()},integralInfiniteBoundError:function(){return r(t.t("Limits of integration must be finite numbers."))},integralArgumentTypeError:function(e){return r(t.t("Cannot take the integral of __symbol__.",{symbol:e[0]})).allowExport()},derivativeTypeError:function(e){return r(t.t("Cannot take the derivative of __symbol__.",{symbol:e[0]})).allowExport()},derivativeVariableTypeError:function(e,i){return r(t.t("Cannot take derivative with respect to '__symbol1__' because it is __symbol2__.",{symbol1:n.formatSymbol(e),symbol2:i[0]}))},piecewiseConditionTypeError:function(e){return r(t.t("The condition in a piecewise expression must be __symbol1__ but was __symbol2__.",{symbol1:i.prettyPrint(i.Bool),symbol2:e[0]})).allowExport()},piecewiseBranchTypeError:function(e){return r(t.t("Cannot use __symbol__ as a branch of a piecewise expression.",{symbol:e[0]})).allowExport()},tableHeaderTypeError:function(e){return r(t.t("Table header cannot be __symbol__.",{symbol:e[0]}))},tableEntryTypeError:function(e){return r(t.t("Table entry cannot be __symbol__.",{symbol:e[0]}))},regressionTypeError:function(e){return r(t.t("Cannot regress __symbol1__ against __symbol2__.",{symbol1:e[0],symbol2:e[1]}))},heterogeneousList:function(){return r(t.t("All elements of a list must have the same type.")).allowExport()},deeplyNested:function(){return r(t.t("Definitions are nested too deeply.")).allowExport()},polygonListTypeError:function(e){return r(t.t("A single argument to polygon should be a point list, not __type__.",{type:e[0]}))},polygonPointArgsError:function(){return r(t.t("Some of your arguments are not points."))},polygonTwoNumbersError:function(){return r(t.t("Cannot make a polygon from two numbers."))},binCenterInvalid:function(){return r(t.t("Invalid bin center. Try using any number."))},boxplotOffsetInvalid:function(){return r(t.t("Invalid offset. Try using any number."))},boxplotBreadthInvalid:function(){return r(t.t("Invalid height. Try using any number."))},tooManyArguments:function(e,n){return r(t.t("'__symbol__' accepts at most __max__ arguments.",{symbol:e,max:n}))},pdfWrongArity:function(){var e=t.t("For example, try typing: D.pdf(x) where D=normaldist()."),n=t.t("'pdf' should be called on a distribution with a number. __recommendation__",{recommendation:e});return r(n)},cdfRequiresArguments:function(){var e=t.t("For example, try typing: D.cdf(x) where D=normaldist()."),n=t.t("'cdf' should be called on a distribution with at least one number. __recommendation__",{recommendation:e});return r(n)},cdfTooManyArguments:function(){var e=t.t("For example, try typing: D.cdf(-1,1) where D=normaldist()."),n=t.t("'cdf' should be called on a distribution with at most two numbers. __recommendation__",{recommendation:e});return r(n)},tdistWrongArity:function(){return r(t.t("'tdist' requires 1 argument. For example, try typing: tdist(1)."))},randomArity:function(){var e=t.t("'random' should be called with no arguments, or an optional number of samples. For example, try random() or random(10).");return r(e)},randomFromBroadcastDistribution:function(){return r(t.t("Cannot sample from a list of distributions"))},wrongArity:function(e,i,a){e=n.formatSymbol(e);var o,s;if(1===i)s=t.t("For example, try typing: __dependency__(x).",{dependency:e}),o=a>1?t.t("Function '__dependency__' requires only 1 argument. __supplement__",{dependency:e,supplement:s}):t.t("Function '__dependency__' requires an argument. __supplement__",{dependency:e,supplement:s});else{for(var u=[],c=0;c<i;c++)u[c]=c+1;var l=n.formatSymbol(e)+"("+u.join(", ")+")";s=t.t("For example, try typing: __recommendation__.",{recommendation:l}),o=t.t("Function '__dependency__' requires __assignment_arity__ arguments. __supplement__",{dependency:e,assignment_arity:i,supplement:s})}return r(o)},wrongParametrizedReducerArity:function(e){return r(t.t("Function '__symbol__' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], 1)"}))},wrongDoubleReducerArity:function(e){return r(t.t("Function '__symbol__' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], [3,2,1])"}))},primedFunctionArity:function(){return r(t.t("Prime notation can only be used for functions of a single argument."))},zeroArgReducer:function(e){return r(t.t("Function '__symbol__' requires at least one argument. For example, try typing: __symbol__(1, 2).",{symbol:n.formatSymbol(e)}))},missingRHS:function(e){return e=n.formatSymbol(e),r(t.t("What do you want '__symbol__' to equal?",{symbol:e}))},malformedPoint:function(){return r(t.t("Points are written like this: (1, 2)."))},badTupleDimensions:function(e){return r(t.t("Points may only have __symbol__ coordinates.",{symbol:e}))},badImplicitCall:function(e){return e=n.formatSymbol(e),r(t.t("Use parentheses around the argument of '__symbol__'.",{symbol:e}))},adjacentNumbers:function(e,n){return r(t.t("Sorry, I don't know what to do with adjacent numbers '__left__' and '__right__'. Try using parentheses or a '*' symbol.",{left:e,right:n}))},identifierAsFunction:function(e){return e=n.formatSymbol(e),r(t.t("'__symbol__' is a function. Try using parentheses.",{symbol:e}))},binaryOperatorMissingOperand:function(e){return e=n.formatSymbol(e),"%"===e&&(e="% of"),r(t.t("You need something on both sides of the '__symbol__' symbol.",{symbol:e}))},unaryOperatorMissingLeft:function(e){return e=n.formatSymbol(e),r(t.t("You need something before the '__symbol__' symbol.",{symbol:e}))},unaryOperatorMissingRight:function(e){return e=n.formatSymbol(e),r(t.t("You need something after the '__symbol__' symbol.",{symbol:e}))},fractionMissingNumerator:function(){return r(t.t("You need a numerator for the top of your fraction."))},fractionMissingDenominator:function(){return r(t.t("You need a denominator for the bottom of your fraction."))},fractionEmpty:function(){return r(t.t("You need a numerator and denominator for your fraction."))},emptySubscript:function(){return r(t.t("Subscripts cannot be empty."))},emptySuperscript:function(){return r(t.t("Superscripts cannot be empty."))},invalidSubscript:function(e){return e=n.formatSymbol(e),r(t.t("Subscripts may only contain letters and digits. '__symbol__' is not allowed.",{symbol:e}))},invalidOperatorName:function(){return r(t.t("Operator names may only contain letters."))},unexpectedSubscript:function(){return r(t.t("Only functions and variables may have subscripts."))},superscriptWithPrime:function(){return r(t.t("Superscripts and primes cannot be combined."))},unexpectedPrime:function(){return r(t.t("Sorry, I don't understand this use of prime notation."))},primeWithoutParen:function(){return r(t.t("Primed function calls must use parentheses."))},emptyRadical:function(){return r(t.t("Radical cannot be empty."))},emptyRadicalIndex:function(){return r(t.t("Radical index cannot be empty."))},emptyParen:function(){return r(t.t("Parentheses cannot be empty."))},emptySquareBracket:function(){return r(t.t("Square brackets cannot be empty."))},emptyPipe:function(){return r(t.t("Absolute value symbol cannot be empty."))},badTrigExponent:function(e){var n=e+"^2",i=e+"^-1";return r(t.t("Only __form1__ and __form2__ are supported. Otherwise, use parens.",{form1:n,form2:i}))},badLogExponent:function(e){var n=e+"^2";return r(t.t("Only __form__ is supported. Otherwise, use parens.",{form:n}))},inequalityChainTooLong:function(){return r(t.t("Cannot chain more than 2 inequalities."))},piecewiseMissingCondition:function(){return r(t.t("A piecewise expression must have at least one condition."))},piecewisePartMissingCondition:function(){return r(t.t("Every part of a piecewise expression must have a condition except the last."))},colonMissingCondition:function(){return r(t.t("The left side of a ':' must be a condition, like 'x>1'."))},blankExpression:function(){return r(t.t("You haven't written anything yet."))},functionNotDefined:function(e){return e=n.formatSymbol(e),r(t.t("Function '__dependency__' is not defined.",{dependency:e}))},parameterAlreadyDefined:function(e){return e=n.formatSymbol(e),r(t.t("You can't use '__dependency__' as a parameter of this function because '__dependency__' is already defined.",{dependency:e}))},cannotRedefine:function(e,i){return e=n.formatSymbol(e),r(void 0===i?t.t("You can't redefine '__symbol__' because it's already defined.",{symbol:e}):t.t("You can't define '__symbol__' because '__symbolRoot__' is already defined.",{symbol:e,symbolRoot:i}))},cannotSubscript:function(e){return e=n.formatSymbol(e),r(t.t("'__symbol__' cannot have a subscript.",{symbol:e}))},multiplyDefined:function(e){return e=n.formatSymbol(e),r(t.t("You've defined '__dependency__' in more than one place. Try deleting some of the definitions of '__dependency__'.",{dependency:e}))},shadowedIndex:function(e){return e=n.formatSymbol(e),r(t.t("You can't use '__symbol__' as an index because it's already defined.",{symbol:e}))},cycle:function(e){e=e.map(n.formatSymbol);var i=e.pop();return r(t.t("'__symbols__' and '__lastSymbol__' can't be defined in terms of each other.",{symbols:e.join("', '"),lastSymbol:i}))},selfReferentialFunction:function(e){return r(t.t("The definition of function '__symbol__' cannot depend on '__symbol__'.",{symbol:n.formatSymbol(e)}))},sliderLimitReferencesExport:function(e){return r(t.t("Slider limits cannot depend on the slider variable '__symbol__'.",{symbol:n.formatSymbol(e)}))},sliderMinInvalid:function(){return r(t.t("Invalid slider min. Try using any number."))},sliderMaxInvalid:function(){return r(t.t("Invalid slider max. Try using any number."))},sliderMaxLessThanMin:function(){return r(t.t("Invalid slider limits. Min should be less than max."))},sliderStepInvalid:function(){return r(t.t("Invalid slider step. Try using any number."))},domainMinInvalid:function(){return r(t.t("Invalid domain min. Try using any number."))},domainMaxInvalid:function(){return r(t.t("Invalid domain max. Try using any number."))},domainMaxLessThanMin:function(){return r(t.t("Invalid domain limits. Min should be less than max."))},cdfMinInvalid:function(){return r(t.t("Invalid cdf min. Try using any number."))},cdfMaxInvalid:function(){return r(t.t("Invalid cdf max. Try using any number."))},cdfMaxLessThanMin:function(){return r(t.t("Invalid cdf limits. Min should be less than max."))},tooFewVariables:function(){return r(t.t("Too few variables, I don't know what to do with this."))},tooManyVariables:function(e){if(e=e.map(n.formatSymbol),0===e.length)return r(t.t("Too many variables, I don't know what to do with this."));var i=e.pop();return r(t.t("Too many variables. Try defining '__variables__'.",{variables:(e.length?e.join("', '")+"' or '":"")+i}))},addArgumentsToDefinition:function(e,i,a){e=e.map(n.formatSymbol),i=n.formatSymbol(i),a=a.map(n.formatSymbol);var o=i+"("+a.join(",")+","+e.join(",")+")",s=e.pop(),u={symbols:e.join("', '"),lastSymbol:s,newSignature:o};return r(e.length?t.t("Try including '__symbols__' and '__lastSymbol__' as arguments by defining the function as '__newSignature__'.",u):t.t("Try including '__lastSymbol__' as an argument by defining the function as '__newSignature__'.",u))},invalidLHS:function(e){return e=n.formatSymbol(e),r(t.t("Sorry, you can't graph __symbol__ as a function of anything yet.",{symbol:e}))},unplottablePolarFunction:function(){return r(t.t("We can't plot  as a function of r. Try plotting r() instead."))},invalidInequalityVariables:function(){return r(t.t("We only plot inequalities of x and y, or r and ."))},invalidImplicitVariables:function(){return r(t.t("We only support implicit equations of x and y."))},singleVariableImplicitEquationsDisabled:function(){return r(t.t("Plotting single-variable implicit equations is disabled."))},implicitsDisabled:function(){return r(t.t("Plotting implicit equations and inequalities is disabled."))},inequalitiesDisabled:function(){return r(t.t("Plotting inequalities is disabled."))},complicatedImplicitInequality:function(){return r(t.t("We can only plot inequalities when one variable is quadratic or linear."))},complicatedPolarImplicit:function(){return r(t.t("Polar equations must be linear in r."))},invalidDoubleInequalityVariables:function(){return r(t.t("We only plot double inequalities of x and y."))},mismatchedDoubleInequality:function(){return r(t.t("Double inequalities must both go the same way, e.g. 1 < y < 2."))},complicatedDoubleInequality:function(){return r(t.t("We only support solved double inequalities. Try deleting one side of the inequality."))},equationRequired:function(e){return e?(e=n.formatSymbol(e),r(t.t("Try adding '__lhs__' to the beginning of this equation.",{lhs:e+"="}))):r(t.t("Try adding an equals sign to turn this into an equation."))},variableAsFunction:function(e){return e=n.formatSymbol(e),r(t.t("Variable '__dependency__' can't be used as a function.",{dependency:e}))},distributionAsFunction:function(e){return e=n.formatSymbol(e),r(t.t("Cannot call distribution '__symbol__' as a function. Try '__symbol__.pdf(x)'.",{symbol:e}))},emptyList:function(){return r(t.t("Empty lists are not allowed."))},invalidTableHeader:function(e){return r(t.t("Table headers must be simple expressions. __supplement__",{supplement:e}))},invalidTableEntry:function(e){return r(t.t("Table entries must be simple expressions. __supplement__",{supplement:e}))},invalidFirstTableColumn:function(){return r(t.t("First column may not be __most__ or __last__.",{most:"'y', 'r',",last:"''"}))},invalidDependentFirstTableColumn:function(){return r(t.t("This column header can't be defined elsewhere in the calculator."))},invalidRegressionParameter:function(e){return r(t.t("'__symbol__' may not be used as a regression parameter.",{symbol:n.formatSymbol(e)}))},optimizationError:function(){return r(t.t("We couldn't find any region where this model is defined."))},badListInReducer:function(e){return r(t.t("When __symbol__ is called with more than two arguments, no argument can be a list.",{symbol:n.formatSymbol(e)})).allowExport()},nonListDoubleReducer:function(e){return r(t.t("Both arguments of '__symbol__' must be lists. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], [3,2,1])"})).allowExport()},nonListParametrizedReducer:function(e){return r(t.t("The first argument of '__symbol__' must be a list. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], 1)"})).allowExport()},methodRequiresList:function(e){return r(t.t("'__symbol__' requires a list. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3])"})).allowExport()},variableRange:function(e){return r(t.t("Range cannot depend on free variable '__symbol__'.",{symbol:n.formatSymbol(e[0])})).setDependencies(e).allowExport()},nonArithmeticRange:function(e){return r(t.t("Ranges must be arithmetic sequences.")).allowExport()},sumMissingBound:function(){return r(t.t("Sums must have upper and lower bounds."))},productMissingBound:function(){return r(t.t("Products must have upper and lower bounds."))},incorrectSumLowerBound:function(){return r(t.t("Lower bound of a sum must set a variable equal to a number. Try n=1."))},incorrectProductLowerBound:function(){return r(t.t("Lower bound of a product must set a variable equal to a number. Try n=1."))},badSumBoundDependency:function(e){return r(t.t("Summation bounds can't depend on summation index '__symbol__'.",{symbol:n.formatSymbol(e)}))},badProductBoundDependency:function(e){return r(t.t("Product bounds can't depend on product index '__symbol__'.",{symbol:n.formatSymbol(e)}))},integralMissingBound:function(){return r(t.t("Integrals must have upper and lower bounds."))},integralMissingDifferential:function(){return r(t.t("Integrand must end with an integration variable, like dx."))},differentialWithSuperscript:function(){return r(t.t("Integration variable cannot have a superscript."))},sumMissingBody:function(){return r(t.t("What do you want to take the sum of?"))},productMissingBody:function(){return r(t.t("What do you want to take the product of?"))},integralMissingBody:function(){return r(t.t("What do you want to take the integral of?"))},derivativeMissingBody:function(){return r(t.t("What do you want to take the derivative of?"))},mismatchedBraces:function(e,i){return e=n.formatSymbol(e),i=n.formatSymbol(i),r(t.t("Expected '__symbol1__' to match '__symbol2__'.",{symbol1:e,symbol2:i}))},shadowedIntegrationVariable:function(e){return r(t.t("You can't use '__symbol__' as an integration variable because it's already defined.",{symbol:n.formatSymbol(e)}))},badIntegralBoundDependency:function(e){return r(t.t("Integration bounds can't depend on integration variable '__symbol__'.",{symbol:n.formatSymbol(e)}))},percentMissingOf:function(){return r(t.t("'%' must be used with 'of'. Try '25% of 12'."))},illegalBinWidth:function(e){return e=n.formatSymbol(e),r(t.t("The second argument to '__symbol__' must be a positive number.",{symbol:e}))},ttestListTooShort:function(e){return e=n.formatSymbol(e),r(t.t("Lists for '__symbol__' must have at least 2 elements.",{symbol:e}))},badSampleSize:function(){return r(t.t("Sample size must be at least 1."))},variableSampleSize:function(e){return r(t.t("Sample size cannot depend on free variable '__symbol__'.",{symbol:n.formatSymbol(e[0])})).setDependencies(e).allowExport()},variableSeed:function(e){return r(t.t("Random seed cannot depend on free variable '__symbol__'.",{symbol:n.formatSymbol(e[0])})).setDependencies(e).allowExport()},badAnsContext:function(){return r(t.t("You can't use 'ans' in this context."))},ansUndefined:function(){return r(t.t("The previous expression didn't define any value for ans."))},variablesUnsupported:function(e){return r(t.t("This calculator does not support variables like '__variable__'.",{variable:n.formatSymbol(e)}))},functionUnsupported:function(e){return r(t.t("This calculator does not support the '__symbol__' function.",{symbol:n.formatSymbol(e)}))},logbaseUnsupported:function(){return r(t.t("This calculator does not support specifying the base of a logarithm. Try 'log' or 'ln'."))},constantUnsupported:function(e){return r(t.t("This calculator does not support the constant '__symbol__'.",{symbol:n.formatSymbol(e)}))},assignmentsUnsupported:function(){return r(t.t("This calculator does not support defining variables."))},functionDefinitionsUnsupported:function(){return r(t.t("This calculator does not support function definitions."))},equationsUnsupported:function(){return r(t.t("This calculator does not support this type of equation."))},inequalitiesUnsupported:function(){return r(t.t("This calculator does not support inequalities."))},regressionsUnsupported:function(){return r(t.t("This calculator does not support regressions."))},pointsUnsupported:function(){return r(t.t("This calculator does not support points."))},featureUnavailable:function(){return r(t.t("This feature is not available in the current calculator."))},nonSquareDeterminant:function(){return r(t.t("Only square matrices have a determinant."))},nonSquareInverse:function(){return r(t.t("Only square matrices have an inverse."))},singularInverse:function(){return r(t.t("Singular matrices do not have an inverse."))},matrixAssignment:function(){return r(t.t("This calculator does not support this type of variable definition. Try using 'New Matrix'."))},matrixAddDimensions:function(){return r(t.t("Cannot add matrices with different dimensions."))},matrixSubtractDimensions:function(){return r(t.t("Cannot subtract matrices with different dimensions."))},matrixMultiplyDimensions:function(){return r(t.t("Cannot multiply matrices with incompatible dimensions."))},matrixFractionalPower:function(){return r(t.t("A matrix can only be raised to integer powers."))},matrixPowerDimensions:function(){return r(t.t("Only square matrices can be raised to a power."))},matrixElementTypeError:function(e){return r(t.t("Cannot use __arg__ as an element of a matrix.",{arg:e[0]}))},matrixInvalidVariable:function(e){return r(t.t("Cannot use '__symbol__' as a variable.",{symbol:n.formatSymbol(e)}))}}}),define("core/math/parsenode/expression",["require","pjs","./base","core/math/errormsg","core/math/types"],function(e){"use strict";var t=e("pjs"),r=e("./base"),n=e("core/math/errormsg"),i=e("core/math/types");return t(r,function(e,t){e.init=function(e){if(!Array.isArray(e))throw new TypeError("Argument to expression constructor must be an Array.");t.init.call(this),this.args=e,this.valueType=this._getValueType(e),this.registerDependencies(),this.computeTreeSize()},e._getValueType=function(e){return i.Any},e.shouldExportAns=function(){return!0},e.registerDependencies=function(){for(var e=0;e<this.args.length;e++)this.mergeDependencies(this.args[e])},e.computeTreeSize=function(){for(var e=0,t=0;t<this.args.length;t++)this.args[t].treeSize&&(e+=this.args[t].treeSize);if(this.treeSize=e+1,e>1e4)throw n.deeplyNested()},e.copyWithArgs=function(e){return new this.constructor(e)}})}),define("core/math/parsenode/scalarexpression",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e)},e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();e=e.concat(n.statements),t.push(n.expression)}return{statements:e,expression:this.scalarEvalExpression(t)}}})}),define("core/math/parsenode/expressionTypes",["require","pjs","./scalarexpression"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n={Add:t(r,{}),Subtract:t(r,{}),Multiply:t(r,{}),Divide:t(r,{}),Exponent:t(r,{}),Negative:t(r,{}),And:t(r,{isInequality:function(){return this.args[0].isInequality()&&this.args[1].isInequality()}}),PercentOf:t(r,{})};return n.RawExponent=t(n.Exponent,{}),n}),define("core/math/maybe-rational",["require","exports","core/math/builtin"],function(e,t,r){"use strict";function n(e,t){return{n:e,d:t}}function i(e){return"object"==typeof e&&"number"==typeof e.n&&"number"==typeof e.d}function a(e){var t=e.match(/^(-)?(\\d*)?(?:\\.(\\d*))?$/);if(!t)return NaN;var r=t[1],n=t[2],i=t[3];if(!n&&!i)return NaN;var a=!!r;if(i){var o=i.replace(/0+$/,""),u=o.length,c=Math.pow(10,u),l=parseInt(n||"0",10)*c+parseInt(o||"0",10);return l>_||c>_?parseFloat(e):s(a?-l:l,c)}var l=parseInt(n,10);return l>_?parseFloat(e):s(a?-l:l,1)}function o(e){return i(e)?e.n/e.d:e}function s(e,t){if(!isFinite(e)||!isFinite(t)||0===t||Math.floor(e)!==e||Math.floor(t)!==t||Math.abs(e)>_||Math.abs(t)>_)return e/t;t<0&&(e=-e,t=-t);var i=r.gcd(e,t);return n(e/i,t/i)}function u(e){return i(e)?n(-e.n,e.d):-e}function c(e){return i(e)?n(Math.abs(e.n),Math.abs(e.d)):Math.abs(e)}function l(e){return i(e)?0===e.n?e.d/e.n:n(e.n<0?-e.d:e.d,Math.abs(e.n)):1/e}function p(e,t){if(!i(e)||!i(t))return o(e)+o(t);var n=r.gcd(e.d,t.d);return s(e.n*(t.d/n)+t.n*(e.d/n),e.d/n*t.d)}function f(e,t){if(!i(e)||!i(t))return o(e)*o(t);var n=r.gcd(e.n,t.d),a=r.gcd(t.n,e.d);return s(e.n/n*(t.n/a),e.d/a*(t.d/n))}function h(e,t){return p(e,u(t))}function d(e,t){return i(e)&&i(t)?f(e,l(t)):o(e)/o(t)}function m(e,t){var n=e,a=t;if(t.n<0&&(a=u(t),n=l(e)),!i(n)||!i(a))return r.pow(o(e),o(t));if(e=n,t=a,1===t.d)return s(Math.pow(e.n,t.n),Math.pow(e.d,t.n));var c=e.n<0;if(c&&t.d%2!=1)return NaN;var p=c?-1:1,f=p*Math.round(Math.pow(Math.abs(e.n),1/t.d)),h=Math.round(Math.pow(Math.abs(e.d),1/t.d));return Math.pow(f,t.d)!==e.n||Math.pow(h,t.d)!==e.d?r.pow(o(e),o(t)):s(Math.pow(f,t.n),Math.pow(h,t.n))}function y(e,t){if(!i(e)||!i(t))return r.pow(o(e),o(t));var n=m(e,t);return i(n)?n:r.pow(o(e),o(t))}function g(e){if(!i(e))return Math.sqrt(e);var t=Math.round(Math.sqrt(e.n)),r=Math.round(Math.sqrt(e.d));return t*t!==e.n||r*r!==e.d?Math.sqrt(o(e)):s(t,r)}function v(e,t){return y(e,l(t))}function b(e,t){if(!i(e)||!i(t)){var r=o(e),a=o(t);return r-a*Math.floor(r/a)}return h(e,f(t,n(Math.floor(o(d(e,t))),1)))}function x(e){for(var t=n(0,1),r=0,i=e;r<i.length;r++){t=p(t,i[r])}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.isRational=i;var _=Math.pow(2,53)-1;t.fromDecimalString=a,t.asFloat=o,t.maybeRational=s,t.neg=u,t.abs=c,t.reciprocal=l,t.add=p,t.mul=f,t.sub=h,t.div=d,t.pow=y,t.sqrt=g,t.nthroot=v,t.mod=b,t.total=x}),define("core/math/parsenode/constant",["require","pjs","./scalarexpression","core/math/maybe-rational","core/math/types"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("core/math/maybe-rational"),i=e("core/math/types");return t(r,function(e,t){e.init=function(e){"number"==typeof e&&(e=n.maybeRational(e,1)),this._constantValue=e,t.init.call(this,[])},e.isConstant=!0,e.getEvalStrings=function(){return{statements:[],expression:this.scalarExprString()}},e.asValue=function(){return"boolean"==typeof this._constantValue?this._constantValue:n.asFloat(this._constantValue)},e.asMaybeRationalValue=function(){return"boolean"==typeof this._constantValue?NaN:this._constantValue},e.scalarExprString=function(){return this.asValue()>0?String(this.asValue()):"("+String(this.asValue())+")"},e.getEvaluationInfo=function(){return[{val:this.asValue()}]},e.isNaN=function(){return"number"==typeof this.asValue()&&isNaN(this.asValue())},e._getValueType=function(){switch(typeof this.asValue()){case"number":return i.Number;case"boolean":return i.Bool;default:throw new Error("Constant node expects value of type number or boolean, but saw "+typeof value)}}})}),define("core/math/parsenode/mixednumber",["require","pjs","./constant"],function(e){"use strict";return e("pjs")(e("./constant"),function(e,t){e.init=function(e){t.init.call(this,e)},e.is_mixed_number=!0})}),define("core/math/parsenode/identifier",["require","pjs","./expression","core/lib/label","core/math/parser/input-span"],function(e){"use strict";var t=e("pjs"),r=e("./expression"),n=e("core/lib/label"),i=e("core/math/parser/input-span");return t(r,function(e,t,r){e.init=function(e){t.init.call(this,[]),this._symbol=n.latexToIdentifier(e),this.setInputSpan(new i.Span(e,0,e.length)),this.addDependency(this._symbol)},e.evaluate=function(){throw"Cannot evaluate undefined variable "+this._symbol}})}),define("core/math/parsenode/ans",["require","pjs","./identifier"],function(e){"use strict";return e("pjs")(e("./identifier"),function(e,t,r){})}),define("core/math/parsenode/freevariable",["require","pjs","./scalarexpression"],function(e){"use strict";return e("pjs")(e("./scalarexpression"),function(e,t){e.init=function(e){t.init.call(this,[]),this.addDependency(e),this._symbol=e},e.isFreeVariable=!0,e.scalarEvalExpression=function(e){return this._symbol},e.copyWithArgs=function(e){return this}})}),define("core/math/parsenode/dummyindex",["require","pjs","./freevariable"],function(e){"use strict";return e("pjs")(e("./freevariable"),function(){})}),define("core/math/parsenode/list",["require","pjs","./expression","core/math/errormsg","core/math/types"],function(e){"use strict";var t=e("pjs"),r=e("./expression"),n=e("core/math/errormsg"),i=e("core/math/types");return t(r,function(e,t,r){function a(e){for(var t=1/0,r=0;r<e.length;r++)(e[r].isList||e[r].isBroadcast)&&(t=Math.min(t,e[r].length));return t}e.init=function(e){if(t.init.call(this,e),this.length=e.length,0===this.length)throw n.emptyList()},e.isList=!0,e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();Array.prototype.push.apply(e,n.statements),t.push(n.expression)}return{statements:e,expression:"["+t.join(",")+"]"}},e.asValue=function(){for(var e=[],t=0;t<this.args.length;t++)e.push(this.args[t].asValue());return e},e.asMaybeRationalValue=function(){for(var e=[],t=0;t<this.args.length;t++)e.push(this.args[t].asMaybeRationalValue());return e},e.getEvaluationInfo=function(){if(this.args.every(function(e){return e.isConstant}))return[{val:this.args.map(function(e){return e.asValue()})}]},r.eachArgs=function(e,t,r){var n=a(t);if(!isFinite(n))return void r(t);for(var o=0;o<n;o++){for(var s=[],u=0;u<t.length;u++)s.push(t[u].isList||i.isList(t[u].valueType)?t[u].elementAt(e,o):t[u]);r(s)}},r.mapArgs=function(e,t,n){var i=[];return r.eachArgs(e,t,function(e){i.push(n(e))}),i},r.wrap=function(e){return e.isList||i.isList(e.valueType)?e:r([e])}})}),define("core/math/parsenode/range",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t,r){e.init=function(e){t.init.call(this,e),this.beginning=e[0],this.end=e[1]}})}),define("core/math/parsenode/broadcast",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t,r){e.init=function(e,r){if(t.init.call(this,r),this._replacedSymbols=e,this._expression=r[0],this._lists=r.slice(1),!e.length)throw new Error("Cannot construct a broadcast node with no replaced symbols");for(var n=0;n<e.length;n++)this.removeDependency(e[n]);for(var i=1/0,a=0;a<this._lists.length;a++){if(!this._lists[a].isList)throw new Error("List arguments of broadcast must be list literals");i=Math.min(i,this._lists[a].length)}this.length=i},e.isBroadcast=!0,e.copyWithArgs=function(e){return new this.constructor(this._replacedSymbols,e)},e.getEvalStrings=function(){var e=[],t=this._expression.getEvalStrings();Array.prototype.push.apply(e,t.statements);var r,n=[],i=[];for(r=0;r<this._lists.length;r++){var a=this._lists[r].getEvalStrings();Array.prototype.push.apply(e,a.statements);var o=this.tmpVar();i.push(o),n.push("var "+o+" = "+a.expression)}var s=this.tmpVar(),u=this.tmpVar();n.push("var "+s+" = []");var c=[];for(r=0;r<i.length;r++)c.push("var "+this._replacedSymbols[r]+" = "+i[r]+"["+u+"]");return n.push("for (var "+u+" = 0; "+u+" < "+this.length+"; "+u+"++) {\\n  "+c.join(";\\n  ")+";\\n  "+s+".push("+t.expression+");\\n}"),{statements:e.concat(n),expression:s}}})}),define("core/math/parsenode/listaccess",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this.list=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.list.getEvalStrings(),r=e.statements.concat(t.statements),n=this.tmpVar();r.push("var "+n+" = "+t.expression);var i=this.tmpVar();return r.push("var "+i+" = Math.floor("+e.expression+") - 1"),{statements:r,expression:"("+i+" >= 0 && "+i+" < "+n+".length ? "+n+"["+i+"] : NaN)"}}})}),define("core/math/parsenode/dotaccess",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),{})}),define("core/math/parsenode/dotaccessexponent",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),{})}),define("core/math/parsenode/orderedpair",["require","pjs","./scalarexpression"],function(e){"use strict";return e("pjs")(e("./scalarexpression"),function(e,t,r){e.asArray=function(){return[+this.args[0].asValue(),+this.args[1].asValue()]},e.asValue=e.asArray,e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies()).filter(function(t){return!e.validParametricVariable(t)})},e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();e=e.concat(n.statements),t.push(n.expression)}return{statements:e,expression:"["+t.join(",")+"]"}}})}),define("core/math/parsenode/movablepoint",["require","pjs","./orderedpair"],function(e){"use strict";return e("pjs")(e("./orderedpair"),function(e,t){e.init=function(e,r,n){t.init.call(this,e),this.moveStrategy=r,this.defaultDragMode=n},e.isMovablePoint=!0})}),
define("core/math/parsenode/orderedpairaccess",["require","pjs","./scalarexpression"],function(e){"use strict";return e("pjs")(e("./scalarexpression"),function(e,t){e.init=function(e){t.init.call(this,e),this.point=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.point.getEvalStrings(),r=[];return Array.prototype.push.apply(r,e.statements),Array.prototype.push.apply(r,t.statements),{statements:r,expression:t.expression+"["+e.expression+"-1]"}}})}),define("core/math/parsenode/polygon",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="polygon"}})}),define("core/math/comparators",["require","exports"],function(e,t){"use strict";function r(e,t){switch(t){case-1:return e?"<=":"<";case 0:return e?"=":"!=";case 1:return e?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1"}}Object.defineProperty(t,"__esModule",{value:!0}),t.table={"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},t.get=r}),define("core/math/parsenode/basecomparator",["require","pjs","./scalarexpression","./expressionTypes","core/math/comparators","core/math/functions"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("./expressionTypes").Subtract,i=e("core/math/comparators").table,a=e("core/math/functions");return t(r,function(e,r,o){o.create=function(e,r){return r=r||e,t(o,function(t,n){t.operator=e,t.isInequality=function(){return 0!==i[e].direction},t.compiledOperator=r,t.scalarEvalExpression=function(e){return e.join(r)},t.evaluate=a.createEvaluateFunction(t.scalarEvalExpression,2)})},e.init=function(e){r.init.call(this,e),this._difference=n(-1===i[this.operator].direction?[e[1],e[0]]:[e[0],e[1]])}})}),define("core/math/parsenode/comparator",["require","core/math/parsenode/basecomparator"],function(e){"use strict";var t=e("core/math/parsenode/basecomparator");return{"<":t.create("<"),">":t.create(">"),"<=":t.create("<="),">=":t.create(">="),"=":t.create("=","===")}}),define("core/math/parsenode/doubleinequality",["require","pjs","./base","core/math/comparators","./comparator"],function(e){"use strict";var t=e("pjs"),r=e("./base"),n=e("core/math/comparators"),i=e("./comparator");return t(r,function(e,t){e.init=function(e){t.init.call(this),this.args=e,this._symbol=e[2]._symbol,this._operators=[e[1],e[3]],this._expressions=[e[0],e[4]];var r=n.get(n.table[e[1]].inclusive&&n.table[e[3]].inclusive,n.table[e[1]].direction);this._indicator=i[r]([e[0],e[4]]),this.addDependency(this._symbol),this.mergeDependencies(this._expressions[0],this._expressions[1])},e.isInequality=function(){return!0},e.isShadeBetween=function(){return!0}})}),define("core/math/parsenode/repeatedoperator",["require","pjs","./scalarexpression","./dummyindex"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("./dummyindex");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this._index=e[0],this.addDummyDependency(this._index._symbol),this._index instanceof n&&this.removeDependency(this._index._symbol)},e.getEvalStrings=function(){var e=[],t=this.tmpVar(),r=this._index._symbol,n=this.tmpVar(),i=this.tmpVar(),a=this.args[1].getEvalStrings(),o=this.args[2].getEvalStrings(),s=this.args[3].getEvalStrings();Array.prototype.push.apply(e,a.statements),e.push("var "+n+" = Math.round("+a.expression+")"),Array.prototype.push.apply(e,o.statements),e.push("var "+i+" = Math.round("+o.expression+")"),e.push("var "+t+"="+this.starting_value);var u="for (var "+r+"="+n+";"+r+"<="+i+";"+r+"++) {"+s.statements.join(";")+";"+t+this.in_place_operator+s.expression+"};",c="if(!isFinite("+i+"-"+n+")) {"+t+"=("+i+"<"+n+"?"+this.starting_value+":NaN);}else{"+u+"}";return e.push(c),{statements:e,expression:t}},e.evaluate=function(e,t,r){var n=r.getCompiledFunction([this._index._symbol]).fn;if(t=Math.round(t),e=Math.round(e),!isFinite(t-e))return t<e?this.starting_value:NaN;for(var i=this.starting_value,a=e;a<=t;a++)i=this.update(i,n(a));return i}})}),define("core/math/parsenode/sum",["require","pjs","./repeatedoperator"],function(e){"use strict";return e("pjs")(e("./repeatedoperator"),function(e,t){e.in_place_operator="+=",e.starting_value=0,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return t<=0?this.starting_value:t*e[2]},e.update=function(e,t){return e+t}})}),define("core/math/parsenode/product",["require","pjs","./repeatedoperator"],function(e){"use strict";return e("pjs")(e("./repeatedoperator"),function(e,t){e.in_place_operator="*=",e.starting_value=1,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return t<=0?this.starting_value:Math.pow(e[2],t)},e.update=function(e,t){return e*t}})}),define("core/math/parsenode/integral",["require","pjs","./scalarexpression","./dummyindex","core/math/builtin"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("./dummyindex"),i=e("core/math/builtin");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this._differential=e[0],this.addDummyDependency(this._differential._symbol),this._differential instanceof n&&this.removeDependency(this._differential._symbol)},e.getEvalStrings=function(){var e=this.args[0],t=this.args[1],r=this.args[2],n=this.args[3],i=[],a=this.tmpVar(),o=e._symbol,s=this.tmpVar(),u=this.tmpVar(),c=t.getEvalStrings(),l=r.getEvalStrings(),p=n.getEvalStrings();return Array.prototype.push.apply(i,c.statements),Array.prototype.push.apply(i,l.statements),i.push("var "+s+" = "+c.expression),i.push("var "+u+" = "+l.expression),i.push("var "+a+" = function ("+o+") { "+p.statements.join("; ")+"; return "+p.expression+";}"),{statements:i,expression:"BuiltIn.quad("+[a,s,u].join(", ")+")"}},e.evaluate=function(e,t,r){var n=this.args[0],a=r.getCompiledFunction([n._symbol]).fn;return i.quad(a,e,t)}})}),define("core/math/parsenode/functioncall",["require","pjs","./expression","./identifier"],function(e){"use strict";var t=e("pjs"),r=e("./expression"),n=e("./identifier");return t(r,function(e,t){e.init=function(e,r){"string"==typeof e&&(e=n(e)),this._identifier=e,this._symbol=e._symbol,t.init.call(this,r),this.addDependency(this._symbol)},e.copyWithArgs=function(e){return new this.constructor(n(this._symbol),e)}})}),define("core/math/parsenode/seededfunctioncall",["require","pjs","./functioncall"],function(e){"use strict";return e("pjs")(e("./functioncall"),function(e,t){e.init=function(e,r){t.init.call(this,e,r),this.seed=r[0]}})}),define("core/math/parsenode/functionexponent",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){})}),define("core/math/parsenode/functionfactorial",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){})}),define("core/math/parsenode/prime",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e,r){t.init.call(this,r),this.order=e},e.copyWithArgs=function(e){return new this.constructor(this.order,e)}})}),define("core/math/parsenode/piecewise",["require","pjs","./scalarexpression","./constant","core/math/maybe-rational"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("./constant"),i=e("core/math/maybe-rational").maybeRational,a=t(r,{});return a.chain=function(e){for(var t,r=n(NaN);e.length;)t=e.pop(),r=a([t.condition,t.if_expr,r]);return r},a.empty=function(){return a([n(!0),n(i(1,1)),n(NaN)])},a}),define("core/math/parsenode/derivative",["require","pjs","./scalarexpression","./identifier"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("./identifier");return t(r,function(e,t){e.init=function(e,r){this._symbol=e instanceof n?e._symbol:n(e)._symbol,t.init.call(this,r)}})}),define("core/math/parsenode/nativefunction",["require","pjs","./scalarexpression","core/math/functions"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("core/math/functions");return t(r,function(e,r,i){e.init=function(e,t){if(e.length>=this._requiredArity)for(;e.length<this._maxArity;)e.push(this._optionalArguments[e.length-this._requiredArity]);this._errorSymbol="logbase"===this._symbol?"log":t||this._symbol,r.init.call(this,e)},e.copyWithArgs=function(e){var t=r.copyWithArgs.call(this,e);return t._errorSymbol=this._errorSymbol,t},e.scalarEvalExpression=function(e){return this.head+"("+e.join(",")+")"},i.create=function(e,r,i,a){return t(this,function(t,o,s){s.isFunction=!0,t._symbol=e,t.head=r,t._requiredArity=i,t._optionalArguments=a||[],t._maxArity=t._requiredArity+t._optionalArguments.length,t.evaluate=n.createEvaluateFunction(t.scalarEvalExpression.bind(t),t._maxArity),s.getConcreteInvocationTree=function(e,t,r,n,i){return s(r,n).getConcreteTree(e,t,i)},s.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/typedfunction",["require","pjs","./nativefunction"],function(e){"use strict";return e("pjs")(e("./nativefunction"),function(e,t,r,n){r.create=function(e,t,r,i){var a=r.length,o=n.create.call(this,e,t,a);return o.prototype._inputTypes=r,o.prototype._outputType=i,o}})}),define("core/math/parsenode/trigfunction",["require","pjs","./nativefunction","./expressionTypes","core/math/errormsg"],function(e){"use strict";var t=e("pjs"),r=e("./nativefunction"),n=e("./expressionTypes").Multiply,i=e("core/math/errormsg");return t(r,function(e,t,r,a){r.create=function(e,t){var r=a.create(e,t,1);return r.getConcreteInvocationTree=function(e,t,a,o,s){if(a.length<1)throw i.wrongArity(o,1,a.length);var u=t.trigAngleMultiplier?[n([a[0],t.trigAngleMultiplier])].concat(a.slice(1)):a;return r(u,o).getConcreteTree(e,t,s)},r.getCacheKeys=function(){return["trigAngleMultiplier"]},r}})}),define("core/math/parsenode/inversetrigfunction",["require","pjs","./nativefunction","./expressionTypes"],function(e){"use strict";var t=e("pjs"),r=e("./nativefunction"),n=e("./expressionTypes").Divide;return t(r,function(e,t,r,i){r.create=function(e,t,r){var a=i.create(e,t,1,r);return a.getConcreteInvocationTree=function(e,t,r,i,o){var s=a(r,i);return(t.trigAngleMultiplier?n([s,t.trigAngleMultiplier]):s).getConcreteTree(e,t,o)},a.getCacheKeys=function(){return["trigAngleMultiplier"]},a}})}),define("core/math/parsenode/distribution",["require","pjs","./scalarexpression","core/math/errormsg"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("core/math/errormsg");return t(r,function(e,r,i){e.init=function(e,t){var i="tdist"===this._symbol;if(e.length<this._requiredArity){if(i)throw n.tdistWrongArity();throw n.wrongArity(t,this._requiredArity,e.length)}if(e.length>this._maxArity){if(i)throw n.tdistWrongArity();throw n.wrongArity(this._symbol,this._maxArity,e.length)}for(;e.length<this._maxArity;)e.push(this._optionalArguments[e.length-this._requiredArity]);r.init.call(this,e)},e.scalarEvalExpression=function(e){return this.head+"("+e.join(",")+")"},i.create=function(e,r,n){return t(this,function(t,i,a){a.isFunction=!0,t._symbol=e,t._requiredArity=r,t._optionalArguments=n||[],t._maxArity=t._requiredArity+t._optionalArguments.length,a.getConcreteInvocationTree=function(e,t,r,n,i){return a(r,n)},a.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/reducerfunction",["require","pjs","./expression","core/math/functions","core/math/errormsg","./distribution","core/math/types"],function(e){"use strict";var t=e("pjs"),r=e("./expression"),n=e("core/math/functions"),i=e("core/math/errormsg"),a=e("./distribution"),o=e("core/math/types");return t(r,function(e,r,s){e.init=function(e,t){if(0===e.length)throw i.zeroArgReducer(t);if(e[0]instanceof a&&"length"!==this._symbol&&!e[0][this._symbol])throw i.functionTypeError(this._symbol,[o.prettyPrint(this.args[0].valueType)]);r.init.call(this,e)},e.evalExpression=function(e){return this.head+"("+e+")"},e.getEvalStrings=function(){var e=this.args[0].getEvalStrings();return{statements:e.statements,expression:this.evalExpression(e.expression)}},s.create=function(e,r){return t(s,function(t,i,a){t._symbol=e,t.head=r,t._arity=1,a.isFunction=!0,a.allowDotCalls=!0,a.dotMinArity=0,a.dotMaxArity=0,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),a.getConcreteInvocationTree=function(e,t,r,n,i){return a(r,n).getConcreteTree(e,t,i)},a.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/doublereducerfunction",["require","pjs","./expression","core/math/functions","core/math/errormsg"],function(e){"use strict";var t=e("pjs"),r=e("./expression"),n=e("core/math/functions"),i=e("core/math/errormsg");return t(r,function(e,r,a){e.init=function(e,t){if(r.init.call(this,e),2!==this.args.length)throw i.wrongDoubleReducerArity(t)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=[],t=[],r=Math.min(this.args[0].length,this.args[1].length),n=0;n<this.args.length;n++){var i=this.args[n],a=i.getEvalStrings();Array.prototype.push.apply(e,a.statements),t.push(i.length===r?a.expression:a.expression+".slice(0,"+r+")")}return{statements:e,expression:this.evalExpression(t)}},a.create=function(e,r){return t(a,function(t,i,a){t._symbol=e,t.head=r,t._arity=2,a.isFunction=!0,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),a.getConcreteInvocationTree=function(e,t,r,n,i){return a(r,n).getConcreteTree(e,t,i)},a.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/parametrizedreducerfunction",["require","pjs","./expression","core/math/functions","core/math/errormsg","./distribution","core/math/types"],function(e){"use strict";var t=e("pjs"),r=e("./expression"),n=e("core/math/functions"),i=e("core/math/errormsg"),a=e("./distribution"),o=e("core/math/types");return t(r,function(e,r,s){e.init=function(e,t){if(e.length<2&&void 0!==this._optionalArgument&&e.push(this._optionalArgument),2!==e.length)throw i.wrongParametrizedReducerArity(t);if(e[0]instanceof a&&!e[0][this._symbol])throw i.functionTypeError(t,[o.prettyPrint(this.args[0].valueType)]);r.init.call(this,e)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){var e=[],t=this.args[0].getEvalStrings(),r=this.args[1].getEvalStrings();return Array.prototype.push.apply(e,t.statements),Array.prototype.push.apply(e,r.statements),{statements:e,expression:this.evalExpression([t.expression,r.expression])}},s.create=function(e,r,i){return t(s,function(t,a,o){t._symbol=e,t.head=r,t._optionalArgument=i,t._arity=2,o.isFunction=!0,o.allowDotCalls=!0,o.dotMinArity=void 0===i?1:0,o.dotMaxArity=1,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),o.getConcreteInvocationTree=function(e,t,r,n,i){return o(r,n).getConcreteTree(e,t,i)},o.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/toplevelfunction",["require","pjs","./nativefunction","core/math/errormsg"],function(e){"use strict";var t=e("pjs"),r=e("./nativefunction"),n=e("core/math/errormsg");return t(r,function(e,r,i,a){i.create=function(e){return t(i,function(e,t,r){r.isFunction=!0,r.getConcreteInvocationTree=function(e,t,r,i,a){throw n.unexpectedSymbol(i)},r.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/builtinfunction",["require","core/math/parsenode/nativefunction","core/math/parsenode/typedfunction","core/math/parsenode/trigfunction","core/math/parsenode/inversetrigfunction","core/math/parsenode/reducerfunction","core/math/parsenode/doublereducerfunction","core/math/parsenode/parametrizedreducerfunction","core/math/parsenode/distribution","core/math/parsenode/toplevelfunction","core/math/types","core/math/maybe-rational","core/math/parsenode/constant"],function(e){"use strict";var t=e("core/math/parsenode/nativefunction"),r=e("core/math/parsenode/typedfunction"),n=e("core/math/parsenode/trigfunction"),i=e("core/math/parsenode/inversetrigfunction"),a=e("core/math/parsenode/reducerfunction"),o=e("core/math/parsenode/doublereducerfunction"),s=e("core/math/parsenode/parametrizedreducerfunction"),u=e("core/math/parsenode/distribution"),c=e("core/math/parsenode/toplevelfunction"),l=e("core/math/types"),p=e("core/math/maybe-rational").maybeRational,f=e("core/math/parsenode/constant"),h=f(p(1,1)),d=f(p(0,1)),m=f(p(1,2));return{sin:n.create("sin","BuiltIn.sin"),cos:n.create("cos","BuiltIn.cos"),tan:n.create("tan","BuiltIn.tan"),cot:n.create("cot","BuiltIn.cot"),sec:n.create("sec","BuiltIn.sec"),csc:n.create("csc","BuiltIn.csc"),arcsin:i.create("arcsin","Math.asin"),arccos:i.create("arccos","Math.acos"),arctan:i.create("arctan","Math.atan2",[h]),arccot:i.create("arccot","BuiltIn.acot"),arcsec:i.create("arcsec","BuiltIn.asec"),arccsc:i.create("arccsc","BuiltIn.acsc"),sinh:t.create("sinh","BuiltIn.sinh",1),cosh:t.create("cosh","BuiltIn.cosh",1),tanh:t.create("tanh","BuiltIn.tanh",1),coth:t.create("coth","BuiltIn.coth",1),sech:t.create("sech","BuiltIn.sech",1),csch:t.create("csch","BuiltIn.csch",1),arcsinh:t.create("arcsinh","BuiltIn.asinh",1),arccosh:t.create("arccosh","BuiltIn.acosh",1),arctanh:t.create("arctanh","BuiltIn.atanh",1),arccoth:t.create("arccoth","BuiltIn.acoth",1),arcsech:t.create("arcsech","BuiltIn.asech",1),arccsch:t.create("arccsch","BuiltIn.acsch",1),sqrt:t.create("sqrt","Math.sqrt",1),rtxsqpone:t.create("rtxsqpone","BuiltIn.sqrtxsqp1",1),rtxsqmone:t.create("rtxsqmone","BuiltIn.sqrtxsqm1",1),nthroot:t.create("nthroot","BuiltIn.nthroot",2),log:t.create("log","BuiltIn.common_log",1),logbase:t.create("logbase","BuiltIn.log_base",2),ln:t.create("ln","BuiltIn.log",1),exp:t.create("exp","Math.exp",1),floor:t.create("floor","Math.floor",1),ceil:t.create("ceil","Math.ceil",1),round:t.create("round","BuiltIn.round",1,[d]),abs:t.create("abs","Math.abs",1),sign:t.create("sign","BuiltIn.sign",1),mod:t.create("mod","BuiltIn.mod",2),nCr:t.create("nCr","BuiltIn.nCr",2),nPr:t.create("nPr","BuiltIn.nPr",2),factorial:t.create("factorial","BuiltIn.factorial",1),polyGamma:t.create("polyGamma","BuiltIn.polyGamma",2),lcm:a.create("lcm","BuiltIn.listLCM"),gcd:a.create("gcd","BuiltIn.listGCD"),mean:a.create("mean","BuiltIn.mean"),total:a.create("total","BuiltIn.total"),stdev:a.create("stdev","BuiltIn.stdev"),stdevp:a.create("stdevp","BuiltIn.stdevp"),mad:a.create("mad","BuiltIn.mad"),length:a.create("length","BuiltIn.length"),min:a.create("min","BuiltIn.listMin"),max:a.create("max","BuiltIn.listMax"),argmin:a.create("argmin","BuiltIn.argMin"),argmax:a.create("argmax","BuiltIn.argMax"),median:a.create("median","BuiltIn.median"),var:a.create("var","BuiltIn.var"),varp:a.create("varp","BuiltIn.varp"),cov:o.create("cov","BuiltIn.cov"),covp:o.create("covp","BuiltIn.covp"),corr:o.create("corr","BuiltIn.corr"),spearman:o.create("spearman","BuiltIn.spearman"),quantile:s.create("quantile","BuiltIn.quantile"),quartile:s.create("quartile","BuiltIn.quartile"),upperQuantileIndex:s.create("upperQuantileIndex","BuiltIn.upperQuantileIndex"),lowerQuantileIndex:s.create("lowerQuantileIndex","BuiltIn.lowerQuantileIndex"),quartileIndex:s.create("quartileIndex","BuiltIn.quartileIndex"),upperQuartileIndex:s.create("upperQuartileIndex","BuiltIn.upperQuartileIndex"),lowerQuartileIndex:s.create("lowerQuartileIndex","BuiltIn.lowerQuartileIndex"),normalcdf:t.create("normalcdf","BuiltIn.normalcdf",2,[d,h]),normalpdf:t.create("normalpdf","BuiltIn.normalpdf",1,[d,h]),normalSample:r.create("normalSample","BuiltIn.normalSample",[l.SeedType,l.Number,l.Number],l.Number),uniformSample:r.create("uniformSample","BuiltIn.uniformSample",[l.SeedType,l.Number,l.Number],l.Number),tSample:r.create("tSample","BuiltIn.tSample",[l.SeedType,l.Number],l.Number),poissonSample:r.create("poissonSample","BuiltIn.poissonSample",[l.SeedType,l.Number],l.Number),binomSample:r.create("binomSample","BuiltIn.binomSample",[l.SeedType,l.Number,l.Number],l.Number),binomcdf:t.create("binomcdf","BuiltIn.binomcdf",3,[m]),binompdf:t.create("binompdf","BuiltIn.binompdf",2,[m]),poissoncdf:t.create("poissoncdf","BuiltIn.poissoncdf",3),poissonpdf:t.create("poissonpdf","BuiltIn.poissonpdf",2),uniformcdf:t.create("uniformcdf","BuiltIn.uniformcdf",2,[d,h]),uniformpdf:t.create("uniformpdf","BuiltIn.uniformpdf",1,[d,h]),invNorm:t.create("invNorm","BuiltIn.invNorm",1),invT:t.create("invT","BuiltIn.invT",2),invPoisson:t.create("invPoisson","BuiltIn.invPoisson",2),invBinom:t.create("invBinom","BuiltIn.invBinom",3),invUniform:t.create("invUniform","BuiltIn.invUniform",3),erf:t.create("erf","BuiltIn.erf",1),tpdf:t.create("tpdf","BuiltIn.tpdf",2),tcdf:t.create("tcdf","BuiltIn.tcdf",3),tscore:s.create("tscore","BuiltIn.tscore",d),distance:r.create("distance","BuiltIn.distance",[l.Point,l.Point],l.Number),midpoint:r.create("midpoint","BuiltIn.midpoint",[l.Point,l.Point],l.Point),normaldist:u.create("normaldist",0,[d,h]),tdist:u.create("tdist",1),binomialdist:u.create("binomialdist",1,[m]),poissondist:u.create("poissondist",1),uniformdist:u.create("uniformdist",0,[d,h]),pdf:r.create("pdf","BuiltIn.normpdf",[l.Distribution,[l.Number,l.ListOfNumber]],l.Number).open(function(e,t,r){r.allowDotCalls=!0,r.dotMinArity=1,r.dotMaxArity=1}),cdf:r.create("cdf","BuiltIn.normcdf",[l.Distribution,[l.Number,l.ListOfNumber],[l.Number,l.ListOfNumber]],l.Number).open(function(e,t,r){r.allowDotCalls=!0,r.dotMinArity=1,r.dotMaxArity=2}),random:t.create("random","BuiltIn.random",2).open(function(e,t,r){r.allowDotCalls=!0,r.dotMinArity=1,r.dotMaxArity=3}),polygon:c.create("polygon"),histogram:c.create("histogram"),dotplot:c.create("dotplot"),boxplot:c.create("boxplot"),ttest:c.create("ttest"),ittest:c.create("ittest"),stats:c.create("stats")}}),define("core/math/parsenode/histogram",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="histogram"}})}),define("core/math/parsenode/object3d",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e,r){t.init.call(this,e),this._symbol=r}})}),define("core/math/parsenode/dotplot",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="dotplot"}})}),define("core/math/parsenode/boxplot",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="boxplot"}})}),define("core/math/parsenode/ttest",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(){t.init.apply(this,arguments),this._symbol="ttest"}})}),define("core/math/parsenode/independent-ttest",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(){t.init.apply(this,arguments),this._symbol="ittest"}})}),define("core/math/parsenode/stats",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(){t.init.apply(this,arguments),this._symbol="stats"}})}),define("core/math/parsenode/equation",["require","./base","pjs","./expressionTypes","core/math/parsenode/comparator"],function(e){"use strict";var t=e("./base"),r=e("pjs"),n=e("./expressionTypes").Subtract,i=e("core/math/parsenode/comparator");return r(t,function(e,t){e.init=function(e,r){t.init.call(this),this.mergeDependencies(e,r),this._lhs=e,this._rhs=r,this._difference=n([this._lhs,this._rhs])},e.asComparator=function(){return i["="]([this._lhs,this._rhs])}})}),define("core/math/parsenode/assignment",["require","./base","./equation","./identifier","pjs"],function(e){"use strict";var t=e("./base"),r=e("./equation"),n=e("./identifier");return e("pjs")(t,function(e,t){e.init=function(e,r){t.init.call(this),e=e._symbol,this.mergeDependencies(r),this._expression=r,this._symbol=e,this._exports=this.computeExports()},e.shouldExportAns=function(){return!0},e.computeExports=function(){for(var e=this._symbol,t=this.getDependencies(),r=0;r<t.length;r++)if(t[r]===e)return[];return[e]},e.isEquation=function(e){return-1!==e.getDependencies().indexOf(this._symbol)},e.asEquation=function(){var e=r(n(this._symbol),this._expression);return e.userData=this.userData,e.metaData=this.metaData,e},e.shouldPromoteToSlider=function(e){return!!this._expression.isConstant&&!this._expression.is_mixed_number&&"number"==typeof this._expression.asValue()&&!!isFinite(this._expression.asValue())&&e.isValidSlider(this._symbol)}})}),define("core/math/parsenode/functiondefinition",["require","pjs","./base","core/math/errormsg","./equation","./identifier","./functioncall"],function(e){"use strict";var t=e("pjs"),r=e("./base"),n=e("core/math/errormsg"),i=e("./equation"),a=e("./identifier"),o=e("./functioncall");return t(r,function(e,t){e.init=function(e,r,n){t.init.call(this),e=e._symbol,this._argSymbols=r.map(function(e){return e._symbol}),this._symbol=e,this._exports=[e],this._expression=n,this.addDependencies(this._argSymbols),this.addDummyDependencies(this._argSymbols),this.mergeDependencies(this._expression)},e.isFunction=!0,e.getConcreteInvocationTree=function(e,t,r,i,a){if(r.length!==this._argSymbols.length)throw n.wrongArity(i,this._argSymbols.length,r.length);for(var o=Object.create(t),s=0;s<this._argSymbols.length;s++)o[this._argSymbols[s]]=r[s];return this._expression.getConcreteTree(e,o,a)},e.getSliderVariables=function(e,t){var r=this._argSymbols;return e.sliderVariables(t.getDependencies()).filter(function(e){return-1===r.indexOf(e)})},e.asEquation=function(){var e=this._argSymbols.map(function(e){return a(e)}),t=i(o(a(this._symbol),e),this._expression);return t.userData=this.userData,t.metaData=this.metaData,t}})}),define("core/math/parsenode/optimizedregression",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t){e.init=function(e,r,n,i,a){t.init.call(this),this.parameters=e,this.residuals=r,this.statistics=n,this.model=i,this.isModelValid=a.isModelValid,this.residualVariable=a.residualVariable,this.residualSuggestionId=a.residualSuggestionId,this.shouldSuggestLogMode=a.shouldSuggestLogMode,this._exports=[this.residualVariable];for(var o in e)e.hasOwnProperty(o)&&this._exports.push(o);this.mergeDependencies(i)},e.getCompiledFunction=function(){return this.model.getCompiledFunction.apply(this.model,arguments)},e.getCompiledDerivative=function(){return this.model.getCompiledDerivative.apply(this.model,arguments)},e.evaluate=function(){return this.model.evaluate.apply(this.model,arguments)}})}),define("numeric",[],function(){"use strict";var e="undefined"==typeof exports?function(){}:exports;return"undefined"!=typeof global&&(global.numeric=e),e.version="1.2.6",e._myIndexOf=function(e){var t,r=this.length;for(t=0;t<r;++t)if(this[t]===e)return t;return-1},e.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:e._myIndexOf,e.precision=4,e.largeArray=50,e.compile=function(){var t=Array.prototype.slice.call(arguments),r=t.pop();return r="return function ("+t.join(",")+") {"+r+"}",new Function(["numeric"],r)(e)},e._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},e.dim=function(t){var r,n;return"object"==typeof t?(r=t[0],"object"==typeof r?(n=r[0],"object"==typeof n?e._dim(t):[t.length,r.length]):[t.length]):[]},e.mapreduce=function(t,r){return e.compile("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+r+';\\nif(typeof x === "number") { var xi = x; '+t+'; return accum; }\\nif(typeof _s === "undefined") _s = numeric.dim(x);\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i,xi;\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) {\\n        accum = arguments.callee(x[i],accum,_s,_k+1);\\n    }    return accum;\\n}\\nfor(i=_n-1;i>=1;i-=2) { \\n    xi = x[i];\\n    '+t+";\\n    xi = x[i-1];\\n    "+t+";\\n}\\nif(i === 0) {\\n    xi = x[i];\\n    "+t+"\\n}\\nreturn accum;")},e.mapreduce2=function(t,r){return e.compile("x","var n = x.length;\\nvar i,xi;\\n"+r+"\\nfor(i=n-1;i!==-1;--i) { \\n    xi = x[i];\\n    "+t+"\\n}\\nreturn accum;")},e.rep=function(t,r,n){void 0===n&&(n=0);var i,a=t[n],o=Array(a);if(n===t.length-1){for(i=a-2;i>=0;i-=2)o[i+1]=r,o[i]=r;return-1===i&&(o[0]=r),o}for(i=a-1;i>=0;i--)o[i]=e.rep(t,r,n+1);return o},e.dotMMsmall=function(e,t){var r,n,i,a,o,s,u,c,l,p,f;for(a=e.length,o=t.length,s=t[0].length,u=Array(a),r=a-1;r>=0;r--){for(c=Array(s),l=e[r],i=s-1;i>=0;i--){for(p=l[o-1]*t[o-1][i],n=o-2;n>=1;n-=2)f=n-1,p+=l[n]*t[n][i]+l[f]*t[f][i];0===n&&(p+=l[0]*t[0][i]),c[i]=p}u[r]=c}return u},e._getCol=function(e,t,r){var n,i=e.length;for(n=i-1;n>0;--n)r[n]=e[n][t],--n,r[n]=e[n][t];0===n&&(r[0]=e[0][t])},e.dotMMbig=function(t,r){var n,i,a,o=e._getCol,s=r.length,u=Array(s),c=t.length,l=r[0].length,p=new Array(c),f=e.dotVV;for(--s,--c,i=c;-1!==i;--i)p[i]=Array(l);for(--l,i=l;-1!==i;--i)for(o(r,i,u),a=c;-1!==a;--a)0,n=t[a],p[a][i]=f(n,u);return p},e.dotMV=function(t,r){var n,i=t.length,a=(r.length,Array(i)),o=e.dotVV;for(n=i-1;n>=0;n--)a[n]=o(t[n],r);return a},e.dotVM=function(e,t){var r,n,i,a,o,s,u;for(i=e.length,a=t[0].length,o=Array(a),n=a-1;n>=0;n--){for(s=e[i-1]*t[i-1][n],r=i-2;r>=1;r-=2)u=r-1,s+=e[r]*t[r][n]+e[u]*t[u][n];0===r&&(s+=e[0]*t[0][n]),o[n]=s}return o},e.dotVV=function(e,t){var r,n,i=e.length,a=e[i-1]*t[i-1];for(r=i-2;r>=1;r-=2)n=r-1,a+=e[r]*t[r]+e[n]*t[n];return 0===r&&(a+=e[0]*t[0]),a},e.dot=function(t,r){var n=e.dim;switch(1e3*n(t).length+n(r).length){case 2002:return r.length<10?e.dotMMsmall(t,r):e.dotMMbig(t,r);case 2001:return e.dotMV(t,r);case 1002:return e.dotVM(t,r);case 1001:return e.dotVV(t,r);case 1e3:return e.mulVS(t,r);case 1:return e.mulSV(t,r);case 0:return t*r;default:throw new Error("numeric.dot only works on vectors and matrices")}},e.diag=function(e){var t,r,n,i,a=e.length,o=Array(a);for(t=a-1;t>=0;t--){for(i=Array(a),r=t+2,n=a-1;n>=r;n-=2)i[n]=0,i[n-1]=0;for(n>t&&(i[n]=0),i[t]=e[t],n=t-1;n>=1;n-=2)i[n]=0,i[n-1]=0;0===n&&(i[0]=0),o[t]=i}return o},e.getDiag=function(e){var t,r=Math.min(e.length,e[0].length),n=Array(r);for(t=r-1;t>=1;--t)n[t]=e[t][t],--t,n[t]=e[t][t];return 0===t&&(n[0]=e[0][0]),n},e.identity=function(t){return e.diag(e.rep([t],1))},e.pointwise=function(t,r,n){void 0===n&&(n="");var i,a,o=[],s=/\\[i\\]$/,u="",c=!1;for(i=0;i<t.length;i++)s.test(t[i])?(a=t[i].substring(0,t[i].length-3),u=a):a=t[i],"ret"===a&&(c=!0),o.push(a);return o[t.length]="_s",o[t.length+1]="_k",o[t.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+u+');\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i'+(c?"":", ret = Array(_n)")+";\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+t.join(",")+",_s,_k+1);\\n    return ret;\\n}\\n"+n+"\\nfor(i=_n-1;i!==-1;--i) {\\n    "+r+"\\n}\\nreturn ret;",e.compile.apply(null,o)},e.pointwise2=function(t,r,n){void 0===n&&(n="");var i,a,o=[],s=/\\[i\\]$/,u="",c=!1;for(i=0;i<t.length;i++)s.test(t[i])?(a=t[i].substring(0,t[i].length-3),u=a):a=t[i],"ret"===a&&(c=!0),o.push(a);return o[t.length]="var _n = "+u+".length;\\nvar i"+(c?"":", ret = Array(_n)")+";\\n"+n+"\\nfor(i=_n-1;i!==-1;--i) {\\n"+r+"\\n}\\nreturn ret;",e.compile.apply(null,o)},e._biforeach=function e(t,r,n,i,a){if(i===n.length-1)return void a(t,r);var o,s=n[i];for(o=s-1;o>=0;o--)e("object"==typeof t?t[o]:t,"object"==typeof r?r[o]:r,n,i+1,a)},e._biforeach2=function e(t,r,n,i,a){if(i===n.length-1)return a(t,r);var o,s=n[i],u=Array(s);for(o=s-1;o>=0;--o)u[o]=e("object"==typeof t?t[o]:t,"object"==typeof r?r[o]:r,n,i+1,a);return u},e._foreach=function e(t,r,n,i){if(n===r.length-1)return void i(t);var a,o=r[n];for(a=o-1;a>=0;a--)e(t[a],r,n+1,i)},e._foreach2=function e(t,r,n,i){if(n===r.length-1)return i(t);var a,o=r[n],s=Array(o);for(a=o-1;a>=0;a--)s[a]=e(t[a],r,n+1,i);return s},e.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",
bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},e.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},e.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],e.mathfuns2=["atan2","pow","max","min"],e.ops1={neg:"-",not:"!",bnot:"~",clone:""},e.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi);","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var t,r;for(t=0;t<e.mathfuns2.length;++t)r=e.mathfuns2[t],e.ops2[r]=r;for(t in e.ops2)if(e.ops2.hasOwnProperty(t)){r=e.ops2[t];var n,i,a="";-1!==e.myIndexOf.call(e.mathfuns2,t)?(a="var "+r+" = Math."+r+";\\n",n=function(e,t,n){return e+" = "+r+"("+t+","+n+")"},i=function(e,t){return e+" = "+r+"("+e+","+t+")"}):(n=function(e,t,n){return e+" = "+t+" "+r+" "+n},i=e.opseq.hasOwnProperty(t+"eq")?function(e,t){return e+" "+r+"= "+t}:function(e,t){return e+" = "+e+" "+r+" "+t}),e[t+"VV"]=e.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),a),e[t+"SV"]=e.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),a),e[t+"VS"]=e.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),a),e[t]=e.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar VV = numeric."+t+"VV, VS = numeric."+t+"VS, SV = numeric."+t+'SV;\\nvar dim = numeric.dim;\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof x === "object") {\\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\\n  else '+i("x","y")+"\\n}\\nreturn x;\\n"),e[r]=e[t],e[t+"eqV"]=e.pointwise2(["ret[i]","x[i]"],i("ret[i]","x[i]"),a),e[t+"eqS"]=e.pointwise2(["ret[i]","x"],i("ret[i]","x"),a),e[t+"eq"]=e.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar V = numeric."+t+"eqV, S = numeric."+t+'eqS\\nvar s = numeric.dim(x);\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\\n  else numeric._biforeach(x,y,s,0,S);\\n}\\nreturn x;\\n')}for(t=0;t<e.mathfuns2.length;++t)r=e.mathfuns2[t],delete e.ops2[r];for(t=0;t<e.mathfuns.length;++t)r=e.mathfuns[t],e.ops1[r]=r;for(t in e.ops1)e.ops1.hasOwnProperty(t)&&(a="",r=e.ops1[t],-1!==e.myIndexOf.call(e.mathfuns,t)&&Math.hasOwnProperty(r)&&(a="var "+r+" = Math."+r+";\\n"),e[t+"eqV"]=e.pointwise2(["ret[i]"],"ret[i] = "+r+"(ret[i]);",a),e[t+"eq"]=e.compile("x",'if(typeof x !== "object") return '+r+"x\\nvar i;\\nvar V = numeric."+t+"eqV;\\nvar s = numeric.dim(x);\\nnumeric._foreach(x,s,0,V);\\nreturn x;\\n"),e[t+"V"]=e.pointwise2(["x[i]"],"ret[i] = "+r+"(x[i]);",a),e[t]=e.compile("x",'if(typeof x !== "object") return '+r+"(x)\\nvar i;\\nvar V = numeric."+t+"V;\\nvar s = numeric.dim(x);\\nreturn numeric._foreach2(x,s,0,V);\\n"));for(t=0;t<e.mathfuns.length;++t)r=e.mathfuns[t],delete e.ops1[r];for(t in e.mapreducers)e.mapreducers.hasOwnProperty(t)&&(r=e.mapreducers[t],e[t+"V"]=e.mapreduce2(r[0],r[1]),e[t]=e.compile("x","s","k",r[1]+'if(typeof x !== "object") {    xi = x;\\n'+r[0]+'\\n    return accum;\\n}if(typeof s === "undefined") s = numeric.dim(x);\\nif(typeof k === "undefined") k = 0;\\nif(k === s.length-1) return numeric.'+t+"V(x);\\nvar xi;\\nvar n = x.length, i;\\nfor(i=n-1;i!==-1;--i) {\\n   xi = arguments.callee(x[i]);\\n"+r[0]+"\\n}\\nreturn accum;\\n"))}(),e.inv=function(t){var r,n,i,a,o,s,u,t,c=e.dim(t),l=Math.abs,p=c[0],f=c[1],h=e.clone(t),d=e.identity(p);for(s=0;s<f;++s){var m=-1,y=-1;for(o=s;o!==p;++o)(u=l(h[o][s]))>y&&(m=o,y=u);for(n=h[m],h[m]=h[s],h[s]=n,a=d[m],d[m]=d[s],d[s]=a,t=n[s],u=s;u!==f;++u)n[u]/=t;for(u=f-1;-1!==u;--u)a[u]/=t;for(o=p-1;-1!==o;--o)if(o!==s){for(r=h[o],i=d[o],t=r[s],u=s+1;u!==f;++u)r[u]-=n[u]*t;for(u=f-1;u>0;--u)i[u]-=a[u]*t,--u,i[u]-=a[u]*t;0===u&&(i[0]-=a[0]*t)}}return d},e.det=function(t){var r=e.dim(t);if(2!==r.length||r[0]!==r[1])throw new Error("numeric: det() only works on square matrices");var n,i,a,o,s,u,c,l,p=r[0],f=1,h=e.clone(t);for(i=0;i<p-1;i++){for(a=i,n=i+1;n<p;n++)Math.abs(h[n][i])>Math.abs(h[a][i])&&(a=n);for(a!==i&&(c=h[a],h[a]=h[i],h[i]=c,f*=-1),o=h[i],n=i+1;n<p;n++){for(s=h[n],u=s[i]/o[i],a=i+1;a<p-1;a+=2)l=a+1,s[a]-=o[a]*u,s[l]-=o[l]*u;a!==p&&(s[a]-=o[a]*u)}if(0===o[i])return 0;f*=o[i]}return f*h[i][i]},e.transpose=function(e){var t,r,n,i,a,o=e.length,s=e[0].length,u=Array(s);for(r=0;r<s;r++)u[r]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=s-1;r>=1;--r)a=u[r],a[t]=i[r],a[t-1]=n[r],--r,a=u[r],a[t]=i[r],a[t-1]=n[r];0===r&&(a=u[0],a[t]=i[0],a[t-1]=n[0])}if(0===t){for(n=e[0],r=s-1;r>=1;--r)u[r][0]=n[r],--r,u[r][0]=n[r];0===r&&(u[0][0]=n[0])}return u},e.negtranspose=function(e){var t,r,n,i,a,o=e.length,s=e[0].length,u=Array(s);for(r=0;r<s;r++)u[r]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=s-1;r>=1;--r)a=u[r],a[t]=-i[r],a[t-1]=-n[r],--r,a=u[r],a[t]=-i[r],a[t-1]=-n[r];0===r&&(a=u[0],a[t]=-i[0],a[t-1]=-n[0])}if(0===t){for(n=e[0],r=s-1;r>=1;--r)u[r][0]=-n[r],--r,u[r][0]=-n[r];0===r&&(u[0][0]=-n[0])}return u},e.norm2=function(t){return Math.sqrt(e.norm2Squared(t))},e.linspace=function(e,t,r){if(void 0===r&&(r=Math.max(Math.round(t-e)+1,1)),r<2)return 1===r?[e]:[];var n,i=Array(r);for(r--,n=r;n>=0;n--)i[n]=(n*t+(r-n)*e)/r;return i},e.getBlock=function(t,r,n){function i(e,t){var o,s=r[t],u=n[t]-s,c=Array(u);if(t===a.length-1){for(o=u;o>=0;o--)c[o]=e[o+s];return c}for(o=u;o>=0;o--)c[o]=i(e[o+s],t+1);return c}var a=e.dim(t);return i(t,0)},e.setBlock=function(t,r,n,i){function a(e,t,i){var s,u=r[i],c=n[i]-u;if(i===o.length-1)for(s=c;s>=0;s--)e[s+u]=t[s];for(s=c;s>=0;s--)a(e[s+u],t[s],i+1)}var o=e.dim(t);return a(t,i,0),t},e.getRange=function(e,t,r){var n,i,a,o,s=t.length,u=r.length,c=Array(s);for(n=s-1;-1!==n;--n)for(c[n]=Array(u),a=c[n],o=e[t[n]],i=u-1;-1!==i;--i)a[i]=o[r[i]];return c},e.blockMatrix=function(t){var r=e.dim(t);if(r.length<4)return e.blockMatrix([t]);var n,i,a,o,s,u=r[0],c=r[1];for(n=0,i=0,a=0;a<u;++a)n+=t[a][0].length;for(o=0;o<c;++o)i+=t[0][o][0].length;var l=Array(n);for(a=0;a<n;++a)l[a]=Array(i);var p,f,h,d,m,y=0;for(a=0;a<u;++a){for(p=i,o=c-1;-1!==o;--o)for(s=t[a][o],p-=s[0].length,h=s.length-1;-1!==h;--h)for(m=s[h],f=l[y+h],d=m.length-1;-1!==d;--d)f[p+d]=m[d];y+=t[a][0].length}return l},e.tensor=function(t,r){if("number"==typeof t||"number"==typeof r)return e.mul(t,r);var n=e.dim(t),i=e.dim(r);if(1!==n.length||1!==i.length)throw new Error("numeric: tensor product is only defined for vectors");var a,o,s,u,c=n[0],l=i[0],p=Array(c);for(o=c-1;o>=0;o--){for(a=Array(l),u=t[o],s=l-1;s>=3;--s)a[s]=u*r[s],--s,a[s]=u*r[s],--s,a[s]=u*r[s],--s,a[s]=u*r[s];for(;s>=0;)a[s]=u*r[s],--s;p[o]=a}return p},e.epsilon=2.220446049250313e-16,e.LU=function(t,r){r=r||!1;var n,i,a,o,s,u,c,l,p,f=Math.abs,h=t.length,d=h-1,m=new Array(h);for(r||(t=e.clone(t)),a=0;a<h;++a){for(c=a,u=t[a],p=f(u[a]),i=a+1;i<h;++i)o=f(t[i][a]),p<o&&(p=o,c=i);for(m[a]=c,c!=a&&(t[a]=t[c],t[c]=u,u=t[a]),s=u[a],n=a+1;n<h;++n)t[n][a]/=s;for(n=a+1;n<h;++n){for(l=t[n],i=a+1;i<d;++i)l[i]-=l[a]*u[i],++i,l[i]-=l[a]*u[i];i===d&&(l[i]-=l[a]*u[i])}}return{LU:t,P:m}},e.LUsolve=function(t,r){var n,i,a,o,s,u=t.LU,c=u.length,l=e.clone(r),p=t.P;for(n=c-1;-1!==n;--n)l[n]=r[n];for(n=0;n<c;++n)for(a=p[n],p[n]!==n&&(s=l[n],l[n]=l[a],l[a]=s),o=u[n],i=0;i<n;++i)l[n]-=l[i]*o[i];for(n=c-1;n>=0;--n){for(o=u[n],i=n+1;i<c;++i)l[n]-=l[i]*o[i];l[n]/=o[n]}return l},e.solve=function(t,r,n){return e.LUsolve(e.LU(t,n),r)},e}),define("core/math/qr",["require","exports"],function(e,t){"use strict";function r(e,t){for(var r=e.length,n=t.length,i=0,a=0,o=n-r;o<n;o++)i+=e[o+r-n]*t[o],a+=e[o+r-n]*e[o+r-n];for(var s=i/a,o=n-r;o<n;o++)t[o]=2*s*e[o+r-n]-t[o]}function n(e,t,r){for(var n=e.length,i=t.length,a=0,o=0,s=i-n;s<i;s++)a+=e[s+n-i]*t[s][r],o+=e[s+n-i]*e[s+n-i];for(var u=a/o,s=i-n;s<i;s++)t[s][r]=2*u*e[s+n-i]-t[s][r]}function i(e,t,r,n){var i=Array(e.length-t);if(1===i.length)return i[0]=1,i;if(0===n){i[0]=1;for(var a=1;a<i.length;a++)i[a]=0;return i}var o=e[t][r]<0?-1:1;i[0]=e[t][r]+o*Math.sqrt(n);for(var s=t+1;s<e.length;s++)i[s-t]=e[s][r];return i}function a(e,t,r){for(var n=0;t<e.length;t++)n+=e[t][r]*e[t][r];return n}function o(e,t){if(!t||!t.mutateInput){var r=e;e=Array(e.length);for(var o=0;o<r.length;o++)e[o]=r[o].slice()}for(var s=Math.min(e.length,e[0].length),u=Array(s),c=[],l=0;l<s;l++){for(var p=-1/0,f=l,h=l;h<e[l].length;h++){var d=a(e,l,h);d>p&&(p=d,f=h)}if(u[l]=f,f!==l)for(var o=0;o<e.length;o++){var m=e[o][f];e[o][f]=e[o][l],e[o][l]=m}for(var y=i(e,l,l,p),h=l;h<e[l].length;h++)n(y,e,h);c.push(y)}return{reflectors:c,r:e,p:u}}function s(e,t,n){for(var i=e.reflectors,a=e.r,o=e.p,s=t.slice(),u=0;u<i.length;u++)r(i[u],s);for(var u=i.length;u<a[0].length;u++)s[u]=0;s.length=a[0].length;for(var c=Math.pow(2,-52),l=n.regularize?c*Math.abs(a[0][0])*Math.max(a.length,a[0].length):0,u=i.length-1;u>=0;u--){var p=a[u];if(Math.abs(p[u])<=l)s[u]=0;else{for(var f=u+1;f<i.length;f++)s[u]-=s[f]*p[f];s[u]/=p[u]}}for(var u=o.length-1;u>=0;u--)if(o[u]!==u){var h=s[u];s[u]=s[o[u]],s[o[u]]=h}return s}function u(e,t,r){for(var n=Array(e.r[0].length),i=0;i<n.length;i++)n[i]=Array(t[0].length);for(var a=Array(t.length),o=0;o<t[0].length;o++){for(var i=0;i<t.length;i++)a[i]=t[i][o];for(var u=s(e,a,r),i=0;i<u.length;i++)n[i][o]=u[i]}return n}function c(e,t,r){return Array.isArray(t[0])?u(e,t,r):s(e,t,r)}function l(e){var t=e.r,r=Math.min(t.length,t[0].length),n=t[0][0],i=t[r-1][r-1];return 0===n?1/0:Math.abs(n/i)}function p(e){var t=Math.pow(2,-52);return Math.max(e.r.length,e.r[0].length)*t*l(e)<1}Object.defineProperty(t,"__esModule",{value:!0}),t.qr=o,t.qrSolve=c,t.conditionNumber=l,t.isNumericallyFullRank=p}),define("core/math/least-squares",["require","exports","numeric","core/math/distance","./qr"],function(e,t,r,n,i){"use strict";function a(e,t){for(var r=[],n=0;n<t;n++)r.push(e);return r}function o(e,t){for(var r=s(e,t),n=0,i=0,a=r;i<a.length;i++){var o=a[i],u=o;n+=u*u}return n/r.length}function s(e,t){return e.apply(void 0,t)}function u(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var a=i[n],o=a.apply(void 0,t);r.push(o)}return r}function c(e,t){for(var r=[],n=0;n<e.length;n++)t[n]&&r.push(e[n]);return r}function l(e,t,r){for(var n=[],i=0,a=0;i<e.length;i++){var o=0;r[i]&&(o=t[a],a+=1),n.push(e[i]+o)}return n}function p(e,t){for(var n=a(0,t.length),c=u(t,n),l=i.qr(r.transpose(c),{mutateInput:!0}),p=0;p<2;p++){var f=s(e,n),h=r.neg(i.qrSolve(l,f,{regularize:!1}));n=r.add(n,h)}var d=o(e,n);if(i.isNumericallyFullRank(l))return{solution:n,MSE:d};for(var m=a(0,t.length),p=0;p<2;p++){var f=s(e,m),h=r.neg(i.qrSolve(l,f,{regularize:!0}));m=r.add(m,h)}var y=o(e,m);return.999*y<=d?{solution:m,MSE:y}:{solution:n,MSE:d}}function f(e,t,n,p){var f,h=p.maxIterations,d=p.linearSubset||a(!1,n.length),m=r.not(d),y=c(t,d),g=c(t,m),v=n,b=0,x=.001;if(r.any(d)){var _=r.transpose(u(y,v)),S=i.qr(_);f={Jv:_,F:S};var M=s(e,v),E=r.neg(i.qrSolve(S,M,{regularize:!0}));v=l(v,E,d)}for(var D=!1,w=o(e,v);b<h&&!D&&isFinite(w);){var M=s(e,v),T=u(g,v),P=r.transpose(T),I=void 0,C=void 0;if(f){var S=f.F,_=f.Jv;I=r.dot(T,r.sub(M,r.dot(_,i.qrSolve(S,M,{regularize:!0})))),C=r.dot(T,r.sub(P,r.dot(_,i.qrSolve(S,P,{regularize:!0}))))}else I=r.dot(T,M),C=r.dot(T,P);for(var O=v,A=!1;b<h&&!D&&!A;){b+=1;var L=r.add(C,r.diag(a(x,g.length)));O=l(v,r.neg(r.solve(L,I,!0)),m),D=r.all(r.eq(O,v));var N=void 0;if(f){var _=r.transpose(u(y,O)),S=i.qr(_);N={Jv:_,F:S};var q=s(e,O),E=r.neg(i.qrSolve(S,q,{regularize:!0}));O=l(O,E,d)}var F=o(e,O);A=F<w,A?(v=O,w=F,f=N,x*=.1):(x=Math.max(x,1e-64),x*=2)}}return{solution:v,MSE:w}}function h(e,t,r,n){if(!t)return e;if("known"!==t.type)return e;var i=t.bounds;return i[0]===-1/0&&i[1]===1/0?e:i[0]===-1/0?i[1]-Math.exp(-e):i[1]===1/0?i[0]+Math.exp(e):r/(n-1)*i[1]+(n-1-r)/(n-1)*i[0]}function d(e,t){for(var r=[],n=0;n<e.length;n++){for(var i=e[n],a=[],o=0;o<i.length;o++){var s=x[o%x.length]*n%e.length;a.push(h(i[o],t[o],s,e.length))}r.push(a)}return r}function m(e,t,r){r||(r={});var i=r.linearSubset,a=r.bounds,o=r.preferredInitialGuess,s=v(t.length);a&&(s=d(s,a));var u=b(e,t,s,5,{maxIterations:3,linearSubset:i}),c=b(e,t,u,1,{maxIterations:60,linearSubset:i}),l=f(e,t,c[0],{maxIterations:250,linearSubset:i});if(!o)return l;var p=f(e,t,o,{maxIterations:100,linearSubset:i});return isFinite(p.MSE)?p.MSE<l.MSE?p:n.approx(p.MSE,l.MSE,8)?p:l:l}Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateMeanSquare=o,t.optimizeLinear=p;var y=[18.9,.105,.0113,.089,4.414,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777,-500],g=function(e){return y[503*e%y.length]},v=function(e){for(var t=[],r=0;r<y.length;r++){for(var n=[],i=0;i<e;i++)n[i]=0===r&&1!==e?0:1===r&&1!==e?1:g(r*e+i);t.push(n)}return t},b=function(e,t,r,n,i){for(var a=[],o=0,s=r;o<s.length;o++){var u=s[o];a.push({soln:f(e,t,u,i),initialGuess:u})}a.sort(function(e,t){return isNaN(e.soln.MSE)?1:isNaN(t.soln.MSE)?-1:e.soln.MSE-t.soln.MSE});for(var c=[],l=0;l<n;l++)c.push(a[l].initialGuess);return c},x=[3,5,7,11,13,17,19];t.optimizeNonLinear=m,t.testOnlyExports={generateInitialGuesses:v,mapInitialGuesses:d}}),define("core/math/parsenode/regression",["require","pjs","./base","core/math/distance","core/math/builtin","core/lib/label","core/math/errormsg","./error","./optimizedregression","./list","./functioncall","./identifier","./constant","./freevariable","./expressionTypes","core/math/types","core/math/least-squares"],function(e){"use strict";var t=e("pjs"),r=e("./base"),n=e("core/math/distance"),i=e("core/math/builtin"),a=e("core/lib/label"),o=e("core/math/errormsg"),s=e("./error"),u=e("./optimizedregression"),c=e("./list"),l=e("./functioncall"),p=e("./identifier"),f=e("./constant"),h=e("./freevariable"),d=e("./expressionTypes"),m=e("core/math/types"),y=e("core/math/least-squares"),g=y.optimizeLinear,v=y.optimizeNonLinear,b=y.evaluateMeanSquare,x=d.Subtract;return t(r,function(e,t,r){function d(e,t){for(var r=[],n=0;n<e.length;n++)r.push(t.boundDomain(e[n]));return r}function y(e,t,r){var n=[];t||(t={}),r||(r={});for(var i=0;i<e.length;i++){var o=e[i],s=a.identifierToLatex(o);r[o]&&isFinite(r[o].asValue())?n.push(+r[o].asValue()):t.hasOwnProperty(s)&&isFinite(t[s])?n.push(+t[s]):n.push(1)}return n}function _(e,t,r,n){var i,a,s=t.getDependencies();for(a=0;a<s.length;a++)if(!e.validRegressionParameter(s[a]))throw o.invalidRegressionParameter(s[a]);var u=t.getCompiledFunction(s).fn;if(s.length){var c=t.findLinearSubset(s),l=c.every(function(e){return e}),p=[];for(a=0;a<s.length;a++)p.push(t.takeDerivative(s[a]).getCompiledFunction(s).fn);i=l?g(u,p):v(u,p,{linearSubset:c,bounds:d(s,t),preferredInitialGuess:y(s,r,n)})}else i={solution:[],MSE:b(u,[])};var h={};for(a=0;a<s.length;a++)h[s[a]]=f(i.solution[a]);return h}function S(e,t){return g(function(r,n){for(var i=[],a=0;a<e.length;a++)i.push(t[a]-(r*e[a]+n));return i},[function(){return e.map(function(e){return-e})},function(){return e.map(function(){return-1})}],[0,0])}function M(e,t){var r=e.length,i=e[0],a=t[0],o=e[r-1],s=t[r-1];if(!(isFinite(i)&&isFinite(o)&&isFinite(a)&&isFinite(s)))return!1;if(s-a==0)return!1;var u=o-i;if(0===u)return!1;for(var c=1;c<r-1;c++){var l=e[c],p=t[c],f=(s*(l-i)+a*(o-l))/u;if(!n.approx(p,f,5))return!1}return!0}function E(e,t,r,n){var i=Object.create(r);for(var a in n)n.hasOwnProperty(a)&&(i[a]=n[a]);return c.wrap(t.getConcreteTree(e,i))}e.init=function(e,r){t.init.call(this),this._lhs=e,this.isLhsSimple=e instanceof p||e instanceof c,this._logLhs=l("ln",[e]),this._rhs=r,this._difference=x([e,r]),this._logDifference=x([l("ln",[e]),l("ln",[r])]),this.mergeDependencies(e,r)},e.isRegression=!0,e.chooseResidualVariable=function(e){if(this.userData&&this.userData.residualVariable){var t=a.latexToIdentifier(this.userData.residualVariable);if(!e[t])return t}for(var r,n=this.getDependencies(),i=0;i<n.length;i++){var o=n[i].match(/_(.*)/);if(o&&(r="e_"+o[1],!e[r]))return r}for(var s=1;;){if(r="e_"+s,!e[r])return r;s++}},e.getRHSModel=function(e,t,r){function n(e,t,r){for(var n=0;n<i.length;n++)if(i[n].node===this)return i[n].tmpVar;var o=h(this.tmpVar()),s=this.getConcreteTree(e,t);return s.getDependencies().length&&(a=!1),i.push({node:this,tmpVar:o,symbol:o._symbol,concrete:s}),o}var i=[],a=!0,o={List:n,TableColumn:n,Range:n},s=this._rhs.tryGetConcreteTree(e,t,o);return{node:s,substituted:s.isError?s:s.substitute(r),replacedNodes:i,isValid:a}},e.computeStatistics=function(e,t,r,a,s,u){if(a.getDependencies().length)throw o.optimizationError();var l=0;a.eachElement(e,function(e){var t=e.asValue();l+=t*t});var p=l/a.length;if(!isFinite(p))throw o.optimizationError();if(t.getDependencies().length>0)return{RMSE:Math.sqrt(p)};var f=m.isList(t.valueType)?i.varp(t.asValue()):0;if(t.getDependencies().length||!isFinite(f)||f<=0||!this.isLhsSimple)return{RMSE:Math.sqrt(p)};var h=1-p/f;if(r.isValid&&1===r.replacedNodes.length){var d=[],y=[],g=s&&(u===D.LINLOG||u===D.LOGLOG);c.eachArgs(e,[r.replacedNodes[0].concrete,t],function(e){d.push(g?Math.log(e[0].asValue()):+e[0].asValue()),y.push(+e[1].asValue())});var v=i.corr(d,y);if(n.approx(S(d,y).MSE,p,8))return{r:v,rsquared:v*v}}return{Rsquared:h}},e.getResidualSuggestionId=function(e,t){var r,n=this._rhs.getDependencies();for(var i in t)if(t.hasOwnProperty(i)&&t[i].concreteTree.isTable&&t[i].concreteTree.columns[0]){var a=t[i].rawTree.columns;if(a&&a.length){var o=a[0].getExports();if(1===o.length&&-1!==n.indexOf(o[0])){for(var s=1;s<a.length;s++)if(-1!==a[s].getDependencies().indexOf(e))return;r=r||i}}}return r||void 0};var D={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};e.linearizingTransformation=function(e,t,r){if(!this.isLhsSimple)return D.NONE;var n=r.substituted;if(n.isError)return D.NONE;if(n.valueType!==m.Number)return D.NONE;var i=n.getDependencies();if(1!==i.length)return D.NONE;if(isFinite(r.node.polynomialOrder(i[0])))return D.NONE;var a=n.getCompiledFunction(i).fn,o=r.replacedNodes[0].concrete;if(n.valueType!==m.Number)return D.NONE;var s=o.mapElements(e,function(e){return+e.asValue()});if(s.length<3)return D.NONE;s.sort(function(e,t){return e-t});var u=s.map(a),l=u.map(Math.log),p=s.map(Math.log),f=!0;return c.wrap(t).eachElement(e,function(e){isFinite(Math.log(+e.asValue()))||(f=!1)}),M(s,l)&&f?D.LOGLIN:M(p,l)&&f?D.LOGLOG:M(p,u)?D.LINLOG:D.NONE},e.optimize=function(e,t,r,n,i){var o=this._lhs.getConcreteTree(e,t),s=this._rhs.getConcreteTree(e,t);this.typeCheck(e,[o,s]);var l=c.wrap(this._difference.getConcreteTree(e,t));l=l.deriveRegressionRestrictions();var p,f=_(e,l,this.userData.regressionParameters,n),h=this.getRHSModel(e,t,f),d=E(e,this._difference,t,f),m=this.linearizingTransformation(e,o,h);if(!this.userData.isLogModeRegression||m!==D.LOGLIN&&m!==D.LOGLOG)p=this.computeStatistics(e,o,h,d,this.userData.isLogModeRegression,m);else{var y=this._logDifference.getConcreteTree(e,t),g=this._logLhs.getConcreteTree(e,t);f=_(e,y,this.userData.regressionParamters,n),h=this.getRHSModel(e,t,f),d=E(e,this._difference,t,f);var v=E(e,this._logDifference,t,f);p=this.computeStatistics(e,g,h,v,this.userData.isLogModeRegression,m)}var b=this.chooseResidualVariable(r),x=this.getResidualSuggestionId(b,i);return this.userData.residualVariable=a.identifierToLatex(b),u(f,d,p,h.substituted,{isModelValid:h.isValid,residualVariable:b,residualSuggestionId:x,shouldSuggestLogMode:m!==D.NONE})},e.tryOptimize=function(){try{return this.optimize.apply(this,arguments)}catch(e){return e instanceof s?e:o.parseError()}},e.exportTo=function(e,t,r){if(!t.isError){for(var n in t.parameters)t.parameters.hasOwnProperty(n)&&(e.assignmentForbidden(n)||(r[n]=r[n]?o.multiplyDefined(n):t.parameters[n]));e.assignmentForbidden(t.residualVariable)||(r[t.residualVariable]=t.residuals)}},e.getSliderVariables=function(){return[]}})}),define("core/math/parsenode/image",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t,r,n){e.isImage=!0,e.init=function(e,r){t.init.call(this),this.center=e.center,this.radianAngle=e.radianAngle,this.width=e.width,this.height=e.height,this.opacity=e.opacity,this.moveStrategy=r,this.mergeDependencies(this.center,this.radianAngle,this.width,this.height,this.opacity)}})}),define("core/math/parsenode/slider",["require","pjs","./assignment","./identifier"],function(e){"use strict";var t=e("pjs"),r=e("./assignment"),n=e("./identifier");return t(r,function(e,t,i,a){e.isSlider=!0,e.init=function(e,r){t.init.call(this,n(e._symbol),e._expression),this.setInputSpan(e._inputSpan),this.sliderAssignment=e,this.sliderMin=r.sliderMin,this.sliderMax=r.sliderMax,this.sliderStep=r.sliderStep,this.sliderMin&&this.mergeDependencies(this.sliderMin),this.sliderMax&&this.mergeDependencies(this.sliderMax),this.sliderStep&&this.mergeDependencies(this.sliderStep)},e.shouldPromoteToSlider=function(e){return!1},e.asAssignment=function(){return r(this._symbol,this._expression)}})}),define("core/math/parsenode/table",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t){e.init=function(e){t.init.call(this),this.columns=e,this._exports=[],this.mergeDependencies.apply(this,e);for(var r=0;r<e.length;r++)Array.prototype.push.apply(this._exports,e[r].getExports())},e.exportPenalty=1,e.isTable=!0,e.exportTo=function(e,t,r){for(var n=0;n<this.columns.length;n++){var i=this.columns[n].getExports();if(i.length){var a=i[0];e.assignmentForbidden(a)||r[a]||(t.isError?r[a]=t:this.columns[n].exportTo(e,t.columns[n],r))}}},e.getAllIds=function(){return this.columns.map(function(e){return e.header.userData.id})}})}),define("core/math/parsenode/tablecolumn",["require","pjs","./base","./list","./constant","./identifier"],function(e){"use strict";var t=e("pjs"),r=e("./base"),n=e("./list"),i=e("./constant"),a=e("./identifier");return t(r,function(e,t){function o(e){return e.isError?i(NaN):e}e.init=function(e,r,n){t.init.call(this),this.header=e,this.length=r,this.values=n,this.isIndependent=!1,this.registerDependencies(),this._exports=this.computeExports()},e.registerDependencies=function(){this.mergeDependencies(this.header),this.mergeDependencies.apply(this,this.values)},e.computeExports=function(){return this.header instanceof a?[this.header._symbol]:[]},e.isDiscrete=function(e){return 1!==this.header.getDependencies().length||1!==e.header.getDependencies().length||this.header.getDependencies()[0]!==e.header.getDependencies()[0]},e._exportSymbolsTo=function(e,t,i){if(e.length){var a=e[0];if(t.isError)i[a]=t;else try{i[a]=n(t.values.map(o))}catch(e){if(!(e instanceof r))throw e;i[a]=e}}},e.exportTo=function(e,t,r){var n=this.getLegalExports(e);this._exportSymbolsTo(n,t,r)},e.exportToLocal=function(e,t){this._exportSymbolsTo(this.getExports(),e,t)}})}),define("core/math/parsenode/solvedequation",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t){e.init=function(e,r){t.init.call(this),this._symbol=e,this._expression=r,this.mergeDependencies(r)},e.getCompiledFunction=function(){return this._expression.getCompiledFunction.apply(this._expression,arguments)},e.getCompiledDerivative=function(){return this._expression.getCompiledDerivative.apply(this._expression,arguments)},e.evaluate=function(){return this._expression.evaluate.apply(this._expression,arguments)}})}),define("core/math/parsenode/seed",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){"string"!=typeof e&&(e=""+e),this._stringValue=e,t.init.call(this,[])},e.isString=!0,e.getEvalStrings=function(){return{statements:[],expression:"'"+this.asValue()+"'"}},e.asValue=function(){return this._stringValue}})}),define("core/math/parsenode/extendseed",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e,r){t.init.call(this,r),this.seed=r[0],this.userSeed=r[1],this.tag=e},e.getEvalStrings=function(){var e=this.seed.getEvalStrings(),t=this.userSeed.getEvalStrings(),r=[];return Array.prototype.push.apply(r,e.statements),Array.prototype.push.apply(r,t.statements),{statements:r,expression:"("+e.expression+") + '::"+this.tag+"' + ("+t.expression+")"}},e.copyWithArgs=function(e){return new this.constructor(this.tag,e)}})}),define("parsenodes",["require","core/math/parsenode/expressionTypes","core/math/parsenode/base","core/math/parsenode/expression","core/math/parsenode/scalarexpression","core/math/parsenode/error","core/math/parsenode/constant","core/math/parsenode/mixednumber","core/math/parsenode/identifier","core/math/parsenode/ans","core/math/parsenode/freevariable","core/math/parsenode/dummyindex","core/math/parsenode/list","core/math/parsenode/range","core/math/parsenode/broadcast","core/math/parsenode/listaccess","core/math/parsenode/dotaccess","core/math/parsenode/dotaccessexponent","core/math/parsenode/orderedpair","core/math/parsenode/movablepoint","core/math/parsenode/orderedpairaccess","core/math/parsenode/polygon","core/math/parsenode/basecomparator","core/math/parsenode/comparator","core/math/parsenode/doubleinequality","core/math/parsenode/repeatedoperator","core/math/parsenode/sum","core/math/parsenode/product","core/math/parsenode/integral","core/math/parsenode/functioncall","core/math/parsenode/seededfunctioncall","core/math/parsenode/functionexponent","core/math/parsenode/functionfactorial","core/math/parsenode/prime","core/math/parsenode/piecewise","core/math/parsenode/derivative","core/math/parsenode/builtinfunction","core/math/parsenode/nativefunction","core/math/parsenode/typedfunction","core/math/parsenode/reducerfunction","core/math/parsenode/parametrizedreducerfunction","core/math/parsenode/doublereducerfunction","core/math/parsenode/toplevelfunction","core/math/parsenode/distribution","core/math/parsenode/histogram","core/math/parsenode/object3d","core/math/parsenode/dotplot","core/math/parsenode/boxplot","core/math/parsenode/ttest","core/math/parsenode/independent-ttest","core/math/parsenode/stats","core/math/parsenode/assignment","core/math/parsenode/functiondefinition","core/math/parsenode/equation","core/math/parsenode/regression","core/math/parsenode/image","core/math/parsenode/slider","core/math/parsenode/table","core/math/parsenode/tablecolumn","core/math/parsenode/solvedequation","core/math/parsenode/optimizedregression","core/math/parsenode/seed","core/math/parsenode/extendseed"],function(e){"use strict";var t=e("core/math/parsenode/expressionTypes"),r={Base:e("core/math/parsenode/base"),Expression:e("core/math/parsenode/expression"),ScalarExpression:e("core/math/parsenode/scalarexpression"),Error:e("core/math/parsenode/error"),Constant:e("core/math/parsenode/constant"),MixedNumber:e("core/math/parsenode/mixednumber"),Identifier:e("core/math/parsenode/identifier"),Ans:e("core/math/parsenode/ans"),FreeVariable:e("core/math/parsenode/freevariable"),DummyIndex:e("core/math/parsenode/dummyindex"),List:e("core/math/parsenode/list"),Range:e("core/math/parsenode/range"),Broadcast:e("core/math/parsenode/broadcast"),ListAccess:e("core/math/parsenode/listaccess"),DotAccess:e("core/math/parsenode/dotaccess"),DotAccessExponent:e("core/math/parsenode/dotaccessexponent"),OrderedPair:e("core/math/parsenode/orderedpair"),MovablePoint:e("core/math/parsenode/movablepoint"),OrderedPairAccess:e("core/math/parsenode/orderedpairaccess"),Polygon:e("core/math/parsenode/polygon"),BaseComparator:e("core/math/parsenode/basecomparator"),Comparator:e("core/math/parsenode/comparator"),DoubleInequality:e("core/math/parsenode/doubleinequality"),RepeatedOperator:e("core/math/parsenode/repeatedoperator"),Sum:e("core/math/parsenode/sum"),Product:e("core/math/parsenode/product"),Integral:e("core/math/parsenode/integral"),FunctionCall:e("core/math/parsenode/functioncall"),SeededFunctionCall:e("core/math/parsenode/seededfunctioncall"),FunctionExponent:e("core/math/parsenode/functionexponent"),FunctionFactorial:e("core/math/parsenode/functionfactorial"),Prime:e("core/math/parsenode/prime"),Piecewise:e("core/math/parsenode/piecewise"),Derivative:e("core/math/parsenode/derivative"),BuiltInFunction:e("core/math/parsenode/builtinfunction"),NativeFunction:e("core/math/parsenode/nativefunction"),TypedFunction:e("core/math/parsenode/typedfunction"),ReducerFunction:e("core/math/parsenode/reducerfunction"),ParametrizedReducerFunction:e("core/math/parsenode/parametrizedreducerfunction"),DoubleReducerFunction:e("core/math/parsenode/doublereducerfunction"),TopLevelFunction:e("core/math/parsenode/toplevelfunction"),Distribution:e("core/math/parsenode/distribution"),Histogram:e("core/math/parsenode/histogram"),Object3D:e("core/math/parsenode/object3d"),DotPlot:e("core/math/parsenode/dotplot"),BoxPlot:e("core/math/parsenode/boxplot"),TTest:e("core/math/parsenode/ttest"),IndependentTTest:e("core/math/parsenode/independent-ttest"),Stats:e("core/math/parsenode/stats"),Assignment:e("core/math/parsenode/assignment"),FunctionDefinition:e("core/math/parsenode/functiondefinition"),Equation:e("core/math/parsenode/equation"),Regression:e("core/math/parsenode/regression"),Image:e("core/math/parsenode/image"),Slider:e("core/math/parsenode/slider"),Table:e("core/math/parsenode/table"),TableColumn:e("core/math/parsenode/tablecolumn"),SolvedEquation:e("core/math/parsenode/solvedequation"),OptimizedRegression:e("core/math/parsenode/optimizedregression"),Seed:e("core/math/parsenode/seed"),ExtendSeed:e("core/math/parsenode/extendseed")};for(var n in t)r[n]=t[n];for(var i in r)r.hasOwnProperty(i)&&"Comparator"!==i&&"BuiltInFunction"!==i&&(r[i].prototype.type=i);for(var a in r.Comparator)r.Comparator.hasOwnProperty(a)&&(r.Comparator[a].prototype.type="Comparator['"+a+"']");for(var o in r.BuiltInFunction)r.BuiltInFunction.hasOwnProperty(o)&&(r.BuiltInFunction[o].prototype.type="BuiltInFunction['"+o+"']");return r}),define("core/math/parser/char-codes",["require","exports"],function(e,t){"use strict";function r(e){return 48<=e&&e<=57}function n(e){return 97<=e&&e<=122}function i(e){return 65<=e&&e<=90}function a(e){return n(e)||i(e)}function o(e){return 92===e}function s(e){return 46===e}function u(e){return 39===e}function c(e){if(9<=e&&e<=13)return!0;if(8192<=e&&e<=8202)return!0;switch(e){case 32:case 160:case 5760:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.isDigit=r,t.isLowerCaseLetter=n,t.isUpperCaseLetter=i,t.isLetter=a,t.isBackslash=o,t.isDot=s,t.isSingleQuote=u,t.isWhitespace=c}),define("core/math/parser/latex-lexer",["require","exports","./char-codes","./input-span"],function(e,t,r,n){"use strict";function i(e,t){return n.joinSpans(e.token.span,t.prevSpan)}function a(e,t,r){return{type:e,span:t,val:r}}function o(e,t,r,n){return{input:e,prevSpan:t,pos:r,token:n}}function s(e){return u(e,0,n.emptySpanAt(e,0))}function u(e,t,n){for(;r.isWhitespace(e.charCodeAt(t));)t+=1;return o(e,n,t,d(e,t))}function c(e){return u(e.input,e.token.span.end,e.token.span)}function l(e){return e.token}function p(e,t){if(l(e).type!==t)throw"Parse Error: expected "+t+".";return c(e)}function f(e,t){return l(e).type===t}function h(e){return e.pos>=e.input.length}function d(e,t){var i=t;if(t>=e.length)return a("End",n.emptySpanAt(e,t),"");var o=e.charCodeAt(t);if(r.isDigit(o)){var s=n.Span(e,i,t+1);return a("Digit",s,e.charAt(i))}if(r.isLetter(o)){var s=n.Span(e,i,t+1);return a("Letter",s,e.charAt(i))}if(r.isBackslash(o)){if(t+=1,r.isLetter(e.charCodeAt(t))){for(;r.isLetter(e.charCodeAt(t));)t+=1;var s=n.Span(e,i,t),u=n.slice(s),c=m[u]||"Cmd";return a(c,s,u)}t+=1;var s=n.Span(e,i,t),u=n.slice(s);return a("EscapedSymbol",s,u)}if(r.isSingleQuote(o)){
for(t+=1;r.isSingleQuote(e.charCodeAt(t));)t+=1;if("^"===e.charAt(t)){t+=1;var s=n.Span(e,i,t),u=n.slice(s);return a("Primes^",s,u)}var s=n.Span(e,i,t),u=n.slice(s);return a("Primes",s,u)}var s=n.Span(e,i,t+1),u=e.charAt(i),c=y[u]||"Symbol";return a(c,s,u)}Object.defineProperty(t,"__esModule",{value:!0}),t.spanStates=i,t.LatexToken=a,t.lex=s,t.advance=c,t.peek=l,t.eat=p,t.isAt=f,t.isDone=h;var m={"\\\\left":"Left","\\\\right":"Right","\\\\sqrt":"Sqrt","\\\\frac":"Frac","\\\\operatorname":"OperatorName"},y={"[":"[","]":"]","{":"{","}":"}","^":"^",_:"_"}}),define("core/math/parser/latex-node",["require","exports"],function(e,t){"use strict";function r(e,t){return{type:"Group",span:e,args:t}}function n(e,t,r){return{type:"Sqrt",span:e,optArg:t,arg:r}}function i(e,t,r){return{type:"Frac",span:e,num:t,den:r}}function a(e,t,r,n){return{type:"SupSub",span:e,sup:t,sub:r,nprimes:n}}function o(e,t,r,n){return{type:"LeftRight",span:e,left:t,right:r,arg:n}}function s(e,t){return{type:"OperatorName",span:e,arg:t}}function u(e,t){return{type:"Symbol",span:e,val:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.Group=r,t.Sqrt=n,t.Frac=i,t.SupSub=a,t.LeftRight=o,t.OperatorName=s,t.Symbol=u}),define("core/math/parser/latex-parser",["require","exports","./latex-lexer","./input-span","./latex-node"],function(e,t,r,n,i){"use strict";function a(e){switch(e){case"Frac":return 2;case"^":case"_":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":return 1;default:return 0}}function o(e){var t=u(r.lex(e),!1),i=t.state,a=t.tree;if(!r.isDone(i))throw"Parse error: unexpected "+n.slice(r.peek(i).span)+".";return a}function s(e,t){return{state:e,tree:t}}function u(e,t){var n,a=e,o=[];e:for(;!r.isDone(e);){var u=r.peek(e);switch(u.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":case"[":case"{":case"^":case"_":case"Primes":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":case"]":if("]"===u.type&&t)break e;var l=void 0;if(n=c(e),e=n.state,l=n.tree,"Group"===l.type)for(var p=0,f=l.args;p<f.length;p++){var h=f[p];o.push(h)}else o.push(l);break;case"}":case"Right":case"End":break e;default:var d=u.type;throw"Unexpected token type "+d+"."}}var m=r.spanStates(a,e);return s(e,i.Group(m,o))}function c(e){var t,n=r.peek(e);switch(n.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":return e=r.advance(e),s(e,n);case"[":case"]":return e=r.advance(e),s(e,i.Symbol(n.span,n.val));case"{":e=r.advance(e);var a=void 0;return t=u(e,!1),e=t.state,a=t.tree,e=r.eat(e,"}"),s(e,a);case"^":case"_":case"Primes":case"Primes^":return d(e);case"Left":return h(e);case"Frac":return f(e);case"Sqrt":return p(e);case"OperatorName":return l(e);case"}":case"Right":throw"Parse Error: unexpected "+n.val+".";case"End":throw"Parse Error: unexpected end.";default:throw"Unexpected token type "+n.type+"."}}function l(e){var t,n=e,a=r.peek(e);e=r.eat(e,"OperatorName");var o;t=m(e,a),e=t.state,o=t.tree;var u=r.spanStates(n,e);return s(e,i.OperatorName(u,o))}function p(e){var t,n,a=e,o=r.peek(e);e=r.eat(e,"Sqrt");var u;r.isAt(e,"[")&&(t=y(e),e=t.state,u=t.tree);var c;n=m(e,o),e=n.state,c=n.tree;var l=r.spanStates(a,e);return s(e,i.Sqrt(l,u,c))}function f(e){var t,n,a=e,o=r.peek(e);e=r.eat(e,"Frac");var u;t=m(e,o),e=t.state,u=t.tree;var c;n=m(e,o),e=n.state,c=n.tree;var l=r.spanStates(a,e);return s(e,i.Frac(l,u,c))}function h(e){var t,n=e;e=r.eat(e,"Left");var a=r.peek(e);e=r.advance(e);var o;t=u(e,!1),e=t.state,o=t.tree,e=r.eat(e,"Right");var c=r.peek(e);e=r.advance(e);var l=r.spanStates(n,e);return s(e,i.LeftRight(l,a,c,o))}function d(e){var t,n,a,o,u,c=e,l=0;e:for(;!r.isDone(e);){var p=r.peek(e);switch(p.type){case"^":if(e=r.advance(e),o)throw"Parse Error: double superscript.";t=m(e,p),e=t.state,o=t.tree;break;case"_":if(e=r.advance(e),u)throw"Parse Error: double subscript.";n=m(e,p),e=n.state,u=n.tree;break;case"Primes":if(e=r.advance(e),l>0)throw"Parse Error: double primes.";l=p.val.length;break;case"Primes^":if(e=r.advance(e),l>0)throw"Parse Error: double primes.";if(o)throw"Parse Error: double superscript";l=p.val.length-1,a=m(e,p),e=a.state,o=a.tree;break;default:break e}}var f=r.spanStates(c,e);return s(e,i.SupSub(f,o,u,l))}function m(e,t){var o,u,l=a(t.type);if(l<=0)throw new Error("Programming Error: greediness must be greater than 0.");var p=a(r.peek(e).type);if(p>0&&p<=l){var f=n.slice(t.span);throw"Parse Error: can't use "+n.slice(r.peek(e).span)+" as argument of "+f+". Use {}."}return o=c(e),e=o.state,u=o.tree,"Group"!==u.type&&(u=i.Group(u.span,[u])),s(e,u)}function y(e){var t;e=r.eat(e,"[");var n;return t=u(e,!0),e=t.state,n=t.tree,e=r.eat(e,"]"),s(e,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=o}),define("core/math/parser/command-aliases",["require","exports","./char-codes"],function(e,t,r){"use strict";function n(e){for(var t=0;r.isBackslash(e.charCodeAt(t));)t+=1;return t>0&&(e=e.slice(t)),i[e]||e}Object.defineProperty(t,"__esModule",{value:!0});var i={mcd:"gcd",gcf:"gcd",mcm:"lcm",signum:"sign",stdDevP:"stdevp",stddevp:"stdevp",stdDev:"stdev",stddev:"stdev",variance:"var",TTest:"ttest",TScore:"tscore",IndependentTTest:"ittest",iTTest:"ittest",inverseCdf:"quantile",inversecdf:"quantile"};t.translateCmd=n}),define("core/math/parser/surface-node",["require","exports","./command-aliases"],function(e,t,r){"use strict";function n(e,t){return{type:"Equals",span:e,args:t}}function i(e,t,r){return{type:"Inequality",span:e,symbol:t,args:r}}function a(e,t,r){return{type:"TrailingInequalityPiece",span:e,symbol:t,args:r}}function o(e,t,r){return{type:"InequalityChain",span:e,first:t,chain:r}}function s(e,t){return{type:"Tilde",span:e,args:t}}function u(e,t){return{type:"Pos",span:e,args:t}}function c(e,t){return{type:"Neg",span:e,args:t}}function l(e,t){return{type:"Add",span:e,args:t}}function p(e,t){return{type:"Sub",span:e,args:t}}function f(e,t){return{type:"Mul",span:e,args:t}}function h(e,t){return{type:"Div",span:e,args:t}}function d(e,t){return{type:"Bang",span:e,args:t}}function m(e,t){return{type:"Call",span:e,args:t}}function y(e,t){return{type:"ImplicitCall",span:e,args:t}}function g(e,t){return{type:"Index",span:e,args:t}}function v(e,t){return{type:"Paren",span:e,args:t}}function b(e,t){return{type:"List",span:e,args:t}}function x(e,t){return{type:"Pipes",span:e,args:t}}function _(e,t){return{type:"Subscript",span:e,args:t}}function S(e,t){return{type:"Superscript",span:e,args:t}}function M(e,t,r){return{type:"Prime",span:e,nprimes:t,args:r}}function E(e,t){return{type:"Seq",span:e,args:t}}function D(e,t){return{type:"Sqrt",span:e,args:t}}function w(e,t){return{type:"Nthroot",span:e,args:t}}function T(e,t){return{type:"Frac",span:e,args:t}}function P(e,t){return{type:"Derivative",span:e,args:t}}function I(e,t){return{type:"Integral",span:e,args:t}}function C(e,t){return{type:"EmptyIntegral",span:e,args:t}}function O(e,t){return{type:"Sum",span:e,args:t}}function A(e,t){return{type:"Product",span:e,args:t}}function L(e,t){return{type:"Piecewise",span:e,args:t}}function N(e){return{type:"EmptyPiecewise",span:e}}function q(e,t){return{type:"Colon",span:e,args:t}}function F(e,t){return{type:"Ellipsis",span:e,args:t}}function R(e,t){return{type:"Dot",span:e,args:t}}function V(e,t){return{type:"PercentOf",span:e,args:t}}function k(e,t){return{type:"Juxt",span:e,args:t}}function B(e,t){return{type:"Letter",span:e,val:t}}function j(e,t){return{type:"Decimal",span:e,val:t}}function z(e,t){return{type:"Cmd",span:e,val:r.translateCmd(t)}}function G(e,t){return{type:"Alphanumeric",span:e,val:t}}function U(e,t,r,n){return{type:"MixedNumber",span:e,whole:t,num:r,den:n}}function W(e){if("Subscript"===e.type){if("Alphanumeric"!==e.args[1].type)return!1;e=e.args[0]}switch(e.type){case"Cmd":case"Letter":return!0;default:return!1}}function Y(e){return"Superscript"===e.type&&W(e.args[0])}function X(e,t){if("Letter"!==e.type||"d"!==e.val)return!1;if("Juxt"!==t.type)return!1;var r=t.args,n=r[0],i=r[1];return"Letter"===n.type&&"d"===n.val&&W(i)}function H(e){return"Seq"===e.type?e.args:[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.Equals=n,t.Inequality=i,t.TrailingInequalityPiece=a,t.InequalityChain=o,t.Tilde=s,t.Pos=u,t.Neg=c,t.Add=l,t.Sub=p,t.Mul=f,t.Div=h,t.Bang=d,t.Call=m,t.ImplicitCall=y,t.Index=g,t.Paren=v,t.List=b,t.Pipes=x,t.Subscript=_,t.Superscript=S,t.Prime=M,t.Seq=E,t.Sqrt=D,t.Nthroot=w,t.Frac=T,t.Derivative=P,t.Integral=I,t.EmptyIntegral=C,t.Sum=O,t.Product=A,t.Piecewise=L,t.EmptyPiecewise=N,t.Colon=q,t.Ellipsis=F,t.Dot=R,t.PercentOf=V,t.Juxt=k,t.Letter=B,t.Decimal=j,t.Cmd=z,t.Alphanumeric=G,t.MixedNumber=U,t.isIdentifier=W,t.isSuperscriptedIdentifier=Y,t.isDerivative=X,t.unwrapSeq=H}),define("core/math/parser/surface-node-error",["require","exports"],function(e,t){"use strict";function r(e,t){return{type:"Err",span:e,error:t}}function n(){return{type:"UnexpectedParseError"}}function i(){return{type:"EmptyInput"}}function a(){return{type:"EmptyGroup"}}function o(){return{type:"EmptySubscript"}}function s(){return{type:"EmptySuperscript"}}function u(){return{type:"EmptyRadical"}}function c(){return{type:"EmptySquareBracket"}}function l(){return{type:"EmptyPipe"}}function p(){return{type:"EmptyRadicalIndex"}}function f(){return{type:"UnexpectedEnd"}}function h(e){return{type:"BinaryOperatorMissingRight",val:e}}function d(e){return{type:"BinaryOperatorMissingLeft",val:e}}function m(e){return{type:"UnaryOperatorMissingRight",val:e}}function y(e){return{type:"UnaryOperatorMissingLeft",val:e}}function g(e,t){return{type:"MissingCloseDelimiter",open:e,close:t}}function v(e,t){return{type:"UnexpectedCloseDelimiter",open:e,close:t}}function b(){return{type:"UnexpectedDifferential"}}function x(e){return{type:"UnrecognizedSymbol",val:e}}function _(e){return{type:"InvalidOperatorName",val:e}}function S(e){return{type:"InvalidSubscript",val:e}}function M(e){return{type:"UnexpectedSubscript",base:e}}function E(e){return{type:"FunctionMissingArgument",val:e}}function D(){return{type:"PercentMissingOf"}}function w(){return{type:"PrimeWithoutParen"}}function T(){return{type:"SuperscriptWithPrime"}}function P(){return{type:"UnexpectedPrime"}}function I(){return{type:"SumMissingBound"}}function C(){return{type:"ProductMissingBound"}}function O(){return{type:"MissingBound"}}function A(){return{type:"IntegralMissingBound"}}function L(){return{type:"SumMissingBody"}}function N(){return{type:"ProductMissingBody"}}function q(){return{type:"IntegralMissingBody"}}function F(){return{type:"DerivativeMissingBody"}}function R(){return{type:"IntegralMissingDifferential"}}function V(){return{type:"DifferentialWithSuperscript"}}function k(){return{type:"FractionMissingNumerator"}}function B(){return{type:"FractionMissingDenominator"}}function j(){return{type:"FractionEmpty"}}function z(e){return{type:"AdjacentNumbers",args:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Err=r,t.UnexpectedParseError=n,t.EmptyInput=i,t.EmptyGroup=a,t.EmptySubscript=o,t.EmptySuperscript=s,t.EmptyRadical=u,t.EmptySquareBracket=c,t.EmptyPipe=l,t.EmptyRadicalIndex=p,t.UnexpectedEnd=f,t.BinaryOperatorMissingRight=h,t.BinaryOperatorMissingLeft=d,t.UnaryOperatorMissingRight=m,t.UnaryOperatorMissingLeft=y,t.MissingCloseDelimiter=g,t.UnexpectedCloseDelimiter=v,t.UnexpectedDifferential=b,t.UnrecognizedSymbol=x,t.InvalidOperatorName=_,t.InvalidSubscript=S,t.UnexpectedSubscript=M,t.FunctionMissingArgument=E,t.PercentMissingOf=D,t.PrimeWithoutParen=w,t.SuperscriptWithPrime=T,t.UnexpectedPrime=P,t.SumMissingBound=I,t.ProductMissingBound=C,t.MissingBound=O,t.IntegralMissingBound=A,t.SumMissingBody=L,t.ProductMissingBody=N,t.IntegralMissingBody=q,t.DerivativeMissingBody=F,t.IntegralMissingDifferential=R,t.DifferentialWithSuperscript=V,t.FractionMissingNumerator=k,t.FractionMissingDenominator=B,t.FractionEmpty=j,t.AdjacentNumbers=z}),define("core/math/parser/expression-token-tables",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={"+":!0,"-":!0,"*":!0,"/":!0,"!":!0,"(":!0,")":!0,"\\\\{":!0,"\\\\}":!0,"(|":!0,"|)":!0,"[":!0,"]":!0,",":!0,"...":!0,":":!0,"=":!0,">":!0,"<":!0,">=":!0,"<=":!0,"~":!0,"%":!0,".":!0,Letter:!0,Decimal:!0,Cmd:!0,Differential:!0,End:!0,Trig:!0,Ln:!0,Log:!0,Int:!0,Sum:!0,Prod:!0,Err:!0};t.commandTable={"\\\\lt":"<","\\\\gt":">","\\\\le":"<=","\\\\ge":">=","\\\\ldots":"...","\\\\sim":"~","\\\\cdot":"*","\\\\times":"*","\\\\div":"/","\\\\ln":"Ln","\\\\log":"Log","\\\\int":"Int","\\\\sum":"Sum","\\\\prod":"Prod","\\\\backslash":"Err"};for(var n=["sin","cos","tan","cot","sec","csc"],i=0,a=n;i<a.length;i++){var o=a[i];t.commandTable["\\\\"+o]="Trig",t.commandTable["\\\\"+o+"h"]="Trig",t.commandTable["\\\\arc"+o]="Trig",t.commandTable["\\\\arc"+o+"h"]="Trig"}t.symbolTable={"+":"+","-":"-","*":"*","/":"/","!":"!","(":"(",")":")","[":"[","]":"]",",":",","...":"...",":":":","=":"=",">=":">=","<=":"<=",">":">","<":"<","~":"~",".":"."},t.escapedSymbolTable={"\\\\{":"\\\\{","\\\\}":"\\\\}","\\\\%":"%"},t.leftTable={"|":"(|","\\\\{":"\\\\{","[":"[","(":"("},t.rightTable={"|":"|)","\\\\}":"\\\\}","]":"]",")":")"},t.allTokenTypes=Object.keys(r)}),define("core/math/parser/expression-lexer",["require","exports","./expression-token-tables","./input-span","./input-span","./surface-node"],function(e,t,r,n,i,a){"use strict";function o(e,t,r,n,i,a,o,s){return{opts:e,input:t,prevSpan:r,startIndex:n,endIndex:i,token:a,mode:o,parent:s}}function s(e,t){return n.joinSpans(e.token.span,t.prevSpan)}function u(e,t){return n.joinSpans(e,t.prevSpan)}function c(e){return n.emptySpanAt(e.token.span.input,e.token.span.start)}function l(e,t){return{type:"Differential",span:e,val:t}}function p(e,t,r){return{type:e,span:t,val:r}}function f(e,t){return h(t,e,0,n.emptySpanAt(e.span.input,e.span.start),void 0,void 0)}function h(e,t,n,i,a,s){var u=t.args;if(n>u.length&&s)return m(s,i);n=P(u,n);var c=M(t,n,a),l=c.token,f=c.endIndex;if("End"===l.type&&s){var h=s.input.args[s.startIndex];if("LeftRight"===h.type){var d=h.right;return o(e,t,i,n,f,p(r.rightTable[d.val]||"Err",d.span,d.val),a,s)}}else"Int"===l.type?a=g(a):"Differential"===l.type&&(a=v(a));return o(e,t,i,n,f,l,a,s)}function d(e){var t=e.input.args[e.startIndex],r=e.token.span;return t&&"LeftRight"===t.type?h(e.opts,t.arg,0,r,e.mode,e):m(e,r)}function m(e,t){var r=e.input,n=e.endIndex,i=e.mode,a=e.parent;return h(e.opts,r,n+1,t,i,a)}function y(e){return e.token}function g(e){return{type:"integral",parent:e}}function v(e){if(!e||"integral"!==e.type)throw new Error("Programming Error: expected lexer to be in integral mode.");return e.parent}function b(e,t){return y(e).type===t}function x(e){return e.startIndex>=e.input.args.length}function _(e,t){return t.token.span.start>e.token.span.start}function S(e,t){return{token:t,endIndex:e}}function M(e,t,i){if(t>=e.args.length)return S(t,p("End",n.emptySpanAt(e.span.input,e.span.end),""));var a=e.args[t];switch(a.type){case"Sqrt":case"Frac":case"SupSub":return S(t,a);case"Letter":if(!i||"integral"!==i.type)return S(t,a);if("d"!=a.val)return S(t,a);var o=M(e,t+1,i),s=o.endIndex,u=o.token;if("Letter"===u.type||"Cmd"===u.type){return S(s,l(n.joinSpans(a.span,u.span),u.val))}return S(t,a);case"LeftRight":var c=a.left;return S(t,p(r.leftTable[c.val]||"Err",n.joinSpans(a.span,c.span),c.val));case"OperatorName":for(var f=[],h=0,d=a.arg.args;h<d.length;h++){var m=d[h];if("Letter"!==m.type)return S(t,p("Err",a.span,n.slice(a.arg.span)));f.push(m.val)}var y="\\\\"+f.join("");return S(t,p(r.commandTable[y]||"Cmd",a.span,y));case"Cmd":return S(t,p(r.commandTable[a.val]||"Cmd",a.span,a.val));case"EscapedSymbol":return S(t,p(r.escapedSymbolTable[a.val]||"Err",a.span,a.val));case"Symbol":if(I(a))return E(e,t);return S(t,p(r.symbolTable[a.val]||"Err",a.span,a.val));case"Digit":return D(e,t);default:throw"Unexpected atom "+a.type+"."}}function E(e,t){var i=e.args[t];if("Symbol"!==i.type||"."!==i.val)throw new Error("Programming Error: expected '.'");if(t+2<e.args.length&&I(e.args[t+1])&&I(e.args[t+2])){var a=n.joinSpans(i.span,e.args[t+2].span);return S(t+2,p("...",a,n.slice(a)))}var o=P(e.args,t+1);return o<e.args.length&&"Digit"===e.args[o].type?D(e,t):S(t,p(r.symbolTable[i.val]||"Err",i.span,i.val))}function D(e,t){var r=w(e,t);if(r)return r;for(var i=e.args,a=e.args[t].span,o=[],s=!1,u=!1;t<i.length;t++){var c=P(i,t);if(c>=i.length)break;var l=i[c];if("Digit"===l.type)t=c,s=!0,o.push(l.val);else{if(u||!I(l))break;if(c+1<i.length&&I(e.args[c+1]))break;t=c,u=!0,o.push(".")}}if(!s)throw new Error("Programming Error: decimals must have at least one digit.");return S(t-1,p("Decimal",n.joinSpans(a,e.args[t-1].span),o.join("")))}function w(e,t){for(var r=e.args,i=r[t].span,o=[];t<r.length;t++){var s=P(r,t);if(s>=r.length)break;var u=r[s];if("Digit"!==u.type)break;t=s,o.push(u.val)}if(!((t=P(r,t))>=r.length)){var c=r[t];if("Frac"===c.type){for(var l=[],p=[],f=0,h=c.num.args;f<h.length;f++){var u=h[f];if(!T(u)){if("Digit"!==u.type)return;l.push(u.val)}}for(var d=0,m=c.den.args;d<m.length;d++){var u=m[d];if(!T(u)){if("Digit"!==u.type)return;p.push(u.val)}}var y=n.joinSpans(i,c.span);return S(t,a.MixedNumber(y,o.join(""),l.join(""),p.join("")))}}}function T(e){switch(e.type){case"Sqrt":case"Frac":case"SupSub":case"LeftRight":case"OperatorName":case"Symbol":case"Letter":case"Digit":return!1;case"Cmd":return"\\\\space"===e.val;case"EscapedSymbol":return"\\\\ "===e.val||"\\\\:"===e.val||"\\\\,"===e.val||"\\\\;"===e.val;default:throw"Unexpected atom "+e.type+"."}}function P(e,t){for(;t<e.length&&T(e[t]);)t+=1;return t}function I(e){return"Symbol"===e.type&&"."===e.val}Object.defineProperty(t,"__esModule",{value:!0}),t.Span=i.Span,t.spanStates=s,t.joinState=u,t.emptySpanAtState=c,t.lex=f,t.lexAt=h,t.advance=d,t.peek=y,t.beginIntegral=g,t.endIntegral=v,t.isAt=b,t.isDone=x,t.didAdvance=_}),define("core/math/parser/precspec",["require","exports","./expression-token-tables"],function(e,t,r){"use strict";function n(e){return{type:"initial",tokenType:e}}function i(e){return{type:"l",tokenType:e}}function a(e){return{type:"r",tokenType:e}}function o(e){return{type:"la",tokenType:e}}function s(e){return{type:"ra",tokenType:e}}function u(e,t){for(var n=0,i=r.allTokenTypes;n<i.length;n++){var a=i[n];if(void 0===t[a])throw new Error("Programming Error: token "+a+" must be a assigned a "+e+" precedence")}}function c(e,t,r,n){if(void 0!==t[r])throw new Error("Programming Error: duplicate "+e+" entry for token "+r+".");t[r]=n}function l(e){function t(e){return o[e]}function r(e){return a[e]}function n(e){var r=i[e];return void 0===r?t(e):r}for(var i={},a={},o={},s=0;s<e.length;s++)for(var l=e[s],p=0,f=l;p<f.length;p++){var h=f[p],d=h.type,m=h.tokenType;switch(d){case"initial":c("initial",i,m,s);break;case"l":c("left",a,m,s);break;case"r":c("right",o,m,s);break;case"la":c("left",a,m,s),c("right",o,m,s);break;case"ra":c("left",a,m,s),c("right",o,m,s-1)}}return u("left",a),u("right",o),{rightPrec:t,leftPrec:r,initialPrec:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.initial=n,t.l=i,t.r=a,t.la=o,t.ra=s,t.precSpec=l}),define("core/math/parser/expression-parser",["require","exports","tslib","./surface-node","./surface-node-error","./input-span","./expression-lexer","./precspec"],function(e,t,r,n,i,a,o,s){"use strict";function u(e,t){var n=t?r.__assign(r.__assign({},A),t):A,a=c(e,n);return"Err"===a.type&&"EmptyGroup"===a.error.type?i.Err(a.span,i.EmptyInput()):a}function c(e,t){var r=o.lex(e,t);if(o.isDone(r))return i.Err(o.spanStates(r,r),i.EmptyGroup());var n=p(r,0),a=n.state,s=n.tree;return"Err"===s.type||o.isDone(a)?s:D(a).tree}function l(e,t){return{state:e,tree:t}}function p(e,t){var r,n,i,a=e;if(r=h(e),e=r.state,i=r.tree,"Err"===i.type)return l(e,i);if(!o.didAdvance(a,e))throw new Error("Programming Error: parseInitial did not advance state.");for(;!o.isDone(e);){var s=void 0;if(s=o.isAt(e,"(")&&!m(i)?C("("):I(o.peek(e).type),t>=s)break;var u=e;if(n=d(e,i),e=n.state,i=n.tree,"Err"===i.type)return l(e,i);if(!o.didAdvance(u,e))throw new Error("Programming Error: parseSuccessor did not advance state.")}return l(e,i)}function f(e){return"UnexpectedDifferential"===e.type||"UnexpectedCloseDelimiter"===e.type||"UnexpectedEnd"===e.type||"BinaryOperatorMissingLeft"===e.type}function h(e){var t,r,a,s,u,h,d,m,y,g,b,w,T,P,C,A,L,N,q,F=e,R=o.peek(e),V=O(R.type);switch(R.type){case"+":if(e=o.advance(e),t=p(e,V),e=t.state,q=t.tree,"Err"===q.type){if(!f(q.error))return l(e,q);var k=o.spanStates(F,e),B=i.Err(k,i.UnaryOperatorMissingRight(R.val));return l(e,B)}return l(e,n.Pos(o.spanStates(F,e),[q]));case"-":if(e=o.advance(e),r=p(e,V),e=r.state,q=r.tree,"Err"===q.type){if(!f(q.error))return l(e,q);var k=o.spanStates(F,e),B=i.Err(k,i.UnaryOperatorMissingRight(R.val));return l(e,B)}return l(e,n.Neg(o.spanStates(F,e),[q]));case"(":return S(e);case"\\\\{":return e=o.advance(e),o.isAt(e,"\\\\}")?(e=o.advance(e),l(e,n.EmptyPiecewise(o.spanStates(F,e)))):(a=p(e,V),e=a.state,q=a.tree,s=E(F,e,q,"\\\\{","\\\\}"),e=s.state,q=s.tree,"Err"===q.type?l(e,q):l(e,n.Piecewise(o.spanStates(F,e),[q])));case"[":if(e=o.advance(e),o.isAt(e,"]")){e=o.advance(e);var k=o.spanStates(F,e);return l(e,i.Err(k,i.EmptySquareBracket()))}return u=p(e,V),e=u.state,q=u.tree,h=E(F,e,q,"[","]"),e=h.state,q=h.tree,"Err"===q.type?l(e,q):l(e,n.List(o.spanStates(F,e),[q]));case"(|":if(e=o.advance(e),o.isAt(e,"|)")){e=o.advance(e);var k=o.spanStates(F,e);return l(e,i.Err(k,i.EmptyPipe()))}return d=p(e,V),e=d.state,q=d.tree,m=E(F,e,q,"(|","|)"),e=m.state,q=m.tree,"Err"===q.type?l(e,q):l(e,n.Pipes(o.spanStates(F,e),[q]));case"Frac":e=o.advance(e);var j=c(R.num,e.opts),z=c(R.den,e.opts);if("Err"===j.type&&"EmptyGroup"===j.error.type&&"Err"===z.type&&"EmptyGroup"===z.error.type){var k=o.spanStates(F,e),B=i.Err(k,i.FractionEmpty());return l(e,B)}if("Err"===j.type&&"EmptyGroup"===j.error.type){var k=o.spanStates(F,e),B=i.Err(k,i.FractionMissingNumerator());return l(e,B)}if("Err"===z.type&&"EmptyGroup"===z.error.type){var k=o.spanStates(F,e),B=i.Err(k,i.FractionMissingDenominator());return l(e,B)}if("Err"===j.type)return l(e,j);if("Err"===z.type)return l(e,z);if(n.isDerivative(j,z)&&"Juxt"===z.type){var G=z.args[1],U=void 0;if(y=p(e,I("*")-1),e=y.state,U=y.tree,"Err"===U.type){if(f(U.error)){var k=o.spanStates(F,e);return l(e,i.Err(k,i.DerivativeMissingBody()))}return l(e,U)}return l(e,n.Derivative(o.spanStates(F,e),[G,U]))}return l(e,n.Frac(o.spanStates(F,e),[j,z]));case"Sqrt":if(e=o.advance(e),R.optArg){var W=c(R.optArg,e.opts);if("Err"===W.type)return"EmptyGroup"===W.error.type?l(e,i.Err(W.span,i.EmptyRadicalIndex())):l(e,W);var Y=c(R.arg,e.opts);return"Err"===Y.type?"EmptyGroup"===Y.error.type?l(e,i.Err(Y.span,i.EmptyRadical())):l(e,Y):l(e,n.Nthroot(o.spanStates(F,e),[W,Y]))}var Y=c(R.arg,e.opts);return"Err"===Y.type?"EmptyGroup"===Y.error.type?l(e,i.Err(Y.span,i.EmptyRadical())):l(e,Y):l(e,n.Sqrt(o.spanStates(F,e),[Y]));case"Trig":case"Ln":e=o.advance(e);var X=n.Cmd(o.spanStates(F,e),R.val),H=0,Q=o.peek(e);if("SupSub"===Q.type){if(e=o.advance(e),Q.sub){var k=o.spanStates(F,e),B=i.Err(k,i.UnexpectedSubscript(X.val));return l(e,B)}var J=x(Q,e.opts);if(J){if("Err"===J.type)return l(e,J);X=n.Superscript(o.spanStates(F,e),[X,J])}H=Q.nprimes}var Z=o.isAt(e,"(");if(Z){if(g=S(e),e=g.state,q=g.tree,"Err"===q.type)return l(e,q);q=n.Call(o.spanStates(F,e),[X,q.args[0]])}else{if(b=p(e,V-1),e=b.state,q=b.tree,"Err"===q.type)return f(q.error)?l(e,i.Err(o.spanStates(F,e),i.FunctionMissingArgument(R.val))):l(e,q);q=n.ImplicitCall(o.spanStates(F,e),[X,q])}if(H>0){var k=o.spanStates(F,e);if(!Z){var B=i.Err(k,i.PrimeWithoutParen());return l(e,B)}q=n.Prime(k,H,[q])}return l(e,q);case"Log":e=o.advance(e);var X=n.Cmd(o.spanStates(F,e),R.val),H=0,K=void 0,J=void 0,Q=o.peek(e);if("SupSub"===Q.type&&(e=o.advance(e),K=v(Q,e.opts),J=x(Q,e.opts),H=Q.nprimes),K&&"Err"===K.type)return l(e,K);if(J&&"Err"===J.type)return l(e,J);var Z=o.isAt(e,"(");if(Z){if(w=S(e),e=w.state,q=w.tree,"Err"===q.type)return l(e,q);q=q.args[0]}else if(T=p(e,V-1),e=T.state,q=T.tree,"Err"===q.type)return f(q.error)?l(e,i.Err(o.spanStates(F,e),i.FunctionMissingArgument(R.val))):l(e,q);var $=K?n.Seq(o.spanStates(F,e),n.unwrapSeq(q).concat(K)):q,ee=K?n.Cmd(o.spanStates(F,e),"\\\\logbase"):X;if(J&&(ee=n.Superscript(o.spanStates(F,e),[ee,J])),q=Z?n.Call(o.spanStates(F,e),[ee,$]):n.ImplicitCall(o.spanStates(F,e),[ee,$]),H>0){var k=o.spanStates(F,e);if(!Z){var B=i.Err(k,i.PrimeWithoutParen());return l(e,B)}q=n.Prime(k,H,[q])}return l(e,q);case"Int":e=o.advance(e);var Q=o.peek(e);e=o.advance(e);var te=_(Q,F,e);if("Err"===te.type)return"MissingBound"===te.error.type?l(e,i.Err(te.span,i.IntegralMissingBound())):l(e,te);var J=te.sup,K=te.sub,G=void 0;if(o.isAt(e,"Differential"))return P=M(e),e=P.state,G=P.tree,"Err"===G.type?l(e,G):l(e,n.EmptyIntegral(o.spanStates(F,e),[G,K,J]));if(C=p(e,V),e=C.state,q=C.tree,"Err"===q.type)return f(q.error)?l(e,i.Err(q.span,i.IntegralMissingBody())):l(e,q);var re=q;return o.isAt(e,"Differential")?(A=M(e),e=A.state,G=A.tree,"Err"===G.type?l(e,G):l(e,n.Integral(o.spanStates(F,e),[G,K,J,re]))):l(e,i.Err(o.spanStates(F,e),i.IntegralMissingDifferential()));case"Sum":e=o.advance(e);var Q=o.peek(e);e=o.advance(e);var te=_(Q,F,e);if("Err"===te.type)return"MissingBound"===te.error.type?l(e,i.Err(te.span,i.SumMissingBound())):l(e,te);var J=te.sup,K=te.sub;return L=p(e,V),e=L.state,q=L.tree,"Err"===q.type?f(q.error)?l(e,i.Err(q.span,i.SumMissingBody())):l(e,q):l(e,n.Sum(o.spanStates(F,e),[q,K,J]));case"Prod":e=o.advance(e);var Q=o.peek(e);e=o.advance(e);var te=_(Q,F,e);if("Err"===te.type)return"MissingBound"===te.error.type?l(e,i.Err(te.span,i.ProductMissingBound())):l(e,te);var J=te.sup,K=te.sub;return N=p(e,V),e=N.state,q=N.tree,"Err"===q.type?f(q.error)?l(e,i.Err(q.span,i.ProductMissingBody())):l(e,q):l(e,n.Product(o.spanStates(F,e),[q,K,J]));case"Cmd":return e=o.advance(e),q=n.Cmd(o.spanStates(F,e),R.val),l(e,q);case"Letter":return e=o.advance(e),q=n.Letter(o.spanStates(F,e),R.val),l(e,q);case"Decimal":e=o.advance(e);var ne=n.Decimal(o.spanStates(F,e),R.val),Q=e.token;if("Decimal"===Q.type||"MixedNumber"===Q.type){var ie=e;e=o.advance(e);var k=o.spanStates(F,e),ae="MixedNumber"===Q.type?Q:n.Decimal(o.spanStates(ie,e),Q.val);return l(e,i.Err(k,i.AdjacentNumbers([ne,ae])))}return l(e,ne);case"MixedNumber":return e=o.advance(e),l(e,R);case"*":case"/":case",":case"=":case">":case"<":case">=":case"<=":case"~":case":":case"...":case"%":case".":e=o.advance(e);var k=o.spanStates(F,e),B=i.Err(k,i.BinaryOperatorMissingLeft(R.val));return l(e,B);case"!":e=o.advance(e);var k=o.spanStates(F,e),B=i.Err(k,i.UnaryOperatorMissingLeft(R.val));return l(e,B);case"SupSub":e=o.advance(e);var oe="supsub";R.sub?oe="subscript":R.sup?oe="superscript":R.nprimes>0&&(oe="prime");var k=o.spanStates(F,e),B=i.Err(k,i.UnaryOperatorMissingLeft(oe));return l(e,B);case")":case"\\\\}":case"]":case"|)":case"Differential":return D(e);case"Err":e=o.advance(e);var k=o.spanStates(F,e),B=i.Err(k,i.UnrecognizedSymbol(R.val));return l(e,B);case"End":var k=o.spanStates(F,e),B=i.Err(k,i.UnexpectedEnd());return l(e,B);default:throw"Unexpected token type "+R.type+"."}}function d(e,t){var r,a,s,u,c,h,d,m,v,_,M,T,P,I,O,A=o.peek(e),L=C(A.type);switch(A.type){case"+":case"-":case"*":case"/":case"=":case"~":case":":case".":if(e=o.advance(e),r=p(e,L),e=r.state,O=r.tree,"Err"===O.type){if(f(O.error)){var N=o.joinState(t.span,e),q=i.Err(N,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,O)}return l(e,y(A.type,o.joinState(t.span,e),[t,O]));case"%":e=o.advance(e);var F=o.peek(e);if("Cmd"!==F.type||"of"!==F.val&&"\\\\of"!==F.val){var q=i.Err(A.span,i.PercentMissingOf());return l(e,q)}if(e=o.advance(e),a=p(e,L),e=a.state,O=a.tree,"Err"===O.type){if(f(O.error)){var N=o.joinState(t.span,e),q=i.Err(N,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,O)}return l(e,n.PercentOf(o.joinState(t.span,e),[t,O]));case">=":case"<=":case">":case"<":var R=A.type;if(e=o.advance(e),s=g(e,R),e=s.state,R=s.symbol,u=p(e,L),e=u.state,O=u.tree,"Err"===O.type){if(f(O.error)){var N=o.joinState(t.span,e),q=i.Err(N,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,O)}for(var V=n.Inequality(o.joinState(t.span,e),R,[t,O]),k=[],B=o.peek(e).type;">="===B||"<="===B||">"===B||"<"===B;){var j=e;if(R=B,e=o.advance(e),c=g(e,R),e=c.state,R=c.symbol,h=p(e,L),e=h.state,O=h.tree,"Err"===O.type){if(f(O.error)){var N=o.joinState(t.span,e),q=i.Err(N,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,O)}k.push(n.TrailingInequalityPiece(o.spanStates(j,e),R,[O])),B=o.peek(e).type}return k.length?l(e,n.InequalityChain(o.joinState(t.span,e),V,k)):l(e,V);case"!":return e=o.advance(e),l(e,n.Bang(o.joinState(t.span,e),[t]));case"[":var j=e;if(e=o.advance(e),o.isAt(e,"]")){e=o.advance(e);var N=o.spanStates(j,e);return l(e,i.Err(N,i.EmptySquareBracket()))}return d=p(e,L),e=d.state,O=d.tree,m=E(j,e,O,"[","]"),e=m.state,O=m.tree,"Err"===O.type?l(e,O):l(e,n.Index(o.joinState(t.span,e),[t,O]));case"Sqrt":case"Frac":case"Letter":case"Cmd":case"Trig":case"Ln":case"Log":case"Sum":case"Int":case"Prod":case"Decimal":case"MixedNumber":case"\\\\{":case"(|":return v=p(e,L),e=v.state,O=v.tree,"Err"===O.type?l(e,O):l(e,n.Juxt(o.joinState(t.span,e),[t,O]));case"(":if(n.isIdentifier(t)){if(_=S(e),e=_.state,O=_.tree,"Err"===O.type)return l(e,O);var N=o.joinState(t.span,e);return l(e,n.Call(N,[t,O.args[0]]))}if("Prime"===t.type&&n.isIdentifier(t.args[0])){if(M=S(e),e=M.state,O=M.tree,"Err"===O.type)return l(e,O);var N=o.joinState(t.span,e);return l(e,n.Prime(N,t.nprimes,[n.Call(N,[t.args[0],O.args[0]])]))}return T=p(e,L),e=T.state,O=T.tree,"Err"===O.type?l(e,O):l(e,n.Juxt(o.joinState(t.span,e),[t,O]));case"SupSub":e=o.advance(e);var z=b(A),G=x(A,e.opts);if(z&&"Err"===z.type)return l(e,z);if(G&&"Err"===G.type)return l(e,G);if(z&&(t=n.Subscript(o.joinState(t.span,e),[t,z])),G&&(t=n.Superscript(o.joinState(t.span,e),[t,G])),A.nprimes>0){var N=o.joinState(t.span,e);if(!n.isIdentifier(t)){var q=i.Err(N,i.UnexpectedPrime());return l(e,q)}t=n.Prime(N,A.nprimes,[t])}return l(e,t);case",":for(var U=[t];o.isAt(e,",")&&(e=o.advance(e),!o.isAt(e,"..."))&&(!e.opts.trailingComma||!w(e));){if(P=p(e,L),e=P.state,O=P.tree,"Err"===O.type){if(f(O.error)){var N=o.joinState(t.span,e),q=i.Err(N,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,O)}U.push(O)}return l(e,n.Seq(o.joinState(t.span,e),U));case"...":if(e=o.advance(e),o.isAt(e,",")&&(e=o.advance(e)),I=p(e,L),e=I.state,O=I.tree,"Err"===O.type){if(f(O.error)){var N=o.joinState(t.span,e),q=i.Err(N,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,O)}return l(e,n.Ellipsis(o.joinState(t.span,e),[t,O]));case"]":case")":case"\\\\}":case"|)":case"Differential":return D(e);case"Err":return p(e,L);case"End":var N=o.spanStates(e,e),q=i.Err(N,i.UnexpectedEnd());return l(e,q);default:throw"Unexpected token type "+A.type+"."}}function m(e){return!!n.isIdentifier(e)||!("Prime"!==e.type||!n.isIdentifier(e.args[0]))}function y(e,t,r){switch(e){case"+":return n.Add(t,r);case"-":return n.Sub(t,r);case"*":return n.Mul(t,r);case"/":return n.Div(t,r);case"=":return n.Equals(t,r);case"~":return n.Tilde(t,r);case":":return n.Colon(t,r);case".":return n.Dot(t,r);default:throw"Unexpected token type "+e+"."}}function g(e,t){if(!o.isAt(e,"="))return{state:e,symbol:t};switch(t){case">":e=o.advance(e),t=">=";break;case"<":e=o.advance(e),t="<="}return{state:e,symbol:t}}function v(e,t){if(e.sub){var r=e.sub,n=c(r,t);return"Err"===n.type&&"EmptyGroup"===n.error.type?i.Err(n.span,i.EmptySubscript()):n}}function b(e){if(e.sub){var t=e.sub;if(0===t.args.length)return i.Err(t.span,i.EmptySubscript());for(var r=[],o=0,s=t.args;o<s.length;o++){var u=s[o];if("Digit"!==u.type&&"Letter"!==u.type){var c=u.span;return i.Err(c,i.InvalidSubscript(a.slice(c)))}r.push(u.val)}return n.Alphanumeric(t.span,r.join(""))}}function x(e,t){if(e.sup){var r=c(e.sup,t);return"Err"===r.type?"EmptyGroup"===r.error.type?i.Err(r.span,i.EmptySuperscript()):r:e.nprimes>0?i.Err(e.span,i.SuperscriptWithPrime()):r}}function _(e,t,r){if("SupSub"!==e.type){var n=o.spanStates(t,r)
;return i.Err(n,i.MissingBound())}if(e.nprimes>0){var n=o.spanStates(t,r);return i.Err(n,i.UnexpectedPrime())}var a=v(e,r.opts),s=x(e,r.opts);if(!a||"Err"===a.type&&"EmptySubscript"===a.error.type||!s||"Err"===s.type&&"EmptySuperscript"===s.error.type){var n=o.spanStates(t,r);return i.Err(n,i.MissingBound())}return"Err"===a.type?a:"Err"===s.type?s:{type:"Bounds",sup:s,sub:a}}function S(e){var t,r,i=e,a=o.peek(e),s=O(a.type);if(!o.isAt(e,"("))throw new Error("Programming Error: expected '(' at start of parseParen.");if(e=o.advance(e),o.isAt(e,")")){var u=n.Seq(o.emptySpanAtState(e),[]);e=o.advance(e);var c=o.spanStates(i,e);return l(e,n.Paren(c,[u]))}var f;return t=p(e,s),e=t.state,f=t.tree,r=E(i,e,f,"(",")"),e=r.state,f=r.tree,"Err"===f.type?l(e,f):l(e,n.Paren(o.spanStates(i,e),[f]))}function M(e){var t=e,r=o.peek(e);if("Differential"!==r.type)throw new Error("Programming Error: expected differential");e=o.advance(e);var a=n.Cmd(r.span,r.val),s=o.peek(e);if("SupSub"===s.type){e=o.advance(e);var u=o.spanStates(t,e),c=b(s);if(c){if("Err"===c.type)return l(e,c);a=n.Subscript(u,[a,c])}if(s.sup)return l(e,i.Err(u,i.DifferentialWithSuperscript()));if(s.nprimes>0)return l(e,i.Err(u,i.UnexpectedPrime()))}return l(e,a)}function E(e,t,r,n,a){if("Err"===r.type&&"UnexpectedEnd"!==r.error.type)return l(t,r);if("Err"===r.type||!o.isAt(t,a)){var s=o.spanStates(e,t);return l(t,i.Err(s,i.MissingCloseDelimiter(n,a)))}return t=o.advance(t),l(t,r)}function D(e){var t=e;switch(o.peek(e).type){case")":e=o.advance(e);var r=o.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedCloseDelimiter("(",")")));case"]":e=o.advance(e);var r=o.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedCloseDelimiter("[","]")));case"\\\\}":e=o.advance(e);var r=o.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedCloseDelimiter("\\\\{","\\\\}")));case"|)":e=o.advance(e);var r=o.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedCloseDelimiter("|","|")));case"Differential":e=o.advance(e);var r=o.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedDifferential()));default:e=o.advance(e);var r=o.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedParseError()))}}function w(e){return o.isAt(e,")")||o.isAt(e,"]")||o.isAt(e,"\\\\}")}Object.defineProperty(t,"__esModule",{value:!0});var T=[[s.initial("("),s.la(")"),s.initial("\\\\{"),s.la("\\\\}"),s.r("["),s.la("]"),s.initial("(|"),s.la("|)"),s.la("Differential"),s.la("End")],[s.ra("...")],[s.la(",")],[s.ra(":")],[s.la("="),s.la(">"),s.la("<"),s.la(">="),s.la("<="),s.la("~")],[s.la("+"),s.la("-")],[s.la("*"),s.la("/"),s.la("Decimal"),s.la("MixedNumber"),s.la("Letter"),s.la("Cmd"),s.la("%"),s.r("("),s.la("\\\\{"),s.la("(|"),s.la("Frac"),s.la("Sqrt"),s.la("Trig"),s.la("Ln"),s.la("Log"),s.ra("Int"),s.ra("Sum"),s.ra("Prod")],[s.initial("+"),s.initial("-")],[s.la("!")],[s.la("SupSub")],[s.l("["),s.la(".")],[s.l("(")],[s.la("Err")]],P=s.precSpec(T),I=P.leftPrec,C=P.rightPrec,O=P.initialPrec,A={trailingComma:!1};t.parse=u}),define("core/math/inverses",[],function(){"use strict";var e={};return["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"].forEach(function(t){e[t]="arc"+t,e["arc"+t]=t}),e}),define("core/math/parser/lower",["require","exports","core/math/inverses","core/math/errormsg","tslib","./input-span","./surface-node","../maybe-rational"],function(e,t,r,n,i,a,o,s){"use strict";function u(e,t){return l(e,t)}function c(e,t){for(var r=[],n=0;n<t.length;n++)r.push(h(e,t[n]));return r}function l(e,t){return e.setInput(p(e,t),t.span)}function p(e,t){var r=e.nodes;switch(t.type){case"Equals":var i=t.args,a=i[0],s=i[1];if("Call"===a.type){var u=a.args,l=u[0],p=u[1],m=o.unwrapSeq(p);if(o.isIdentifier(l)&&m.every(o.isIdentifier))return r.FunctionDefinition(h(e,l),c(e,m),h(e,s))}else if(o.isIdentifier(a))return r.Assignment(h(e,a),h(e,s));return r.Equation(h(e,a),h(e,s));case"Tilde":var y=c(e,t.args),a=y[0],s=y[1];return r.Regression(a,s);case"Inequality":return S(e,t);case"InequalityChain":if(t.chain.length>1)throw n.inequalityChainTooLong();var g=t.first,v=g.symbol,b=g.args,x=b[0],_=b[1],M=t.chain[0],E=M.symbol,D=M.args[0];return o.isIdentifier(_)?r.DoubleInequality([h(e,x),v,h(e,_),E,h(e,D)]):S(e,t);case"Seq":if(!t.args.every(f))throw n.malformedPoint();return r.List(c(e,t.args));case"Call":var w=t.args,T=w[0],P=w[1];if("Cmd"===T.type)switch(T.val){case"polygon":return r.Polygon(c(e,o.unwrapSeq(P)));case"histogram":return r.Histogram(c(e,o.unwrapSeq(P)));case"cube":case"sphere":case"cone":case"dodecahedron":case"octahedron":case"tetrahedron":return r.Object3D(c(e,o.unwrapSeq(P)),T.val);case"dotplot":return r.DotPlot(c(e,o.unwrapSeq(P)));case"boxplot":return r.BoxPlot(c(e,o.unwrapSeq(P)));case"ttest":return r.TTest(c(e,o.unwrapSeq(P)));case"ittest":return r.IndependentTTest(c(e,o.unwrapSeq(P)));case"stats":return r.Stats(c(e,o.unwrapSeq(P)));default:return d(e,t)}return d(e,t);default:return d(e,t)}}function f(e){if("Paren"!==e.type)return!1;var t=e.args[0];return"Seq"===t.type&&2===t.args.length}function h(e,t){return e.setInput(d(e,t),t.span)}function d(e,t){var r=e.nodes;switch(t.type){case"Pos":return d(e,t.args[0]);case"Neg":for(var i=-1,u=t.args[0];;)if("Pos"===u.type||"Paren"===u.type)u=u.args[0];else{if("Neg"!==u.type)break;u=u.args[0],i*=-1}switch(u.type){case"Decimal":var l=E(u);return r.Constant(-1===i?s.neg(l):l);case"MixedNumber":var l=D(u);return r.MixedNumber(-1===i?s.neg(l):l);default:return-1===i?r.Negative([h(e,u)]):d(e,u)}case"Add":return r.Add(c(e,t.args));case"Sub":return r.Subtract(c(e,t.args));case"Mul":return r.Multiply(c(e,t.args));case"Div":return r.Divide(c(e,t.args));case"Bang":var p=t.args[0];return"Call"===p.type?r.FunctionFactorial(c(e,p.args)):r.FunctionCall("\\\\factorial",c(e,t.args));case"PercentOf":return r.PercentOf(c(e,t.args));case"Call":return b(e,t);case"ImplicitCall":return M(t),b(e,t);case"Dot":var f=t.args[1],m=c(e,t.args),y=m[0],g=m[1];if("Cmd"===f.type&&"random"===f.val){var v=a.emptySpanAt(f.span.input,f.span.end),_=e.setInput(I(e),v);g=e.setInput(r.SeededFunctionCall(g,[_]),f.span)}return r.DotAccess([y,g]);case"Prime":var S=t.args[0];if("Call"===S.type){var P=S.args,O=P[0],A=P[1],L=o.unwrapSeq(A).length;if("Cmd"===O.type&&"logbase"===O.val){if(2!==L)throw n.primedFunctionArity()}else if(1!==L)throw n.primedFunctionArity();return r.Prime(t.nprimes,c(e,t.args))}throw"ImplicitCall"===S.type?n.primeWithoutParen():n.unexpectedPrime();case"Index":return r.ListAccess(c(e,t.args));case"Paren":var N=t.args[0];return"Seq"===N.type?r.OrderedPair(c(e,N.args)):d(e,N);case"List":var q=t.args[0];if("Ellipsis"===q.type){var F=q.args,R=F[0],V=F[1];return r.Range([r.List(c(e,o.unwrapSeq(R))),r.List(c(e,o.unwrapSeq(V)))])}return r.List(c(e,o.unwrapSeq(q)));case"Pipes":return r.FunctionCall("\\\\abs",c(e,t.args));case"Subscript":var k=t.args,B=k[0],j=k[1];if(0===j.val.length)throw n.emptySubscript();var z=void 0;switch(B.type){case"Letter":case"Cmd":z=B.val;break;default:throw n.unexpectedSubscript()}return r.Identifier(z+"_"+j.val);case"Superscript":var G=t.args,B=G[0],U=G[1];return"Call"!==B.type||"Seq"===B.args[1].type||w(B)?"Dot"===B.type?r.DotAccessExponent(c(e,[B.args[0],B.args[1],U])):r.Exponent(c(e,t.args)):r.FunctionExponent(c(e,[B.args[0],B.args[1],U]));case"Sqrt":return r.FunctionCall("sqrt",c(e,t.args));case"Nthroot":return r.FunctionCall("nthroot",c(e,[t.args[1],t.args[0]]));case"Frac":return r.Divide(c(e,t.args));case"Derivative":var W=c(e,t.args);if(!o.isIdentifier(t.args[0]))throw n.parseError();return r.Derivative(W[0],[W[1]]);case"Integral":var Y=t.args,X=Y[0],H=Y[1],Q=Y[2],J=Y[3],W=c(e,[X,H,Q,J]);return r.Integral(W);case"EmptyIntegral":var Z=c(e,t.args),X=Z[0],K=Z[1],Q=Z[2],J=r.Constant(s.maybeRational(1,1));return r.Integral([X,K,Q,J]);case"Sum":var $=t.args,ee=$[0],te=$[1],Q=$[2];if("Equals"!=te.type)throw n.incorrectSumLowerBound();if(!o.isIdentifier(te.args[0]))throw n.incorrectSumLowerBound();var W=c(e,[te.args[0],te.args[1],Q]),re=h(C(e,W[0]),ee);return r.Sum(W.concat(re));case"Product":var ne=t.args,ee=ne[0],ie=ne[1],Q=ne[2];if("Equals"!=ie.type)throw n.incorrectProductLowerBound();if(!o.isIdentifier(ie.args[0]))throw n.incorrectProductLowerBound();var W=c(e,[ie.args[0],ie.args[1],Q]),re=h(C(e,W[0]),ee);return r.Product(W.concat(re));case"Juxt":return r.Multiply(c(e,t.args));case"Letter":return r.Identifier(t.val);case"Cmd":var ae=t.val;if("ans"===ae){if(void 0===e.currentIndex)throw n.badAnsContext();return r.Ans("ans_{"+(e.currentIndex-1)+"}")}if("approx"===ae)throw n.unrecognizedSymbol(ae);return r.Identifier(ae);case"Decimal":return r.Constant(E(t));case"MixedNumber":return r.MixedNumber(D(t));case"Piecewise":return x(e,t);case"EmptyPiecewise":if(!r.Piecewise.empty)throw n.featureUnavailable();return r.Piecewise.empty();case"Equals":throw n.unexpectedSymbol("=");case"Inequality":case"InequalityChain":throw n.unexpectedInequality();case"Tilde":throw n.unexpectedSymbol("~");case"Seq":throw n.unexpectedSymbol(",");case"Colon":throw n.unexpectedSymbol(":");case"Ellipsis":throw n.unexpectedSymbol("...");case"Err":throw T(t.error);default:throw"Unexpected surface node "+t.type+"."}}function m(e){return r.hasOwnProperty(e)}function y(e){return"ln"===e||"log"===e||"logbase"===e}function g(e){return"Decimal"===e.type&&"2"===e.val}function v(e){return"Neg"===e.type&&(e=e.args[0],"Decimal"===e.type&&"1"===e.val)}function b(e,t){var i=e.nodes,s=t.args,u=s[0],l=s[1],p=h(e,u),f=o.unwrapSeq(l),d=c(e,f);if("Cmd"===u.type&&"random"===u.val){var b=a.emptySpanAt(l.span.input,l.span.start),x=e.setInput(I(e),b);return i.SeededFunctionCall(p,[x].concat(d))}if(o.isIdentifier(u))return i.FunctionCall(p,d);if("Superscript"===u.type){var _=u.args,S=_[0],M=_[1];if("Cmd"===S.type){var E=S.val;if(m(E)||y(E)){if(g(M))return i.Exponent([i.FunctionCall(E,d),h(e,M)]);if(v(M)&&void 0!==r[E])return i.FunctionCall(r[E],d);throw m(E)?n.badTrigExponent(E):n.badLogExponent("logbase"===E?"log":E)}}}return i.Multiply([p,h(e,l)])}function x(e,t){var r,i=e.nodes,a=t.args[0],u=o.unwrapSeq(a),c=[];e:for(r=0;r<u.length;r++){var l=u[r];switch(l.type){case"Colon":var p=l.args,f=p[0],d=p[1];if(!_(f))throw n.colonMissingCondition();c.push({condition:S(e,f),if_expr:h(e,d)});break;case"Equals":case"Inequality":case"InequalityChain":c.push({condition:S(e,l),if_expr:i.Constant(s.maybeRational(1,1))});break;default:break e}}if(0===r)throw n.piecewiseMissingCondition();if(r<u.length-1)throw n.piecewisePartMissingCondition();if(r===u.length-1&&c.push({condition:i.Constant(!0),if_expr:h(e,u[r])}),!i.Piecewise.chain)throw n.featureUnavailable();return i.Piecewise.chain(c)}function _(e){return"Equals"===e.type||"Inequality"===e.type||"InequalityChain"===e.type}function S(e,t){var r=e.nodes;switch(t.type){case"Equals":return r.Comparator["="](c(e,t.args));case"Inequality":return r.Comparator[t.symbol](c(e,t.args));case"InequalityChain":if(t.chain.length>1)throw n.inequalityChainTooLong();var i=t.first,s=i.symbol,u=i.args,l=u[0],p=u[1],f=t.chain[0],h=f.symbol,d=f.args[0],m=a.emptySpanAt(t.span.input,t.span.start);return r.And([S(e,o.Inequality(m,s,[l,p])),S(e,o.Inequality(m,h,[p,d]))]);default:throw n.parseError()}}function M(e){var t=e.args,r=t[0],i=t[1];if("Superscript"===r.type&&(r=r.args[0]),"Cmd"===r.type&&"logbase"===r.val&&"Seq"===i.type&&2===i.args.length){if(!P(i.args[0]))throw n.badImplicitCall("log")}else if(!P(i)){if("Cmd"===r.type)throw n.badImplicitCall(r.val);throw n.parseError()}}function E(e){return s.fromDecimalString(e.val)}function D(e){var t=s.fromDecimalString(e.whole),r=s.fromDecimalString(e.num),n=s.fromDecimalString(e.den);return s.add(t,s.div(r,n))}function w(e){if("Call"!==e.type)return!1;for(var t=e.args[0];"Superscript"===t.type||"Subscript"===t.type||"Prime"===t.type;)t=t.args[0];return"Cmd"===t.type&&(m(t.val)||y(t.val))}function T(e){switch(e.type){case"UnexpectedParseError":case"MissingBound":case"EmptyGroup":case"UnexpectedDifferential":case"UnexpectedEnd":return n.parseError();case"InvalidOperatorName":return n.invalidOperatorName();case"UnexpectedCloseDelimiter":case"MissingCloseDelimiter":return n.mismatchedBraces(e.open,e.close);case"UnrecognizedSymbol":return"."===e.val?n.unexpectedSymbol(e.val):n.unrecognizedSymbol(e.val);case"EmptyInput":return n.blankExpression();case"BinaryOperatorMissingRight":case"BinaryOperatorMissingLeft":return n.binaryOperatorMissingOperand("%"===e.val?"% of":e.val);case"UnaryOperatorMissingLeft":return n.unaryOperatorMissingLeft(e.val);case"UnaryOperatorMissingRight":return n.unaryOperatorMissingRight(e.val);case"UnexpectedSubscript":return n.cannotSubscript(e.base);case"PercentMissingOf":return n.percentMissingOf();case"SumMissingBound":return n.sumMissingBound();case"ProductMissingBound":return n.productMissingBound();case"IntegralMissingBound":return n.integralMissingBound();case"SumMissingBody":return n.sumMissingBody();case"ProductMissingBody":return n.productMissingBody();case"IntegralMissingBody":return n.integralMissingBody();case"DerivativeMissingBody":return n.derivativeMissingBody();case"IntegralMissingDifferential":return n.integralMissingDifferential();case"DifferentialWithSuperscript":return n.differentialWithSuperscript();case"FractionMissingNumerator":return n.fractionMissingNumerator();case"FractionMissingDenominator":return n.fractionMissingDenominator();case"FractionEmpty":return n.fractionEmpty();case"EmptySuperscript":return n.emptySuperscript();case"EmptySubscript":return n.emptySubscript();case"InvalidSubscript":return n.invalidSubscript(e.val);case"SuperscriptWithPrime":return n.superscriptWithPrime();case"PrimeWithoutParen":return n.primeWithoutParen();case"UnexpectedPrime":return n.unexpectedPrime();case"EmptyRadical":return n.emptyRadical();case"EmptyRadicalIndex":return n.emptyRadicalIndex();case"EmptySquareBracket":return n.emptySquareBracket();case"EmptyPipe":return n.emptyPipe();case"FunctionMissingArgument":return n.wrongArity(e.val,1,0);case"AdjacentNumbers":var t=e.args[0].val,r=void 0;switch(e.args[1].type){case"Decimal":r=e.args[1].val;break;case"MixedNumber":r=e.args[1].whole+" "+e.args[1].num+"/"+e.args[1].den;break;default:throw"Unexpected type "+e.args[1].type+" as right member of AdjacentNumbers."}return n.adjacentNumbers(t,r);default:throw"Unexpected surface node "+e.type+"."}}function P(e){switch(e.type){case"Letter":case"Decimal":case"MixedNumber":case"Cmd":case"EmptyPiecewise":return!0;case"Neg":for(var t=e.args[0];;)if("Pos"===t.type||"Paren"===t.type)t=t.args[0];else{if("Neg"!==t.type)break;t=t.args[0]}return"Decimal"===t.type||"MixedNumber"===t.type;case"Pos":case"Paren":return P(e.args[0]);case"Juxt":case"Mul":case"Div":return P(e.args[0])&&P(e.args[1]);case"Subscript":return P(e.args[0]);case"Superscript":case"Frac":case"Add":case"Sub":return P(e.args[0])&&P(e.args[1]);case"Piecewise":var t=e.args[0];return"Equals"===t.type||"Inequality"===t.type||"InequalityChain"===t.type;case"Call":var r=e.args,n=r[0],i=r[1];return!o.isIdentifier(n)&&!o.isSuperscriptedIdentifier(n)&&(P(n)&&P(i));case"Derivative":case"Sqrt":case"Nthroot":case"Pipes":case"Bang":return!1;case"Neg":case"Equals":case"Inequality":case"InequalityChain":case"Tilde":case"ImplicitCall":case"Index":case"List":case"Seq":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Colon":case"Ellipsis":case"Dot":case"PercentOf":case"Prime":return!1;default:throw"Unexpected surface node "+e.type+"."}}function I(e){var t=e.nodes.ExtendSeed("",[e.nodes.Identifier("globalRandomSeed"),e.nodes.Seed(e.nextSeed())]);if(!e.seedExtensions)return t;for(var r=0,n=e.seedExtensions;r<n.length;r++){var i=n[r];t=e.nodes.ExtendSeed("ro",[t,i])}return t}function C(e,t){var r=e.seedExtensions||[];return i.__assign(i.__assign({},e),{seedExtensions:r.concat(t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.lower=u}),define("core/math/baseparser",["require","exports","core/math/errormsg","parsenodes","core/math/parser/latex-parser","core/math/parser/expression-parser","core/math/parser/lower"],function(e,t,r,n,i,a,o){"use strict";function s(){throw r.featureUnavailable()}function u(e,t){return e.setInputSpan(t),e}function c(e,t){var c=typeof e;if("string"!==c)throw new Error("Type Error: parse can only be called with strings, got "+JSON.stringify(e)+" of type "+c);t=t||{};var l=n;if(t.disabledFeatures){l=Object.create(l);for(var p=0,f=t.disabledFeatures;p<f.length;p++){var h=f[p];if(!l[h])throw new Error("Programming Error: "+h+" cannot be disabled because it is not a parsenode.");l[h]=s}}var d=void 0===t.seedPrefix?"":t.seedPrefix,m=0,y=function(){var e=d+"::vc"+m;return m+=1,e},g={nodes:l,currentIndex:t.index,setInput:u,nextSeed:y},v=void 0!==t.trailingComma?{trailingComma:t.trailingComma}:{};try{var b=i.parse(e),x=a.parse(b,v);return o.lower(g,x)}catch(e){return e instanceof n.Error?e:"string"==typeof e?n.Error(e):r.parseError()}}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=c}),define("core/math/rational-arithmetic-sequence",["require","core/math/distance","core/math/builtin"],function(e){"use strict";function t(e,t){var i=n.toFraction(e),a=n.toFraction(t);if(r.approx(i.n/i.d,e)&&r.approx(a.n/a.d,t)){var o=n.lcm(i.d,a.d),s=i.n*(o/i.d);return{nstart:s,nstep:a.n*(o/a.d)-s,lcm:o}}}var r=e("core/math/distance"),n=e("core/math/builtin");return t}),define("core/math/sliders",["require","exports"],function(e,t){"use strict";function r(e,t){var r=Math.round(1e6*e)/1e6;return Math.abs(r-e)<t?r:e}function n(e){var t=!0,r=!0,n=!0;if(void 0!==e.hardMin&&e.target<e.hardMin&&(t=!1),void 0!==e.hardMax&&e.target>e.hardMax&&(r=!1),e.step){i({target:e.target,step:e.step,hardMin:t?e.hardMin:void 0,hardMax:r?e.hardMax:void 0})!==e.target&&(n=!1)}return{min:t,max:r,step:n}}function i(e){var t=e.target,n=e.hardMin,i=e.hardMax,a=e.step,o=1e-10;if(void 0!==n&&void 0!==i&&(o=Math.min(o,Math.abs(i-n)/1e3)),a&&(o=Math.min(o,a/10)),void 0!==n&&(n=r(n,o)),void 0!==i&&(i=r(i,o)),n>i)return n;if(t<=n)return n;if(t>=i)return i;if(a){var s=void 0!==n?n:0;t=a*Math.round((t-s)/a)+s}var u=r(t,o);return a?t=u:n===u?t=u:i===u&&(t=u),t<=n?n:t>=i?i:t}Object.defineProperty(t,"__esModule",{value:!0}),t.roundToReasonableDecimal=r,t.determineWhichLimitsAreCompatibleWithValue=n,t.constrainSliderValueLikeEvaluator=i}),define("core/math/features/getConcreteTree",["require","parsenodes","core/math/errormsg","core/math/types","core/lib/label","core/math/distance","core/math/maybe-rational","core/math/rational-arithmetic-sequence","core/math/sliders"],function(e){"use strict";function t(e,t,r,n){for(var i=[],a=0;a<e.length;a++)i.push(e[a].getConcreteTree(t,r,n));return i}function r(){return this.getDependencies().concat([this._symbol])}function n(e){return e===d.Distribution||d.isList(e)}function i(e,t,r,i){var a=i.length-1,o=e[t];if(!o)throw h.unexpectedSymbol(".");if(o.isError)throw o;if(!o.isFunction)throw h.unexpectedSymbol(".");if(!o.allowDotCalls)throw h.illegalDotCall(r);var s,u="random"===t;if(s=u?i[1].valueType:i[0].valueType,!n(s))throw h.dotLHSTypeError("."+r,d.prettyPrint(s));if(a<o.dotMinArity){if(u)throw h.randomArity();throw h.wrongArity("."+r,o.dotMinArity,a)}if(a>o.dotMaxArity){if(u)throw h.randomArity();throw h.wrongArity("."+r,o.dotMaxArity,a)}}function a(e,r,n,a,o,s){var u=t(n,a,o,s);return i(o,e,r,u),o[e].getConcreteInvocationTree(a,o,u,r,s)}function o(e,t){return e.isError?e:-1===t.indexOf(e.valueType)?h.parseError():e}function s(e,t,r){if(!t)return void(r.valids[e]=!0);var n=t.getDependencies();if(t.isError)r.errors[e]=!0;else if(n.length>0){r.errors[e]=!0;for(var i=0;i<n.length;i++)n[i]===r.exportedSymbol?r.errors.cycle=!0:r.missingVars.push(n[i])}else r.values[e]=t.asValue();r.valids[e]=isFinite(r.values[e]),r.valids[e]||(r.values[e]=void 0)}function u(e,t,r,n,i,a){if(n<t.length&&!y.approx(a,t.elementAt(e,n).asValue(),10))throw h.nonArithmeticRange();if(i-n<=r.length&&i-n>1&&!y.approx(a,r.elementAt(e,r.length-i+n).asValue(),10))throw h.nonArithmeticRange()}function c(e,t){for(var r=!1,n=!1,i=0;i<e.length;i++){var a=e[i];(a.isList||a.isBroadcast)&&(n=!0);for(var o=a.getDependencies(),s=0;s<o.length;s++)if(-1!==t.indexOf(o[s])){if(a.isList||a.isBroadcast)return"list"}else r=!0}return n?r?"broadcast":"list":"none"}function l(e){var t,r=[],n=[],i=[];for(t=0;t<e.length;t++){var a,o=e[t];if(o.isList){for(var s=!1,u=0;u<i.length;u++)if(o===i[u]){s=!0,a=f.DummyIndex(n[u]),a.valueType=d.elementType(o.valueType),r.push(a);break}if(!s){var c=f.Base.prototype.tmpVar();n.push(c),i.push(o),a=f.DummyIndex(c),a.valueType=d.elementType(o.valueType),r.push(a)}}else o.isBroadcast?(Array.prototype.push.apply(n,o._replacedSymbols),Array.prototype.push.apply(i,o._lists),r.push(o._expression)):r.push(o)}return{replacedArgs:i,concreteArgs:r,replacedSymbols:n}}function p(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(!t[this._symbol])throw h.functionUnsupported(this._symbol);var n=this.args.map(function(r){return r.getConcreteTree(e,t)});if(n.length>0){if(1===n.length&&n.push(f.Constant(1)),n[1].getDependencies().length)throw h.illegalBinWidth(this._symbol).setDependencies(n[1].getDependencies());if(n[1].valueType!==d.Number)throw h.illegalBinWidth(this._symbol);var i=n[1].asValue();if(!isFinite(i)||i<=0)throw h.illegalBinWidth(this._symbol)}return this.typeCheck(e,n),new this.constructor(n)}var f=e("parsenodes"),h=e("core/math/errormsg"),d=e("core/math/types"),m=e("core/lib/label"),y=e("core/math/distance"),g=e("core/math/maybe-rational"),v=g.maybeRational,b=e("core/math/rational-arithmetic-sequence"),x=f.List,_=f.OrderedPair,S=f.ScalarExpression,M=f.Constant,E=f.ExtendSeed,D=f.Multiply,w=f.Identifier,T=f.DummyIndex,P=f.BuiltInFunction,I=e("core/math/sliders");f.Base.prototype.tryGetConcreteTree=function(){var e;try{e=this.getConcreteTree.apply(this,arguments)}catch(t){e=t instanceof f.Base?t:h.parseError()}return e},f.Base.prototype.getConcreteTree=function(e,t,r){if(r)return this._getConcreteTree(e,t,r);if(this.isConcreteTreeCacheValid(t))return this.__cachedConcreteTree.value;for(var n=this._getConcreteTree(e,t,r),i={},a=this.getCacheKeys().slice();;){if(!a.length)break;var o=a.pop();if(!i.hasOwnProperty(o)){var s=t[o];i[o]=s,s&&Array.prototype.push.apply(a,s.getCacheKeys())}}return this.__cachedConcreteTree={keys:i,value:n},n},f.Base.prototype.getCacheKeys=function(){return this.getDependencies()},f.Histogram.prototype.getCacheKeys=r,f.Object3D.prototype.getCacheKeys=r,f.DotPlot.prototype.getCacheKeys=r,f.BoxPlot.prototype.getCacheKeys=r,f.TTest.prototype.getCacheKeys=r,f.IndependentTTest.prototype.getCacheKeys=r,f.Base.prototype.isConcreteTreeCacheValid=function(e){if(!this.__cachedConcreteTree)return!1;for(var t in this.__cachedConcreteTree.keys)if(this.__cachedConcreteTree.keys.hasOwnProperty(t)&&e[t]!==this.__cachedConcreteTree.keys[t])return!1;return!0},f.PercentOf.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):f.Divide([f.Multiply(this.args),f.Constant(v(100,1))]).getConcreteTree(e,t,r)},f.Assignment.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):this._expression.getConcreteTree(e,t,r)},f.Identifier.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=m.latexToIdentifier(this.getInputString()),i=t[this._symbol];if(i){if(i.isError)throw i;if(i.isFunction)throw h.identifierAsFunction(n);return i.getConcreteTree(e,t,r)}if(P.hasOwnProperty(this._symbol))throw h.functionUnsupported(n);return f.FreeVariable(this._symbol)},f.Ans.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(void 0===t[this._symbol])throw h.ansUndefined();return w.prototype._getConcreteTree.call(this,e,t,r)},f.Equation.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):this.asComparator().getConcreteTree(e,t,r)},f.Constant.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):new this.constructor(this._constantValue)},f.Seed.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):new this.constructor(this._stringValue)},f.Derivative.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n;if(t[this._symbol]){var i=Object.create(t);i[this._symbol]=f.FreeVariable(this._symbol);var a=t[this._symbol].getConcreteTree(e,t,r);if(a.valueType!==d.Number&&a.valueType!==d.ListOfNumber)throw h.derivativeVariableTypeError(this._symbol,[d.prettyPrint(a.valueType)]);var o={};return o[this._symbol]=a,n=this.args[0].getConcreteTree(e,i,r),this.typeCheck(e,[n]),n.takeDerivative(this._symbol).substitute(o).getConcreteTree(e,t,r)}return n=this.args[0].getConcreteTree(e,t,r),this.typeCheck(e,[n]),n.takeDerivative(this._symbol).getConcreteTree(e,t,r)},f.DoubleInequality.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):new this.constructor([f.Piecewise([this._indicator,this._expressions[0],M(NaN)]).getConcreteTree(e,t,r),this._operators[0],w(this._symbol),this._operators[1],f.Piecewise([this._indicator,this._expressions[1],M(NaN)]).getConcreteTree(e,t,r)])},f.Expression.prototype._getConcreteTree=function(e,r,n){if(n&&n[this.type])return n[this.type].call(this,e,r,n);var i=t(this.args,e,r,n);return this.typeCheck(e,i),this._constantCollapsedCopy(e,i)},f.Error.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):this},f.FreeVariable.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):this},f.FunctionCall.prototype._getConcreteTree=function(e,r,n){if(n&&n[this.type])return n[this.type].call(this,e,r,n);var i="logbase"===this._symbol?"log":m.latexToIdentifier(this._identifier.getInputString()),a=r[this._symbol];if(a&&a.isError)throw a;if(!a||!a.isFunction){if(P.hasOwnProperty(this._symbol))throw"logbase"===this._symbol&&r.ln&&r.log?h.logbaseUnsupported():h.functionUnsupported(i);if(a&&a.getConcreteTree(e,r,n).valueType===d.Distribution)throw h.distributionAsFunction(a._symbol);if(1==this.args.length){var o=[w(this._symbol),this.args[0]];return D(o).getConcreteTree(e,r,n)}if(a)throw h.variableAsFunction(i);throw h.functionNotDefined(i)}var s=t(this.args,e,r,n);return a.getConcreteInvocationTree(e,r,s,i,n)},f.DotAccess.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n,i,o=this.args[0],s=this.args[1];if(s instanceof f.Identifier)return"x"===s._symbol?f.OrderedPairAccess([o,f.Constant(1)]).getConcreteTree(e,t,r):"y"===s._symbol?f.OrderedPairAccess([o,f.Constant(2)]).getConcreteTree(e,t,r):(i=m.latexToIdentifier(s.getInputString()),n=[o],a(s._symbol,i,n,e,t,r));if(s instanceof f.SeededFunctionCall)return i=m.latexToIdentifier(s._identifier.getInputString()),n=[s.seed,o].concat(s.args.slice(1)),a(s._symbol,i,n,e,t,r);if(s instanceof f.FunctionCall)return"x"===s._symbol&&1===s.args.length?f.Multiply([f.OrderedPairAccess([o,f.Constant(1)]),s.args[0]]).getConcreteTree(e,t,r):"y"===s._symbol&&1===s.args.length?f.Multiply([f.OrderedPairAccess([o,f.Constant(2)]),s.args[0]]).getConcreteTree(e,t,r):(i=m.latexToIdentifier(s._identifier.getInputString()),n=[o].concat(s.args),a(s._symbol,i,n,e,t,r));throw h.unexpectedSymbol(".")},f.DotAccessExponent.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):"FunctionCall"!==this.args[1].type||1!==this.args[1].args.length||t[this.args[1]._symbol]&&t[this.args[1]._symbol].isFunction?f.Exponent([f.DotAccess([this.args[0],this.args[1]]),this.args[2]]).getConcreteTree(e,t,r):f.Multiply([f.DotAccess([this.args[0],f.Identifier(this.args[1]._symbol)]),f.Exponent([this.args[1].args[0],this.args[2]])]).getConcreteTree(e,t,r)},f.FunctionExponent.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.args[0]._symbol;return t[n]&&t[n].isFunction?f.Exponent([f.FunctionCall(n,[this.args[1]]),this.args[2]]).getConcreteTree(e,t,r):D([this.args[0],f.Exponent([this.args[1],this.args[2]])]).getConcreteTree(e,t,r)},f.FunctionFactorial.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.args[0]._symbol;return t[n]&&t[n].isFunction?f.FunctionCall("\\\\factorial",[f.FunctionCall(n,[this.args[1]])]).getConcreteTree(e,t,r):D([this.args[0],f.FunctionCall("\\\\factorial",[this.args[1]])]).getConcreteTree(e,t,r)},f.FunctionDefinition.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);for(var n=0;n<this._argSymbols.length;n++){if(t[this._argSymbols[n]])throw h.parameterAlreadyDefined(this._argSymbols[n]);if(this._argSymbols[n]===this._symbol)throw h.parameterAlreadyDefined(this._argSymbols[n])}return this._expression.getConcreteTree(e,t,r)},f.Image.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.center.tryGetConcreteTree(e,t,r),i=this.radianAngle.tryGetConcreteTree(e,t,r),a=this.width.tryGetConcreteTree(e,t,r),s=this.height.tryGetConcreteTree(e,t,r),u=this.opacity.tryGetConcreteTree(e,t,r),c=[d.Point,d.ListOfPoint],l=[d.Number,d.ListOfNumber];return n=o(n,c),i=o(i,l),a=o(a,l),s=o(s,l),u=o(u,l),f.Image({center:n,radianAngle:i,width:a,height:s,opacity:u},this.moveStrategy)},f.Slider.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this._expression.getConcreteTree(e,t,r),i=this.sliderMin&&this.sliderMin.tryGetConcreteTree(e,t,r),a=this.sliderMax&&this.sliderMax.tryGetConcreteTree(e,t,r),o=this.sliderStep&&this.sliderStep.tryGetConcreteTree(e,t,r),u={exportedSymbol:this._symbol,errors:{},values:{},valids:{},missingVars:[],errMsg:void 0};if(s("min",i,u),s("max",a,u),s("step",o,u),o&&u.valids.step&&(0===u.values.step?delete u.values.step:u.values.step=Math.abs(u.values.step)),u.errors.cycle?n=h.sliderLimitReferencesExport(u.exportedSymbol):(u.errors.min||!u.valids.min?u.errMsg=h.sliderMinInvalid():u.errors.max||!u.valids.max?u.errMsg=h.sliderMaxInvalid():!u.errors.step&&u.valids.step||(u.errMsg=h.sliderStepInvalid()),u.values.min>u.values.max&&(u.valids.min=!1,u.valids.max=!1,u.errMsg||(u.errMsg=h.sliderMaxLessThanMin()))),n.isConstant){var c=I.constrainSliderValueLikeEvaluator({target:n.asValue(),hardMin:u.values.min,hardMax:u.values.max,step:u.values.step}),l=g.fromDecimalString(c.toString()),p=isFinite(g.asFloat(l))?l:c;n=M(p)}return n.sliderInfo=u,n},f.Integral.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(t[this._differential._symbol])throw h.shadowedIntegrationVariable(this._differential._symbol);var n=this.args[0],i=this.args[1].getConcreteTree(e,t),a=this.args[2].getConcreteTree(e,t);if(i.dependsOn(n._symbol)||a.dependsOn(n._symbol))throw h.badIntegralBoundDependency(n._symbol);var o=Object.create(t);return o[this._differential._symbol]=T(this._differential._symbol),S.prototype._getConcreteTree.call(this,e,o,r)},f.ListAccess.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.index.getConcreteTree(e,t,r),i=this.list.getConcreteTree(e,t,r),a=[i,n];return this.typeCheck(e,a),this._constantCollapsedCopy(e,a)},f.List.prototype._getConcreteTree=function(e,r,n){if(n&&n[this.type])return n[this.type].call(this,e,r,n);var i=t(this.args,e,r,n);return this.typeCheck(e,i),new this.constructor(i)},f.ParametrizedReducerFunction.prototype._getConcreteTree=function(e,r,n){if(n&&n[this.type])return n[this.type].call(this,e,r,n);if(this.args[0]instanceof f.List&&this.args[0].valueType===d.ListOfDistribution)return f.List(f.List.mapArgs(e,[this.args[0]],function(t){return this.copyWithArgs([t[0],this.args[1]]).getConcreteTree(e,r,n)}.bind(this)));if(this.args[0]instanceof f.Distribution)return this.args[0][this._symbol](this.args.slice(1)).getConcreteTree(e,r,n);var i=t(this.args,e,r,n);switch(c([i[1]],this.getDummyDependencies())){case"none":
return this.typeCheck(e,i),this._constantCollapsedCopy(e,i);case"list":return f.List(f.List.mapArgs(e,[i[1]],function(t){return t=[i[0]].concat(t),this.typeCheck(e,t),this._constantCollapsedCopy(e,t)}.bind(this)));case"broadcast":var a=l([i[1]]),o=[i[0]].concat(a.concreteArgs);return this.typeCheck(e,o),f.Broadcast(a.replacedSymbols,[this.copyWithArgs(o)].concat(a.replacedArgs))}},f.Prime.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.args[0],i=n.args[0];if(!t[n._symbol])throw h.functionNotDefined(n._symbol);var a,o=this.tmpVar();if("logbase"===n._symbol){if(2!==n.args.length)throw h.primedFunctionArity();a=[w(o),n.args[1]]}else{if(1!==n.args.length)throw h.primedFunctionArity();a=[w(o)]}for(var s=n.copyWithArgs(a).getConcreteTree(e,t,r),u=0;u<this.order;u++)s=s.takeDerivative(o);var c={};return c[o]=i,s.substitute(c).getConcreteTree(e,t,r)},f.Range.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.beginning.getConcreteTree(e,t,r),i=this.end.getConcreteTree(e,t,r);if(n.getDependencies().length)throw h.variableRange(n.getDependencies());if(i.getDependencies().length)throw h.variableRange(i.getDependencies());if(!n.isList||!i.isList)throw new Error("Programming Error: range bounds must be List nodes.");var a,o,s=n.elementAt(e,0).asValue(),c=i.elementAt(e,i.length-1).asValue(),l=c-s;if(1===n.length)a=l>=0?1:-1;else{var p=n.elementAt(e,1).asValue();o=b(s,p),a=n.elementAt(e,1).asValue()-s}var f=Math.round(l/a)+1;if(!isFinite(f)||f<n.length||f<i.length)throw h.nonArithmeticRange();var d,m,y=[];if(o){var g=o.nstart;for(d=0;d<f;d++)u(e,n,i,d,f,g/o.lcm),y.push(M(v(g,o.lcm))),g+=o.nstep}else for(y.push(M(s)),d=1;d<f;d++)m=s+d*a,u(e,n,i,d,f,m),y.push(M(v(m,1)));return x(y)},f.ReducerFunction.prototype._getConcreteTree=function(e,r,n){if(n&&n[this.type])return n[this.type].call(this,e,r,n);if(this.args[0]instanceof f.List&&this.args[0].valueType===d.ListOfDistribution&&"length"!==this._symbol)return f.List(f.List.mapArgs(e,this.args,function(t){return this.copyWithArgs(t).getConcreteTree(e,r,n)}.bind(this)));if(this.args[0]instanceof f.Distribution&&"length"!==this._symbol)return this.args[0][this._symbol]().getConcreteTree(e,r,n);var i=t(this.args,e,r,n);if(1===this.args.length)return i=[f.List.wrap(i[0])],this.typeCheck(e,i),this._constantCollapsedCopy(e,i);switch(c(i,this.getDummyDependencies())){case"none":return i=[f.List(i)],this.typeCheck(e,i),this._constantCollapsedCopy(e,i);case"list":return f.List(f.List.mapArgs(e,i,function(t){return t=[f.List(t)],this.typeCheck(e,t),this._constantCollapsedCopy(e,t)}.bind(this)));case"broadcast":var a=l(i);return i=[f.List(a.concreteArgs)],this.typeCheck(e,i),f.Broadcast(a.replacedSymbols,[this.copyWithArgs(i)].concat(a.replacedArgs))}},f.RepeatedOperator.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(t[this._index._symbol])throw h.shadowedIndex(this._index._symbol);var n=this.args[1].getConcreteTree(e,t),i=this.args[2].getConcreteTree(e,t);if(n.dependsOn(this._index._symbol)||i.dependsOn(this._index._symbol))throw this instanceof f.Sum?h.badSumBoundDependency(this._index._symbol):this instanceof f.Product?h.badProductBoundDependency(this._index._symbol):h.parseError();var a=Object.create(t);return a[this._index._symbol]=T(this._index._symbol),S.prototype._getConcreteTree.call(this,e,a,r)};var C=function(e,r,n){if(n&&n[this.type])return n[this.type].call(this,e,r,n);var i=t(this.args,e,r,n);switch(c(i,this.getDummyDependencies())){case"none":return this.typeCheck(e,i),this._constantCollapsedCopy(e,i);case"list":return f.List(f.List.mapArgs(e,i,function(t){return this.typeCheck(e,t),this._constantCollapsedCopy(e,t)}.bind(this)));case"broadcast":var a=l(i);return this.typeCheck(e,a.concreteArgs),f.Broadcast(a.replacedSymbols,[this.copyWithArgs(a.concreteArgs)].concat(a.replacedArgs))}};f.ScalarExpression.prototype._getConcreteTree=C,f.Object3D.prototype._getConcreteTree=C,f.Regression.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):new this.constructor(this._lhs,this._rhs)},f.Polygon.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.args.map(function(r){return r.getConcreteTree(e,t)});return this.typeCheck(e,n),1===n.length&&n[0].valueType===d.ListOfPoint?new this.constructor(n):n.every(function(e){return e.valueType===d.Point})?new this.constructor([x(n)]):2===n.length?new this.constructor([_(this.args).getConcreteTree(e,t)]):h.parseError()},f.Histogram.prototype._getConcreteTree=p,f.DotPlot.prototype._getConcreteTree=p,f.BoxPlot.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(!t[this._symbol])throw h.functionUnsupported(this._symbol);var n=this.args.map(function(r){return r.getConcreteTree(e,t)});return this.typeCheck(e,n),1===n.length&&n[0].valueType===d.ListOfNumber?new this.constructor(n):h.parseError()},f.TTest.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(!t[this._symbol])throw h.functionUnsupported(this._symbol);var n=this.args.map(function(r){return r.getConcreteTree(e,t)});return this.typeCheck(e,n),new this.constructor(n)},f.IndependentTTest.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(!t[this._symbol])throw h.functionUnsupported(this._symbol);var n=this.args.map(function(r){return r.getConcreteTree(e,t)});return this.typeCheck(e,n),new this.constructor(n)},f.SolvedEquation.prototype._getConcreteTree=function(e,t,r){return r&&r[this.type]?r[this.type].call(this,e,t,r):new this.constructor(this._symbol,this._expression.getConcreteTree(e,t,r))},f.Table.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);for(var n=[],i=Object.create(t),a=0;a<this.columns.length;a++){var o=this.columns[a].getConcreteTree(e,i,t,r);o.isIndependent&&this.columns[a].exportToLocal(o,i),n.push(o)}return new this.constructor(n)},f.TableColumn.prototype._getConcreteTree=function(e,t,r){var n,i,a=this.header.getConcreteTree(e,t);if(a.isFreeVariable){n=[];for(var o=0;o<this.values.length;o++)if(this.values[o].tableError())n.push(h.invalidTableEntry(this.values[o].tableError()));else{var s=this.values[o].tryGetConcreteTree(e,t);s.isError?n.push(s):s.tableError()?n.push(h.invalidTableEntry(s.tableError())):s.valueType===d.Number?n.push(s):n.push(h.tableEntryTypeError([d.prettyPrint(s.valueType)]))}return i=new this.constructor(a,this.length,n),i.isIndependent=!0,i}if(a.isConstant){for(var u=[],c=0;c<this.length;c++)u.push(a);n=u}else n=a.isList?a.args.slice():[];return a=this.header.getConcreteTree(e,r),a.isError||a.valueType===d.Number||a.valueType===d.ListOfNumber||(a=h.tableHeaderTypeError([d.prettyPrint(a.valueType)])),i=new this.constructor(a,this.length,n)},f.BuiltInFunction.pdf.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);if(this.args[0]instanceof x)return f.List(f.List.mapArgs(e,this.args,function(n){return this.copyWithArgs(n).getConcreteTree(e,t,r)}.bind(this)));if(this.typeCheck(e,this.args),!(this.args[0]instanceof f.Distribution))throw h.functionTypeError(this._symbol,[d.prettyPrint(this.args[0].valueType)]);return this.args[0].pdf([this.args[1]]).getConcreteTree(e,t,r)},f.BuiltInFunction.cdf.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.args;if(2===n.length&&(n=[n[0],f.Constant(-1/0),n[1]]),n[0]instanceof f.List)return f.List(f.List.mapArgs(e,n,function(n){return this.copyWithArgs(n).getConcreteTree(e,t,r)}.bind(this)));if(this.typeCheck(e,n),!(n[0]instanceof f.Distribution))throw h.functionTypeError(this._symbol,[d.prettyPrint(n[0].valueType)]);return n[0].cdf(n.slice(1)).getConcreteTree(e,t,r)},f.BuiltInFunction.random.prototype._getConcreteTree=function(e,t,r){if(r&&r[this.type])return r[this.type].call(this,e,t,r);var n=this.args;(n.length<=1||!(n[1]instanceof f.Distribution)&&!(n[1]instanceof f.List)&&n.length<4)&&(n=[n[0],P.uniformdist([])].concat(n.slice(1)));var i=n[0],a=n[1],o=n[2],s=n[3];if(this.typeCheck(e,n.slice(1)),o&&o.getDependencies().length)throw h.variableSampleSize(o.getDependencies());if(s&&s.getDependencies().length)throw h.variableSeed(s.getDependencies());if(s&&(i=E("us",[i,s])),o){var u=o.asValue();if(u<1)throw h.badSampleSize();u=Math.round(u);for(var c,l=[],p=0;p<u;p++)c=E("lc",[i,M(v(p,1))]),l.push(a.sample([c]).getConcreteTree(e,t,r));return x(l)}return a.sample([i]).getConcreteTree(e,t,r)}}),define("core/math/features/getValueType",["require","parsenodes","core/math/types"],function(e){"use strict";function t(){return s.Number}function r(){return s.Bool}function n(){return s.Point}function i(){return s.Distribution}function a(){return s.Any}var o=e("parsenodes"),s=e("core/math/types"),u={Add:t,Multiply:t,Divide:t,Subtract:t,Exponent:t,Negative:t,And:r,Piecewise:function(e){return e[1].valueType},BaseComparator:r,RepeatedOperator:t,List:function(e){if(0===e.length)return s.ListOfAny;for(var t=e[0].valueType,r=1;r<e.length;r++)if(e[r].valueType!==t)return s.ListOfAny;return s.hasListType(t)?s.listType(t):s.ListOfAny},ListAccess:function(e){return s.elementType(e[0].valueType)},Broadcast:function(e){return s.listType(e[0].valueType)},Seed:function(e){return s.SeedType},ExtendSeed:function(e){return s.SeedType},OrderedPairAccess:t,OrderedPair:n,NativeFunction:t,ReducerFunction:t,DoubleReducerFunction:t,ParametrizedReducerFunction:t,Distribution:i,DummyIndex:t,FreeVariable:t,TypedFunction:function(){return this._outputType},Derivative:t,Integral:t,Identifier:a};for(var c in u)o[c].prototype._getValueType=u[c]}),define("core/math/features/typeCheck",["require","parsenodes","core/math/types","core/math/errormsg"],function(e){"use strict";function t(e){for(var t=[],r=0;r<e.length;r++)t.push(a.prettyPrint(e[r].valueType));return t}function r(e,r){return function(n,i){for(var a=0;a<i.length;a++)if(i[a].valueType!==e[a])throw r(t(i))}}function n(e,t){var r=t.length;if(r<2)throw o.methodRequiresList(this._symbol);if(t[0].valueType!==a.ListOfNumber)throw o.methodRequiresList(this._symbol);if(r>2)throw o.tooManyArguments(this._symbol,2)}var i=e("parsenodes"),a=e("core/math/types"),o=e("core/math/errormsg"),s={Add:r([a.Number,a.Number],o.addTypeError),Multiply:r([a.Number,a.Number],o.multiplyTypeError),Divide:r([a.Number,a.Number],o.divideTypeError),Subtract:r([a.Number,a.Number],o.subtractTypeError),Exponent:r([a.Number,a.Number],o.exponentTypeError),Negative:r([a.Number],o.negativeTypeError),BaseComparator:r([a.Number,a.Number],o.comparatorTypeError),And:r([a.Bool,a.Bool],o.andTypeError),ExtendSeed:function(e,t){if(2!==t.length||t[0].valueType!==a.SeedType||t[1].valueType!==a.SeedType&&t[1].valueType!==a.Number)throw o.functionUnsupported("random")},List:function(e,t){if(0!==t.length){var r=t[0].valueType;if(!a.hasListType(r))throw o.listTypeError([a.prettyPrint(r)]);for(var n=0;n<t.length;n++){var i=t[n].valueType;if(!a.hasListType(i))throw o.listTypeError([a.prettyPrint(i)]);if(i!==r)throw o.heterogeneousList()}}},Broadcast:function(e,t){},Distribution:function(e,t){},OrderedPair:function(e,t){if(0===t.length)throw o.emptyParen();if(e.dimensions&&t.length!==e.dimensions())throw o.badTupleDimensions(e.dimensions());for(var r=0;r<t.length;r++){var n=t[r].valueType;if(n!==a.Number)throw o.pointTypeError(a.prettyPrint(n))}},Piecewise:function(e,r){if(r[0].valueType!==a.Bool)throw o.piecewiseConditionTypeError(t(r));if(r[1].valueType!==a.Number)throw o.piecewiseBranchTypeError([a.prettyPrint(r[1].valueType)]);if(r[2].valueType!==a.Number)throw o.piecewiseBranchTypeError([a.prettyPrint(r[2].valueType)])},ListAccess:function(e,r){if(!a.isList(r[0].valueType)||r[1].valueType!==a.Number)throw o.indexTypeError(t(r))},OrderedPairAccess:r([a.Point,a.Number],o.orderedPairAccessTypeError),Sum:function(e,t){if(t[1].valueType!==a.Number)throw o.sumLowerBoundTypeError([a.prettyPrint(t[1].valueType)]);if(t[2].valueType!==a.Number)throw o.sumUpperBoundTypeError([a.prettyPrint(t[2].valueType)]);if(t[3].valueType!==a.Number)throw o.sumArgumentTypeError([a.prettyPrint(t[3].valueType)])},Product:function(e,t){if(t[1].valueType!==a.Number)throw o.productLowerBoundTypeError([a.prettyPrint(t[1].valueType)]);if(t[2].valueType!==a.Number)throw o.productUpperBoundTypeError([a.prettyPrint(t[2].valueType)]);if(t[3].valueType!==a.Number)throw o.productArgumentTypeError([a.prettyPrint(t[3].valueType)])},Integral:function(e,t){if(t[1].valueType!==a.Number)throw o.integralLowerBoundTypeError([a.prettyPrint(t[1].valueType)]);if(t[2].valueType!==a.Number)throw o.integralUpperBoundTypeError([a.prettyPrint(t[2].valueType)]);if(t[3].valueType!==a.Number)throw o.integralArgumentTypeError([a.prettyPrint(t[3].valueType)])},NativeFunction:function(e,r){var n=this._errorSymbol,i=r.length,s="logbase"===this._symbol?1:0;if(i<this._requiredArity)throw o.wrongArity(n,this._requiredArity-s,i-s);if(i>this._maxArity)throw o.wrongArity(n,this._maxArity-s,i-s);for(var u=0;u<r.length;u++){if(r[u].valueType!==a.Number)throw o.functionTypeError(n,t(r))}},ReducerFunction:function(e,r){if(r[0].valueType!==a.ListOfNumber)throw o.functionTypeError(this._symbol,t(r))},DoubleReducerFunction:function(e,r){if(!a.isList(r[0].valueType)||!a.isList(r[1].valueType))throw o.nonListDoubleReducer(this._symbol);if(r[0].valueType!==a.ListOfNumber||r[1].valueType!==a.ListOfNumber)throw o.functionTypeError(this._symbol,t(r))},ParametrizedReducerFunction:function(e,r){if(r[0].valueType!==a.ListOfNumber)throw o.nonListParametrizedReducer(this._symbol);if(r[1].valueType!==a.Number)throw o.functionTypeError(this._symbol,t(r))},TypedFunction:function(e,r){var n=this._errorSymbol,i=r.length,a="pdf"===this._symbol,s="cdf"===this._symbol;if(i<this._requiredArity){if(a)throw o.pdfWrongArity();if(s)throw o.cdfRequiresArguments();throw o.wrongArity(n,this._requiredArity,i)}if(i>this._maxArity){if(a)throw o.pdfWrongArity();if(s)throw o.cdfTooManyArguments();throw o.wrongArity(n,this._maxArity,i)}for(var u=0;u<r.length;u++){var c=r[u].valueType,l=this._inputTypes[u],p=Array.isArray(l);if(!p&&c!==l||p&&-1===l.indexOf(c))throw o.functionTypeError(n,t(r))}},Derivative:function(e,r){if(r[0].valueType!==a.Number&&r[0].valueType!==a.ListOfNumber)throw o.derivativeTypeError(t(r))},Regression:function(e,r){if(r[0].valueType!==a.Number&&r[0].valueType!==a.ListOfNumber||r[1].valueType!==a.Number&&r[1].valueType!==a.ListOfNumber)throw o.regressionTypeError(t(r))},Polygon:function(e,r){if(1===r.length&&r[0].valueType!==a.ListOfPoint)throw o.polygonListTypeError(t(r));if(2===r.length&&r[0].valueType===a.Number&&r[1].valueType===a.Number)throw o.polygonTwoNumbersError();if(r.length>2&&!r.every(function(e){return e.valueType===a.Point}))throw o.polygonPointArgsError()},Object3D:function(e,t){if(t.length<3)throw o.wrongArity(this._symbol,3,t.length)},Histogram:n,DotPlot:n,BoxPlot:function(e,t){var r=t.length,n=t[0];if(0===r)throw o.methodRequiresList(this._symbol);if(n.valueType!==a.ListOfNumber)throw o.methodRequiresList(this._symbol);if(r>1)throw o.methodRequiresList(this._symbol)},TTest:function(e,r){var n=this._symbol;if(0===r.length)throw o.methodRequiresList(n);if(r[0].valueType!==a.ListOfNumber)throw o.methodRequiresList(n);if(r.length>2)throw o.tooManyArguments(n,2);if(r[0].length<2)throw o.ttestListTooShort(n);if(r[1]&&r[1].valueType!==a.Number)throw o.functionTypeError(n,t(r))},IndependentTTest:function(e,r){var n=this._symbol;if(2!==r.length)throw o.wrongDoubleReducerArity(n);if(!a.isList(r[0].valueType)||!a.isList(r[1].valueType))throw o.nonListDoubleReducer(n);if(r[0].valueType!==a.ListOfNumber||r[1].valueType!==a.ListOfNumber)throw o.functionTypeError(n,t(r));if(r[0].args.length<2||r[1].args.length<2)throw o.ttestListTooShort("ittest")},Stats:function(e,t){var r=t.length,n=t[0];if(0===r)throw o.methodRequiresList(this._symbol);if(n.valueType!==a.ListOfNumber)throw o.methodRequiresList(this._symbol);if(r>1)throw o.methodRequiresList(this._symbol)}};for(var u in s)i[u].prototype.typeCheck=s[u];i.BuiltInFunction.random.prototype.typeCheck=function(e,t){var r=t.length,n=t[0],s=t[1],u=t[2];if(r>3)throw o.randomArity();if(!n)throw o.randomArity();if(!(n instanceof i.Distribution||n instanceof i.List))throw o.randomArity();if(n instanceof i.Distribution&&n.args&&(n.args[0]instanceof i.List||n.args[1]instanceof i.List))throw o.randomFromBroadcastDistribution();if(s&&s.valueType!==a.Number)throw o.randomArity();if(u&&u.valueType!==a.Number)throw o.randomArity()},i.BuiltInFunction.length.prototype.typeCheck=function(e,t){if(1!==t.length||!a.isList(t[0].valueType))throw o.parseError()}}),define("core/math/features/repr",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes"),r=function(e,t,r){r=r||0;var n=Array(r+1).join("  "),i=n+"  ";return"[\\n"+i+e.map(function(e){return e.repr(t,r+1)}).join(",\\n"+i)+"\\n"+n+"]"},n=function(e,t){return""+(t=t||"")+e};t.Expression.prototype.repr=function(e,t){return n(this.type,e)+"("+r(this.args,e,t)+")"},t.DoubleInequality.prototype.repr=function(e,t){t=t||0;var r=Array(t+1).join("  "),i=r+"  ";return n(this.type,e)+"([\\n"+i+this.args[0].repr(e,t+1)+",\\n"+i+"'"+this.args[1]+"',\\n"+i+this.args[2].repr(e,t+1)+",\\n"+i+"'"+this.args[3]+"',\\n"+i+this.args[4].repr(e,t+1)+"\\n"+r+"])"},t.Identifier.prototype.repr=t.FreeVariable.prototype.repr=function(e){return n(this.type,e)+"('"+this._symbol+"')"},t.Constant.prototype.repr=function(e){return n(this.type,e)+"("+this.asValue()+")"},t.ExtendSeed.prototype.repr=function(e,t){return n(this.type,e)+"('"+this.tag+"', "+r(this.args,e,t)+")"},t.Seed.prototype.repr=function(e){return n(this.type,e)+"("+this.asValue()+")"},t.FunctionCall.prototype.repr=function(e,t){return n(this.type,e)+"('"+this._symbol+"', "+r(this.args,e,t)+")"},t.Assignment.prototype.repr=function(e,r){return n(this.type,e)+"("+t.Identifier(this._symbol).repr(e,r)+", "+this._expression.repr(e,r)+")"},t.Regression.prototype.repr=t.Equation.prototype.repr=function(e,t){return n(this.type,e)+"("+this._lhs.repr(e,t)+", "+this._rhs.repr(e,t)+")"},t.FunctionDefinition.prototype.repr=function(e,i){return n(this.type,e)+"("+t.Identifier(this._symbol).repr(e,i)+", "+r(this._argSymbols.map(function(e){return t.Identifier(e)}),e,i)+", "+this._expression.repr(e,i)+")"},t.Error.prototype.repr=function(e,t){return n(this.type,e)+"('"+this._msg+"')"},t.Derivative.prototype.repr=function(e,t){return n(this.type,e)+"('"+this._symbol+"', "+r(this.args,e,t)+")"},t.SolvedEquation.prototype.repr=function(e,t){return n(this.type,e)+"('"+this._symbol+"', "+this._expression.repr(e,t)+")"},t.OptimizedRegression.prototype.repr=function(e,t){return n(this.type,e)+"("+JSON.stringify(this.parameters)+", "+JSON.stringify(this.residuals)+", "+JSON.stringify(this.statistics)+", "+this.model.repr(e,t+1)+", "+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode})+")"},t.Table.prototype.repr=function(e,t){return n(this.type,e)+"("+r(this.columns,e,t)+")"},t.TableColumn.prototype.repr=function(e,t){return n(this.type,e)+"("+this.header.repr(e,t)+", "+this.length+", "+r(this.values,e,t)+")"},t.Image.prototype.repr=function(e,t){var r=Array(t+1).join("  "),i=r+"  ";return n(this.type,e)+"({\\n"+i+"center: "+this.center.repr(e,t+1)+",\\n"+i+"radianAngle: "+this.radianAngle.repr(e,t+1)+",\\n"+i+"width: "+this.width.repr(e,t+1)+",\\n"+i+"height: "+this.height.repr(e,t+1)+"},\\n"+i+"opacity: "+this.opacity.repr(e,t+1)+",\\n"+i+JSON.stringify(this.moveStrategy)+"\\n"+r+")"},t.Slider.prototype.repr=function(e,t){var r=Array(t+1).join("  "),i=r+"  ";return n(this.type,e)+"({\\n"+i+"sliderAssignment: "+this.sliderAssignment.repr(e,t+1)+",\\n"+i+"sliderMin: "+(this.sliderMin&&this.sliderMin.repr(e,t+1))+",\\n"+i+"sliderMax: "+(this.sliderMax&&this.sliderMax.repr(e,t+1))+",\\n"+i+"sliderStep: "+(this.sliderStep&&this.sliderStep.repr(e,t+1))+"},\\n"+r+")"},t.Broadcast.prototype.repr=function(e,t){return n(this.type,e)+"(['"+this._replacedSymbols.join("', ")+"'], "+r(this.args,e,t)+")"}}),define("core/math/features/scalarEvalExpression",["require","parsenodes","core/math/functions"],function(e){"use strict";var t=e("parsenodes"),r=e("core/math/functions"),n={Add:function(e){return"("+e.join("+")+")"},Multiply:function(e){return"("+e.join("*")+")"},Divide:function(e){return"("+e.join("/")+")"},Subtract:function(e){return"("+e.join("-")+")"},Exponent:function(e){return"BuiltIn.pow("+e.join(",")+")"},RawExponent:function(e){return"Math.pow("+e.join(",")+")"},Negative:function(e){return"(-"+e[0]+")"},And:function(e){return e.join("&&")},Piecewise:function(e){return"("+e[0]+"?"+e[1]+":"+e[2]+")"}},i={Add:2,Multiply:2,Divide:2,Subtract:2,Exponent:2,RawExponent:2,Negative:1,And:2,Piecewise:3};for(var a in n){var o=t[a].prototype;o.scalarEvalExpression=n[a],o.evaluate=r.createEvaluateFunction(o.scalarEvalExpression,i[a])}}),define("core/math/reconstitute-node",["require","parsenodes","core/math/types"],function(e){"use strict";function t(e,i){if(n.isList(e)){for(var a=[],o=0;o<i.length;o++)a.push(t(n.elementType(e),i[o]));var s=r.List(a);return s.valueType=e,s}switch(e){case n.Number:case n.Bool:return r.Constant(i);case n.Point:return r.OrderedPair([r.Constant(i[0]),r.Constant(i[1])]);default:throw new Error("Cannot reconstitute value of a "+n.prettyPrint(e)+".")}}var r=e("parsenodes"),n=e("core/math/types");return t}),define("core/math/features/constantcollapsedcopy",["require","parsenodes","core/math/reconstitute-node","core/math/maybe-rational","core/math/errormsg"],function(e){"use strict";function t(e){if(!e.isConstant)return!1;var t=e.asValue();return"number"==typeof t&&!isFinite(t)}var r=e("parsenodes"),n=r.Constant,i=r.Multiply,a=r.Subtract,o=r.RawExponent,s=r.Seed,u=r.BuiltInFunction,c=e("core/math/reconstitute-node"),l=e("core/math/maybe-rational"),p=e("core/math/errormsg"),f={Expression:function(e,t){return this.copyWithArgs(t)},FreeVariable:function(e,t){return this},ScalarExpression:function(e,t){for(var r=[],i=0;i<t.length;i++){if(!t[i].isConstant&&!t[i].isString)return this.copyWithArgs(t);r.push(t[i].asValue())}return n(this.evaluate(r))},OrderedPair:function(e,t){return this.copyWithArgs(t)},Distribution:function(e,t){return this.copyWithArgs(t)},Add:function(e,t){return t[0].isConstant&&t[1].isConstant?n(l.add(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):0===t[0].asValue()?t[1]:0===t[1].asValue()?t[0]:this.copyWithArgs(t)},Multiply:function(e,t){return t[0].isConstant&&t[1].isConstant?n(l.mul(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):1===t[0].asValue()?t[1]:1===t[1].asValue()?t[0]:this.copyWithArgs(t)},Subtract:function(e,t){return t[0].isConstant&&t[1].isConstant?n(l.sub(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):0===t[0].asValue()?r.Negative([t[1]]):0===t[1].asValue()?t[0]:this.copyWithArgs(t)},Divide:function(e,t){return t[0].isConstant&&t[1].isConstant?n(l.div(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):1===t[1].asValue()?t[0]:this.copyWithArgs(t)},Exponent:function(e,t){if(t[0].isConstant&&t[1].isConstant)return n(l.pow(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue()));if(t[0].isConstant){if(t[0].asValue()===Math.E)return u.exp([t[1]]);if(t[0].asValue()>0)return o(t)}if(t[1].isConstant){var r=t[1].asValue();if(1===r)return t[0];if(r===Math.floor(r))return o(t);var a=t[1].asMaybeRationalValue();return l.isRational(a)?a.d%2==1?i([a.n%2==0?n(l.maybeRational(1,1)):u.sign([t[0]]),o([u.abs([t[0]]),t[1]])]):o(t):this.copyWithArgs(t)}return this.copyWithArgs(t)},RawExponent:function(e,t){return t[0].isConstant&&t[1].isConstant?n(l.pow(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):this.copyWithArgs(t)},Negative:function(e,t){return t[0].isConstant?n(l.neg(t[0].asMaybeRationalValue())):t[0]instanceof r.Negative?t[0].args[0]:this.copyWithArgs(t)},And:function(e,t){return t[0].isConstant&&t[1].isConstant?n(t[0].asValue()&&t[1].asValue()):t[0].isConstant&&!0===t[0]?t[1]:t[0].isConstant&&!1===t[0]?n(!1):t[1].isConstant&&!0===t[1]?t[0]:t[1].isConstant&&!1===t[1]?n(!1):this.copyWithArgs(t)},Piecewise:function(e,t){return t[0].isConstant&&!0===t[0].asValue()?t[1]:t[0].isConstant&&!1===t[0].asValue()?t[2]:this.copyWithArgs(t)},Integral:function(e,r){var o=r[0],s=r[1],u=r[2],c=r[3];if(t(s)||t(u))throw p.integralInfiniteBoundError();var l=c.getDependencies();if(s.isConstant&&u.isConstant){var f=u.asValue()-s.asValue();if(c.isConstant)return n(c.asValue()*f);if(!c.dependsOn(o._symbol))return i([c,n(f)]);if(1===l.length&&l[0]===o._symbol)return n(this.evaluate(s.asValue(),u.asValue(),c))}else if(!c.dependsOn(o._symbol))return i([c,a([u,s])]);return this.copyWithArgs(r)},ListAccess:function(e,t){return t[1].isConstant?t[0].elementAt(e,t[1].asValue()-1):this.copyWithArgs(t)},OrderedPairAccess:function(e,t){return t[1].isConstant&&t[0]instanceof r.OrderedPair?t[0].elementAt(e,t[1].asValue()-1):this.copyWithArgs(t)},Broadcast:function(e,t){var r,n=t[0].getDependencies();for(r=0;r<n.length;r++)if(-1===this._replacedSymbols.indexOf(n[r]))return this.copyWithArgs(t);for(r=1;r<t.length;r++)if(0!==t[r].getDependencies().length)return this.copyWithArgs(t);var i=t[0].getCompiledFunction(this._replacedSymbols).fn,a=t.slice(1).map(function(e){return e.asValue()}),o=[];for(r=0;r<this.length;r++){for(var s=[],u=0;u<a.length;u++)s.push(a[u][r]);o.push(i.apply(void 0,s))}return c(this.valueType,o)},ReducerFunction:function(e,t){return 0===t[0].getDependencies().length?c(this.valueType,this.evaluate([t[0].asValue()])):this.copyWithArgs(t)},DoubleReducerFunction:function(e,t){if(0===t[0].getDependencies().length&&0===t[1].getDependencies().length){var r=Math.min(t[0].length,t[1].length);return c(this.valueType,this.evaluate([t[0].asValue().slice(0,r),t[1].asValue().slice(0,r)]))}return this.copyWithArgs(t)},ParametrizedReducerFunction:function(e,t){var r=t[0],n=t[1];return n.isConstant&&0===r.getDependencies().length?c(this.valueType,this.evaluate([r.asValue(),n.asValue()])):this.copyWithArgs(t)},RepeatedOperator:function(e,r){var i=r[1],a=r[2];if(t(i)||t(a))switch(this.type){case"Sum":throw p.sumInfiniteBoundError();case"Product":throw p.productInfiniteBoundError();default:throw p.parseError()}if(i.isConstant&&a.isConstant){var o=i.asValue(),s=a.asValue(),u=r[3];if(u.isConstant)return n(this.evaluateConstant([o,s,u.asValue()]));var c=u.getDependencies();if(0===c.length||1===c.length&&c[0]===r[0]._symbol)return n(this.evaluate(o,s,u))}return this.copyWithArgs(r)},ExtendSeed:function(e,t){var r=t[0],n=t[1];return 0===r.getDependencies().length&&0===n.getDependencies().length?s(r.asValue()+"::"+this.tag+n.asValue()):this.copyWithArgs(t)}};for(var h in f)r[h].prototype._constantCollapsedCopy=f[h];u.mod.prototype._constantCollapsedCopy=function(e,t){return t[0].isConstant&&t[1].isConstant?n(l.mod(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):this.copyWithArgs(t)},u.sqrt.prototype._constantCollapsedCopy=function(e,t){return t[0].isConstant?n(l.sqrt(t[0].asMaybeRationalValue())):this.copyWithArgs(t)},u.nthroot.prototype._constantCollapsedCopy=function(e,t){return t[0].isConstant&&t[1].isConstant?n(l.nthroot(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):this.copyWithArgs(t)},u.abs.prototype._constantCollapsedCopy=function(e,t){return t[0].isConstant?n(l.abs(t[0].asMaybeRationalValue())):this.copyWithArgs(t)},u.total.prototype._constantCollapsedCopy=function(e,t){if(!t[0].isList)return this.copyWithArgs(t);for(var r=t[0].args,i=0;i<r.length;i++)if(!r[i].isConstant)return this.copyWithArgs(t);return n(l.total(t[0].asMaybeRationalValue()))},u.distance.prototype._constantCollapsedCopy=function(e,t){return 0===t[0].getDependencies().length&&0===t[1].getDependencies().length?n(this.evaluate([t[0].asArray(),t[1].asArray()])):this.copyWithArgs(t)},u.midpoint.prototype._constantCollapsedCopy=function(e,t){if(0===t[0].getDependencies().length&&0===t[1].getDependencies().length){var i=this.evaluate([t[0].asArray(),t[1].asArray()]);return r.OrderedPair([n(i[0]),n(i[1])])}return this.copyWithArgs(t)}}),define("core/math/features/polynomialorder",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes"),r={Expression:"this.dependsOn(symbol) ? Infinity : 0",FreeVariable:"(symbol === this._symbol ? 1 : 0)",Constant:"0",Add:"Math.max(order0, order1)",Subtract:"Math.max(order0, order1)",Multiply:"order0 + order1",Negative:"order0",Divide:"order1 > 0 ? Infinity : order0"};for(var n in r){var i=r[n];t[n].prototype.polynomialOrder=function(e){return e=e.replace("order0","this.args[0].polynomialOrder(symbol)"),e=e.replace("order1","this.args[1].polynomialOrder(symbol)"),new Function(["symbol"],"return "+e)}(i)}t.Exponent.prototype.polynomialOrder=function(e){var t=this.args[0].polynomialOrder(e),r=this.args[1].polynomialOrder(e);if(0===t&&0===r)return 0;var n=this.args[1];return n.isConstant&&n.asValue()===Math.round(n.asValue())&&n.asValue()>0?t*n.asValue():1/0},t.Piecewise.prototype.polynomialOrder=function(e){return this.dependsOn(e)?this.args[2].isConstant&&this.args[2].isNaN()?this.args[1].polynomialOrder(e):1/0:0},t.List.prototype.polynomialOrder=function(e){return 1/0}}),define("core/math/features/polynomialcoefficients",["require","parsenodes","core/math/maybe-rational"],function(e){"use strict";var t=e("parsenodes"),r=e("core/math/maybe-rational").maybeRational,n=t.Constant(r(0,1)),i=t.Constant(r(1,1));t.FreeVariable.prototype.getPolynomialCoefficients=function(e){return e===this._symbol?[n,i]:[this]},t.Constant.prototype.getPolynomialCoefficients=function(e){return[this]},t.Add.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,o=[],s=0;s<=Math.max(i,a);s++)i>=s&&a>=s?o.push(t.Add([r[s],n[s]])):o.push(i>a?r[s]:n[s]);return o},t.Subtract.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,o=[],s=0;s<=Math.max(i,a);s++)i>=s&&a>=s?o.push(t.Subtract([r[s],n[s]])):o.push(i>a?r[s]:t.Negative([n[s]]));return o},t.Negative.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=[],i=0;i<r.length;i++)n.push(t.Negative([r[i]]));return n},t.Exponent.prototype.getPolynomialCoefficients=function(e){var r=this.args[0].getPolynomialCoefficients(e),i=this.args[1].getPolynomialCoefficients(e),a=r.length-1;if(i.length-1>0)throw"can't solve for variable in exponent";if(0===a)return[t.Exponent([r[0],i[0]])];if(this.args[1].isConstant){switch(this.args[1].asValue()){case 0:return[n];case 1:return r;case 2:return t.Multiply([this.args[0],this.args[0]]).getPolynomialCoefficients(e)}}throw"Unable to compile polynomial representation"},t.Multiply.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,o=[],s=0;s<=i;s++)for(var u=0;u<=a;u++){var c=t.Multiply([r[s],n[u]]),l=o[s+u];o[s+u]=void 0===l?c:t.Add([l,c])}return o},t.Divide.prototype.getPolynomialCoefficients=function(e){var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=n.length-1,a=[];if(i>0)throw"Can't solve for variable in denominator";for(var o=0;o<r.length;o++)a.push(t.Divide([r[o],n[0]]));return a},t.Expression.prototype.getPolynomialCoefficients=function(e){if(this.dependsOn(e))throw"Unimplemented polynomialCoefficient call";return[this]},t.Piecewise.prototype.getPolynomialCoefficients=function(e){
return this.dependsOn(e)?this.args[1].getPolynomialCoefficients(e):[this]}}),define("core/math/features/extractconditions",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes");t.Expression.prototype.extractConditions=function(e,t){if(!this.dependsOn(e))return t;for(var r=0;r<this.args.length;r++){t=this.args[r].extractConditions(e,t)}return t},t.Piecewise.prototype.extractConditions=function(e,r){if(!this.dependsOn(e))return r;if(!this.args[0].dependsOn(e))return r=this.args[1].extractConditions(e,r),r=this.args[2].extractConditions(e,r);var n={};return n[e]=r,t.Piecewise([this.args[0].substitute(n),r,t.Constant(NaN)])}}),define("core/math/features/piecewiseDependsOn",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes");t.Expression.prototype.piecewiseDependsOn=function(e){if(!this.dependsOn(e))return!1;for(var t=0;t<this.args.length;t++){if(this.args[t].piecewiseDependsOn(e))return!0}return!1},t.Piecewise.prototype.piecewiseDependsOn=function(e){return this.dependsOn(e)}}),define("core/math/builtinconstants",["require","core/math/parsenode/constant","core/math/maybe-rational"],function(e){"use strict";var t=e("core/math/parsenode/constant"),r=e("core/math/maybe-rational").maybeRational;return{pi:t(Math.PI),tau:t(2*Math.PI),e:t(Math.E),trigAngleMultiplier:t(r(1,1)),infty:t(1/0)}}),define("core/math/builtinframe",["require","core/math/builtinconstants","core/math/parsenode/builtinfunction"],function(e){"use strict";var t,r=e("core/math/builtinconstants"),n=e("core/math/parsenode/builtinfunction"),i={};for(t in r)r.hasOwnProperty(t)&&(i[t]=r[t]);for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i}),define("core/math/features/bounddomain",["require","parsenodes","core/math/builtinframe","core/math/domaintypes","core/math/comparators","core/math/maybe-rational","core/math/policy"],function(e){"use strict";var t=e("parsenodes"),r=e("core/math/builtinframe"),n=e("core/math/domaintypes"),i=e("core/math/comparators").table,a=e("core/math/maybe-rational").maybeRational,o=e("core/math/policy").defaultPolicy,s=t.Constant(a(0,1));t.Base.prototype.boundDomain=function(e){return n.unknownDomain()},t.List.prototype.boundDomain=function(e){if(!this.dependsOn(e))return n.allReals();if(!this.args.length)return n.allReals();var t=this.args[0].boundDomain(e);if("known"!==t.type)return n.unknownDomain();for(var r=0;r<this.args.length;r++){var i=this.args[r].boundDomain(e);if("known"!==i.type)return n.unknownDomain();if(i.bounds[0]!==t.bounds[0]||i.bounds[1]!==t.bounds[1])return n.unknownDomain()}return t},t.Expression.prototype.boundDomain=function(e){for(var t=n.allReals(),r=0;r<this.args.length;r++)t=n.intersectDomains(t,this.args[r].boundDomain(e));return t},t.Constant.prototype.boundDomain=function(e){return this.isNaN()?n.emptyDomain():n.allReals()},t.Piecewise.prototype.boundDomain=function(e){return this.args[2].isConstant&&isNaN(this.args[2].asValue())?n.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e)):n.unknownDomain()},t.OrderedPair.prototype.boundDomain=function(e){return n.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e))},t.BaseComparator.prototype.boundDomain=function(e){if(!this.dependsOn(e))return n.allReals();if("="===this.operator)return n.unknownDomain();var t=this._difference,a=this._difference.boundDomain(e);if(t.polynomialOrder(e)>1)return n.unknownDomain();var u=t.getPolynomialCoefficients(e),c=u[1]?u[1].getConcreteTree(o,r):s,l=u[0]?u[0].getConcreteTree(o,r):s;if(!c.isConstant||!l.isConstant)return n.unknownDomain();if(isNaN(c.asValue())||isNaN(l.asValue()))return n.emptyDomain();if(0===c.asValue())return i[this.operator].inclusive?l.asValue()>=0?a:n.emptyDomain():l.asValue()>0?a:n.emptyDomain();var p=-l.asValue()/c.asValue(),f=c.asValue()<0?[-1/0,p]:[p,1/0];return n.intersectDomains(a,n.knownDomain(f))}}),define("core/math/policyGraphing",["require","exports","./builtinframe","core/types/graphmode"],function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.dimensions=function(){return 2},e.prototype.assignmentForbidden=function(e){return"x"===e||"y"===e||"theta"===e||"tmp"===e.slice(0,3)||r.hasOwnProperty(e)},e.prototype.isValidSlider=function(e){return"x"===e||"y"===e||"ans"!==e.slice(0,3)&&!this.assignmentForbidden(e)},e.prototype.sliderVariables=function(e){var t=this;return-1!==e.indexOf("theta")&&(e=e.filter(function(e){return"r"!==e})),e.filter(function(e){return!t.assignmentForbidden(e)&&"ans"!==e.slice(0,3)})},e.prototype.graphingEnabled=function(){return!0},e.prototype.ansEnabled=function(){return!1},e.prototype.validRegressionParameter=function(e){return"x"!==e&&"y"!==e},e.prototype.validLHS=function(e){return"theta"!==e},e.prototype.unplottablePolarFunction=function(e,t){return"theta"===e&&-1!==t.indexOf("r")},e.prototype.validDoubleInequalitySymbol=function(e){return"x"===e||"y"===e},e.prototype.validDoubleInequalityVariables=function(e){return!(e.length>2)&&e.every(this.validDoubleInequalitySymbol)},e.prototype.validExpressionVariables=function(e){return 1===e.length&&"x"===e[0]},e.prototype.validSolvedVariable=function(e){return"x"===e||"y"===e||"r"===e},e.prototype.validImplicitVariables=function(e){switch(e.length){case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return"x"===e[0]&&"y"===e[1]||"y"===e[0]&&"x"===e[1]||"r"===e[0]&&"theta"===e[1]||"theta"===e[0]&&"r"===e[1];default:return!1}},e.prototype.graphableListVariables=function(e,t){return"x"===e||"y"===e||"r"===e||"x"===t||"y"===t},e.prototype.validParametricVariable=function(e){return"t"===e},e.prototype.validParametricVariables=function(e){return 1===e.length&&this.validParametricVariable(e[0])},e.prototype.validInequalityVariables=function(e){switch(e.length){case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return this.validImplicitVariables(e);default:return!1}},e.prototype.validFirstColumnVariable=function(e){return"y"!==e&&"r"!==e&&"theta"!==e&&!e.match(/y_(\\d+)/)},e.prototype.complicatedPolarImplicit=function(e,t){return"theta"===e||"r"===e&&1!==t},e.prototype.constantGraphMode=function(e){return"x"===e?n.X:"r"===e?n.POLAR:n.Y},e.prototype.graphMode=function(e,t){var r=t[0];return"y"===r?n.X:"x"===e?n.X:"r"===e&&"theta"===r?n.POLAR:n.Y},e.prototype.tableableAsConstant=function(e){return"x"!==e&&("r"!==e&&"theta"!==e)},e.prototype.implicitIndependent=function(e){return"x"},e.prototype.implicitDependency=function(e){return 1!==e.length?"y":"y"===e[0]?"x":"theta"===e[0]?"r":"y"},e.prototype.graphableAsConstant=function(e){return"y"===e||"x"===e||"r"===e},e.prototype.disabledFeatures=function(){return[]},e}(),a=function(){function e(){}return e.prototype.dimensions=function(){return 3},e.prototype.assignmentForbidden=function(e){return"x"===e||"y"===e||"z"===e||"tmp"===e.slice(0,3)||r.hasOwnProperty(e)},e.prototype.isValidSlider=function(e){return"x"===e||"y"===e||"z"===e||"ans"!==e.slice(0,3)&&!this.assignmentForbidden(e)},e.prototype.sliderVariables=function(e){var t=this;return e.filter(function(e){return!t.assignmentForbidden(e)&&"ans"!==e.slice(0,3)})},e.prototype.graphingEnabled=function(){return!0},e.prototype.ansEnabled=function(){return!1},e.prototype.validRegressionParameter=function(e){return!1},e.prototype.validLHS=function(e){return!0},e.prototype.unplottablePolarFunction=function(e,t){return!1},e.prototype.validDoubleInequalitySymbol=function(e){return!1},e.prototype.validDoubleInequalityVariables=function(e){return!1},e.prototype.validExpressionVariables=function(e){var t=e.join("");return"x"===t||"y"===t||"xy"===t||"yx"===t},e.prototype.validSolvedVariable=function(e){return"x"===e||"y"===e||"z"===e},e.prototype.validImplicitVariables=function(e){return!1},e.prototype.graphableListVariables=function(e,t){return"x"===e||"y"===e||"x"===t||"y"===t},e.prototype.validParametricVariable=function(e){return"t"===e},e.prototype.validParametricVariables=function(e){return 1===e.length&&this.validParametricVariable(e[0])},e.prototype.validInequalityVariables=function(e){return!1},e.prototype.validFirstColumnVariable=function(e){return!1},e.prototype.complicatedPolarImplicit=function(e,t){return!1},e.prototype.constantGraphMode=function(e){return n.Z_3D},e.prototype.graphMode=function(e,t){return"z"===e&&this.validExpressionVariables(t)?n.Z_3D:n.NONE},e.prototype.tableableAsConstant=function(e){return"x"!==e&&"r"!==e},e.prototype.implicitIndependent=function(e){return"x"},e.prototype.implicitDependency=function(e){if(2!==e.length)return"z";var t=e[0]<e[1]?e[0]+e[1]:e[1]+e[0];return"xy"===t?"z":"xz"===t?"y":"yz"===t?"x":"z"},e.prototype.graphableAsConstant=function(e){return"z"===e},e.prototype.disabledFeatures=function(){return[]},e}();t.PolicyGraphing=new i,t.PolicyGraphing3D=new a}),define("core/math/features/derivative",["require","parsenodes","core/math/baseparser","core/math/builtinframe","core/math/parsenode/builtinfunction","core/math/maybe-rational","core/math/policy","core/math/policyGraphing"],function(e){"use strict";var t=e("parsenodes"),r=e("core/math/baseparser"),n=e("core/math/builtinframe"),i=e("core/math/parsenode/builtinfunction"),a=e("core/math/maybe-rational").maybeRational,o=e("core/math/policy").defaultPolicy,s=e("core/math/policyGraphing").PolicyGraphing,u=t.Constant(a(0,1)),c=t.Constant(a(1,1)),l=t.Constant(a(2,1)),p={FreeVariable:function(e){return e===this._symbol?c:u},Constant:function(e){return isFinite(this.asValue())?u:t.Constant(this.asValue())},Negative:function(e){return t.Negative([this.args[0].takeDerivative(e)])},Add:function(e){return t.Add([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Subtract:function(e){return t.Subtract([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Multiply:function(e){return t.Add([g(e,this.args[0],t.Multiply([this.args[0].takeDerivative(e),this.args[1]])),g(e,this.args[1],t.Multiply([this.args[0],this.args[1].takeDerivative(e)]))])},Divide:function(e){return t.Subtract([g(e,this.args[0],t.Divide([this.args[0].takeDerivative(e),this.args[1]])),g(e,this.args[1],t.Divide([t.Multiply([this.args[0],this.args[1].takeDerivative(e)]),t.Exponent([this.args[1],l])]))])},Exponent:function(e){return t.Add([g(e,this.args[0],t.Multiply([t.Multiply([this.args[1],t.Exponent([this.args[0],t.Subtract([this.args[1],c])])]),this.args[0].takeDerivative(e)])),g(e,this.args[1],t.Multiply([t.Piecewise([t.Comparator["="]([this.args[0],u]),t.Piecewise([t.Comparator[">"]([this.args[1],u]),u,t.Constant(NaN)]),t.Multiply([t.FunctionCall("\\\\ln",[this.args[0]]),t.Exponent([this.args[0],this.args[1]])])]),this.args[1].takeDerivative(e)]))]).getConcreteTree(o,n)},Sum:function(e){return this.copyWithArgs([this.args[0],this.args[1],this.args[2],this.args[3].takeDerivative(e)])},Product:function(e){var r=t.Sum([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([u,this.args[3]]),c,u])]),n=t.Multiply([t.Sum([this.args[0],this.args[1],this.args[2],t.Divide([this.args[3].takeDerivative(e),this.args[3]])]),t.Product(this.args)]),i=t.Product([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([u,this.args[3]]),this.args[3].takeDerivative(e),this.args[3]])]);return t.Piecewise([t.Comparator["="]([u,r]),n,t.Piecewise([t.Comparator["="]([c,r]),i,u])])},Piecewise:function(e){return 2===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e)]):3===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e),this.args[2].takeDerivative(e)]):void 0},List:function(e){return t.List(this.args.map(function(t){return t.takeDerivative(e)}))},ListAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},OrderedPair:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},OrderedPairAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},Integral:function(e){var r=this.args[0],n=this.args[1],i=this.args[2],a=this.args[3],o={};o[r._symbol]=i;var s={};return s[r._symbol]=n,t.Add([g(e,a,this.copyWithArgs([r,n,i,a.takeDerivative(e)])),t.Subtract([g(e,i,t.Multiply([a.substitute(o),i.takeDerivative(e)])),g(e,n,t.Multiply([a.substitute(s),n.takeDerivative(e)]))])])},SolvedEquation:function(e){return this._expression.takeDerivative(e)},OptimizedRegression:function(e){return this.model.takeDerivative(e)},Broadcast:function(e){for(var r=this._replacedSymbols.slice(),n=this.args.slice(1),i=this._expression.takeDerivative(e),a=0;a<this._replacedSymbols.length;a++){var o=this._replacedSymbols[a],s=this.args[a+1];if(s.dependsOn(e)){var u=this.tmpVar(),c=t.DummyIndex(u);r.push(u),n.push(s.takeDerivative(e)),i=t.Add([i,t.Multiply([this._expression.takeDerivative(o),c])])}}return t.Broadcast(r,[i].concat(n))},Seed:function(e){return t.Constant(NaN)}},f={exp:"\\\\exp(x)*x_1",ln:"\\\\{x >= 0: x_1/x \\\\}",log:"\\\\{ x >= 0: x_1/(x*\\\\ln(10)) \\\\}",sqrt:"x_1/(2*\\\\sqrt{x})",rtxsqpone:"x*x_1/\\\\rtxsqpone(x)",rtxsqmone:"x*x_1/\\\\rtxsqmone(x)",sin:"\\\\cos(x)*x_1",cos:"-\\\\sin(x)*x_1",tan:"\\\\sec(x)^2*x_1",arcsin:"x_1/\\\\sqrt{1 - x^2}",arccos:"-x_1/\\\\sqrt{1 - x^2}",sinh:"\\\\cosh(x)*x_1",cosh:"\\\\sinh(x)*x_1",tanh:"(\\\\sech(x))^2*x_1",arcsinh:"x_1/\\\\sqrt{x^2 + 1}",arccosh:"\\\\{ x > 0: x_1/\\\\rtxsqmone(x) \\\\}",arctanh:"\\\\{ \\\\abs(x) < 1: x_1/(1 - x^2) \\\\}",csc:"-\\\\cot(x)*\\\\csc(x)*x_1",sec:"\\\\tan(x)*\\\\sec(x)*x_1",cot:"-\\\\csc(x)^2*x_1",arccsc:"-x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arcsec:"x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arccot:"-x_1/(1+x^2)",csch:"-\\\\coth(x)*\\\\csch(x)*x_1",sech:"-\\\\tanh(x)*\\\\sech(x)*x_1",coth:"-(\\\\csch(x))^2*x_1",arccsch:"-x_1/(\\\\abs(x)*\\\\rtxsqpone(x))",arcsech:"\\\\{ x >= 0: -x_1/(x*\\\\sqrt{1 - x^2}) \\\\}",arccoth:"\\\\{ \\\\abs(x) > 1 : x_1/(1 - x^2) \\\\}",factorial:"(x)!*\\\\polyGamma(0, x + 1)*x_1",floor:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",ceil:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",abs:"\\\\{ \\\\abs(x) > 0: \\\\sign(x)*x_1 \\\\}",sign:"\\\\{ \\\\abs(x) > 0: 0*x_1 \\\\}",mean:"\\\\mean(x_1)",total:"\\\\total(x_1)",length:"0",var:"2*\\\\cov(x, x_1)",varp:"2*\\\\cov(x, x_1)*(\\\\length(x)-1)/\\\\length(x)",stdev:"\\\\cov(x, x_1)/\\\\stdev(x)",stdevp:"\\\\covp(x, x_1)/\\\\stdevp(x)",mad:"\\\\mean(\\\\sign(x-\\\\mean(x))*(x_1 - \\\\mean(x_1)))",min:"x_1[\\\\argmin(x)]",max:"x_1[\\\\argmax(x)]",median:"0.5*(x_1[\\\\lowerQuantileIndex(x, 0.5)] + x_1[\\\\upperQuantileIndex(x, 0.5)])",argmin:"0/0",argmax:"0/0",gcd:"0/0",lcm:"0/0",erf:"\\\\frac{2x_1}{\\\\sqrt{\\\\pi }}e^{-x^2}",invNorm:"\\\\frac{x_1}{\\\\pdf(\\\\normaldist(0,1),\\\\invNorm(x))}"},h={logbase:["\\\\{x > 0: \\\\frac{x_1}{x*\\\\ln(y)}\\\\}","\\\\frac{-\\\\log_{y}(x)*y_1}{y*\\\\ln(y)}"],nthroot:["x^{1/y - 1}/y*x_1","-\\\\frac{x^{1/y}*\\\\ln(x)*y_1}{y^2}"],polyGamma:["0/0","\\\\polyGamma(1 + x, y)*y_1"],mod:["\\\\{ \\\\abs(\\\\mod(x, y)) > 0: x_1 \\\\}","\\\\{ \\\\mod(x/y, 1) > 0: -\\\\floor(x/y)*y_1 \\\\}"],round:["\\\\{ \\\\abs(\\\\mod(x, 1) - 0.5) > 0: 0*x_1 \\\\}","0/0"],cov:["\\\\cov(x_1, y)","\\\\cov(x, y_1)"],covp:["\\\\covp(x_1, y)","\\\\covp(x, y_1)"],corr:["(\\\\cov(x_1, y) - (\\\\cov(x, y)*\\\\cov(x, x_1)/\\\\var(x)))/(\\\\stdevp(x)\\\\stdevp(y))","(\\\\cov(x, y_1) - (\\\\cov(x, y)*\\\\cov(y, y_1)/\\\\var(y)))/(\\\\stdevp(x)\\\\stdevp(y))"],spearman:["0/0","0/0"],quantile:["\\\\{ \\\\floor(y*(\\\\length(x)-1)) = y*(\\\\length(x)-1) :   x_1[\\\\upperQuantileIndex(x, y)],  (\\\\ceil(y*(\\\\length(x)-1)) - y*(\\\\length(x)-1))*x_1[\\\\lowerQuantileIndex(x, y)] +   (y*(\\\\length(x)-1) - \\\\floor(y*(\\\\length(x)-1)))*x_1[\\\\upperQuantileIndex(x, y)]\\\\}","\\\\{ \\\\floor(y*(\\\\length(x)-1)) < y*(\\\\length(x)-1) :   (x[\\\\upperQuantileIndex(x, y)] - x[\\\\lowerQuantileIndex(x, y)])*y_1\\\\}"],quartile:["0.5*(x_1[\\\\lowerQuartileIndex(x, y)] + x_1[\\\\upperQuartileIndex(x, y)])","0/0"],tscore:["\\\\frac{\\\\sqrt{\\\\length(x)}(\\\\stdev(x)*\\\\mean(x_1)-(\\\\mean(x)-y)*\\\\frac{\\\\cov(x,x_1)}{\\\\stdev(x)})}{\\\\stdev(x)^2}","-y_1*\\\\sqrt{\\\\length(x)}/\\\\stdev(x)"],quartileIndex:["0/0","0/0"],upperQuartileIndex:["0/0","0/0"],lowerQuartileIndex:["0/0","0/0"],upperQuantileIndex:["0/0","0/0"],lowerQuantileIndex:["0/0","0/0"],nCr:["0/0","0/0"],nPr:["0/0","0/0"],arctan:["x_1*y/(y^2+x^2)","-y_1*x/(y^2+x^2)"],poissonpdf:["0/0","y_1\\\\frac{e^{-y}(\\\\floor(x)-y)y^{(\\\\floor(x)-1)}}{\\\\floor(x)!}"],invPoisson:["0/0","0/0"],tpdf:["x_1*\\\\pdf(\\\\tdist(y),x)*\\\\frac{-(y+1)*x}{y+x^2}","y_1*\\\\frac{1}{2}\\\\pdf(\\\\tdist(y),x)(  \\\\frac{x^2-1}{y + x^2} + \\\\ln(\\\\frac{y}{y + x^2}) +   \\\\polyGamma(0, \\\\frac{1+y}{2}) - \\\\polyGamma(0, y/2))"],invT:["x_1/\\\\pdf(\\\\tdist(y),\\\\invT(x, y))","0/0"]},d={tcdf:["-x_1*\\\\pdf(\\\\tdist(z),x)","y_1*\\\\pdf(\\\\tdist(z),y)","0/0"],poissoncdf:["0/0","0/0","z_1\\\\sum _{n=\\\\max(0,\\\\floor(\\\\min(x,y)))}^{\\\\floor(\\\\max(x,y))}\\\\frac{e^{-z}(n-z)z^{(n-1)}}{n!}"],normalpdf:["-x_1*\\\\frac{x-y}{z^2} \\\\pdf(\\\\normaldist(y,z),x)","y_1*\\\\frac{x-y}{z^2} \\\\pdf(\\\\normaldist(y,z),x)","z_1*(\\\\frac{(x-y-z)*(x-y+z)}{z^3}) \\\\pdf(\\\\normaldist(y,z),x)"],binompdf:["0/0","0/0","\\\\{0<=z<=1: z_1*\\\\pdf(\\\\binomialdist(y,z),x)*(\\\\frac{\\\\round(x)}{z}-\\\\frac{\\\\round(y)-\\\\round(x)}{1-z}), 0 \\\\}"],invBinom:["0/0","0/0","0/0"],uniformpdf:["0","\\\\{y<=x: \\\\frac{y_1}{(z-y)^2}, 0\\\\}","\\\\{z>=x: -\\\\frac{z_1}{(z-y)^2}, 0\\\\}"],invUniform:["\\\\{y<=x<=z: x_1*(z-y), 0\\\\}","\\\\{y<=x<=z: y_1*(1-x), 0\\\\}","\\\\{y<=x<=z: z_1*x, 0\\\\}"]},m={normalcdf:["-x_1\\\\pdf(\\\\normaldist(z,u), x)","y_1\\\\pdf(\\\\normaldist(z,u), y)","-z_1*(\\\\pdf(\\\\normaldist(z,u), y) - \\\\pdf(\\\\normaldist(z,u), x))","u_1*(  \\\\{\\\\abs(y)=1/0:0,\\\\frac{z-y}{u}\\\\pdf(\\\\normaldist(z,u),y)\\\\} -   \\\\{\\\\abs(x)=1/0:0,\\\\frac{z-x}{u}\\\\pdf(\\\\normaldist(z,u),x)\\\\})"],binomcdf:["0/0","0/0","0/0","\\\\{0<=u<=1: u_1*\\\\sum _{n=\\\\max(0,\\\\round(\\\\min(x,y)))}^{\\\\round(\\\\max(x,y))}(  \\\\pdf(\\\\binomialdist(z,u),n)*(\\\\frac{n}{u}-\\\\frac{\\\\round(z)-n}{1-u})), 0 \\\\}"],uniformcdf:["\\\\{z>u: 0/0, -x_1\\\\pdf(\\\\uniformdist(z,u), x)\\\\}","\\\\{z>u: 0/0, y_1\\\\pdf(\\\\uniformdist(z,u), y)\\\\}","\\\\{z>u: 0/0, z_1*(\\\\frac{\\\\{z<x<u:u-x,0\\\\} + \\\\{z<y<u:y-u,0\\\\}}{(u-z)^2})\\\\}","\\\\{z>u: 0/0, u_1*(\\\\frac{\\\\{z<x<u:x-z,0\\\\} + \\\\{z<y<u:z-y,0\\\\}}{(u-z)^2})\\\\}"]};for(var y in f)i[y].prototype.takeDerivative=function(e){return function(t){var r=this.args,i={x:r[0],x_1:r[0].takeDerivative(t)};return g(t,r[0],e.substitute(i)).getConcreteTree(o,n)}}(r.parse(f[y]));for(y in h)i[y].prototype.takeDerivative=function(e,r){return function(i){var a=this.args,s={x:a[0],x_1:a[0].takeDerivative(i),y:a[1],y_1:a[1].takeDerivative(i)};return t.Add([g(i,a[0],e.substitute(s)),g(i,a[1],r.substitute(s))]).getConcreteTree(o,n)}}(r.parse(h[y][0]),r.parse(h[y][1]));for(y in d)i[y].prototype.takeDerivative=function(e,r,i){return function(a){var s=this.args,u={x:s[0],x_1:s[0].takeDerivative(a),y:s[1],y_1:s[1].takeDerivative(a),z:s[2],z_1:s[2].takeDerivative(a)};return t.Add([t.Add([g(a,s[0],e.substitute(u)),g(a,s[1],r.substitute(u))]),g(a,s[2],i.substitute(u))]).getConcreteTree(o,n)}}(r.parse(d[y][0]),r.parse(d[y][1]),r.parse(d[y][2]));for(y in m)i[y].prototype.takeDerivative=function(e,r,i,a){return function(s){var u=this.args,c={x:u[0],x_1:u[0].takeDerivative(s),y:u[1],y_1:u[1].takeDerivative(s),z:u[2],z_1:u[2].takeDerivative(s),u:u[3],u_1:u[3].takeDerivative(s)};return t.Add([t.Add([g(s,u[0],e.substitute(c)),g(s,u[1],r.substitute(c))]),t.Add([g(s,u[2],i.substitute(c)),g(s,u[3],a.substitute(c))])]).getConcreteTree(o,n)}}(r.parse(m[y][0]),r.parse(m[y][1]),r.parse(m[y][2]),r.parse(m[y][3]));i.distance.prototype.takeDerivative=function(e){var r=this.args[0],a=this.args[1],o=t.OrderedPairAccess([r,c]),u=t.OrderedPairAccess([r,l]),p=t.OrderedPairAccess([a,c]),f=t.OrderedPairAccess([a,l]),h=g(e,o,o.takeDerivative(e)),d=g(e,u,u.takeDerivative(e)),m=g(e,p,p.takeDerivative(e)),y=g(e,f,f.takeDerivative(e));return g(e,this,t.Divide([t.Add([t.Add([t.Subtract([t.Multiply([h,o]),t.Multiply([h,p])]),t.Subtract([t.Multiply([m,p]),t.Multiply([m,o])])]),t.Add([t.Subtract([t.Multiply([d,u]),t.Multiply([d,f])]),t.Subtract([t.Multiply([y,f]),t.Multiply([y,u])])])]),i.distance([this.args[0],this.args[1]])])).getConcreteTree(s,n)},i.midpoint.prototype.takeDerivative=function(e){var r=this.args[0],a=this.args[1],o=t.OrderedPairAccess([r,c]),u=t.OrderedPairAccess([r,l]),p=t.OrderedPairAccess([a,c]),f=t.OrderedPairAccess([a,l]),h=g(e,o,o.takeDerivative(e)),d=g(e,u,u.takeDerivative(e)),m=g(e,p,p.takeDerivative(e)),y=g(e,f,f.takeDerivative(e));return t.OrderedPair([i.mean([h,m]),i.mean([d,y])]).getConcreteTree(s,n)};var g=function(e,t,r){return t.dependsOn(e)?r:u};for(var v in p){var b=p[v];t[v].prototype.takeDerivative=b}["tSample","poissonSample","uniformSample","normalSample","binomSample"].forEach(function(e){i[e].prototype.takeDerivative=function(e){for(var r=0;r<this.args.length;r++)if(this.args[r].dependsOn(e))return t.Constant(NaN);return u}})}),define("core/math/features/substitute",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes"),r={Identifier:function(e){return e[this._symbol]?e[this._symbol]:this},FreeVariable:function(e){return e[this._symbol]?e[this._symbol]:this},Constant:function(e){return this},Expression:function(e){return this.copyWithArgs(this.args.map(function(t){return t.substitute(e)}))},List:function(e){return t.List(this.args.map(function(t){return t.substitute(e)}))},SolvedEquation:function(e){return new this.constructor(this._symbol,this._expression.substitute(e))},OptimizedRegression:function(e){return new this.constructor(this.model.substitute(e),this.parameters,this.residualVariables,this.residuals,this.statistics)}};for(var n in r)t[n].prototype.substitute=r[n]}),define("core/math/features/isImplicit",["require","parsenodes"],function(e){"use strict";function t(e){return!(e[0]instanceof r.FreeVariable)||e[1].dependsOn(e[0]._symbol)}var r=e("parsenodes");r.Base.prototype.isImplicit=function(){return!1},r.Equation.prototype.isImplicit=function(){return t(this.args)},r.BaseComparator.prototype.isImplicit=function(){return t(this.args)},r.Broadcast.prototype.isImplicit=function(){return this._expression.isImplicit()}}),define("core/math/features/solve",["require","core/math/baseparser","parsenodes","core/math/errormsg","core/math/builtinframe","core/math/workerconfig","core/math/maybe-rational","core/math/policy"],function(e){"use strict";function t(e){var t=Object.create(m);return t.a=e[2]?e[2].tryGetConcreteTree(v,m):b,t.b=e[1]?e[1].tryGetConcreteTree(v,m):b,t.c=e[0]?e[0].tryGetConcreteTree(v,m):b,t}function r(e){return 0===e.a.asValue()?0===e.b.asValue()?0:1:2}function n(e,n,i,a){for(var o,s,u=[],c=[],l=0;l<i.length;l++){var p=i[l],f=0;h.eachArgs(e,[n],function(e){var t=e[0];f=Math.max(f,t.polynomialOrder(p))});var d=f>2,m=i.length>1&&!e.validSolvedVariable(p),y=a&&n.piecewiseDependsOn(p);d||m||y?(c[l]={},u[l]=1/0):(c[l]=[],u[l]=0,h.eachArgs(e,[n],function(e){var n=e[0];s=t(n.getPolynomialCoefficients(p)),c[l].push(s),u[l]=Math.max(u[l],r(s))}))}var g;if(1===i.length)s=c[0],o=i[0],g=u[0];else{var v;v=0===u[0]?1:0===u[1]?0:u[0]<u[1]?0:1,s=c[v],o=i[v],g=u[v]}return{localFrame:s,variableOfInterest:o,effectiveOrder:g}}function i(e,t){return t?P.inequality:P.generalEquation}function a(e){e.f=x.getConcreteTree(v,e),e.g=_.getConcreteTree(v,e),e.p=S.getConcreteTree(v,e),e.q=M.getConcreteTree(v,e),e.m=c(g(1e305,1))}var o=e("core/math/baseparser"),s=e("parsenodes"),u=s.Base,c=s.Constant,l=s.Equation,p=s.SolvedEquation,f=s.BaseComparator,h=s.List,d=e("core/math/errormsg"),m=e("core/math/builtinframe"),y=e("core/math/workerconfig"),g=e("core/math/maybe-rational").maybeRational,v=e("core/math/policy").defaultPolicy,b=c(g(0,1)),x=o.parse("b*b"),_=o.parse("4*a*c"),S=o.parse("(-b+\\\\sqrt{b*b-4*a*c})/(2*a)"),M=o.parse("(-b-\\\\sqrt{b*b-4*a*c})/(2*a)"),E=o.parse("[\\\\{\\\\abs(b)>0:-c/b\\\\}]"),D=o.parse("[\\\\{\\\\abs(a)>0:-b/(2*a)\\\\}]"),w=o.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},p\\\\}]"),T=o.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},a>0:q\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:-m\\\\}\\\\},a>0:\\\\{f<g:-m\\\\},p\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:m\\\\}\\\\},a>0:\\\\{f<g:m\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},a>0:p\\\\}]"),P={inequality:function(e){return a(e),T.getConcreteTree(v,e)},generalEquation:function(e){return a(e),e.a.isConstant&&0===e.a.asValue()?E.getConcreteTree(v,e):e.f.isConstant&&e.g.isConstant&&e.f.asValue()-e.g.asValue()==0?D.getConcreteTree(v,e):w.getConcreteTree(v,e)}};u.prototype.trySolve=function(e,t){try{return this.solve(e,t)}catch(e){if(e instanceof s.Error)return e;throw e}},l.prototype.solve=function(e,t){return this.asComparator().solve(e,t)},f.prototype.solve=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return r;if(r.isConstant)return r;var a="="!==this.getOperator();if(!y.plotImplicits&&r.isImplicit())throw new d.implicitsDisabled;var o=this._difference.tryGetConcreteTree(e,t);o.isBroadcast&&(o=h(o.mapElements(e,function(e){return e})));var s=o.getDependencies();if(0===s.length)return o.isList?h(o.args.map(function(e){return c(0===e.asValue())})):c(0===o.asValue());if(1===s.length&&o.isList&&!a)return o;if(1===s.length&&!a&&!y.plotSingleVariableImplicitEquations)return d.singleVariableImplicitEquationsDisabled();var u=h.wrap(o);if(s.length>2)return d.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(s);if(a&&!e.validInequalityVariables(s))return d.invalidInequalityVariables().setDependencies(s);var l=n(e,u,s,a),f=l.localFrame,m=l.effectiveOrder,g=l.variableOfInterest;if(e.complicatedPolarImplicit(g,m))return d.complicatedPolarImplicit().setDependencies(s);if(!e.validImplicitVariables(s))return d.invalidImplicitVariables();if(m>2)return o;for(var v=i(s,a),b=[],x=0;x<f.length;x++){var _=v(f[x]);if(_.isError)return _;if(_.isConstant)b.push(_);else for(var S=0;S<_.args.length;S++){var M=_.args[S],E=u.args[x].extractConditions(g,M).getConcreteTree(e,t);b.push(E)}}return p(g,h(b))}}),define("core/math/distribution-spec",["require","exports","core/math/baseparser","tslib"],function(e,t,r,n){"use strict";function i(e){return a(r.parse(e,{trailingComma:!0}))}function a(e){var r=e,i=o[r.type];if(!i)switch("Assignment"===r.type&&(r=r._expression),r.type){case"FunctionCall":i=t.DistributionParameterDefaultsMap[r._symbol];break;default:return}if(i){for(var a={},s=i.params,u=r.args,c=0;c<s.length;c++){var l=u[c];a[s[c]]=l&&l.getInputString()||""}return n.__assign(n.__assign({},i),{span:r.getInputSpan(),values:a})}}Object.defineProperty(t,"__esModule",{value:!0}),t.DistributionParameterDefaultsMap={normaldist:{type:"distribution",symbol:"normaldist",params:["mean","stdev"],defaults:["0","1"],discrete:!1},tdist:{type:"distribution",symbol:"tdist",params:["dof"],defaults:[void 0],discrete:!1},binomialdist:{type:"distribution",symbol:"binomialdist",params:["trials","probsuccess"],defaults:[void 0,"0.5"],discrete:!0},poissondist:{type:"distribution",symbol:"poissondist",params:["mean"],defaults:[void 0],discrete:!0},uniformdist:{type:"distribution",symbol:"uniformdist",params:["min","max"],defaults:["0","1"],discrete:!1}};var o={Histogram:{type:"visualization",symbol:"histogram",params:["data","binwidth"],defaults:[void 0,"1"]},DotPlot:{type:"visualization",symbol:"dotplot",params:["data","binwidth"],defaults:[void 0,"1"]},BoxPlot:{type:"visualization",symbol:"boxplot",params:["data"],defaults:[void 0]}};t.parseToplevelFunction=i,t.getFunctionSpecFromTree=a}),define("core/math/evaluationstate",["require","core/types/graphmode","parsenodes","core/lib/label","core/math/types","core/math/distribution-spec"],function(e){"use strict";function t(e){return e.isError?e.getError():void 0===e.asValue()?"":+e.asValue()}function r(e,r,n){for(var i=[],a=0;a<r.columns.length;a++){var o=n.columns[a],s={dependent:!o.isIndependent,discrete:o.isIndependent};o.isError?(s.error=o.getError(),s.values=[]):s.values=o.values.map(t),i.push(s)}return{column_data:i}}function n(e,t,r){var n={variables:[],errorMap:{},dimensions:{}};return r.center.isError&&(n.errorMap.center=!0),r.radianAngle.isError&&(n.errorMap.angle=!0),r.width.isError&&(n.errorMap.width=!0),r.height.isError&&(n.errorMap.height=!0),r.opacity.isError&&(n.errorMap.opacity=!0),r.center.isError||r.radianAngle.isError||r.width.isError||r.height.isError||r.opacity.isError?(n.variables=t.getSliderVariables(e,r),n):(n.dimensions.x=[],n.dimensions.y=[],n.dimensions.radianAngle=[],n.dimensions.width=[],n.dimensions.height=[],n.dimensions.opacity=[],a.List.eachArgs(e,[r.center,r.radianAngle,r.width,r.height,r.opacity],function(e){var t=e[0].asValue();n.dimensions.x.push(+t[0]),n.dimensions.y.push(+t[1]),n.dimensions.radianAngle.push(+e[1].asValue()),n.dimensions.width.push(+e[2].asValue()),n.dimensions.height.push(+e[3].asValue()),n.dimensions.opacity.push(Math.max(0,Math.min(1,e[4].asValue())))}),(e.graphingEnabled()?t.getGraphMode(e,r):i.NONE)!==i.NONE&&(n.is_graphable=!0),r.moveStrategy&&(n.move_strategy=r.moveStrategy),n)}var i=e("core/types/graphmode"),a=e("parsenodes"),o=e("core/lib/label"),s=e("core/math/types"),u=e("core/math/distribution-spec").getFunctionSpecFromTree,c=function(){return{operator:"=",variables:[]}},l=function(e,t,l){if(t.isTable)return r(e,t,l);if(t.isImage)return n(e,t,l);var p=c();if(l.isError&&(!(t instanceof a.FunctionDefinition)||l.blocksExport))return p.error=l.getError(),p.variables=t.getSliderVariables(e,l),p.is_single_identifier=t instanceof a.Identifier,p;l.moveStrategy&&(p.move_strategy=l.moveStrategy,p.default_drag_mode=l.defaultDragMode),t.isInequality()&&(p.is_inequality=!0),p.operator=t.getOperator(),l instanceof a.SolvedEquation?!0!==l._expression.asValue()&&!1!==l._expression.asValue()&&(p.assignment=l._symbol):t instanceof a.Assignment&&(p.assignment=t._symbol);var f=e.graphingEnabled()?t.getGraphMode(e,l):i.NONE;if(f!==i.NONE){p.is_graphable=!0,p.expression_type=t.getExpressionType(f,l.valueType),l.isShadeBetween()&&(p.is_shade_between=!0);var h=t.tableInfo(e,l);h&&(p.is_tableable=!0,p.table_info=h)}s.isList(l.valueType)&&(p.is_concrete_list=!0),p.variables=p.is_graphable?[]:t.getSliderVariables(e,l),p.is_single_identifier=t instanceof a.Identifier,l.isConstant&&(p.constant_value=l.asValue());var d=l.getEvaluationInfo();if(!d||"="!==p.operator||t.isConstant||t.isFunction||(p.is_evaluable=!0,p.zero_values=d),l instanceof a.OptimizedRegression){var m={};for(var y in l.parameters)l.parameters.hasOwnProperty(y)&&(m[o.identifierToLatex(y)]=+l.parameters[y].asValue());p.is_regression=!0,p.regression={parameters:m,residualVariable:o.identifierToLatex(l.residualVariable),residualSuggestionId:l.residualSuggestionId,shouldSuggestLogMode:l.shouldSuggestLogMode,statistics:l.statistics}}var g=u(t);return g&&g.discrete&&(p.is_discrete_distribution=!0),p};return l.default=c,l}),define("core/math/statementanalysis",["require","core/math/evaluationstate","pjs","core/types/graphmode","core/math/workerconfig"],function(e){"use strict";var t=e("core/math/evaluationstate"),r=e("pjs"),n=e("core/types/graphmode"),i=e("core/math/workerconfig");return r(function(e){e.init=function(e,r,n){this.policy=e,this.rawTree=r,this.concreteTree=n,this.evaluationState=t(e,r,n)},e.exportTo=function(e,t){this.rawTree.exportTo(e,this.concreteTree,t)},e.graph=function(e){return this.rawTree.graph(this.policy,this.concreteTree,e)},e.getGraphMode=function(){return this.rawTree.getGraphMode(this.policy,this.concreteTree)},e.getGraphInfo=function(){return this.rawTree.getGraphInfo(this.policy,this.concreteTree)},e.shouldIntersect=function(){if(!this.evaluationState.is_graphable)return!1;if(!this.rawTree.userData.shouldGraph)return!1;if(!i.pointsOfInterest)return!1;var e=this.getGraphMode();return e===n.X||e===n.Y}})}),define("core/math/expression-types",["require","exports"],function(e,t){"use strict";function r(e,r){if(void 0===e)return{points:!1,lines:!1,fill:!1};var n=t.EXPRESSION_PROP_DEFAULTS[e];switch(e){case i.SINGLE_POINT:return{points:!0,lines:!1,fill:!1};case i.POINT_LIST:case i.DOTPLOT:return{points:void 0===r.points?n.points:r.points,lines:void 0===r.lines?n.lines:r.lines,fill:!1};case i.PARAMETRIC:case i.POLYGON:case i.X_OR_Y:case i.POLAR:case i.IMPLICIT:case i.HISTOGRAM:case i.BOXPLOT:case i.TTEST:case i.STATS:case i.CUBE:case i.SPHERE:return{points:!1,lines:void 0===r.lines?n.lines:r.lines,fill:void 0===r.fill?n.fill:r.fill};default:return e}}function n(e){if(void 0===e)return!1;switch(e){case i.SINGLE_POINT:case i.POINT_LIST:
case i.PARAMETRIC:case i.POLYGON:case i.X_OR_Y:case i.POLAR:case i.IMPLICIT:return!0;case i.HISTOGRAM:case i.BOXPLOT:case i.DOTPLOT:case i.TTEST:case i.STATS:case i.CUBE:case i.SPHERE:return!1;default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i;!function(e){e.X_OR_Y="X_OR_Y",e.SINGLE_POINT="SINGLE_POINT",e.POINT_LIST="POINT_LIST",e.PARAMETRIC="PARAMETRIC",e.POLAR="POLAR",e.IMPLICIT="IMPLICIT",e.POLYGON="POLYGON",e.HISTOGRAM="HISTOGRAM",e.DOTPLOT="DOTPLOT",e.BOXPLOT="BOXPLOT",e.TTEST="TTEST",e.STATS="STATS",e.CUBE="CUBE",e.SPHERE="SPHERE"}(i=t.ExpressionType||(t.ExpressionType={})),t.EXPRESSION_PROP_DEFAULTS={X_OR_Y:{points:!1,lines:!0,fill:!1},SINGLE_POINT:{points:!0,lines:!1,fill:!1},POINT_LIST:{points:!0,lines:!1,fill:!1},PARAMETRIC:{points:!1,lines:!0,fill:!1},POLAR:{points:!1,lines:!0,fill:!1},IMPLICIT:{points:!1,lines:!0,fill:!1},POLYGON:{points:!1,lines:!0,fill:!0},HISTOGRAM:{points:!1,lines:!0,fill:!0},DOTPLOT:{points:!0,lines:!1,fill:!1},BOXPLOT:{points:!1,lines:!0,fill:!1},TTEST:{points:!1,lines:!1,fill:!1},STATS:{points:!1,lines:!1,fill:!1},CUBE:{points:!1,lines:!1,fill:!0},SPHERE:{points:!1,lines:!1,fill:!0}},t.getReconciledExpressionProps=r,t.isClickableExpressionType=n}),define("core/math/features/analyze",["require","underscore","parsenodes","core/math/statementanalysis","core/math/builtin","core/math/builtinframe","core/math/parsenode/builtinfunction","core/math/errormsg","core/math/comparators","core/math/types","core/types/graphmode","core/math/expression-types","core/math/distribution-spec","core/math/workerconfig"],function(e){"use strict";function t(e,t,r,n){if(n.isError)return u(e,r,n);var i=n.getDependencies();switch(n.valueType){case d.Distribution:case d.ListOfDistribution:return u(e,r,n);case d.Point:case d.ListOfPoint:return i.length?e.validParametricVariables(i)?u(e,r,n):u(e,r,f.tooManyVariables(r.getSliderVariables(e,n)).setDependencies(i)):u(e,r,n);case d.Number:case d.ListOfNumber:return 0===i.length?u(e,r,n):i.length<=e.dimensions()-1?e.validExpressionVariables(i)?u(e,r,n):u(e,r,f.equationRequired(e.implicitDependency(i)).setDependencies(i)):e.validImplicitVariables(i)?u(e,r,f.equationRequired().setDependencies(i)):u(e,r,f.tooManyVariables(r.getSliderVariables(e,n)).setDependencies(i));default:return u(e,r,f.parseError())}}function r(e){return p.pdf([e,s.FreeVariable("x")])}function n(e,t){var r=this.tryGetConcreteTree(e,t),n=r.getDependencies();return n.length?u(e,this,f.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):u(e,this,this.tryGetConcreteTree(e,t))}function i(e){return function(t,r){var n=this.tryGetConcreteTree(t,r),i=n.getDependencies();if(i.length)return u(t,this,f.tooManyVariables(this.getSliderVariables(t,n)).setDependencies(i));var a=u(t,this,this.tryGetConcreteTree(t,r));if(!n.isError){a.evaluationState.expression_type=y.TTEST;var o=n.args.map(function(e){return e.asValue()});a.evaluationState.ttest_results=e.apply(null,o)}return a}}function a(e,t){return e.filter(function(e){return!t[e]})}var o=e("underscore"),s=e("parsenodes"),u=e("core/math/statementanalysis"),c=e("core/math/builtin"),l=e("core/math/builtinframe"),p=e("core/math/parsenode/builtinfunction"),f=e("core/math/errormsg"),h=e("core/math/comparators"),d=e("core/math/types"),m=e("core/types/graphmode"),y=e("core/math/expression-types").ExpressionType,g=e("core/math/distribution-spec").DistributionParameterDefaultsMap,v=e("core/math/workerconfig");s.Base.prototype.analyze=function(e,t){return u(e,this,this.tryGetConcreteTree(e,t))},s.FunctionCall.prototype.analyze=function(e,n){var i=this.tryGetConcreteTree(e,n);return!i.isError&&g[this._symbol]&&0===i.getDependencies().length&&(i=r(i).tryGetConcreteTree(e,n)),t(e,n,this,i)},s.Expression.prototype.analyze=function(e,r){return t(e,r,this,this.tryGetConcreteTree(e,r))},s.FunctionDefinition.prototype.analyze=function(e,t){if(l[this._symbol])return this.asEquation().analyze(e,t);var r=this._symbol.split("_")[0];if(p[r])return u(e,this,f.cannotRedefine(this._symbol,r));var n=this.tryGetConcreteTree(e,t);if(n.isError)return u(e,this,n);var i=this._argSymbols,a=n.getDependencies();if(-1!==a.indexOf(this._symbol))return u(e,this,f.selfReferentialFunction(this._symbol));var o=a.filter(function(e){return-1===i.indexOf(e)});return e.unplottablePolarFunction(this._symbol,a)?u(e,this,f.unplottablePolarFunction()):o.some(e.assignmentForbidden)?u(e,this,f.addArgumentsToDefinition(o,this._symbol,i).setDependencies(a)):o.length?u(e,this,f.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(a)):u(e,this,n)},s.Assignment.prototype.analyze=function(e,t,n){var i=this._symbol;if(!e.validLHS(i))return u(e,this,f.invalidLHS(i));if(l[i])return this.asEquation().analyze(e,t);var a=this.tryGetConcreteTree(e,t);if(!a.isError&&this._expression instanceof s.FunctionCall&&g[this._expression._symbol]&&0===a.getDependencies().length&&(a=r(a).tryGetConcreteTree(e,t)),a.isError)return u(e,this,a);var o=a.getDependencies();if(this.isEquation(a))return this.asEquation().analyze(e,t);if(o.length>1){var c=this.getSliderVariables(e,a);return c.length?u(e,this,f.tooManyVariables(c).allowExport().setDependencies(o)):u(e,this,a)}var p=this.getMoveStrategy(e,t,a,n);if(p){var h=this.getDefaultDragMode(p);return u(e,this,s.MovablePoint(a.args,p,h))}return u(e,this,a)},s.Regression.prototype.analyze=function(e,t,r,n,i){return u(e,this,this.tryOptimize(e,t,r,n,i))},s.Polygon.prototype.analyze=n,s.Histogram.prototype.analyze=n,s.Object3D.prototype.analyze=n,s.DotPlot.prototype.analyze=n,s.BoxPlot.prototype.analyze=n,s.TTest.prototype.analyze=i(c.ttest),s.IndependentTTest.prototype.analyze=i(c.ittest),s.Stats.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t),n=r.getDependencies();if(n.length)return u(e,this,f.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n));var i=u(e,this,this.tryGetConcreteTree(e,t));if(!r.isError){i.evaluationState.expression_type=y.STATS;var a=r.args.map(function(e){return e.asValue()});i.evaluationState.stats_results=c.stats.apply(null,a)}return i},s.Equation.prototype.analyze=s.BaseComparator.prototype.analyze=function(e,t){var r="="!==this.getOperator();if(!v.plotInequalities&&r)return u(e,this,f.inequalitiesDisabled());var n=this.trySolve(e,t);if(n.isError)return u(e,this,n);if(n instanceof s.SolvedEquation&&n.getDependencies().length){var i=n.getDependencies().concat(n._symbol);if(!e.validImplicitVariables(i))return u(e,this,f.invalidImplicitVariables().setDependencies(i))}return this.getGraphMode(e,n)!==m.IMPLICIT||e.validImplicitVariables(n.getDependencies())?u(e,this,n):u(e,this,f.invalidImplicitVariables().setDependencies(n.getDependencies()))},s.DoubleInequality.prototype.analyze=function(e,t){if(!v.plotInequalities)return u(e,this,f.inequalitiesDisabled());var r=this.tryGetConcreteTree(e,t);if(r.isError)return u(e,this,r);var n=r.getDependencies();return h.table[this._operators[0]].direction!==h.table[this._operators[1]].direction?u(e,this,f.mismatchedDoubleInequality()):e.validDoubleInequalitySymbol(r._symbol)&&e.validDoubleInequalityVariables(n)?n.length>2?u(e,this,f.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):-1!==r._expressions[0].getDependencies().indexOf(r._symbol)||-1!==r._expressions[1].getDependencies().indexOf(r._symbol)?u(e,this,f.complicatedDoubleInequality().setDependencies(n)):u(e,this,r):u(e,this,f.invalidDoubleInequalityVariables().setDependencies(n))},s.And.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return u(e,this,r);var n=r.getDependencies();return n.length?e.validDoubleInequalityVariables(n)?u(e,this,f.complicatedDoubleInequality().setDependencies(n)):u(e,this,f.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):u(e,this,r)},s.OrderedPair.prototype.analyze=function(e,r,n){var i=this.tryGetConcreteTree(e,r);if(i.isError)return u(e,this,i);var a=this.getMoveStrategy(e,r,i,n);if(a){var o=this.getDefaultDragMode(a);return u(e,this,s.MovablePoint(i.args,a,o))}return t(e,r,this,i)},s.Table.prototype.analyze=function(e,t){for(var r=Object.create(t),n=[],i=0;i<this.columns.length;i++){var o=this.columns[i].analyze(e,r,t);if(0===i&&(o.concreteTree.isIndependent?e.validFirstColumnVariable(o.concreteTree.header._symbol)?o.concreteTree.header._symbol:o=u(e,this.columns[i],f.invalidFirstTableColumn()):o=u(e,this.columns[i],f.invalidDependentFirstTableColumn())),o.concreteTree.isIndependent)o.rawTree.exportToLocal(o.concreteTree,r);else if(!o.concreteTree.isError){var c=o.concreteTree.header.getDependencies(),l=a(c,r);l.length&&(o=u(e,this.columns[i],f.tooManyVariables(l).setDependencies(l)))}n.push(o.concreteTree)}var p=s.Table(n),h=u(e,this,p);return h.evaluationState.is_graphable=!0,h},s.TableColumn.prototype.analyze=function(e,t,r){var n=this.header.tableError();if(n)return u(e,this,f.invalidTableHeader(n));var i=this.tryGetConcreteTree(e,t,r);if(i.isError)return u(e,this,i);if(i.header.isError)return u(e,this,i.header);if(i.values.isError)return u(e,this,i.values);for(var a=0;a<i.values.length;a++)if(!i.values[a].isError){var o=this.values[a]&&this.values[a].tableError();if(o)i.values[a]=f.invalidTableEntry(o);else{var s=i.values[a].getDependencies();s.length&&(i.values[a]=f.tooManyVariables(s).setDependencies(s))}}return u(e,this,i)},s.Image.prototype.analyze=function(e,t,r){var n=this.tryGetConcreteTree(e,t);if(n.radianAngle.isError||n.center.isError||n.width.isError||n.height.isError||n.opacity.isError)return u(e,this,n);var i=n.center.getDependencies(),a=n.radianAngle.getDependencies(),o=n.width.getDependencies(),c=n.height.getDependencies(),l=n.opacity.getDependencies();return i.length||a.length||o.length||c.length||l.length?u(e,this,s.Image({center:i.length?f.tooManyVariables(a).setDependencies(i):n.center,radianAngle:a.length?f.tooManyVariables(a).setDependencies(a):n.radianAngle,width:o.length?f.tooManyVariables(o).setDependencies(o):n.width,height:c.length?f.tooManyVariables(c).setDependencies(c):n.height,opacity:l.length?f.tooManyVariables(l).setDependencies(l):n.opacity})):(n.moveStrategy=this.getMoveStrategy(e,t,n,r),u(e,this,n))},s.Slider.prototype.analyze=function(e,t){var r,n=this.tryGetConcreteTree(e,t),i=n.sliderInfo;if(i.missingVars.length){var a=o.unique(i.missingVars);r=u(e,this,f.tooManyVariables(e.sliderVariables(a)).setDependencies(a).allowExport())}else r=u(e,this,n);var s=r.evaluationState;if(v.sliders){s.assignment=i.exportedSymbol,s.slider_min_number=i.values.min,s.slider_max_number=i.values.max,s.slider_step_number=i.values.step,s.slider_min_valid=i.valids.min,s.slider_max_valid=i.valids.max,s.slider_step_valid=i.valids.step;var c=s.slider_min_valid&&s.slider_max_valid&&s.slider_step_valid;s.is_slider=!0,s.raw_slider_latex=this.getInputString(),s.is_slidable=c,s.is_animatable=s.is_slidable&&!s.is_graphable,i.errMsg&&(s.error=i.errMsg.getError())}return delete s.is_evaluable,delete s.zero_values,r}}),define("core/math/features/analyzeFourFunction",["require","parsenodes","core/math/statementanalysis","core/math/errormsg","core/math/parsenode/builtinfunction","core/math/builtinconstants"],function(e){"use strict";function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("core/math/statementanalysis"),i=e("core/math/errormsg"),a=e("core/math/parsenode/builtinfunction"),o=e("core/math/builtinconstants");r.Base.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return n(e,this,r);var s=r.getDependencies();if(s.length>0){var u,c=s[0];return u=a.hasOwnProperty(c)?i.functionUnsupported(c):o.hasOwnProperty(c)?i.constantUnsupported(c):i.variablesUnsupported(c),n(e,this,u)}return n(e,this,r)},r.Assignment.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.assignmentsUnsupported())},r.FunctionDefinition.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.functionDefinitionsUnsupported())},r.Equation.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeFourFunction=t,r.DoubleInequality.prototype.analyzeFourFunction=t,r.BaseComparator.prototype.analyzeFourFunction=t,r.Regression.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("core/math/features/analyzeScientific",["require","parsenodes","core/math/statementanalysis","core/math/errormsg","core/math/builtinframe"],function(e){"use strict";function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("core/math/statementanalysis"),i=e("core/math/errormsg"),a=e("core/math/builtinframe");r.Base.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return n(e,this,r);var a=r.getDependencies();return a.length>0?n(e,this,i.tooManyVariables(a)):n(e,this,r)},r.Assignment.prototype.analyzeScientific=function(e,t){var r=this._symbol;if(a[r])return n(e,this,i.cannotRedefine(r));var o=this.tryGetConcreteTree(e,t);if(o.isError)return n(e,this,o);var s=o.getDependencies();return this.isEquation(o)?n(e,this,i.equationsUnsupported()):s.length>0?n(e,this,i.tooManyVariables(s)):n(e,this,o)},r.FunctionDefinition.prototype.analyzeScientific=function(e,t){if(a[this._symbol])return n(e,this,i.cannotRedefine(this._symbol));var r=this.tryGetConcreteTree(e,t);if(r.isError)return n(e,this,r);var o=this._argSymbols,s=r.getDependencies();if(-1!==s.indexOf(this._symbol))return n(e,this,i.selfReferentialFunction(this._symbol));var u=s.filter(function(e){return-1===o.indexOf(e)});return u.length?n(e,this,i.addArgumentsToDefinition(u,this._symbol,o)):n(e,this,r)},r.Equation.prototype.analyzeScientific=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeScientific=t,r.DoubleInequality.prototype.analyzeScientific=t,r.BaseComparator.prototype.analyzeScientific=t,r.Regression.prototype.analyzeScientific=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeScientific=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("core/math/features/analyzeSingleExpressionScientific",["require","parsenodes","core/math/statementanalysis","core/math/errormsg","core/math/parsenode/builtinfunction","core/math/builtinconstants"],function(e){"use strict";function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("core/math/statementanalysis"),i=e("core/math/errormsg"),a=e("core/math/parsenode/builtinfunction"),o=e("core/math/builtinconstants");r.Base.prototype.analyzeSingleExpressionScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeSingleExpressionScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return n(e,this,r);var s=r.getDependencies();if(s.length>0){var u,c=s[0];return u=a.hasOwnProperty(c)?i.functionUnsupported(c):o.hasOwnProperty(c)?i.constantUnsupported(c):i.variablesUnsupported(c),n(e,this,u)}return n(e,this,r)},r.Assignment.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.assignmentsUnsupported())},r.FunctionDefinition.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.functionDefinitionsUnsupported())},r.Equation.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeSingleExpressionScientific=t,r.DoubleInequality.prototype.analyzeSingleExpressionScientific=t,r.BaseComparator.prototype.analyzeSingleExpressionScientific=t,r.Regression.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("core/lib/dragmode",["require","exports"],function(e,t){"use strict";function r(e){return e?"none"===e[0].type&&"none"===e[1].type?i.NONE:"none"===e[1].type?i.X:"none"===e[0].type?i.Y:i.XY:i.NONE}function n(e,t){var n=r(t);switch(e){case i.NONE:return i.NONE;case i.AUTO:case i.XY:return n;case i.X:return n===i.X||n===i.XY?i.X:i.NONE;case i.Y:return n===i.Y||n===i.XY?i.Y:i.NONE;default:return i.NONE}}Object.defineProperty(t,"__esModule",{value:!0});var i;!function(e){e.NONE="NONE",e.X="X",e.Y="Y",e.XY="XY",e.AUTO="AUTO"}(i=t.DragMode||(t.DragMode={})),t.reconcileDragMode=n}),define("core/math/features/getgraphmode",["require","parsenodes","core/types/graphmode","core/lib/dragmode","core/lib/dragmode","core/math/types"],function(e){"use strict";function t(e,t){var r;return r=e&&e.hasOwnProperty("dragMode")?e.dragMode===u.AUTO?t.defaultDragMode:e.dragMode:t.defaultDragMode,s(r,t.moveStrategy)}function r(e,r){var n=r.getDependencies();switch(r.valueType){case c.Point:case c.ListOfPoint:return r.isMovablePoint&&t(this.userData,r)!==u.NONE?o.XYPOINT_MOVABLE:0===n.length?o.XYPOINT:e.validParametricVariables(n)?2===e.dimensions()?o.PARAMETRIC:o.PARAMETRIC_CURVE_3D:o.NONE;case c.Number:case c.ListOfNumber:return 2===e.dimensions()&&1===n.length?o.Y:3===e.dimensions()&&2===n.length?o.Z_3D:o.NONE;default:return o.NONE}}function n(e,t){var r=t._expression.getDependencies();if(r.length>1)return o.NONE;if(t._expression.valueType!==c.Number&&t._expression.valueType!==c.ListOfNumber)return o.NONE;var n=t._symbol;return e.graphMode(n,r)}function i(e,t){return t.isError?o.NONE:o.VISUALIZATION}var a=e("parsenodes"),o=e("core/types/graphmode"),s=e("core/lib/dragmode").reconcileDragMode,u=e("core/lib/dragmode").DragMode,c=e("core/math/types");a.Base.prototype.getGraphMode=function(e,t){return o.NONE},a.Expression.prototype.getGraphMode=r,a.Equation.prototype.getGraphMode=a.BaseComparator.prototype.getGraphMode=function(e,t){var r=t.getDependencies();return t.isConstant?o.NONE:t instanceof a.SolvedEquation?0===r.length?e.graphableAsConstant(t._symbol)?e.constantGraphMode(t._symbol):o.NONE:n(e,t):r.length<=2?o.IMPLICIT:o.NONE},a.DoubleInequality.prototype.getGraphMode=function(e,t){return e.constantGraphMode(t._symbol)},a.Assignment.prototype.getGraphMode=function(e,t){if(t instanceof a.SolvedEquation)return n(e,t);if(this.isEquation(t))return this.asEquation().getGraphMode(e,t);var i=t.getDependencies();switch(t.valueType){case c.Number:case c.ListOfNumber:switch(i.length){case 0:return e.graphableAsConstant(this._symbol)?e.constantGraphMode(this._symbol):o.NONE;case 1:return t.valueType!==c.ListOfNumber||e.graphableListVariables(this._symbol,i[0])?this.isSlider?o.NONE:e.graphMode(this._symbol,i):o.NONE;case 2:return 3===e.dimensions()&&"z"===this._symbol?o.Z_3D:o.NONE;default:return o.NONE}break;default:return r.call(this,e,t)}},a.FunctionDefinition.prototype.getGraphMode=function(e,t){if(1!==this._argSymbols.length)return o.NONE;var r=e.graphMode(this._symbol,this._argSymbols),n=t.getDependencies();switch(t.valueType){case c.Number:case c.ListOfNumber:switch(n.length){case 0:return r;case 1:return n[0]!==this._argSymbols[0]?o.NONE:r;default:return o.NONE}break;default:return o.NONE}},a.Regression.prototype.getGraphMode=function(e,t){return this.isLhsSimple&&t.isModelValid?1!==t.model.getDependencies().length?o.NONE:o.Y:o.NONE},a.Polygon.prototype.getGraphMode=function(e,t){return t.isError?o.NONE:o.POLYGONFILL},a.Object3D.prototype.getGraphMode=function(e,t){return t.isError?o.NONE:o.OBJECT3D},a.Histogram.prototype.getGraphMode=i,a.DotPlot.prototype.getGraphMode=i,a.BoxPlot.prototype.getGraphMode=i,a.Image.prototype.getGraphMode=function(e,t){return this.userData.showPoints?this.center.isError||this.radianAngle.isError||this.width.isError||this.height.isError||this.opacity.isError?o.NONE:o.XYPOINT:o.NONE}}),define("core/math/features/getgraphinfo",["require","parsenodes","core/math/builtinframe","core/math/domaintypes","core/math/policy"],function(e){"use strict";var t=e("parsenodes"),r=e("core/math/builtinframe"),n=e("core/math/domaintypes"),i=e("core/math/policy").defaultPolicy;t.Base.prototype.getGraphInfo=function(e,t){var r,i,a=t.getDependencies();switch(a.length){case 0:r=t.getLinearCoefficients(),i=t.boundDomain("x");break;case 1:i=t.boundDomain(a[0]),"known"===i.type&&(r=t.getLinearCoefficients());break;case 2:i=n.unknownDomain()}return{graphMode:this.getGraphMode(e,t),color:this.userData.color,pointStyle:this.userData.pointStyle,lineStyle:this.userData.lineStyle,operator:this.getOperator(),isLinear:!!r,linearCoefficients:r,domainBound:i}},t.Base.prototype.getLinearCoefficients=function(){var e=this.getDependencies();switch(e.length){case 0:return[+this.asValue(),0];case 1:if(this.polynomialOrder(e[0])>1)return;var t=this.getPolynomialCoefficients(e[0]);return[t[0]?+t[0].tryGetConcreteTree(i,r).asValue():0,t[1]?+t[1].tryGetConcreteTree(i,r).asValue():0];default:return}},t.OrderedPair.prototype.getLinearCoefficients=function(){var e=this.args[0].getLinearCoefficients(),t=this.args[1].getLinearCoefficients();if(e&&t)return[e,t]}}),define("core/math/features/getMoveStrategy",["require","parsenodes","core/math/types","core/math/maybe-rational","core/math/builtinframe","core/math/functions"],function(e){"use strict";function t(e){return{type:"none",inputString:e}}function r(e){return{type:"updateCoordinate",inputString:e}}function n(e,t,r){return{type:"updateSlider",inputString:e,id:t,coefficients:r}}function i(e,t,r,n){return{type:"updateSliderNonlinear",inputString:e,id:t,initialValue:r.constant_value,min:r.slider_min_number,max:r.slider_max_number,compiled:n}}function a(e,t,r,n,i,a){for(var o=t.getDependencies(),s=0;s<o.length;s++)if(i[o[s]])return!1;for(var u=o.length-1;u>=0;u--){var c=o[u];if(!a[c]){var l=n[c];if(void 0!==l){var p=r[c];if(1===p.order){var f=p.tree,d=f.getPolynomialCoefficients(c),y=d[1]?d[1].getConcreteTree(e,h):m,g=d[0]?d[0].getConcreteTree(e,h):m;if(g.isConstant&&y.isConstant&&isFinite(g.asValue())&&isFinite(y.asValue())&&0!==y.asValue()){return{symbol:c,id:l,coefficients:[-g.asValue()/y.asValue(),1/y.asValue()]}}}}}}return!1}function o(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}function s(e,t){var r=o(e),n={};for(var i in t){var a=t[i].evaluationState.assignment;t[i].evaluationState.is_slidable&&r[a]&&(n[a]=i)}return n}function u(e,t,r,n){for(var i=[],a=0;a<r.length;a++){var o=r[a],s={};i.push(s);for(var u=0;u<n.length;u++){var c=n[u],p=Object.create(t);p[c]=l.FreeVariable(c);var f=o.tryGetConcreteTree(e,p);f.isError?s[c]={tree:f,order:1/0}:s[c]={tree:f,order:f.polynomialOrder(c)}}}return i}function c(e,t,r){for(var n=0;n<e.length;n++){var i=e[n];0!==t[i].order&&(r[i]=!0)}}var l=e("parsenodes"),p=e("core/math/types"),f=e("core/math/maybe-rational").maybeRational,h=e("core/math/builtinframe"),d=e("core/math/functions"),m=l.Constant(f(0,1));l.Base.prototype.getMoveStrategy=function(){},l.Assignment.prototype.getMoveStrategy=function(e,t,r,n){if(this._expression instanceof l.OrderedPair)return this._expression.getMoveStrategy(e,t,r,n)},l.OrderedPair.prototype.getMoveStrategy=function(e,o,f,h){if(f.valueType===p.Point&&0===f.getDependencies().length){for(var m=this.getDependencies(),y=s(m,h),g=Object.keys(y),v=this.args,b=u(e,o,v,g),x=[],_={},S={},M=0;M<2;M++){var E=v[M],D=E.getInputString();if(E.isConstant)x[M]=r(D);else{var w=a(e,E,b[M],y,_,S);w&&(x[M]=n(D,w.id,w.coefficients),_[w.symbol]=!0,c(g,b[M],S)),x[M]||(x[M]=t(D))}}if("none"!==x[0].type||"none"!==x[1].type)return x;if(1===g.length){var T,P=g[0],I=y[P];try{T=l.OrderedPair([b[0][P].tree,b[1][P].tree]).getCompiledFunction()}catch(e){return}return d.dehydrateCompiledFunction(T),[i(v[0].getInputString(),I,h[I].evaluationState,T),t(v[1].getInputString())]}}},l.Image.prototype.getMoveStrategy=function(e,i,o,l){if((!this.userData||!1!==this.userData.shouldGraph)&&"OrderedPair"===o.center.type&&o.center.args[0].isConstant&&o.center.args[1].isConstant&&o.width.isConstant&&o.height.isConstant&&o.radianAngle.isConstant&&o.opacity.isConstant){var p=this.getDependencies(),f=s(p,l),h=Object.keys(f),d=[this.width,this.height];"OrderedPair"===this.center.type&&d.push(this.center.args[0],this.center.args[1]);for(var m=[],y={},g={},v=u(e,i,d,h),b=[2,3,0,1],x=0;x<b.length;x++){var _=b[x],S=d[_];if(S){var M=S.getInputString();if(S.isConstant)m[_]=r(M);else{var E=a(e,S,v[_],f,y,g);E&&(m[_]=n(M,E.id,E.coefficients),y[E.symbol]=!0,c(h,v[_],g)),m[_]||(m[_]=t(M))}}else m[_]=t("")}if("none"!==m[0].type||"none"!==m[1].type||"none"!==m[2].type||"none"!==m[3].type)return m}}}),define("core/math/features/getDefaultDragMode",["require","parsenodes","core/lib/dragmode"],function(e){"use strict";var t=e("parsenodes"),r=e("core/lib/dragmode").DragMode;t.Base.prototype.getMoveStrategy=function(){return r.NONE},t.Assignment.prototype.getDefaultDragMode=function(e){return"none"!==e[0].type&&"none"!==e[1].type?r.XY:"none"!==e[0].type?r.X:"none"!==e[1].type?r.Y:r.NONE},t.OrderedPair.prototype.getDefaultDragMode=function(e){return"updateSlider"===e[0].type&&"updateSlider"===e[1].type?r.XY:"updateSlider"===e[0].type?r.X:"updateSlider"===e[1].type?r.Y:r.NONE}}),define("core/math/features/tableinfo",["require","parsenodes","core/math/types","core/lib/label","core/math/distribution-spec"],function(e){"use strict";var t=e("parsenodes"),r=t.List,n=e("core/math/types"),i=e("core/lib/label"),a=e("core/math/distribution-spec").getFunctionSpecFromTree;t.Base.prototype.tableInfo=function(e,t){return!1},t.Identifier.prototype.tableInfo=function(e,t){return!!e.validFirstColumnVariable(this._symbol)&&{independent_variable:this._symbol,dependent_column:this.getInputString(),by_reference:!1}},t.Expression.prototype.tableInfo=function(e,t){var i=t.getDependencies();if(a(this))return!1;switch(t.valueType){case n.Point:case n.ListOfPoint:if(0!==i.length)return!1;if(t.isMovablePoint&&("updateSlider"===t.moveStrategy[0].type||"updateSlider"===t.moveStrategy[1].type))return!1;return{independent_variable:"x",dependent_column:"y",by_reference:!1,values:r.wrap(t).mapElements(e,function(e){return e.asArray()})};case n.Number:if(1!==i.length)return!1;var o=i[0];return!!e.validFirstColumnVariable(o)&&{independent_variable:o,dependent_column:this.getInputString(),by_reference:!1};default:return!1}},t.Assignment.prototype.tableInfo=function(e,r){if(r instanceof t.SolvedEquation)return!1;if(!this.getInputString().length)return!1;if(a(this))return!1;var n=r.getDependencies();if(n.length>1)return!1;var o;if(0===n.length){if(!e.tableableAsConstant(this._symbol))return!1;o=e.implicitIndependent(this._symbol)}else o=n[0];return!!e.validFirstColumnVariable(o)&&{independent_variable:o,dependent_column:e.assignmentForbidden(this._symbol)?i.trimLatex(this.getInputString().replace(/[^=]*=/,"")):i.trimLatex(this.getInputString().split("=")[0]),by_reference:!e.assignmentForbidden(this._symbol)}},t.FunctionDefinition.prototype.tableInfo=function(e,t){if(1!==this._argSymbols.length)return!1;if(!this.getInputString().length)return!1;if(t.getDependencies().length>1)return!1;var r=this._argSymbols[0];if(!e.validFirstColumnVariable(r))return!1;var n=e.assignmentForbidden(this._symbol);return{independent_variable:r,dependent_column:n?i.trimLatex(this.getInputString().replace(/[^=]*=/,"")):i.trimLatex(this.getInputString().split("=")[0]),by_reference:!n}},t.BaseComparator.prototype.tableInfo=function(e,t){return!1},t.DoubleInequality.prototype.tableInfo=function(e,t){return!1},t.Equation.prototype.tableInfo=function(e,t){return!1}}),define("core/math/features/tableerror",["require","parsenodes","core/lib/worker-i18n"],function(e){"use strict";var t=e("parsenodes"),r=e("core/lib/worker-i18n");t.Base.prototype.tableError=function(){return this.isInequality()?r.t("Inequalities are not allowed."):!(this instanceof t.Expression)&&r.t("This type of expression is not allowed.")},t.List.prototype.tableError=function(){return r.t("Lists are not allowed.")},t.Equation.prototype.tableError=t.Assignment.prototype.tableError=function(){return r.t("Equations are not allowed.")},t.FunctionDefinition.prototype.tableError=function(){return r.t("Function definitions are not allowed.")},t.Regression.prototype.tableError=function(){return r.t("Regressions are not allowed.")}}),define("core/lib/deepCopy",["require","exports"],function(e,t){"use strict";function r(e){var t=e;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),!t)return t;if("object"!=typeof t)return t;if(Array.isArray(t))return t.map(r);var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=r(t[i]));return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}),define("core/types/styles",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.POINT="POINT",e.OPEN="OPEN",e.CROSS="CROSS"}(t.PointStyle||(t.PointStyle={}));!function(e){e.SOLID="SOLID",e.DASHED="DASHED",e.DOTTED="DOTTED"}(t.LineStyle||(t.LineStyle={}))}),define("core/math/cdf-branches",["require","exports","tslib","core/lib/deepCopy","core/math/plotter","core/math/domaintypes","core/types/styles"],function(e,t,r,n,i,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t){var n=e.segments,i=t.segments,a=r.__spreadArrays(n,i);return r.__assign(r.__assign({},e),{segments:a})},u=function(e){var t=e.viewState,r=e.graphInfo,s=e.compiled,u=e.derivative,c=e.bounds,l=e.included,p=e.discrete,f=n.default(r),h=a.intersectDomains(r.domainBound,a.knownDomain(c));if("known"===h.type)return f.domainBound=h,p?f.pointStyle=l?o.PointStyle.POINT:o.PointStyle.OPEN:f.lineStyle=o.LineStyle.SOLID,i.default.computeGraphData({graphInfo:f,viewState:t,compiled:s,derivative:u,discrete:p})};t.makeCDFTopBranches=function(e){var t,r=e.viewState,n=e.graphInfo,a=e.compiled,o=e.derivative,c=e.bounds,l=e.discrete,p=e.maxOverride,f=c[0],h=c[1],d=[];if(l){f=Math.ceil(f),h=Math.floor(h);var m=void 0!==p?p:1/0;if(f===-1/0&&h>=m)t=u({bounds:[f,m],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l}),d.push(t);else if(f===-1/0&&h<1/0)t=u({bounds:[f,h],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l}),d.push(t),d.push(u({bounds:[h+1,m],included:!1,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l}));else if(f>-1/0&&h>=m)t=u({bounds:[f,m],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l}),d.push(u({bounds:[-1/0,f-1],included:!1,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l})),d.push(t);else{t=u({bounds:[f,h],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l});var y=u({bounds:[-1/0,f-1],included:!1,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l}),g=u({bounds:[h+1,m],included:!1,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l});d.push(t);var v=void 0;y&&g&&(v=s(y,g),d.push(v))}}else t=u({bounds:[f,h],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l}),d.push(i.default.computeGraphData({viewState:r,graphInfo:n,compiled:a,derivative:o}));return{cdfTopBranch:t,topBranches:d}}}),define("core/math/copy-defined-pois",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){for(var t=[],r=[],n=e.length,i=0;i<n;i++)t.push(e[i][0]),r.push(e[i][1]);return{defined:{x:t,y:r}}};t.default=r}),define("core/types/opacity",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOW=.2,t.DEFAULT=.4,t.HIGH=.8}),define("core/types/slider-loop-modes",["require","exports"],function(e,t){"use strict";function r(e){switch(e){case n.LOOP_FORWARD:return"dcg-icon-arrow-one-way";case n.LOOP_FORWARD_REVERSE:return"dcg-icon-arrow-two-way";case n.PLAY_ONCE:return"dcg-icon-arrow-once";case n.PLAY_INDEFINITELY:return"dcg-icon-arrow-infinite"}}
Object.defineProperty(t,"__esModule",{value:!0});var n;!function(e){e.LOOP_FORWARD_REVERSE="LOOP_FORWARD_REVERSE",e.LOOP_FORWARD="LOOP_FORWARD",e.PLAY_ONCE="PLAY_ONCE",e.PLAY_INDEFINITELY="PLAY_INDEFINITELY"}(n=t.SliderLoopMode||(t.SliderLoopMode={})),t.getSliderIcon=r}),define("core/types/label-sizes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.SMALL="small",e.MEDIUM="medium",e.LARGE="large"}(t.LabelSize||(t.LabelSize={}))}),define("core/types/label-orientations",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.DEFAULT="default",e.LEFT="left",e.RIGHT="right",e.ABOVE="above",e.BELOW="below"}(t.LabelOrientation||(t.LabelOrientation={}))}),define("core/lib/default-spec",["require","exports","underscore","core/lib/deepCopy"],function(e,t,r,n){"use strict";function i(e,t){var n={};for(var i in t)t.hasOwnProperty(i)&&(r.isEqual(e[i],t[i])||(n[i]=t[i]));return n}function a(e,t){var n=void 0,i={};for(var a in t)t.hasOwnProperty(a)&&(r.isEqual(e[a],t[a])||(i[a]=t[a],n=i));return n}function o(e,t){t||(t={});var r={};for(var i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(r[i]=n.default(e[i]));for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.stripDefaults=i,t.stripDefaultsAndMaybeReturnUndefined=a,t.populateDefaults=o}),define("core/graphing-calc/json/expression",["require","exports","tslib","core/types/opacity","core/types/styles","core/lib/dragmode","core/types/slider-loop-modes","core/types/label-sizes","core/types/label-orientations","core/lib/default-spec"],function(e,t,r,n,i,a,o,s,u,c){"use strict";function l(e){return r.__assign(r.__assign(r.__assign({},t.DEFAULTS),e),{slider:r.__assign(r.__assign({},t.SLIDER_DEFAULTS),e.slider),cdf:r.__assign(r.__assign({},t.CDF_DEFAULTS),e.cdf),vizProps:r.__assign(r.__assign({},t.VIZ_DEFAULTS),e.vizProps),clickableInfo:r.__assign(r.__assign({},t.CLICKABLEINFO_DEFAULTS),e.clickableInfo)})}function p(e){var n=c.stripDefaults(t.DEFAULTS,r.__assign(r.__assign({},e),{slider:c.stripDefaults(t.SLIDER_DEFAULTS,e.slider)})),i=c.stripDefaultsAndMaybeReturnUndefined(t.CDF_DEFAULTS,e.cdf);void 0===i?delete n.cdf:n.cdf=i;var a=c.stripDefaultsAndMaybeReturnUndefined(t.VIZ_DEFAULTS,e.vizProps);void 0===a?delete n.vizProps:n.vizProps=a;var o=c.stripDefaultsAndMaybeReturnUndefined(t.CLICKABLEINFO_DEFAULTS,e.clickableInfo);return void 0===o?delete n.clickableInfo:n.clickableInfo=o,n}function f(e){return{type:"statement",id:e.id,latex:e.latex,label:e.label,color:e.color,fill:e.fill,fillOpacity:e.fillOpacity,lineWidth:e.lineWidth,points:e.points,lines:e.lines,pointStyle:e.pointStyle,lineStyle:e.lineStyle,dragMode:e.dragMode,labelSize:e.labelSize,labelOrientation:e.labelOrientation,verticalLabel:e.verticalLabel,suppressTextOutline:e.suppressTextOutline,interactiveLabel:e.interactiveLabel,editableLabelMode:e.editableLabelMode,residualVariable:e.residualVariable,regressionParameters:e.regressionParameters,isLogModeRegression:e.isLogModeRegression,showLabel:e.showLabel,shouldGraph:e.hidden,slider:{min:e.slider.hardMin?e.slider.min:"",max:e.slider.hardMax?e.slider.max:"",step:e.slider.step},parametricDomain:e.parametricDomain,polarDomain:e.polarDomain,cdf:e.cdf,vizProps:e.vizProps,clickableInfo:e.clickableInfo}}Object.defineProperty(t,"__esModule",{value:!0}),t.CDF_DEFAULTS={show:!1,min:"",max:""},t.VIZ_DEFAULTS={breadth:"",axisOffset:"",alignedAxis:"x",binAlignment:"center",dotplotXMode:"exact",dotplotSize:"medium",histogramMode:""},t.CLICKABLEINFO_DEFAULTS={enabled:!1,description:"",assignment:"",expression:""};var h;!function(e){e.None="NONE",e.Math="MATH",e.Text="TEXT"}(h=t.EditableLabelMode||(t.EditableLabelMode={})),t.DEFAULT_SLIDER_PERIOD=4e3,t.DEFAULTS={folderId:"",latex:"",color:"",showLabel:!1,label:"",cdf:t.CDF_DEFAULTS,vizProps:t.VIZ_DEFAULTS,clickableInfo:t.CLICKABLEINFO_DEFAULTS,hidden:!1,secret:!1,dragMode:a.DragMode.AUTO,labelSize:s.LabelSize.MEDIUM,labelOrientation:u.LabelOrientation.DEFAULT,verticalLabel:!1,suppressTextOutline:!1,interactiveLabel:!1,editableLabelMode:h.None,residualVariable:"",isLogModeRegression:!1,pointStyle:i.PointStyle.POINT,lineStyle:i.LineStyle.SOLID,fillOpacity:""+n.DEFAULT,lineWidth:"",regressionParameters:{},displayEvaluationAsFraction:!1,slider:{},polarDomain:{min:"",max:""},parametricDomain:{min:"",max:""},points:void 0,lines:void 0,fill:void 0},t.SLIDER_DEFAULTS={hardMin:!1,hardMax:!1,animationPeriod:t.DEFAULT_SLIDER_PERIOD,loopMode:o.SliderLoopMode.LOOP_FORWARD_REVERSE,playDirection:1,isPlaying:!1,min:"-10",max:"10",step:""},t.inflateDefaults=l,t.stripDefaults=p,t.computeParsableState=f}),define("core/math/features/graph",["require","underscore","parsenodes","core/math/plotter","core/types/graphmode","core/math/comparators","core/lib/dragmode","core/math/expression-types","core/math/types","core/math/builtin","core/math/cdf-branches","core/math/copy-defined-pois","core/math/distribution-spec","core/graphing-calc/json/expression"],function(e){"use strict";function t(e,t){for(var r=1/0,n=-1/0,i=1/0,a=-1/0,o=0;o<t.length;o++)for(var s=t[o],u=0;u<s.length;u+=2){var c=s[u],l=s[u+1];c<r&&(r=c),c>n&&(n=c),l<i&&(i=l),l>a&&(a=l)}if(isFinite(r)&&isFinite(i))return{type:e,xmin:r,ymin:i,xmax:n,ymax:a}}function r(e,t,r){var n={};r-=.5*t;for(var i=e.length-1;i>=0;i--){var a=e[i],o=Math.floor((a-r)/t);n[o]?n[o].data.push(a):n[o]={id:o,data:[a],min:o*t+r,max:o*t+r+t,center:o*t+r+t/2}}return n}function n(e){return Array.prototype.concat.apply([],e)}function i(e,t,r){return!!e&&(0===t&&0===r?"none"!==e[2].type||"none"!==e[3].type:0!==t&&0!==r?"none"!==e[0].type&&"none"!==e[1].type:0!==t?"none"!==e[0].type:0!==r&&"none"!==e[1].type)}var a=e("underscore"),o=e("parsenodes"),s=e("core/math/plotter").default,u=e("core/types/graphmode"),c=e("core/math/comparators"),l=e("core/lib/dragmode").DragMode,p=e("core/math/expression-types").getReconciledExpressionProps,f=e("core/math/types"),h=o.List,d=e("core/math/builtin"),m=e("core/math/cdf-branches").makeCDFTopBranches,y=e("core/math/copy-defined-pois").default,g=e("core/math/distribution-spec").getFunctionSpecFromTree,v=e("core/graphing-calc/json/expression").EditableLabelMode;o.Base.prototype._graph=function(e,t,r,i){function c(e,t){if(e){var r,n,i,a,o,s,u,c,l=e.discrete?"discreteDistribution":"continuousDistribution";if("binomialdist"===e.symbol)return n=t.args[1].asValue(),i=t.args.length>2?t.args[2].asValue():.5,r=d.binompdf(i*n,n,i),{type:l,xmin:0,xmax:n,ymin:0,ymax:r};if("poissondist"===e.symbol)return a=t.args[1].asValue(),r=Math.max(d.poissonpdf(Math.floor(a),a),d.poissonpdf(Math.ceil(a),a)),{type:l,xmin:0,xmax:2.5*a,ymin:0,ymax:r};if("normaldist"===e.symbol)return a=t.args.length>1?t.args[1].asValue():0,o=t.args.length>2?t.args[2].asValue():1,r=d.normalpdf(a,a,o),{type:l,xmin:a-2*Math.abs(o),xmax:a+2*Math.abs(o),ymin:0,ymax:r};if("uniformdist"===e.symbol)return s=t.args.length>1?t.args[1].asValue():0,u=t.args.length>2?t.args[2].asValue():1,a=(s+u)/2,c=u-s,r=d.uniformpdf(a,s,u),{type:l,xmin:s-c/3,xmax:u+c/3,ymin:0,ymax:r};if("tdist"===e.symbol){var p=t.args[1].asValue();return r=d.tpdf(0,p),{type:l,xmin:-3,xmax:3,ymin:0,ymax:r}}}}function l(e){var t=e.editableLabelMode;return t===v.Text||t===v.Math}if(t instanceof o.SolvedEquation)return this._graph(e,t._expression,r,i);var b,x,_,S,M,E=this,D=t.getExpressionType(i.graphMode,t.valueType),w=p(D,{points:this.userData.points,lines:this.userData.lines,fill:this.userData.fill});switch(i.graphMode){case u.XYPOINT_MOVABLE:return b=[t.asArray()],_=this.userData.shouldGraph&&w.points,M=this.userData.showLabel&&!_,_?[{segments:[b],graphMode:i.graphMode,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:l(this.userData),labels:this.computedLabels||[],poi:y(b)}]:M?[{segments:[b],graphMode:u.XYPOINT,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,nakedLabel:!0,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:l(this.userData),labels:this.computedLabels||[],poi:y(b)}]:[];case u.XYPOINT:return x=[],b=h.wrap(t).mapElements(e,function(e){return e.asArray()}),_=this.userData.shouldGraph&&w.points,S=this.userData.shouldGraph&&w.lines,M=this.userData.showLabel&&!_&&!S,(this.userData.showLabel||_)&&x.push({segments:[b],graphMode:i.graphMode,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,showPoint:_,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,interactiveLabel:!!this.userData.interactiveLabel,editableLabel:l(this.userData),nakedLabel:M,labels:this.computedLabels||[],poi:y(b)}),S&&x.push({segments:[b].map(n),graphMode:u.PARAMETRIC,color:this.userData.color,style:this.userData.lineStyle,lineWidth:this.metaData.computedLineWidth,poi:[]}),x;case u.PARAMETRIC:case u.PARAMETRIC_CURVE_3D:var T=this.userData,P=[];if(x=h.wrap(t).mapElements(e,function(t){if(0===t.getDependencies().length)return b=[t.asArray()],{segments:[b],graphMode:u.XYPOINT,color:T.color,style:T.lineStyle,lineWidth:E.metaData.computedLineWidth,poi:y(b)};var n=t.getCompiledFunction(),a=E.getGraphInfo(e,t);return a.graphMode=i.graphMode,a.domain={min:E.metaData.evaluatedDomainMin,max:E.metaData.evaluatedDomainMax},a.style=E.userData.lineStyle,a.lineWidth=E.metaData.computedLineWidth,s.computeGraphData({viewState:r,graphInfo:a,compiled:n})}),w.fill){if(x.forEach(function(e){P.push({segments:e.segments,color:T.color,fillOpacity:E.metaData.computedFillOpacity,graphMode:u.POLYGONFILL,poi:[]})}),!w.lines)return P;x=x.concat(P)}return x;case u.X:case u.Y:case u.IMPLICIT:case u.POLAR:case u.Z_3D:x=[];var I=t.valueType===f.Number;return h.wrap(t).eachElement(e,function(t){var n,o=i.graphMode===u.IMPLICIT||i.graphMode===u.Z_3D?t.getCompiledFunction(["x","y"]):t.getCompiledFunction(),l=g(E),p=l&&l.discrete,f=c(l,t);try{n=t.getCompiledDerivative()}catch(e){}var h=E.getGraphInfo(e,t);h.graphMode=i.graphMode,h.style=E.userData.lineStyle,h.lineWidth=E.metaData.computedLineWidth,i.graphMode===u.POLAR&&(h.domain={min:E.metaData.evaluatedDomainMin,max:E.metaData.evaluatedDomainMax,isExplicit:E.metaData.isExplicitDomain});var d=E.metaData.evaluatedCDFMin,v=E.metaData.evaluatedCDFMax;if(isNaN(d)||isNaN(v)||!I){var b={viewState:r,graphInfo:h,compiled:o,derivative:n,discrete:p};l&&"binomialdist"===l.symbol&&(b.maxOverride=t.args[1].asValue());var _=s.computeGraphData(b);f&&(_.boundingBox=f),_.fillSegments?x.push(a.omit(_,"fillSegments")):p?x.push({graphMode:u.XYPOINT,segments:[_.segments],showPoint:E.userData.shouldGraph,color:E.userData.color,style:_.style,boundingBox:f,poi:y(_.segments)}):x.push(_),h.graphMode===u.IMPLICIT&&"="!==h.operator&&x.push({graphMode:u.POLYGONFILL,segments:_.fillSegments,poi:{}})}else{var S={viewState:r,graphInfo:h,compiled:o,derivative:n,bounds:[d,v],discrete:p};l&&"binomialdist"===l.symbol&&(S.maxOverride=t.args[1].asValue());var M=m(S),D=M.cdfTopBranch,w=a.each(M.topBranches,function(e){e&&(e.boundingBox=f)});if(a.every(w,function(e){return void 0!==e}))if(p){if(x=w.map(function(e){return{graphMode:u.XYPOINT,segments:[e.segments],showPoint:E.userData.shouldGraph,color:E.userData.color,style:e.style,poi:y(e.segments),boundingBox:f}}),D&&D.segments.length){var T=[];D.segments.forEach(function(e){T.push([e[0],0,e[0],e[1]])}),x.push({graphMode:u.PARAMETRIC,segments:T,boundingBox:f,poi:{}})}}else if(x=w,D&&D.segments.length){var P,C,O,A;for(P=0;P<D.segments.length;P++)if(C=D.segments[P],C.length>=4){O=C[0];break}for(P=D.segments.length-1;P>=0;P--)if(C=D.segments[P],C.length>=4){A=C[C.length-2];break}if(isFinite(O)&&isFinite(A)){var L=s.polygonsFromSegments(D.segments,[[O,0,A,0]],D.graphMode);x.push({graphMode:u.POLYGONFILL,segments:L,poi:{}})}}}}),x;default:return!1}},o.Base.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);return this._graph(e,t,r,n)},o.BaseComparator.prototype.graph=function(e,t,r){var n=this,i=this.getGraphInfo(e,t),a=i.graphMode;if(a===u.IMPLICIT)return this._graph(e,t,r,i);if(a===u.NONE)return!1;if(!(t instanceof o.SolvedEquation))return!1;var l=this.getOperator(),p=[],f=[],h=!0;t._expression.eachElement(e,function(e){p.push(e.getCompiledFunction());try{f.push(e.getCompiledDerivative())}catch(e){h=!1}}),h||(f=void 0);var d,m,y=[],g=[-1,0,0,1],v=p.length;for(m=0;m<v;m++){var b=this.getGraphInfo(e,t._expression.args[m]);b.graphMode=a,b.style=n.userData.lineStyle,i.graphMode===u.POLAR&&(b.domain={min:n.metaData.evaluatedDomainMin,max:n.metaData.evaluatedDomainMax,isExplicit:n.metaData.isExplicitDomain}),d=s.computeGraphData({viewState:r,graphInfo:b,compiled:p[m],derivative:f?f[m]:void 0}),d.operator=c.get(c.table[l].inclusive,g[m%4]),y.push(d)}for(m=0;m<v;m+=4){var x=s.polygonsFromSegments(y[m+1].segments,y[m+2].segments,a);y.push({graphMode:u.POLYGONFILL,segments:x,poi:{}})}return y},o.DoubleInequality.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);if(n.graphMode===u.NONE)return!1;var i=[],a=c.get(c.table[this._operators[0]].inclusive,0),o=c.get(c.table[this._operators[1]].inclusive,0),l=this.userData,p=this.metaData,f=this;return h.eachArgs(e,t._expressions,function(t){var c,h;t[0].userData=t[1].userData=l,t[0].metaData=t[1].metaData=p,c=f._graph(e,t[0],r,n)[0],c.operator=a,i.push(c),h=f._graph(e,t[1],r,n)[0],h.operator=o,i.push(h);var d=s.polygonsFromSegments(c.segments,h.segments,c.graphMode);i.push({graphMode:u.POLYGONFILL,segments:d,poi:{}})}),i},o.Regression.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);return this._graph(e,t.model,r,n)},o.Polygon.prototype.graph=function(e,t,r){for(var i=this.getGraphInfo(e,t),a=t.args[0].asValue(),o=[],s=void 0===this.userData.lines||this.userData.lines,c=void 0===this.userData.fill||this.userData.fill,l=[],p=[],f=0;f<a.length;f++){var h=a[f][0],d=a[f][1];isFinite(h)&&isFinite(d)?(s||c)&&p.push([h,d]):(s||c)&&(p.length>1&&l.push(p),p=[])}if(l.length||p.length){p.push([a[0][0],a[0][1]]),l.push(p);var m=l.map(n);c&&o.push({segments:m,graphMode:u.POLYGONFILL,poi:[],color:i.color,fillOpacity:this.metaData.computedFillOpacity,style:i.style}),s&&o.push({segments:m,graphMode:u.PARAMETRIC,poi:[],color:i.color,style:this.userData.lineStyle,lineWidth:this.metaData.computedLineWidth})}return o};var b=function(e,t){var r=[];return h.wrap(t).eachElement(e,function(e){r.push(e.args.map(function(e){return e.asValue()}))}),r};o.Object3D.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);return[{segments:[b(e,t)],color:n.color,objectName:this._symbol,poi:[],graphMode:u.OBJECT3D}]},o.Histogram.prototype.graph=function(e,n,i){var a=this.getGraphInfo(e,n),o=n.args[0].asValue(),s=n.args[1].asValue(),c=this.userData.vizProps&&"left"===this.userData.vizProps.binAlignment?s/2:0,l=r(o,s,c),p=1;this.userData.vizProps&&"density"===this.userData.vizProps.histogramMode?p=1/(o.length*s):this.userData.vizProps&&"relative"===this.userData.vizProps.histogramMode&&(p=1/o.length);var f=[],h=[];for(var d in l){var m=l[d],y=m.data.length;h.push([m.min,0*p,m.min,y*p,m.max,y*p,m.max,0*p]);var g=0;l[m.id+1]&&(g=l[m.id+1].data.length);var v=[m.min,0*p,m.min,y*p,m.max,y*p];g<y&&v.push(m.max,g*p),f.push(v)}var b=t("histogram",h);return b&&s&&(b.binWidth=s),[{segments:h,graphMode:u.POLYGONFILL,boundingBox:b,poi:[],color:a.color,fillOpacity:.4},{segments:f,graphMode:u.Y,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},color:a.color}]},o.DotPlot.prototype.graph=function(e,n,i){var a,o,s,c,l=this.getGraphInfo(e,n),p=n.args[1].asValue(),f=this.userData.vizProps&&"left"===this.userData.vizProps.binAlignment?p/2:0,h=r(n.args[0].asValue(),p,f),d=!1,m=[];for(o in h){s=h[o];for(var g=s.data.length-1;g>=0;g--)s.center!==s.data[g]&&(d=!0)}if(this.userData.vizProps&&"exact"===this.userData.vizProps.dotplotXMode)for(o in h)for(s=h[o],c=s.data,c.reverse(),a=0;a<c.length;a++)m.push([c[a],a+1]);else for(o in h)for(s=h[o],c=s.data,a=0;a<c.length;a++)m.push([s.center,a+1]);var v=t("dotplot",m);return v&&p&&(v.ymin=0,v.xmin-=.5*p,v.xmax+=.5*p,v.binWidth=p),[{segments:[m],graphMode:u.XYPOINT,boundingBox:v,poi:y(m),color:l.color,style:this.userData.pointStyle,pointSize:this.userData.vizProps&&this.userData.vizProps.dotplotSize,showPoint:!0,needsDotplotXMode:d}]},o.BoxPlot.prototype.graph=function(e,r,n){var i=this.getGraphInfo(e,r),a=this.metaData.evaluatedAxisOffset,o=this.metaData.evaluatedBreadth,s=r.args[0].asValue();if(isNaN(o)||isNaN(a))return{};var c=Math.min.apply(null,s),l=Math.max.apply(null,s),p=d.quartile(s,1),f=d.quartile(s,2),h=d.quartile(s,3),m=a,y=m-o/2,g=m+o/2,v=o/10,b=[[p,y,h,y,h,g,p,g,p,y],[f,y,f,g],[p,m,c,m],[h,m,l,m],[c,m-v,c,m+v],[l,m-v,l,m+v]];if(this.userData.vizProps&&"y"===this.userData.vizProps.alignedAxis)for(var x=0;x<b.length;x++)for(var _=b[x],S=0;S<_.length;S+=2){var M=_[S];_[S]=_[S+1],_[S+1]=M}return[{segments:b,graphMode:u.PARAMETRIC,boundingBox:t("boxplot",b),poi:[],color:i.color}]},o.Table.prototype.isValueDraggable=function(e,t,r){if(!e.columns[t].isIndependent)return!1;var n=this.columns[t],i=n.values,a=i&&i[r];return!(!a||!isFinite(a.asValue())||0!==a._dependencies.length)},o.Table.prototype.graph=function(e,t,r){var i=[];if(t.columns[0].isError)return i;for(var a=t.columns[0],o=a.values,s=1;s<this.columns.length;s++){var c=t.columns[s];if(!c.isError){var p=this.columns[s].header.userData;if(!p.hidden){for(var f=p.dragMode,h=f===l.X||f===l.XY,d=f===l.Y||f===l.XY,m=!!p.points,g=!!p.lines,v=c.isDiscrete(a),b=g&&v,x=g&&!v,_=[],S=[],M=[],E=[],D=[],w=[],T=1/0,P=-1/0,I=1/0,C=-1/0,O=0;O<o.length;O++){var A=o[O],L=c.values[O];if(A&&L&&isFinite(A.asValue())&&isFinite(L.asValue())){var N=A.asValue(),q=L.asValue();if(m){var F=h&&this.isValueDraggable(t,0,O),R=d&&this.isValueDraggable(t,s,O);F||R?(M.push([N,q]),E.push({index:O,dragX:F,dragY:R})):S.push([N,q])}b&&w.push([N,q]),N<T&&(T=N),N>P&&(P=N),q<I&&(I=q),q>C&&(C=q)}else b&&(w.length>1&&D.push(w),w=[])}var V={type:"table",xmin:T,xmax:P,ymin:I,ymax:C};if(M.length&&_.push({graphMode:u.XYPOINT_MOVABLE,segments:[M],color:p.color,tableId:p.tableId,poi:y(M),movablePointInfo:E,boundingBox:V}),S.length&&_.push({segments:[S],graphMode:u.XYPOINT,showPoint:!0,poi:y(S),color:p.color,style:p.pointStyle,tableId:p.tableId,boundingBox:V}),(D.length||w.length)&&(D.push(w),_.push({segments:D.map(n),graphMode:u.PARAMETRIC,poi:[],color:p.color,style:p.lineStyle,tableId:p.tableId,boundingBox:V})),x){var k=this.columns[s].header.graph(e,t.columns[s].header,r);k.length&&Array.prototype.push.apply(_,k)}_.length&&(i[p.id]=_)}}}return i},o.Image.prototype.graph=function(e,t,r){var n=[];if(!("OrderedPair"===t.center.type&&t.center.args[0].isConstant&&t.center.args[1].isConstant&&t.radianAngle.isConstant&&t.width.isConstant&&t.height.isConstant&&t.opacity.isConstant))return n;for(var a=[],o=[],s=t.width.asValue()/2,c=t.height.asValue()/2,l=t.radianAngle.asValue(),p=-1;p<=1;p++)for(var f=-1;f<=1;f++){var h=[t.center.args[0].asValue()+p*s*Math.cos(l)+f*c*Math.sin(l),t.center.args[1].asValue()-p*s*Math.sin(l)+f*c*Math.cos(l)],d=i(t.moveStrategy,p,f);d&&(a.push(h),o.push([p,f]))}return n.push({segments:[a],scaleFactors:[o],graphMode:u.XYPOINT_MOVABLE,color:this.userData.color,style:this.userData.style,poi:y(a)}),n}}),define("core/math/features/elementAt",["require","parsenodes","core/math/builtinframe"],function(e){"use strict";function t(e,t){for(var r=0;r<this.length;r++)t(this.elementAt(e,r))}function r(e,t){for(var r=[],n=0;n<this.length;n++)r.push(t(this.elementAt(e,n)));return r}var n=e("parsenodes"),i=e("core/math/builtinframe");n.List.prototype.elementAt=function(e,t){return t=Math.floor(t),t>=0&&t<this.args.length?this.args[t]:n.Constant(NaN)},n.Broadcast.prototype.elementAt=function(e,t){if((t=Math.floor(t))<0||t>=this.length)return n.Constant(NaN);for(var r={},a=0;a<this._replacedSymbols.length;a++)r[this._replacedSymbols[a]]=this._lists[a].elementAt(e,t);return this._expression.substitute(r).getConcreteTree(e,i)},n.List.prototype.eachElement=t,n.Broadcast.prototype.eachElement=t,n.List.prototype.mapElements=r,n.Broadcast.prototype.mapElements=r,n.OrderedPair.prototype.elementAt=function(e,t){switch(t){case 0:return this.args[0];case 1:return this.args[1];default:return n.Constant(NaN)}}}),define("core/lib/number-to-latex",["require","exports"],function(e,t){"use strict";function r(e){if("string"==typeof e)return e;if(void 0===e)return"";var t=e+"";return t=t.replace(/1e\\+?([-\\d]+)/,"10^{$1}"),t=t.replace(/([-\\d\\.]+)e\\+?([-\\d]+)/,"$1\\\\cdot 10^{$2}")}function n(e){var t=e+"";if(/\\d+\\.?\\d*e[\\+\\-]*\\d+/i.test(t)){var r=String(t).toLowerCase().split("e"),n=parseFloat(r[0]),i=parseInt(r[1],10),a=Math.abs(i),o=Math.abs(n).toString().split(".");if(i<0)t="0."+new Array(a).join("0")+o.join("");else{var s=o[1];s&&(a-=s.length),t=o.join("")+new Array(a+1).join("0")}n<0&&(t="-"+t)}return t}function i(e,t){void 0===t&&(t=2);var r=n(e),i=r.indexOf(".");if(-1===i)return r;for(var a,o=i+1;o<r.length;o++)if(a){if(r[o]!==a)break}else{if("0"!==r[o]&&"9"!==r[o])break;a=r[o]}return r.substr(0,Math.max(i+5,o+t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.numberToDecimalString=n,t.numberToStatsConfidenceLatex=i}),define("core/math/features/printLatex",["require","parsenodes","core/lib/label","core/lib/number-to-latex"],function(e){"use strict";function t(){return u.identifierToLatex(this._symbol)+" "}function r(e){switch(e){case">":return"\\\\gt ";case"<":return"\\\\lt ";case">=":return"\\\\ge ";case"<=":return"\\\\le ";case"=":return"="}}function n(e){return e.printLatex()}function i(){switch(this._symbol){case"sqrt":return"\\\\sqrt{"+this.args[0].printLatex()+"}";case"nthroot":return"\\\\sqrt["+this.args[1].printLatex()+"]{"+this.args[0].printLatex()+"}";case"logbase":return"\\\\log_{"+this.args[1].printLatex()+"}\\\\left("+this.args[0].printLatex()+"\\\\right)";default:return u.identifierToLatex(this._symbol)+"\\\\left("+this.args.map(n).join(", ")+"\\\\right)"}}function a(e){return e.isConstant&&!0===e.asValue()}function o(e){return e.isConstant&&e.isNaN()}var s=e("parsenodes"),u=e("core/lib/label"),c=e("core/lib/number-to-latex").default;s.Identifier.prototype.printLatex=t,s.FreeVariable.prototype.printLatex=t,s.Constant.prototype.printLatex=function(){return c(this.asValue())},s.Negative.prototype.printLatex=function(){return"-\\\\left("+this.args[0].printLatex()+"\\\\right)"},s.Add.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)+\\\\left("+this.args[1].printLatex()+"\\\\right)"},s.PercentOf.prototype.printLatex=function(){return this.args[0].printLatex()+" \\\\% \\\\operatorname{of} "+this.args[1].printLatex()},s.Subtract.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)-\\\\left("+this.args[1].printLatex()+"\\\\right)"},s.Multiply.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)*\\\\left("+this.args[1].printLatex()+"\\\\right)"},s.Divide.prototype.printLatex=function(){return"\\\\frac{"+this.args[0].printLatex()+"}{"+this.args[1].printLatex()+"}"},s.Exponent.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)^{"+this.args[1].printLatex()+"}"},s.Assignment.prototype.printLatex=function(){return u.identifierToLatex(this._symbol)+"="+this._expression.printLatex()},s.Equation.prototype.printLatex=function(){return this._lhs.printLatex()+"="+this._rhs.printLatex()},s.BaseComparator.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+r(this.operator)+"\\\\left("+this.args[1].printLatex()+"\\\\right)"},s.DoubleInequality.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+r(this.args[1])+this.args[2].printLatex()+r(this.args[3])+"\\\\left("+this.args[4].printLatex()+"\\\\right)"},s.And.prototype.printLatex=function(){if(!(this.args[0]instanceof s.BaseComparator&&this.args[1]instanceof s.BaseComparator))throw new Error("Not implemented");if(this.args[0].args[1].printLatex()!==this.args[1].args[0].printLatex())throw new Error("Not implemented");return"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)"+r(this.args[0].operator)+"\\\\left("+this.args[0].args[1].printLatex()+"\\\\right)"+r(this.args[1].operator)+"\\\\left("+this.args[1].args[1].printLatex()+"\\\\right)"},s.NativeFunction.prototype.printLatex=i,s.TypedFunction.prototype.printLatex=i,s.ReducerFunction.prototype.printLatex=i,s.ParametrizedReducerFunction.prototype.printLatex=i,s.DoubleReducerFunction.prototype.printLatex=i,s.FunctionCall.prototype.printLatex=i,s.Distribution.prototype.printLatex=i,s.SeededFunctionCall.prototype.printLatex=function(){return u.identifierToLatex(this._symbol)+"\\\\left("+this.args.slice(1).map(n).join(", ")+"\\\\right)"},s.DotAccess.prototype.printLatex=function(){return"("+this.args[0].printLatex()+").("+this.args[1].printLatex()+")"},s.DotAccessExponent.prototype.printLatex=function(){return"("+this.args[0].printLatex()+").("+this.args[1].printLatex()+")^{"+this.args[2].printLatex()+"}"},s.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case"logbase":return"\\\\log_{"+this.args[0].args[1].printLatex()+"}"+Array(this.order+1).join("'")+"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)";default:return u.identifierToLatex(this.args[0]._symbol)+Array(this.order+1).join("'")+"\\\\left("+this.args[0].args.map(n).join(", ")+"\\\\right)"}},s.List.prototype.printLatex=function(){return"\\\\left["+this.args.map(n).join(", ")+"\\\\right]"},s.Range.prototype.printLatex=function(){return"\\\\left["+this.args[0].args.map(n).join(", ")+" ... "+this.args[1].args.map(n).join(", ")+"\\\\right]"},s.ListAccess.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)\\\\left["+this.args[1].printLatex()+"\\\\right]"},s.OrderedPair.prototype.printLatex=function(){return"\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.Sum.prototype.printLatex=function(){return"\\\\sum_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},s.Product.prototype.printLatex=function(){return"\\\\prod_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},s.Integral.prototype.printLatex=function(){return"\\\\int_{"+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)d"+this.args[0].printLatex()},s.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+"\\\\left("+this.args[1].printLatex()+"\\\\right)^{"+this.args[2].printLatex()+"}"},s.FunctionFactorial.prototype.printLatex=function(){return this.args[0].printLatex()+"\\\\left("+this.args[1].printLatex()+"\\\\right)!"},s.Piecewise.prototype.printLatex=function(){var e=this;if(a(e.args[0]))return e.args[1].printLatex();for(var t=["\\\\left\\\\{"];;){if(a(e.args[0])){t.push(e.args[1].printLatex());break}if(t.push(e.args[0].printLatex(),": "),o(e.args[2])){t.push(e.args[1].printLatex());break}if(t.push(e.args[1].printLatex(),", "),!(e.args[2]instanceof s.Piecewise)){t.push(e.args[2].printLatex());break}e=e.args[2]}return t.push("\\\\right\\\\}"),t.join("")},s.FunctionDefinition.prototype.printLatex=function(){return u.identifierToLatex(this._symbol)+"\\\\left("+this._argSymbols.map(u.identifierToLatex).join(", ")+"\\\\right) = "+this._expression.printLatex()},s.Derivative.prototype.printLatex=function(){return"\\\\frac{d}{d"+u.identifierToLatex(this._symbol)+"}\\\\left("+this.args[0].printLatex()+"\\\\right)"},s.Regression.prototype.printLatex=function(){return"\\\\left("+this._lhs.printLatex()+"\\\\right)\\\\sim\\\\left("+this._rhs.printLatex()+"\\\\right)"},s.Polygon.prototype.printLatex=function(){return"\\\\polygon\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.Histogram.prototype.printLatex=function(){return"\\\\histogram\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.Object3D.prototype.printLatex=function(){return"\\\\"+this._symbol+"\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.DotPlot.prototype.printLatex=function(){return"\\\\dotplot\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.BoxPlot.prototype.printLatex=function(){return"\\\\boxplot\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.TTest.prototype.printLatex=function(){return"\\\\TTest\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.IndependentTTest.prototype.printLatex=function(){return"\\\\IndependentTTest\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.Stats.prototype.printLatex=function(){return"\\\\Stats\\\\left("+this.args.map(n).join(", ")+"\\\\right)"}}),define("core/math/features/statistics",["require","parsenodes","core/math/maybe-rational"],function(e){"use strict";var t=e("parsenodes"),r=t.BuiltInFunction,n=e("core/math/maybe-rational").maybeRational,i=t.Constant(n(0,1)),a=t.Constant(n(1,1)),o=t.Constant(n(2,1)),s=t.Constant(n(1,2)),u=t.Constant(-1/0);r.normaldist.prototype.pdf=function(e){return r.normalpdf([e[0],this.args[0],this.args[1]])},r.normaldist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=u,n=e[0]):(t=e[0],n=e[1]),r.normalcdf([t,n,this.args[0],this.args[1]])},r.normaldist.prototype.mean=function(){return this.args[0]},r.normaldist.prototype.median=function(){return this.args[0]},r.normaldist.prototype.stdev=function(){return r.abs([this.args[1]])},r.normaldist.prototype.var=function(){return t.Exponent([this.args[1],o])},r.normaldist.prototype.quantile=function(e){return t.Add([t.Multiply([r.invNorm(e),this.stdev()]),this.mean()])},r.normaldist.prototype.sample=function(e){return r.normalSample([e[0],this.args[0],this.args[1]])},r.tdist.prototype.pdf=function(e){return r.tpdf([e[0],this.args[0]])},r.tdist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=u,n=e[0]):(t=e[0],n=e[1]),r.tcdf([t,n,this.args[0]])},r.tdist.prototype.mean=function(){return i},r.tdist.prototype.median=function(){return i},r.tdist.prototype.quantile=function(e){return r.invT([e[0],this.args[0]])},r.tdist.prototype.sample=function(e){return r.tSample([e[0],this.args[0]])},r.tdist.prototype.stdev=function(){return r.sqrt([this.var()])},r.tdist.prototype.var=function(){var e=this.args[0];return t.Piecewise([t.Comparator[">="]([e,o]),t.Divide([e,t.Subtract([e,o])]),t.Constant(NaN)])},r.poissondist.prototype.pdf=function(e){return r.poissonpdf([e[0],this.args[0]])},r.poissondist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=u,n=e[0]):(t=e[0],n=e[1]),r.poissoncdf([t,n,this.args[0]])},r.poissondist.prototype.mean=function(){return this.args[0]},r.poissondist.prototype.median=function(){return r.invPoisson([s,this.args[0]])},r.poissondist.prototype.stdev=function(){return r.sqrt([this.args[0]])},r.poissondist.prototype.var=function(){return this.args[0]},r.poissondist.prototype.quantile=function(e){return r.invPoisson([e[0],this.args[0]])},r.poissondist.prototype.sample=function(e){return r.poissonSample([e[0],this.args[0]])},r.binomialdist.prototype.pdf=function(e){return r.binompdf([e[0],this.args[0],this.args[1]])},r.binomialdist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=u,n=e[0]):(t=e[0],n=e[1]),r.binomcdf([t,n,this.args[0],this.args[1]])},r.binomialdist.prototype.mean=function(){return t.Multiply([this.args[0],this.args[1]])},r.binomialdist.prototype.median=function(){return r.invBinom([s,this.args[0],this.args[1]])},r.binomialdist.prototype.stdev=function(){return r.sqrt([this.var()])},r.binomialdist.prototype.var=function(){var e=this.args[0],r=this.args[1];return t.Multiply([e,t.Multiply([r,t.Subtract([a,r])])])},r.binomialdist.prototype.quantile=function(e){return r.invBinom([e[0],this.args[0],this.args[1]])},
r.binomialdist.prototype.sample=function(e){return r.binomSample([e[0],this.args[0],this.args[1]])},r.uniformdist.prototype.pdf=function(e){return r.uniformpdf([e[0],this.args[0],this.args[1]])},r.uniformdist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=u,n=e[0]):(t=e[0],n=e[1]),r.uniformcdf([t,n,this.args[0],this.args[1]])},r.uniformdist.prototype.mean=function(){return t.Divide([t.Add([this.args[0],this.args[1]]),o])},r.uniformdist.prototype.median=function(){return t.Divide([t.Add([this.args[0],this.args[1]]),o])},r.uniformdist.prototype.stdev=function(){return r.sqrt([this.var()])},r.uniformdist.prototype.var=function(){return t.Divide([t.Exponent([t.Subtract([this.args[1],this.args[0]]),o]),t.Constant(n(12,1))])},r.uniformdist.prototype.quantile=function(e){return r.invUniform([e[0],this.args[0],this.args[1]])},r.uniformdist.prototype.sample=function(e){return r.uniformSample([e[0],this.args[0],this.args[1]])},t.List.prototype.sample=function(e){return t.ListAccess([this,t.Add([r.floor([t.Multiply([r.uniformSample([e[0],i,a]),t.Constant(n(this.length,1))])]),a])])}}),define("core/math/features/getExpressionType",["require","parsenodes","core/types/graphmode","core/math/expression-types","core/math/types"],function(e){"use strict";var t=e("parsenodes"),r=e("core/types/graphmode"),n=e("core/math/expression-types").ExpressionType,i=e("core/math/types");t.Base.prototype.getExpressionType=function(e,t){return e===r.X||e===r.Y?n.X_OR_Y:e===r.XYPOINT||e===r.XYPOINT_MOVABLE?t===i.Point?n.SINGLE_POINT:n.POINT_LIST:e===r.PARAMETRIC?n.PARAMETRIC:e===r.PARAMETRIC_CURVE_3D?n.PARAMETRIC:e===r.POLAR?n.POLAR:e===r.IMPLICIT?n.IMPLICIT:n.X_OR_Y},t.Polygon.prototype.getExpressionType=function(e,t){return n.POLYGON},t.Histogram.prototype.getExpressionType=function(e,t){return n.HISTOGRAM},t.Object3D.prototype.getExpressionType=function(e,t){return n.CUBE},t.DotPlot.prototype.getExpressionType=function(e,t){return n.DOTPLOT},t.BoxPlot.prototype.getExpressionType=function(e,t){return n.BOXPLOT}}),define("core/math/features/findLinearSubset",["require","parsenodes","core/math/maybe-rational"],function(e){"use strict";var t=e("parsenodes"),r=e("core/math/maybe-rational").maybeRational,n=t.Constant(r(0,1)),i=t.Constant(r(-1,0));t.Expression.prototype.findLinearSubset=function(e){for(var t=[],r=0;r<e.length;r++)t.push(!this.dependsOn(e[r]));return t},t.FreeVariable.prototype.findLinearSubset=function(e){for(var t=[],r=0;r<e.length;r++)t.push(!0);return t},t.Add.prototype.findLinearSubset=function(e){for(var t=[],r=this.args[0].findLinearSubset(e),n=this.args[1].findLinearSubset(e),i=0;i<e.length;i++)t.push(r[i]&&n[i]);return t},t.Subtract.prototype.findLinearSubset=t.Add.prototype.findLinearSubset,t.Negative.prototype.findLinearSubset=function(e){return this.args[0].findLinearSubset(e)},t.Multiply.prototype.findLinearSubset=function(e){for(var t=this.args[0].findLinearSubset(e).slice(),r=this.args[1].findLinearSubset(e).slice(),n=0,i=0,a=0;a<e.length;a++)t[a]=t[a]&&!this.args[1].dependsOn(e[a]),t[a]&&(n+=1),r[a]=r[a]&&!this.args[0].dependsOn(e[a]),r[a]&&(i+=1);return n>=i?t:r},t.Divide.prototype.findLinearSubset=function(e){for(var t=this.args[0].findLinearSubset(e),r=[],n=0;n<e.length;n++)r.push(t[n]&&!this.args[1].dependsOn(e[n]));return r},t.List.prototype.findLinearSubset=function(e){var t,r=[];for(t=0;t<e.length;t++)r.push(!0);for(var n=0;n<this.args.length;n++){var i=this.args[n].findLinearSubset(e);for(t=0;t<e.length;t++)r[t]=r[t]&&i[t]}return r},t.Broadcast.prototype.findLinearSubset=function(e){for(var r=this._replacedSymbols,a=this._expression,o=this._lists,s={},u=0;u<o.length;u++){for(var c=o[u].findLinearSubset(e),l=n,p=0;p<e.length;p++)c[p]?o[u].dependsOn(e[p])&&(l=t.Add([l,t.FreeVariable(e[p])])):l=t.Add([l,t.Exponent([t.FreeVariable(e[p]),i])]);s[r[u]]=l}return a.substitute(s).findLinearSubset(e)},t.Piecewise.prototype.findLinearSubset=function(e){for(var t=this.args[0],r=this.args[1].findLinearSubset(e),n=this.args[2].findLinearSubset(e),i=[],a=0;a<e.length;a++)i.push(!t.dependsOn(e[a])&&r[a]&&n[a]);return i}}),define("core/math/features/deriveRegressionRestrictions",["require","parsenodes","core/math/types","core/math/domaintypes"],function(e){"use strict";function t(e){for(var t=1/0,r=-1/0,n=e.length,i=0;i<e.length;i++)t=Math.min(t,e[i]),r=Math.max(r,e[i]);return{min:t,max:r,length:n}}function r(e,t,r){if("known"!==r.type)return e;var n=i.And([i.Comparator["<="]([i.Constant(r.bounds[0]),i.FreeVariable(t)]),i.Comparator["<="]([i.FreeVariable(t),i.Constant(r.bounds[1])])]);return i.Multiply([e,i.Piecewise([n,i.Constant(1),i.Constant(NaN)])])}function n(e){for(var t,r=this.args[0],n=this.getDependencies(),a={},o=0;o<n.length;o++)if(e.listStatistics.hasOwnProperty(n[o])){if(void 0!==t)return{};t=n[o]}if(void 0===t)return{};if(1!==r.polynomialOrder(t))return{};var s=r.getPolynomialCoefficients(t),u=s[1],c=s[1].getDependencies();if(1!==c.length)return{};var l=c[0];if(1!==u.polynomialOrder(l))return{};var p=e.listStatistics[t],f=(p.max-p.min)/Math.min(p.length-1,31),h=Math.PI/f;return isFinite(h)?h<=0?{}:(a[l]=i.Piecewise([i.And([i.Comparator["<="]([i.Constant(0),u]),i.Comparator["<"]([u,i.Constant(h)])]),i.Constant(1),i.Constant(NaN)]).boundDomain(l),a):{}}var i=e("parsenodes"),a=e("core/math/types"),o=e("core/math/domaintypes");i.Base.prototype.deriveRegressionRestrictions=function(){return this},i.Broadcast.prototype.deriveRegressionRestrictions=function(){for(var e=this._replacedSymbols,n=this._expression,o=this._lists,s={},u=0;u<e.length;u++)0===o[u].getDependencies().length&&o[u].valueType===a.ListOfNumber&&(s[e[u]]=t(o[u].asValue()));var c,l=n._deriveRegressionRestrictions({listStatistics:s});for(c in l)if("known"!==l[c].type)return this;var p=n;for(c in l)p=r(p,c,l[c]);return i.Broadcast(e,[p].concat(o))},i.Base.prototype._deriveRegressionRestrictions=function(e){return{}},i.Expression.prototype._deriveRegressionRestrictions=function(e){for(var t={},r=0;r<this.args.length;r++){var n=this.args[r]._deriveRegressionRestrictions(e);for(var i in n)t[i]=t[i]?o.intersectDomains(t[i],n[i]):n[i]}return t},i.BuiltInFunction.sin.prototype._deriveRegressionRestrictions=n,i.BuiltInFunction.cos.prototype._deriveRegressionRestrictions=n,i.Exponent.prototype._deriveRegressionRestrictions=function(e){for(var t=this.args[0],r=this.args[1],n=t.getDependencies(),a=r.getDependencies(),o={},s=!1,u=0;u<a.length;u++)if(e.listStatistics.hasOwnProperty(a[u])){s=!0;break}if(!s)return{};if(1!==n.length)return{};var c=n[0];return e.listStatistics.hasOwnProperty(c)?{}:1!==t.polynomialOrder(c)?{}:(o[c]=i.Piecewise([i.Comparator[">="]([t,i.Constant(0)]),i.Constant(1),i.Constant(NaN)]).boundDomain(c),o)},i.Piecewise.prototype._deriveRegressionRestrictions=function(e){for(var t={},r=this.getDependencies(),n=0;n<r.length;n++)t[r[n]]=o.unknownDomain();return t}}),define("parser",["require","core/math/baseparser","core/math/features/getConcreteTree","core/math/features/getValueType","core/math/features/typeCheck","core/math/features/repr","core/math/features/scalarEvalExpression","core/math/features/constantcollapsedcopy","core/math/features/polynomialorder","core/math/features/polynomialcoefficients","core/math/features/extractconditions","core/math/features/piecewiseDependsOn","core/math/features/bounddomain","core/math/features/derivative","core/math/features/substitute","core/math/features/isImplicit","core/math/features/solve","core/math/features/analyze","core/math/features/analyzeFourFunction","core/math/features/analyzeScientific","core/math/features/analyzeSingleExpressionScientific","core/math/features/getgraphmode","core/math/features/getgraphinfo","core/math/features/getMoveStrategy","core/math/features/getDefaultDragMode","core/math/features/tableinfo","core/math/features/tableerror","core/math/features/graph","core/math/features/elementAt","core/math/features/printLatex","core/math/features/statistics","core/math/features/getExpressionType","core/math/features/findLinearSubset","core/math/features/deriveRegressionRestrictions"],function(e){"use strict";var t=e("core/math/baseparser");return e("core/math/features/getConcreteTree"),e("core/math/features/getValueType"),e("core/math/features/typeCheck"),e("core/math/features/repr"),e("core/math/features/scalarEvalExpression"),e("core/math/features/constantcollapsedcopy"),e("core/math/features/polynomialorder"),e("core/math/features/polynomialcoefficients"),e("core/math/features/extractconditions"),e("core/math/features/piecewiseDependsOn"),e("core/math/features/bounddomain"),e("core/math/features/derivative"),e("core/math/features/substitute"),e("core/math/features/isImplicit"),e("core/math/features/solve"),e("core/math/features/analyze"),e("core/math/features/analyzeFourFunction"),e("core/math/features/analyzeScientific"),e("core/math/features/analyzeSingleExpressionScientific"),e("core/math/features/getgraphmode"),e("core/math/features/getgraphinfo"),e("core/math/features/getMoveStrategy"),e("core/math/features/getDefaultDragMode"),e("core/math/features/tableinfo"),e("core/math/features/tableerror"),e("core/math/features/graph"),e("core/math/features/elementAt"),e("core/math/features/printLatex"),e("core/math/features/statistics"),e("core/math/features/getExpressionType"),e("core/math/features/findLinearSubset"),e("core/math/features/deriveRegressionRestrictions"),t}),define("core/math/finddependencyorder",["require","core/math/builtinframe","underscore"],function(e){"use strict";function t(e,t,i){function a(e){g[e]=g[e]||{};var r,n=g[e];n.id=e,n.index=v,n.lowlink=v,b.push(n),n.instack=!0,v++;for(var i=t[e].getDependencies(),u=0;u<i.length;u++){var c=i[u];if(d.hasOwnProperty(c))for(var l=d[c],p=0;p<l.length;p++){var f=l[p];g.hasOwnProperty(f)?(r=g[f],r.instack&&(n.lowlink=Math.min(n.lowlink,r.index))):(a(f),r=g[f],n.lowlink=Math.min(n.lowlink,r.lowlink))}}if(n.lowlink===n.index)if(r=b.pop(),r.instack=!1,r===n)o(n);else{for(var h=[r];;)if(r=b.pop(),r.instack=!1,h.push(r),r===n)break;s(h)}}function o(e){x.push(e.id)}function s(r){var i,a,o=[];for(a=r.length-1;a>=0;a--){i=r[a];var s=t[i.id].getLegalExports(e);Array.prototype.push.apply(o,s),o.push(s[0]),x.push(i.id)}for(o=n.unique(o),o.sort(),a=0;a<o.length;a++)y[o[a]]=o}var u,c,l,p,f,h=[],d={},m={},y={},g={},v=0,b=[],x=[];if(!i){i=[];for(u in t)t.hasOwnProperty(u)&&i.push(u)}for(u in t)if(t.hasOwnProperty(u)){for(f=t[u].exportPenalty||0;h.length<f+1;)h.push([]);h[f].push(u)}for(f=0;f<h.length;f++){var _={};for(c=0;c<h[f].length;c++){u=h[f][c];var S=t[u].getLegalExports(e);for(l=0;l<S.length;l++)p=S[l],r[p]||d[p]||(_[p]=_[p]||[],_[p].push(u),_[p].length>1&&(m[p]=!0))}for(p in _)d[p]=_[p]}for(c=0;c<i.length;c++)g.hasOwnProperty(i[c])||a(i[c]);return{resolved:x,multiplyDefined:m,cyclicallyDefined:y}}var r=e("core/math/builtinframe"),n=e("underscore");return t}),define("core/math/findIntersections",["require","core/types/graphmode","./plotter","parsenodes","core/math/distance"],function(e){"use strict";function t(e){for(var t=[],r=0;r<e;r++)t[r]={x:[],y:[],intersects:[]};return t}function r(e,t,r,n){return r===l.X&&n===l.X||r===l.Y&&n===l.Y?function(r){return t(r)-e(r)}:(r===l.X&&n===l.Y||r===l.Y&&n===l.X)&&function(r){return r-t(e(r))}}function n(e,t){t instanceof f.SolvedEquation?t=t._expression:t instanceof f.OptimizedRegression&&(t=t.model);var r=[],n=[];return t instanceof f.DoubleInequality?f.List.eachArgs(e,t._expressions,function(e){r.push(e[0].getCompiledFunction()),n.push(e[0].isConstant&&e[1].isNaN()),r.push(e[1].getCompiledFunction()),n.push(e[1].isConstant&&e[1].isNaN())}):f.List.wrap(t).eachElement(e,function(e){r.push(e.getCompiledFunction()),n.push(e.isConstant&&e.isNaN())}),{functions:r,skipIntersecting:n}}function i(e,t){var r=[];for(var i in e)if(e.hasOwnProperty(i)&&String(i)!==String(t)&&e[i].shouldIntersect()){var a=e[i],o=n(a.policy,a.concreteTree);r.push({id:i,graphMode:a.getGraphMode(),functions:o.functions,skipIntersecting:o.skipIntersecting})}return r}function a(e,t){e.intersects=Array(e.x.length);for(var r=0;r<e.x.length;r++)e.intersects[r]=t}function o(e,t){if(t===l.X){var r=e.y;e.y=e.x,e.x=r}}function s(e,t){Array.prototype.push.apply(e.x,t.x),Array.prototype.push.apply(e.y,t.y),Array.prototype.push.apply(e.intersects,t.intersects)}function u(e,t,r){var n=p.sampleXY(e,t),i=n.poi.zeros,a=n.poi.extrema,o=[],s=0,u=0;for(s=0;s<i.x.length;s++){for(;u<a.x.length&&a.x[u]<i.x[s];u++)h.approx(a.y[u],0)&&o.push(a.x[u]);o.push(i.x[s])}for(;u<a.x.length;u++)h.approx(a.y[u],0)&&o.push(a.x[u]);return{x:o,y:o.map(r)}}function c(e,c,l){var f=e[l],h=f.getGraphInfo(),m=f.getGraphMode(),y=n(f.policy,f.concreteTree),g=t(y.functions.length),v=i(e,l);if(!v)return g;for(var b=0,x=0;x<v.length;x++)for(var _=v[x],S=0;S<y.functions.length;S++)if(!y.skipIntersecting[S])for(var M=y.functions[S].fn,E=p.computeDomain(c,h,M),D=0;D<_.functions.length;D++)if(!v[x].skipIntersecting[D]){var w=_.functions[D].fn,T=r(M,w,m,_.graphMode);if(T){var P=u(T,E,M);if((b+=P.x.length)>d)return t(y.functions.length);a(P,_.id),o(P,m),s(g[S],P)}}return g}var l=e("core/types/graphmode"),p=e("./plotter").default,f=e("parsenodes"),h=e("core/math/distance"),d=100;return{findIntersections:c,findIndicatorZeros:u}}),define("core/math/interpolatedlabel",["require","exports","parsenodes","core/math/types","core/lib/label","./policy"],function(e,t,r,n,i,a){"use strict";function o(e){return!(e.length<2)&&("\`"===e[0]&&"\`"===e[e.length-1])}function s(e){for(var t,r=["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\\\{[a-zA-Z0-9]+\\\\}"],n="\\\\$({"+r.join("})|\\\\$({")+"})",i=new RegExp(n,"g"),a=[],o=0,s=0;t=i.exec(e);){s=t.index,s>o&&a.push(e.substr(o,s-o));var u=t[0],c=u.replace(/[{}\\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");a.push({symbol:c,str:u}),o=t.index+u.length}return o<e.length&&a.push(e.substr(o)),{raw:e,parts:a}}function u(e,t){return t?"{"+i.truncatedLatexLabel(e,{bigCutoff:1e7,digits:8})+"}":i.truncatedPlainmathLabel(e,{bigCutoff:1e7,digits:8})}function c(e,t,i){for(var s=[],c=o(e.raw),l=0,p=e.parts;l<p.length;l++){var f=p[l];if("string"==typeof f)s.push(f);else{var h=r.Identifier(f.symbol).tryGetConcreteTree(a.defaultPolicy,t);if(h.valueType===n.Number){var d=h.asValue();if("number"==typeof d){s.push(u(d,c));continue}}else if(h.valueType===n.ListOfNumber&&h.args[i]){var d=h.args[i].asValue();if("number"==typeof d){s.push(u(d,c));continue}}c?s.push("{?}"):s.push("?")}}return s.join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.isMathLabel=o,t.parse=s,t.interpolate=c}),define("core/math/getCLSymbolMap",["require","exports","underscore","core/lib/label"],function(e,t,r,n){"use strict";function i(){var e={},t={},i={},a=[];for(var o in this.statements)if(this.statements.hasOwnProperty(o)){var s=this.statements[o];switch(s.type){case"Error":break;case"Regression":i[o]=[],a.push(o);break;default:var u=s.getLegalExports(this.policy);if(u){for(var c=0,l=u;c<l.length;c++){var p=l[c];s.exportPenalty>0?t[p]=o:e[p]=o}i[o]=r.difference(s.getDependencies(),s.getDummyDependencies(),u)}}}for(var f=0,h=a;f<h.length;f++){var o=h[f],s=this.statements[o],d=n.latexToIdentifier(s.userData.residualVariable);d&&(t[d]=o);for(var m=s.getDependencies().slice(),y={},p=void 0;p=m.pop();)if(!y[p]){y[p]=!0;var g=e[p]||t[p];g?(m.push.apply(m,i[g]),i[o].push(p)):t[p]=o}}return{exportMap:e,weakExportMap:t,dependencyMap:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCLSymbolMap=i}),define("core/types/line-width",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THIN=1,t.DEFAULT=2.5,t.THICK=5}),define("core/math/policyFourFunction",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.singleExpression=e.singleExpression}return e.prototype.assignmentForbidden=function(e){return"ans"!==e.slice(0,3)},e.prototype.isValidSlider=function(e){return!1},e.prototype.sliderVariables=function(){return[]},e.prototype.graphingEnabled=function(){return!1},e.prototype.ansEnabled=function(){return!this.singleExpression},e.prototype.disabledFeatures=function(){return["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"]},e}();t.PolicyFourFunction=new r({singleExpression:!1}),t.PolicySingleExpressionFourFunction=new r({singleExpression:!0})}),define("core/math/policyScientific",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.singleExpression=e.singleExpression}return e.prototype.assignmentForbidden=function(e){return this.singleExpression?"ans"!==e.slice(0,3):"tmp"===e.slice(0,3)},e.prototype.isValidSlider=function(e){return!1},e.prototype.sliderVariables=function(){return[]},e.prototype.graphingEnabled=function(){return!1},e.prototype.ansEnabled=function(){return!this.singleExpression},e.prototype.disabledFeatures=function(){return this.singleExpression?["Sum","Product","Integral","Derivative","Piecewise","PercentOf"]:["Sum","Product","Integral","Derivative","Piecewise"]},e}();t.PolicyScientific=new r({singleExpression:!1}),t.PolicySingleExpressionScientific=new r({singleExpression:!0})}),define("core/math/frameFourFunction",["require","core/math/parsenode/builtinfunction"],function(e){"use strict";function t(e){var t={};return e.additionalFunctions&&-1!==e.additionalFunctions.indexOf("sqrt")&&(t.sqrt=r.sqrt),t}var r=e("core/math/parsenode/builtinfunction");return{getFrame:t}}),define("core/math/frameScientific",["require","core/math/builtinconstants","core/math/parsenode/builtinfunction"],function(e){"use strict";function t(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error("Programming Error: key '"+n+"' does not exist in table. Must be one of:\\n"+Object.keys(t).join("\\n"))}}function r(e){var t={};return a.forEach(function(e){t[e]=n[e]}),o.forEach(function(r){e.replaceRoundWithReciprocal&&"round"===r||(t[r]=i[r])}),e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),t}var n=e("core/math/builtinconstants"),i=e("core/math/parsenode/builtinfunction"),a=["pi","e","trigAngleMultiplier"],o=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","mean","round","stdev","stdevp","nCr","nPr","exp","factorial"];return t(a,n),t(o,i),{getFrame:r}}),define("core/math/frameSingleExpressionScientific",["require","core/math/builtinconstants","core/math/parsenode/builtinfunction"],function(e){"use strict";function t(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error("Programming Error: key '"+n+"' does not exist in table. Must be one of:\\n"+Object.keys(t).join("\\n"))}}function r(e){var t={};return a.forEach(function(e){t[e]=n[e]}),o.forEach(function(e){t[e]=i[e]}),e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),t}var n=e("core/math/builtinconstants"),i=e("core/math/parsenode/builtinfunction"),a=["pi","e","trigAngleMultiplier"],o=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","exp","factorial"];return t(a,n),t(o,i),{getFrame:r}}),define("core/math/frameGraphing",["require","core/math/builtinconstants","core/math/parsenode/builtinfunction"],function(e){"use strict";function t(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error("Programming Error: key '"+n+"' does not exist in table. Must be one of:\\n"+Object.keys(t).join("\\n"))}}function r(e){var t,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);for(t in i)i.hasOwnProperty(t)&&(!0===e.restrictedFunctions&&-1!==a.indexOf(t)||!1===e.distributions&&-1!==o.indexOf(t)||(r[t]=i[t]));return e.trigAngleMultiplier&&(r.trigAngleMultiplier=e.trigAngleMultiplier),e.globalRandomSeed&&(r.globalRandomSeed=e.globalRandomSeed),r}var n=e("core/math/builtinconstants"),i=e("core/math/parsenode/builtinfunction"),a=["csc","sec","cot","arccsc","arcsec","arccot","csch","sech","coth","arccsch","arcsech","arccoth","mad","cov","distance","midpoint"],o=["erf","ttest","tscore","ittest","normaldist","tdist","poissondist","binomialdist","pdf","cdf","random","histogram","dotplot","boxplot"];return t(a,i),t(o,i),{getFrame:r}}),define("core/math/context",["require","pjs","underscore","./plotter","parser","core/math/parsenode/constant","core/math/parsenode/seed","core/math/parsenode/functioncall","core/math/parsenode/image","core/math/parsenode/slider","core/math/parsenode/table","core/math/parsenode/tablecolumn","core/math/parsenode/freevariable","core/math/finddependencyorder","core/math/errormsg","core/types/graphmode","core/math/workerconfig","./findIntersections","./interpolatedlabel","core/math/types","core/math/expression-types","core/math/expression-types","core/math/getCLSymbolMap","core/math/distribution-spec","core/math/maybe-rational","core/lib/number-to-latex","core/lib/label","core/math/functions","core/types/line-width","core/math/policyFourFunction","core/math/policyScientific","core/math/policyScientific","core/math/policyFourFunction","core/math/policyGraphing","core/math/policyGraphing","core/math/frameFourFunction","core/math/frameFourFunction","core/math/frameScientific","core/math/frameSingleExpressionScientific","core/math/frameGraphing","core/math/frameGraphing"],function(e){"use strict";function t(e){var t=e.rawTree.userData,r=e.rawTree.metaData;return t.cdf&&t.cdf.show&&r.distributionSpec}function r(e){var t=e.evaluationState.expression_type,r=e.rawTree.userData;return!(!r.clickableInfo||!r.clickableInfo.enabled)&&(!!e.rawTree.isImage||e.getGraphMode()!==v.XYPOINT_MOVABLE&&E(t))}function n(e,t){var r="id"+e;t=t||[];for(var n,i,a,o=0,s=t.length;o<s;o++)n=t[o],i=n[0],a=n[1],r+="::"+i+a;return r}var i=e("pjs"),a=e("underscore"),o=e("./plotter").default,s=e("parser"),u=e("core/math/parsenode/constant"),c=e("core/math/parsenode/seed"),l=e("core/math/parsenode/functioncall"),p=e("core/math/parsenode/image"),f=e("core/math/parsenode/slider"),h=e("core/math/parsenode/table"),d=e("core/math/parsenode/tablecolumn"),m=e("core/math/parsenode/freevariable"),y=e("core/math/finddependencyorder"),g=e("core/math/errormsg"),v=e("core/types/graphmode"),b=e("core/math/workerconfig"),x=e("./findIntersections").findIntersections,_=e("./interpolatedlabel"),S=e("core/math/types"),M=e("core/math/expression-types").ExpressionType,E=e("core/math/expression-types").isClickableExpressionType,D=e("core/math/getCLSymbolMap").getCLSymbolMap,w=e("core/math/distribution-spec"),T=e("core/math/maybe-rational").maybeRational,P=e("core/lib/number-to-latex").default,I=e("core/lib/label"),C=e("core/math/functions"),O=e("core/types/line-width"),A={fourFunction:e("core/math/policyFourFunction").PolicyFourFunction,scientific:e("core/math/policyScientific").PolicyScientific,singleExpressionScientific:e("core/math/policyScientific").PolicySingleExpressionScientific,singleExpressionFourFunction:e("core/math/policyFourFunction").PolicySingleExpressionFourFunction,graphing:e("core/math/policyGraphing").PolicyGraphing,graphing_3d:e("core/math/policyGraphing").PolicyGraphing3D},L={fourFunction:e("core/math/frameFourFunction"),singleExpressionFourFunction:e("core/math/frameFourFunction"),scientific:e("core/math/frameScientific"),singleExpressionScientific:e("core/math/frameSingleExpressionScientific"),graphing:e("core/math/frameGraphing"),graphing_3d:e("core/math/frameGraphing")};return i(function(e){function i(e,t){return e?"0"===e?W:"1"===e?Y:s.parse(e,t):X}function E(e,t){if(e)return s.parse(e,t)}function N(e){return"ans"!==e.slice(0,3)}function q(e,t){var r,n=e.multiplyDefined,i=e.cyclicallyDefined;for(r in n)n.hasOwnProperty(r)&&(t[r]=g.multiplyDefined(r));for(r in i)i.hasOwnProperty(r)&&(t[r]=g.cycle(i[r].filter(N)))}function F(e,t,r){for(var n=0;n<r.length;n++){var i=r[n];e[i]||(e[i]=[]),e[i].push(t)}}function R(e,t,r){var n=e.variables;if(n&&n.length){for(var i={},a=0;a<n.length;a++)i[n[a]]=!0;for(var o in r)i[o]=!0;r=i}e.variables=t.sliderVariables(Object.keys(r))}function V(e,t,r){var n,i,a=e.evaluationState,o=e.rawTree,s=o.metaData.cdfMin,c=o.metaData.cdfMax,p=NaN,f=NaN,h={},d="Assignment"===o.type?o._expression:o,m=d&&d.metaData&&d.metaData.distributionSpec;if(s){var y=s.tryGetConcreteTree(t,r);for(y.isConstant&&(p=y.asValue()),n=y.getDependencies(),i=0;i<n.length;i++)h[n[i]]=!0}else p=-1/0;if(c){var v=c.tryGetConcreteTree(t,r);for(v.isConstant&&(f=v.asValue()),n=v.getDependencies(),i=0;i<n.length;i++)h[n[i]]=!0}else f=1/0;var b=!0,x=!0;if(isNaN(p)&&(b=!1,p=NaN),isNaN(f)&&(x=!1,f=NaN),b?x?p>f&&(b=!1,x=!1,a.error=g.cdfMaxLessThanMin().getError()):a.error=g.cdfMaxInvalid().getError():a.error=g.cdfMinInvalid().getError(),b&&x){var _=l("cdf",[d,u(p),u(f)]);a.cdf_evaluation=+_.tryGetConcreteTree(t,r).asValue()}var S=-1/0,M=1/0;if(m&&(m.discrete&&(S=0),"binomialdist"===m.symbol&&d.args&&d.args[0])){var E=d.args[0].asValue();isFinite(E)&&(M=E)}o.metaData.evaluatedCDFMin=p,o.metaData.evaluatedCDFMax=f,a.cdf_min_valid=b,a.cdf_max_valid=x,a.cdf_min_default=S,a.cdf_max_default=M,a.is_single_identifier=!1,R(a,t,h)}function k(e,t,r){var n,i=e.evaluationState,a=e.rawTree.metaData.fillOpacity,o={},s=!0;if(a){var u=a.tryGetConcreteTree(t,r);n=u.asValue();for(var c=u.getDependencies(),l=0;l<c.length;l++)o[c[l]]=!0}isFinite(n)||(s=!1,n=NaN),a||(s=!0),e.rawTree.metaData.computedFillOpacity=n,i.fill_opacity_valid=s,R(i,t,o)}function B(e,t,r){var n,i=e.evaluationState,a=e.rawTree.metaData.lineWidth,o={},s=!0;if(a){var u=a.tryGetConcreteTree(t,r);n=u.asValue();for(var c=u.getDependencies(),l=0;l<c.length;l++)o[c[l]]=!0}isFinite(n)||(s=!1,n=NaN),a||(s=!0,n=O.DEFAULT),e.rawTree.metaData.computedLineWidth=n,i.line_width_valid=s,R(i,t,o)}function j(e,t,r){var n,i,a,o,s=e.evaluationState,u=e.rawTree,c=u.metaData.clickableAssignment,l=u.metaData.clickableExpression,p={};if(c&&"Identifier"===c.type){var f=r[c._symbol],h=f&&f.type;"Slider"!==h&&"Assignment"!==h||(a=c._symbol)}if(l){var d=l.tryGetConcreteTree(t,r);if(d.valueType===S.Number){var m=d.asValue();isNaN(m)||(o=P(m))}else if(d.valueType===S.ListOfNumber){var y=[],g=!0;for(i=0;i<d.args.length;i++){var v=d.args[i];if(v.valueType!==S.Number)return!1;var b=v.asValue();y.push(P(b)),isNaN(b)&&(g=!1)}g&&(o="\\\\left["+y.join(",")+"\\\\right]")}for(n=d.getDependencies(),i=0;i<n.length;i++)p[n[i]]=!0}a&&o&&(s.clickableinfo_identifier=a,s.clickableinfo_latex=I.identifierToLatex(a)+"="+o),s.clickableinfo_identifier_valid=!!a,s.clickableinfo_expression_valid=!!o,R(s,t,p)}function z(e,t,r){var n,i,a=e.evaluationState,o=e.rawTree,s=a.expression_type===M.POLAR?o.metaData.polarDomainMin:o.metaData.parametricDomainMin,u=a.expression_type===M.POLAR?o.metaData.polarDomainMax:o.metaData.parametricDomainMax,c=NaN,l=NaN,p=!1,f={};if(s){p=!0;var h=s.tryGetConcreteTree(t,r);for(h.isConstant&&(c=h.asValue()),n=h.getDependencies(),i=0;i<n.length;i++)f[n[i]]=!0}else c=0;if(u){p=!0;var d=u.tryGetConcreteTree(t,r);for(d.isConstant&&(l=d.asValue()),n=d.getDependencies(),i=0;i<n.length;i++)f[n[i]]=!0}else a.expression_type===M.PARAMETRIC?l=1:a.expression_type===M.POLAR&&(l=12*Math.PI/r.trigAngleMultiplier.asValue());var m=!0,y=!0;isFinite(c)||(m=!1,c=NaN),isFinite(l)||(y=!1,l=NaN),m?y?c>l&&(m=!1,y=!1,a.error=g.domainMaxLessThanMin().getError()):a.error=g.domainMaxInvalid().getError():a.error=g.domainMinInvalid().getError(),o.metaData.evaluatedDomainMin=c,o.metaData.evaluatedDomainMax=l,a.expression_type===M.POLAR&&(o.metaData.isExplicitDomain=p),a.domain_min_number=c,a.domain_max_number=l,a.domain_min_valid=m,a.domain_max_valid=y,a.expression_type===M.PARAMETRIC&&(delete f.t,R(a,t,f))}function G(e,t,r){var n,i,a=e.evaluationState,o=e.rawTree,s=o.metaData.vizAxisOffset,u=o.metaData.vizBreadth,c=NaN,l=NaN,p={};if(s){var f=s.tryGetConcreteTree(t,r);for(f.isConstant&&(c=f.asValue()),n=f.getDependencies(),i=0;i<n.length;i++)p[n[i]]=!0}else c=1;if(u){var h=u.tryGetConcreteTree(t,r);for(h.isConstant&&(l=h.asValue()),n=h.getDependencies(),i=0;i<n.length;i++)p[n[i]]=!0}else l=1;var d=!0,m=!0;isFinite(c)||(d=!1,c=NaN),isFinite(l)||(m=!1,l=NaN),d?m||(a.error=g.boxplotBreadthInvalid().getError()):a.error=g.boxplotOffsetInvalid().getError(),o.metaData.evaluatedAxisOffset=c,o.metaData.evaluatedBreadth=l,a.viz_values={axisOffset:c,breadth:l},a.viz_valids={axisOffset:d,breadth:m},R(a,t,p)}function U(e){return e.globalRandomSeed||[]}e.init=function(){this.statements={},this.analysis={},this.currentStatus={},this.currentLabel={},this.unpublishedIds={},this.intersectId=void 0,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={},this.markedRegressionDirty=!1,this.setEvaluationMode("graphing"),this.setRestrictedFunctions(!1),this.setFunctionDefinition(!0),this.setReplaceRoundWithReciprocal(!1),this.invalidate()},e.getCLSymbolMap=D,e.processChangeSet=function(e){var t={intersections:{},graphs:{}};e.isCompleteState&&(this.invalidate(),this.statements={},this.currentLabel={}),e.viewState&&this.setViewState(e.viewState),e.hasOwnProperty("degreeMode")&&this.setDegreeMode(e.degreeMode),e.hasOwnProperty("globalRandomSeed")&&this.setGlobalRandomSeed(e.globalRandomSeed),e.hasOwnProperty("evaluationMode")&&this.setEvaluationMode(e.evaluationMode),e.hasOwnProperty("additionalFunctions")&&this.setAdditionalFunctions(e.additionalFunctions),e.hasOwnProperty("restrictedFunctions")&&this.setRestrictedFunctions(e.restrictedFunctions),e.hasOwnProperty("distributions")&&this.setDistributions(e.distributions),e.hasOwnProperty("functionDefinition")&&this.setFunctionDefinition(e.functionDefinition),e.hasOwnProperty("replaceRoundWithReciprocal")&&this.setReplaceRoundWithReciprocal(e.replaceRoundWithReciprocal),e.hasOwnProperty("pointsOfInterest")&&this.setWorkerConfigProperty("pointsOfInterest",e.pointsOfInterest),e.hasOwnProperty("plotSingleVariableImplicitEquations")&&this.setWorkerConfigProperty("plotSingleVariableImplicitEquations",e.plotSingleVariableImplicitEquations),e.hasOwnProperty("plotImplicits")&&this.setWorkerConfigProperty("plotImplicits",e.plotImplicits),e.hasOwnProperty("plotInequalities")&&this.setWorkerConfigProperty("plotInequalities",e.plotInequalities),e.hasOwnProperty("sliders")&&this.setWorkerConfigProperty("sliders",e.sliders),e.hasOwnProperty("intersectId")&&(this.intersectId=e.intersectId),this.processStatements(e,t),this.updateAnalysis(),e.hasOwnProperty("intersectId")&&this._updateIntersections(e.intersectId,t);var r=this._publishAllStatuses();return this._computeAllLabels(),this._graphAllChanged(t),this.unpublishedIds={},{syncId:e.syncId,isCompleteState:e.isCompleteState,intersectionChanges:t.intersections,statusChanges:r,graphChanges:t.graphs}},e.processStatements=function(e,t){var r;if(e.statements)for(var n in e.statements){var i=e.statements[n];if(null===i){if(!e.isCompleteState&&this.statements.hasOwnProperty(n)&&(r=this.statements[n].getAllIds()),this.removeStatement(n,t),!e.isCompleteState&&r)for(var a=0;a<r.length;a++)t.graphs[r[a]]=void 0}else this.addStatement(i,t)}},e.setViewState=function(e){if(!a.isEqual(e,this.viewState)){this.viewState=e;for(var t in this.statements)this.statements.hasOwnProperty(t)&&(this.unpublishedIds[t]=!0)}},e.getViewState=function(){if(this.viewState){var e=Object.create(this.viewState);return this.parent_frame&&this.parent_frame.trigAngleMultiplier?e.trigAngleMultiplier=this.parent_frame.trigAngleMultiplier.asValue():e.trigAngleMultiplier=1,e}},e.setDegreeMode=function(e){this.use_degrees=e,this.invalidate()},e.setGlobalRandomSeed=function(e){this.globalRandomSeedString=e,this.parent_frame.globalRandomSeed=c(e),this.dirtyExportedSymbolRoots.globalRandomSeed=!0},e.setEvaluationMode=function(e){this.evaluationMode=e,this.policy=A[e],this.invalidate()},e.setAdditionalFunctions=function(e){this.additionalFunctions=e,this.invalidate()},e.setRestrictedFunctions=function(e){this.restrictedFunctions=e,this.invalidate()},e.setDistributions=function(e){this.distributions=e,this.invalidate()},e.setFunctionDefinition=function(e){this.functionDefinition=e,this.invalidate()},e.setReplaceRoundWithReciprocal=function(e){
this.replaceRoundWithReciprocal=e,this.invalidate()},e.setWorkerConfigProperty=function(e,t){t!==b[e]&&(b[e]=t,this.invalidate())},e._publishAllStatuses=function(){var e={},t=this.currentStatus;this.currentStatus={};for(var r in this.unpublishedIds)if(this.analysis.hasOwnProperty(r)){var n=this.analysis[r].evaluationState;JSON.stringify(n)!==JSON.stringify(t[r])&&(e[r]=n),this.currentStatus[r]=n}return e},e._computeAllLabels=function(){for(var e in this.currentLabel){var t=this.statements[e];if(t){var r=t.tryGetConcreteTree(this.policy,this.frame),n=1;r.valueType===S.ListOfPoint&&(n=r.args.length);for(var i=[],o=0;o<n;o++)i.push(_.interpolate(this.currentLabel[e],this.frame,o));a.isEqual(i,t.computedLabels)||(t.computedLabels=i,this.unpublishedIds[e]=!0)}}},e._graphAllChanged=function(e){var t=this.getViewState(),r=!1;if(o.validateViewState(t)){for(var n in this.unpublishedIds)if(this.analysis.hasOwnProperty(n)){var i=this.analysis[n],s=i.evaluationState.expression_type,u=s===M.SINGLE_POINT||s===M.POINT_LIST;if(i.rawTree.isTable)for(var c=i.graph(t),l=i.rawTree.getAllIds(),p=0;p<l.length;p++)c[l[p]]?this._notifyGraphComputed(l[p],c[l[p]],e):this._notifyGraphRemoved(l[p],e);else i.evaluationState.is_graphable&&(i.rawTree.userData.shouldGraph||i.rawTree.userData.showLabel&&u)?(this._notifyGraphComputed(n,i.graph(t),e),this.intersectId===n&&(r=!0)):this._notifyGraphRemoved(n,e)}a.keys(this.unpublishedIds).length&&void 0!==this.intersectId&&(this.unpublishedIds.hasOwnProperty(this.intersectId)||(r=!0)),r&&this._updateIntersections(this.intersectId,e)}},e._notifyGraphRemoved=function(e,t){t.graphs[e]=void 0},e._notifyGraphComputed=function(e,t,r){C.dehydrateGraphData(t),r.graphs[e]=t},e._updateIntersections=function(e,t){if(this.viewState){if(!this.analysis[e]||!this.analysis[e].shouldIntersect())return void(t.intersections[e]=[]);var r=x(this.analysis,this.viewState,e);t.intersections[e]=r}},e.getDisabledFeatures=function(){var e,t=this.policy.disabledFeatures();e=!1===this.functionDefinition?t.concat("FunctionDefinition"):t;var r=this.additionalFunctions||[];return e=e.filter(function(e){return("Exponent"!==e||-1===r.indexOf("exponent"))&&("PercentOf"!==e||-1===r.indexOf("percent"))}.bind(this))};var W=u(T(0,1)),Y=u(T(1,1)),X=u(NaN);e.addStatement=function(e,t){if(e){var r=e.id;this.markExportsDirty(r),this.markAsDirtyRoot(r);var a={index:this.policy.ansEnabled()?e.index:void 0,disabledFeatures:this.getDisabledFeatures(),seedPrefix:n(r)},o={};switch(e.type){case"table":var c=[];this.statements.hasOwnProperty(r)&&(c=this.statements[r].getAllIds()),e.shouldGraph=!0;for(var l,m,y,g=e.columns,v=[],b=0,x=0;x<g.length;x++)b=Math.max(g[x].values.length,b);for(var S=0;S<g.length;S++){a.seedPrefix=n(r,[["tr",0],["tc",S]]),l=s.parse(g[S].latex,a),m=[];for(var M=-1,D=0;D<g[S].values.length;D++)g[S].values[D].replace(/\\\\space/g,"").match(/\\S/)?(a.seedPrefix=n(r,[["tr",D+1],["tc",S]]),m.push(s.parse(g[S].values[D],a)),M=D):m.push(u(NaN));m=m.slice(0,M+1),y=d(l,b,m),y.id=g[S].id,y.header&&(y.header.userData=g[S]),y.header&&(y.header.metaData={}),v.push(y)}this.statements[r]=h(v);var T=this,P=this.statements[r].getAllIds();c.forEach(function(e){-1===P.indexOf(e)&&T._notifyGraphRemoved(e,t)});break;case"image":var I="-\\\\trigAngleMultiplier*\\\\arctan(\\\\sin("+e.angle+"),\\\\cos("+e.angle+"))";a.seedPrefix=n(r,[["ic",r]]);var C=s.parse(e.center,a);a.seedPrefix=n(r,[["ia",r]]);var O=s.parse(I,a);a.seedPrefix=n(r,[["iw",r]]);var A=s.parse(e.width,a);a.seedPrefix=n(r,[["ih",r]]);var L=s.parse(e.height,a);a.seedPrefix=n(r,[["io",r]]);var N=s.parse(e.opacity,a);this.statements[r]=p({center:C,radianAngle:O,width:A,height:L,opacity:N});break;default:if(this.statements[r]=s.parse(e.latex,a),this.statements[r].shouldPromoteToSlider(this.policy)){var q=e.slider;a.seedPrefix=n(r,[["lm",r]]);var F=E(q&&q.min,a);a.seedPrefix=n(r,[["lM",r]]);var R=E(q&&q.max,a);a.seedPrefix=n(r,[["ls",r]]);var V=E(q&&q.step,a);e.lineWidth&&(a.seedPrefix=n(r,[["lw",r]]),o.lineWidth=E(e.lineWidth,a)),this.statements[r]=f(this.statements[r],{sliderMin:F,sliderMax:R,sliderStep:V})}else if(e.polarDomain&&e.polarDomain.min&&(a.seedPrefix=n(r,[["lm",r]]),o.polarDomainMin=i(e.polarDomain.min,a)),e.polarDomain&&e.polarDomain.max&&(a.seedPrefix=n(r,[["lM",r]]),o.polarDomainMax=i(e.polarDomain.max,a)),e.parametricDomain&&e.parametricDomain.min&&(a.seedPrefix=n(r,[["lm",r]]),o.parametricDomainMin=i(e.parametricDomain.min,a)),e.parametricDomain&&e.parametricDomain.max&&(a.seedPrefix=n(r,[["lM",r]]),o.parametricDomainMax=i(e.parametricDomain.max,a)),e.vizProps&&(e.vizProps.axisOffset&&(a.seedPrefix=n(r,[["vo",r]]),o.vizAxisOffset=i(e.vizProps.axisOffset,a)),e.vizProps.breadth&&(a.seedPrefix=n(r,[["vb",r]]),o.vizBreadth=i(e.vizProps.breadth,a))),e.lineWidth&&(a.seedPrefix=n(r,[["lw",r]]),o.lineWidth=E(e.lineWidth,a)),e.fillOpacity&&(a.seedPrefix=n(r,[["fo",r]]),o.fillOpacity=E(e.fillOpacity,a)),e.cdf&&e.cdf.show){var k=w.parseToplevelFunction(e.latex,a);k&&"distribution"===k.type&&(o.distributionSpec=k,a.seedPrefix=n(r,[["lm",r]]),o.cdfMin=E(e.cdf.min,a),a.seedPrefix=n(r,[["lM",r]]),o.cdfMax=E(e.cdf.max,a))}}if(e.clickableInfo&&e.clickableInfo.enabled&&(o.clickableAssignment=E(e.clickableInfo.assignment,a),o.clickableExpression=E(e.clickableInfo.expression,a)),this.statements[r].userData=e,this.statements[r].metaData=o,e.label){var B=this.currentLabel[r];B&&B.raw===e.label||(this.currentLabel[r]=_.parse(e.label))}else delete this.currentLabel[r]}},e.removeStatement=function(e,t){var r=this.statements[e];if(r){if(this.markExportsDirty(e),r.isTable){var n=this;r.getAllIds().forEach(function(e){n._notifyGraphRemoved(e,t)})}else this._notifyGraphRemoved(e,t);delete this.currentLabel[e],delete this.statements[e],delete this.analysis[e]}},e.invalidate=function(){for(var e in this.statements)this.statements.hasOwnProperty(e)&&this.markAsDirtyRoot(e);this.currentStatus={},this.analysis={},this.parent_frame=L[this.evaluationMode].getFrame({restrictedFunctions:this.restrictedFunctions,replaceRoundWithReciprocal:this.replaceRoundWithReciprocal,distributions:this.distributions,additionalFunctions:this.additionalFunctions,trigAngleMultiplier:u(this.use_degrees?Math.PI/180:T(1,1)),globalRandomSeed:c(this.globalRandomSeedString||"")}),this.frame=Object.create(this.parent_frame),this.lastFrame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)},e.markExportsDirty=function(e){if(this.statements[e]){this.statements[e].isRegression&&(this.markedRegressionDirty=!0);for(var t=this.statements[e].getLegalExports(this.policy),r=0;r<t.length;r++)this.dirtyExportedSymbolRoots[t[r]]=!0}},e.markAsDirtyRoot=function(e){this.dirtyStatementRoots[e]=!0},e.getFrame=function(){return this.updateAnalysis(),this.frame},e.getAnalysis=function(){return this.updateAnalysis(),this.analysis},e.getStatus=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].status},e.getEvaluationState=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].evaluationState},e._updateRegressions=function(e){var t,r=this.frame,n=this.lastFrame,i=this.regressionFrame,a=[];for(t in e)e.hasOwnProperty(t)&&e[t].isRegression&&a.push(t);var o=this;a.sort(function(e,t){var r=o.statements[e].userData&&o.statements[e].userData.residualVariable,n=o.statements[t].userData&&o.statements[t].userData.residualVariable;return r&&!n?-1:n&&!r?1:0});var s=y(this.policy,e,a);q(s,i);for(var u=s.resolved,c={},l=0;l<u.length;l++)if(t=u[l],this.statements[t].isRegression)this.analysis[t]=e[t].analyze(this.policy,i,r,n,c),this.analysis[t].exportTo(this.policy,r),delete e[t];else{var p=e[t].tryGetConcreteTree(this.policy,i);e[t].exportTo(this.policy,p,i),c[t]={rawTree:e[t],concreteTree:p}}},e.buildSymbolToExpressionDirtyMap=function(){var e={};for(var t in this.statements)if(this.statements.hasOwnProperty(t)){var r=this.statements[t],n=r.metaData;F(e,t,r.getDependencies()),F(e,t,r.getLegalExports(this.policy)),r.isRegression&&r.userData&&r.userData.residualVariable&&F(e,t,[I.latexToIdentifier(r.userData.residualVariable)]),n.polarDomainMin&&F(e,t,n.polarDomainMin.getDependencies()),n.polarDomainMax&&F(e,t,n.polarDomainMax.getDependencies()),n.parametricDomainMin&&F(e,t,n.parametricDomainMin.getDependencies()),n.parametricDomainMax&&F(e,t,n.parametricDomainMax.getDependencies()),n.vizBinWidth&&F(e,t,n.vizBinWidth.getDependencies()),n.vizBinCenter&&F(e,t,n.vizBinCenter.getDependencies()),n.vizAxisOffset&&F(e,t,n.vizAxisOffset.getDependencies()),n.vizBreadth&&F(e,t,n.vizBreadth.getDependencies()),n.cdfMin&&F(e,t,n.cdfMin.getDependencies()),n.cdfMax&&F(e,t,n.cdfMax.getDependencies()),n.lineWidth&&F(e,t,n.lineWidth.getDependencies()),n.fillOpacity&&F(e,t,n.fillOpacity.getDependencies()),n.clickableAssignment&&F(e,t,n.clickableAssignment.getDependencies()),n.clickableExpression&&F(e,t,n.clickableExpression.getDependencies())}return e},e.getDirtyIdsAndSymbols=function(e){var t,r,n,i={},a={},o=this.markedRegressionDirty,s=[],u=[];for(t in this.dirtyStatementRoots)this.dirtyStatementRoots[t]&&(a[t]=!0,s.push(t));for(n in this.dirtyExportedSymbolRoots)this.dirtyExportedSymbolRoots[n]&&(i[n]=!0,u.push(n));for(;s.length||u.length;){for(;s.length;){t=s.pop();var c=this.statements[t];if(c){c.isRegression&&(o=!0);var l=c.getLegalExports(this.policy);for(r=0;r<l.length;r++)n=l[r],i[n]||(i[n]=!0,u.push(n))}}for(;u.length;){n=u.pop();var p=e[n];if(p)for(r=0;r<p.length;r++)t=p[r],a[t]||(a[t]=!0,s.push(t))}}return{ids:a,symbols:i,hasDirtyRegression:o}},e.updateAnalysis=function(){var e,n,i,a=this.buildSymbolToExpressionDirtyMap(),o=this.getDirtyIdsAndSymbols(a);if(o.hasDirtyRegression){i={};for(e in this.statements)this.statements[e]&&(i[e]=this.statements[e]);this.frame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)}else{var s=o.ids;i={};for(e in s)this.statements[e]&&(i[e]=this.statements[e]);var u=o.symbols;for(n in u)u[n]&&(delete this.frame[n],delete this.regressionFrame[n])}for(e in i)i[e]&&(this.unpublishedIds[e]=!0);this.markedRegressionDirty=!1,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={};var c=this.analysis,l=this.frame;"graphing"===this.evaluationMode&&this._updateRegressions(i);var p=y(this.policy,i);q(p,l);for(var f=p.resolved,h=0;h<f.length;h++)switch(e=f[h],this.evaluationMode){case"fourFunction":case"singleExpressionFourFunction":c[e]=this.statements[e].analyzeFourFunction(this.policy,l,c),c[e].exportTo(this.policy,l);break;case"scientific":c[e]=this.statements[e].analyzeScientific(this.policy,l,c),c[e].exportTo(this.policy,l);break;case"singleExpressionScientific":c[e]=this.statements[e].analyzeSingleExpressionScientific(this.policy,l,c),c[e].exportTo(this.policy,l);break;case"graphing":case"graphing_3d":if(l.r){var d=Object.create(l);if(d.r=m("r"),c[e]=this.statements[e].analyze(this.policy,d,c),c[e].getGraphMode()===v.POLAR){c[e].exportTo(this.policy,l);continue}}c[e]=this.statements[e].analyze(this.policy,l,c),c[e].exportTo(this.policy,l)}if("graphing"===this.evaluationMode||"graphing_3d"===this.evaluationMode)for(h=0;h<f.length;h++){e=f[h];var g=c[e],b=g.evaluationState.expression_type;B(g,this.policy,l),b!==M.POLYGON&&b!==M.PARAMETRIC||k(g,this.policy,l),r(g)&&j(g,this.policy,l),b===M.PARAMETRIC||b===M.POLAR?z(g,this.policy,l):b===M.BOXPLOT?G(g,this.policy,l):t(g)&&V(g,this.policy,l)}U(a).forEach(function(e){c[e].evaluationState.depends_on_random_seed=!0}),this.lastFrame=Object.create(this.parent_frame);for(n in l)l.hasOwnProperty(n)&&(this.lastFrame[n]=l[n])}})}),define("worker/workercore",["require","core/math/context"],function(e){"use strict";var t=e("core/math/context");return function(e){var r=t();return{processChangeSet:function(t){var n=r.processChangeSet(t);e("processChangeSet",n)}}}}),define("console",["require"],function(e){var t=function(){},r=["log","info","warn","error","assert","dir","clear","profile","profileEnd","time","timeEnd","group","groupCollapsed","groupEnd","trace"],n={},i=function(e){"undefined"!=typeof window&&window.console&&window.console[e]?n[e]=function(){Function.prototype.apply.call(window.console[e],window.console,arguments)}:n[e]=t};return r.forEach(i),n}),define("worker/worker",["require","worker/workercore","console"],function(e){"use strict";var t=e("worker/workercore"),r={};e("console").log=function(e){self.postMessage({log:JSON.stringify(e)})};var n=self;n.window=n,n.onmessage=function(e){var i=e.data&&e.data.connectionId;if(i)if("destroy"===e.data.originalMessage.type)delete r[i];else{var a=r[i];a||(a=t(function(e,t){n.postMessage({connectionId:i,originalMessage:{type:e,payload:t}})}),r[i]=a),a.processChangeSet(e.data.originalMessage)}},n.loadMessageQueue&&(n.loadMessageQueue.forEach(function(e){n.onmessage(e)}),delete n.loadMessageQueue)}),function(){"use strict";"undefined"==typeof window&&(void 0===requirejs&&(importScripts("../vendor/require.js"),importScripts("config.js")),self.loadMessageQueue=[],self.onmessage=function(e){self.loadMessageQueue.push(e)},requirejs(["worker/worker"]))}(),define("toplevel/worker",function(){});
`}),P("worker_src",["require","text!worker_src_underlying"],function(S){return S("text!worker_src_underlying")}),P("worker/create_worker_url",["require","worker_src"],function(S){var c=S("worker_src");return function(){if(!c.length)return"/assets/generated/combined/toplevel/worker.js";var x;try{x=new Blob([c],{type:"application/javascript"})}catch{try{var t=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,l=new t;l.append(c),x=l.getBlob("application/javascript")}catch{return null}}return(window.URL||window.webkitURL).createObjectURL(x)}}),P("worker/fakeworker",["require","worker/workercore"],function(S){var c=S("worker/workercore");return function(x){function t(i,s){x({type:i,payload:s})}var l={},n=c(t);return l.postMessage=function(i){setTimeout(function(){n.processChangeSet(i)},0)},l}}),P("worker/workerpool",["require","console","./create_worker_url","pjs","underscore_model","./fakeworker","underscore","lib/urlparser"],function(S){function c(y){return u?function(h){f=Math.max(Date.now(),f)+u,setTimeout(y,f-Date.now(),h)}:y}var x=S("console"),t=S("./create_worker_url"),l=S("pjs"),n=S("underscore_model").UnderscoreModel,i=S("./fakeworker"),s=S("underscore"),g=S("lib/urlparser"),d=g.getParameter(location.search,"workerThrottle"),u=parseInt(d,10),f=0;return l(n,function(y,h){y.init=function(p){h.init.call(this),this.workers=[],this.maxWorkers=p,this.workerURL=t()},y.allowedToSpawnWorker=function(){return this.workerURL&&this.workers.length<this.maxWorkers},y.killWorker=function(p){s.indexOf(this.workers,p)!==-1&&(p.terminate(),this.workers=s.without(this.workers,p),s.shuffle(s.values(p.__connections)).forEach(function(r){r&&r.onWorkerKilled&&r.onWorkerKilled()}))},y.spawnWorker=function(){try{var p=new Worker(this.workerURL);return p.__connections={},p.__isFake=!1,p.onerror=function(r){x.log(r)},p.addEventListener("message",c(function(r){var o=r.data;if((!o||!o.log)&&o&&o.connectionId){var m=p.__connections[o.connectionId];m&&m.onResponse(o.originalMessage)}})),this.workers.push(p),p}catch{return null}},y.spawnFakeWorker=function(){var p=i(c(function(r){var o=s.values(p.__connections)[0];o&&o.onResponse(r)}));return p.__isFake=!0,p.__connections={},p},y.findLeastUsedWorker=function(){var p=function(r){return s.size(r.__connections)};return s.sortBy(this.workers,p)[0]},y.allocateWorker=function(){var p=null;return this.allowedToSpawnWorker()&&(p=this.spawnWorker()),p||(p=this.findLeastUsedWorker()),p||(p=this.spawnFakeWorker()),p}})}),P("main/evaluator",["require","exports","worker/workerpoolconnection","worker/workerpool","core/lib/deepCopy","core/math/functions","underscore"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=(function(){function g(d){this.listeners={processChangeSet:function(u){var f={},y={};for(var h in u.graphChanges){var p=u.graphChanges[h];p===void 0?y[h]=!0:(n.rehydrateGraphData(p),f[h]=p)}var r={};for(var h in u.intersectionChanges)y[h]||(r[h]=u.intersectionChanges[h]);this.onEvaluatorResults({evaluationStates:u.statusChanges,graphData:{addedGraphs:f,removedGraphs:y,intersections:r},renderSlowly:!!u.isCompleteState});for(var o=u.syncId;this.syncRequests.length&&o!==void 0&&this.syncRequests[0].id<=o;)this.syncRequests.shift().callback();this.markJobFinished(),this._processChangeSet()}},this.__state={},this.changeSet=null,this.cumulativeChangeSet={},this.syncId=1,this.syncRequests=[],d||(d=t()),this.workerPool=d,this.createWorkerPoolConnection()}return g.prototype.createWorkerPoolConnection=function(){var d=this;this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){}),this.workerPoolConnection=x(this.workerPool),this.markJobFinished(),this.workerPoolConnection.onResponse=function(u){d.shouldIgnoreWorkerMessage(u)?u.type==="processChangeSet"&&(d.markJobFinished(),d._processChangeSet()):d.listeners[u.type].call(d,u.payload)},this.workerPoolConnection.onWorkerKilled=function(){var u=d.hasJobInWorker();d.createWorkerPoolConnection(),u?(d.changeSet=l.default(d.cumulativeChangeSet),d.__state.changed=!0,d.__state.droppedMessage=!0):(d.changeSet=l.default(d.cumulativeChangeSet),d.__state.changed=!1),d.processChangeSet()}},g.prototype.destroy=function(){this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){},this.workerPoolConnection.destroy())},g.prototype.shouldIgnoreWorkerMessage=function(d){return!!this.__suspendUntilSyncId&&(!d||!d.payload||!(d.payload.syncId>=this.__suspendUntilSyncId))},g.prototype.suspend=function(){var d=this;this.changeSet&&this.changeSet.syncId||(this.syncId++,this.applyToChangeSets(function(u){u.syncId=d.syncId})),this.__suspendUntilSyncId=this.changeSet.syncId},g.prototype.markJobFinished=function(){this.__state.droppedMessage=!1,this.__jobStartTime=-1,this.__suspendUntilSyncId=void 0},g.prototype.startJobTimer=function(){this.__jobStartTime=new Date().getTime()},g.prototype.hasJobInWorker=function(){return this.__jobStartTime!==-1},g.prototype.getJobElapsedTime=function(){return this.hasJobInWorker()?new Date().getTime()-this.__jobStartTime:NaN},g.prototype.tick=function(){this._processChangeSet()},g.prototype.processChangeSet=function(){this.__processChangeSetRequested=!0},g.prototype._processChangeSet=function(){if(this._syncEvaluatorConfig(),this.__processChangeSetRequested){var d=this.getJobElapsedTime()>=4e3;if(this.__state.droppedMessage&&d)return void this.workerPoolConnection.killWorker();if(this.__state.changed&&this.changeSet)if(this.changeSet.syncId||(this.syncId++,this.changeSet.syncId=this.syncId),this.hasJobInWorker())this.changeSet.isCompleteState&&d&&this.workerPoolConnection.killWorker();else{var u=this.changeSet;this.changeSet=null,this.__state.changed=!1,this.startJobTimer(),this.workerPoolConnection.sendMessage(u),this.__processChangeSetRequested=!1}}},g.prototype.notifyWhenSynced=function(d){var u=this;if(this._syncEvaluatorConfig(),!this.hasJobInWorker()&&!this.changeSet)return void setTimeout(d,0);this.syncId++,this.syncRequests.push({id:this.syncId,callback:d}),this.applyToChangeSets(function(f){f.syncId=u.syncId})},g.prototype.applyToChangeSets=function(d){this.__state.changed=!0,this.changeSet||(this.changeSet={}),this.cumulativeChangeSet||(this.cumulativeChangeSet={}),d(this.changeSet),d(this.cumulativeChangeSet),this.processChangeSet()},g.prototype.clearStatementsAndStartCompleteState=function(){this.hasJobInWorker()&&this.suspend(),this.applyToChangeSets(function(d){d.isCompleteState=!0,delete d.statements})},g.prototype.addStatement=function(d){this.applyToChangeSets(function(u){u.statements||(u.statements={}),u.statements[d.id]=l.default(d)})},g.prototype.removeStatement=function(d){this.applyToChangeSets(function(u){u.statements||(u.statements={}),u.statements[d]=null})},g.prototype._syncEvaluatorConfig=function(){if(this.readEvaluatorConfig){var d=this.readEvaluatorConfig();for(var u in d)this._applyIfChanged(d,u)}},g.prototype._applyIfChanged=function(d,u){var f=this.cumulativeChangeSet&&this.cumulativeChangeSet[u],y=d[u];i.isEqual(f,y)||this.applyToChangeSets(function(h){h[u]=y})},g})();c.Evaluator=s}),P("graphing/canvaslayer",["require","jquery","pjs","browser","lib/i18n"],function(S){var c=S("jquery"),x=S("pjs"),t=S("browser"),l=S("lib/i18n");return x(function(n){n.init=function(i){this.grapher=i,this.$=c("<div class='dcg-graph-outer' role='img'></div>").attr("aria-roledescription",this.t("graph paper")),this.canvas_node=c("<canvas class='dcg-graph-inner'></canvas>").css("position","relative").css("display","block"),this.devicePixelRatio=window.devicePixelRatio||1,this.ctx=this.canvas_node[0].getContext("2d"),this.resize(0,0),t.IS_IOS&&t.IS_IN_IFRAME&&(this.$.css("-webkit-transform","translate3d(0,-.25px,0)"),this.$.append('<div style="width:1px; height:.5px; pointer-events:none; opacity: 0;" aria-hidden="true">text</div>')),this.$.append(this.canvas_node)},n.resize=function(i,s,g){g=g||this.devicePixelRatio,i===this.width&&s===this.height||(this.width=i,this.height=s,this.canvas_node.css("width",i+"px").css("height",s+"px").attr("width",i*g).attr("height",s*g),this.ctx=this.canvas_node[0].getContext("2d"),this.ctx.scale(g,g))},n.t=function(i,s){return l.t(i,s,this.grapher.settings.language)},n.getAriaLabel=function(i){var s="";if(i===0)return this.t("Empty graph paper.");s=i===1?this.t("Graph paper showing 1 graph."):this.t("Graph paper showing __count__ graphs.",{count:i});var g=this.grapher.getAudioTrace();return g&&!g.getAudioTraceActive()&&g.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!1})!==void 0&&(t.IS_APPLE?s+=this.t(" Press OPTION+T for audio trace."):s+=this.t(" Press ALT+T for audio trace.")),s},n.updateAria=function(i,s){this.$.attr("aria-hidden",!i||!this.grapher.settings.config.graphpaper).attr("tabindex",i&&this.grapher.settings.config.graphpaper&&this.grapher.settings.config.enableTabindex&&s>0?0:-1).attr("aria-label",this.getAriaLabel(s))},n.redraw=function(){}})}),P("loadcss!poi",function(){}),P("graphing/constants",["require","exports"],function(S,c){Object.defineProperty(c,"__esModule",{value:!0}),c.ANIMATE_ZOOM_DURATION=500,c.DOUBLETAP_ZOOM=2,c.ZOOM_FACTOR=1.0625,c.MAX_DOTTED_SEGMENTS=1e3,c.FILL_ALPHA=.4,c.POINT_ALPHA=.9,c.HIGHLIGHTED_POINT_ALPHA=.6,c.POLAR_ALPHA=.2,c.POI_ALPHA=.01,c.OFFSCREEN_RENDER_MARGIN=20,c.LINE_WIDTH=2.5}),P("graphing/dasheddrawer",["require","./constants","core/math/distance"],function(S){function c(l,n,i){return this.pattern=i,this.replen=this.pattern[0]+this.pattern[1],n/this.replen>x.MAX_DOTTED_SEGMENTS&&(this.pattern[0]=n*this.pattern[0]/this.replen/x.MAX_DOTTED_SEGMENTS,this.pattern[1]=n*this.pattern[1]/this.replen/x.MAX_DOTTED_SEGMENTS),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null,this.ctx=l,this}var x=S("./constants"),t=S("core/math/distance");return c.getTotalSegmentLength=function(l){if(l.length<4)return 0;for(var n=0,i=0,s=l[0],g=l[1];isNaN(s)||isNaN(g);){if((i+=2)>=l.length)return 0;s=l[i],g=l[i+1]}var d,u;for(i+=2;i<l.length;i+=2)d=l[i],u=l[i+1],isNaN(d)||isNaN(u)||(n+=t.hypot(d-s,u-g),s=d,g=u);return n},c.prototype.start=function(l,n){this.ctx.desmos_batching||this.ctx.beginPath(),this.px=l,this.py=n},c.prototype.next=function(l,n){var i=this.pattern[this.pstate],s=Math.sqrt(Math.pow(l-this.px,2)+Math.pow(n-this.py,2));if(s>1e-5){for(;s+this.dstaccum>=i;){var g=l-this.px,d=n-this.py,u=i-this.dstaccum;g*=u/s,d*=u/s,this.pstate===0&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(this.px+g,this.py+d)),this.dstaccum=0,this.px+=g,this.py+=d,this.pstate=1-this.pstate,i=this.pattern[this.pstate],s-=u}this.pstate===0&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(l,n))}this.px=l,this.py=n,this.dstaccum+=s},c.prototype.close=function(){this.ctx.desmos_batching||this.ctx.stroke(),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null},c.prototype.drawSegment=function(l){for(var n=0,i=l[0],s=l[1];isNaN(i)||isNaN(s);){if((n+=2)>=l.length)return;i=l[n],s=l[n+1]}this.start(i,s);var g,d;for(n+=2;n<l.length;n+=2)g=l[n],d=l[n+1],isNaN(g)||isNaN(d)||this.next(g,d);this.close()},c}),P("graphing/svg-classes",["require","exports"],function(S,c){function x(l,n){var i=l;i._dcgSaveClassName&&i._dcgSaveClassName(n)}function t(l){var n=l;n._dcgRestoreClassName&&n._dcgRestoreClassName()}Object.defineProperty(c,"__esModule",{value:!0}),c.save=x,c.restore=t}),P("graphing/draw-image-to-ctx",["require","exports","graphing-calc/models/list","./svg-classes"],function(S,c,x,t){function l(n,i,s){if(n.computed_x)for(var g=0;g<n.computed_x.length;g++){var d=n.computed_x[g],u=n.computed_y[g],f=n.computed_width[g],y=n.computed_height[g],h=n.computed_radian_angle[g];if(isFinite(d)&&isFinite(u)&&isFinite(f)&&isFinite(y)&&isFinite(h)){t.save(i,"dcg-svg-image"),i.save(),t.restore(i),i.globalAlpha=n.computed_opacity[g];var p=s.mapy(y)-s.mapy(0),r=s.mapx(f)-s.mapx(0),o=h===0?1:Math.abs(r/f*(y/p)),m=s.mapx(d),b=s.mapy(u),E=m-r/2,M=b+p*o/2,D=y<0?-1:1,A=f<0?-1:1,v=E*A,k=M*D,J=Math.abs(r),X=Math.abs(p);h!==0&&(i.translate(m,b),i.scale(1,1/o),i.rotate(h),i.translate(-m,-b)),i.scale(A,D);var te=!1,H=!1,z=n.controller.getGrapher();z&&z.type==="2d"&&(te=z.clickableObjectsLayer.shouldDrawHovered(n.id),H=z.clickableObjectsLayer.shouldDrawPressed(n.id));var B=n.imageObj;H?n.depressedImageObj?B=n.depressedImageObj:k+=1:te&&(n.hoveredImageObj?B=n.hoveredImageObj:i.globalAlpha*=.8),i.drawImage(B,v,k,J,X*o),x.isItemSelected(n)&&(i.beginPath(),i.rect(v,k,J,X*o),i.restore(),i.save(),i.strokeStyle="#6993C7",i.lineWidth=2,i.stroke()),i.restore()}}}Object.defineProperty(c,"__esModule",{value:!0}),c.drawImageToCtx=l}),P("graphing/svg-groups",["require","exports"],function(S,c){function x(l,n){var i=l;i._dcgStartNamedGroup&&i._dcgStartNamedGroup(n)}function t(l){var n=l;n._dcgEndNamedGroup&&n._dcgEndNamedGroup()}Object.defineProperty(c,"__esModule",{value:!0}),c.save=x,c.restore=t}),P("graphing/graphslayer",["require","pjs","./clipping","./dasheddrawer","./constants","./viewport","core/types/graphmode","underscore","expressions/colors","core/types/styles","core/types/styles","./draw-image-to-ctx","./svg-groups","./svg-classes"],function(S){var c=S("pjs"),x=S("./clipping"),t=S("./dasheddrawer"),l=S("./constants"),n=S("./viewport").Viewport,i=S("core/types/graphmode"),s=S("underscore"),g=S("expressions/colors"),d=S("core/types/styles").PointStyle,u=S("core/types/styles").LineStyle,f=S("./draw-image-to-ctx").drawImageToCtx,y=S("./svg-groups"),h=S("./svg-classes"),p={},r=function(b){return new n(-3,b.width+3,-3,b.height+3)},o=function(b){return Math.round(b-.5)+.5},m=c(function(b){b.init=function(E){if(E.config.plaidMode)for(var M in g)g.hasOwnProperty(M)&&typeof g[M]=="string"&&(p[g[M]]=document.createElement("img"),p[g[M]].setAttribute("src","/assets/img/april-fools/"+M.toLowerCase()+".png"))},b.redrawToCtx=function(E,M,D,A,v,k,J){if(y.save(E,"expressions"),v===void 0)throw new Error("Programming Error: missing drawOrder argument to redrawToCtx");v.forEach(function(X){var te=D[X],H=A[X];te!==void 0&&te.visible&&m.drawSketchToCtx(D[X],E,M,k,J),H&&H.shouldGraph&&H.foreground&&f(H,E,M)}),y.restore(E)}});return m.eachSegment=function(b,E){for(var M=0;M<b.branches.length;M++)for(var D=b.branches[M],A=0;A<D.segments.length;A++){var v=D.segments[A];E(D,v)}},m.drawSketchToCtx=function(b,E,M,D,A){if(b.branches&&b.branches.length){var v=E.lineWidth,k=M.settings.globalCurveColor?M.settings.globalCurveColor:b.color,J=p[k];if(J&&J.complete&&J.naturalWidth>0){var X=E.createPattern(J,"repeat");E.fillStyle=X}else E.fillStyle=k;E.strokeStyle=k,E.lineJoin="round",E.lineCap="round";var te=!!M.settings.takingScreenshot,H=1;A.shouldDrawHovered(b.id)&&(H=1.2),A.shouldDrawPressed(b.id)&&(H=1.4);for(var z=0;z<b.branches.length;z++){var B=b.branches[z];if(B.graphMode!==i.XYPOINT&&B.graphMode!==i.XYPOINT_MOVABLE){B.graphMode!==i.POLAR&&(E.desmos_batching=!0,E.beginPath());for(var F=0;F<B.segments.length;F++){var $=B.segments[F],re=i.Y;if(B.flip&&(re=i.X),B.graphMode&&(re=B.graphMode),re!==i.POLYGONFILL||M.settings.disableFill){if(re!==i.IMPLICIT){var K=B.operator,ue=!M.settings.disableFill&&(K=="<"||K==">"||K=="<="||K==">="||K=="\\leq"||K=="\\le"||K=="\\geq"||K=="\\ge"),ie=K=="<="||K=="<"||K=="\\leq"||K=="\\le";ue&&m.fillGraphStrokeToCtx(E,M,$,ie,re)}}else m.fillPolygonToCtx(E,M,$,B.fillOpacity*H)}E.globalAlpha=this._clampedOpacity(B.fillOpacity*H),B.graphMode!==i.POLAR&&(E.fill(),E.desmos_batching=!1),E.globalAlpha=1}}m.eachSegment(b,(function(Q,pe){if(Q.graphMode!==i.XYPOINT&&Q.graphMode!==i.XYPOINT_MOVABLE){var ee=i.Y;Q.flip&&(ee=i.X),Q.graphMode&&(ee=Q.graphMode);var ae=Q.lineWidth!==void 0,le=Q.lineWidth,me=l.LINE_WIDTH;if(!ae||!(le<=0)&&isFinite(le)){E.lineWidth=ae?le:me;var Ae=M.settings.graphLineWidth/me;E.lineWidth*=Ae;var Be=Q.operator,Fe="default";Be=="<"||Be==">"||Be=="!="||b.style===u.DASHED||Q.style===u.DASHED?Fe=u.DASHED:b.style!==u.DOTTED&&Q.style!==u.DOTTED||(Fe=u.DOTTED,ae&&(E.lineWidth*=2));var Le=A.shouldDrawPressed(b.id),ze=A.shouldDrawHovered(b.id);(Le||ze)&&(E.save(),E.lineWidth+=4.5,E.globalAlpha*=Le?.5:.3,m.drawGraphStrokeToCtx(E,M,pe,Fe,ee,Be),E.restore()),m.drawGraphStrokeToCtx(E,M,pe,Fe,ee,Be)}}}).bind(this)),E.lineWidth=v,m.eachSegment(b,(function(Q,pe){if(Q.graphMode===i.XYPOINT&&Q.showPoint||Q.graphMode===i.XYPOINT_MOVABLE&&te){var ee,ae=[];if(Q.interactiveLabel&&b.labels)for(var le=0,me=b.labels.length;le<me;le++){var Ae=b.labels[le],Be=D.isOpenPOI(Ae),Fe=D.getHoveredPOI()===Ae;ae.push(Be||Fe),!Be&&Fe&&(ee=le)}var Le=1;Q.pointSize==="medium"?Le=1.5:Q.pointSize==="large"&&(Le=2.25);var ze=A.shouldDrawPressed(b.id),We=A.shouldDrawHovered(b.id),Z=1;ze?Z=.5:We&&(Z=.3),Z!==1&&(m.drawPointsToCtx(E,M,pe,Q.style,ae,ee,1.5*Le,Z),E.restore()),m.drawPointsToCtx(E,M,pe,Q.style,ae,ee,Le,1)}}).bind(this))}},m.drawGraphStrokeToCtx=function(b,E,M,D,A,v){var k=x.getClippingGraphType(A,v!=="=",E.settings),J=x.mapSegmentToCanvas(M,E.viewport,E.screen,k),X=x.clipStrokeEdges(J,r(E.screen));if(X.length!==0){b.save(),h.save(b,"dcg-svg-curve"),b.globalAlpha*=E.settings.curveOpacity;var te,H;if(D==u.DASHED)H=new t(b,t.getTotalSegmentLength(X),[11,7]),H.drawSegment(X);else if(D==u.DOTTED)H=E.settings.config.projectorMode?new t(b,t.getTotalSegmentLength(X),[.1,16]):new t(b,t.getTotalSegmentLength(X),[.1,8]),H.drawSegment(X);else if(D!==u.SOLID&&D!=="default"||b.lineWidth!==1){for(b.desmos_batching||b.beginPath(),b.moveTo(X[0],X[1]),te=0;te<X.length;te+=2)b.lineTo(X[te],X[te+1]);b.desmos_batching||b.stroke()}else{b.desmos_batching||b.beginPath();var z=X.length>4||X[0]!==X[2]&&X[1]!==X[3];if(z)for(b.moveTo(X[0],X[1]),te=0;te<X.length;te+=2)b.lineTo(X[te],X[te+1]);else for(b.moveTo(o(X[0]),o(X[1])),te=0;te<X.length;te+=2)b.lineTo(o(X[te]),o(X[te+1]));b.desmos_batching||b.stroke()}h.restore(b),b.restore()}},m.mapPointToScreen=function(b,E,M){var D=b.mapx(E)-.5;if(D<-20||D>b.screen.width+20)return null;var A=b.mapy(M)-.5;return A<-20||A>b.screen.height+20?null:{x:D,y:A}},m.drawPointToCtx=function(b,E,M,D,A,v,k,J,X){var te,H=b.lineWidth,z=b.fillStyle,B=m.mapPointToScreen(E,M,D);if(!B)return!1;h.save(b,"dcg-svg-point"),b.globalAlpha=A||l.POINT_ALPHA,X&&(b.globalAlpha*=X),b.desmos_batching||b.beginPath();var F=E.settings.pointLineWidth;return k&&(F=E.settings.config.projectorMode?17:11,b.lineWidth=F),J&&(F*=J,b.lineWidth=F),v===d.CROSS?(te=.4*F,b.moveTo(B.x-te,B.y-te),b.lineTo(B.x+te,B.y+te),b.moveTo(B.x+te,B.y-te),b.lineTo(B.x-te,B.y+te),b.lineWidth=.3*F):v===d.OPEN?(te=.42*F,b.moveTo(B.x+te,B.y),b.arc(B.x,B.y,te,0,2*Math.PI,!0),b.closePath(),b.fillStyle="white",b.lineWidth=.25*F,b.fill()):(b.moveTo(B.x-.1,B.y-.1),b.lineTo(B.x-.1,B.y+.1),b.lineTo(B.x+.1,B.y+.1),b.lineTo(B.x+.1,B.y-.1)),b.desmos_batching||b.stroke(),b.globalAlpha=1,b.lineWidth=H,b.fillStyle=z,h.restore(b),!0},m.drawPointsToCtx=function(b,E,M,D,A,v,k,J){var X=b.lineWidth;b.lineWidth=E.settings.pointLineWidth;for(var te=0;te<M.length;te++)m.drawPointToCtx(b,E,M[te][0],M[te][1],v===te&&l.HIGHLIGHTED_POINT_ALPHA,D,A[te],k,J);b.lineWidth=X},m.fillGraphStrokeToCtx=function(b,E,M,D,A){b.globalAlpha=A===i.POLAR?l.POLAR_ALPHA:l.FILL_ALPHA;var v,k=null,J=null;if(A===i.POLAR){J=x.ALL;var X=D?0:E.viewport.polarDiameter(),te=E.settings.degreeMode?180:2*Math.PI;k=x.computePolarFill(M,X,te)}else A===i.Y?(J=x.Y,v=D?E.viewport.ymin:E.viewport.ymax,k=x.computeCartesianFill(M,v)):A===i.X&&(J=x.X,v=D?E.viewport.xmin:E.viewport.xmax,k=x.computeCartesianFill(M,v));for(var H=r(E.screen),z=0;z<k.length;z++){var B=x.getClippingGraphType(A,!0,E.settings),F=x.mapSegmentToCanvas(k[z],E.viewport,E.screen,B),$=x.clipFillEdges(F,H,J);if($.length>=6){h.save(b,"dcg-svg-region"),b.desmos_batching||b.beginPath(),b.moveTo($[0],$[1]);for(var re=2;re<$.length;re+=2)b.lineTo($[re],$[re+1]);b.lineTo($[0],$[1]),b.desmos_batching||b.fill(),h.restore(b)}}b.globalAlpha=1},m._clampedOpacity=function(b){return b<0?0:b>1?1:s.isFinite(b)?b:l.FILL_ALPHA},m.fillPolygonToCtx=function(b,E,M,D){var A=r(E.screen);b.globalAlpha=this._clampedOpacity(D);var v=x.mapSegmentToCanvas(M,E.viewport,E.screen,x.Y_EQUALS),k=x.clipFillEdges(v,A,x.ALL);if(k.length>=6){h.save(b,"dcg-svg-region"),b.desmos_batching||b.beginPath(),b.moveTo(k[0],k[1]);for(var J=2;J<k.length;J+=2)b.lineTo(k[J],k[J+1]);b.desmos_batching||b.fill(),h.restore(b)}b.globalAlpha=1},m}),P("graphing/poidotslayer",["require","loadcss!poi","pjs","./graphslayer","./constants"],function(S){S("loadcss!poi");var c=S("pjs"),x=S("./graphslayer"),t=S("./constants"),l=c(function(n){n.init=function(){this.savedPOI=[]},n.redrawToCtx=function(i,s,g,d,u){var f=[];for(var y in g){var h=g[y];if(h.visible){h.showHighlight&&l.drawSketchHighlight(h,i,s,d,u);var p=h.getPOI();(h.showPOI||p.length&&p[0].isAttachedToPlottedPoint())&&f.push.apply(f,l.drawPOIs(p,i,"#AAAAAA",s))}}this.savedPOI=f},n.getDrawnPOI=function(){return this.savedPOI}});return l.drawSketchHighlight=function(n,i,s,g,d){s.settings.setProperty("highlight",!0),x.drawSketchToCtx(n,i,s,g,d),s.settings.setProperty("highlight",!1)},l.drawPOIs=function(n,i,s,g){i.lineWidth=g.settings.pointLineWidth,i.strokeStyle=s||"#AAAAAA",i.fillStyle=s||"#AAAAAA",i.lineJoin="round",i.lineCap="round";var d=i.globalAlpha;i.globalAlpha=t.POI_ALPHA;var u,f,y=[],h=n.length;if(h&&n[0].isAttachedToPlottedPoint())for(u=0;u<h;u++)f=n[u],x.mapPointToScreen(g,f.x,f.y)&&y.push(f);else for(u=0;u<h;u++)f=n[u],x.drawPointToCtx(i,g,f.x,f.y)&&y.push(f);return i.globalAlpha=d,y},l}),P("graphing/stepnumber",["require","pjs","./svg-classes"],function(S){var c=S("pjs"),x=S("./svg-classes"),t=document.createElement("canvas").getContext("2d"),l=c(function(n){n.init=function(i,s){this._label=i,this._fontSize=s,this._layout=this._computeLayout(i,s)},n._computeLayout=function(i,s){var g={};return i.superscript?(g.mantissa_height=s,l.setCtxFontSize(t,g.mantissa_height),g.mantissa_width=t.measureText(i.mantissa).width,g.superscript_height=Math.round(.8*s),l.setCtxFontSize(t,g.superscript_height),g.superscript_width=t.measureText(i.superscript).width,g.mantissa_x=0,g.mantissa_y=s/5,g.superscript_x=g.mantissa_width/2+g.superscript_width/2,g.superscript_y=-s/4,g.top=g.superscript_y-g.superscript_height/2,g.bottom=g.mantissa_y+g.mantissa_height/2,g.left=g.mantissa_x-g.mantissa_width/2,g.right=g.superscript_x+g.superscript_width/2):(g.mantissa_height=s,l.setCtxFontSize(t,s),g.mantissa_width=t.measureText(i.string).width,g.mantissa_x=0,g.mantissa_y=0,g.top=g.mantissa_y-g.mantissa_height/2,g.bottom=g.mantissa_y+g.mantissa_height/2,g.left=g.mantissa_x-g.mantissa_width/2,g.right=g.mantissa_x+g.mantissa_width/2),g},n.getRect=function(){return this.getRectWhenCenteredAt({x:0,y:0})},n.getRectWhenCenteredAt=function(i){return{left:this._layout.left+i.x,right:this._layout.right+i.x,top:this._layout.top+i.y,bottom:this._layout.bottom+i.y}},n.getWidth=function(){return this._layout.right-this._layout.left},n.getHeight=function(){return this._layout.bottom-this._layout.top},n.clampBoundsWithinRect=function(i,s){var g={};return i.x+this._layout.left<s.left?g.x=s.left-this._layout.left:i.x+this._layout.right>s.right?g.x=s.right-this._layout.right:g.x=i.x,i.y+this._layout.top<s.top?g.y=s.top-this._layout.top:i.y+this._layout.bottom>s.bottom?g.y=s.bottom-this._layout.bottom:g.y=i.y,g},n.getValue=function(){return this._label.value},n.getMinusWidth=function(){return this.getValue()<0?(l.setCtxFontSize(t,this._fontSize),t.measureText("-1").width-t.measureText("1").width):0},n.getString=function(){return this._label.superscript?this._label.mantissa+"^"+this._label.superscript:this._label.string},n.drawCenteredAt=function(i,s,g){var d=s.x,u=l.computeBaselineFromCenter(s.y,this._fontSize);g&&x.save(i,g),i.save(),g&&x.restore(i),l.setCtxFontSize(i,this._fontSize),this._label.superscript?(i.strokeText(this._label.mantissa,this._layout.mantissa_x+d,this._layout.mantissa_y+u),i.strokeText(this._label.superscript,this._layout.superscript_x+d,this._layout.superscript_y+u),i.fillText(this._label.mantissa,this._layout.mantissa_x+d,this._layout.mantissa_y+u),i.fillText(this._label.superscript,this._layout.superscript_x+d,this._layout.superscript_y+u)):(i.strokeText(this._label.string,this._layout.mantissa_x+d,this._layout.mantissa_y+u),i.fillText(this._label.string,this._layout.mantissa_x+d,this._layout.mantissa_y+u)),i.restore()}});return l.computeBaselineFromCenter=function(n,i){return n+.272*i},l.setCtxFontSize=function(n,i){n.font=i+"px Arial",n.textAlign="center"},l}),P("graphing/computestepsizes",["require","./stepnumber","core/lib/label"],function(S){function c(i){return i?{base:10,major:[i,2*i,5*i],minor:[4,4,5]}:l.RATIONAL_STEPS}var x=S("./stepnumber"),t=S("core/lib/label"),l={},n=function(i,s,g,d){var u=Math.ceil(i/g),f=Math.floor(s/g),y=1/g;if(!(u>f||f-u>1e4))for(var h=u;h<=f;h++)d(h/y)};return l.RATIONAL_STEPS={base:10,major:[1,2,5],minor:[5,4,5]},l.PI_STEPS={base:10,major:[Math.PI,2*Math.PI,5*Math.PI],minor:[4,4,5]},l.PI_FRAC_STEPS={base:2,major:[Math.PI/3],minor:[3]},l.bestStep=function(i,s){for(var g,d,u,f,y=1/0,h=0;h<s.major.length;h++)g=s.major[h],u=Math.ceil(Math.log(i/g)/Math.log(s.base)),(f=g*Math.pow(s.base,u))<y&&(y=f,d=y/s.minor[h]);return{major:y,minor:d}},l.countStepsInRange=function(i,s,g){return 1+(s-i)/g},l.calculateSpaceBetweenRects=function(i,s){var g,d;return d=i.right<s.left?s.left-i.right:s.right<i.left?i.left-s.right:0,g=i.bottom<s.top?s.top-i.bottom:s.bottom<i.top?i.top-s.bottom:0,Math.max(g,d)},l.estimateMajors=function(i){var s=i.screen.width,g=i.screen.height,d=i.viewport.xmax-i.viewport.xmin,u=i.viewport.ymax-i.viewport.ymin,f=i.settings.pixelsPerLabel;return{majorStepX:f/s*d,majorStepY:f/g*u}},l.cartesian=function(i){var s,g={},d=Math.abs(i.settings.xAxisStep),u=Math.abs(i.settings.yAxisStep),f=i.viewport.xmax-i.viewport.xmin,y=i.viewport.ymax-i.viewport.ymin,h=t.value(d,f).string.indexOf("")>=0,p=t.value(u,y).string.indexOf("")>=0,r=l.countStepsInRange(i.viewport.xmin,i.viewport.xmax,d),o=l.countStepsInRange(i.viewport.ymin,i.viewport.ymax,u),m=l.estimateMajors(i),b=i.settings.labelSize;if(d&&d!==Math.PI&&r>=3&&r<100){var E=0;i.settings.xAxisNumbers&&n(i.viewport.xmin,i.viewport.xmax,d,function(X){var te=x(t.value(X,f),b);E=Math.max(te.getWidth(),E)}),s=E+10,i.settings.xAxisNumbers||(s=i.settings.xAxisMinorSubdivisions===1?8:20),r*s<=i.screen.width&&(g.majorStepX=d,g.minorStepX=d===3||d===5?1:d/4)}if(u&&u!==Math.PI&&o>=3&&o<100){var M=0;i.settings.yAxisNumbers&&n(i.viewport.ymin,i.viewport.ymax,u,function(X){var te=x(t.value(X,y),b);M=Math.max(te.getHeight(),M)}),s=M+10,i.settings.yAxisNumbers||(s=i.settings.yAxisMinorSubdivisions===1?8:20),o*s<=i.screen.height&&(g.majorStepY=u,g.minorStepY=u===3||u===5?1:u/4)}if(!g.majorStepX){var D;D=h?m.majorStepX>=1?l.PI_STEPS:l.PI_FRAC_STEPS:c(d);var A=l.bestStep(m.majorStepX,D);g.majorStepX=A.major,g.minorStepX=A.minor}if(!g.majorStepY){var v;v=p?m.majorStepY>=1?l.PI_STEPS:l.PI_FRAC_STEPS:c(u);var k=l.bestStep(m.majorStepY,v);g.majorStepY=k.major,g.minorStepY=k.minor}if(d===u){var J=i.screen.width/f/(i.screen.height/y);J>=1&&J<=2?(g.majorStepX=g.majorStepY,g.minorStepX=g.minorStepY):J<=1&&J>=.5&&(g.majorStepY=g.majorStepX,g.minorStepY=g.minorStepX)}return i.settings.xAxisMinorSubdivisions>0&&(g.minorStepX=g.majorStepX/i.settings.xAxisMinorSubdivisions),i.settings.yAxisMinorSubdivisions>0&&(g.minorStepY=g.majorStepY/i.settings.yAxisMinorSubdivisions),g},l.polar=function(i){var s=l.estimateMajors(i),g=l.bestStep(s.majorStepX,l.RATIONAL_STEPS),d=l.bestStep(s.majorStepY,l.RATIONAL_STEPS),u=g.major>d.major?g:d;return{majorStepR:u.major,minorStepR:u.minor}},l}),P("graphing/gridlayer",["require","pjs","./stepnumber","core/lib/label","./computestepsizes","core/graphing-calc/json/graph-settings","./svg-classes","./svg-groups"],function(S){var c=S("pjs"),x=S("./stepnumber"),t=S("core/lib/label"),l=S("./computestepsizes"),n=S("core/graphing-calc/json/graph-settings").AxisArrowModes,i=S("./svg-classes"),s=S("./svg-groups"),g=c(function(h){h.redrawToCtx=function(p,r,o){s.save(p,"graphpaper");var m,b,E=r.settings.showGrid;if(r.settings.polarMode&&E)m=l.polar(r),s.save(p,"grid"),this.drawPolarGrid(p,r,m),s.restore(p),s.save(p,"axis"),this.drawAxes(p,r,o),b=this.drawPolarStepNumbers(p,r,m),this.drawLabels(p,r,b),s.restore(p);else{m=l.cartesian(r),E&&(s.save(p,"grid"),this.drawCartesianGrid(p,r,m),s.restore(p));var M=!E;s.save(p,"axis"),this.drawAxes(p,r,o),b=this.drawCartesianStepNumbers(p,r,m,M),this.drawLabels(p,r,b),s.restore(p)}s.restore(p)},h.addTextShadow=function(p,r){p.strokeStyle=r.settings.getBackgroundColor(),p.lineWidth=3,p.miterLimit=2},h.drawPolarGrid=function(p,r,o){p.save();var m=r.settings.minorAxisOpacity,b=r.settings.majorAxisOpacity,E=1-(1-b)/(1-m),M=Math.round(r.mapx(0))-.5,D=Math.round(r.mapy(0))-.5,A=r.screen.height/(r.viewport.ymax-r.viewport.ymin),v=r.screen.width/(r.viewport.xmax-r.viewport.xmin),k=A/v,J=v/A,X=D/k,te=r.viewport.smallestR(),H=r.viewport.largestR(),z=o.minorStepR*Math.max(1,Math.floor(te/o.minorStepR)),B=o.majorStepR*Math.max(1,Math.floor(te/o.majorStepR));p.lineWidth=1,p.strokeStyle="rgba(0, 0 , 0, "+m+")",d(z,H,o.minorStepR,function(F){i.save(p,"dcg-svg-minor-gridline"),p.beginPath(),i.restore(p),p.scale(1,k);var $=r.mapx(F)-M;p.moveTo(M+$,X),p.arc(M,X,$,0,2*Math.PI),p.scale(1,J),p.stroke()}),d(0,359,te>0?5:15,function(F){if((F!==0&&F!==180||!r.settings.showXAxis)&&(F!==90&&F!==270||!r.settings.showYAxis)){i.save(p,"dcg-svg-minor-gridline"),p.beginPath(),i.restore(p),p.moveTo(M,D);var $=r.mapx(H*Math.cos(F*Math.PI/180)),re=r.mapy(H*Math.sin(F*Math.PI/180));p.lineTo(Math.round($)-.5,Math.round(re)-.5),p.stroke()}}),p.lineWidth=1,p.strokeStyle="rgba(0, 0 , 0, "+E+")",d(B,H,o.majorStepR,function(F){i.save(p,"dcg-svg-major-gridline"),p.beginPath(),i.restore(p),p.scale(1,k);var $=r.mapx(F)-M;p.moveTo(M+$,X),p.arc(M,X,$,0,2*Math.PI),p.scale(1,J),p.stroke()}),p.restore()},h.drawCartesianGrid=function(p,r,o){p.save();var m=r.viewport.xmin,b=r.viewport.ymin,E=r.viewport.xmax,M=r.viewport.ymax,D=r.screen.width,A=r.screen.height,v=A,k=0;r.settings.restrictGridToFirstQuadrant&&(m=0,b=0,v=r.mapy(0),k=r.mapx(0));var J=r.settings.minorAxisOpacity,X=r.settings.majorAxisOpacity;p.lineWidth=1,p.strokeStyle="rgba(0, 0 , 0, "+J+")",i.save(p,"dcg-svg-minor-gridline"),d(m,E,o.minorStepX,function(H){if(H!==0||!r.settings.showYAxis){var z=Math.round(r.mapx(H));z!==D&&(p.beginPath(),p.moveTo(z-.5,0),p.lineTo(z-.5,v),p.stroke())}}),d(b,M,o.minorStepY,function(H){if(H!==0||!r.settings.showXAxis){var z=Math.round(r.mapy(H));z!==A&&(p.beginPath(),p.moveTo(k,z-.5),p.lineTo(D,z-.5),p.stroke())}}),i.restore(p);var te=1-(1-X)/(1-J);p.strokeStyle="rgba(0, 0 , 0, "+te+")",i.save(p,"dcg-svg-major-gridline"),d(m,E,o.majorStepX,function(H){if(H!==0||!r.settings.showYAxis){var z=Math.round(r.mapx(H));z!==D&&(p.beginPath(),p.moveTo(z-.5,0),p.lineTo(z-.5,v),p.stroke())}}),d(b,M,o.majorStepY,function(H){if(H!==0||!r.settings.showXAxis){var z=Math.round(r.mapy(H));z!==A&&(p.beginPath(),p.moveTo(k,z-.5),p.lineTo(D,z-.5),p.stroke())}}),i.restore(p),p.restore()},h.drawAxes=function(p,r,o){function m($,re,K){p.save();var ue=Math.PI/12,ie=8*Math.max(p.lineWidth,1.5);p.lineJoin="round",p.fillStyle=D,p.strokeStyle=D,p.beginPath(),p.moveTo($,re),p.lineTo($+Math.cos(K-ue)*ie,re+Math.sin(K-ue)*ie),p.lineTo($+Math.cos(K+ue)*ie,re+Math.sin(K+ue)*ie),p.lineTo($,re),p.lineTo($+Math.cos(K-ue)*ie,re+Math.sin(K-ue)*ie),p.stroke(),p.fill(),p.restore()}var b=r.settings.axisLineOffset,E=r.settings.axisOpacity.toString();i.save(p,"dcg-svg-axis-line");var M="rgba(127,205,230,"+E+")",D="rgba(0,0,0,"+E+")",A=r.settings.xAxisArrowMode,v=r.settings.yAxisArrowMode,k=r.settings.showXAxis,J=r.settings.showYAxis,X=Math.round(r.mapx(0))-b,te=Math.round(r.mapy(0))-b,H=r.screen.height,z=r.screen.width,B=H,F=0;r.settings.restrictGridToFirstQuadrant&&(B=te,F=X,A===n.BOTH&&(A=n.POSITIVE),v===n.BOTH&&(v=n.POSITIVE)),J&&(p.lineWidth=1*r.settings.axisLineWidth,p.strokeStyle=o==="y"?M:D,v===n.BOTH?(p.beginPath(),p.moveTo(X,2*r.settings.axisLineWidth),p.lineTo(X,H-2*r.settings.axisLineWidth),p.stroke(),m(X,H-r.settings.axisLineWidth,3*Math.PI/2),m(X,r.settings.axisLineWidth,Math.PI/2)):v===n.POSITIVE?(p.beginPath(),p.moveTo(X,2*r.settings.axisLineWidth),p.lineTo(X,B),p.stroke(),m(X,r.settings.axisLineWidth,Math.PI/2)):(p.beginPath(),p.moveTo(X,0),p.lineTo(X,B),p.stroke())),k&&(p.lineWidth=1*r.settings.axisLineWidth,p.strokeStyle=o==="x"?M:D,A===n.BOTH?(p.beginPath(),p.moveTo(2*r.settings.axisLineWidth,te),p.lineTo(z-2*r.settings.axisLineWidth,te),p.stroke(),m(r.settings.axisLineWidth,te,0),m(z-r.settings.axisLineWidth,te,Math.PI)):A===n.POSITIVE?(p.beginPath(),p.lineTo(F,te),p.lineTo(z-2*r.settings.axisLineWidth,te),p.stroke(),m(z-r.settings.axisLineWidth,te,Math.PI)):(p.beginPath(),p.lineTo(F,te),p.lineTo(z,te),p.stroke())),i.restore(p)},h.drawPolarStepNumbers=function(p,r,o){function m(Oe,N,Pe){var Xe=Math.sqrt(Oe*Oe-N*N);te<=Xe&&Xe<=H&&Pe.push({x:r.mapx(N),y:r.mapy(Xe)}),te<=-Xe&&-Xe<=H&&Pe.push({x:r.mapx(N),y:r.mapy(-Xe)})}function b(Oe,N,Pe){var Xe=Math.sqrt(Oe*Oe-N*N);J<=Xe&&Xe<=X&&Pe.push({x:r.mapx(Xe),y:r.mapy(N)}),J<=-Xe&&-Xe<=X&&Pe.push({x:r.mapx(-Xe),y:r.mapy(N)})}p.save();var E=r.settings.showGrid,M=r.settings.xAxisNumbers&&r.settings.showXAxis,D=r.settings.yAxisNumbers&&r.settings.showYAxis,A=E&&r.settings.polarNumbers,v=r.viewport.largestR(),k=r.viewport.smallestR(),J=r.viewport.xmin,X=r.viewport.xmax,te=r.viewport.ymin,H=r.viewport.ymax,z=r.screen.width,B=r.screen.height,F={left:3,right:z-3,top:3,bottom:B-3},$=r.settings.labelHangingColor,re=r.settings.getTextColor(),K=r.settings.labelSize,ue=K;this.addTextShadow(p,r),p.fillStyle=re;var ie=r.mapx(0),Q=r.mapy(0),pe=te<=0&&0<=H,ee=J<=0&&0<=X,ae=pe&&M,le=ee&&D,me="";if(!ae&&!le&&E){var Ae,Be,Fe,Le,ze=Math.abs(ie),We=Math.abs(ie-z),Z=Math.abs(Q),C=Math.abs(Q-B);ze<=We?(Ae="left",Fe=ze):(Ae="right",Fe=We),Z<=C?(Be="top",Le=Z):(Be="bottom",Le=C),M&&D?me=Fe<=Le?Ae:Be:D?me=Ae:M&&(me=Be)}var oe={left:0,right:z,top:Q-1,bottom:Q+1},ge={left:ie-1,right:ie+1,top:0,bottom:B};if(d(0,v,o.majorStepR,function(Oe){var N=[],Pe=[],Xe=[],$e=x(t.value(Oe,v),K),ht=$e.getRect();switch(Oe>0?(le&&te<=Oe&&Oe<=H&&Pe.push({x:ie-ht.right-5,y:r.mapy(Oe)}),le&&te<=-Oe&&-Oe<=H&&Pe.push({x:ie-ht.right-5,y:r.mapy(-Oe)}),ae&&J<=Oe&&Oe<=X&&N.push({x:r.mapx(Oe),y:Q-ht.top+3}),ae&&J<=-Oe&&-Oe<=X&&N.push({x:r.mapx(-Oe),y:Q-ht.top+3})):le&&!M&&te<=Oe&&Oe<=H?Pe.push({x:ie-ht.right-5,y:r.mapy(Oe)}):ae&&!D&&J<=Oe&&Oe<=X&&N.push({x:r.mapx(Oe),y:Q-ht.top+3}),me){case"top":b(Oe,H,Xe);break;case"bottom":b(Oe,te,Xe);break;case"left":m(Oe,J,Xe);break;case"right":m(Oe,X,Xe)}N.forEach(function(ye){ye=$e.clampBoundsWithinRect(ye,F),$e.drawCenteredAt(p,ye,"dcg-svg-axis-value"),f(oe,$e.getRectWhenCenteredAt(ye))}),Pe.forEach(function(ye){ye=$e.clampBoundsWithinRect(ye,F),$e.drawCenteredAt(p,ye,"dcg-svg-axis-value"),f(ge,$e.getRectWhenCenteredAt(ye))}),Xe.forEach(function(ye){ye=$e.clampBoundsWithinRect(ye,F),$e.drawCenteredAt(p,ye,"dcg-svg-axis-value")})}),A){var _e=Math.ceil(k/o.majorStepR),De=Math.floor(v/o.majorStepR),je=Math.ceil((_e+De)/2),Ie=je*o.majorStepR;d(0,359,k>0?15:30,function(Oe){var N;N=r.settings.degreeMode?Oe.toString()+"":t.value(Oe*Math.PI/180,2*Math.PI).string;var Pe=p.measureText(N).width/2,Xe=Ie/1.05,$e=Xe*Math.cos(Oe*Math.PI/180),ht=Xe*Math.sin(Oe*Math.PI/180);if(!($e<J||$e>X||ht<te||ht>H)){var ye=r.mapx($e),Ue=r.mapy(ht);Oe===0||Oe===180?Ue-=ue:Oe!==90&&Oe!==270||(ye+=Pe+3);var we=u(ye,3+Pe,z-3-Pe),Te=u(Ue,3+ue,B-3-ue);Te=x.computeBaselineFromCenter(Te,K),i.save(p,"dcg-svg-polar-axis-value"),p.save(),i.restore(p),p.fillStyle=$,x.setCtxFontSize(p,K),p.strokeText(N,we,Te),p.fillText(N,we,Te),p.restore()}})}return p.restore(),{x:oe,y:ge}},h.drawLabels=function(p,r,o){var m=r.viewport.xmin,b=r.viewport.xmax,E=r.viewport.ymin,M=r.viewport.ymax,D=r.screen.width,A=r.screen.height,v=(b-m)/D,k=(M-E)/A,J=r.settings.getTextColor(),X=r.mapx(0),te=r.mapy(0),H=r.settings.labelSize,z=r.settings.showXAxis&&r.settings.xAxisLabel,B=r.settings.showYAxis&&r.settings.yAxisLabel,F=o.x,$=o.y;if(z&&F){i.save(p,"dcg-svg-axis-label"),p.save(),i.restore(p),p.fillStyle=J;var re;if(p.__xLabelOffset&&r.settings.isViewportTransient&&y(p.__xLabelOffset.xscale,v)&&y(p.__xLabelOffset.yscale,k)&&(re={x:p.__xLabelOffset.x+X,y:p.__xLabelOffset.y+te}),this._setAxisLabelFont(p,z,H,r),!re){var K=p.measureText(z).width,ue=D-K-15,ie=H;re=F.bottom+ie<A?{x:ue,y:F.bottom+ie}:{x:ue,y:F.top-ie/2},p.__xLabelOffset={x:re.x-X,y:re.y-te,xscale:v,yscale:k}}p.strokeText(z,re.x,re.y),p.fillText(z,re.x,re.y),p.restore()}else p.__xLabelPosition=null;if(B&&$){i.save(p,"dcg-svg-axis-label"),p.save(),i.restore(p),p.fillStyle=J;var Q;if(p.__yLabelOffset&&r.settings.isViewportTransient&&y(p.__yLabelOffset.xscale,v)&&y(p.__yLabelOffset.yscale,k)&&(Q={x:p.__yLabelOffset.x+X,y:p.__yLabelOffset.y+te}),this._setAxisLabelFont(p,B,H,r),!Q){var pe=p.measureText(B).width,ee=H,ae=pe+5;if(!this._isShortMathyLabel(B)){var le=pe;pe=ee,ee=le,ae=.5*pe}var me=15+ee;Q=$.left-pe>0?{x:$.left-ae,y:me}:{x:$.right+pe,y:me},p.__yLabelOffset={x:Q.x-X,y:Q.y-te,xscale:v,yscale:k}}p.translate(Q.x,Q.y),this._isShortMathyLabel(B)||p.rotate(-Math.PI/2),p.strokeText(B,0,0),p.fillText(B,0,0),p.restore()}else p.__yLabelPosition=null},h._isShortMathyLabel=function(p){return p.trim().match(/^([a-zA-Z]?)\(?([a-zA-Z]?)\)?$/)},h._setAxisLabelFont=function(p,r,o,m){this.addTextShadow(p,m),this._isShortMathyLabel(r)?p.font="italic "+Math.round(1.4*o.toString())+"px Times":p.font=Math.round(1.2*o.toString())+"px Arial"},h.drawCartesianStepNumbers=function(p,r,o,m){p.save();var b=r.settings.showXAxis,E=r.settings.showYAxis,M=b&&r.settings.xAxisNumbers,D=E&&r.settings.yAxisNumbers,A=r.viewport.xmin,v=r.viewport.xmax,k=r.viewport.ymin,J=r.viewport.ymax,X=r.screen.width,te=r.screen.height,H={left:3,top:3,right:X-3,bottom:te-3};r.settings.restrictGridToFirstQuadrant&&(A=0,k=0);var z=r.settings.labelHangingColor,B=r.settings.getTextColor(),F=r.mapx(0),$=r.mapy(0),re=r.settings.labelSize;this.addTextShadow(p,r);var K={left:0,right:X,top:$-1,bottom:$+1},ue={left:F-1,right:F+1,top:0,bottom:te},ie=!1;if(b&&E&&(M||D)){ie=!0,p.fillStyle=B;var Q=x(t.value(0,1),re);Q.drawCenteredAt(p,{x:F-Q.getRect().right-5,y:$-Q.getRect().top+5},"dcg-svg-axis-value")}var pe=[],ee=[];if(M&&d(A,v,o.majorStepX,function(Le){var ze=x(t.value(Le,v-A),re);ze.getString()==="0"&&ie||pe.push(ze)}),D&&d(k,J,o.majorStepY,function(Le){var ze=x(t.value(Le,J-k),re);ze.getString()==="0"&&ie||ee.push(ze)}),m){p.save(),i.save(p,"dcg-svg-tickmark");var ae=r.settings.axisLineOffset,le=r.settings.axisOpacity.toString(),me="rgba(0,0,0,"+le+")";p.lineWidth=r.settings.axisLineWidth,p.strokeStyle=me;var Ae=Math.round(r.mapy(0))-ae,Be=Math.round(r.mapx(0))-ae,Fe=Math.round(2*p.lineWidth)-ae;p.beginPath(),pe.forEach(function(Le){var ze=Math.round(r.mapx(Le.getValue()))-ae;p.moveTo(ze,Ae-Fe),p.lineTo(ze,Ae+Fe)}),ee.forEach(function(Le){var ze=Math.round(r.mapy(Le.getValue()))-ae;p.moveTo(Be-Fe,ze),p.lineTo(Be+Fe,ze)}),p.stroke(),i.restore(p),p.restore()}return pe.forEach(function(Le){var ze={x:r.mapx(Le.getValue())-.5*Le.getMinusWidth(),y:$-Le.getRect().top+5},We=Le.clampBoundsWithinRect(ze,H);p.fillStyle=ze.y===We.y?B:z;var Z="dcg-svg-axis-value";ze.x!==We.x&&(Z+=" dcg-svg-offcenter-axis-value"),Le.drawCenteredAt(p,We,Z),f(K,Le.getRectWhenCenteredAt(We)),i.restore(p)}),ee.forEach(function(Le){var ze={x:F-5-Le.getRect().right,y:r.mapy(Le.getValue())},We=Le.clampBoundsWithinRect(ze,H);p.fillStyle=ze.x===We.x?B:z;var Z="dcg-svg-axis-value";ze.y!==We.y&&(Z+=" dcg-svg-offcenter-axis-value"),Le.drawCenteredAt(p,We,Z),f(ue,Le.getRectWhenCenteredAt(We)),i.restore(p)}),p.restore(),{x:K,y:ue}}}),d=function(h,p,r,o){var m=Math.ceil(h/r),b=Math.floor(p/r);if(isFinite(b-m)&&!(b-m>1e4))for(var E=m;E<=b;E++)o(E*r)},u=function(h,p,r){return h<p?p:h>r?r:h},f=function(h,p){p.left<h.left&&(h.left=p.left),p.right>h.right&&(h.right=p.right),p.top<h.top&&(h.top=p.top),p.bottom>h.bottom&&(h.bottom=p.bottom)},y=function(h,p){var r=Math.abs(h),o=Math.abs(p);return Math.abs(r-o)<=1e-4*(r<o?o:r)};return g}),P("graphing/imagelayer",["require","pjs","underscore","./draw-image-to-ctx","./svg-groups"],function(S){var c=S("pjs"),x=S("underscore"),t=S("./draw-image-to-ctx").drawImageToCtx,l=S("./svg-groups");return c(function(n){n.redrawToCtx=function(i,s,g,d){l.save(i,"background-images"),(d===void 0||d.length<x.size(g))&&(d=x.keys(g));for(var u=0;u<d.length;u++){var f=g[d[u]];f&&f.shouldGraph&&!f.foreground&&t(f,i,s)}l.restore(i)}})}),P("core/math/recttransformation",["require","exports"],function(S,c){function x(l,n){var i=l-1;return 1+i*i*i==1?n*(1+i*(n-1)*(.5+1/6*i*(n-2))):(Math.pow(l,n)-1)/i}Object.defineProperty(c,"__esModule",{value:!0});var t=(function(){function l(n,i,s,g){n===void 0&&(n=0),i===void 0&&(i=0),s===void 0&&(s=1),g===void 0&&(g=s),this.tx=n,this.ty=i,this.sx=s,this.sy=g}return l.prototype.toJSON=function(){return{tx:this.tx,ty:this.ty,sx:this.sx,sy:this.sy}},l.prototype.compose=function(n){return new l(this.sx*n.tx+this.tx,this.sy*n.ty+this.ty,this.sx*n.sx,this.sy*n.sy)},l.prototype.translate=function(n,i){var s=i===void 0?n.x:i.x-n.x,g=i===void 0?n.y:i.y-n.y;return new l(this.tx+s,this.ty+g,this.sx,this.sy)},l.prototype.scale=function(n,i){return l.scale(n,i).compose(this)},l.prototype.scaleAtPoint=function(n,i,s){return s===void 0&&(s=i),l.scaleAtPoint(n,i,s).compose(this)},l.prototype.inverse=function(){return new l(-this.tx/this.sx,-this.ty/this.sy,1/this.sx,1/this.sy)},l.prototype.div=function(n){return new l((this.tx*n.sx-this.sx*n.tx)/n.sx,(this.ty*n.sy-this.sy*n.ty)/n.sy,this.sx/n.sx,this.sy/n.sy)},l.prototype.conjugate=function(n){return new l(this.tx*n.sx+n.tx*(1-this.sx),this.ty*n.sy+n.ty*(1-this.sy),this.sx,this.sy)},l.prototype.pow=function(n){return new l(this.tx*x(this.sx,n),this.ty*x(this.sy,n),Math.pow(this.sx,n),Math.pow(this.sy,n))},l.prototype.mapX=function(n){return this.sx*n+this.tx},l.prototype.mapY=function(n){return this.sy*n+this.ty},l.prototype.mapPoint=function(n){return{x:this.mapX(n.x),y:this.mapY(n.y)}},l.prototype.mapRect=function(n){return{left:this.mapX(n.left),right:this.mapX(n.right),bottom:this.mapY(n.bottom),top:this.mapY(n.top)}},l.scale=function(n,i){return i===void 0&&(i=n),new l(0,0,n,i)},l.translate=function(n,i){return new l().translate(n,i)},l.scaleAtPoint=function(n,i,s){return s===void 0&&(s=i),s===void 0&&(s=i),new l(n.x*(1-i),n.y*(1-s),i,s)},l.fromRects=function(n,i){var s=(i.right-i.left)/(n.right-n.left),g=(i.top-i.bottom)/(n.top-n.bottom);return new l(i.left-s*n.left,i.bottom-g*n.bottom,s,g)},l.fromJSON=function(n){return new l(n.tx,n.ty,n.sx,n.sy)},l})();c.RT=t}),P("graphing/projection",["require","exports","core/math/recttransformation"],function(S,c,x){function t(i){return{left:0,right:i.width,top:0,bottom:i.height}}function l(i){return{left:i.xmin,right:i.xmax,bottom:i.ymin,top:i.ymax}}Object.defineProperty(c,"__esModule",{value:!0});var n=(function(){function i(s,g,d){this.screen=s,this.viewport=g,this.settings=d,this.mathCoordinates=l(g),this.pixelCoordinates=t(s),this.mathToPixels=x.RT.fromRects(this.mathCoordinates,this.pixelCoordinates),this.pixelsToMath=x.RT.fromRects(this.pixelCoordinates,this.mathCoordinates)}return i.prototype.mapx=function(s){return this.mathToPixels.mapX(s)},i.prototype.mapy=function(s){return this.mathToPixels.mapY(s)},i.prototype.map_pt=function(s){return this.mathToPixels.mapPoint(s)},i.prototype.reverse_mapx=function(s){return this.pixelsToMath.mapX(s)},i.prototype.reverse_mapy=function(s){return this.pixelsToMath.mapY(s)},i.prototype.reverse_map_pt=function(s){return this.pixelsToMath.mapPoint(s)},i.prototype.coordsAreOnscreen=function(s,g,d){return d=d===void 0?0:d,s>-d&&g>-d&&s<this.screen.width+d&&g<this.screen.height+d},i.prototype.closestPointOnScreen=function(s){var g=this.pixelCoordinates;return{x:Math.min(Math.max(s.x,g.left),g.right),y:Math.min(Math.max(s.y,g.top),g.bottom)}},i})();c.Projection=n}),(function(S){typeof P=="function"&&P.amd?P("vendor/jquery.mousewheel",["jquery"],S):S(jQuery)})(function(S){function c(f){var y=f||window.event,h=g.call(arguments,1),p=0,r=0,o=0,m=0;if(f=S.event.fix(y),f.type="mousewheel","detail"in y&&(o=-1*y.detail),"wheelDelta"in y&&(o=y.wheelDelta),"wheelDeltaY"in y&&(o=y.wheelDeltaY),"wheelDeltaX"in y&&(r=-1*y.wheelDeltaX),"axis"in y&&y.axis===y.HORIZONTAL_AXIS&&(r=-1*o,o=0),p=o===0?r:o,"deltaY"in y&&(o=-1*y.deltaY,p=o),"deltaX"in y&&(r=y.deltaX,o===0&&(p=-1*r)),o!==0||r!==0){if(y.deltaMode===1){var b=S.data(this,"mousewheel-line-height");p*=b,o*=b,r*=b}else if(y.deltaMode===2){var E=S.data(this,"mousewheel-page-height");p*=E,o*=E,r*=E}return m=Math.max(Math.abs(o),Math.abs(r)),(!n||m<n)&&(n=m,t(y,m)&&(n/=40)),t(y,m)&&(p/=40,r/=40,o/=40),p=Math[p>=1?"floor":"ceil"](p/n),r=Math[r>=1?"floor":"ceil"](r/n),o=Math[o>=1?"floor":"ceil"](o/n),f.deltaX=r,f.deltaY=o,f.deltaFactor=n,f.deltaMode=0,h.unshift(f,p,r,o),l&&clearTimeout(l),l=setTimeout(x,200),(S.event.dispatch||S.event.handle).apply(this,h)}}function x(){n=null}function t(f,y){return u.settings.adjustOldDeltas&&f.type==="mousewheel"&&y%120==0}var l,n,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],g=Array.prototype.slice;if(S.event.fixHooks)for(var d=i.length;d;)S.event.fixHooks[i[--d]]=S.event.mouseHooks;var u=S.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var f=s.length;f;)this.addEventListener(s[--f],c,!1);else this.onmousewheel=c;S.data(this,"mousewheel-line-height",u.getLineHeight(this)),S.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var f=s.length;f;)this.removeEventListener(s[--f],c,!1);else this.onmousewheel=null},getLineHeight:function(f){return parseInt(S(f)["offsetParent"in S.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(f){return S(f).height()},settings:{adjustOldDeltas:!0}};S.fn.extend({mousewheel:function(f){return f?this.bind("mousewheel",f):this.trigger("mousewheel")},unmousewheel:function(f){return this.unbind("mousewheel",f)}})}),P("graphing/viewportcontroller",["require","jquery","pjs","lib/aria","lib/i18n","core/math/recttransformation","./viewport","core/math/distance","./constants","lib/animation-frame","./projection","keys","jquery.handleevent","vendor/jquery.mousewheel"],function(S){var c=S("jquery"),x=S("pjs"),t=S("lib/aria"),l=S("lib/i18n"),n=S("core/math/recttransformation").RT,i=S("./viewport").Viewport,s=S("core/math/distance"),g=S("./constants"),d=S("lib/animation-frame"),u=S("./projection").Projection,f=S("keys");return S("jquery.handleevent"),S("vendor/jquery.mousewheel"),x(function(y){function h(E,M){var D=M.x-E.x,A=M.y-E.y,v=.5*(E.x+M.x),k=.5*(E.y+M.y),J=.5*s.hypot(D,A);return{center:o(v,k),radius:J}}function p(E,M){return h(M,{x:2*E.x-M.x,y:2*E.y-M.y})}function r(E,M){for(var D=[],A=0;A<E.length;A++)D.push(o(E[A].x-M.left,E[A].y-M.top));return D}function o(E,M){return{x:E,y:M}}function m(E){return o(.5*(E.left+E.right),.5*(E.bottom+E.top))}var b=0;y.init=function(E,M){this.grapher=E,this.$=this.grapher.$,this.__id=b++,this.controller=M,this.isScalingEnabled=!1,this.mousePt=o(0,0),this.lastScrollZoom=Date.now(),this.preventScrollZoom=!1,this.addMouseWheelEventHandler(),this.addTouchEventHandler()},y.remove=function(){c(window).off(".viewportcontroller-"+this.__id)},y.t=function(E,M){return l.t(E,M,this.grapher.settings.language)},y.getViewport=function(){return this.grapher.getProjection().viewport},y.getProjection=function(){return this.grapher.getProjection()},y.updateMouse=function(E){var M=this.$[0].getBoundingClientRect();this.mousePt=o(E.clientX-M.left,E.clientY-M.top)},y.updateScaleAxis=function(){this.isMouseInViewport()&&(this.isMouseNearYAxis()?this.grapher.scaleAxis="y":this.isMouseNearXAxis()?this.grapher.scaleAxis="x":this.grapher.scaleAxis="both"),this.updateCursor(),this.grapher.redrawAllLayers()},y.updateCursor=function(){this.$.toggleClass("dcg-scale-horizontal",this.grapher.scaleAxis==="x"),this.$.toggleClass("dcg-scale-vertical",this.grapher.scaleAxis==="y"),this.$.toggleClass("dcg-scale-both",this.grapher.scaleAxis==="both")},y.isMouseNearOrigin=function(){var E=this.getProjection(),M=E.mathToPixels.mapPoint(o(0,0));return Math.abs(this.mousePt.x-M.x)<50&&Math.abs(this.mousePt.y-M.y)<50},y.isMouseNearXAxis=function(){var E=this.getProjection(),M=E.pixelCoordinates,D=E.mathToPixels.mapY(0);return D=Math.min(Math.max(M.top,D),M.bottom),Math.abs(this.mousePt.y-D)<40&&E.settings.showXAxis},y.isMouseNearYAxis=function(){var E=this.getProjection(),M=E.pixelCoordinates,D=E.mathToPixels.mapX(0);return D=Math.min(Math.max(M.left,D),M.right),Math.abs(this.mousePt.x-D)<40&&E.settings.showYAxis},y.isMouseInViewport=function(){var E=this.getProjection(),M=E.mathCoordinates,D=E.pixelsToMath.mapPoint(this.mousePt);return D.x>=M.left&&D.x<=M.right&&D.y>=M.bottom&&D.y<=M.top},y.getDefaultViewport=function(){return this.controller.getDefaultStateViewport()||this.grapher.getDefaultViewport()},y._setViewportWithoutCancellingAnimation=function(E){if(E.isValid()&&!E.equals(this.getViewport())){var M=this.getProjection();this.grapher._setProjection(new u(M.screen,E,M.settings))}},y.setViewport=function(E){this.cancelAnimation(),this._setViewportWithoutCancellingAnimation(E)},y.setScreen=function(E){var M=this.getProjection(),D=M.settings.squareAxes,A=new u(E,this.getViewportForScreen(M.viewport,E,D),M.settings);this.grapher._setProjection(A)},y.getTransformedViewport=function(E){var M=this.getProjection(),D=M.pixelsToMath.div(E).mapRect(M.pixelCoordinates);return new i(D.left,D.right,D.bottom,D.top)},y.transformViewport=function(E){this.setViewport(this.getTransformedViewport(E))},y.animateTransformation=function(E){function M(J){A||(A=J);var X=(J-A)/g.ANIMATE_ZOOM_DURATION;k+=X,k<1?(D.__animationTimeout=d.requestAnimationFrame(M),D._setViewportWithoutCancellingAnimation(D.getTransformedViewport(E.pow(X))),D.grapher.debounceUserRequestedViewportChange()):(D.setViewport(v),D.grapher.debounceUserRequestedViewportChange())}var D=this;this.cancelAnimation();var A,v=this.getTransformedViewport(E),k=0;this.__animationTimeout=d.requestAnimationFrame(M)},y.cancelAnimation=function(){d.cancelAnimationFrame(this.__animationTimeout)},y.addMouseWheelEventHandler=function(){var E,M,D=this,A=!1;c(window).on("scroll.viewportcontroller-"+this.__id,function(J){A=!0}),c(window).on("mousewheel.viewportcontroller-"+this.__id,function(J){E=J.originalEvent.clientX,M=J.originalEvent.clientY}),c(window).on("mousemove.viewportcontroller-"+this.__id,function(J){if(A){var X=J.originalEvent.clientX-E,te=J.originalEvent.clientY-M;X*X+te*te<100||(A=!1)}});var v=0,k=function(J,X){var te=Date.now();if(D.preventScrollZoom&&te-D.lastScrollZoom>50&&(D.preventScrollZoom=!1),D.lastScrollZoom=te,!D.preventScrollZoom){var H=this.getProjection();if(!H.settings.config.lockViewport){var z=H.mathToPixels;if(!A){J.preventDefault(),D.updateMouse(J);var B=z.mapPoint(o(0,0)),F=D.isMouseNearOrigin()&&X>0?B:D.mousePt;if(!(v>0)){v+=1,d.requestAnimationFrame(function(){v--}),X=X>0?1:-1;var $=X>0?g.ZOOM_FACTOR:1/g.ZOOM_FACTOR,re=D.grapher.scaleAxis,K=re!=="x"&&re!=="both"&&re?1:$,ue=re!=="y"&&re!=="both"&&re?1:$;this.transformViewport(n.scaleAtPoint(F,K,ue)),this.grapher.debounceUserRequestedViewportChange()}}}}};this.$.mousewheel(k.bind(this))},y.handleDoubleClick=function(E){var M=this.getProjection();if(!M.settings.config.lockViewport&&!M.settings.config.disable_dblclick_zooming&&!E.wasHandled()){E.preventDefault();var D=this.$[0].getBoundingClientRect(),A=o(E.clientX-D.left,E.clientY-D.top);this.animateTransformation(n.scaleAtPoint(A,g.DOUBLETAP_ZOOM))}},y.applyPanTouchChanges=function(E,M){if(!this.getProjection().settings.config.lockViewport&&!this.isScalingEnabled){var D=o(M[0].x-E[0].x,M[0].y-E[0].y);this.transformViewport(n.translate(D)),this.grapher.debounceUserRequestedViewportChange()}},y.chooseDragScaleCenter=function(){var E=this.getProjection(),M=E.pixelCoordinates,D=E.mathToPixels.mapX(0),A=E.mathToPixels.mapY(0);return D=Math.min(Math.max(M.left,D),M.right),A=Math.min(Math.max(M.top,A),M.bottom),o(D,A)},y.applyScaleTouchChanges=function(E,M){if(!this.getProjection().settings.config.lockViewport){var D,A,v=this.grapher.scaleAxis;if(E.length===2&&M.length===2)D=h(E[0],E[1]),A=h(M[0],M[1]);else{if(M.length!==1)return;var k=this.chooseDragScaleCenter();D=p(k,E[0]),A=p(k,M[0])}var J=A.radius/D.radius,X=v==="y"?1:J,te=v==="x"?1:J,H=n.scaleAtPoint(D.center,X,te).translate(D.center,A.center);this.transformViewport(H),this.grapher.debounceUserRequestedViewportChange()}},y.addTouchEventHandler=function(){var E=this,M=[],D=!1,A=!0,v=!0,k=function(re){var K=E.grapher.getProjection();D||K.settings.config.lockViewport||(E.updateMouse(re),E.isScalingEnabled&&E.updateScaleAxis())};c(window).on("mousemove.viewportcontroller-"+this.__id,k);var J=function(re){var K=E.getProjection();if(!K.settings.config.lockViewport&&!re.wasHandled()&&!D&&re.touches.length===re.changedTouches.length){D=!0,E.grapher.isDragging=!0,E.updateMouse(re);var ue=K.mathToPixels.mapPoint(o(0,0)),ie=E.grapher.scaleAxis;ie!=="x"&&ie!=="both"||(A=E.mousePt.x>ue.x),ie!=="y"&&ie!=="both"||(v=E.mousePt.y>ue.y),E.controller.dispatch({type:"grapher/drag-start"}),c(document).on("dcg-tapmove.graphdrag",F),c(document).on("dcg-tapstart.graphdrag dcg-tapend.graphdrag dcg-tapcancel.graphdrag",$)}},X=function(re){if(!(re.length<2)){var K=E.grapher.getProjection(),ue=K.pixelCoordinates,ie=K.mathToPixels.mapX(0),Q=K.mathToPixels.mapY(0);ie=Math.min(Math.max(ue.left,ie),ue.right),Q=Math.min(Math.max(ue.top,Q),ue.bottom);var pe=re[1].x-re[0].x,ee=re[1].y-re[0].y;return Math.abs(re[0].x-ie)<40&&Math.abs(re[1].x-ie)<40&&Math.abs(ee)>3*Math.abs(pe)&&K.settings.showYAxis?"y":Math.abs(re[0].y-Q)<40&&Math.abs(re[1].y-Q)<40&&Math.abs(pe)>3*Math.abs(ee)&&K.settings.showXAxis?"x":"both"}},te=function(re){return E.grapher.scaleAxis||(E.grapher.scaleAxis=X(re)),E.grapher.scaleAxis},H=function(){E.grapher.scaleAxis&&(E.grapher.scaleAxis=void 0,E.grapher.redrawAllLayers(),E.updateCursor())},z=function(){E.isScalingEnabled=!1,E.preventScrollZoom=!0,H()},B=function(re){return re.altKey||re.ctrlKey||re.metaKey},F=function(re){if(D&&!E.getProjection().settings.config.lockViewport&&E.grapher&&E.grapher.clickableObjectsLayer&&!E.grapher.clickableObjectsLayer.isAnObjectPressed()){var K=r(re.touches,E.$.offset());if(M.length===2&&K.length===2)te(K),E.applyScaleTouchChanges(M,K);else if(M.length===1&&E.isScalingEnabled){E.updateMouse(re);var ue,ie,Q=E.grapher.scaleAxis,pe=E.getProjection(),ee=pe.mathToPixels.mapPoint(o(0,0)),ae=A?1:-1,le=v?1:-1;if(Q!=="x"&&Q!=="both"||(ue=E.mousePt.x>ee.x+5*ae),Q!=="y"&&Q!=="both"||(ie=E.mousePt.y>ee.y+5*le),Q==="x"&&A!==ue||Q==="y"&&v!==ie||Q==="both"&&A!==ue&&v!==ie)return;E.applyScaleTouchChanges(M,K)}else H();M.length===1&&E.applyPanTouchChanges(M,K),E.controller.dispatch({type:"grapher/drag-move"}),M=K}},$=function(re){D&&(E.cancelAnimation(),M=r(re.touches,E.$.offset()),re.touches.length===0&&(D=!1,E.grapher.isDragging=!1,c(document).off(".graphdrag"),E.grapher.debounceUserRequestedViewportChange(),E.controller.dispatch({type:"grapher/drag-end"})),(re.touches.length===0||re.touches.length===1&&!E.isScalingEnabled)&&H())};this.$.on("dcg-tapstart",J),this.$.on("dblclick",this.handleDoubleClick.bind(this)),c(window).on("keydown.viewportcontroller-"+this.__id,(function(re){this.getProjection().settings.config.lockViewport||(f.lookup(re)!==f.SHIFT||B(re)?z():(this.isScalingEnabled=!0,this.grapher.scaleAxis||this.updateScaleAxis()))}).bind(this)),c(window).on("keyup.viewportcontroller-"+this.__id+" blur.viewportcontroller-"+this.__id,z)},y.zoom=function(E){var M=this.getProjection().pixelCoordinates;if(E==="in")this.animateTransformation(n.scaleAtPoint(m(M),2));else if(E==="out")this.animateTransformation(n.scaleAtPoint(m(M),.5));else if(E==="default"){var D=this.getDefaultViewport();this.animateTransformation(this.getCustomZoomTransformation(D))}else if(E==="square"){var A=this.getSquareViewport();this.animateTransformation(this.getCustomZoomTransformation(A))}t.alert(this.t("Graph zoom __action__",{action:E}))},y.zoomCustom=function(E){this.animateTransformation(this.getCustomZoomTransformation(E)),t.alert(this.t("Graph viewport updated."))},y.getCustomZoomTransformation=function(E){var M=this.getProjection().viewport,D=this.getProjection().pixelCoordinates,A=this.getProjection().mathCoordinates,v=(M.xmax-M.xmin)/(E.xmax-E.xmin),k=(M.ymax-M.ymin)/(E.ymax-E.ymin),J=function(){return{x:0,y:0}},X=n.fromRects(A,D),te=new n.translate(X.mapPoint(J()),J()),H=new n.scale(v,k),z=n.fromRects({left:E.xmin,right:E.xmax,bottom:E.ymin,top:E.ymax},D);return new n.translate(J(),z.mapPoint(J())).compose(H.compose(te))},y.isZoomRestored=function(){var E=this.getProjection(),M=E.viewport,D=this.getDefaultViewport();return E.settings.squareAxes&&Math.abs((M.xmin-D.xmin)/M.xmin)<.05&&Math.abs((M.xmax-D.xmax)/M.xmax)<.05&&Math.abs((M.ymin-D.ymin)/M.ymin)<.05&&Math.abs((M.ymax-D.ymax)/M.ymax)<.05},y.getViewportForScreen=function(E,M,D){return D?this.getProjection().settings.lastChangedAxis=="y"?E.squareXAxis(M):E.squareYAxis(M):E},y.getSquareViewport=function(){var E=this.getProjection();return this.getViewportForScreen(E.viewport,E.screen,!0)},y.enforceSquareAxes=function(){var E=this.getProjection();E.settings.squareAxes&&(E.viewport.isSquare(E.screen)||this.setViewport(this.getViewportForScreen(E.viewport,E.screen,!0)))}})}),P("geometry/math/hypot",["require","exports"],function(S,c){function x(l){return l===1/0||l===-1/0}Object.defineProperty(c,"__esModule",{value:!0});var t=Math.hypot&&Math.hypot(1/0,NaN)===1/0;c.default=t?Math.hypot:function(l,n){if(x(l)||x(n))return 1/0;if(isNaN(l)||isNaN(n))return NaN;if(l===0&&n===0)return 0;if(Math.abs(l)>Math.abs(n)){var i=n/l;return Math.abs(l)*Math.sqrt(i*i+1)}var i=l/n;return Math.abs(n)*Math.sqrt(i*i+1)}}),P("lib/priority-queue",["require","exports"],function(S,c){Object.defineProperty(c,"__esModule",{value:!0});var x=(function(){function t(l){this.comparator=l,this._data=[]}return t.prototype.size=function(){return this._data.length},t.prototype.queue=function(l){var n=this._data.length;for(this._data.push(l);n>0;){var i=n-1>>>1;if(!(this.comparator(this._data[n],this._data[i])<0))break;var s=this._data[i];this._data[i]=this._data[n],this._data[n]=s,n=i}},t.prototype.dequeue=function(){var l=this._data[0],n=this._data.pop();if(this._data.length>0&&n!==void 0){this._data[0]=n;for(var i=0,s=this._data.length-1;;){var g=1+(i<<1),d=g+1,u=i;if(g<=s&&this.comparator(this._data[g],this._data[u])<0&&(u=g),d<=s&&this.comparator(this._data[d],this._data[u])<0&&(u=d),u===i)break;var f=this._data[u];this._data[u]=this._data[i],this._data[i]=f,i=u}}return l},t.prototype.peek=function(){return this._data[0]},t.prototype.clear=function(){this._data.length=0},t})();c.default=x}),P("geometry/math/polygon-area-support",["require","exports","lib/priority-queue","bugsnag"],function(S,c,x,t){function l(m,b){var E=m.pt2.y-m.pt1.y,M=m.pt1.x-m.pt2.x,D=b.pt2.y-b.pt1.y,A=b.pt1.x-b.pt2.x,v=E*m.pt1.x+M*m.pt1.y,k=D*b.pt1.x+A*b.pt1.y,J=E*A-D*M;if(J!==0)return(E*k-D*v)/J}function n(m,b,E){if(E.scanlineX<b.scanlineX&&t.notify("PolygonArea: rightEdge should not be left of leftEdge!",{metaData:{scanlineY:m,leftEdge:b,rightEdge:E}}),!(E.xSlope>=b.xSlope)){if(b.scanlineX===E.scanlineX)return m;var M=b.pt2.y>b.pt1.y?b.pt2:b.pt1,D=E.pt2.y>E.pt1.y?E.pt2:E.pt1,A=M.y;if(D.y<M.y){if(A=D.y,s(A,b)<D.x)return}else if(M.y<D.y){var v=s(A,E);if(M.x<v)return}else if(M.x<D.x)return;var k=l(b,E);if(k!==void 0)return Math.max(Math.min(k,A),m)}}function i(m,b,E,M){if(E&&M){if(E.id<M.id){if(E.skipIntersectionWith[M.id])return}else if(M.skipIntersectionWith[E.id])return;var D=n(m,E,M);D!==void 0&&(E.id<M.id?E.skipIntersectionWith[M.id]=!0:M.skipIntersectionWith[E.id]=!0,b.queue({type:"x",y:D,edge1:E,edge2:M}))}}function s(m,b){var E=b.pt1.x,M=b.pt2.x,D=b.pt1.y,A=b.pt2.y;if(D===m)return E;if(A===m)return M;var v=(m-D)/(A-D),k=(1-v)*E+v*M;if(E<M){if(k<=E)return E;if(M<=k)return M}else{if(k<=M)return M;if(E<=k)return E}return k}function g(m){for(var b=0,E=0,M=!1,D=0,A=m;D<A.length;D++){var v=A[D].scanlineX;M?(M=!1,b+=v-E):(M=!0,E=v)}return b}function d(m){for(var b=0,E=0,M=!1,D=0,A=0,v=m;A<v.length;A++){var k=v[A],J=k.scanlineX;k.isClockwise?D+=1:D-=1,D===0||M?D===0&&M&&(M=!1,b+=J-E):(M=!0,E=J)}return b}function u(m,b){for(var E=0,M=0,D=!1,A=-1/0,v=0,k=b;v<k.length;v++){var J=k[v],X=s(m,J);X<A?(X-A<-1e-4&&t.notify("PolygonArea: scanlineX reversed!",{metaData:{scanlineY:m,edge:J,minScanlineX:A,scanlineX:X}}),X=A):A=X,J.scanlineX=X,D?(D=!1,E+=X-M):(D=!0,M=X)}return E}function f(m,b){for(var E=0,M=0,D=!1,A=0,v=-1/0,k=0,J=b;k<J.length;k++){var X=J[k],te=s(m,X);te<v?(te-v<-1e-4&&t.notify("PolygonArea: scanlineX reversed!",{metaData:{scanlineY:m,edge:X,minScanlineX:v,scanlineX:te}}),te=v):v=te,X.scanlineX=te,X.isClockwise?A+=1:A-=1,A===0||D?A===0&&D&&(D=!1,E+=te-M):(D=!0,M=te)}return E}function y(m){for(var b=1,E=[],M=new x.default(function(J,X){return J.y-X.y}),D=m.length-1;D>=1;D--){var A=m[D],v=m[D-1],k={id:b++,pt1:A,pt2:v,scanlineX:0,xSlope:1/0,isClockwise:v.y>A.y,skipIntersectionWith:{}};v.y>A.y?(M.queue({type:"+",y:A.y,edge:k}),M.queue({type:"-",y:v.y,edge:k}),k.xSlope=(v.x-A.x)/(v.y-A.y),k.scanlineX=A.x):A.y>v.y&&(M.queue({type:"+",y:v.y,edge:k}),M.queue({type:"-",y:A.y,edge:k}),k.xSlope=(A.x-v.x)/(A.y-v.y),k.scanlineX=v.x)}return{activeEdges:E,events:M}}function h(m,b,E){m.type==="x"?o(m,b,E):m.type==="+"?p(m,b,E):m.type==="-"&&r(m,b,E)}function p(m,b,E){for(var M=m.edge,D=m.y,A=M.xSlope,v=M.scanlineX,k=0;k<E.length;k++){var J=E[k];if(v<J.scanlineX||v===J.scanlineX&&A<=J.xSlope)break}E.splice(k,0,M),i(D,b,E[k-1],M),i(D,b,M,E[k+1])}function r(m,b,E){var M=m.edge,D=m.y,A=E.indexOf(M);E.splice(A,1),i(D,b,E[A-1],E[A])}function o(m,b,E){var M=m.edge1,D=m.edge2,A=m.y,v=E.indexOf(M),k=v+1;v===-1||E[k]!==D?M.id<D.id?delete M.skipIntersectionWith[D.id]:delete D.skipIntersectionWith[M.id]:(E[v]=D,E[k]=M,i(A,b,E[v-1],D),i(A,b,M,E[k+1]))}Object.defineProperty(c,"__esModule",{value:!0}),c._unstableYIntersectEdges=l,c._stableYIntersectEdges=n,c.checkForEdgeIntersection=i,c.computeScanlineX=s,c.measureDownwardEvenOddLength=g,c.measureDownwardNonZeroLength=d,c.measureUpwardEvenOddLength=u,c.measureUpwardNonZeroLength=f,c.setupEventQueueAndActiveEdges=y,c.processEvent=h}),P("geometry/math/polygon",["require","exports","./hypot","bugsnag","./polygon-area-support"],function(S,c,x,t,l){function n(f,y){if(!f)return!1;for(var h=y.x,p=y.y,r=!1,o=f.length-1;o>=3;o-=2){var m=f[o-3],b=f[o-2],E=f[o-1],M=f[o];b>p!=M>p&&h<(E-m)*(p-b)/(M-b)+m&&(r=!r)}return r}function i(f,y){if(!f)return!1;for(var h=y.x,p=y.y,r=0,o=f.length-1;o>=3;o-=2){var m=f[o-3],b=f[o-2],E=f[o-1],M=f[o];b>p!=M>p&&h<(E-m)*(p-b)/(M-b)+m&&(b>M?r+=1:b<M&&(r-=1))}return r!==0}function s(f){for(var y=0,h=0;h<f.length-1;h++)y+=x.default(f[h].x-f[h+1].x,f[h].y-f[h+1].y);return y}function g(f){for(var y=0,h=0;h<f.length-1;h++)y+=f[h].x*f[h+1].y-f[h].y*f[h+1].x;return Math.abs(y)/2}function d(f){if(f.length<4||f[0].x!==f[f.length-1].x||f[0].y!==f[f.length-1].y)return 0;var y=l.setupEventQueueAndActiveEdges(f),h=y.events,p=y.activeEdges,r=h.peek();if(!r)return 0;for(var o,m=0,b=r.y,E=0;o=h.dequeue();){var M=o.y;M<b&&t.notify("PolygonArea: scanlineY jumped up vertically",{metaData:{points:f,scanlineY:M,lastScanlineY:b}}),E+=.5*(M-b)*(l.measureUpwardEvenOddLength(M,p)+m),l.processEvent(o,h,p),b=M,m=l.measureDownwardEvenOddLength(p)}return E}function u(f){if(f.length<4||f[0].x!==f[f.length-1].x||f[0].y!==f[f.length-1].y)return 0;var y=l.setupEventQueueAndActiveEdges(f),h=y.events,p=y.activeEdges,r=h.peek();if(!r)return 0;for(var o,m=0,b=r.y,E=0;o=h.dequeue();){var M=o.y;M<b&&t.notify("PolygonArea: scanlineY jumped up vertically",{metaData:{points:f,scanlineY:M,lastScanlineY:b}}),E+=.5*(M-b)*(l.measureUpwardNonZeroLength(M,p)+m),l.processEvent(o,h,p),b=M,m=l.measureDownwardNonZeroLength(p)}return E}Object.defineProperty(c,"__esModule",{value:!0}),c.pointIsWithinEvenOddFill=n,c.pointIsWithinNonZeroFill=i,c.calculatePerimeter=s,c.calculateSimpleArea=g,c.calculatePaintedEvenOddArea=d,c.calculatePaintedNonZeroArea=u}),P("graphing/poicontroller",["require","jquery","core/math/distance","lib/rounding","core/types/graphmode","lib/conditional_blur","keys","lib/aria","core/lib/label","expressions/colors","graphing-calc/models/image","graphing-calc/models/expression","../geometry/math/polygon"],function(S){function c(r,o){this.manager=r,this.controller=r.controller,this.graphSettings=o,this.$=this.manager.$,this.__id=p++,this.graphSettings.config.graphpaper&&!this.graphSettings.config.disableMouseInteractions&&(this.addTouchEventHandlers(),this.addHoverEventHandler(),this.addKeydownEventHandler(),this.addManualUnhoverListener())}var x=S("jquery"),t=S("core/math/distance"),l=S("lib/rounding"),n=S("core/types/graphmode"),i=S("lib/conditional_blur").default,s=S("keys"),g=S("lib/aria"),d=S("core/lib/label"),u=S("expressions/colors").getColorName,f=S("graphing-calc/models/image"),y=S("graphing-calc/models/expression"),h=S("../geometry/math/polygon"),p=0;return c.prototype.getExpressionModel=function(r){return this.controller.getItemModel(r)},c.prototype.remove=function(){this.removeAllGlobalMouseListeners(),this.removeManualUnhoverListener()},c.prototype.addGlobalMouseListener=function(r,o){for(var m=r.split(" "),b=0;b<m.length;b++)x(document).on(m[b]+".dcg-poiController-"+this.__id,o)},c.prototype.removeAllGlobalMouseListeners=function(){x(document).off(".dcg-poiController-"+this.__id)},c.prototype.getToleranceByDevice=function(r){return r==="touch"?20:10},c.prototype.addHoverEventHandler=function(){this.$.on("dcg-tapmove",(function(r){if(r.device!=="touch"){var o,m=x(document.elementFromPoint(r.clientX,r.clientY)).closest(".dcg-grapher").length,b=this.manager.poiLabelsLayer,E=this.getMouseRelativeToGrapher(r),M=this.getToleranceByDevice(r.device);m&&(o=this.getFeatureUnderPoint(E,M));var D;o&&o.type==="movable-point"&&(D=o.poi.getMovablePoint().id);var A;o&&o.isClickable&&(this.manager.movablePointsLayer.isMovingPoint()||this.manager.traceLayer.isTracing()||(A=o.model)),this.manager.clickableObjectsLayer.setHoveredId(A&&A.id);var v;o&&o.type==="poi"&&(o.poi.isAttachedToPlottedPoint()&&!o.poi.hasInteractiveLabel()||(v=o.poi)),v!==b.getHoveredPOI()&&(this.controller.isTraceEnabled()?b.setHoveredPOI(v):b.setHoveredPOI(void 0),this.manager.redrawAllLayers()),this.manager.movablePointsLayer.setHoveredPointId(D)}}).bind(this))},c.prototype.addManualUnhoverListener=function(){var r=(function(){var o=this.manager;o.poiLabelsLayer.setHoveredPOI(void 0),o.clickableObjectsLayer.setHoveredId(void 0),o.redrawAllLayers()}).bind(this);x(window).on("blur.dcg-poiController-"+this.__id,r),this.$.on("mouseleave",r)},c.prototype.removeManualUnhoverListener=function(){x(window).off(".dcg-poiController-"+this.__id)},c.prototype.addTouchEventHandlers=function(){this.$.on("dblclick",(function(r){var o=this.getMouseRelativeToGrapher(r),m=this.getToleranceByDevice(r.device);this.getFeatureUnderPoint(o,m)&&(r.preventDefault(),r.handle())}).bind(this)),this.$.on("touchstart",(function(r){if(!this.graphSettings.config.lockViewport)return void r.preventDefault();var o=this.getMouseRelativeToGrapher(r.originalEvent),m=this.getToleranceByDevice(r.device),b=this.getFeatureUnderPoint(o,m);b&&(b.type!=="image"||b.model.selected)&&(b.type==="sketch-branch"&&this.graphSettings.config.onlyTraceSelected&&!b.sketch.selected||r.preventDefault())}).bind(this)),this.$.on("dcg-tapstart",(function(r){var o=this.getMouseRelativeToGrapher(r),m=this.getToleranceByDevice(r.device),b=this.getFeatureUnderPoint(o,m);if(b&&b.isClickable?this.manager.clickableObjectsLayer.setPressedId(b.model.id):this.manager.clickableObjectsLayer.setPressedId(void 0),b&&b.type==="editable-label")return void r.handle();if(i(),b&&b.type==="movable-point")return this.controller.dispatch({type:"start-moving-point",pointInfo:b.poi.getMovablePoint()}),this.startMovingPoint(b.poi),r.handle(),void r.handle("do-not-clear-poi-labels");if(this._togglePOIUnderPoint(o,m))return r.handle(),void r.handle("do-not-clear-poi-labels");if(b&&b.type==="sketch-branch"&&!b.isClickable){if(!this.graphSettings.config.onlyTraceSelected){var E=!this.controller.isTraceEnabled(),M=!this.controller.isListEnabled();return E&&M||(this.controller.dispatch({type:"set-selected-id",id:b.sketch.id}),E)?void 0:(this.startTracingBranch(b.branchInfo,o),r.handle(),void r.handle("do-not-clear-poi-labels"))}if(b.sketch.selected)return this.startTracingBranch(b.branchInfo,o),r.handle(),void r.handle("do-not-clear-poi-labels")}b&&b.type==="image"||this.controller.dispatch({type:"set-none-selected"});var D=this;this.addGlobalMouseListener("dcg-tapmove",(function(A){this.manager.clickableObjectsLayer.isAnObjectPressed()?o=this.getMouseRelativeToGrapher(A):D.removeAllGlobalMouseListeners()}).bind(this)),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",(function(A){D.removeAllGlobalMouseListeners();var v=this.manager.clickableObjectsLayer.getPressedId();this.manager.clickableObjectsLayer.setPressedId(void 0);var k=this.getFeatureUnderPoint(o,m);return k&&k.isClickable?void(k.model.id===v&&this.controller.dispatch({type:"clickable-item-clicked",id:k.model.id})):k&&k.type==="sketch-branch"&&!k.sketch.selected?void this.controller.dispatch({type:"set-selected-id",id:k.model.id}):k&&k.type==="image"?void this.controller.dispatch({type:"set-selected-id",id:k.model.id}):void 0}).bind(this))}).bind(this))},c.prototype.addKeydownEventHandler=function(){this.$.on("keydown",(function(r){var o=this.manager.movablePointsLayer.getFocusedPoint();if(o){var m=s.lookup(r),b=s.lookupChar(r);m==="Up"||m==="Down"||m==="Left"||m==="Right"?(r.stopPropagation(),r.preventDefault(),this.movePointFromKeyboard(o,r)):b!=="X"&&b!=="Y"&&b!=="L"&&b!=="C"||this.speakPoint(o,b)}}).bind(this))},c.prototype.getMouseRelativeToGrapher=function(r){var o=this.$[0].getBoundingClientRect(),m=r.touches?r.touches[0]:r;return{x:m.clientX-o.left,y:m.clientY-o.top}},c.prototype._getClosestPoint=function(r,o,m){for(var b=m,E=null,M=this.manager.getProjection(),D=0;D<r.length;D++){var A=r[D],v=M.map_pt(A),k=t.hypot(v.x-o.x,v.y-o.y);k<b&&(b=k,E=A)}return E},c.prototype.getFeatureUnderPoint=function(r,o){var m=this.manager.poiLabelsLayer,b=this.manager.getProjection(),E=b.reverse_map_pt(r),M=m.getEditableLabelUnderPoint(r);if(M)return{type:"editable-label",model:M};for(var D,A=this.manager.__sketchOrder,v={},k=1,J=A.length-1;J>=0;J--){var X=A[J],te=this.controller.getItemModel(X),H=k;if(v[X]=H,te){if(te.type==="expression"){var z=this.manager.getGraphSketch(X);if(!z||!z.visible)continue;var B=z.branches;if(!B||!B.length)continue;if(z.showHighlight&&(H=-1/0,v[X]=H),!D||D.stackingContext>=H)for(var F=y.isClickableObject(te),$=0;$<B.length;$++){var re=c.calculateDistanceFromBranch(B[$],E,b,F);if(re<o){var K=!1;D?(H<D.stackingContext||H===D.stackingContext&&re<D.distance)&&(K=!0):K=!0,K&&(D={type:"sketch-branch",model:te,sketch:z,distance:re,stackingContext:H,branchInfo:{id:z.id,branch:$,sketch:z}})}}}else if(te.type==="image"){var ue=this.manager.getGraphImage(X);if(!ue||!this.isImageUnderMouse(ue,E,o))continue;ue.foreground?(k+=1,H=k,v[X]=H,k+=1):(H=1/0,v[X]=H),(!D||D.stackingContext>H)&&(D={type:"image",model:ue,distance:0,stackingContext:H})}}}var ie=[],Q=[],pe=[],ee=D?D.stackingContext:1/0;this.manager.poiDotsLayer.getDrawnPOI().forEach(function(Be){Be.isBareLabel()||(Be.isMovable()?ie.push(Be):Be.isAttachedToPlottedPoint()?v[Be.sketch.id]<=ee&&Q.push(Be):pe.push(Be))});var ae=this._getClosestPoint(ie,r,o);if(ae)return{type:"movable-point",poi:ae};var le=this._getClosestPoint(pe,r,o);if(le)return{type:"poi",poi:le};var me=this._getClosestPoint(Q,r,o);if(me){var Ae=this.controller.getItemModel(me.sketch.id);return Ae&&Ae.type==="expression"&&y.isClickableObject(Ae)?{type:"poi",poi:me,isClickable:!0,model:Ae}:{type:"poi",poi:me}}return D?D.type==="sketch-branch"?{type:"sketch-branch",branchInfo:D.branchInfo,sketch:D.sketch,model:D.model,isClickable:y.isClickableObject(D.model)}:{type:"image",model:D.model,isClickable:f.isClickableObject(D.model)}:void 0},c.prototype._togglePOIUnderPoint=function(r,o){if(this.controller.isTraceEnabled()){var m=this.getFeatureUnderPoint(r,o);if(!m||m.isClickable)return!1;var b=m.poi;return!!b&&!b.isBareLabel()&&(this.manager.poiLabelsLayer.isOpenPOI(b)?(this.manager.poiLabelsLayer.closePOI(b),this.manager.poiLabelsLayer.setHoveredPOI(void 0)):(this.manager.poiLabelsLayer.openPOI(b),this.speakPoint(b)),this.manager.redrawAllLayers(),!0)}},c.prototype.isImageUnderMouse=function(r,o,m){if(!r||!r.computed_x||!r.computed_y||!r.computed_width||!r.computed_height||r.hidden||this.controller.isItemSecret(r.id))return!1;for(var b=0;b<r.computed_x.length;b++){var E=r.computed_x[b],M=r.computed_y[b],D=r.computed_radian_angle[b],A=E+Math.cos(D)*(o.x-E)-Math.sin(D)*(o.y-M),v=M+Math.sin(D)*(o.x-E)+Math.cos(D)*(o.y-M),k=.5*Math.abs(r.computed_width[b]),J=.5*Math.abs(r.computed_height[b]);if(A>E-k&&A<E+k&&v>M-J&&v<M+J)return!0}return!1},c.calculateDistanceFromBranch=function(r,o,m,b){if(r&&r.graphMode===n.POLYGONFILL&&b){for(var E=r.segments,M=0;M<E.length;M++)if(h.pointIsWithinNonZeroFill(E[M],o))return 0;return 1/0}var D=c.getBranchesDistanceInfo(r,o,m,b);return D?D.minDistance:1/0},c.getBranchesDistanceInfo=function(r,o,m,b){var E=m.screen.width/(m.viewport.xmax-m.viewport.xmin),M=m.screen.height/(m.viewport.ymax-m.viewport.ymin),D=o.x,A=o.y,v=!1,k=!1;switch(r.graphMode){case n.PARAMETRIC:case n.IMPLICIT:if(!b)return null;break;case n.POLAR:if(!b)return null;k=!0;break;case n.Y:break;case n.X:v=!0;var J=D;D=A,A=J,J=E,E=M,M=J;break;default:return null}for(var X,te,H=1/0,z=1/0,B=0;B<r.segments.length;B++)for(var F=r.segments[B],$=0;$<F.length-3;$+=2){var re=F[$],K=F[$+1],ue=F[$+2],ie=F[$+3];if(k){var Q=K,pe=re;re=Q*Math.cos(pe),K=Q*Math.sin(pe);var ee=ie,ae=ue;ue=ee*Math.cos(ae),ie=ee*Math.sin(ae)}var le=t.closestPointOnSegment(0,0,(re-D)*E,(K-A)*M,(ue-D)*E,(ie-A)*M),me=t.hypot(le[0],le[1]);le[0]<0?me<H&&(H=me,X=le):me<z&&(z=me,te=le)}var Ae=H<z?X:te;if(!Ae)return null;var Be=Ae[0]/E+D,Fe=Ae[1]/M+A;return{closestPoint:{x:v?Fe:Be,y:v?Be:Fe},minDistance:Math.min(H,z),secondDistance:Math.max(H,z)}},c.getBranchesTracePoint=function(r,o,m){if(r&&r.compiled&&r.compiled.fn){var b=r.compiled.fn,E=m.screen.width/(m.viewport.xmax-m.viewport.xmin),M=m.screen.height/(m.viewport.ymax-m.viewport.ymin),D=this.getBranchesDistanceInfo(r,o,m,!1);if(!D)return null;var A=D.minDistance/D.secondDistance;A*=A;var v=r.graphMode===n.Y?"x":"y",k=D.closestPoint[v]*(1-A)+o[v]*A,J=1/(2*E),X=1/(2*M),te=b(k-J),H=b(k),z=b(k+J),B=J*Math.min(1,X/Math.abs(te-H)),F=J*Math.min(1,X/Math.abs(z-H));isFinite(B)||(B=J),isFinite(F)||(F=J),k=l.shortestDecimalBetween(k-B,k+F);var $=c.fillHole(b,k,E,M,o.x,o.y);return{x:r.graphMode===n.Y?k:$,y:r.graphMode===n.Y?$:k}}},c.prototype.startMovingPoint=function(r){var o=!1;this.manager.movablePointsLayer.setPressedPointId(r.isMovable()?r.getMovablePoint().id:void 0);var m=null,b=(function(){if(m){o=!0;var E=this.manager.getProjection(),M=this.getMouseRelativeToGrapher(m);m=null,this.controller.dispatch({type:"on-move-point",pointInfo:r.getMovablePoint(),screenPt:M,projection:E})}}).bind(this);this.manager.registerMovablePointListener(b),this.addGlobalMouseListener("dcg-tapmove",function(E){m=E}),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",(function(E){if(b(),this.manager.deregisterMovablePointListener(),this.removeAllGlobalMouseListeners(),this.manager.movablePointsLayer.setPressedPointId(void 0),this.controller.dispatch({type:"stop-moving-point",pointInfo:r.getMovablePoint()}),!o){var M=this.manager.getProjection(),D=this.getToleranceByDevice(E.device),A=M.map_pt(r);this._togglePOIUnderPoint(A,D)}}).bind(this))},c.prototype.startTracingBranch=function(r,o){this.manager.markLabelsDirty(),this.last_screen_pt=o;var m=this.manager.getProjection(),b=m.reverse_map_pt(o),E=r.sketch,M=E.branches[r.branch],D=c.getBranchesTracePoint(M,b,m);D&&this.speakPoint(D),this.manager.traceLayer.setTraceInfo({pt:D,branchInfo:r}),this.manager.redrawAllLayers(),this.addGlobalMouseListener("dcg-tapmove",this.handleTraceUpdate.bind(this)),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",this.stopTracingBranch.bind(this))},c.prototype.stopTracingBranch=function(r){this.manager.markLabelsDirty();var o=this.manager.poiLabelsLayer.getHoveredPOI();o&&!this.manager.poiLabelsLayer.isOpenPOI(o)&&(this.manager.poiLabelsLayer.openPOI(o),this.speakPoint(o),this.manager.redrawAllLayers()),this.last_screen_pt=null,this.manager.traceLayer.setTraceInfo(void 0),this.manager.redrawAllLayers(),this.removeAllGlobalMouseListeners()},c.prototype.handleTraceUpdate=function(r){if(this.manager.traceLayer.traceInfo){var o,m=this.manager.getProjection();if(r)o=this.getMouseRelativeToGrapher(r),this.last_screen_pt=o,this.manager.markLabelsDirty();else{if(!this.last_screen_pt)return;o=this.last_screen_pt}var b=m.reverse_map_pt(o),E=1/0,M=-1,D=this.manager.traceLayer.traceInfo,A=this.manager.graphSketches[D.branchInfo.sketch.id];if(A){D.branchInfo.sketch=A;for(var v=D.branchInfo.sketch.branches,k=0;k<v.length;k++){var J=c.calculateDistanceFromBranch(v[k],b,m,!1);J<E&&(M=k,E=J)}var X=v[M],te=X?c.getBranchesTracePoint(X,b,m):null;te&&this.speakPoint(te),this.manager.traceLayer.traceInfo.branchInfo.branch=M,this.manager.traceLayer.traceInfo.pt=te,this.manager.redrawAllLayers()}}},c.prototype.speakPoint=function(r){var o=this.manager.getAudioTrace();o&&r&&o.queueCoordinates(r,void 0,!0)},c.fillHole=function(r,o,m,b,E,M){var D=r(o);if(isFinite(D))return D;var A=o-1e-11,v=o+1e-11,k=r(A),J=r(v);if(isNaN(k)&&isNaN(J))return NaN;if(isNaN(k))return J;if(isNaN(J))return k;var X=(E-A)*m,te=(E-v)*m,H=(M-k)*b,z=(M-J)*b;return t.hypot(X,H)<t.hypot(te,z)?k:J},c.prototype.hasNonlinearMoveStrategy=function(r){if(!r||!r.sketch)return!1;var o=this.getExpressionModel(r.sketch.id);if(!o||!o.formula)return!1;var m=o.formula.move_strategy;return!(!m||!m[0])&&m[0].type==="updateSliderNonlinear"},c.prototype.movePointFromKeyboard=function(r,o){if(r&&o&&r.type==="movable-point"){var m,b=this.manager.getProjection(),E=b.map_pt({x:r.x,y:r.y}),M=0,D=0,A=o.shiftKey?10:2,v=o.shiftKey?"big":"",k=s.lookup(o);if(k==="Up"?(m="y",D-=A,v+="up"):k==="Down"?(m="y",D+=A,v+="down"):k==="Left"?(m="x",M-=A,v+="down"):k==="Right"&&(m="x",M+=A,v+="up"),M!==0||D!==0){var J,X={x:E.x+M,y:E.y+D};m==="x"||this.hasNonlinearMoveStrategy(r)?J=[v,""]:m==="y"&&(J=["",v]),this.controller.dispatch({type:"on-move-point",pointInfo:r,screenPt:X,projection:b,keyboardDirection:J})}}},c.prototype.speakPoint=function(r,o){if(r&&this.manager.getAudioTrace()){var m=this.manager.getProjection();if(m){var b=m.viewport;switch(o){case"X":g.alert("X: "+d.value(r.x,b.xmax-b.xmin).ariaString);break;case"Y":g.alert("Y: "+d.value(r.y,b.ymax-b.ymin).ariaString);break;case"L":g.alert(r.ariaLabel||this.controller.t("Graph point"));break;case"C":g.alert(u(this.controller,r.sketch.color))}}}},c}),P("vendor/canvas2svg",[],function(){function S(d,u){var f,y=Object.keys(u);for(f=0;f<y.length;f++)d=d.replace(new RegExp("\\{"+y[f]+"\\}","gi"),u[y[f]]);return d}function c(d){var u,f,y;if(!d)throw new Error("cannot create a random attribute name for an undefined object");u="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",f="";do for(f="",y=0;y<12;y++)f+=u[Math.floor(Math.random()*u.length)];while(d[f]);return f}function x(d){var u={left:"start",right:"end",center:"middle",start:"start",end:"end"};return u[d]||u.start}var t,l,n,i,s;s=(function(d,u){var f,y,h,p={};for(d=d.split(","),u=u||10,f=0;f<d.length;f+=2)y="&"+d[f+1]+";",h=parseInt(d[f],u),p[y]="&#"+h+";";return p["\\xa0"]="&#160;",p})("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),t={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},n=function(d,u){this.__root=d,this.__ctx=u},n.prototype.addColorStop=function(d,u){var f,y,h=this.__ctx.__createElement("stop");h.setAttribute("offset",d),u.indexOf("rgba")!==-1?(f=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,y=f.exec(u),h.setAttribute("stop-color",S("rgb({r},{g},{b})",{r:y[1],g:y[2],b:y[3]})),h.setAttribute("stop-opacity",y[4])):h.setAttribute("stop-color",u),this.__root.appendChild(h)},i=function(d,u){this.__root=d,this.__ctx=u},l=function(d){var u,f={width:500,height:500,enableMirroring:!1};if(arguments.length>1?(u=f,u.width=arguments[0],u.height=arguments[1]):u=d||f,!(this instanceof l))return new l(u);this._randomPostfix="-"+(function(){return"xxxxxxxx".replace(/x/g,function(y){return(16*Math.random()|0).toString(16)})})(),this._svgClassNames=[],this.width=u.width||f.width,this.height=u.height||f.height,this.enableMirroring=u.enableMirroring!==void 0?u.enableMirroring:f.enableMirroring,this.canvas=this,this.__document=u.document||document,u.ctx?this.__ctx=u.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)},l.prototype.__createElement=function(d,u,f){u===void 0&&(u={});var y,h,p=this.__document.createElementNS("http://www.w3.org/2000/svg",d),r=Object.keys(u);for(f&&(p.setAttribute("fill","none"),p.setAttribute("stroke","none")),y=0;y<r.length;y++)h=r[y],p.setAttribute(h,u[h]);var o=this._svgClassNames&&this._svgClassNames[this._svgClassNames.length-1];return o&&p.setAttribute("class",o),p},l.prototype.__setDefaultStyles=function(){var d,u,f=Object.keys(t);for(d=0;d<f.length;d++)u=f[d],this[u]=t[u].canvas},l.prototype.__applyStyleState=function(d){var u,f,y=Object.keys(d);for(u=0;u<y.length;u++)f=y[u],this[f]=d[f]},l.prototype.__getStyleState=function(){var d,u,f={},y=Object.keys(t);for(d=0;d<y.length;d++)u=y[d],f[u]=this[u];return f},l.prototype.__applyStyleToCurrentElement=function(d){var u=this.__currentElement,f=this.__currentElementsToStyle;f&&(u.setAttribute(d,""),u=f.element,f.children.forEach(function(A){A.setAttribute(d,"")}));var y,h,p,r,o,m,b=Object.keys(t);for(y=0;y<b.length;y++)if(h=t[b[y]],p=this[b[y]],h.apply){if(p instanceof i){if(p.__ctx)for(;p.__ctx.__defs.childNodes.length;)r=p.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[r]=r,this.__defs.appendChild(p.__ctx.__defs.childNodes[0]);u.setAttribute(h.apply,S("url(#{id})",{id:p.__root.getAttribute("id")}))}else if(p instanceof n)u.setAttribute(h.apply,S("url(#{id})",{id:p.__root.getAttribute("id")}));else if(h.apply.indexOf(d)!==-1&&h.svg!==p)if(h.svgAttr!=="stroke"&&h.svgAttr!=="fill"||p.indexOf("rgba")===-1){var E=h.svgAttr;if(b[y]==="globalAlpha"&&(E=d+"-"+h.svgAttr,u.getAttribute(E)))continue;u.setAttribute(E,p)}else{o=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,m=o.exec(p),u.setAttribute(h.svgAttr,S("rgb({r},{g},{b})",{r:m[1],g:m[2],b:m[3]}));var M=m[4],D=this.globalAlpha;D!=null&&(M*=D),u.setAttribute(h.svgAttr+"-opacity",M)}}},l.prototype.__closestGroupOrSvg=function(d){return d=d||this.__currentElement,d.nodeName==="g"||d.nodeName==="svg"?d:this.__closestGroupOrSvg(d.parentNode)},l.prototype.getSerializedSvg=function(d){var u,f,y,h,p,r,o=new XMLSerializer().serializeToString(this.__root);if(r=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi,r.test(o)&&(o=o.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),d)for(u=Object.keys(s),f=0;f<u.length;f++)y=u[f],h=s[y],p=new RegExp(y,"gi"),p.test(o)&&(o=o.replace(p,h));return o},l.prototype.getSvg=function(){return this.__root},l.prototype._dcgStartNamedGroup=function(d){var u=this.__createElement("g");u.setAttribute("id",d+this._randomPostfix);var f=this.__closestGroupOrSvg();this.__groupStack.push(f),f.appendChild(u),this.__currentElement=u},l.prototype._dcgEndNamedGroup=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElement||(this.__currentElement=this.__root.childNodes[1])},l.prototype._dcgSaveClassName=function(d){this._svgClassNames.push(d),this.__currentElement&&this.__currentElement.tagName==="path"&&!this.__currentDefaultPath&&(this.__currentElement.getAttribute("class")||this.__currentElement.setAttribute("class",d))},l.prototype._dcgRestoreClassName=function(){this._svgClassNames.pop()},l.prototype.save=function(){var d=this.__createElement("g"),u=this.__closestGroupOrSvg();this.__groupStack.push(u),u.appendChild(d),this.__currentElement=d,this.__stack.push(this.__getStyleState())},l.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var d=this.__stack.pop();this.__applyStyleState(d)},l.prototype.__addTransform=function(d){var u=this.__closestGroupOrSvg();if(u.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:u,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var f=this.__createElement("g");u.appendChild(f),this.__currentElement=f}var y=this.__currentElement.getAttribute("transform");y?y+=" ":y="",y+=d,this.__currentElement.setAttribute("transform",y)},l.prototype.scale=function(d,u){u===void 0&&(u=d),this.__addTransform(S("scale({x},{y})",{x:d,y:u}))},l.prototype.rotate=function(d){var u=180*d/Math.PI;this.__addTransform(S("rotate({angle},{cx},{cy})",{angle:u,cx:0,cy:0}))},l.prototype.translate=function(d,u){this.__addTransform(S("translate({x},{y})",{x:d,y:u}))},l.prototype.transform=function(d,u,f,y,h,p){this.__addTransform(S("matrix({a},{b},{c},{d},{e},{f})",{a:d,b:u,c:f,d:y,e:h,f:p}))},l.prototype.beginPath=function(){var d,u;this.__currentDefaultPath="",this.__currentPosition={},d=this.__createElement("path",{},!0),u=this.__closestGroupOrSvg(),u.appendChild(d),this.__currentElement=d},l.prototype.__applyCurrentDefaultPath=function(){var d=this.__currentElement;d.nodeName==="path"?d.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",d.nodeName)},l.prototype.__addPathCommand=function(d){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=d},l.prototype.moveTo=function(d,u){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:d,y:u},this.__addPathCommand(S("M {x} {y}",{x:d,y:u}))},l.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},l.prototype.lineTo=function(d,u){this.__currentPosition={x:d,y:u},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(S("L {x} {y}",{x:d,y:u})):this.__addPathCommand(S("M {x} {y}",{x:d,y:u}))},l.prototype.bezierCurveTo=function(d,u,f,y,h,p){this.__currentPosition={x:h,y:p},this.__addPathCommand(S("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:d,cp1y:u,cp2x:f,cp2y:y,x:h,y:p}))},l.prototype.quadraticCurveTo=function(d,u,f,y){this.__currentPosition={x:f,y},this.__addPathCommand(S("Q {cpx} {cpy} {x} {y}",{cpx:d,cpy:u,x:f,y}))};var g=function(d){var u=Math.sqrt(d[0]*d[0]+d[1]*d[1]);return[d[0]/u,d[1]/u]};return l.prototype.arcTo=function(d,u,f,y,h){var p=this.__currentPosition&&this.__currentPosition.x,r=this.__currentPosition&&this.__currentPosition.y;if(p!==void 0&&r!==void 0){if(h<0)throw new Error("IndexSizeError: The radius provided ("+h+") is negative.");if(p===d&&r===u||d===f&&u===y||h===0)return void this.lineTo(d,u);var o=g([p-d,r-u]),m=g([f-d,y-u]);if(o[0]*m[1]==o[1]*m[0])return void this.lineTo(d,u);var b=o[0]*m[0]+o[1]*m[1],E=Math.acos(Math.abs(b)),M=g([o[0]+m[0],o[1]+m[1]]),D=h/Math.sin(E/2),A=d+D*M[0],v=u+D*M[1],k=[-o[1],o[0]],J=[m[1],-m[0]],X=function(z){var B=z[0];return z[1]>=0?Math.acos(B):-Math.acos(B)},te=X(k),H=X(J);this.lineTo(A+k[0]*h,v+k[1]*h),this.arc(A,v,h,te,H)}},l.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},l.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},l.prototype.rect=function(d,u,f,y){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(d,u),this.lineTo(d+f,u),this.lineTo(d+f,u+y),this.lineTo(d,u+y),this.lineTo(d,u),this.closePath()},l.prototype.fillRect=function(d,u,f,y){var h,p;h=this.__createElement("rect",{x:d,y:u,width:f,height:y},!0),p=this.__closestGroupOrSvg(),p.appendChild(h),this.__currentElement=h,this.__applyStyleToCurrentElement("fill")},l.prototype.strokeRect=function(d,u,f,y){var h,p;h=this.__createElement("rect",{x:d,y:u,width:f,height:y},!0),p=this.__closestGroupOrSvg(),p.appendChild(h),this.__currentElement=h,this.__applyStyleToCurrentElement("stroke")},l.prototype.__clearCanvas=function(){for(var d=this.__closestGroupOrSvg(),u=d.getAttribute("transform"),f=this.__root.childNodes[1],y=f.childNodes,h=y.length-1;h>=0;h--)y[h]&&f.removeChild(y[h]);this.__currentElement=f,this.__groupStack=[],u&&this.__addTransform(u)},l.prototype.clearRect=function(d,u,f,y){if(d===0&&u===0&&f===this.width&&y===this.height)return void this.__clearCanvas();var h,p=this.__closestGroupOrSvg();h=this.__createElement("rect",{x:d,y:u,width:f,height:y,fill:"#FFFFFF"},!0),p.appendChild(h)},l.prototype.createLinearGradient=function(d,u,f,y){var h=this.__createElement("linearGradient",{id:c(this.__ids),x1:d+"px",x2:f+"px",y1:u+"px",y2:y+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(h),new n(h,this)},l.prototype.createRadialGradient=function(d,u,f,y,h,p){var r=this.__createElement("radialGradient",{id:c(this.__ids),cx:y+"px",cy:h+"px",r:p+"px",fx:d+"px",fy:u+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(r),new n(r,this)},l.prototype.__parseFont=function(){var d=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i,u=d.exec(this.font),f={style:u[1]||"normal",size:u[4]||"10px",family:u[6]||"sans-serif",weight:u[3]||"normal",decoration:u[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(f.decoration="underline"),this.__fontHref&&(f.href=this.__fontHref),f},l.prototype.__wrapTextLink=function(d,u){if(d.href){var f=this.__createElement("a");return f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d.href),f.appendChild(u),f}return u},l.prototype.__applyText=function(d,u,f,y){var h=this.__parseFont(),p=this.__closestGroupOrSvg(),r=this.__createElement("text",{"font-family":h.family,"font-size":h.size,"font-style":h.style,"font-weight":h.weight,"text-decoration":h.decoration,x:u,y:f,"text-anchor":x(this.textAlign)},!0);r.appendChild(this.__document.createTextNode(d)),this.__currentElement=r,this.__applyStyleToCurrentElement(y),p.appendChild(this.__wrapTextLink(h,r))},l.prototype.fillText=function(d,u,f){this.__applyText(d,u,f,"fill")},l.prototype.strokeText=function(d,u,f){this.__applyText(d,u,f,"stroke")},l.prototype.measureText=function(d){return this.__ctx.font=this.font,this.__ctx.measureText(d)},l.prototype.arc=function(d,u,f,y,h,p){if(y!==h){y%=2*Math.PI,h%=2*Math.PI,y===h&&(h=(h+2*Math.PI-.001*(p?-1:1))%(2*Math.PI));var r=d+f*Math.cos(h),o=u+f*Math.sin(h),m=d+f*Math.cos(y),b=u+f*Math.sin(y),E=p?0:1,M=0,D=h-y;D<0&&(D+=2*Math.PI),M=p?D>Math.PI?0:1:D>Math.PI?1:0,this.lineTo(m,b),this.__addPathCommand(S("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:f,ry:f,xAxisRotation:0,largeArcFlag:M,sweepFlag:E,endX:r,endY:o})),this.__currentPosition={x:r,y:o}}},l.prototype.clip=function(){var d=this.__closestGroupOrSvg(),u=this.__createElement("clipPath"),f=c(this.__ids),y=this.__createElement("g");this.__applyCurrentDefaultPath(),d.removeChild(this.__currentElement),u.setAttribute("id",f),u.appendChild(this.__currentElement),this.__defs.appendChild(u),d.setAttribute("clip-path",S("url(#{id})",{id:f})),d.appendChild(y),this.__currentElement=y},l.prototype.drawImage=function(){var d,u,f,y,h,p,r,o,m,b,E,M,D,A,v=Array.prototype.slice.call(arguments),k=v[0],J=0,X=0;if(v.length===3)d=v[1],u=v[2],h=k.width,p=k.height,f=h,y=p;else if(v.length===5)d=v[1],u=v[2],f=v[3],y=v[4],h=k.width,p=k.height;else{if(v.length!==9)throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);J=v[1],X=v[2],h=v[3],p=v[4],d=v[5],u=v[6],f=v[7],y=v[8]}r=this.__closestGroupOrSvg(),this.__currentElement;var te="translate("+d+", "+u+")";if(k instanceof l){if(o=k.getSvg().cloneNode(!0),o.childNodes&&o.childNodes.length>1){for(m=o.childNodes[0];m.childNodes.length;)A=m.childNodes[0].getAttribute("id"),this.__ids[A]=A,this.__defs.appendChild(m.childNodes[0]);if(b=o.childNodes[1]){var H,z=b.getAttribute("transform");H=z?z+" "+te:te,b.setAttribute("transform",H),r.appendChild(b)}}}else k.nodeName!=="CANVAS"&&k.nodeName!=="IMG"||(E=this.__createElement("image"),E.setAttribute("width",f),E.setAttribute("height",y),E.setAttribute("opacity",this.globalAlpha),E.setAttribute("preserveAspectRatio","none"),(J||X||h!==k.width||p!==k.height)&&(M=this.__document.createElement("canvas"),M.width=f,M.height=y,D=M.getContext("2d"),D.drawImage(k,J,X,h,p,0,0,f,y),k=M),E.setAttribute("transform",te),E.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",k.nodeName==="CANVAS"?k.toDataURL():k.getAttribute("src")),r.appendChild(E))},l.prototype.createPattern=function(d,u){var f,y=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),h=c(this.__ids);return y.setAttribute("id",h),y.setAttribute("width",d.width),y.setAttribute("height",d.height),d.nodeName==="CANVAS"||d.nodeName==="IMG"?(f=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),f.setAttribute("width",d.width),f.setAttribute("height",d.height),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d.nodeName==="CANVAS"?d.toDataURL():d.getAttribute("src")),y.appendChild(f),this.__defs.appendChild(y)):d instanceof l&&(y.appendChild(d.__root.childNodes[1]),this.__defs.appendChild(y)),new i(y,this)},l.prototype.setLineDash=function(d){d&&d.length>0?this.lineDash=d.join(","):this.lineDash=null},l.prototype.ellipse=function(d,u,f,y,h,p,r,o){if(p!==r){p%=2*Math.PI,r%=2*Math.PI,p===r&&(r=(r+2*Math.PI-.001*(o?-1:1))%(2*Math.PI));var m=d+Math.cos(-h)*f*Math.cos(r)+Math.sin(-h)*y*Math.sin(r),b=u-Math.sin(-h)*f*Math.cos(r)+Math.cos(-h)*y*Math.sin(r),E=d+Math.cos(-h)*f*Math.cos(p)+Math.sin(-h)*y*Math.sin(p),M=u-Math.sin(-h)*f*Math.cos(p)+Math.cos(-h)*y*Math.sin(p),D=o?0:1,A=0,v=r-p;v<0&&(v+=2*Math.PI),A=o?v>Math.PI?0:1:v>Math.PI?1:0,this.lineTo(E,M),this.__addPathCommand(S("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:f,ry:y,xAxisRotation:h*(180/Math.PI),largeArcFlag:A,sweepFlag:D,endX:m,endY:b})),this.__currentPosition={x:m,y:b}}},l.prototype.drawFocusRing=function(){},l.prototype.createImageData=function(){},l.prototype.getImageData=function(){},l.prototype.putImageData=function(){},l.prototype.globalCompositeOperation=function(){},l.prototype.setTransform=function(){},l}),P("graphing/screen",["require","exports"],function(S,c){Object.defineProperty(c,"__esModule",{value:!0});var x=(function(){function t(l,n){this.width=l,this.height=n}return t})();c.Screen=x}),P("core/math/poi-type",["require","exports"],function(S,c){Object.defineProperty(c,"__esModule",{value:!0}),c.INTERSECTION=1001,c.ZERO=1002,c.INTERCEPT=1003,c.EXTREMUM=1004,c.EDGE=1005,c.DEFINITION=1006,c.TRACE=1007,c.LABEL=1008}),P("graphing/poi",["require","exports","core/math/poi-type","core/types/graphmode"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=1,n=(function(){function i(s,g,d,u,f,y,h){this.x=s,this.y=g,this.type=d,this.sketch=u,this.branch=f,this.pointIdxOnBranch=y,this.bareLabel=h!==void 0&&h,this.id=l++}return i.prototype.getLabel=function(){var s=this.sketch&&this.sketch.branches[this.branch];return this.type===x.LABEL&&s&&"labels"in s&&s.labels&&s.labels[this.pointIdxOnBranch]||""},i.prototype.getGraphMode=function(){return this.sketch.branches[this.branch].graphMode},i.prototype.getCompiledFunction=function(){var s=this.sketch.branches[this.branch];if("compiled"in s&&s.compiled)return s.compiled.fn},i.prototype.isAttachedToPlottedPoint=function(){return this.type===x.DEFINITION||this.type===x.LABEL},i.prototype.isMovable=function(){return this.getGraphMode()===t.XYPOINT_MOVABLE},i.prototype.isPersistent=function(){return this.type===x.LABEL},i.prototype.getLabelSize=function(){var s=this.sketch&&this.sketch.branches[this.branch];if(this.type===x.LABEL&&s&&"labelSize"in s)return s.labelSize},i.prototype.getVerticalLabel=function(){var s=this.sketch&&this.sketch.branches[this.branch];return!!(this.type===x.LABEL&&s&&"verticalLabel"in s)&&!!s.verticalLabel},i.prototype.getTextOutline=function(){if(this.hasEditableLabel())return!1;var s=this.sketch&&this.sketch.branches[this.branch];return!(this.type===x.LABEL&&s&&"suppressTextOutline"in s)||!s.suppressTextOutline},i.prototype.hasInteractiveLabel=function(){var s=this.sketch&&this.sketch.branches[this.branch];return!!(s&&"interactiveLabel"in s)&&!!s.interactiveLabel},i.prototype.hasEditableLabel=function(){var s=this.sketch&&this.sketch.branches[this.branch];return!!(s&&"editableLabel"in s)&&!!s.editableLabel},i.prototype.isBareLabel=function(){return this.bareLabel},i.prototype.getMovablePoint=function(){return this.sketch.getMovablePointByIndex(this.pointIdxOnBranch)},i})();c.POI=n}),P("lib/mathspeak",["require","exports","vendor/mathquill","jquery"],function(S,c,x,t){function l(u){var f="",y=[];y=s(u)?g(u):[{from:0,to:u.length,type:"text",text:u}];for(var h=0,p=y;h<p.length;h++){var r=p[h];f+=r.type==="text"?r.text:n(r.text)}return f}function n(u){return u.match(/^\s*[\d]{0,3}(\.[\d]*)?\s*$/)?u:(d.latex(u),d.mathspeak().trim())}Object.defineProperty(c,"__esModule",{value:!0});var i=/`[^`]*`/g,s=function(u){if(u!=null){var f=u.match(/`/g);return(f!=null&&f.length||0)%2==0}return!0},g=function(u){var f=[];if(u==null||u.length==0)return f;for(var y,h=0;y=i.exec(u);){var p=u.slice(h,y.index);p.length>0&&f.push({from:h,to:y.index,type:"text",text:p}),h=y.index+y[0].length,f.push({from:y.index,to:h,type:"math",text:y[0].slice(1,-1)})}var r=u.slice(h);return r.length>0&&f.push({from:h,to:u.length,type:"text",text:r}),f},d=x.MQ.StaticMath(t("<span/>")[0]);c.getMathspeakFromText=l}),P("graphing/graphsketch",["require","exports","core/math/poi-type","core/types/graphmode","./poi","core/math/poi-type","lib/mathspeak"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=(function(){function g(d,u){var f=this;this.color="#000000",this.style="normal",this.visible=!0,this.showPOI=!1,this.showHighlight=!1,this.selected=!1,this.labels=[],this.id=d,this.branches=u!==void 0?u:[],this.getPOI().forEach(function(y){y.type===x.LABEL&&f.labels.push(y)})}return g.prototype.getPOI=function(){if(this.__cachedPOI)return this.__cachedPOI;this.__cachedPOI=[],this.__cachedPOIIds={};for(var d=0;d<this.branches.length;d++){var u=this.branches[d],f=u.poi;if(u.graphMode===t.X||u.graphMode===t.Y)this._pushPOI(f.zeros,d,x.ZERO),this._pushPOI(f.intercept,d,x.INTERCEPT),this._pushPOI(f.extrema,d,x.EXTREMUM),f.intersections&&this._pushPOI(f.intersections,d,x.INTERSECTION);else if(u.graphMode===t.XYPOINT||u.graphMode===t.XYPOINT_MOVABLE){u.graphMode;var y=u.graphMode===t.XYPOINT&&u.interactiveLabel===!0;if(u.showLabel===!0||y){var h=u.nakedLabel;f.defined&&this._pushPOI(f.defined,d,x.LABEL,h)}else f.defined&&this._pushPOI(f.defined,d,x.DEFINITION)}}return this.__cachedPOI},g.prototype.getBranchPOI=function(d){return this.getPOI().filter(function(u){return u.branch===d})},g.prototype.getMovablePoints=function(){if(this.__cachedMovablePoints)return this.__cachedMovablePoints;this.__cachedMovablePoints=[];var d=this.branches[0];if(d&&d.segments.length===1&&d.graphMode===t.XYPOINT_MOVABLE)for(var u=d.segments[0],f=0;f<u.length;f++){var y=void 0;d.tableId&&(y={tableId:d.tableId,columnId:this.id,rowIndex:d.movablePointInfo[f].index,dragX:d.movablePointInfo[f].dragX,dragY:d.movablePointInfo[f].dragY});var h=d.scaleFactors?d.scaleFactors[0][f]:void 0,p=y?y.rowIndex:f,r=d.segments.length===1&&d.labels&&d.labels[f]?d.labels[f]:void 0;this.__cachedMovablePoints.push({type:"movable-point",id:"movable:["+this.id+","+p+"]",sketch:this,color:this.color,tableInfo:y,scaleFactor:h,x:u[f][0],y:u[f][1],label:r,ariaLabel:r&&i.getMathspeakFromText(r)})}return this.__cachedMovablePoints},g.prototype.getMovablePointByIndex=function(d){return this.getMovablePoints()[d]},g.prototype.getStaticLabeledPoints=function(){var d=this;if(this.__cachedStaticLabeledPoints)return this.__cachedStaticLabeledPoints;var u=this.branches[0];return this.__cachedStaticLabeledPoints=[],this.getPOI().forEach(function(f){if((f.type===n.DEFINITION||f.type===n.LABEL)&&u.graphMode===t.XYPOINT){var y=u.showLabel,h=u.labels&&u.labels[0];(y||h)&&d.__cachedStaticLabeledPoints.push({type:"static-labeled-point",id:"static["+d.id+","+f.id+"]",x:f.x,y:f.y,sketch:f.sketch,label:h,ariaLabel:i.getMathspeakFromText(h)})}}),this.__cachedStaticLabeledPoints},g.prototype._pushPOI=function(d,u,f,y){y===void 0&&(y=!1);for(var h=0,p=d.x.length;h<p;h++){var r=new l.POI(d.x[h],d.y[h],f,this,u,h,y);d.intersects&&(r.intersects=d.intersects[h]),this.__cachedPOI.push(r),this.__cachedPOIIds[r.id]=r}},g.prototype.updateIntersections=function(d){for(var u=this,f=0,y=this.branches.length;f<y;f++)this.branches[f].poi.intersections=d[f];var h=this.__cachedPOI;this.__cachedPOI=[],h.forEach(function(m){m.type!==x.INTERSECTION?u.__cachedPOI.push(m):delete u.__cachedPOIIds[m.id]});for(var f=0;f<this.branches.length;f++){var p=this.branches[f],r=p.graphMode,o=p.poi;r!==t.X&&r!==t.Y||o.intersections&&this._pushPOI(o.intersections,f,x.INTERSECTION)}},g.prototype.getPOIById=function(d){return this.__cachedPOIIds[d]},g.prototype.updateFrom=function(d){if(d){this.visible=!0,this.showPOI=d.showPOI,this.showHighlight=d.showHighlight,this.selected=d.selected;var u=this.branches[0].graphMode;if(u===t.XYPOINT||u===t.XYPOINT_MOVABLE){for(var f=!0,y=0;y<this.__cachedPOI.length;y++){var h=d.__cachedPOI[y],p=this.__cachedPOI[y];if(!h||h.type!==p.type){f=!1;break}}if(f)for(var y=0;y<this.__cachedPOI.length;y++){var h=d.__cachedPOI[y],p=this.__cachedPOI[y];delete this.__cachedPOIIds[p.id],this.__cachedPOIIds[h.id]=p,p.id=h.id}}}},g})();c.GraphSketch=s}),(function(S){if(typeof P=="function"&&P.amd)P("base64",[],S);else{var c;c=typeof window<"u"?window:typeof w<"u"?w:typeof self<"u"?self:this,c.base64js=S()}})(function(){return(function S(c,x,t){function l(s,g){if(!x[s]){if(!c[s]){var d=typeof ce=="function"&&ce;if(!g&&d)return d(s,!0);if(n)return n(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var f=x[s]={exports:{}};c[s][0].call(f.exports,function(y){var h=c[s][1][y];return l(h||y)},f,f.exports,S,c,x,t)}return x[s].exports}for(var n=typeof ce=="function"&&ce,i=0;i<t.length;i++)l(t[i]);return l})({"/":[function(S,c,x){function t(r){var o=r.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return r[o-2]==="="?2:r[o-1]==="="?1:0}function l(r){return 3*r.length/4-t(r)}function n(r){var o,m,b,E,M,D,A=r.length;M=t(r),D=new f(3*A/4-M),b=M>0?A-4:A;var v=0;for(o=0,m=0;o<b;o+=4,m+=3)E=u[r.charCodeAt(o)]<<18|u[r.charCodeAt(o+1)]<<12|u[r.charCodeAt(o+2)]<<6|u[r.charCodeAt(o+3)],D[v++]=E>>16&255,D[v++]=E>>8&255,D[v++]=255&E;return M===2?(E=u[r.charCodeAt(o)]<<2|u[r.charCodeAt(o+1)]>>4,D[v++]=255&E):M===1&&(E=u[r.charCodeAt(o)]<<10|u[r.charCodeAt(o+1)]<<4|u[r.charCodeAt(o+2)]>>2,D[v++]=E>>8&255,D[v++]=255&E),D}function i(r){return d[r>>18&63]+d[r>>12&63]+d[r>>6&63]+d[63&r]}function s(r,o,m){for(var b,E=[],M=o;M<m;M+=3)b=(r[M]<<16)+(r[M+1]<<8)+r[M+2],E.push(i(b));return E.join("")}function g(r){for(var o,m=r.length,b=m%3,E="",M=[],D=0,A=m-b;D<A;D+=16383)M.push(s(r,D,D+16383>A?A:D+16383));return b===1?(o=r[m-1],E+=d[o>>2],E+=d[o<<4&63],E+="=="):b===2&&(o=(r[m-2]<<8)+r[m-1],E+=d[o>>10],E+=d[o>>4&63],E+=d[o<<2&63],E+="="),M.push(E),M.join("")}x.byteLength=l,x.toByteArray=n,x.fromByteArray=g;for(var d=[],u=[],f=typeof Uint8Array<"u"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=y.length;h<p;++h)d[h]=y[h],u[y.charCodeAt(h)]=h;u[45]=62,u[95]=63},{}]},{},[])("/")}),P("bin",["base64"],function(S){var c={};return{load:function(x,t,l,n){var i=t.toUrl("assets_src/"+x);if(n.isBuild){var s=ce.nodeRequire("fs");c[x]=s.readFileSync(i).toString("base64"),l()}else{var g=new XMLHttpRequest;g.open("GET",i,!0),g.responseType="arraybuffer",g.onload=function(){l(g.response)},g.send()}},write:function(x,t,l,n){t in c?l("define('"+x+"!"+t+"', ['base64'], function (base64) {  return base64.toByteArray('"+c[t]+"').buffer;});"):console.log("ERROR - failed to find file "+t+" in buildMap")}}}),P("bin!audio/poi.mp3",["base64"],function(S){return S.toByteArray("//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAIAAAHVwAgICAgICAgICAgICBAQEBAQEBAQEBAQEBgYGBgYGBgYGBgYGBggICAgICAgICAgICAoKCgoKCgoKCgoKCgoMDAwMDAwMDAwMDAwODg4ODg4ODg4ODg4OD///////////////8AAAA5TEFNRTMuOThyAaUAAAAALmcAABRAJAiwQgAAQAAAB1cctrbdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjsKyK0YYABp52xtx8wAgAgBd34IAhAgnsECEe7QIAAgsPxACDgcBAEHQfD/g+D4PggCAIf///ghLny4Pg+D5+sHz/wf+XPwfB8H3iMHwfwffUCYPvz/Y7Hg/H4/H4/H4HAwADcoDwAP7XfuAFtXrhzjsjOXP8iCYM4IBVoH2DGAhQR2hm5vikA2IVEPX9nQaITi6IiLCKX/fxcg/DdGmS5BP7fIGQ0hw7DQi5Q//8midImXygdJ0tlz/1NAgXIANV6MA2Vy2y27jv/+1LEBIALOHOTvGGAMXWhbnTxGZ+LOa2FNMsDtj9/jUmPqqqARrNvlVjDDoGZqq0T11A0DVqeEnlQk8q4sVEp0FcqdxLoEJ0RPYWvIlQkbGA0Anw6VJJgqRKw1NJaAXkR4ag0/FwCCABbbdbJA0fzVgdvgvu5Px6Rwiv3VllZVDREqmWntLyBDka3sz951iTve+ddHP0/M3P/+ydU4zbqOZOeop5jfu1kwk8VezPeGc1hRMbWrJNv6SO/fH0Mc15KYvKqAAAAdrdsrbBDuBpp4v/7UsQGgguVE2ekjNP5aSBo6YSNgKAQUoCZEBJK8q73G/nhJFFmLY5dNc4b7gjBRyEs5yjJokY9TBoU/pXQBglyNjeiA87V8vkzaw019YTu2fxY0t6gteLMI37f9fYw7UVnWoE4NJOSpQBu3GfVAIVACgw+IikZZAnB7UKlLGnha4PDbIhsBhk4RYmlE2hYZ8NrQ5HnyEUvZxDyVG1hM33ZZH0OlrJV5///3/51qTGtJgxhREVLEfoO1w6686eRAAAAUicksbA1qegZCe2AuEgJ//tSxAkCDF0XSaw8ailyn+l1h4w1BvVY04S56fYY5nGkBZHMGLBjHDUMlORG4wcCT9R6RB+3vM8jVMU1hmlOoXIOMKqotE2HxWYNJq/7EZ2l63NJ+Z2aTA4Yq+7t0PhOxCz9WP1mA3DJZZGDkRfq+qFAGwhwHUAVqBfDiMUlypaMWApR1VoWLChfUpJzkBDMCTf85UZr6jyHa1psZnTS5iKatTVKcX/Ker9zMvM1T0okGyiQcreJbU1tc+Yj/ms3395FBIADkjlkjbAZNdiwgRD/+1LEBwAL8Tdbp6Rh+XmT6XWHjCx5U4sTCtlUidNtS9I7oUx7oxdIZlOghkIQYzB0vxtMs6QgCg4WMVakQMM5HRfrsdIEftM0yfOHnNGkiPRMoWCKSsxsChat8/vYw4c4t+CMMB5AAAAXZrftWiEVdbSgnURZoWvK2KhK9GfCkIGnQKxIqbYJ0JCNFJ3St1wuUNRLW4Kw5VhLVGrmgYKhhRe1qzzC7SqFFyjJlIqXcPD6gw//epZ9bwQFw+s+rdVAFtzl0AAAA3I3JK0QJxtCHv/7UsQGAApAM0WssGFpSCKqNYMMvgZph6CwIhKEt0yEiMwFKpnDBBajVc5jbTM7KayRt3I43h8Ag05kd9AtqO0bItmf/+Aevzf7dx28sK0hvP//3/izNwf1pfEAgANutuOJACSqWvuW+SKNLQSpOQKsrX3XxnZxy2Rus0Q1irPy9Mkg4kZGJFRQUax4R+jsACwavqYd2bmRX/6VnKrLk2Z2VGYwQNCIEasJh7/oBScAAMtBNgBWssKw0uCAgKkVpJirpZyBklUCwqaSIkW6BgIY//tSxBIDSYw3Km0kSoEzi9KAliSw9QNAydBqoFQVEQNBwiJYiBWdDqxiwVBUGqg6JgaBoGj3//////huVcFQsIRoPjBXLBGA8AkCwOhcD4KAmFAtEYcR6E8gD2OAXJ2N//uSJVZVJNRdh0gkLCwuKioqz4sLC3//////4sLC31ioqKpAoqKirOgFqkxBTUUzLjk4LjKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+1LEIwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==").buffer}),P("graphing/tonegenerator",["require","exports","bin!audio/poi.mp3","tslib","browser","lib/animation-frame","bugsnag","core/types/graphmode"],function(S,c,x,t,l,n,i,s){function g(){return{amplitude:0,phase:0,noiseVal:0,lowerOctaveGain:0,upperOctaveGain:0}}function d(ee,ae){var le=ae.independentMin,me=ae.independentMax,Ae=Math.abs((ee-le)/(me-le));return isFinite(Ae)||(Ae=.5),Ae=Math.max(Math.min(Ae,1),0),{left:Math.cos(Math.PI/2*Ae),right:Math.sin(Math.PI/2*Ae)}}function u(ee,ae,le,me,Ae){var Be=ae.independent,Fe=ae.dependent,Le=ee.phase,ze=ee.noiseVal,We=ee.lowerOctaveGain,Z=ee.upperOctaveGain,C=le.dependentMin,oe=le.dependentMax,ge=0,_e=0,De=0;return!isNaN(Fe)&&C<=Fe&&Fe<=oe?(Le+=f((Fe-C)/(oe-C))/me,Ae<4*K?(_e=0,De=0):(_e=.5,De=Be<0?.5:0),Fe<0&&(ze=h(ze),ge+=.15*ze)):(ze=h(ze),ge+=.15*ze),We+=(_e-We)/(me*K),Z+=(De-Z)/(me*K),ge+=We*y(Le)+Z*y(2*Le),{amplitude:ge,phase:Le,noiseVal:ze,lowerOctaveGain:We,upperOctaveGain:Z}}function f(ee){return Math.min(Math.max(ie*Math.pow(2,ee),ue),Q)}function y(ee){return Math.abs(4*ee+1-4*Math.floor((4*ee+3)/4))-1}function h(ee){return(ee+.2*(2*Math.random()-1))/1.02}function p(ee,ae){return ee[0]-ae[0]}function r(ee){ee=t.__assign({},ee);var ae=ee.segments[0].slice();return ae.sort(p),ee.segments=[ae],ee}function o(ee,ae,le,me){for(var Ae=ee.getChannelData(0),Be=ae.getChannelData(0),Fe=ae.getChannelData(1),Le=0;Le<Ae.length&&Le+le<Be.length;Le++)Be[Le+le]+=Ae[Le]*me.left,Fe[Le+le]+=Ae[Le]*me.right}function m(ee){for(var ae=0,le=ee.branches;ae<le.length;ae++)if(b(le[ae]))return!0;return!1}function b(ee){switch(ee.graphMode){case s.X:case s.Y:case s.XYPOINT:case s.XYPOINT_MOVABLE:return ee.segments.length>0;default:return!1}}function E(ee){for(var ae=0;ae<ee.branches.length;ae++)if(b(ee.branches[ae]))return ae;return 0}function M(ee,ae){for(var le=0,me=0;me<=ae;me++)b(ee.branches[me])&&(le+=1);return le}function D(ee){switch(ee.graphMode){case s.X:case s.Y:case s.XYPOINT:case s.XYPOINT_MOVABLE:return!0;default:return!1}}function A(ee,ae,le){switch(ee.graphMode){case s.Y:case s.X:if(ae<0||ae>=ee.segments.length)return!1;var me=ee.segments[ae],Ae=2*le;return Ae>=0&&Ae<me.length;case s.XYPOINT:case s.XYPOINT_MOVABLE:return le>=0&&le<=1&&ae>=0&&ae<ee.segments[0].length;default:return!1}}function v(){return{independent:NaN,dependent:NaN}}function k(ee,ae,le,me,Ae){if(!A(ee,ae,le))return v();switch(ee.graphMode){case s.Y:case s.X:var Le=ee.segments[ae],Be=2*le;return Be+1>=Le.length?v():{independent:Le[Be],dependent:Le[Be+1]};case s.XYPOINT:case s.XYPOINT_MOVABLE:var Fe=ee.segments[0][ae][1],Le=ee.segments[0],ze=.5*(me.xmax-me.xmin)/Ae*re;if(le===0){var We=-1/0;A(ee,ae-1,0)&&(We=.5*(Le[ae][0]+Le[ae-1][0]));var C=Math.max(Le[ae][0]-ze,We);return{independent:C,dependent:Fe}}var Z=1/0;A(ee,ae+1,0)&&(Z=.5*(Le[ae][0]+Le[ae+1][0]));var C=Math.min(Le[ae][0]+ze,Z);return{independent:C,dependent:Fe};default:return v()}}function J(ee){switch(ee.graphMode){case s.Y:case s.X:return ee.segments.length;case s.XYPOINT:case s.XYPOINT_MOVABLE:return ee.segments[0].length;default:return 0}}function X(ee,ae,le,me){if(!A(ee,ae,0))return NaN;switch(ee.graphMode){case s.Y:case s.X:var Ae=ee.segments[ae];return Ae[Ae.length-2];case s.XYPOINT:case s.XYPOINT_MOVABLE:var Ae=ee.segments[0],Be=1/0;A(ee,ae+1,0)&&(Be=.5*(Ae[ae][0]+Ae[ae+1][0]));var Fe=.5*(le.xmax-le.xmin)/me*re;return Math.min(Ae[ae][0]+Fe,Be);default:return NaN}}function te(ee,ae){switch(ae){case s.Y:case s.XYPOINT:case s.XYPOINT_MOVABLE:return{independentMin:ee.xmin,independentMax:ee.xmax,dependentMin:ee.ymin,dependentMax:ee.ymax};case s.X:return{independentMin:ee.ymin,independentMax:ee.ymax,dependentMin:ee.xmin,dependentMax:ee.xmax};default:throw B(ae)}}function H(ee){switch(ee.graphMode){case s.Y:case s.XYPOINT:case s.XYPOINT_MOVABLE:return{independent:ee.x,dependent:ee.y};case s.X:return{independent:ee.y,dependent:ee.x};default:throw B(ee.graphMode)}}function z(ee,ae){if(ee===s.X)return ae.y;if(ee===s.Y)return ae.x;throw B(ee)}function B(ee){return"Unexpected graph mode. Received "+ee}function F(ee,ae,le,me){var Ae=ee.sampleRate,Be=ee.getChannelData(0),Fe=ee.getChannelData(1),Le=ae.graphMode,ze=te(le,Le),We=ze.independentMin,Z=ze.independentMax,C=Z-We,oe=0,ge=0,_e=Be.length-1,De=_e/Ae;ae.graphMode!==s.XYPOINT&&ae.graphMode!==s.XYPOINT_MOVABLE||(ae=r(ae));for(var je=g(),Ie=0;Ie<Be.length;Ie++){for(var Oe=NaN,N=(_e-Ie)/_e*We+Ie/_e*Z,Pe=d(N,ze);oe<J(ae)&&k(ae,oe,ge,le,De).independent<N;)ge+=1,A(ae,oe,ge)||(oe+=1,ge=0);var Xe=(X(ae,oe,le,De)-N)*(De/C),$e=k(ae,oe,ge,le,De),ht=k(ae,oe,ge-1,le,De),ye=$e.independent-ht.independent;Oe=($e.independent-N)/ye*ht.dependent+(N-ht.independent)/ye*$e.dependent,je=u(je,{independent:N,dependent:Oe},ze,Ae,Xe),Be[Ie]+=je.amplitude*Pe.left,Fe[Ie]+=je.amplitude*Pe.right}if(me&&(Le===s.X||Le===s.Y)&&ae.poi.intersections)for(var Ue=z(Le,ae.poi.intersections),we=0,Te=Ue;we<Te.length;we++){var N=Te[we],Ie=Math.round((N-We)/(Z-We)*_e);o(me,ee,Ie,d(N,ze))}}function $(ee,ae,le,me){for(var Ae=ee.sampleRate,Be=ee.getChannelData(0),Fe=ee.getChannelData(1),Le=ae.graphMode,ze=te(le,Le),We=Be.length-1,Z=g(),C=H(ae),oe=C.independent,ge=C.dependent,_e=d(oe,ze),De=0;De<Be.length;De++)Z=u(Z,{independent:oe,dependent:ge},ze,Ae,(We-De)/Ae),Be[De]+=Z.amplitude*_e.left,Fe[De]+=Z.amplitude*_e.right;me&&ae.intersects!==void 0&&o(me,ee,0,_e)}Object.defineProperty(c,"__esModule",{value:!0});var re=.075,K=.0015,ue=125,ie=500,Q=2e3,pe=(function(){function ee(ae){var le=ae.audioPointMove,me=ae.animationFinished;this.audioSpeed=50,this.audioVolume=.5,this.audioPointMove=le,this.animationFinished=me}return ee.prototype.suspend=function(){this.playbackSupported&&this.audioCtx&&(this.stop(),this.audioCtx.suspend())},ee.prototype.resume=function(){if(!this.audioCtx){var ae=window.AudioContext||window.webkitAudioContext;if(l.IS_IE)this.playbackSupported=!1,this.audioCtx=void 0;else try{this.audioCtx=ae?new ae:void 0,this.playbackSupported=!0}catch(le){i.notify(le),this.playbackSupported=!1,this.audioCtx=void 0}}this.playbackSupported&&this.audioCtx&&(this.audioCtx.state==="suspended"&&this.audioCtx.resume(),this.loadPOI())},ee.prototype.stop=function(){this.playTimeout&&(n.cancelAnimationFrame(this.playTimeout),this.playTimeout=void 0),this.bufferSource&&(this.bufferSource.stop(),this.bufferSource.disconnect(),this.bufferSource=void 0),this.animationFinished()},ee.prototype.isAnimating=function(){return this.playTimeout!==void 0},ee.prototype.getAudioSpeed=function(){return this.audioSpeed},ee.prototype.setAudioSpeed=function(ae){this.audioSpeed=ae},ee.prototype.getAudioVolume=function(){return this.audioVolume},ee.prototype.setAudioVolume=function(ae){this.audioVolume=ae,this.gainMaster!==void 0&&(this.gainMaster.gain.value=this.audioVolume)},ee.prototype.getPlaybackSupported=function(){return this.playbackSupported},ee.prototype.playBranchByIndex=function(ae,le,me){var Ae=this;if(!(le<0||le>=ae.branches.length)&&b(ae.branches[le])){var Be=function(){return Ae.stop()};this.playBranch(ae.branches[le],le,me,Be)}},ee.prototype.playSketch=function(ae,le){var me=this,Ae=ae.branches;if(Ae.length!==0){var Be=-1,Fe=function(){for(Be+=1;Be<Ae.length&&!b(Ae[Be]);)Be+=1;Be<Ae.length?me.playBranch(Ae[Be],Be,le,Fe):me.stop()};Fe()}},ee.prototype.playPoint=function(ae,le){if(this.audioCtx&&D(ae)){var me=this.audioCtx.sampleRate,Ae=me*re,Be=this.audioCtx.createBuffer(2,Ae,me);$(Be,ae,le,this.poiBuffer),this.connectBuffer(Be)}},ee.prototype.connectBuffer=function(ae){if(this.audioCtx){this.gainMaster=this.audioCtx.createGain(),this.gainMaster.connect(this.audioCtx.destination),this.gainMaster.gain.value=this.audioVolume;var le=this.audioCtx.createBufferSource();this.bufferSource=le,le.buffer=ae,le.connect(this.gainMaster),le.start()}},ee.prototype.playBranch=function(ae,le,me,Ae){var Be=this;if(this.audioCtx){var Fe=this.audioSpeed/10,Le=this.audioCtx.sampleRate,ze=Le*Fe,We=this.audioCtx.createBuffer(2,ze,Le);F(We,ae,me,this.poiBuffer),this.connectBuffer(We);var Z=this.audioCtx.currentTime,C=function(){if(Be.playTimeout!==void 0&&n.cancelAnimationFrame(Be.playTimeout),Be.audioCtx){var oe=Be.audioCtx.currentTime,ge=oe-Z,_e=ae.graphMode,De=te(me,_e),je=De.independentMin,Ie=De.independentMax,Oe=(Fe-ge)/Fe*je+ge/Fe*Ie;Be.audioPointMove(le,Oe),ge<Fe?Be.playTimeout=n.requestAnimationFrame(C):Ae()}};C()}},ee.prototype.loadPOI=function(){var ae=this;this.playbackSupported&&!this.poiBuffer&&this.audioCtx&&this.audioCtx.decodeAudioData(x.slice(0),function(le){ae.poiBuffer=le})},ee})();c.default=pe,c.canPlaySketch=m,c.canPlayBranch=b,c.getFirstPlayableBranchIndex=E,c.getReportedBranch=M}),P("graphing/audiographnavigator",["require","exports","main/propagate_selection","tslib","underscore","core/types/graphmode","core/lib/label","core/math/poi-type","graphing/tonegenerator","underscore","lib/aria"],function(S,c,x,t,l,n,i,s,g,d,u){function f(h,p,r){return{x:h.x,y:h.y,branch:h.branch,reportedBranch:r,type:h.type,graphMode:p,intersects:h.intersects}}Object.defineProperty(c,"__esModule",{value:!0});var y=(function(){function h(p,r,o){this.grapher=o,this.controller=p,this.audiograph=r,this.reset()}return h.prototype.reset=function(){this.currentPoint=void 0,this.resetToFirstBranch(),this.sampledPoints=[],this.pois=[],this.independent=0,this.xstep=0,this.ystep=0},h.prototype.resetToFirstBranch=function(){var p=this.getCurrentSketch();this.branch=p?g.getFirstPlayableBranchIndex(p):0},h.prototype.getBranchPoints=function(p){var r=[];if(p>=0)for(var o=0,m=this.getSampledPoints();o<m.length;o++){var b=m[o];b.branch===p&&r.push(b)}return r},h.prototype.resetTracePoint=function(){this.drawTrace(this.getCurrentPoint())},h.prototype.drawTrace=function(p){var r=this.getCurrentSketch();if(p&&r){var o=r.branches[this.branch];if(o&&o.graphMode!==n.XYPOINT){var m={x:p.x,y:p.y},b={branchInfo:{branch:p.branch,id:r.id,sketch:r},pt:m};d.isEqual(b,this.grapher.traceLayer.getTraceInfo())||(this.grapher.traceLayer.setTraceInfo(b),this.grapher.redrawAllLayers())}}},h.prototype.moveToOrigin=function(){var p=this.getCurrentSketch();if(p&&g.canPlaySketch(p)){var r=p.branches[this.branch];if(g.canPlayBranch(r)){var o=r.graphMode;if(o===n.Y)this.setIndependent("x",0);else if(o===n.X)this.setIndependent("y",0);else if(o===n.XYPOINT){var m=this.getSortedPOI()[0];this.setIndependent("x",m?m.x:0)}}}},h.prototype.getCurrentSketch=function(){var p,r=this.getSelectedItem();if(r){var o=this.audiograph.getFocusedCell();p=r.type==="table"&&o?this.getGraphSketchForTableCell(r,o):this.grapher.getGraphSketch(r.id)}return p},h.prototype.getFirstTraceableSketch=function(p){for(var r,o=this.controller.getItemCount(),m=this.controller.shouldAudioTraceReverseExpressions(),b=0;b<o;b++){var E=m?o-1-b:b,M=this.controller.getItemModelByIndex(E);if(M&&this.canTrace(M)){var D=m?this.prevTableColumn(M):this.nextTableColumn(M);if(D?(this.audiograph.setFocusedCell(D),r=this.getGraphSketchForTableCell(M,D)):r=this.grapher.getGraphSketch(M.id),r){p&&p.selectAssociatedExpression&&this.controller.dispatch({type:"set-selected-index",index:E});break}}}return r},h.prototype.canTrace=function(p){if(p.type==="image")return!1;if("shouldGraph"in p){var r=this.grapher.getGraphSketch(p.id);return!!r&&g.canPlaySketch(r)}return!1},h.prototype.getTraceableExpressionCount=function(){for(var p=0,r=this.controller.getItemCount(),o=0;o<r;o++){var m=this.controller.getItemModelByIndex(o);m&&this.canTrace(m)&&p++}return p},h.prototype.computeStepSizes=function(){var p=this.grapher.getProjection().viewport;if(p){this.viewport=p;var r=p.xmin,o=p.xmax;this.xstep=Math.abs(o-r)/100,this.xscale=o-r;var m=p.ymin,b=p.ymax;this.ystep=Math.abs(b-m)/100,this.yscale=b-m;var E=this.getCurrentSketch();if(E&&g.canPlaySketch(E)){var M=E.branches[this.branch];if(g.canPlayBranch(M)){var D=M.graphMode;if(D===n.Y)this.independent<r?this.independent=r:this.independent>o&&(this.independent=o);else if(D===n.X)this.independent<m?this.independent=m:this.independent>b&&(this.independent=b);else if(D===n.XYPOINT){var A=void 0,v=void 0;this.independent<r?(v=this.getSortedPOI()[0],this.independent=v&&v.x!==void 0?v.x:0):this.independent>o&&(A=this.getSortedPOI(),v=A[A.length-1],this.independent=v&&v.x!==void 0?v.x:0)}}}}},h.prototype.getPoint=function(p,r){var o,m=this.getCurrentSketch();if(!m||!g.canPlaySketch(m))return o;var b,E,M,D=0,A=m.branches[p];if(A){var v=g.getReportedBranch(m,p);return"compiled"in A&&A.compiled&&(M=A.compiled.fn),E=A.graphMode,E===n.Y?(b=this.getInterveningPOIs(r,r+this.xstep,p,E)[0],b&&b.x===r&&b.branch===p||(b=void 0,D=M?M(r):0),b?o={x:b.x,y:b.y,type:b.type,typeChain:b.typeChain,branch:b.branch,reportedBranch:v,graphMode:E,intersects:b.intersects}:M&&(o={x:r,y:D,branch:p,reportedBranch:v,graphMode:E})):E===n.X?(b=this.getInterveningPOIs(r,r+this.ystep,p,E)[0],b&&b.y===r&&b.branch===p||(b=void 0,D=M?M(r):0),b?o={x:b.x,y:b.y,type:b.type,typeChain:b.typeChain,branch:b.branch,reportedBranch:v,graphMode:E,intersects:b.intersects}:M&&(o={y:r,x:D,branch:p,reportedBranch:v,graphMode:E})):E===n.XYPOINT&&(b=this.getInterveningPOIs(r,r+this.xstep,p,E)[0],o=b&&b.x===r&&b.branch===p?{x:b.x,y:b.y,type:b.type,typeChain:b.typeChain,branch:b.branch,reportedBranch:v,graphMode:E,intersects:b.intersects}:{x:r,y:NaN,branch:p,reportedBranch:v,graphMode:E}),o}},h.prototype.getSampledPoints=function(){return this.sampledPoints.length===0&&this.updateSampledPoints(),this.sampledPoints},h.prototype.updateSampledPoints=function(){var p=this.getCurrentSketch();if(p&&g.canPlaySketch(p)){for(var r=[],o=0;o<p.branches.length;o++){var m=p.branches[o];if(g.canPlayBranch(m)){var b=m.graphMode,E=0,M=0,D=0,A=[];if(b===n.Y||b===n.XYPOINT?(E=this.viewport.xmin,M=this.viewport.xmax,D=this.xstep):b===n.X&&(E=this.viewport.ymin,M=this.viewport.ymax,D=this.ystep),E!==0||M!==0||D!==0){for(var v=0;i.value(E+v*D).value<=M;v++){var k=i.value(E+v*D).value,J=this.getInterveningPOIs(k,k+D,o,b);if(J.length>0)A.push.apply(A,J);else{var X=this.getPoint(o,k);X&&A.push(X)}}r.push.apply(r,this.removeDuplicates(A,b))}}}this.sampledPoints=r}},h.prototype.getCurrentPoint=function(){return this.currentPoint||this.updateCurrentPoint(),this.currentPoint},h.prototype.updateCurrentPoint=function(p){if(p){this.currentPoint=p;var r=p.graphMode;r===n.Y||r===n.XYPOINT?this.independent=p.x!==void 0?p.x:0:r===n.X&&(this.independent=p.y!==void 0?p.y:0),this.branch=p.branch}else this.currentPoint=this.getPoint(this.branch,this.independent)},h.prototype.prevPoint=function(){this.moveToPoint(-1)},h.prototype.nextPoint=function(){this.moveToPoint(1)},h.prototype.firstPoint=function(){var p=this.getSampledPoints();p.length>0&&this.updateCurrentPoint(p[0])},h.prototype.lastPoint=function(){var p=this.getSampledPoints();p.length>0&&this.updateCurrentPoint(p[p.length-1])},h.prototype.moveToPoint=function(p){var r=this.getCurrentPoint();if(r){if(r.graphMode===n.XYPOINT)return void this.moveToPOI(p);var o=this.getSampledPoints(),m=this.getPointIndex(o,r);if(m!==-1){var b=m+p;b<=0?(b=0,u.queue(this.controller.t("First point"))):b>=o.length-1&&(b=o.length-1,u.queue(this.controller.t("Last point")));var E=o[b];this.updateCurrentPoint(E)}}},h.prototype.prevPOI=function(){this.moveToPOI(-1)},h.prototype.nextPOI=function(){this.moveToPOI(1)},h.prototype.getSortedPOI=function(){return this.pois&&this.pois.length!==0||this.updatePOI(),this.pois},h.prototype.updatePOI=function(){var p,r=[],o=[],m=this.getCurrentSketch();if(m&&g.canPlaySketch(m)){for(var b=0;b<m.branches.length;b++){var E=m.branches[b];if(E){var M=g.getReportedBranch(m,b),D=E.graphMode;if(o=[],p=m.getBranchPOI(b),p.length>0){D===n.Y||D===n.XYPOINT?o=l.sortBy(p,"x"):D===n.X&&(o=l.sortBy(p,"y"));for(var A=[],v=0,k=o;v<k.length;v++){var J=k[v];A.push(f(J,D,M))}r.push.apply(r,this.removeDuplicates(A,D))}}}this.pois=r}},h.prototype.removeDuplicates=function(p,r){for(var o=[],m=0,b=p;m<b.length;m++){var E=b[m];if(E=t.__assign({},E),E.graphMode=r,o.length!==0){var M=o[o.length-1];i.value(M.x).value===i.value(E.x).value&&i.value(M.y).value===i.value(E.y).value&&M.branch===E.branch?(M.typeChain||(M.typeChain=M.type!==void 0?[M.type]:[]),E.type!==void 0&&M.typeChain.indexOf(E.type)===-1&&M.typeChain.push(E.type),E.type===s.INTERSECTION&&E.intersects&&M.intersects===void 0&&(M.intersects=E.intersects)):o.push(E)}else o.push(E)}return o},h.prototype.getInterveningPOIs=function(p,r,o,m){for(var b=[],E=this.getSortedPOI(),M=NaN,D=0,A=E;D<A.length;D++){var v=A[D];v&&(m!==n.Y&&m!==n.XYPOINT||isNaN(v.x)?m!==n.X||isNaN(v.y)||(M=v.y):M=v.x,v.branch===o&&!isNaN(M)&&(p<=M&&M<r||r<=M&&M<p)&&b.push(v))}return p>r?b.reverse():b},h.prototype.setIndependent=function(p,r){for(var o=this.getSampledPoints(),m=0,b=o;m<b.length;m++){var E=b[m];if(E&&E.hasOwnProperty(p)&&E[p]===r){if(p==="x")return this.independent=E.x!==void 0?E.x:0,void this.updateCurrentPoint();if(p==="y")return this.independent=E.y!==void 0?E.y:0,void this.updateCurrentPoint()}}var M=!0;if(o.length>0){var D=Math.floor((o.length-1)/2),A=o[D];A&&(p==="x"?(this.independent=A.x!==void 0?A.x:0,M=!1):p==="y"&&(this.independent=A.y!==void 0?A.y:0,M=!1))}M&&(this.independent=0),this.resetToFirstBranch(),this.updateCurrentPoint()},h.prototype.moveToPOI=function(p){var r=this.getCurrentPoint();if(r){var o=this.getSampledPoints(),m=this.getPointIndex(o,r);if(m!==-1){for(var b=r.graphMode,E=-1,M=p===1?o.length-1:0,D=m;D!==M+p;D+=p){var A=o[D];if(((b===n.Y||b===n.XYPOINT)&&r.x!==A.x||b===n.X&&r.y!==A.y)&&A.type!==void 0){E=D;break}}E===-1?u.queue(this.controller.t("No more points of interest")):this.updateCurrentPoint(o[E])}}},h.prototype.getPointIndex=function(p,r){var o=-1;if(p.length>0&&r)for(var m=r.graphMode,b=0;b<p.length;b++){var E=p[b];if(((m===n.Y||m===n.XYPOINT)&&E.x===r.x||m===n.X&&E.y===r.y)&&E.branch===r.branch){o=b;break}}return o},h.prototype.prevCurve=function(){this.controller.shouldAudioTraceReverseExpressions()?this.curveDown():this.curveUp()},h.prototype.nextCurve=function(){this.controller.shouldAudioTraceReverseExpressions()?this.curveUp():this.curveDown()},h.prototype.curveUp=function(){var p=this.getSelectedItem();if(p){var r=this.prevTableColumn(p);if(r)this.audiograph.setFocusedCell(r);else{var o=p.index,m=this.findPrevTraceableIndex(o);if(m!==-1){var b=this.controller.getItemModelByIndex(m);b&&this.controller.dispatch({type:"set-selected-id",id:b.id})}}(r||this.getSelectedItem()!==p)&&this.audiograph.enterAudioTrace()}},h.prototype.curveDown=function(){var p=this.getSelectedItem();if(p){var r=this.nextTableColumn(p);if(r)this.audiograph.setFocusedCell(r);else{var o=p.index,m=this.findNextTraceableIndex(o);if(m!==-1){var b=this.controller.getItemModelByIndex(m);b&&this.controller.dispatch({type:"set-selected-id",id:b.id})}}(r||this.getSelectedItem()!==p)&&this.audiograph.enterAudioTrace()}},h.prototype.findPrevTraceableIndex=function(p){var r;do{p--,r=this.controller.getItemModelByIndex(p);var o=r&&this.prevTableColumn(r);if(o)return this.audiograph.setFocusedCell(o),p}while(r&&!this.canTrace(r));return r?p:-1},h.prototype.findNextTraceableIndex=function(p){var r;do{p++,r=this.controller.getItemModelByIndex(p);var o=r&&this.nextTableColumn(r);if(o)return this.audiograph.setFocusedCell(o),p}while(r&&!this.canTrace(r));return r?p:-1},h.prototype.prevTableColumn=function(p){return this.tableColumn(p,-1)},h.prototype.nextTableColumn=function(p){return this.tableColumn(p,1)},h.prototype.tableColumn=function(p,r){var o;if(p&&p.type==="table"){var m=this.audiograph.getFocusedCell(),b=void 0,E=void 0,M=void 0;r===-1?(b=m?Math.max(m.location.column-1,0):NaN,E=m&&m.tableId===p.id&&!isNaN(b)?b:p.columnModels.length-1,M=0):(b=m?Math.min(m.location.column+1,p.columnModels.length-1):NaN,E=m&&m.tableId===p.id&&!isNaN(b)?b:0,M=p.columnModels.length-1);var D=(M-E)/r;if(isFinite(D)&&D>=0)for(var A=E;A!==M;A+=r){var v=p.columnModels[A];if(v){var k=this.grapher.getGraphSketch(v.id);if(k){o={tableId:p.id,location:{column:A,row:0}};break}}}}return o},h.prototype.getGraphSketchForTableCell=function(p,r){if(p&&p.type==="table"&&r){var o=p.columnModels[r.location.column];return o?this.grapher.getGraphSketch(o.id):void 0}},h.prototype.getXScale=function(){return this.xscale},h.prototype.getYScale=function(){return this.yscale},h.prototype.getSelectedItem=function(){var p=this.controller.getSelectedItem();return p&&p.type==="folder"?this.controller.getItemModel(x.getSelectedId(p)):p},h})();c.default=y}),P("graphing/audiograph",["require","exports","tslib","browser","keys","lib/aria","graphing/audiographnavigator","graphing/tonegenerator","core/types/graphmode","core/lib/label","core/math/poi-type","graphing-calc/models/table","expressions/colors","lib/mathspeak"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h){Object.defineProperty(c,"__esModule",{value:!0});var p=(function(){function r(o,m){var b=this;this.grapher=m,this.controller=o,this.audioTraceActive=!1,this.wasFocusInExpressionsView=!1,this.focusedCell=void 0,this.sliderTraceActive=!1,this.sliderIndex=0,this.sliderArray=[],this.lastSpokenBranch=1,this.agNavigator=new i.default(o,this,this.grapher),this.tonegen=new s.default({audioPointMove:function(E,M){b.agNavigator.drawTrace(b.agNavigator.getPoint(E,M))},animationFinished:function(){b.recomputePoints()}}),this.tonegen.suspend()}return r.prototype.remove=function(){},r.prototype.handleKeydown=function(o){var m=o.altKey||o.metaKey,b=o.altKey&&!o.metaKey&&!o.ctrlKey&&!o.shiftKey,E=o.ctrlKey&&!o.metaKey&&!o.altKey,M=t.IS_APPLE?E:m,D=M&&(o.which===61||o.which===187),A=M&&!o.shiftKey&&(o.which===173||o.which===189),v=M&&!o.shiftKey&&l.lookupChar(o)==="0";b&&l.lookupChar(o)==="S"?this.agNavigator.getSelectedItem()&&(this.audioTraceActive||this.isFocusInExpressionsView())&&(o.preventDefault(),o.stopPropagation(),this.describeGraph()):b&&l.lookupChar(o)==="T"?(o.preventDefault(),o.stopPropagation(),this.toggleAudioTrace()):D?(o.preventDefault(),o.stopPropagation(),this.zoom("in")):A?(o.preventDefault(),o.stopPropagation(),this.zoom("out")):v?(o.preventDefault(),o.stopPropagation(),this.zoom("default")):this.audioTraceActive&&(this.sliderTraceActive?this.sliderTraceKeydown(o):this.audioTraceKeydown(o))},r.prototype.sliderTraceKeydown=function(o){var m=o.altKey||o.metaKey,b=!m&&!o.ctrlKey&&!o.shiftKey;b&&l.lookup(o)===l.LEFT||l.lookupChar(o)==="J"?(o.preventDefault(),o.stopPropagation(),this.decrementSliderValue()):b&&l.lookup(o)===l.RIGHT||l.lookupChar(o)==="L"?(o.preventDefault(),o.stopPropagation(),this.incrementSliderValue()):b&&l.lookup(o)===l.PAGEDOWN?(o.preventDefault(),o.stopPropagation(),this.decrementBigSliderValue()):b&&l.lookup(o)===l.PAGEUP?(o.preventDefault(),o.stopPropagation(),this.incrementBigSliderValue()):m||l.lookup(o)!==l.DOWN&&(o.shiftKey||l.lookup(o)!==l.TAB)&&l.lookupChar(o)!=="K"?!m&&(l.lookup(o)===l.UP||o.shiftKey&&l.lookup(o)===l.TAB||l.lookupChar(o)==="I")?(o.preventDefault(),o.stopPropagation(),this.prevSlider()):b&&l.lookup(o)===l.HOME||l.lookupChar(o)==="U"?(o.preventDefault(),o.stopPropagation(),this.sliderMin()):b&&l.lookup(o)===l.END||l.lookupChar(o)==="N"?(o.preventDefault(),o.stopPropagation(),this.sliderMax()):(this.stopAnimations(),this.audioTraceKeydown(o)):(o.preventDefault(),o.stopPropagation(),this.nextSlider())},r.prototype.audioTraceKeydown=function(o){var m=this,b=o.altKey||o.metaKey,E=b&&!o.ctrlKey&&!o.shiftKey,M=!b&&!o.ctrlKey&&!o.shiftKey,D=l.lookupChar(o);if(l.lookup(o)===l.UP&&E)o.preventDefault(),o.stopPropagation(),this.agNavigator.prevCurve();else if(l.lookup(o)===l.DOWN&&E)o.preventDefault(),o.stopPropagation(),this.agNavigator.nextCurve();else if(M&&l.lookup(o)===l.LEFT||l.lookup(o)===l.UP||D==="J")o.preventDefault(),o.stopPropagation(),this.agNavigator.prevPoint(),this.reportAudioTrace();else if(M&&l.lookup(o)===l.RIGHT||l.lookup(o)===l.DOWN||D==="L")o.preventDefault(),o.stopPropagation(),this.agNavigator.nextPoint(),this.reportAudioTrace();else if(b||l.lookup(o)!==l.PAGEDOWN&&(o.shiftKey||l.lookup(o)!==l.TAB)&&D!=="I")if(!b&&(l.lookup(o)===l.PAGEUP||o.shiftKey&&l.lookup(o)===l.TAB||D==="K"))o.preventDefault(),o.stopPropagation(),this.agNavigator.prevPOI(),this.reportAudioTrace();else if(M&&l.lookup(o)===l.HOME||D==="U")o.preventDefault(),o.stopPropagation(),this.agNavigator.firstPoint(),this.reportAudioTrace();else if(M&&l.lookup(o)===l.END||D==="N")o.preventDefault(),o.stopPropagation(),this.agNavigator.lastPoint(),this.reportAudioTrace();else if(M&&D==="X")o.preventDefault(),o.stopPropagation(),this.reportAudioTrace("x");else if(M&&D==="P")o.preventDefault(),o.stopPropagation(),this.queuePOICount(),n.alert();else if(M&&D==="Y")o.preventDefault(),o.stopPropagation(),this.reportAudioTrace("y");else if(M&&D==="T")o.preventDefault(),o.stopPropagation(),this.reportAudioTrace("type");else if(M&&D==="B")o.preventDefault(),o.stopPropagation(),this.reportAudioTrace("branch");else if(M&&D==="O")o.preventDefault(),o.stopPropagation(),this.agNavigator.moveToOrigin(),this.reportAudioTrace();else if(M&&D==="H")if(o.preventDefault(),o.stopPropagation(),this.tonegen.getPlaybackSupported()){this.tonegen.stop();var A=this.agNavigator.getCurrentSketch();A&&s.canPlaySketch(A)?(n.alert(this.controller.t("Playing graph.")),clearTimeout(this.playTimeout),this.playTimeout=setTimeout(function(){return m.tonegen.playSketch(A,m.grapher.getCurrentViewport())},500)):n.alert(this.controller.t("Unable to audio trace this expression."))}else n.alert(this.controller.t("Unable to play audio."));else if(M&&typeof D=="string"&&D>="0"&&D<="9"){o.preventDefault(),o.stopPropagation(),this.tonegen.stop();var v=this.agNavigator.getCurrentSketch();if(v){var k=void 0;k=o.which===48?9:o.which-49;for(var J=k,X=-1,te=0;te<v.branches.length;te++)if(s.canPlayBranch(v.branches[te])&&(J-=1),J<0){X=te;break}X>=0?this.tonegen.getPlaybackSupported()?(n.alert(this.controller.t("Branch __branch__",{branch:k+1})),clearTimeout(this.playTimeout),this.playTimeout=setTimeout(function(){return m.tonegen.playBranchByIndex(v,X,m.grapher.getCurrentViewport())},500)):n.alert(this.controller.t("Unable to play audio.")):n.alert(this.controller.t("Branch __branch__ does not exist.",{branch:k+1}))}else n.alert(this.controller.t("No graph selected."))}else if(b&&typeof D=="string"&&D>="1"&&D<="5")o.preventDefault(),o.stopPropagation(),this.adjustPlaybackSpeed(D);else if(o.altKey||o.ctrlKey||o.metaKey||D!=="V")if(M&&D==="A")o.preventDefault(),o.stopPropagation(),this.queueAnimatingPoints(!0),n.alert();else if(M&&D==="S"&&this.controller.isListEnabled())o.preventDefault(),o.stopPropagation(),this.toggleSliderTrace();else if(M&&D==="C"){o.preventDefault(),o.stopPropagation();var H=this.agNavigator.getCurrentSketch();H?n.queue(y.getColorName(this.controller,H.color)):n.queue("unknown"),n.alert()}else M&&this.exitAudioTrace();else o.preventDefault(),o.stopPropagation(),o.shiftKey?this.adjustVolume("down"):this.adjustVolume("up");else o.preventDefault(),o.stopPropagation(),this.agNavigator.nextPOI(),this.reportAudioTrace()},r.prototype.describeGraph=function(){var o=this.agNavigator.getCurrentSketch();if(o){var m=s.getReportedBranch(o,o.branches.length-1);m>1&&n.queue(this.controller.t("Branches: __branches__.",{branches:m}));var b=this.agNavigator.getSortedPOI();if(n.queue(this.controller.t("Points of interest: __poiCount__.",{poiCount:b.length})),b.length>0)for(var E=0;E<b.length;E++)this.queueCoordinates(b[E])}else n.queue(this.controller.t("No graph information available."));n.alert()},r.prototype.queueCoordinates=function(o,m,b){if(b===void 0&&(b=!1),o){var E=this.agNavigator.getCurrentSketch();(o.hasOwnProperty("branch")&&E&&E.branches.length>1&&this.lastSpokenBranch!==o.reportedBranch||m==="branch")&&n.queue(this.controller.t("Branch __branch__.",{branch:o.reportedBranch})),this.lastSpokenBranch=o.reportedBranch?o.reportedBranch:o.branch+1,o.hasOwnProperty("type")&&!m?n.queue(this.controller.t("__type__ at",{type:this.describePOI(o)})):m==="type"&&n.queue(this.describePOI(o)),m&&m!=="x"||n.queue(this.controller.t("X: __x__.",{x:d.value(o.x,this.agNavigator.getXScale()).ariaString})),m&&m!=="y"||n.queue(this.controller.t("Y: __y__.",{y:d.value(o.y,this.agNavigator.getYScale()).ariaString})),b&&n.alert()}},r.prototype.describePOI=function(o){if(o.typeChain){for(var m=[],b=0;b<o.typeChain.length;b++)m.push(this.poiTypeToText(o,b));return m.join(", ")}return this.poiTypeToText(o)},r.prototype.poiTypeToText=function(o,m){switch(m&&o.typeChain?o.typeChain[m]:o.type){case u.INTERSECTION:var b=this.getIntersectingCurves(o);return b!==""?this.controller.t("Intersection with __curves__",{curves:b}):this.controller.t("Intersection");case u.ZERO:return this.controller.t("Zero");case u.INTERCEPT:return this.controller.t("Intercept");case u.EXTREMUM:return this.controller.t("Extremum");case u.EDGE:return this.controller.t("Edge");case u.DEFINITION:return this.controller.t("Point");case u.TRACE:return this.controller.t("Trace");case u.LABEL:return this.controller.t("Label");default:return this.controller.t("Not a P O I")}},r.prototype.getIntersectingCurves=function(o){return o&&o.intersects?this.getExpressionAriaLabel(o.intersects):""},r.prototype.getExpressionAriaLabel=function(o){var m=this.controller.getItemModel(o);return m?m.type==="expression"&&m.label?h.getMathspeakFromText(m.label):this.controller.isItemSecret(m.id)?this.controller.t("Secret expression __index__",{index:m.secretIndex}):m.type==="table"&&this.focusedCell?this.controller.t("Expression __index__ column __column__",{index:m.displayIndex,column:this.focusedCell.location.column+1}):this.controller.t("Expression __index__",{index:m.displayIndex}):""},r.prototype.exitAudioTrace=function(o){if(this.audioTraceActive){if(this.audioTraceActive=!1,o||(o=this.controller.t("Audio trace off.")),this.controller.dispatch({type:"toast/close"}),this.wasFocusInExpressionsView){var m=this.agNavigator.getSelectedItem();m&&this.controller.isItemSelectable(m.id)||(m=this.controller.getFirstFullyVisibleItem()),m&&this.controller.isItemSelectable(m.id)&&this.controller.dispatch({type:"move-focus-to-item",id:m.id,where:m.type==="table"&&this.focusedCell!==void 0?x.__assign({location:"cell"},this.focusedCell.location):"end"})}this.wasFocusInExpressionsView=!1,this.focusedCell=void 0,this.stopAnimations(),this.sliderTraceActive=!1,this.sliderIndex=0,this.tonegen.stop(),this.tonegen.suspend(),this.agNavigator.reset(),this.lastSpokenBranch=1,this.grapher.traceLayer.setTraceInfo(void 0),this.grapher.redrawAllLayers(),n.alert(o),this.resumeAnimations()}},r.prototype.isFocusInExpressionsView=function(){return!!this.controller.getFocusedItem()},r.prototype.enterAudioTrace=function(){var o=this,m=this.agNavigator.getSelectedItem(),b=m&&m.type!=="table"&&!this.agNavigator.canTrace(m)?this.getExpressionAriaLabel(m.id):void 0,E=!1;this.audioTraceActive||(this.wasFocusInExpressionsView=this.isFocusInExpressionsView(),m&&b&&n.queue(this.controller.t("__expression__ cannot be audio traced.",{expression:b})),E=!!b||!this.wasFocusInExpressionsView);var M;if(E)M=this.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!0});else if(!b){if(m&&m.type==="expression"&&m.formula&&m.formula.error)return this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("No graph to trace.")}});if(m&&m.type==="table"){var D=f.getSelectedCell(m);this.focusedCell&&this.focusedCell.tableId===m.id&&(!D||D.column===this.focusedCell.location.column&&D.row===this.focusedCell.location.row)||(this.focusedCell=D!==void 0?{tableId:m.id,location:D}:void 0)}else this.focusedCell=void 0;M=this.agNavigator.getCurrentSketch()}if(!M)return this.agNavigator.reset(),this.lastSpokenBranch=1,this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("No graph to trace.")}});var A=M.branches[0].graphMode;return A===g.IMPLICIT?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("Sorry, but I can't trace implicit curves yet.")}})):A===g.PARAMETRIC?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("Sorry, but I can't trace parametric curves yet.")}})):A===g.POLAR?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("Sorry, but I can't trace polar curves yet.")}})):(this.agNavigator.reset(),this.agNavigator.computeStepSizes(),this.lastSpokenBranch=1,this.grapher.traceLayer.clearOpenedPOI(),this.grapher.redrawAllLayers(),this.audioTraceActive||(this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("Audio trace on."),noAria:!0,onHide:function(){return o.exitAudioTrace()},hideAfter:0}}),b&&M&&n.queue(this.controller.t("Tracing __expression__.",{expression:this.getExpressionAriaLabel(M.id)})),n.queue(this.controller.t("Audio trace on.")),this.pauseAnimations(),this.queueAnimatingPoints(!1),n.queue(this.controller.t("Use Arrow keys to navigate.")),this.tonegen.resume(),this.tonegen.getPlaybackSupported()&&n.queue(this.controller.t("To hear the graph, press H.")),this.agNavigator.getTraceableExpressionCount()>1&&(t.IS_APPLE?n.queue(this.controller.t("To move between expressions, press COMMAND+Up-Arrow or COMMAND+Down-Arrow.")):n.queue(this.controller.t("To move between expressions, press ALT+Up-Arrow or ALT+Down-Arrow."))),t.IS_APPLE?n.queue(this.controller.t("To disable audio trace, press OPTION+T.")):n.queue(this.controller.t("To disable audio trace, press ALT+T.")),this.wasFocusInExpressionsView&&this.controller.find$(".dcg-graph-outer").one("focusin",function(){setTimeout(function(){n.alert()},0)}).focus()),this.agNavigator.moveToOrigin(),n.queue(this.getExpressionAriaLabel(M.id)),this.reportAudioTrace(),this.wasFocusInExpressionsView||n.alert(),void(this.audioTraceActive=!0))},r.prototype.checkIfSelectedItemChanged=function(o){this.lastSelectedId!==o&&(this.lastSelectedId=o,this.audioTraceActive&&(o?(n.queue(this.getExpressionAriaLabel(o)),this.exitSliderTrace(),this.agNavigator.updatePOI(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),n.alert()):this.exitAudioTrace()))},r.prototype.pauseAnimations=function(){var o=this;this.sliderArray.length=0,this.controller.getAllModelsWithSliders().forEach(function(m){m.slider.isPlaying&&(o.controller.dispatch({type:"set-slider-isplaying",id:m.id,isPlaying:!1}),o.sliderArray.push(m))})},r.prototype.resumeAnimations=function(){if(this.sliderArray.length!==0){for(var o=0;o<this.sliderArray.length;o++){var m=this.sliderArray[o];m.slider.isPlaying!==!0&&this.controller.dispatch({type:"set-slider-isplaying",id:m.id,isPlaying:!0})}this.sliderArray.length=0}},r.prototype.stopAnimations=function(){var o=this;this.controller.getAllModelsWithSliders().forEach(function(m){m.slider.isPlaying&&o.controller.dispatch({type:"set-slider-isplaying",id:m.id,isPlaying:!1})})},r.prototype.getAnimatingVars=function(){for(var o=[],m=0;m<this.sliderArray.length;m++)o.push('"'+this.sliderArray[m].dependent+'"');return o},r.prototype.hasActiveSliders=function(){for(var o=this.controller.getAllModelsWithSliders(),m=0;m<o.length;m++)if(o[m].slider.isPlaying)return!0;return!1},r.prototype.queueAnimatingPoints=function(o){this.sliderArray.length===1?n.queue(this.controller.t("One animating slider was paused.")):this.sliderArray.length>1?n.queue(this.controller.t("__sliders__ animating sliders were paused.",{sliders:this.sliderArray.length})):o&&n.queue(this.controller.t("No animating sliders were paused."))},r.prototype.queueSliderLatex=function(){this.hasActiveSliders()||this.tonegen.stop();var o=this.getSelectedSlider();o?n.queue(o.latex):n.queue(this.controller.t("Unable to determine slider value"))},r.prototype.getSelectedSlider=function(){var o=this.controller.getAllModelsWithSliders();return this.sliderIndex<=o.length-1?o[this.sliderIndex]:null},r.prototype.incrementSliderValue=function(){this.adjustSlider("up")},r.prototype.decrementSliderValue=function(){this.adjustSlider("down")},r.prototype.incrementBigSliderValue=function(){this.adjustSlider("bigup")},r.prototype.decrementBigSliderValue=function(){this.adjustSlider("bigdown")},r.prototype.nextSlider=function(){this.adjustSlider("next")},r.prototype.prevSlider=function(){this.adjustSlider("prev")},r.prototype.sliderMin=function(){this.adjustSlider("min")},r.prototype.sliderMax=function(){this.adjustSlider("max")},r.prototype.adjustSlider=function(o){var m=this.getSelectedSlider();if(!m)return void n.queue(this.controller.t("Unable to adjust slider"));var b=m.latex,E=this.controller.getAllModelsWithSliders().length;switch(o){case"up":case"down":case"bigup":case"bigdown":case"min":case"max":this.controller.dispatch({type:"adjust-slider-by-keyboard",id:m.id,adjustment:o}),this.queueSliderLatex(),n.alert();break;case"next":return this.sliderIndex++,this.sliderIndex>=E&&(n.queue(this.controller.t("Last slider.")),this.sliderIndex=E-1),this.queueSliderLatex(),void n.alert();case"prev":return this.sliderIndex--,this.sliderIndex<0&&(n.queue(this.controller.t("First slider.")),this.sliderIndex=0),this.queueSliderLatex(),void n.alert()}m.slider.isPlaying||b===m.latex||(this.queueSliderLatex(),n.alert())},r.prototype.toggleAudioTrace=function(){this.audioTraceActive?this.exitAudioTrace():this.enterAudioTrace()},r.prototype.toggleSliderTrace=function(){this.sliderTraceActive?this.exitSliderTrace():this.enterSliderTrace()},r.prototype.enterSliderTrace=function(){this.sliderTraceActive||(this.sliderIndex=0,this.controller.getAllModelsWithSliders().length!==0?(n.queue(this.controller.t("Slider trace on.")),this.queueSliderLatex(),this.sliderTraceActive=!0):(n.queue(this.controller.t("No sliders to trace.")),this.sliderTraceActive=!1),n.alert())},r.prototype.exitSliderTrace=function(){this.sliderTraceActive&&(n.queue(this.controller.t("Slider trace off.")),this.sliderTraceActive=!1,this.sliderIndex=0,n.alert())},r.prototype.recomputePoints=function(){this.audioTraceActive&&(this.tonegen.isAnimating()||(this.agNavigator.updatePOI(),this.agNavigator.updateSampledPoints(),this.agNavigator.updateCurrentPoint(),this.agNavigator.resetTracePoint(),this.agNavigator.computeStepSizes()))},r.prototype.queuePOICount=function(){var o=this.agNavigator.getCurrentSketch(),m=o?o.getPOI().length:0;n.queue(this.controller.t("Points of interest, __x__.",{x:m}))},r.prototype.reportAudioTrace=function(o,m){var b=this.agNavigator.getCurrentPoint();if(b&&(o||(m||this.tonegen.stop(),this.tonegen.playPoint(b,this.grapher.getCurrentViewport())),!m)){this.queueCoordinates(b,o);var E=o?0:100;setTimeout(function(){n.alert()},E)}},r.prototype.adjustPlaybackSpeed=function(o){switch(o){case"1":return this.tonegen.setAudioSpeed(150),n.alert(this.controller.t("Graph playback very slow"));case"2":return this.tonegen.setAudioSpeed(100),n.alert(this.controller.t("Graph playback slow"));case"3":return this.tonegen.setAudioSpeed(50),n.alert(this.controller.t("Graph playback normal"));case"4":return this.tonegen.setAudioSpeed(30),n.alert(this.controller.t("Graph playback fast"));case"5":return this.tonegen.setAudioSpeed(16),n.alert(this.controller.t("Graph playback very fast"));default:return this.tonegen.setAudioSpeed(50),n.alert(this.controller.t("Graph playback normal"))}},r.prototype.adjustVolume=function(o){var m=this.tonegen.getAudioVolume(),b=o==="up"?Math.min(100,Math.round(100*(m+.1))):Math.max(0,Math.round(100*(m-.1)));this.tonegen.setAudioVolume(b/100),n.alert(this.controller.t("Volume __volume__ percent",{volume:b}))},r.prototype.zoom=function(o){this.grapher.viewportController.zoom(o)},r.prototype.getFocusedCell=function(){return this.focusedCell},r.prototype.setFocusedCell=function(o){this.focusedCell=o},r.prototype.getAudioTraceActive=function(){return this.audioTraceActive},r})();c.default=p}),P("graphing/canvas-braille",["require","exports","tslib","./projection","./screen","core/graphing-calc/json/graph-settings","abraham"],function(S,c,x,t,l,n,i){function s(le,me,Ae,Be,Fe){var Le=le.dotSpacing,ze=1+Le,We=Fe.charCodeAt(0)-ae;1&We&&me.fillRect(Ae,Be,1,1),2&We&&me.fillRect(Ae,Be+ze,1,1),4&We&&me.fillRect(Ae,Be+2*ze,1,1),8&We&&me.fillRect(Ae+ze,Be,1,1),16&We&&me.fillRect(Ae+ze,Be+ze,1,1),32&We&&me.fillRect(Ae+ze,Be+2*ze,1,1)}function g(le,me){for(var Ae=me.x,Be=me.y,Fe=me.width,Le=me.height,ze=le.getImageData(Ae,Be,Fe,Le).data,We=3;We<ze.length;We+=4)if(ze[We]!==0)return!1;return!0}function d(le,me){for(var Ae=me.x,Be=me.y,Fe=me.width,Le=me.height,ze=le.getImageData(Ae,Be,Fe,Le).data,We=3;We<ze.length;We+=4)if(ze[We]===0)return!1;return!0}function u(le,me,Ae,Be,Fe){return g(me,p(le,Ae,Be,Fe))}function f(le,me,Ae,Be,Fe){for(var Le=le.dotSpacing,ze=3+2*Le,We=0;We<Fe.length;We++)s(le,me,Ae+ze*We,Be,Fe[We])}function y(le,me){var Ae=le.dotSpacing;return(2+Ae)*me.length+(1+Ae)*(me.length-1)}function h(le,me){return 3+2*le.dotSpacing}function p(le,me,Ae,Be){var Fe=le.cellPadding;return{x:me-Fe,y:Ae-Fe,width:y(le,Be)+2*Fe,height:h(le)+2*Fe}}function r(le,me){if(!le)return me;var Ae=Math.min(le.x,me.x),Be=Math.min(le.y,me.y);return{x:Ae,y:Be,width:Math.max(le.x+le.width,me.x+me.width)-Ae,height:Math.max(le.y+le.height,me.y+me.height)-Be}}function o(le,me,Ae){return Math.min(Math.max(le,me),Ae)}function m(le,me,Ae,Be,Fe){return{x:o(Ae,0,me.canvas.width-y(le,Fe)),y:o(Be,0,me.canvas.height-h(le))}}function b(le,me,Ae,Be,Fe){var Le=me.fillStyle;me.fillStyle="white";var ze=p(le,Ae,Be,Fe);me.fillRect(ze.x,ze.y,ze.width,ze.height),me.fillStyle="black",f(le,me,Ae,Be,Fe),me.fillStyle=Le}function E(le,me,Ae,Be){var Fe=le.cellPadding;return{x:Math.round(me-(y(le,Be)+Fe)),y:Ae}}function M(le){return le.replace(/\u283C(?!$)/g,"")}function D(le,me){var Ae=me==="nemeth"?i.latexToNemeth(le):i.latexToUeb(le);return Ae.isError?"":M(Ae.value)}function A(le,me){return me>=0?le*Math.pow(10,me):le/Math.pow(10,-me)}function v(le,me,Ae,Be){var Fe=Ae[0],Le=Ae[1],ze=Math.ceil(Math.log(Le-Fe)/Math.LN10)-1,We=ze,Z=5;e:for(var C=ze;ze-C<4;C--)for(var oe=0,ge=[5,2,1];oe<ge.length;oe++){var _e=ge[oe],De=A(_e,C),je=Math.floor(Fe/De)+1,Ie=Math.ceil(Le/De)-1,Oe=Math.abs(Be(De)-Be(0)),N=D(String(A(je*_e,C)),me),Pe=D(String(A(Ie*_e,C)),me);if(Oe<y(le,N)+y(le," ")||Oe<y(le,Pe)+y(le," ")||Ie-je>=15)break e;We=C,Z=_e}return{int:Z,exp:We}}function k(le,me,Ae){return v(le,me,[Ae.viewport.xmin,Ae.viewport.xmax],function(Be){return Ae.mapx(Be)})}function J(le,me,Ae){return Ae.viewport.isSquare(Ae.screen)?k(le,me,Ae):v(le,me,[Ae.viewport.ymin,Ae.viewport.ymax],function(Be){return Ae.mapy(Be)})}function X(le,me){for(var Ae=le.int,Be=le.exp,Fe=me[0],Le=me[1],ze=Math.ceil(Fe/A(Ae,Be)),We=Math.floor(Le/A(Ae,Be)),Z=[],C=ze;C<=We;C++)Z.push(A(C*Ae,Be));return Z}function te(le,me,Ae){return{x:X(k(le,me,Ae),[Ae.viewport.xmin,Ae.viewport.xmax]),y:X(J(le,me,Ae),[Ae.viewport.ymin,Ae.viewport.ymax])}}function H(le,me,Ae,Be,Fe){var Le,ze,We,Z,C,oe,ge,_e;if(Ae.margins!==void 0&&me!==void 0){var De=z(Be),je=Ae.margins,Ie=x.__assign({},me.settings),Oe=Ie.showGrid&&B(Be),N=!!Ie.showXAxis,Pe=!!Ie.showYAxis,Xe=!!Ie.xAxisNumbers,$e=Ie.xAxisArrowMode,ht=!!Ie.yAxisNumbers,ye=Ie.yAxisArrowMode,Ue=De.graphLineWidth,we={showGrid:!1,xAxisNumbers:!1,xAxisArrowMode:n.AxisArrowModes.NONE,yAxisNumbers:!1,yAxisArrowMode:n.AxisArrowModes.NONE,showXAxis:!1,showYAxis:!1,graphLineWidth:Ue,pointLineWidth:2.5,curveOpacity:1,globalCurveColor:"#000",disableFill:!0};for(var Te in we)me.settings[Te]=we[Te];var qe=le.width-je.right-je.left,He=le.height-je.top-je.bottom,Se=new l.Screen(qe,He),Ce=me.getProjection().viewport;me.settings.squareAxes&&(Ce=Ce.squareCrop(Se));var Re=new t.Projection(Se,Ce,me.settings),Ve=le.getContext("2d"),rt=document.createElement("canvas");rt.width=qe,rt.height=He;var at=rt.getContext("2d"),yt=document.createElement("canvas");yt.width=qe,yt.height=He;var Pt=yt.getContext("2d"),vt=document.createElement("canvas");vt.width=qe,vt.height=He;var At=vt.getContext("2d"),Ut=document.createElement("canvas");Ut.width=qe,Ut.height=He;var Dt=Ut.getContext("2d"),on=document.createElement("canvas");on.width=qe,on.height=He;var St=on.getContext("2d");if(Ve!==null&&Dt!==null&&at!==null&&At!==null&&St!==null&&Pt!==null){me.settings.disableFill=!0,me.screenshotToCanvas(Ut,{width:qe,height:He,targetPixelRatio:1,transparentBackground:!0}),me.settings.disableFill=!1,me.screenshotToCanvas(rt,{width:qe,height:He,targetPixelRatio:1,transparentBackground:!0}),Ve.fillStyle="white",Ve.fillRect(0,0,le.width,le.height);var Xt=Math.round(Re.mapx(0)),qt=Math.round(Re.mapy(0)),bn=Ie.xAxisLabel!==""?Ie.xAxisLabel.replace(/ /g,"\\ "):"x",Fn=Ie.yAxisLabel!==""?Ie.yAxisLabel.replace(/ /g,"\\ "):"y";if(N&&Re.coordsAreOnscreen(qe-6,qt-8,0)){var sn=x.__assign(x.__assign({},De),{cellPadding:De.cellPadding+1}),tn=2+2*h(sn),se=qe-2,he=qt-tn,U=D(bn,Fe);Le=E(sn,se,he,U),se=Le.x,he=Le.y,ze=m(sn,at,se,he,U),se=ze.x,he=ze.y,b(sn,St,se,he,U)}if(Pe&&Re.coordsAreOnscreen(Xt+4,1,0)){var sn=x.__assign(x.__assign({},De),{cellPadding:De.cellPadding+1}),se=Xt+4,he=1,U=D(Fn,Fe);We=m(sn,at,se,he,U),se=We.x,he=We.y,b(sn,St,se,he,U)}var V=te(De,Fe,Re),O=V.x,de=V.y;if(N){for(var j=void 0,xe=0,be=O;xe<be.length;xe++){var Ne=be[xe];if(Ne!==0||!Pe){var Ye=Math.round(Re.mapx(Ne));if(!(Ye<2||Ye>Re.screen.width-2)&&Xe){var tt=y(De,D("-1",Fe))-y(De,D("1",Fe)),ot=Ne<0?tt+1:1,se=Ye-ot,he=qt+4,U=D(""+Ne,Fe);Z=m(De,St,se,he,U),se=Z.x,he=Z.y,u(De,Dt,se,he,U)&&(b(De,St,se,he,U),j=r(j,p(De,se,he,U)))}}}if(De.embossPatternInequalities&&j){var ct={x:0,y:qt,width:qe,height:0};j=r(j,ct),At.fillStyle="white",At.fillRect(j.x,j.y,j.width,j.height)}}if(Pe){for(var j=void 0,ut=0,ft=de;ut<ft.length;ut++){var xt=ft[ut];if(xt!==0||!N){var _t=Math.round(Re.mapy(xt));if(!(_t<2||_t>Re.screen.height-2)){var tn=-Math.ceil(h(De)/2);if(ht){var se=Xt-4,he=_t+tn,U=D(""+xt,Fe);C=E(De,se,he,U),se=C.x,he=C.y,oe=m(De,St,se,he,U),se=oe.x,he=oe.y,u(De,Dt,se,he,U)&&(b(De,St,se,he,U),j=r(j,p(De,se,he,U)))}}}}if(De.embossPatternInequalities&&j){var ct={x:Xt,y:0,width:0,height:He};j=r(j,ct),At.fillStyle="white",At.fillRect(j.x,j.y,j.width,j.height)}}if(N&&Pe){var se=Xt-2,he=qt+2,U=D(Xe||ht?"0":"o",Fe);ge=E(De,se,he,U),se=ge.x,he=ge.y,Re.coordsAreOnscreen(se,he,0)&&(_e=m(De,St,se,he,U),se=_e.x,he=_e.y,u(De,Dt,se,he,U)&&b(De,St,se,he,U))}for(var It=0,kt=O;It<kt.length;It++){var Ne=kt[It],Ye=Math.round(Re.mapx(Ne));Ye<2||Ye>Re.screen.width-2||Pe&&Ne===0||Oe&&re(At,"white",Ye-1,0,He,3)}for(var Et=0,gt=de;Et<gt.length;Et++){var xt=gt[Et],_t=Math.round(Re.mapy(xt));_t<2||_t>Re.screen.height-2||N&&xt===0||Oe&&K(At,"white",_t-1,0,qe,3)}N&&K(At,"white",qt-3,0,qe,7),Pe&&re(At,"white",Xt-3,0,He,7);for(var Qt=0,Rt=O;Qt<Rt.length;Qt++){var Ne=Rt[Qt],Ye=Math.round(Re.mapx(Ne));Ye<2||Ye>Re.screen.width-2||Pe&&Ne===0||(Oe?re(At,$(Be),Ye,0,He):N&&re(At,$(Be),Ye,qt-3,qt+2))}for(var yn=0,Tt=de;yn<Tt.length;yn++){var xt=Tt[yn],_t=Math.round(Re.mapy(xt));_t<2||_t>Re.screen.height-2||N&&xt===0||(Oe?K(At,$(Be),_t,0,qe):Pe&&K(At,$(Be),_t,Xt-3,Xt+2))}if(N&&K(At,F(Be),qt,0,qe),Pe&&re(At,F(Be),Xt,0,He),ye!==n.AxisArrowModes.NONE&&(pe(At,F(Be),Xt,0),ye===n.AxisArrowModes.BOTH&&Q(At,F(Be),Xt,He-1)),$e!==n.AxisArrowModes.NONE&&(ue(At,F(Be),qe-1,qt),$e===n.AxisArrowModes.BOTH&&ie(At,F(Be),0,qt)),De.embossPatternInequalities)for(var se=0;se<qe;se+=6)for(var he=0;he<He;he+=6){var cn={x:se,y:he,width:3,height:3};d(at,cn)&&g(At,cn)&&g(Dt,cn)&&g(St,cn)&&ee(Pt,"black",se,he)}De.embossPatternInequalities||Ve.drawImage(rt,je.left,je.top),Ve.drawImage(vt,je.left,je.top),Ve.drawImage(Ut,je.left,je.top),Ve.drawImage(on,je.left,je.top),De.embossPatternInequalities&&Ve.drawImage(yt,je.left,je.top)}for(var Te in we)me.settings[Te]=Ie[Te]}}function z(le){if(le==="etc8"||le==="etc11")return{dotSpacing:0,cellPadding:1,graphLineWidth:1.75,embossPatternInequalities:!0};if(le==="vpmax8"||le==="vpmax11")return{dotSpacing:1,cellPadding:2,graphLineWidth:1,embossPatternInequalities:!1};var me=le;throw new Error("Unexpected embosser model "+me)}function B(le){if(le==="etc8"||le==="etc11")return!1;if(le==="vpmax8"||le==="vpmax11")return!0;var me=le;throw new Error("Unexpected embosser model "+me)}function F(le){switch(le){case"vpmax8":case"vpmax11":return"rgb(145, 145, 145)";case"etc8":case"etc11":return"rgb(0, 0, 0)";default:var me=le;throw new Error("Unexpected embosser model: "+me)}}function $(le){switch(le){case"vpmax8":case"vpmax11":return"rgb(219, 219, 219)";case"etc8":case"etc11":return"rgb(0, 0, 0)";default:var me=le;throw new Error("Unexpected embosser model: "+me)}}function re(le,me,Ae,Be,Fe,Le){Le===void 0&&(Le=1);var ze=le.fillStyle;le.fillStyle=me,le.fillRect(Ae-1,Be,Le,Fe-Be),le.fillStyle=ze}function K(le,me,Ae,Be,Fe,Le){Le===void 0&&(Le=1);var ze=le.fillStyle;le.fillStyle=me,le.fillRect(Be,Ae-1,Fe-Be,Le),le.fillStyle=ze}function ue(le,me,Ae,Be){var Fe=le.fillStyle;le.fillStyle=me;for(var Le=-2;Le<=2;Le++)le.fillRect(Ae-Math.abs(Le),Be-1+Le,1,1);le.fillStyle=Fe}function ie(le,me,Ae,Be){var Fe=le.fillStyle;le.fillStyle=me;for(var Le=-2;Le<=2;Le++)le.fillRect(Ae+Math.abs(Le),Be-1+Le,1,1);le.fillStyle=Fe}function Q(le,me,Ae,Be){var Fe=le.fillStyle;le.fillStyle=me;for(var Le=-2;Le<=2;Le++)le.fillRect(Ae-1+Le,Be-Math.abs(Le),1,1);le.fillStyle=Fe}function pe(le,me,Ae,Be){var Fe=le.fillStyle;le.fillStyle=me;for(var Le=-2;Le<=2;Le++)le.fillRect(Ae-1+Le,Be+Math.abs(Le),1,1);le.fillStyle=Fe}function ee(le,me,Ae,Be){var Fe=le.fillStyle;le.fillStyle=me,le.fillRect(Ae+1,Be,1,1),le.fillRect(Ae,Be+1,1,1),le.fillRect(Ae+1,Be+1,1,1),le.fillRect(Ae+2,Be+1,1,1),le.fillRect(Ae+1,Be+2,1,1),le.fillStyle=Fe}Object.defineProperty(c,"__esModule",{value:!0});var ae=10240;c.createBrailleImage=H}),P("graphing/braille-size-options",["require","exports"],function(S,c){Object.defineProperty(c,"__esModule",{value:!0}),c.brailleSizes={},c.brailleSizes.vpmax8={width:170,height:220,margins:{left:5,top:15,right:5,bottom:50},name:function(x){return x.t("VP Max (8.5 x 11 in)")}},c.brailleSizes.vpmax11={width:230,height:220,margins:{left:15,top:15,right:5,bottom:5},name:function(x){return x.t("VP Max (11.5 x 11 in)")}},c.brailleSizes.etc8={width:96,height:96,margins:{left:5,top:15,right:0,bottom:0},name:function(x){return x.t("ETC Romeo/Juliet (8.5 x 11 in)")}},c.brailleSizes.etc11={width:132,height:134,margins:{left:10,top:15,right:5,bottom:5},name:function(x){return x.t("ETC Romeo/Juliet (11.5 x 11 in)")}}}),P("graphing/movablepointslayer",["require","exports","tslib","dcgview","browser","core/lib/label","core/graphing-calc/json/expression","lib/aria","./constants","jquery"],function(S,c,x,t,l,n,i,s,g,d){function u(h,p,r){return"X: "+n.value(h,r.xmax-r.xmin).ariaString+". Y: "+n.value(p,r.ymax-r.ymin).ariaString}Object.defineProperty(c,"__esModule",{value:!0});var f=t.Components.For,y=(function(h){function p(){return h!==null&&h.apply(this,arguments)||this}return x.__extends(p,h),p.prototype.init=function(){this.grapher=this.props.grapher(),this.renderedPointsIdOrder=[],this.renderedPoints={}},p.prototype.template=function(){var r=this;return t.createElement(f,{each:function(){return r.renderedPointsIdOrder}},t.createElement("div",{class:t.const("dcg-graph-outer"),style:this.const({"z-index":0}),onFocusin:function(){return r.requestRedrawNextFrame()},onFocusout:function(){return r.requestRedrawNextFrame()},didMount:this.didMountRoot.bind(this)},function(o){return t.createElement("div",{class:r.const({"dcg-tabbable-point":!0,"dcg-movable-point":r.renderedPoints[o].type==="movable"}),style:function(){return{transform:r.getTransform(o)}},role:t.const("button"),"aria-roledescription":function(){return r.renderedPoints[o].type==="movable"?"movable point":"point"},"dcg-mp-id":r.const(o),tabindex:function(){return r.getTabIndex(o)},"aria-label":function(){return r.getAriaLabel(o)},"aria-hidden":r.bindFn(r.getAriaHidden)})}))},p.prototype.redraw=function(r,o,m){var b=this,E=this.grapher.graphSketches,M=this.renderedPoints;this.renderedPoints={},this.renderedPointsIdOrder=[];var D,A=this.getFocusedPointId(),v=function($){var re=b.processPOI(r,o,$,M[$.id],m,A);re&&(b.renderedPoints[$.id]=re,b.renderedPointsIdOrder.push($.id))};for(D in E){var k=E[D];k.visible&&(k.getMovablePoints().forEach(v),k.getStaticLabeledPoints().forEach(v))}var J=this.renderedPoints[this.hoveredPointId],X=this.renderedPoints[this.pressedPointId],te=J&&J.poi,H=X&&X.poi;te||this.setHoveredPointId(void 0),H||this.setPressedPointId(void 0);var z,B,F=H||te;F?(z=F.type==="movable-point"&&F.tableInfo&&F.tableInfo.dragX,B=F.type==="movable-point"&&F.tableInfo&&F.tableInfo.dragY,z&&B||!z&&!B?this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point"):z?this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point-ew"):this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point-ns")):this.grapher.setLayerClass("movablePoints",void 0),this.update(),this.speakAriaAlert()},p.prototype.drawForScreenshot=function(r,o,m,b){var E=this,M=this.grapher.graphSketches;for(var D in M){var A=M[D];A.visible&&A.getMovablePoints().forEach(function(v){var k={screenX:o.mapx(v.x),screenY:o.mapy(v.y),color:v.color,animationPercent:0};E.drawMovablePointOnCtx(r,k,m,b)})}},p.prototype.processPOI=function(r,o,m,b,E,M){var D=m.id,A=m.x,v=m.y,k=o.mapx(A),J=o.mapy(v),X=M===D,te=o.coordsAreOnscreen(k,J,g.OFFSCREEN_RENDER_MARGIN);if(te||X)return b||(b=m.type==="movable-point"?{type:"movable",id:D,pointOnScreen:te,poi:m,projection:o,screenX,screenY,color:m.color,pointIsHovered:!1,pointIsPressed:!1,lastHoverActionTime:0,animationPercent:0}:{type:"static",id:D,pointOnScreen:te,poi:m,projection:o,screenX,screenY}),b.pointOnScreen=te,b.poi=m,b.projection=o,b.screenX=k,b.screenY=J,b.type==="movable"&&(b.color=b.poi.color),b.type==="movable"&&(this.updateMovablePointAnimation(b),this.drawMovablePointOnCtx(r,b,E)),b},p.prototype.drawMovablePointOnCtx=function(r,o,m,b){var E;E=b||(this.grapher.settings.config.projectorMode?13.5:10.5);var M=o.color,D=o.screenX,A=o.screenY,v=o.animationPercent||0;m.push({left:D-E,right:D+E,top:A-E,bottom:A+E}),r.save(),r.fillStyle=M,r.globalAlpha=.35,r.beginPath(),r.moveTo(D+E,A),r.arc(D,A,E,0,2*Math.PI,!0),r.closePath(),r.fill(),r.globalAlpha=1,E*=.3+.7*v,r.beginPath(),r.moveTo(D+E,A),r.arc(D,A,E,0,2*Math.PI,!0),r.closePath(),r.fill(),r.restore()},p.prototype.updateMovablePointAnimation=function(r){var o=Date.now(),m=r.id,b=this.hoveredPointId===m,E=this.pressedPointId===m;r.pointIsPressed=E,b!==r.pointIsHovered&&(r.pointIsHovered=b,r.lastHoverActionTime=o);var M=r.animationPercent||0,D=o-r.lastHoverActionTime,A=.004*D;E?M=1:b?(M+=A,M>=1?M=1:this.requestRedrawNextFrame()):(M-=A,M<=0?M=0:this.requestRedrawNextFrame()),r.animationPercent=M},p.prototype.getTransform=function(r){var o=this.renderedPoints[r];if(o)return l.translateRule(o.screenX,o.screenY)},p.prototype.getTabIndex=function(r){var o=this.renderedPoints[r];if(!o)return-1;var m=o.poi,b=this.grapher.controller.getItemEditableLabelMode(m.sketch.id),E=o.type==="movable"||b===void 0||b===i.EditableLabelMode.None,M=this.grapher.settings,D=M.config.graphpaper&&M.config.enableTabindex;return E&&D?0:-1},p.prototype.getAriaHidden=function(){return!this.grapher.settings.config.graphpaper},p.prototype.getAriaLabel=function(r){var o=this.getAriaAlert({id:r,includeUsageInstructions:!1});return o&&o.completeMessage},p.prototype.speakAriaAlert=function(){var r=this.getFocusedPointId();if(r){var o=this.renderedPoints[r];if(!o||o.type==="static")return}var m=this.getAriaAlert({id:r,lastAriaAlert:this.lastAriaAlert,includeUsageInstructions:!0});this.lastAriaAlert=m,m&&m.completeMessage&&s.alert(m.completeMessage)},p.prototype.getAriaAlert=function(r){var o=r.id,m=r.lastAriaAlert,b=r.includeUsageInstructions;if(o){var E=this.renderedPoints[o];if(E){m&&m.id!==o&&(m=void 0);var M=E.poi,D=E.pointOnScreen,A=E.projection;if(M&&A){var v=A.viewport;if(v){var k,J=m&&m.label,X=M.ariaLabel,te=J!==X,H=m&&m.coordX,z=m&&m.coordY,B=M.x,F=M.y,$=B!==H||F!==z,re=u(B,F,v)+".",K=this.grapher.controller.t,ue=X||K("Graph point"),ie=M.type==="movable-point"&&b?K(" is movable. Press Arrows or Shift+Arrows to adjust."):"",Q=D?"":K(" not visible on screen");return k=m?te?ue+Q:$?re+Q:"":ue+". "+re+ie+Q,{id:o,coordX:B,coordY:F,label:X,completeMessage:k}}}}}},p.prototype.setHoveredPointId=function(r){r!==this.hoveredPointId&&(this.hoveredPointId=r,this.requestRedrawNextFrame())},p.prototype.isMovingPoint=function(){return!!this.pressedPointId},p.prototype.setPressedPointId=function(r){r!==this.pressedPointId&&(this.pressedPointId=r,this.requestRedrawNextFrame())},p.prototype.getFocusedPointId=function(){if(document.activeElement&&d.contains(this.rootNode,document.activeElement))return d(document.activeElement).attr("dcg-mp-id")},p.prototype.getFocusedPoint=function(){var r=this.getFocusedPointId();if(r){var o=this.renderedPoints[r];if(o)return o.poi}},p.prototype.didMountRoot=function(r){this.rootNode=r},p.prototype.requestRedrawNextFrame=function(){this.grapher.redrawAllLayers()},p})(t.Class);c.default=y,c.getCoordsString=u}),P("graphing/integral-image",["require","exports"],function(S,c){function x(l,n,i){return Math.max(n,Math.min(i,l))}Object.defineProperty(c,"__esModule",{value:!0});var t=(function(){function l(n){var i=n.data,s=n.width,g=n.height;this.imageData=n;for(var d=1;d<s;d++)i[d]+=i[d-1];for(var u=1;u<g;u++)i[u*s]+=i[u*s-s];for(var f=s*g-s-g+1,y=s-1,h=0;h<f;h++){var d=1+h%y,u=1+Math.floor(h/y),p=u*s,r=d-1+p,o=d+p-s,m=d-1+p-s;i[p+d]+=i[r]+i[o]-i[m]}}return l.prototype.getSumForValidRect=function(n){var i=n.left-1,s=n.right-1,g=n.top-1,d=n.bottom-1,u=this.imageData.width,f=this.imageData.data,y=f[i+g*u],h=f[s+g*u],p=f[i+d*u],r=f[s+d*u];return i>=0&&g>=0?r-h-p+y:i>=0?r-p:g>=0?r-h:r},l.prototype.getSum=function(n){var i={left:x(Math.floor(n.left),0,this.imageData.width),right:x(Math.ceil(n.right),0,this.imageData.width),top:x(Math.floor(n.top),0,this.imageData.height),bottom:x(Math.ceil(n.bottom),0,this.imageData.height)};return i.left>=i.right||i.top>=i.bottom?0:this.getSumForValidRect(i)},l})();c.default=t}),P("graphing/automatic-label-placer",["require","exports","graphing/integral-image","underscore"],function(S,c,x,t){function l(D,A){if(!(A.width*A.height>0))return new x.default({width:0,height:0,data:[]});E.width=0,E.width=Math.round(A.width*b),E.height=Math.round(A.height*b);var v=E.getContext("2d");v.save(),v.scale(E.width/D.canvas.width,E.height/D.canvas.height),v.drawImage(D.canvas,0,0),v.restore();var k=v.getImageData(0,0,E.width,E.height),J=k.data;J.length,M.length,M=new Array(J.length/4);for(var X=M,te=0;te<X.length;te++)X[te]=J[4*te+3];return new x.default({width:k.width,height:k.height,data:X})}function n(D){for(var A=0;A<D.length;A++){var v=i(A,D);D[A]=[v]}return D.map(function(k){return k[0]})}function i(D,A){var v=1/0,k=-1,J=A[D];if(J.length===1)return J[0];for(var X=0;X<J.length;X++){var te=A[D][X].staticScore,H=s(D,X,A),z=te+H;(k===-1||z<v)&&(v=z,k=X)}return J[k]}function s(D,A,v){for(var k=0,J=v[D][A],X=0;X<v.length;X++)if(X!==D){for(var te=0,H=v[X],z=H.length-1;z>=0;z--){var B=H[z],F=Math.max(0,Math.min(J.right,B.right)-Math.max(J.left,B.left)),$=Math.max(0,Math.min(J.bottom,B.bottom)-Math.max(J.top,B.top));te+=F*$}k+=te/H.length}return k}function g(D,A){var v=A.getSum({left:D.left*b,right:D.right*b,top:D.top*b,bottom:D.bottom*b});return v/=200,v/=b*b}function d(D,A){var v=0;return A.forEach(function(k){v+=f(D,k)}),v}function u(D,A){var v=f(D,A);return 10*(D.width*D.height-v)}function f(D,A){return Math.max(0,Math.min(D.right,A.right)-Math.max(D.left,A.left))*Math.max(0,Math.min(D.bottom,A.bottom)-Math.max(D.top,A.top))}function y(D,A,v){var k;return function(){return k||(k={domObstructions:v,viewport:{left:0,right:A.width,top:0,bottom:A.height},integralImage:l(D,A)}),k}}function h(D,A){if(!(A.length<=1))for(var v=D(),k=0,J=A;k<J.length;k++){var X=J[k];X.staticScore+=u(X,v.viewport),X.staticScore+=d(X,v.domObstructions),X.staticScore+=g(X,v.integralImage)}}function p(D,A){var v=A.nakedLabel?0:A.pt_radius,k=Math.round(v/Math.sqrt(2)),J=[],X=A.pt_x,te=A.pt_y,H=A.width,z=A.height;J.push({left:X-H/2,top:te-z/2,staticScore:-1/0,orientation:"center"}),J.push({left:X+v+3,top:te-z/2,staticScore:400,orientation:"right"}),J.push({left:X-(v+H)-3,top:te-z/2,staticScore:400,orientation:"left"}),J.push({left:X-H/2,top:te-(z+v),staticScore:400,orientation:"above"}),J.push({left:X-(H+k),top:te-(z+k),staticScore:400,orientation:"tl"}),J.push({left:X+k,top:te-(z+k),staticScore:400,orientation:"tr"}),J.push({left:X-H/2,top:te+v,staticScore:400,orientation:"below"}),J.push({left:X-(H+k),top:te+k,staticScore:400,orientation:"bl"}),J.push({left:X+k,top:te+k,staticScore:400,orientation:"br"});var B=J.map(function(F){var $=Math.round(F.left),re=Math.round(F.left+H),K=Math.round(F.top),ue=Math.round(F.top+z);return{pt_x:Math.round(X),pt_y:Math.round(te),left:$,right:re,top:K,bottom:ue,width:re-$,height:ue-K,staticScore:A.priorOrientation===F.orientation?F.staticScore-20:F.staticScore,orientation:F.orientation}});return B=A.enforceOrientation&&A.enforceOrientation!=="default"?t.filter(B,function(F){return F.orientation===A.enforceOrientation}):A.nakedLabel?t.filter(B,function(F){return F.orientation==="center"}):A.keepOrientation&&A.priorOrientation?t.filter(B,function(F){return F.orientation===A.priorOrientation}):t.filter(B,function(F){return F.orientation!=="center"}),h(D,B),B}function r(D,A){for(var v=[],k=A.width,J=A.height,X=k/2,te=J/2,H=A.pt_x1,z=A.pt_y1,B=A.pt_x2,F=A.pt_y2,$=(F-z)/(B-H),re=Math.atan2(F-z,B-H)+Math.PI/2,K=5*Math.cos(re),ue=5*Math.sin(re),ie=Math.min(z,F)-Math.abs(ue)-J,Q=Math.max(z,F)+Math.abs(ue),pe=[.5,.4,.6,.2,.8],ee=[0,20,20,40,40],ae=[],le=0,me=pe;le<me.length;le++){var Ae=me[le];ae.push({x:H*(1-Ae)+B*Ae,y:z*(1-Ae)+F*Ae})}for(var Be=0;Be<ae.length;Be++){var Fe,Le,ze,We,Z=ae[Be];if($>=2||$<=-2){ze=We=Z.y-te;var C=Math.abs((B-H)/(F-z)*te)+Math.abs(K);Fe=Z.x+C,Le=Z.x-C-k}else if($<=.05&&$>=-.05){Fe=Le=Z.x-X;var oe=Math.abs($*X)+Math.abs(ue);ze=Z.y-oe-J,We=Z.y+oe}else K>0?(Fe=Z.x+K,Le=Z.x-K-k):(Fe=Z.x+K-k,Le=Z.x-K),ue>0?(ze=Z.y+ue,We=Z.y-ue-J):(ze=Z.y+ue-J,We=Z.y-ue);ze<ie?ze=ie:ze>Q&&(ze=Q),We<ie?We=ie:We>Q&&(We=Q);var ge=(B-H)*(ze-z)-(F-z)*(Fe-H)>0;v.push({pt_x:Z.x,pt_y:Z.y,left:Fe,top:ze,staticScore:ee[Be],orientation:Be.toString()+(ge?"-a":"-b")}),v.push({pt_x:Z.x,pt_y:Z.y,left:Le,top:We,staticScore:ee[Be],orientation:Be.toString()+(ge?"-b":"-a")})}var _e=v.map(function(De){var je=Math.round(De.left),Ie=Math.round(De.left+k),Oe=Math.round(De.top),N=Math.round(De.top+J);return{pt_x:Math.round(De.pt_x),pt_y:Math.round(De.pt_y),left:je,right:Ie,top:Oe,bottom:N,width:Ie-je,height:N-Oe,staticScore:A.priorOrientation===De.orientation?De.staticScore-20:De.staticScore,orientation:De.orientation}});return A.keepOrientation&&A.priorOrientation&&(_e=t.filter(_e,function(De){return De.orientation===A.priorOrientation})),h(D,_e),_e}function o(D,A){var v=[],k=A.pt_x,J=A.pt_y,X=A.width,te=A.height,H=A.startAngle,z=A.endAngle;z<H&&(z+=2*Math.PI);var B=(H+z)/2,F=A.isRightAngle?A.radius*Math.sqrt(2):A.radius+4,$=F+Math.sqrt(A.width*A.width/4+A.height*A.height/4),re=[],K=$*Math.sin(B);K>F+.5*te&&(K=F+.5*te),K<-F-.5*te&&(K=-F-.5*te),re.push({x:k+$*Math.cos(B)-X/2,y:J+K-te/2});for(var ue=0;ue<re.length;ue++){var ie=re[ue];v.push({pt_x:ie.x,pt_y:ie.y,left:ie.x,top:ie.y,staticScore:0,orientation:ue.toString()+"-a"})}var Q=v.map(function(pe){var ee=Math.round(pe.left),ae=Math.round(pe.left+X),le=Math.round(pe.top),me=Math.round(pe.top+te);return{pt_x:Math.round(pe.pt_x),pt_y:Math.round(pe.pt_y),left:ee,right:ae,top:le,bottom:me,width:ae-ee,height:me-le,staticScore:A.priorOrientation===pe.orientation?pe.staticScore-20:pe.staticScore,orientation:pe.orientation}});return A.keepOrientation&&A.priorOrientation&&(Q=t.filter(Q,function(pe){return pe.orientation===A.priorOrientation})),h(D,Q),Q}function m(D,A){for(var v=[],k=A.width,J=A.height,X=Math.round(10/Math.sqrt(2)),te=0,H=0,z=0,B=0;B<A.path.length-2;B+=2)z+=1,te+=A.path[B],H+=A.path[B+1];var F=te/z,$=H/z;v.push({left:F-k/2,top:$-J/2,staticScore:0,orientation:"center"}),v.push({left:F+10+3,top:$-J/2,staticScore:50,orientation:"right"}),v.push({left:F-(10+k)-3,top:$-J/2,staticScore:50,orientation:"left"}),v.push({left:F-k/2,top:$-(J+10),staticScore:50,orientation:"top"}),v.push({left:F-(k+X),top:$-(J+X),staticScore:50,orientation:"tl"}),v.push({left:F+X,top:$-(J+X),staticScore:50,orientation:"tr"}),v.push({left:F-k/2,top:$+10,staticScore:50,orientation:"bottom"}),v.push({left:F-(k+X),top:$+X,staticScore:50,orientation:"bl"}),v.push({left:F+X,top:$+X,staticScore:50,orientation:"br"});var re=v.map(function(K){var ue=Math.round(K.left),ie=Math.round(K.left+k),Q=Math.round(K.top),pe=Math.round(K.top+J);return{pt_x:Math.round(F),pt_y:Math.round($),left:ue,right:ie,top:Q,bottom:pe,width:ie-ue,height:pe-Q,staticScore:A.priorOrientation===K.orientation?K.staticScore-20:K.staticScore,orientation:K.orientation}});return A.keepOrientation&&A.priorOrientation&&(re=t.filter(re,function(K){return K.orientation===A.priorOrientation})),h(D,re),re}Object.defineProperty(c,"__esModule",{value:!0});var b=.5,E=document.createElement("canvas"),M=[];c.getIntegralImage=l,c.computePositions=n,c.buildStaticEnvGetter=y,c.generateCandidatesForPoint=p,c.generateCandidatesForSegment=r,c.generateCandidatesForAngle=o,c.generateCandidatesForPolygon=m}),P("graphing/canvas-labels",["require","exports","tslib","core/lib/deepCopy","graphing/svg-classes"],function(S,c,x,t,l){function n(b,E,M){M.verticalLabel?(b.translate(E.left-.5,E.bottom-.5),b.rotate(-Math.PI/2)):b.translate(E.left-.5,E.top-.5)}function i(b,E){var M=document.createRange();M.selectNode(b);var D=M.getBoundingClientRect();if(D.width>0&&D.height>0){var A=window.getComputedStyle(b.parentElement),v=b.nodeValue||"";if(v){var k=parseFloat(A.fontSize),J=-.228*k;return{type:"text",rect:{left:D.left-E.canvasLeft,right:D.right-E.canvasLeft,top:D.top-E.canvasTop,bottom:D.bottom-E.canvasTop},text:v,color:A.color||"#000",font:A.fontStyle+" "+A.fontSize+" "+A.fontFamily,y:(E.verticalLabel?D.width:D.height)+J}}}}function s(b,E,M){b.save(),b.font=E.font,M?(b.strokeStyle="#FFF",b.lineWidth=3,b.miterLimit=2,b.strokeText(E.text,0,E.y)):(b.fillStyle=E.color,b.fillText(E.text,0,E.y)),b.restore()}function g(b,E,M){b.save(),M?(b.strokeStyle="#FFF",b.lineWidth=3):b.fillStyle=E.color,b.beginPath();for(var D=0,A=E.instructions;D<A.length;D++){var v=A[D];switch(v.type){case"moveTo":b.moveTo(v.x,v.y);break;case"lineTo":b.lineTo(v.x,v.y);break;case"ellipse":b.ellipse(v.centerX,v.centerY,v.radiusX,v.radiusY,v.rotation,v.startAngle,v.endAngle,v.anticlockwise)}}b.closePath(),M?b.stroke():b.fill(),b.restore()}function d(b,E,M){var D=b.getBoundingClientRect();if(D.width>0&&D.height>0){var A;A=M.verticalLabel?D.height:D.width;var v=parseFloat(E.borderTopWidth||"1px"),k=E.borderTopColor||"#000",J=[{type:"moveTo",x:0,y:0},{type:"lineTo",x:A,y:0},{type:"lineTo",x:A,y:v},{type:"lineTo",x:0,y:v}];return{type:"path",rect:{left:D.left-M.canvasLeft,right:D.right-M.canvasLeft,top:D.top-M.canvasTop,bottom:D.bottom-M.canvasTop},instructions:J,color:k}}}function u(b,E){var M=Math.sqrt(b[0]*b[0]+b[1]*b[1]),D=Math.sqrt(E[0]*E[0]+E[1]*E[1]),A=b[0]*E[0]+b[1]*E[1],v=Math.acos(A/(M*D));return b[0]*E[1]-b[1]*E[0]<0&&(v*=-1),v}function f(b,E,M,D,A,v,k,J,X){var te=Math.cos(A),H=Math.sin(A),z=(b-J)/2,B=(E-X)/2,F=te*z+H*B,$=-H*z+te*B,re=M*M,K=D*D,ue=F*F,ie=$*$,Q=Math.sqrt((re*K-re*ie-K*ue)/(re*ie+K*ue));v===k&&(Q*=-1);var pe=Q*M*$/D,ee=-Q*D*F/M,ae=(b+J)/2,le=(E+X)/2,me=te*pe-H*ee+ae,Ae=H*pe+te*ee+le,Be=[1,0],Fe=[(F-pe)/M,($-ee)/D],Le=[(-F-pe)/M,(-$-ee)/D];return{centerX:me,centerY:Ae,radiusX:M,radiusY:D,startAngle:u(Be,Fe),endAngle:u(Be,Le),rotation:A,anticlockwise:k===0}}function y(b,E){function M(ze){return(ze-J)/z}function D(ze){return(ze-te)/B}var A=b+"-"+E,v=m[A];if(v)return v;v=[],m[A]=v;var k=E.split(" ");if(k.length!==4)return v;var J=parseFloat(k[0]),X=parseFloat(k[2]),te=parseFloat(k[1]),H=parseFloat(k[3]),z=X-J,B=H-te,F=new RegExp("(M[0-9-.]+ [0-9-.]+)|(L[0-9-.]+ [0-9-.]+)|(A[0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+)","g"),$=b.match(F);if(!$||!$.length)return v;for(var re=NaN,K=NaN,ue=0,ie=$;ue<ie.length;ue++){var Q=ie[ue],pe=Q.substr(1).split(" ").map(parseFloat);switch(Q[0]){case"M":re=M(pe[0]),K=D(pe[1]),v.push({type:"moveTo",x:re,y:K});break;case"L":re=M(pe[0]),K=D(pe[1]),v.push({type:"lineTo",x:re,y:K});break;case"A":var ee=pe[0]/z,ae=pe[1]/B,le=pe[2],me=pe[3],Ae=pe[4],Be=M(pe[5]),Fe=D(pe[6]),Le=f(re,K,ee,ae,le,me,Ae,Be,Fe);re=Be,K=Fe,v.push(x.__assign({type:"ellipse"},Le))}}return v}function h(b,E){var M=b.childNodes[0];if(M&&M.nodeName==="path"){var D=b.getBoundingClientRect();if(D.width>0&&D.height>0){var A,v,k=M.getAttribute("d")||"",J=b.getAttribute("viewBox")||"",X=y(k,J),te=window.getComputedStyle(b);E.verticalLabel?(A=D.height,v=D.width):(A=D.width,v=D.height),X=t.default(X);for(var H=0,z=X;H<z.length;H++){var B=z[H];switch(B.type){case"moveTo":case"lineTo":B.x*=A,B.y*=v;break;case"ellipse":B.centerX*=A,B.centerY*=v,B.radiusX*=A,B.radiusY*=v;break;default:return B}}return{type:"path",rect:{left:D.left-E.canvasLeft,right:D.right-E.canvasLeft,top:D.top-E.canvasTop,bottom:D.bottom-E.canvasTop},color:te.color||"#000",instructions:X}}}}function p(b,E,M){var D=window.getComputedStyle(b);if(D.borderTopWidth!=="0px"){var A=d(b,D,E);A&&M.push(A)}for(var v=b.childNodes,k=0;k<v.length;k++){var J=v[k];if(J.nodeType===3){var A=i(J,E);A&&M.push(A)}else if(J.nodeName==="svg"){var A=h(J,E);A&&M.push(A)}else J.nodeType===1&&p(J,E,M)}}function r(b,E){var M=[];return p(b,E,M),M}function o(b,E,M){l.save(E,"dcg-svg-label"),E.save(),l.restore(E);for(var D=0,A=b;D<A.length;D++){var v=A[D];switch(E.save(),n(E,v.rect,M),v.type){case"path":g(E,v,!0);break;case"text":s(E,v,!0);break;default:var k=v;return k}E.restore()}for(var J=0,X=b;J<X.length;J++){var v=X[J];switch(E.save(),n(E,v.rect,M),v.type){case"path":g(E,v,!1);break;case"text":s(E,v,!1);break;default:var k=v;return k}E.restore()}E.restore()}Object.defineProperty(c,"__esModule",{value:!0});var m={};c.computeDrawingCommandsForDOMLabel=r,c.drawCommandsToCtx=o}),P("graphing/poilabelslayer",["require","exports","tslib","dcgview","jquery","core/lib/label","core/types/graphmode","core/types/label-sizes","core/math/poi-type","./constants","./poi","./automatic-label-placer","core/lib/color-helpers","core/math/interpolatedlabel","../dcgview-helpers/static-mathquill-view","../dcgview-helpers/mathquill-view","core/graphing-calc/json/expression","graphing-calc/models/expression","graphing/canvas-labels","graphing/movablepointslayer","./svg-groups"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r,o,m,b,E,M){function D(z,B){return B&&B.visible?B.getPOIById(z):null}function A(z,B){var F,$=B.xmax-B.xmin,re=B.ymax-B.ymin,K=z.getGraphMode();if(z.type===g.TRACE){var ue=K===i.X,ie=ue?z.y:z.x,Q=z.getCompiledFunction();if(F=n.point(ie,$,re,Q),ue){var pe=F[0];F[0]=F[1],F[1]=pe}}else F=[n.value(z.x,$),n.value(z.y,re)];var ee=!isFinite(F[1].value),ae=z.getLabel();if(ae)return h.isMathLabel(ae)?{is_hole:ee,type:"latex",text:ae.substr(1,ae.length-2)}:{is_hole:ee,type:"text",text:ae};var le=F[0].superscript?F[0].mantissa+"^{"+F[0].superscript+"}":F[0].string,me=F[1].superscript?F[1].mantissa+"^{"+F[1].superscript+"}":F[1].string;return le==="undefined"&&(le="\\mathrm{undefined}"),me==="undefined"&&(me="\\mathrm{undefined}"),{is_hole:ee,type:"latex",text:"\\left("+le+",\\space "+me+"\\right)"}}function v(z,B,F){var $=z.t("unknown coordinates"),re=B.getProjection();if(!re)return $;var K=re.viewport;return K&&F&&($=E.getCoordsString(F.x,F.y,K)),$}Object.defineProperty(c,"__esModule",{value:!0});var k=t.Components.Input,J=t.Components,X=J.For,te=J.Switch,H=(function(z){function B(){var F=z!==null&&z.apply(this,arguments)||this;return F.labelsDirty=!1,F}return x.__extends(B,z),B.prototype.init=function(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.cachedLabelDict={},this.cachedLabelOrder=[],this.hoveredPOI=void 0,this.openedPOI2Sketch={},this.takingScreenshot=!1},B.prototype.template=function(){var F=this;return t.createElement(X,{each:function(){return F.cachedLabelOrder}},t.createElement("div",{class:t.const("dcg-graph-outer"),style:this.const({"z-index":0}),didMount:this.didMountRoot.bind(this)},function($){return t.createElement("div",{class:function(){return F.getLabelClasses($)},style:function(){return F.getLabelStyles($)}},t.createElement("div",{class:t.const("dcg-pt"),style:function(){return F.getDotStyles($)}}),t.createElement("div",{class:t.const("dcg-label"),didMount:function(re){return F.linkLabelNode($,re)}},F.renderLabelContent($)))}))},B.prototype.renderLabelContent=function(F){var $=this;return t.createElement(te,{key:function(){return $.getLabelContent(F).type}},function(re){return re==="text"?t.createElement("span",null,function(){return $.getLabelContent(F).text}):re==="latex"?t.createElement(p.default,{latex:function(){return $.getLabelContent(F).text}}):re===o.EditableLabelMode.Math?t.createElement("div",{class:function(){return{"dcg-editable-label-border":!0,"dcg-do-not-blur":!0,"dcg-focus":$.shouldEditableLabelBeFocused(F),"dcg-empty-label":$.getEditableLabelText(F).trim().length===0}},style:function(){return{"border-color":y.shadeColor($.getEditableLabelTextColor(F),.3)}}},t.createElement(r.default,{latex:function(){return $.getEditableLabelText(F)},placeholder:function(){return""},isFocused:function(){return $.shouldEditableLabelBeFocused(F)},capExpressionSize:function(){return!!$.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:t.const(!1),config:$.const({}),getAriaLabel:function(){return $.controller.t("Editable point label at __coordinates__",{coordinates:v($.controller,$.grapher,$.cachedLabelDict[F])})},getAriaPostLabel:$.const(""),onUserChangedLatex:function(K){return $.onLabelInput(K,F)},onExpressionSizeExceeded:function(){return $.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(K){return $.onEditableLabelFocusChange(K,F)},hasError:$.const(!1),noFadeout:$.const(!0),needsSystemKeypad:function(){return!$.controller.isKeypadEnabled()}})):t.createElement("div",{class:function(){return{"dcg-resizing-text-input-container":!0,"dcg-editable-label-border":!0,"dcg-focus":$.shouldEditableLabelBeFocused(F),"dcg-empty-label":$.getEditableLabelText(F).trim().length===0}},style:function(){return{"border-color":y.shadeColor($.getEditableLabelTextColor(F),.3)}},onScroll:function(K){K.target&&(K.target.scrollLeft=0)}},t.createElement(k,{"aria-label":function(){return $.controller.t("Editable point label at __coordinates__",{coordinates:v($.controller,$.grapher,$.cachedLabelDict[F])})},onInput:function(K){return $.onLabelInput(K,F)},value:function(){return $.getEditableLabelText(F)},onFocus:function(){return $.onEditableLabelFocusChange(!0,F)},onBlur:function(){return $.onEditableLabelFocusChange(!1,F)}}),t.createElement("span",{class:t.const("dcg-text-input-content")},function(){return $.getEditableLabelText(F)||" "}))})},B.prototype.getSketchIdFromLabelId=function(F){var $=this.cachedLabelDict[F];if($)return $.sketchId},B.prototype.getEditableLabelTextColor=function(F){var $=this.getSketchIdFromLabelId(F);if(!$)return"#000";var re=this.controller.getItemModel($);return re&&re.type==="expression"?re.color:"#000"},B.prototype.onEditableLabelFocusChange=function(F,$){var re=this.getSketchIdFromLabelId($);re&&(F?this.controller.dispatch({type:"set-focus-location",location:{type:"editable-label",id:re}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"editable-label",id:re}}),this.update())},B.prototype.shouldEditableLabelBeFocused=function(F){var $=this.getSketchIdFromLabelId(F),re=this.controller.getFocusLocation();return!(!re||re.type!=="editable-label"||!$||re.id!==$)},B.prototype.onLabelInput=function(F,$){var re=this.getSketchIdFromLabelId($);if(re&&this.grapher.poiController.getExpressionModel(re)){var K=F;this.controller.getItemEditableLabelMode(re)===o.EditableLabelMode.Math&&K.length>0&&(K="`"+K+"`"),this.controller.dispatch({type:"set-item-label",id:re,label:K})}},B.prototype.getEditableLabelText=function(F){var $=this.getSketchIdFromLabelId(F);if($){var re=this.grapher.poiController.getExpressionModel($);return re?this.controller.getItemEditableLabelMode($)===o.EditableLabelMode.Math?re.label.substr(1,re.label.length-2):re.label:""}},B.prototype.linkLabelNode=function(F,$){var re=this.cachedLabelDict[F];re&&(re.labelDOM=$)},B.prototype.getLabelClasses=function(F){var $=this.cachedLabelDict[F];return $?$.classes:{}},B.prototype.getLabelStyles=function(F){var $=this.cachedLabelDict[F];return $?$.styles:{}},B.prototype.getDotStyles=function(F){var $=this.cachedLabelDict[F];return $?$.dotStyles:{}},B.prototype.getLabelContent=function(F){var $=this.cachedLabelDict[F];if($){var re=this.getSketchIdFromLabelId(F);if(!re)return{is_hole:!1,type:"text",text:""};var K=this.controller.getItemEditableLabelMode(re);return $.classes["dcg-editable-label"]&&K!==void 0&&K!==o.EditableLabelMode.None?{is_hole:!1,type:K,text:""}:$.content}return{is_hole:!1,type:"text",text:""}},B.prototype.didMountRoot=function(F){this.node=F},B.prototype.computeHoveredLabel=function(F,$){var re;this.hoveredPOI?this.isOpenPOI(this.hoveredPOI)?this.grapher.setLayerClass("hoveredPOI","dcg-mouse-over-opened-poi"):(re=this.computeLabel(this.hoveredPOI,F,$,"hovered"),this.grapher.setLayerClass("hoveredPOI","dcg-mouse-over-closed-poi")):this.grapher.setLayerClass("hoveredPOI",void 0);var K=this.getHoveredInteractiveLabel();return K&&!K.bareLabel?this.grapher.setLayerClass("interactiveLabel","dcg-mouse-over-opened-poi"):this.grapher.setLayerClass("interactiveLabel",void 0),re},B.prototype.computeTraceLabel=function(F,$){if(this.traceInfo){var re=this.traceInfo.pt;if(re){var K=new u.POI(re.x,re.y,g.TRACE,this.traceInfo.branchInfo.sketch,this.traceInfo.branchInfo.branch,0);return this.computeLabel(K,F,$,"trace")}}},B.prototype.computeLabel=function(F,$,re,K){var ue=F.id+"";K==="trace"&&(ue="*trace*");var ie=$.mapx(F.x),Q=$.mapy(F.y),pe=ie,ee=Q;if($.coordsAreOnscreen(ie,Q,d.OFFSCREEN_RENDER_MARGIN)){if(this.isHiddenInteractiveLabel(F))return;var ae=!1,le=void 0,me=F.sketch,Ae=me&&me.branches[0];Ae&&(ae=!!("nakedLabel"in Ae&&Ae.nakedLabel),le="labelOrientation"in Ae?Ae.labelOrientation:void 0);var Be=me.id,Fe=this.controller.getItemModel(Be);if(F.hasEditableLabel()&&Fe&&Fe.type==="expression"&&!m.isSinglePoint(Fe))return;var Le=A(F,$.viewport),ze=F.getLabelSize(),We=!!F.getVerticalLabel(),Z=!!F.getTextOutline(),C=F.isPersistent(),oe=F.isAttachedToPlottedPoint(),ge=F.hasInteractiveLabel(),_e=F.hasEditableLabel()&&!this.takingScreenshot,De=me.color,je=!C,Ie=!!oe;ge&&(Ie=!0,je=!0),K==="trace"&&(Ie=!1,je=!0);var Oe=re[ue],N=Oe&&Oe.labelDOM,Pe=Oe&&Oe.width,Xe=Oe&&Oe.height,$e=Oe&&Oe.orientation,ht={"dcg-poi-label":!0,"dcg-tracept":K==="trace","dcg-opened":K==="opened","dcg-hole":Le.is_hole,"dcg-size-small":ze===s.LabelSize.SMALL,"dcg-size-medium":ze===s.LabelSize.MEDIUM,"dcg-size-large":ze===s.LabelSize.LARGE,"dcg-vertical-label":!!We,"dcg-show-border":je,"dcg-hide-dot":Ie,"dcg-editable-label":_e,"dcg-has-outline":Z},ye={left:ie+"px",top:Q+"px"};if(C&&De){var Ue=ge&&!this.isOpenInteractiveLabel(F)?.5:.3;ye.color=y.shadeColor(De,Ue)}var we={};return K==="trace"&&(we["background-color"]=De,we["border-color"]=De),{id:ue,sketchId:Be,x:F.x,y:F.y,screenX:ie,screenY:Q,top:ee,left:pe,width:Pe,height:Xe,labelDOM:N,forcedOrientation:le,isNakedLabel:ae,isVertical:We,orientation:$e,classes:ht,styles:ye,dotStyles:we,content:Le}}},B.prototype.computeAllLabels=function(F,$){var re,K,ue={},ie=this.grapher.graphSketches;for(re in ie){var Q=ie[re];if(Q.visible){var pe=Q.labels;if(pe.length)for(var ee=0;ee<pe.length;ee++)(K=this.computeLabel(pe[ee],F,$,"opened"))&&(ue[K.id]=K)}}var ae={};for(re in this.openedPOI2Sketch){var le=D(re,ie[this.openedPOI2Sketch[re]]);le&&(ae[re]=le.sketch.id,(K=this.computeLabel(le,F,$,"opened"))&&(ue[K.id]=K))}return this.openedPOI2Sketch=ae,ue},B.prototype.markLabelsDirty=function(){this.labelsDirty=!0},B.prototype.getEditableLabelUnderPoint=function(F){for(var $=0,re=this.cachedLabelOrder.length;$<re;$++){var K=this.cachedLabelOrder[$],ue=this.cachedLabelDict[K];if(ue&&ue.width&&ue.height){var ie=ue.screenX,Q=ue.screenY,pe=ue.left,ee=ue.top,ae=ue.width,le=ue.height;if(ae>0&&le>0&&F.x>ie+pe&&F.x<ie+pe+ae&&F.y>Q+ee&&F.y<Q+ee+le){var me=this.getSketchIdFromLabelId(K);if(me===void 0)continue;var Ae=this.controller.getItemModel(me);if(!Ae||Ae.type!=="expression"||!m.hasEditableLabel(Ae))continue;return Ae}}}},B.prototype.positionLabels=function(F,$,re,K,ue){var ie=!this.labelsDirty;this.labelsDirty=!1;var Q=this.grapher.settings.config.projectorMode?14:10,pe=[];$.forEach(function(le){var me=re[le];if(me&&me.labelDOM){var Ae=me.screenX,Be=me.screenY,Fe=me.labelDOM.getBoundingClientRect(),Le=Fe.width,ze=Fe.height;Le>0&&ze>0&&pe.push({renderedLabel:me,pt_x:Ae,pt_y:Be,pt_radius:Q,nakedLabel:me.isNakedLabel,width:Le,height:ze,keepOrientation:ie,priorOrientation:me.orientation,enforceOrientation:me.forcedOrientation})}});var ee=f.buildStaticEnvGetter(F,K,ue),ae=pe.map(function(le){return f.generateCandidatesForPoint(ee,le)});f.computePositions(ae).forEach(function(le,me){var Ae=pe[me].renderedLabel;Ae.orientation=le.orientation;var Be=le.left-le.pt_x,Fe=le.top-le.pt_y;Ae.left=Be,Ae.top=Fe,Ae.width=le.width,Ae.height=le.height;var Le=Ae.labelDOM;Le&&(Le.style.left=Be+"px",Le.style.top=Fe+"px",l(Le).data("orientation",le.orientation))})},B.prototype.copyToCtx=function(F){M.save(F,"labels");var $=this.node.getBoundingClientRect();for(var re in this.cachedLabelDict){var K=this.cachedLabelDict[re];if(K){var ue=K.labelDOM;if(ue){var ie={canvasLeft:$.left,canvasTop:$.top,verticalLabel:K.isVertical},Q=b.computeDrawingCommandsForDOMLabel(ue,ie);b.drawCommandsToCtx(Q,F,ie)}}}M.restore(F)},B.prototype.drawForScreenshot=function(F,$,re,K,ue){this.takingScreenshot=!0,this.redraw(F,$,K,ue),this.takingScreenshot=!1,this.copyToCtx(re)},B.prototype.redraw=function(F,$,re,K){var ue=this.computeAllLabels(F,this.cachedLabelDict),ie=this.computeHoveredLabel(F,this.cachedLabelDict);ie&&(ue[ie.id]=ie);var Q=this.computeTraceLabel(F,this.cachedLabelDict);Q&&(ue[Q.id]=Q),this.cachedLabelDict=ue,this.cachedLabelOrder=Object.keys(ue),this.update(),this.positionLabels($,this.cachedLabelOrder,this.cachedLabelDict,re,K)},B.prototype.clearOpenedPOI=function(){this.openedPOI2Sketch={}},B.prototype.closePOI=function(F){delete this.openedPOI2Sketch[F.id]},B.prototype.openPOI=function(F){this.openedPOI2Sketch[F.id]=F.sketch.id},B.prototype.isOpenPOI=function(F){return this.openedPOI2Sketch.hasOwnProperty(F.id)},B.prototype.isOpenInteractiveLabel=function(F){return!!this.isOpenPOI(F)&&F.hasInteractiveLabel()},B.prototype.isHiddenInteractiveLabel=function(F){return!!F&&!!F.hasInteractiveLabel()&&!this.isOpenPOI(F)&&this.getHoveredPOI()!==F},B.prototype.setHoveredPOI=function(F){this.hoveredPOI=F},B.prototype.getHoveredPOI=function(){return this.hoveredPOI},B.prototype.getHoveredInteractiveLabel=function(){var F=this.getHoveredPOI();return F&&F.hasInteractiveLabel()?F:void 0},B.prototype.setTraceInfo=function(F){this.traceInfo=F},B.prototype.isTracing=function(){return!!this.traceInfo},B.prototype.getTraceInfo=function(){return this.traceInfo},B})(t.Class);c.default=H}),P("graphing/clickableobject-layer",["require","exports","tslib","dcgview","jquery","graphing-calc/models/expression","graphing-calc/models/image"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=t.Components.For,g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.init=function(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.renderedTabTargetOrder=[],this.renderedTabTargets={}},u.prototype.template=function(){var f=this;return t.createElement(s,{each:function(){return f.renderedTabTargetOrder}},t.createElement("div",{class:t.const("dcg-graph-outer"),style:this.const({"z-index":0}),onFocusin:this.bindFn(this.handleFocusChange),onFocusout:this.bindFn(this.handleFocusChange),didMount:function(y){return f.rootNode=y}},function(y){return t.createElement("div",{class:t.const("dcg-tabbable-clickableobject"),role:t.const("button"),"aria-roledescription":t.const("clickable object"),"dcg-clickableobject-id":f.const(y),tabindex:function(){return f.getTabIndex()},"aria-hidden":f.bindFn(f.getAriaHidden),"aria-label":function(){return f.getAriaLabel(y)},onTap:function(){f.controller.dispatch({type:"clickable-item-clicked",id:y})}})}))},u.prototype.redraw=function(){this.renderedTabTargets={},this.renderedTabTargetOrder=[];var f,y=this.grapher.graphSketches;for(f in y)if(y[f].visible){var h=this.controller.getItemModel(f);if(h&&h.type==="expression"&&n.isClickableObject(h)){this.renderedTabTargetOrder.push(f);var p=h.clickableInfo.description!==""?h.clickableInfo.description:this.grapher.getAudioTrace().getExpressionAriaLabel(f);this.renderedTabTargets[f]={id:f,description:p}}}var r=this.grapher.graphImages;for(f in r)if(!r[f].hidden&&!this.controller.isItemSecret(f)){var h=this.controller.getItemModel(f);h&&h.type==="image"&&i.isClickableObject(h)&&(this.renderedTabTargetOrder.push(f),this.renderedTabTargets[f]={id:f,description:h.clickableInfo.description})}this.renderedTabTargets[this.hoveredId]||this.setHoveredId(void 0),this.renderedTabTargets[this.pressedId]||this.setPressedId(void 0),this.hoveredId||this.pressedId?this.grapher.setLayerClass("clickableObjects","dcg-mouse-over-clickable-object"):this.grapher.setLayerClass("clickableObjects",void 0),this.update()},u.prototype.getTabIndex=function(){var f=this.grapher.settings;return f.config.graphpaper&&f.config.enableTabindex?0:-1},u.prototype.getAriaHidden=function(){return!this.grapher.settings.config.graphpaper},u.prototype.getAriaLabel=function(f){var y=this.renderedTabTargets[f];return y?y.description:""},u.prototype.shouldDrawHovered=function(f){return f===this.focusedId||!(this.isAnObjectPressed()&&!this.isObjectPressed(f))&&this.isObjectHovered(f)},u.prototype.isObjectHovered=function(f){return f!==void 0&&this.hoveredId===f},u.prototype.setHoveredId=function(f){f!==this.hoveredId&&(this.hoveredId=f,this.requestRedrawNextFrame())},u.prototype.shouldDrawPressed=function(f){return this.isObjectPressed(f)},u.prototype.isObjectPressed=function(f){return f!==void 0&&this.pressedId===f},u.prototype.setPressedId=function(f){f!==this.pressedId&&(this.pressedId=f,this.requestRedrawNextFrame())},u.prototype.getPressedId=function(){return this.pressedId},u.prototype.isAnObjectPressed=function(){return!!this.pressedId},u.prototype.handleFocusChange=function(){var f=void 0;document.activeElement&&l.contains(this.rootNode,document.activeElement)&&(f=l(document.activeElement).attr("dcg-clickableobject-id")),this.focusedId!==f&&(this.focusedId=f,this.requestRedrawNextFrame())},u.prototype.requestRedrawNextFrame=function(){this.grapher.redrawAllLayers()},u})(t.Class);c.default=g}),P("graphing/grapher",["require","exports","main/graph_settings","./canvaslayer","./poidotslayer","./gridlayer","./graphslayer","./imagelayer","./viewportcontroller","./poicontroller","vendor/canvas2svg","dcgview","jquery","underscore","./viewport","./screen","./graphsketch","./projection","underscore_model","./audiograph","./canvas-braille","./braille-size-options","core/lib/deepCopy","lib/animation-frame","core/lib/default-spec","core/graphing-calc/json/graph-settings","graphing/tonegenerator","./movablepointslayer","./poilabelslayer","./clickableobject-layer","./svg-classes","./svg-groups"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r,o,m,b,E,M,D,A,v,k,J,X,te,H,z,B,F){function $(){return new r.Screen(1024,768)}function re(){return new p.Viewport(-10,10,-10,10)}Object.defineProperty(c,"__esModule",{value:!0});var K=(function(){function ue(ie,Q,pe,ee){var ae=this;this.type="2d",this._layerClasses={},this.$=ie,this.evaluator=ee,this.controller=pe,this.settings=Q;var le=$(),me=re().squareYAxis(le);this.setUserRequestedViewport(me),this.__projection=new m.Projection(le,me,Q),this.markLabelsDirty=h.debounce(function(){ae.evaluator.notifyWhenSynced(function(){ae.__isRedrawingSlowly?ae.notifyAfterRedraw(function(){ae.poiLabelsLayer.markLabelsDirty(),ae.redrawAllLayers()}):(ae.poiLabelsLayer.markLabelsDirty(),ae.redrawAllLayers())})},300),this.poiController=new d(this,Q),this.viewportController=g(this,this.controller),this.showPOIDots=!0,this.$.css("overflow","hidden"),this.graphSketches={},this.graphImages={},this.canvasLayer=t(this),this.$.append(this.canvasLayer.$),this.imageLayer=s(),this.gridLayer=n(),this.poiDotsLayer=l(),this.graphsLayer=i(this.settings);var Ae=y("<div></div>");this.$.append(Ae);var Fe=this;this.clickableObjectsLayer=f.mountToNode(z.default,Ae[0],{grapher:function(){return Fe}});var Be=y("<div></div>");this.$.append(Be);var Fe=this;this.movablePointsLayer=f.mountToNode(te.default,Be[0],{grapher:function(){return Fe}});var Le=y("<div></div>");this.$.append(Le),this.poiLabelsLayer=f.mountToNode(H.default,Le[0],{grapher:function(){return Fe}}),this.traceLayer=this.poiLabelsLayer,this.scaleAxis=void 0,this.__sketchOrder=[],this.selectedId=void 0,this.__redrawRequested=!1,this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!1,this.events=new b.UnderscoreModel,this.audioGraph=new E.default(pe,this)}return ue.prototype.remove=function(){this.$.remove(),this.poiController.remove(),this.viewportController.remove(),this.audioGraph.remove()},ue.prototype.tick=function(ie){this.__isRedrawingSlowly?this._redrawSlowly():this.__redrawRequested&&this._redrawAllLayers(),this.__movablePointListener&&this.__movablePointListener()},ue.prototype.registerMovablePointListener=function(ie){this.__movablePointListener=ie},ue.prototype.deregisterMovablePointListener=function(){this.__movablePointListener=void 0},ue.prototype.setSketchOrder=function(ie){h.isEqual(this.__sketchOrder,ie)||(this.__sketchOrder=ie,this.redrawAllLayers())},ue.prototype.clear=function(){this.graphSketches={},this.graphImages={}},ue.prototype.getGraphSketch=function(ie){return this.graphSketches[ie]},ue.prototype.getGraphImage=function(ie){return this.graphImages[ie]},ue.prototype.addGraphSketch=function(ie){this.graphSketches[ie.id]=ie},ue.prototype.removeGraphSketch=function(ie){delete this.graphSketches[ie]},ue.prototype.addGraphImage=function(ie){var Q=this;ie.imageObj.width&&ie.imageObj.height?(this.graphImages[ie.id]=ie,this.redrawAllLayers()):y(ie.imageObj).on("load.calc_load",function(){return Q.addGraphImage(ie)})},ue.prototype.removeGraphImage=function(ie){var Q=this.graphImages[ie];Q&&y(Q.imageObj).off("load.calc_load"),delete this.graphImages[ie],this.redrawAllLayers()},ue.prototype.getProjection=function(){return this.__projection},ue.prototype._setProjection=function(ie){this.__projection=ie,this.redrawAllLayers()},ue.prototype.getAudioTrace=function(){return this.audioGraph},ue.prototype.getDefaultViewport=function(){var ie=this.getProjection();return re().squareYAxis(ie.screen)},ue.prototype._updateScreenSize=function(ie,Q){if(!(ie<=0||Q<=0)){var pe=this.getProjection(),ee=pe.screen;if(ee.width!==ie||ee.height!==Q){this.$.width(ie);var ae=new r.Screen(ie,Q);this.viewportController.setScreen(ae)}}},ue.prototype._setIsVisible=function(ie){ie!==this.isVisible&&(this.isVisible=ie,ie?this.redrawAllLayers():this.canvasLayer.resize(0,0))},ue.prototype.update=function(){var ie=this.controller.computeMajorLayout().grapher;ie.width>0&&ie.height>0?(this._setIsVisible(!0),this._updateScreenSize(ie.width,ie.height),this.$.css({position:"absolute",left:ie.left+"px",top:ie.top+"px",width:ie.width+"px",height:ie.height+"px"})):this._setIsVisible(!1)},ue.prototype.hide=function(ie){var Q=this.getGraphSketch(ie);Q&&(Q.visible=!1)},ue.prototype.select=function(ie){if(this.selectedId){var Q=this.getGraphSketch(this.selectedId);Q&&(Q.selected=!1,Q.showPOI=!1,Q.showHighlight=!1)}var pe=this.getGraphSketch(ie);pe&&(pe.selected=!0,pe.showPOI=this.controller.isTraceEnabled(),pe.showHighlight=!0),this.selectedId=ie},ue.prototype.updateSketch=function(ie,Q){var pe=this.getGraphSketch(ie);if(!Q.length)return this.hide(ie);var ee=new o.GraphSketch(ie,Q);ee.color=Q[0].color,ee.style=Q[0].style,pe&&ee.updateFrom(pe);var ae=String(ie)===String(this.selectedId);ee.selected=ae,ee.showPOI=ae&&this.controller.isTraceEnabled(),ee.showHighlight=ae,this.addGraphSketch(ee)},ue.prototype.updateIntersections=function(ie,Q){var pe=this.getGraphSketch(ie);pe&&pe.updateIntersections(Q)},ue.prototype.redrawAllLayers=function(){this.cancelRedrawSlowly(),this.__redrawRequested=!0},ue.prototype._clear=function(){var ie=this.getProjection(),Q=ie.screen;this.canvasLayer.resize(ie.screen.width,ie.screen.height),this.canvasLayer.ctx.clearRect(0,0,Q.width,Q.height)},ue.prototype._redrawAllLayers=function(){this.isVisible&&(this.__redrawRequested=!1,this._clear(),this.audioGraph.recomputePoints(),this._recomputeClickableObjects(),this._redrawImageLayer(),this._redrawGridLayer(),this._redrawGraphsLayer(),this._redrawPointsAndLabels(),this._updateCanvasLayerAria(),this.events.triggerEvent("redraw",void 0))},ue.prototype.cancelRedrawSlowly=function(){this.__isRedrawingSlowly&&(this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!1,this.redrawAllLayers())},ue.prototype.redrawSlowly=function(){this.__isRedrawingSlowly||(this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!0,this.audioGraph.recomputePoints())},ue.prototype._redrawSlowly=function(){var ie,Q,pe=this.__redrawSlowlyIndex;if(pe===0&&(this._clear(),this._redrawGridLayer()),pe>=this.__sketchOrder.length)return void this.cancelRedrawSlowly();var ee=this.__sketchOrder[pe],ae=(ie={},ie[ee]=this.graphSketches[ee],ie),le=(Q={},Q[ee]=this.graphImages[ee],Q);(le[ee]||ae[ee])&&this.graphsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),ae,le,[ee],this.poiLabelsLayer,this.clickableObjectsLayer),this.__redrawSlowlyIndex+=1},ue.prototype._redrawGridLayer=function(){this.gridLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.scaleAxis)},ue.prototype._recomputeClickableObjects=function(){this.clickableObjectsLayer.redraw()},ue.prototype._redrawGraphsLayer=function(){this.graphsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphSketches,this.graphImages,this.__sketchOrder,this.poiLabelsLayer,this.clickableObjectsLayer)},ue.prototype._updateCanvasLayerAria=function(){var ie=0;for(var Q in this.graphSketches)X.canPlaySketch(this.graphSketches[Q])&&(ie+=1);this.canvasLayer.updateAria(this.isVisible,ie)},ue.prototype._redrawPointsAndLabels=function(){var ie=this.getProjection(),Q=[];this.movablePointsLayer.redraw(this.canvasLayer.ctx,ie,Q),this.showPOIDots&&this.poiDotsLayer.redrawToCtx(this.canvasLayer.ctx,ie,this.graphSketches,this.poiLabelsLayer,this.clickableObjectsLayer);var pe=this.$[0].getBoundingClientRect();h.each([this.controller.find$(".dcg-overgraph-pillbox-elements")[0],this.controller.find$(".dcg-graphpaper-branding")[0]],function(ae){if(ae){var le=ae.getBoundingClientRect();Q.push({left:le.left-pe.left,top:le.top-pe.top,right:le.right-pe.left,bottom:le.bottom-pe.top})}});var ee=this.canvasLayer.ctx.canvas.getBoundingClientRect();this.poiLabelsLayer.redraw(ie,this.canvasLayer.ctx,{width:ee.width,height:ee.height},Q)},ue.prototype._redrawImageLayer=function(){this.imageLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphImages,this.__sketchOrder)},ue.prototype._parseScreenshotOpts=function(ie){var Q,pe,ee,ae,le,me,Ae=this.getProjection();return ie?(Q=ie.width||ie.height||Ae.screen.width,pe=ie.height||ie.width||Ae.screen.height,ee=ie.targetPixelRatio||1,ae=(Q<256||pe<256)&&!ie.preserveAxisNumbers,le=x.fromObject(ie.settings||this.settings),me=!!ie.transparentBackground):(Q=Ae.screen.width,pe=Ae.screen.height,ee=1,ae=!1,le=x.fromObject(this.settings),me=!1),ae&&(le.setProperty("xAxisNumbers",!1),le.setProperty("yAxisNumbers",!1),le.setProperty("polarNumbers",!1)),{width:Q,height:pe,targetPixelRatio:ee,settings:le,transparentBackground:me}},ue.prototype._syncScreenshotReturnCanvas=function(ie){var Q=document.createElement("canvas");if(ie&&ie.braille){var pe=ie.braille,ee=pe.embosserModel,ae=pe.brailleMode,le=D.brailleSizes[ee];Q.width=le.width,Q.height=le.height,M.createBrailleImage(Q,this,le,ee,ae)}else{var me=this._parseScreenshotOpts(ie);Q.width=me.width*me.targetPixelRatio,Q.height=me.height*me.targetPixelRatio,this.screenshotToCanvas(Q,ie)}return Q},ue.prototype.screenshot=function(ie){return this._syncScreenshotReturnCanvas(ie).toDataURL("image/png")},ue.prototype.asyncScreenshot=function(ie,Q){var pe=this,ee=!1;!ie.transparentBackground&&ie.showLabels&&(ie=A.default(ie),ie.transparentBackground=!0,ee=!0);var ae=this._syncScreenshotReturnCanvas(ie),le=ae.getContext("2d"),me=ae,Ae=le;ie&&ie.format==="svg"&&(ee=!1,ie.transparentBackground&&(ie=A.default(ie),ie.transparentBackground=!1),Ae=new u(ae.width,ae.height),me={getContext:function(){return Ae},width:ae.width,height:ae.height},this.screenshotToCanvas(me,ie));var Be=this.makeScreenshotProjection(ie),Fe=[];if(ie.showMovablePoints&&this.movablePointsLayer.drawForScreenshot(Ae,Be,Fe),ie.showLabels){var Le=y('<div class="dcg-calculator-api-container"><div class="dcg-container"></div></div>').css({width:Be.screen.width,height:Be.screen.height,position:"absolute",left:"0px",top:"0px"}).appendTo("body"),ze=Le.find(".dcg-container"),We=f.mountToNode(H.default,ze[0],{grapher:function(){return pe}}),Z={width:Be.screen.width,height:Be.screen.height};We.drawForScreenshot(Be,le,Ae,Z,Fe),Le.remove()}ee&&(Ae.globalCompositeOperation="destination-over",Ae.fillStyle="#FFF",Ae.fillRect(0,0,me.width,me.height)),Q(ie&&ie.format==="svg"?Ae.getSerializedSvg():me.toDataURL("image/png"))},ue.prototype.makeScreenshotProjection=function(ie){var Q=this._parseScreenshotOpts(ie),pe=Q.width,ee=Q.height,ae=Q.settings,le=new r.Screen(pe,ee),me=this.getProjection().viewport;return this.getSetting("squareAxes")&&(me=me.squareCrop(le)),new m.Projection(le,me,ae)},ue.prototype.screenshotToCanvas=function(ie,Q){var pe=this._parseScreenshotOpts(Q),ee=pe.targetPixelRatio,ae=pe.transparentBackground,le=ie.getContext("2d");le.scale(ee,ee);var me=this.makeScreenshotProjection(Q);me.settings.takingScreenshot=!0,F.save(le,"background"),B.save(le,"dcg-svg-background"),ae?le.clearRect(0,0,me.screen.width,me.screen.height):(le.fillStyle="white",le.fillRect(0,0,me.screen.width,me.screen.height)),B.restore(le),F.restore(le),this.imageLayer.redrawToCtx(le,me,this.graphImages,this.__sketchOrder),this.gridLayer.redrawToCtx(le,me),this.graphsLayer.redrawToCtx(le,me,this.graphSketches,this.graphImages,this.__sketchOrder,this.poiLabelsLayer,this.clickableObjectsLayer)},ue.prototype.getImageData=function(ie,Q,pe,ee){return this.canvasLayer.ctx.getImageData(ie,Q,pe,ee)},ue.prototype.getSetting=function(ie,Q){var pe=this.settings.getProperty(ie);return pe!==void 0?pe:Q},ue.prototype.getState=function(ie){var Q=this,pe={viewport:this.getCurrentViewport()};return this.settings.stateProperties.forEach(function(ee){ee!=="randomSeed"&&(pe[ee]=Q.getSetting(ee))}),ie.stripDefaults&&(pe=k.stripDefaults(J.DefaultGraphSettings,pe)),pe},ue.prototype.getUndoRedoState=function(){var ie=this,Q={};return this.settings.stateProperties.forEach(function(pe){Q[pe]=ie.getSetting(pe)}),Q.viewport=this.getUserRequestedViewport(),Q},ue.prototype.notifyAfterRedraw=function(ie){var Q=this;if(this.__isRedrawingSlowly)v.requestAnimationFrame(this.notifyAfterRedraw.bind(this,ie));else if(this.__redrawRequested){this.notifyAfterRedraw_i?this.notifyAfterRedraw_i++:this.notifyAfterRedraw_i=1;var pe="redraw.notifyAfterRedraw"+this.notifyAfterRedraw_i;this.events.observeEvent(pe,function(){Q.events.unobserveEvent(pe),ie()})}else ie()},ue.prototype.getCurrentViewport=function(){return this.viewportController.getViewport().toObject()},ue.prototype.getUserRequestedViewport=function(){return this._lastUserRequestedViewport},ue.prototype.setUserRequestedViewport=function(ie){this._lastUserRequestedViewportUpdateToken||(this._lastUserRequestedViewportUpdateToken=0),this._lastUserRequestedViewportUpdateToken+=1,this._lastUserRequestedViewport=A.default(ie)},ue.prototype.debounceUserRequestedViewportChange=function(){var ie=this;this.__debouncedViewportCommit||(this.__debouncedViewportCommit=h.debounce(function(pe,ee){if(!ie.isDragging&&ie._lastUserRequestedViewportUpdateToken===ee){if(ie._lastUserRequestedViewport){var ae=p.Viewport.fromObject(ie._lastUserRequestedViewport);if(ie.computeConcreteViewport(ae).equals(pe))return}ie.controller.dispatch({type:"commit-user-requested-viewport",viewport:pe})}},1e3));var Q=this.getCurrentViewport();this.__debouncedViewportCommit(Q,this._lastUserRequestedViewportUpdateToken)},ue.prototype.setGrapherState=function(ie,Q){ie=k.populateDefaults(J.DefaultGraphSettings,ie),Q&&Q.doNotClear||this.clear();for(var pe in J.DefaultGraphSettings)J.DefaultGraphSettings.hasOwnProperty(pe)&&this.settings.setProperty(pe,ie[pe]);if("viewport"in ie){var ee=p.Viewport.fromObject(ie.viewport);this.setUserRequestedViewport(ee);var ae=this.computeConcreteViewport(ee);this.viewportController.setViewport(ae)}this.redrawAllLayers()},ue.prototype.computeConcreteViewport=function(ie){var Q=this.getProjection().screen;return this.getSetting("squareAxes")&&!ie.isSquare(Q)?ie.squareYAxis(Q):ie},ue.prototype.setLayerClass=function(ie,Q){var pe=this._layerClasses[ie];this._layerClasses[ie]=Q,pe!==Q&&(pe&&this.$.removeClass(pe),Q&&this.$.addClass(Q))},ue})();c.Grapher=K}),P("loadcss!tour",function(){}),P("loadcss!calculator_embed",function(){}),P("loadcss!buttons",function(){}),P("loadcss!dcg-normalize",function(){}),P("loadcss!projector_mode",function(){}),P("loadcss!desmos-icons",function(){}),P("loadcss!popovers",function(){}),P("main/calc_embed",["require","exports","main/graph_settings","tours/tour_manager","tslib","lib/i18n","jquery","main/controller","dcgview","main/instancehotkeys","lib/console","underscore","lib/defocus-mobile","graphing-calc/views/main","underscore_model","graphing/viewport","main/evaluator","graphing/grapher","core/lib/color-helpers","loadcss!tour","loadcss!calculator_embed","loadcss!buttons","loadcss!dcg-normalize","loadcss!projector_mode","loadcss!desmos-icons","loadcss!popovers"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r,o,m,b){Object.defineProperty(c,"__esModule",{value:!0});var E=0,M=(function(){function D(A,v,k,J){function X(){var ae=re.computeMajorLayout(),le={left:ae.grapher.left,right:ae.grapher.left+ae.grapher.width,width:ae.grapher.width,top:ae.grapher.top,bottom:ae.grapher.top+ae.grapher.height,height:ae.grapher.height},me=ie.getCurrentViewport(),Ae={top:me.ymax,bottom:me.ymin,left:me.xmin,right:me.xmax,width:me.xmax-me.xmin,height:me.ymax-me.ymin};f.isEqual(Ae,Q.mathCoordinates)||Q.setProperty("mathCoordinates",Ae),le.height>0&&le.width>0&&!f.isEqual(le,Q.pixelCoordinates)&&Q.setProperty("pixelCoordinates",le)}function te(){var ae=ie.getProjection();F.setProperty("zoomedDefault",ie.viewportController.isZoomRestored()),F.setProperty("squareAxes",ae.viewport.isSquare(ae.screen))}function H(ae,le){return n.t(ae,le,F.config.language)}var z=this;A||(A=document.createElement("div"));var B=document.createElement("div");B.className="dcg-wrapper",B.style.width="100%",B.style.height="100%",A.appendChild(B),this.__id=E++;var F=new x;this.graphSettings=F;for(var $ in k)F.config.setProperty($,k[$]);var re=new s.default(F);this.controller=re,J&&re.dispatch({type:"ui/container-resized",size:J}),this.rootElt=B,this.view=g.mountToNode(h.default,this.rootElt,{controller:g.const(re)});var K=new o.Evaluator(v);this.controller.setEvaluator(K),this.controller.setRootElt(this.rootElt);var ue=re.find$(".dcg-grapher"),ie=new m.Grapher(ue,F,this.controller,K);this.controller.setGrapher(ie),F.registerCallbacks(ie,K),this.controller.initStateStack(),F.config.redrawSlowly||(ie.redrawSlowly=ie.redrawAllLayers),K.readEvaluatorConfig=function(){return{evaluationMode:"graphing",globalRandomSeed:F.randomSeed,degreeMode:F.degreeMode,viewState:re.getViewState(),intersectId:re.getIntersectId(),restrictedFunctions:F.config.restrictedFunctions,distributions:F.config.distributions,pointsOfInterest:F.config.pointsOfInterest,plotSingleVariableImplicitEquations:F.config.plotSingleVariableImplicitEquations,plotImplicits:F.config.plotImplicits,plotInequalities:F.config.plotInequalities,sliders:F.config.sliders}},K.onEvaluatorResults=function(ae){z.controller.dispatch({type:"on-evaluator-changes",changes:ae.evaluationStates}),z.controller.dispatch({type:"process-graph-data",graphData:ae.graphData}),ae.renderSlowly?ie.redrawSlowly():ie.redrawAllLayers()},this.unsubFunc=this.controller.subToChanges(function(){z.controller.doesDOMHaveSize()&&(z.view.update(),ie.update()),X(),te()});var Q=new p.UnderscoreModel;Q.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=Q,i(this.rootElt).on("keydown.calculator-"+this.__id,function(ae){z.grapher&&z.grapher.audioGraph.handleKeydown(ae),z.instanceHotkeys.handleKeydown(ae)}),i(window).on("dcg-tapstart.calculator-"+this.__id,function(ae){var le=i(ae.target),me=!!le.closest(z.rootElt).length,Ae=ae.wasHandled("create-expression-with-keyboard"),Be=!!le.closest(".dcg-api-shared-keypad-root").length,Fe=!!le.hasClass("dcg-shell");if(me||Be||Fe||Ae||re.dispatch({type:"set-none-selected"}),ae.wasHandled("do-not-clear-poi-labels")||(ie.traceLayer.clearOpenedPOI(),ie.redrawAllLayers()),re.isInEditListMode()){var Le=le.closest(".dcg-exppanel").length===0&&le.closest(".dcg-options-menu").length===0&&le.closest(".dcg-expression-top-bar").length===0&&le.closest(".dcg-keypad").length===0;me&&!Le||re.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!1})}}),this.grapher=ie,this.evaluator=K,this.tourManager=t({evaluator:K}),this.controller.dispatch({type:"set-blank"});var pe=["degreeMode"],ee={};pe.forEach(function(ae){k[ae]!==void 0&&(ee[ae]=k[ae])}),F.setGraphSettings(ee),F.config.expressionsCollapsed&&this.setOptions({expressionsCollapsed:!0}),F.config.capExpressionSize&&this.setOptions({capExpressionSize:!0}),F.config.hasOwnProperty("pointsOfInterest")&&this.setOptions({pointsOfInterest:F.config.pointsOfInterest}),F.config.hasOwnProperty("backgroundColor")&&this.setOptions({backgroundColor:F.config.backgroundColor}),F.config.hasOwnProperty("textColor")&&this.setOptions({textColor:F.config.textColor}),F.config.observe("language",function(){var ae=z.controller.getState();z.controller.dispatch({type:"set-state",state:ae}),z.tourManager&&(z.tourManager.closingMsg=["<b>__endingMessage__</b><br>",H("This message will self-destruct in __seconds__...")].join(""))}),this.instanceHotkeys=new d.default(re)}return D.prototype.setOption=function(A,v){this.controller.getGraphSettings().config.setProperty(A,v)},D.prototype.setOptions=function(A){function v(re){var K=re.notes,ue=re.folders,ie=re.images;return K===!1||ue===!1||ie===!1}var k,J=this.controller.getGraphSettings().config,X=l.__assign({},A);A.hasOwnProperty("backgroundColor")&&(b.isValidHexColor(A.backgroundColor)||(u.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"),delete X.backgroundColor)),A.hasOwnProperty("textColor")&&(b.isValidHexColor(A.textColor)||(u.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete X.textColor)),A.hasOwnProperty("menus")&&(u.warn("Deprecated option: menus. Setting settingsMenu and expressionsTopbar instead."),A.hasOwnProperty("settingsMenu")||(X.settingsMenu=!!A.menus),A.hasOwnProperty("expressionsTopbar")||(X.expressionsTopbar=!!A.menus)),A.hasOwnProperty("solutions")&&(u.warn("Deprecated option: solutions. Setting pointsOfInterest instead."),A.hasOwnProperty("pointsOfInterest")||(X.pointsOfInterest=!!A.solutions)),A.hasOwnProperty("singleVariableSolutions")&&u.warn("Deprecated option: singleVariableSolutions has been removed."),A.graphpaper===!1&&(A.expressionsCollapsed&&(X.expressionsCollapsed=!1,u.warn("Cannot set graphpaper: false with expressionsCollapsed: true. Proceeding with expressionsCollapsed: false.")),J.expressionsCollapsed&&(X.expressionsCollapsed=!1,u.warn("Disabling the graphpaper with the expressions list collapsed is not supported.Setting expressionsCollapsed: false.")),A.zoomButtons&&(X.zoomButtons=!1,u.warn("Cannot set graphpaper: false with zoomButtons: true. Proceeding with zoomButtons: false.")),A.showResetButtonOnGraphpaper&&(X.showResetButtonOnGraphpaper=!1,u.warn("Cannot set graphpaper: false with showResetButtonOnGraphpaper: true. Proceeding with showResetButtonOnGraphpaper: false.")),J.zoomButtons&&(X.zoomButtons=!1,u.warn("Disabling the graphpaper with the zoomButtons visible is not supported. Setting zoomButtons: false.")),J.showResetButtonOnGraphpaper&&(X.showResetButtonOnGraphpaper=!1,u.warn("Disabling the graphpaper with the reset button visible is not supported. Setting showResetButtonOnGraphpaper: false."))),J.graphpaper===!1&&(A.expressionsCollapsed||A.zoomButtons||A.showResetButtonOnGraphpaper)&&(X.graphpaper=!0,u.warn("Must have visible graphpaper to proceed. Setting graphpaper: true.")),A.lockViewport&&A.zoomButtons&&(X.zoomButtons=!1,u.warn("Cannot set zoomButtons: true and lockViewport: true. Proceeding with zoomButtons: false.")),J.lockViewport&&A.zoomButtons&&(X.lockViewport=!1,u.warn("Cannot set zoomButtons: true while the viewport is locked. Setting lockViewport: false.")),J.zoomButtons&&A.lockViewport&&(X.zoomButtons=!1,u.warn("Cannot lock the viewport without hiding the zoom buttons. Setting zoomButtons: false."));var te=v(A),H=v(l.__assign(l.__assign({},J),A)),z=J.pasteGraphLink,B=A.pasteGraphLink;te?(B||z)&&(X.pasteGraphLink=!1,u.warn("Cannot disable creating note, folder, or image expressions without disabling graph link pasting. Setting pasteGraphLink: false.")):B&&H&&(X.notes=!0,X.folders=!0,X.images=!0,u.warn("Cannot enable graph link pasting while the creation of notes, folders, or images is disable. Setting notes: true, folders: true, images: true."));for(k in X)if(X.hasOwnProperty(k))switch(k){case"expressionsCollapsed":this.setOption("expressionsCollapsed",!!X.expressionsCollapsed),X.expressionsCollapsed?this.controller.dispatch({type:"hide-expressions-list"}):this.controller.dispatch({type:"show-expressions-list"});break;case"qwertyKeyboard":this.setOption("qwertyKeyboard",!!X.qwertyKeyboard),this.controller.isLetterKeypadOpen()&&this.controller.dispatch({type:"keypad/abc"});break;case"degreeMode":this.setOption("degreeMode",!!X.degreeMode),this.controller.getGraphSettings().setGraphSettings({degreeMode:!!X.degreeMode});break;case"keypad":case"graphpaper":case"expressions":case"settingsMenu":case"zoomButtons":case"showResetButtonOnGraphpaper":case"expressionsTopbar":case"pointsOfInterest":case"trace":case"border":case"lockViewport":case"administerSecretFolders":case"advancedStyling":case"authorIDE":case"clickableObjects":case"images":case"imageUploadCallback":case"folders":case"notes":case"sliders":case"links":case"restrictedFunctions":case"distributions":case"pasteGraphLink":case"pasteTableData":case"clearIntoDegreeMode":case"autosize":case"plotSingleVariableImplicitEquations":case"plotImplicits":case"plotInequalities":case"colors":case"branding":case"disableScrollFix":case"invertedColors":case"fontSize":case"projectorMode":case"language":case"redrawSlowly":case"onlyTraceSelected":case"disableMouseInteractions":case"nativeOnscreenKeypad":case"functionDefinition":case"plaidMode":case"pasteGraphLinkCallback":case"editOnWeb":case"crossOriginSaveTest":case"backgroundColor":case"textColor":case"enableTabindex":case"audioTraceReverseExpressions":case"showHamburger":case"decimalToFraction":case"capExpressionSize":case"transparentBackground":case"pauseWhenOffscreen":case"brailleMode":case"sixKeyInput":var F=X[k];F!==void 0&&this.setOption(k,F);break;default:var $=k;return $}},D.prototype.setViewport=function(A){this.grapher.viewportController.setViewport(new r.Viewport(A[0],A[1],A[2],A[3]))},D.prototype.resize=function(A){A&&this.controller.dispatch({type:"ui/container-resized",size:A})},D.prototype.interceptTouch=function(){var A=i(this.rootElt),v=A.find(".dcg-expression-top-bar");v.add(A.find(".dcg-keypad")),v.length&&(v.on("touchstart",function(k){i(k.target).is("input, textarea")||k.preventDefault()}),v.on("touchend",function(k){i(k.target).closest(".dcg-do-not-blur").length>0||y.default()}))},D.prototype.destroy=function(){i(window).off(".calculator-"+this.__id);var A=i(this.rootElt);A.off(".calculator-"+this.__id),this.unsubFunc(),this.graphSettings.unobserveAll(),this.evaluator&&this.evaluator.destroy(),this.grapher&&this.grapher.remove(),g.unmountFromNode(this.rootElt),A.remove()},D.prototype.tick=function(A,v){v||(this.controller.shouldDispatchTickNextFrame()&&this.controller.dispatch({type:"tick",time:A}),this.controller.updateRenderShellsAfterDispatch()),this.evaluator.tick(),this.grapher&&this.grapher.tick(A)},D.prototype.getState=function(A){return this.controller.getState(A)},D.prototype.setBlank=function(A){this.controller.dispatch({type:"set-blank",opts:A||{}})},D.prototype.setState=function(A,v){this.controller.dispatch({type:"set-state",state:A,opts:v||{}})},D})();c.default=M}),P("lib/dom-change-detector",["require","exports","tslib","lib/animation-frame","jquery"],function(S,c,x,t,l){function n(){d=!0,t.requestAnimationFrame(i)}function i(){c.testFixture.rafSPY&&c.testFixture.rafSPY(),d=!1;for(var f in g)g[f].detectAndEnqueueEvent(),d=!0;if(d){n();for(var f in g)g[f].dispatchQueuedEvent()}}Object.defineProperty(c,"__esModule",{value:!0});var s=1,g={},d=!1;c.testFixture={},c.checkAllWatchingDetectors=i;var u=(function(){function f(y,h){this.elt=y,this.cb=h,this.destroyed=!1,this.lastOffscreen=!1,this.id=s.toString(),this.appliedScale={x:1,y:1},s++}return f.prototype.stopWatching=function(){delete g[this.id]},f.prototype.startWatching=function(){this.checkForChanges(),g[this.id]=this,d||n()},f.prototype.resetAppliedScalingAndGetBoundingClientRect=function(){var y=this.elt.getBoundingClientRect(),h={x:y.width/this.elt.offsetWidth,y:y.height/this.elt.offsetHeight};if(h.x===this.appliedScale.x&&h.y===this.appliedScale.y)return y;var p=l(this.elt).children(".dcg-wrapper")[0];return p&&(this.appliedScale=h,l(p).css({transform:"scale("+1/this.appliedScale.x+","+1/this.appliedScale.y+")",width:100*this.appliedScale.x+"%",height:100*this.appliedScale.y+"%","transform-origin":"0 0"})),y},f.prototype.detectAndEnqueueEvent=function(){if(!this.destroyed){var y=!0;if(document.body&&document.body.contains(this.elt)){var h=this.resetAppliedScalingAndGetBoundingClientRect();y=h.top>window.innerHeight||h.bottom<0||h.left>window.innerWidth||h.right<0,this.lastSize?h.width===this.lastSize.width&&h.height===this.lastSize.height||(this.lastSize.width=h.width,this.lastSize.height=h.height,this.queuedEvent={type:"resized",target:this.elt,size:x.__assign({},this.lastSize),isOffscreen:y}):(this.lastSize={width:h.width,height:h.height},this.queuedEvent={type:"added",target:this.elt,size:x.__assign({},this.lastSize),isOffscreen:y})}else this.lastSize&&(this.lastSize=void 0,this.queuedEvent={type:"removed",target:this.elt,isOffscreen:!0});y!==this.lastOffscreen&&(this.lastOffscreen=y,this.queuedEvent||(this.queuedEvent={type:"offscreen-noop",target:this.elt,isOffscreen:y}))}},f.prototype.dispatchQueuedEvent=function(){var y=this.queuedEvent;y&&(this.queuedEvent=void 0,this.cb(y))},f.prototype.checkForChanges=function(){this.detectAndEnqueueEvent(),this.dispatchQueuedEvent()},f.prototype.destroy=function(){this.stopWatching();for(var y in this)this.hasOwnProperty(y)&&delete this[y];this.destroyed=!0},f})();c.default=u}),P("graphing/compute-async-screenshot-bounds",["require","exports","lib/console"],function(S,c,x){function t(l){var n=l.mode,i=l.width,s=l.height,g=l.currentBounds,d=l.graphpaperAspectRatio,u=l.mathAspectRatio,f=l.mathBounds,y=i/s,h={x:g.left+g.width/2,y:g.bottom+g.height/2};if(f.left===void 0!=(f.right===void 0)||f.bottom===void 0!=(f.top===void 0))return x.warn('asyncScreenshot: cannot specify "left" bound without "right" or "bottom" bound without "top". Got: '+f),g;var p,r,o,m,b,E,M,D,A,v,k=f.left!==void 0&&f.right!==void 0,J=f.bottom!==void 0&&f.top!==void 0,X=k&&J;switch(n){case"stretch":return X?f:k?{left:f.left,right:f.right,bottom:g.bottom,top:g.top}:J?{left:g.left,right:g.right,bottom:f.bottom,top:f.top}:g;case"contain":return X?(m=f.right-f.left,b=f.top-f.bottom,E={x:f.left+m/2,y:f.bottom+b/2},o=m/b,y>o?(r=b/s,p=r*u,{left:E.x-p*i/2,right:E.x+p*i/2,bottom:f.bottom,top:f.top}):(p=m/i,r=p/u,{left:f.left,right:f.right,bottom:E.y-r*s/2,top:E.y+r*s/2})):k?(M=f.right-f.left,D=f.left+M/2,o=M/g.height,y>o?(r=g.height/s,p=r*u,{left:D-p*i/2,right:D+p*i/2,bottom:g.bottom,top:g.top}):(p=M/i,r=p/u,{left:f.left,right:f.right,bottom:h.y-r*s/2,top:h.y+r*s/2})):J?(A=f.top-f.bottom,v=f.bottom+A/2,o=g.width/A,y>o?(r=A/s,p=r*u,{left:h.x-p*i/2,right:h.x+p*i/2,bottom:f.bottom,top:f.top}):(p=g.width/i,r=p/u,{left:g.left,right:g.right,bottom:v-r*s/2,top:v+r*s/2})):y>d?(r=g.height/s,p=r*u,{left:h.x-p*i/2,right:h.x+p*i/2,bottom:g.bottom,top:g.top}):(p=g.width/i,r=p/u,{left:g.left,right:g.right,bottom:h.y-r*s/2,top:h.y+r*s/2});case"preserveX":return X?(m=f.right-f.left,b=f.top-f.bottom,E={x:f.left+m/2,y:f.bottom+b/2},o=m/b,p=m/i,r=p/u,{left:f.left,right:f.right,bottom:E.y-r*s/2,top:E.y+r*s/2}):J?(A=f.top-f.bottom,v=f.bottom+A/2,o=g.width/A,p=g.width/i,r=p/u,{left:g.left,right:g.right,bottom:v-r*s/2,top:v+r*s/2}):k?(M=f.right-f.left,p=M/i,r=p/u,{left:f.left,right:f.right,bottom:h.y-r*s/2,top:h.y+r*s/2}):(M=g.right-g.left,p=M/i,r=p/u,{left:g.left,right:g.right,bottom:h.y-r*s/2,top:h.y+r*s/2});case"preserveY":return X?(m=f.right-f.left,b=f.top-f.bottom,E={x:f.left+m/2,y:f.bottom+b/2},o=m/b,r=b/s,p=r*u,{left:E.x-p*i/2,right:E.x+p*i/2,bottom:f.bottom,top:f.top}):k?(M=f.right-f.left,D=f.left+M/2,o=M/g.height,r=g.height/s,p=r*u,{left:D-p*i/2,right:D+p*i/2,bottom:g.bottom,top:g.top}):J?(A=f.top-f.bottom,r=A/s,p=r*u,{left:h.x-p*i/2,right:h.x+p*i/2,bottom:f.bottom,top:f.top}):(A=g.top-g.bottom,r=A/s,p=r*u,{left:h.x-p*i/2,right:h.x+p*i/2,bottom:g.bottom,top:g.top});default:return g}}Object.defineProperty(c,"__esModule",{value:!0}),c.computeBoundsFromScreenshotOpts=t}),P("dcgview-helpers/mathquill-proxy",["require","exports","dcgview-helpers/mathquill-view"],function(S,c,x){Object.defineProperty(c,"__esModule",{value:!0});var t=(function(){function l(n){this.mq=n,this.id=n.id,this.data=n.data}return l.prototype.simulateUserChangedLatex=function(){x.default.simulateUserChangedLatex(this.mq)},l.prototype.simulateKeypress=function(n){x.default.simulateKeypress(this.mq,n)},l.prototype.latex=function(n){return n===void 0?this.mq.latex():(this.mq.latex(n),void this.simulateUserChangedLatex())},l.prototype.reflow=function(){this.mq.reflow()},l.prototype.el=function(){return this.mq.el()},l.prototype.getAriaLabel=function(){return this.mq.getAriaLabel()},l.prototype.setAriaLabel=function(n){return this.mq.setAriaLabel(n)},l.prototype.html=function(){return this.mq.html()},l.prototype.mathspeak=function(){return this.mq.mathspeak()},l.prototype.select=function(){this.mq.select()},l.prototype.moveToRightEnd=function(){this.mq.moveToRightEnd()},l.prototype.cmd=function(n){this.mq.cmd(n),this.simulateUserChangedLatex()},l.prototype.write=function(n){this.mq.write(n),this.simulateUserChangedLatex()},l.prototype.keystroke=function(n){this.simulateKeypress(n)},l.prototype.typedText=function(n){this.mq.typedText(n),this.simulateUserChangedLatex()},l.prototype.clearSelection=function(){this.mq.clearSelection()},l.prototype.getAriaPostLabel=function(){return this.mq.getAriaPostLabel()},l.prototype.setAriaPostLabel=function(n,i){this.mq.setAriaPostLabel(n,i)},l.prototype.blur=function(){this.mq.blur()},l.prototype.focus=function(){this.mq.focus()},l.prototype.revert=function(){this.mq.revert()},l.prototype.ignoreNextMousedown=function(n){this.mq.ignoreNextMousedown(n)},l.prototype.clickAt=function(n,i,s){this.mq.clickAt(n,i,s)},l})();c.MathQuillProxy=t}),P("main/raf-loop",["require","lib/animation-frame"],function(S){function c(t){function l(n){x.requestAnimationFrame(l),t(n)}x.requestAnimationFrame(l)}var x=S("lib/animation-frame");return c}),P("main/shared-clock-bus",["require","exports","main/raf-loop","underscore_model"],function(S,c,x,t){function l(g){return s+=1,i.observeEvent("tick."+s,function(d,u){g(u)}),s}function n(g){i.unobserveEvent("tick."+g)}Object.defineProperty(c,"__esModule",{value:!0});var i=new t.UnderscoreModel;x(function(g){i.triggerEvent("tick",g)});var s=0;c.subscribe=l,c.unsubscribe=n}),P("main/shared-worker-pool",["require","exports","worker/workerpool","lib/urlparser"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=t.getParameter(location.search,"nworkers"),n=4;l&&(n=parseInt(l,10)),c.default=new x(n)}),P("graphing-calc/json/config-options",["require","exports","tslib","core/lib/color-helpers","lib/console","main/font_sizes","expressions/colors","expressions/image_file_to_data_url","core/lib/deepCopy"],function(S,c,x,t,l,n,i,s,g){function d(r){return!!f.hasOwnProperty(r)||!!y.hasOwnProperty(r)||!!h.hasOwnProperty(r)}function u(r){var o=g.default(p);for(var m in r)o.hasOwnProperty(m)&&(o[m]=r[m]);return t.isValidHexColor(o.backgroundColor)||(o.backgroundColor=p.backgroundColor,l.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)")),t.isValidHexColor(o.textColor)||(o.textColor=p.textColor,l.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)")),r.zoomButtons===void 0&&(o.graphpaper&&!o.lockViewport||(o.zoomButtons=!1)),r.images===void 0&&(o.graphpaper||(o.images=!1)),r.hasOwnProperty("menus")&&(l.warn("As of API version 0.4, the 'menus' option is deprecated and has been split into 'settingsMenu' (boolean) and 'expressionsTopbar' (boolean)."),r.hasOwnProperty("settingsMenu")||(o.settingsMenu=!!r.menus),r.hasOwnProperty("expressionsTopbar")||(o.expressionsTopbar=!!r.menus)),r.hasOwnProperty("solutions")&&(l.warn("As of API v1.0, the 'solutions' option is deprecated and has been replaced with 'pointsOfInterest' (boolean)."),r.hasOwnProperty("pointsOfInterest")||(o.pointsOfInterest=!!r.solutions)),r.hasOwnProperty("singleVariableSolutions")&&l.warn("As of API v1.0, the 'singleVariableSolutions' has been removed. The calculator no longer displays solutions to single variable equations."),o.graphpaper||(o.expressionsCollapsed&&(o.expressionsCollapsed=!1,l.warn("Desmos API initialized with bad options. graphpaper: false and expressionsCollapsed: true are incompatible. Proceeding with expressionsCollapsed: false.")),o.zoomButtons&&(o.zoomButtons=!1,l.warn("Desmos API initialized with bad options. graphpaper: false and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")),o.showResetButtonOnGraphpaper&&(o.showResetButtonOnGraphpaper=!1,l.warn("Desmos API initialized with bad options. graphpaper: false and showResetButtonOnGraphpaper: true are incompatible. Proceeding with showResetButtonOnGraphpaper: false."))),o.lockViewport&&o.zoomButtons&&(o.zoomButtons=!1,l.warn("Desmos API initialized with bad options. lockViewport: true and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")),o.notes!==!1&&o.folders!==!1&&o.images!==!1||o.pasteGraphLink!==!0||(o.pasteGraphLink=!1,l.warn("Desmos API initialized with bad options. pasteGraphLink: true is incompatible with disabling the creation of note, folder, or image expressions. Proceeding with pasteGraphLink: false.")),o}Object.defineProperty(c,"__esModule",{value:!0});var f={keypad:!0,graphpaper:!0,expressions:!0,settingsMenu:!0,zoomButtons:!0,showResetButtonOnGraphpaper:!1,expressionsTopbar:!0,capExpressionSize:!1,pointsOfInterest:!0,trace:!0,border:!0,lockViewport:!1,expressionsCollapsed:!1,administerSecretFolders:!1,advancedStyling:!1,authorIDE:!1,clickableObjects:!1,images:!0,imageUploadCallback:s.imageFileToDataURL,folders:!0,notes:!0,sliders:!0,links:!0,qwertyKeyboard:!0,restrictedFunctions:!1,pasteGraphLink:!1,pasteTableData:!0,degreeMode:!1,clearIntoDegreeMode:!1,autosize:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,colors:{RED:i.RED,BLUE:i.BLUE,GREEN:i.GREEN,ORANGE:i.ORANGE,PURPLE:i.PURPLE,BLACK:i.BLACK},invertedColors:!1,functionDefinition:!0,projectorMode:!1,decimalToFraction:!0,fontSize:n.MEDIUM,language:"en",backgroundColor:"#fff",textColor:"#000",distributions:!0,brailleMode:"none",sixKeyInput:!1};c.publicConfigOptions=Object.keys(f);var y={showHamburger:!1,disableScrollFix:!1,branding:!0,redrawSlowly:!1,onlyTraceSelected:!1,disableMouseInteractions:!1,nativeOnscreenKeypad:!1,plaidMode:!1,pasteGraphLinkCallback:void 0,editOnWeb:!1,crossOriginSaveTest:!1,enableTabindex:!0,audioTraceReverseExpressions:!1,transparentBackground:!1,pauseWhenOffscreen:!1},h={solutions:!0,menus:!0,singleVariableSolutions:!0},p=x.__assign(x.__assign({},f),y);c.isConfigOption=d,c.validateConfigOptions=u}),P("lib/underscore-shim",["require","exports","underscore_model"],function(S,c,x){Object.defineProperty(c,"__esModule",{value:!0});var t=(function(){function l(){this.model=new x.UnderscoreModel}return l.prototype.triggerEvent=function(n,i){this.model.triggerEvent(n,i)},l.prototype.observeEvent=function(n,i){this.model.observeEvent(n,i)},l.prototype.unobserveEvent=function(n){this.model.unobserveEvent(n)},l.prototype.setProperty=function(n,i){this[n]=i,this.model.setProperty(n,i)},l.prototype.observe=function(n,i){this.model.observe(n,i)},l.prototype.observeAndSync=function(n,i){this.model.observeAndSync(n,i)},l.prototype.unobserve=function(n){this.model.unobserve(n)},l})();c.UnderscoreModelShim=t}),P("api/graphing",["require","exports","tslib","lib/i18n","main/calc_embed","core/lib/deepCopy","underscore_model","core/math/recttransformation","lib/dom-change-detector","graphing/compute-async-screenshot-bounds","graphing-calc/api/sanitize-expression","dcgview-helpers/mathquill-view","dcgview-helpers/mathquill-proxy","lib/console","underscore","main/shared-clock-bus","main/shared-worker-pool","core/graphing-calc/json/graph-settings","graphing-calc/json/config-options","core/lib/random-seed","../lib/underscore-shim"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r,o,m,b,E,M){function D(H,z){var B={},F={};for(var $ in H)b.isConfigOption($)?B[$]=H[$]:m.isGraphSetting($)?F[$]=H[$]:z||h.warn("Unrecognized setting: "+$+". Ignoring.");return{configOptions:B,settingsOptions:F}}function A(H,z){var B={};return z.hasOwnProperty("x")&&(B.x=H.mapX(z.x)),z.hasOwnProperty("y")&&(B.y=H.mapY(z.y)),B}function v(){if(!X){for(var H;(H=J.shift())&&H.api._destroyed;);if(H){var z=H;X=!0;var B=z.options,F=z.mathBounds,$=z.state,re=z.callback;k||(k=new te);var K=k;K.setState($),K.setMathBounds(F),["majorAxisOpacity","minorAxisOpacity","axisLineOffset","axisLineWidth","labelSize","graphLineWidth","pointLineWidth"].forEach(function(ee){ee==="axisLineWidth"?K._calc.grapher.settings.setProperty(ee,z.api._calc.grapher.settings[ee]):K._calc.grapher.settings[ee]=z.api._calc.grapher.settings[ee]});var ue=K._calc.evaluator,ie=function(){K._calc.grapher.asyncScreenshot(B,function(ee){X=!1,v(),re(ee)})},Q=z.api._calc.controller,pe=r.subscribe(function(){Q.areAnyImagesLoading()||(r.unsubscribe(pe),ue.notifyWhenSynced(ie))})}}}Object.defineProperty(c,"__esModule",{value:!0});var k,J=[],X=!1,te=(function(H){function z(B,F,$){var re=H.call(this)||this;if(re._destroyed=!1,re.isOffscreen=!1,!(re instanceof z))return new z(B,F,$);var K=D(F||{},!0),ue=b.validateConfigOptions(K.configOptions),ie=K.settingsOptions;return re._calc=new l.default(B,o.default,ue),re._calc.interceptTouch(),re.controller=re._calc.controller,re.controller.onEventsEmitted=function(Q){re.setProperty("isAnyExpressionSelected",!!re.controller.getSelectedItem()),re.setProperty("expressionAnalysis",re.controller.getExpressionAnalysis());var pe=f.default.getFocusedMathquill();re.setProperty("focusedMathQuill",pe?new y.MathQuillProxy(pe):void 0);for(var ee in Q)Q.hasOwnProperty(ee)&&Q[ee]&&re.triggerEvent(ee,void 0)},re._calc.graphpaperBounds.observeAndSync("mathCoordinates",re._syncGraphpaperBounds.bind(re)),re._calc.graphpaperBounds.observeAndSync("pixelCoordinates",re._syncGraphpaperBounds.bind(re)),re.colors=re.controller.getColors(),re._initGraphSettings(),re.updateSettings(ie),re._sharedClockBusToken=r.subscribe(function(Q){var pe=re._calc.grapher.settings.config.pauseWhenOffscreen&&re.isOffscreen;re._calc.tick(Q,pe)}),re.domChangeDetector=new g.default(B,function(Q){switch(re.isOffscreen=Q.isOffscreen,Q.type){case"offscreen-noop":break;case"added":re._calc.resize(Q.size);break;case"removed":break;case"resized":re._calc.resize(Q.size)}}),ue.autosize?re.domChangeDetector.startWatching():re.domChangeDetector.checkForChanges(),typeof $=="function"&&$(re),re}return x.__extends(z,H),z.prototype.destroy=function(){function B($){h.warn("You've destroyed this API instance. You can no longer call ."+$+"()")}this._calc.destroy(),this.controller.onEventsEmitted=function(){},r.unsubscribe(this._sharedClockBusToken),this.domChangeDetector.destroy();for(var F in this)typeof this[F]=="function"?this[F]=B.bind(this,F):this.hasOwnProperty(F)&&delete this[F];this.destroy=function(){},this._destroyed=!0},z.prototype._syncGraphpaperBounds=function(){var B=this;this.controller.runAfterDispatch(function(){B.setProperty("graphpaperBounds",{mathCoordinates:B._calc.graphpaperBounds.mathCoordinates,pixelCoordinates:B._calc.graphpaperBounds.pixelCoordinates})})},z.prototype._initGraphSettings=function(){var B=this,F=new i.UnderscoreModel;this.settings=this.graphSettings=F,m.publicGraphSettings.forEach(function($){B._calc.grapher.settings.observeAndSync($,function(){B.controller.runAfterDispatch(function(){F.setProperty($,B._calc.grapher.settings[$])})})}),b.publicConfigOptions.forEach(function($){B._calc.grapher.settings.config.observeAndSync($,function(){B.controller.runAfterDispatch(function(){F.setProperty($,B._calc.grapher.settings.config[$])})})})},z.prototype.updateSettings=function(B){var F=D(B,!1),$=F.configOptions,re=F.settingsOptions;p.isEmpty($)||this._calc.setOptions($),p.isEmpty(re)||this._calc.grapher.settings.setGraphSettings(re),this.notifyControllerOfAPICall()},z.prototype.setGraphSettings=function(B){h.warn("As of API v0.8 the 'setGraphSettings' method is deprecated and has been renamed 'updateSettings.'"),this.updateSettings(B),this.setGraphSettings=this.updateSettings,this.notifyControllerOfAPICall()},z.prototype.fetchLanguage=function(B){return t.fetchLanguage(B)},z.prototype.setDefaultState=function(B){this._calc.grapher.settings.setProperty("defaultState",B),this.notifyControllerOfAPICall()},z.prototype.mathToPixels=function(B){return A(s.RT.fromRects(this.graphpaperBounds.mathCoordinates,this.graphpaperBounds.pixelCoordinates),B)},z.prototype.pixelsToMath=function(B){return A(s.RT.fromRects(this.graphpaperBounds.pixelCoordinates,this.graphpaperBounds.mathCoordinates),B)},z.prototype.notifyControllerOfAPICall=function(){this.controller.dispatch({type:"api-method-called"})},z.prototype.setExpression=function(B){var F=this.controller,$=F.getItemModel(B.id),re=$&&$.type,K=u.validateItem(B,re,this.controller);if(K)if(re)this.controller.dispatch({type:"set-expression-properties-from-api",id:K.id,properties:K});else{if(K.type==="image")return;this.controller.dispatch({type:"add-item-to-end-from-api",state:K})}},z.prototype.setExpressions=function(B){B.forEach(this.setExpression.bind(this))},z.prototype.removeExpression=function(B){var F=B.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:F})},z.prototype.removeExpressions=function(B){B.forEach(this.removeExpression.bind(this))},z.prototype.removeSelected=function(){var B=this.controller.getSelectedItem();B&&this.controller.dispatch({type:"remove-item-by-id",id:B.id})},z.prototype.setMathBounds=function(B){B&&B.left<B.right&&B.bottom<B.top?this._calc.setViewport([B.left,B.right,B.bottom,B.top]):h.warn("Invalid bounds argument. Expected a bounds object with bounds.bottom < bounds.top, and bounds.left < bounds.right. Got "+JSON.stringify(B)),this.notifyControllerOfAPICall()},z.prototype.setViewport=function(B){B.length==4&&B[1]>B[0]&&B[3]>B[2]?this._calc.setViewport(B):h.warn("Invalid viewport.  Expected [xmin, xmax, ymin, ymax].  Got "+B),this.notifyControllerOfAPICall()},z.prototype.resize=function(){this.domChangeDetector.checkForChanges()},z.prototype.getState=function(B){return this.controller.getState(B)},z.prototype.getExpressions=function(){return this.getState({stripDefaults:!1}).expressions.list.map(u.sanitizeItem)},z.prototype.setBlank=function(B){this.controller.dispatch({type:"set-blank",opts:B||{}})},z.prototype.setState=function(B,F){this.controller.dispatch({type:"set-state",state:B,opts:F||{}})},z.prototype.undo=function(){this.controller.dispatch({type:"undo"})},z.prototype.redo=function(){this.controller.dispatch({type:"redo"})},z.prototype.clearHistory=function(){this.controller.dispatch({type:"clear-undoredo-history"})},z.prototype.newRandomSeed=function(){this.updateSettings({randomSeed:E.default()})},z.prototype.screenshot=function(B){return B||(B={}),B=this._validateBrailleScreenshotOptions(B),this._calc.grapher.screenshot(B)},z.prototype._getMathAspectRatio=function(){var B=this.graphpaperBounds.mathCoordinates,F=this._calc.grapher.getProjection().pixelCoordinates,$=F.right-F.left,re=F.bottom-F.top;return B.width/$/(B.height/re)},z.prototype.isProjectionUniform=function(){return!!this._calc.grapher.getProjection().settings.squareAxes},z.prototype._validateBrailleScreenshotOptions=function(B){B=n.default(B);var F=B.braille;if(F){var $=F.embosserModel;if(!$)return h.warn("Screenshot braille options requires an embosser model to be specified. "),h.warn("Continuing with non-braille screenshot."),delete B.braille,B;if($==="etc"&&(F.embosserModel="etc11"),$==="vpmax"&&(F.embosserModel="vpmax11"),F.embosserModel!=="etc8"&&F.embosserModel!=="etc11"&&F.embosserModel!=="vpmax8"&&F.embosserModel!=="vpmax11")return h.warn('Unknown screenshot braille embosser model. Valid models are "etc" and "vpmax".'),h.warn("Continuing with non-braille screenshot."),delete B.braille,B;F.brailleMode!=="nemeth"&&F.brailleMode!=="ueb"&&(h.warn("Screenshot options braille.brailleMode must be nemeth or ueb. Proceeding with nemeth."),F.brailleMode="nemeth"),B.width&&(h.warn("Screenshot width option is ignored when exporting Braille."),delete B.width),B.height&&(h.warn("Screenshot height option is ignored when exporting Braille."),delete B.height),B.targetPixelRatio&&(h.warn("Screenshot targetPixelRatio option is ignored when exporting Braille."),delete B.targetPixelRatio),B.preserveAxisNumbers&&(h.warn("Screenshot preserveAxisNumbers option is ignored when exporting Braille."),delete B.preserveAxisNumbers)}return B},z.prototype._validateAsyncScreenshotOpts=function(B){B=n.default(B);var F=B.mode||"contain",$=B.width||B.height||this.graphpaperBounds.pixelCoordinates.width,re=B.height||B.width||this.graphpaperBounds.pixelCoordinates.height,K=B.targetPixelRatio||1,ue=B.preserveAxisNumbers;B.hasOwnProperty("format")||(B.svg?(B.format="svg",delete B.svg):B.format="png");var ie=B.mathBounds||{},Q=this._getMathAspectRatio(),pe=this.graphpaperBounds.pixelCoordinates.width/this.graphpaperBounds.pixelCoordinates.height,ee=d.computeBoundsFromScreenshotOpts({mode:F,width:$,height:re,currentBounds:this.graphpaperBounds.mathCoordinates,graphpaperAspectRatio:pe,mathAspectRatio:Q,mathBounds:ie});return{opts:x.__assign(x.__assign({},B),{width:$,height:re,targetPixelRatio:K,preserveAxisNumbers:ue}),mathBounds:ee}},z.prototype.asyncScreenshot=function(B,F){if(!arguments.length)return void h.warn("asyncScreenshot expects a callback");if(arguments.length===1){if(typeof B!="function")return void h.warn("asyncScreenshot expects a callback");F=B,B={}}B||(B={}),B=this._validateBrailleScreenshotOptions(B);var $=this._validateAsyncScreenshotOpts(B),re=$.opts,K=$.mathBounds;J.push({api:this,options:re,mathBounds:K,state:this.getState(),callback:F}),v()},z.prototype.setOptions=function(B){var F=this._calc.setOptions(B);return this.notifyControllerOfAPICall(),F},z.prototype.focusFirstExpression=function(){var B=this.controller.getItemModelByIndex(0);B&&this.controller.dispatch({type:"move-focus-to-item",id:B.id,where:"end"})},z.prototype.HelperExpression=function(B){var F=B&&B.latex||"",$=new i.UnderscoreModel;return $.latex=F,this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:F,proxy:$}}),$},z})(M.UnderscoreModelShim);c.default=te}),P("main/calc_headless",["require","exports","main/graph_settings","main/evaluator","underscore_model","main/controller"],function(S,c,x,t,l,n){Object.defineProperty(c,"__esModule",{value:!0});var i=(function(){function s(g,d){var u=this,f=new x;for(var y in d)f.config.setProperty(y,d[y]);this.controller=new n.default(f);var h=new t.Evaluator(g);this.controller.setEvaluator(h),h.readEvaluatorConfig=function(){return{evaluationMode:"graphing",globalRandomSeed:f.randomSeed,degreeMode:f.degreeMode,restrictedFunctions:f.config.restrictedFunctions,distributions:f.config.distributions,pointsOfInterest:f.config.pointsOfInterest,plotSingleVariableImplicitEquations:f.config.plotSingleVariableImplicitEquations,plotImplicits:f.config.plotImplicits,plotInequalities:f.config.plotInequalities,sliders:f.config.sliders}},h.onEvaluatorResults=function(r){u.controller.dispatch({type:"on-evaluator-changes",changes:r.evaluationStates})};var p=new l.UnderscoreModel;p.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=p,this.evaluator=h,this.setBlank()}return s.prototype.setBlank=function(g){this.controller.dispatch({type:"set-blank",opts:g})},s.prototype.tick=function(){this.evaluator.tick()},s.prototype.destroy=function(){this.evaluator.destroy()},s})();c.HeadlessCalc=i}),P("api/headless",["require","exports","main/calc_headless","graphing-calc/json/config-options","main/shared-clock-bus","main/shared-worker-pool","graphing-calc/api/sanitize-expression","underscore_model","lib/console"],function(S,c,x,t,l,n,i,s,g){Object.defineProperty(c,"__esModule",{value:!0});var d=(function(){function u(){var f=this;if(!(this instanceof u))return new u;this._calc=new x.HeadlessCalc(n.default,t.validateConfigOptions({})),this.controller=this._calc.controller,this._sharedClockBusToken=l.subscribe(function(){f._calc.tick()})}return u.prototype.destroy=function(){function f(h){g.warn("You've destroyed this API instance. You can no longer call ."+h+"()")}this._calc.destroy(),l.unsubscribe(this._sharedClockBusToken);for(var y in this)typeof this[y]=="function"?this[y]=f.bind(this,y):this.hasOwnProperty(y)&&delete this[y];this.destroy=function(){}},u.prototype.setExpression=function(f){var y=this.controller,h=y.getItemModel(f.id),p=h&&h.type,r=i.validateItem(f,p,this.controller);if(r)if(p)this.controller.dispatch({type:"set-expression-properties-from-api",id:r.id,properties:r});else{if(r.type==="image")return;this.controller.dispatch({type:"add-item-to-end-from-api",state:r})}},u.prototype.setExpressions=function(f){f.forEach(this.setExpression.bind(this))},u.prototype.removeExpression=function(f){var y=f.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:y})},u.prototype.removeExpressions=function(f){f.forEach(this.removeExpression.bind(this))},u.prototype.getState=function(f){return this.controller.getState(f)},u.prototype.getExpressions=function(){return this.getState({stripDefaults:!1}).expressions.list.map(i.sanitizeItem)},u.prototype.setBlank=function(f){this.controller.dispatch({type:"set-blank",opts:f||{}})},u.prototype.setState=function(f,y){this.controller.dispatch({type:"set-state",state:f,opts:y||{}})},u.prototype.HelperExpression=function(f){var y=f&&f.latex||"",h=new s.UnderscoreModel;return h.latex=y,this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:y,proxy:h}}),h},u.prototype.resize=function(){},u})();c.default=d}),P("api/abstract",["require","exports","lib/console","underscore_model","ipad.scrollfix","lib/dom-change-detector"],function(S,c,x,t,l,n){Object.defineProperty(c,"__esModule",{value:!0});var i=(function(){function s(g){if(this.rootElt=g,this.eventModel=new t.UnderscoreModel,!g)throw new Error("must pass an HTMLElement to the API")}return s.prototype.setupDomChangeDetector=function(g){var d=this;this.autoSize=g,l.limitScrollOnElement(this.rootElt),this.domChangeDetector=new n.default(this.rootElt,function(u){switch(u.type){case"added":d.view=d.onCreateView(),d.onResizeView(u.size);break;case"removed":d.onDestroyView(),d.view=void 0;break;case"resized":d.onResizeView(u.size)}}),this.autoSize!==!1?this.domChangeDetector.startWatching():this.domChangeDetector.checkForChanges()},s.prototype.detach=function(){x.warn(".detach() is deprecated. It should no longer be necessary")},s.prototype.destroy=function(){function g(u){x.warn("You've destroyed this API instance. You can no longer call ."+u+"()")}this.view&&this.onDestroyView(),this.domChangeDetector.destroy();for(var d in this)typeof this[d]=="function"?this[d]=g.bind(this,d):this.hasOwnProperty(d)&&delete this[d];this.destroy=function(){}},s.prototype.resize=function(){this.domChangeDetector.checkForChanges()},s.prototype.updateView=function(){this.view&&document.body&&document.body.contains(this.rootElt)&&this.view.update()},s.prototype.triggerEvent=function(g,d){this.eventModel.triggerEvent(g,d)},s.prototype.observeEvent=function(g,d){this.eventModel.observeEvent(g,d)},s.prototype.unobserveEvent=function(g){this.eventModel.unobserveEvent(g)},s})();c.default=i}),P("immutable-store",["require","underscore","core/lib/deepCopy"],function(S){function c(n){return t.clone(n)}function x(n){this.setState(n)}var t=S("underscore"),l=S("core/lib/deepCopy").default;return x.prototype.setState=function(n){this.state=n},x.prototype.getState=function(){return this.state},x.prototype.set=function(n,i){if(arguments.length===1)return void(this.state=n);if(typeof n=="string")return this.state=c(this.state),void(this.state[n]=i);var s,g=n.length-2,d=n[g+1];this.state=s=c(this.state);for(var u=0;u<=g;u++){var f=n[u];s=s[f]=c(s[f])}s[d]=i},x.prototype.deepMutate=function(n,i){if(arguments.length===1)return i=n,this.state=l(this.state),void i(this.state);if(typeof n=="string")return this.state=c(this.state),this.state[n]=l(this.state[n]),void i(this.state[n]);for(var s=n.length-2,g=n[s+1],d=this.state=c(this.state),u=0;u<=s;u++){var f=n[u];d=d[f]=c(d[f])}d=d[g]=l(d[g]),i(d)},x.prototype.shallowMutate=function(n,i){if(arguments.length===1)return i=n,this.state=c(this.state),void i(this.state);if(typeof n=="string")return this.state=c(this.state),this.state[n]=c(this.state[n]),void i(this.state[n]);for(var s=n.length-1,g=this.state=c(this.state),d=0;d<=s;d++){var u=n[d];g=g[u]=c(g[u])}i(g)},x.areShallowEqual=function(n,i){},x.areDeepEqual=function(n,i){},{default:x}}),P("basic/model",["require","exports","immutable-store","main/shared-clock-bus","core/lib/label","main/evaluator","core/lib/label","underscore"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(){function d(u){var f=this,y=u.evaluationMode,h=u.additionalFunctions,p=u.functionDefinition,r=u.replaceRoundWithReciprocal,o=u.workerPool;this._evaluations={},this._nextObjectId=0,this.store=new x.default({expressions:{1:{id:"1",latex:"",braille:"",type:"latex",displayAsFraction:!1}},order:["1"],settings:{degreeMode:!1},ui:{focus:void 0}}),this.evaluationMode=y,this.additionalFunctions=h,this.functionDefinition=p,this.replaceRoundWithReciprocal=r,this.workerPool=o,this._setupEvaluator(),this.clear(),this._sharedClockBusToken=t.subscribe(function(){f._evaluator.tick()})}return d.prototype.isSingleExpression=function(){return this.evaluationMode==="singleExpressionScientific"||this.evaluationMode==="singleExpressionFourFunction"},d.prototype.destroy=function(){t.unsubscribe(this._sharedClockBusToken)},d.prototype.generateObjectId=function(){return(this._nextObjectId++).toString()},d.prototype.updateNextObjectId=function(){var u=this.store.getState().order;this._nextObjectId=0;for(var f=/^[0-9]+$/,y=0,h=u;y<h.length;y++){var p=h[y];if(f.test(p)){var r=parseInt(p,10);r>=this._nextObjectId&&(this._nextObjectId=r+1)}}},d.prototype.clearShouldDebounceUndoRedo=function(){this._shouldDebounceUndoRedo=!1},d.prototype.markShouldDebounceUndoRedo=function(){this._shouldDebounceUndoRedo=!0},d.prototype.getShouldDebounceUndoRedo=function(){return this._shouldDebounceUndoRedo},d.prototype.clearCachedBrailleValues=function(){for(var u=0,f=this.getExpressionOrder();u<f.length;u++){var y=f[u];this.store.set(["expressions",y,"braille"],"")}},d.prototype.getState=function(){return this.store.getState()},d.prototype.getPersistedState=function(){var u=this.getState(),f=u.expressions,y=u.order,h=u.settings;return{expressions:{list:y.map(function(p){var r=f[p];return{id:r.id,latex:r.latex,displayAsFraction:r.displayAsFraction}})},settings:h}},d.prototype.setState=function(u){this.store.set(u),this._updateIndexes(),this.updateNextObjectId()},d.prototype.setStateFromAPI=function(u){var f=[],y={};u.expressions.list.forEach(function(h){f.push(h.id),y[h.id]={id:h.id,latex:h.latex,braille:"",type:"latex",displayAsFraction:!!h.displayAsFraction}}),this.setState({expressions:y,order:f,settings:u.settings,ui:{focus:void 0}})},d.prototype.canClear=function(){if(this.getNumberOfExpressions()>1)return!0;var u=this.getExpressionOrder()[0];return this.getExpressionLatex(u)!==""},d.prototype.clear=function(){this.setState({expressions:{1:{id:"1",type:"latex",latex:"",braille:"",displayAsFraction:!1}},ui:{focus:void 0},order:["1"],settings:this.getState().settings})},d.prototype.getExpressionOrder=function(){return this.store.getState().order},d.prototype.getNumberOfExpressions=function(){return this.getExpressionOrder().length},d.prototype.getExpressionById=function(u){return this.getState().expressions[u]},d.prototype.getExpressionIndex=function(u){return this._indexes[u]},d.prototype._getExpressionByIndex=function(u){var f=this.getExpressionOrder()[u];return this.getExpressionById(f)},d.prototype._updateIndexes=function(){this._indexes={};for(var u=0,f=0,y=this.getExpressionOrder();f<y.length;f++){var h=y[f];this._indexes[h]=u,u+=1}this._evaluate()},d.prototype._usesAnsById=function(u){return this.getExpressionById(u).latex.indexOf("\\operatorname{ans}")!==-1},d.prototype._getPreviousExpById=function(u){var f=this.getExpressionIndex(u);return this._getExpressionByIndex(f-1)},d.prototype.createBlankAfterId=function(u){if(!this.isSingleExpression()&&this.getExpressionById(u).latex){var f=this.getExpressionIndex(u),y=this.generateObjectId();this.store.shallowMutate("order",function(h){h.splice(f+1,0,y)}),this.store.shallowMutate("expressions",function(h){h[y]={id:y,latex:"",braille:"",type:"latex",displayAsFraction:!1}}),this._updateIndexes(),this.setFocusedById(y,!0)}},d.prototype.conditionallyCopyPrevious=function(u){var f=this._getPreviousExpById(u),y=this.getExpressionById(u);f!=null&&y.latex===""&&this._usesAnsById(f.id)&&this.setLatexById(u,f.latex)},d.prototype.backspaceAtFrontOfId=function(u){if(this.getExpressionById(u).latex===""&&this.getNumberOfExpressions()!==1){var f=this.getExpressionIndex(u);this.store.shallowMutate("order",function(y){y.splice(f,1)}),this.store.shallowMutate("expressions",function(y){delete y[u]}),this._updateIndexes(),this._setFocusedByIndex(Math.max(f-1,0),!0)}},d.prototype.setLatexById=function(u,f){this.store.set(["expressions",u,"latex"],f),this.store.set(["expressions",u,"braille"],""),f===""&&this.setFractionEvaluation(u,!1),this._evaluate()},d.prototype.setLatexAndBrailleById=function(u,f,y){this.store.set(["expressions",u,"latex"],f),this.store.set(["expressions",u,"braille"],y),f===""&&this.setFractionEvaluation(u,!1),this._evaluate()},d.prototype.setFractionEvaluation=function(u,f){this.store.set(["expressions",u,"displayAsFraction"],f)},d.prototype.setLatexOfFocusedExpression=function(u){var f=this.getFocusedExpressionId();f&&this.setLatexById(f,u)},d.prototype.isExpressionFocused=function(u){return this.getFocusedExpressionId()===u},d.prototype.getExpressionLatex=function(u){return this.getExpressionById(u).latex},d.prototype.getExpressionError=function(u){var f=this._evaluations[u];return f?f.error:""},d.prototype.getExpressionValue=function(u){var f=this._evaluations[u];if(f)return f.value},d.prototype.getExpressionAns=function(u){var f=this._evaluations[u];if(f)return f.ans},d.prototype.getExpressionAnsId=function(u){var f=this._evaluations[u];if(f)return f.ansId},d.prototype.shouldShowEvaluationForExpression=function(u){var f=this._evaluations[u];return!!f&&f.showEvaluation},d.prototype.isRationalizableConstant=function(u){var f=this._evaluations[u];return!!f&&f.isRationalizableConstant},d.prototype.canDisplayEvaluationAsFraction=function(u){var f=this.getExpressionValue(u);return!!f&&i.canDisplayAsFraction(f)},d.prototype._setFocusedByIndex=function(u,f){var y=this._getExpressionByIndex(u),h=this.store.getState().ui.focus,p=f?{type:"latex-expression",id:y.id}:void 0;if(!s.isEqual(h,p)){if(h){var r=h.id;this.store.deepMutate("expressions",function(o){var m=o[r];m&&(m.braille="")})}(f||this.getFocusedExpressionId()===y.id)&&this.store.shallowMutate("ui",function(o){o.focus=p})}},d.prototype.setFocusedById=function(u,f){var y=this.getExpressionIndex(u);this._setFocusedByIndex(y,f)},d.prototype.focusPrevById=function(u){var f=this.getExpressionIndex(u)-1;f>=0&&this._setFocusedByIndex(f,!0)},d.prototype.focusNextById=function(u){var f=this.getExpressionIndex(u)+1;f<this.getNumberOfExpressions()?this._setFocusedByIndex(f,!0):this.createAtEnd()},d.prototype.getFocusedExpression=function(){var u=this.getFocusedExpressionId();return u?this.getExpressionById(u):void 0},d.prototype.getFocusedExpressionId=function(){var u=this.getState().ui.focus;return u&&u.id},d.prototype.clearFocusedExpression=function(){var u=this.getFocusedExpression();u&&this.setLatexById(u.id,"")},d.prototype.shouldShowClear=function(){if(this.getNumberOfExpressions()===1)return!1;var u=this.getFocusedExpression();return!!u&&!!u.latex},d.prototype.getLastExpression=function(){return this._getExpressionByIndex(this.getNumberOfExpressions()-1)},d.prototype.isLastExpressionEmpty=function(){return!!this.getLastExpression().latex},d.prototype.createAtEnd=function(){this.createBlankAfterId(this.getLastExpression().id)},d.prototype.focusLastExpression=function(){this._setFocusedByIndex(this.getNumberOfExpressions()-1,!0)},d.prototype.focusFirstExpression=function(){this._setFocusedByIndex(0,!0)},d.prototype.getDegreeMode=function(){return this.getState().settings.degreeMode},d.prototype.setDegreeMode=function(u){this.store.set(["settings","degreeMode"],!!u),this._evaluate()},d.prototype._cleanupLatex=function(u){return u=l.trimLatex(u),u.substr(u.length-1)==="="&&(u=u.substr(0,u.length-1)),u},d.prototype._evaluate=function(){var u=this;this._evaluator.clearStatementsAndStartCompleteState(),this.getExpressionOrder().forEach(function(f){return u._evaluator.addStatement({id:f,index:u.getExpressionIndex(f),latex:u._cleanupLatex(u.getExpressionLatex(f)),shouldGraph:!1,type:"statement"})})},d.prototype._setupEvaluator=function(){var u=this;this._evaluator=new n.Evaluator(this.workerPool),this._evaluator.readEvaluatorConfig=function(){return{degreeMode:u.getDegreeMode(),evaluationMode:u.evaluationMode,additionalFunctions:u.additionalFunctions,functionDefinition:u.functionDefinition,replaceRoundWithReciprocal:u.replaceRoundWithReciprocal}},this._evaluator.onEvaluatorResults=function(f){var y=f.evaluationStates;u._evaluations={};for(var h in y){var p=y[h];if(u.getExpressionById(h)){var r=p.constant_value;r===void 0&&p.zero_values&&p.zero_values.length&&(r=p.zero_values[0].val);var o=p.hasOwnProperty("constant_value")&&i.canDisplayAsFraction(p.constant_value),m=!p.is_evaluable&&o,b=!!p.is_evaluable||m||Array.isArray(r);u._evaluations[h]={error:p.error,ans:void 0,ansId:void 0,value:r,showEvaluation:b,isRationalizableConstant:m}}}for(var E=void 0,M=void 0,D=0,A=u.getExpressionOrder();D<A.length;D++){var h=A[D],v=u._evaluations[h];if(E&&v){var k=E.value;typeof k=="number"?(v.ans=k,v.ansId=M):Array.isArray(k)&&(v.ans="[...]")}E=v,M=h}typeof u.onEvaluationUpdate=="function"&&u.onEvaluationUpdate()}},d.prototype.reloadState=function(){this.setState(this.getState())},d.prototype.getFunctionDefinition=function(){return!!this.functionDefinition},d.prototype.enableFunctionDefinition=function(){this.functionDefinition=!0,this.reloadState()},d.prototype.disableFunctionDefinition=function(){this.functionDefinition=!1,this.reloadState()},d.prototype.getReplaceRoundWithReciprocal=function(){return!!this.replaceRoundWithReciprocal},d.prototype.enableReplaceRoundWithReciprocal=function(){this.replaceRoundWithReciprocal=!0,this.reloadState()},d.prototype.disableReplaceRoundWithReciprocal=function(){this.replaceRoundWithReciprocal=!1,this.reloadState()},d})();c.default=g}),P("basic/controller",["require","exports","tslib","flux","underscore","./model","lib/state-stack","keypad/mq-commands","lib/i18n","dcgview-helpers/mathquill-view","lib/console","bugsnag","core/lib/color-helpers"],function(S,c,x,t,l,n,i,s,g,d,u,f,y){Object.defineProperty(c,"__esModule",{value:!0});var h=(function(){function p(r,o){var m=this;this.keyboardMode="main",this.fontSize=16,this.invertedColors=!1,this.backgroundColor="",this.textColor="",this.projectorMode=!1,this.capExpressionSize=!1,this.decimalToFraction=!0,this.settingsMenu=!0,this.settingsMenuOpen=!1,this.language="en",this.brailleMode="none",this.sixKeyInput=!1,this.brailleExpressionDownload=!0,this.replaceCommaWith10Exp=!1,this.typingAsteriskWritesTimesSymbol=!1,this.stateStack=new i.default,this.dispatcher=new t.Dispatcher,this.t=function(b,E){return g.t(b,E,m.language)},this.dispatch=function(b){f.leaveBreadcrumb("dispatch",b),m.dispatcher.dispatch(b);for(var E;E=m._queuedCallbacks.shift();)E()},this._queuedCallbacks=[],this.stateStack=new i.default,this.dispatcher=new t.Dispatcher,this.options=r,this.model=new n.default({evaluationMode:this.options.evaluationMode,additionalFunctions:this.options.additionalFunctions,functionDefinition:this.options.functionDefinition,replaceRoundWithReciprocal:this.options.replaceRoundWithReciprocal,workerPool:o.workerPool}),this.model=this.model,this.model.setDegreeMode(r.degreeMode),this.setBrailleMode(r.brailleMode),this.setSixKeyInput(r.sixKeyInput),this.setBrailleExpressionDownload(r.brailleExpressionDownload),this.setReplaceCommaWith10Exp(r.replaceCommaWith10Exp),this.setReplaceRoundWithReciprocal(r.replaceRoundWithReciprocal),this.setTypingAsteriskWritesTimesSymbol(r.typingAsteriskWritesTimesSymbol),this.setProjectorMode(r.projectorMode),this.setCapExpressionSize(r.capExpressionSize),this.setDecimalToFraction(r.decimalToFraction),this.invertedColors=r.invertedColors,this.backgroundColor=r.backgroundColor,this.textColor=r.textColor,this.settingsMenu=r.settingsMenu,this.model.onEvaluationUpdate=function(){return m.dispatch({type:"render"})},this.settingsProxy=o.settingsProxy,this.syncPublicSettings(),this.hookUpDispatcher(),this.containerSize={width:0,height:0}}return p.prototype.runAfterDispatch=function(r){this._queuedCallbacks.push(r)},p.prototype.enqueueEvent=function(r){var o=this;this.runAfterDispatch(function(){o.onEventEmitted&&o.onEventEmitted(r)})},p.prototype.getFunctionDefinition=function(){return this.options.functionDefinition},p.prototype.getSettingsMenu=function(){return this.settingsMenu},p.prototype.getBrailleMode=function(){return this.brailleMode},p.prototype.renderAsBraille=function(){return this.brailleMode!=="none"},p.prototype.setBrailleMode=function(r){this.brailleMode=r},p.prototype.getSixKeyInput=function(){return this.sixKeyInput},p.prototype.setSixKeyInput=function(r){this.sixKeyInput=r},p.prototype.getBrailleExpressionDownload=function(){return this.brailleExpressionDownload},p.prototype.setBrailleExpressionDownload=function(r){this.brailleExpressionDownload=r},p.prototype.getRestrictedEditing=function(){return this.options.restrictedEditing},p.prototype.getKeyboardMode=function(){return this.keyboardMode},p.prototype.getFontSize=function(){return this.fontSize},p.prototype.getInvertedColors=function(){return this.invertedColors},p.prototype.hasBackgroundColor=function(){return this.getBackgroundColor()!=="#ffffff"},p.prototype.getBackgroundColor=function(){var r=y.normalizeColor(this.backgroundColor||"#fff");return this.getInvertedColors()&&r!=="#ffffff"?y.invertColor(r):r},p.prototype.getTextColor=function(){var r=y.normalizeColor(this.textColor||"#000");return this.getInvertedColors()&&r!=="#000000"?y.invertColor(r):r},p.prototype.getAdditionalFunctions=function(){return this.options.additionalFunctions},p.prototype.getTypingSlashWritesDivisionSymbol=function(){return this.options.typingSlashWritesDivisionSymbol},p.prototype.setTypingAsteriskWritesTimesSymbol=function(r){this.typingAsteriskWritesTimesSymbol=r},p.prototype.getTypingAsteriskWritesTimesSymbol=function(){return this.typingAsteriskWritesTimesSymbol},p.prototype.setProjectorMode=function(r){this.projectorMode=r},p.prototype.isProjectorMode=function(){return this.projectorMode},p.prototype.getReplaceCommaWith10Exp=function(){return this.replaceCommaWith10Exp},p.prototype.setReplaceCommaWith10Exp=function(r){this.replaceCommaWith10Exp=r},p.prototype.getReplaceRoundWithReciprocal=function(){return this.model.getReplaceRoundWithReciprocal()},p.prototype.setReplaceRoundWithReciprocal=function(r){r?this.model.enableReplaceRoundWithReciprocal():this.model.disableReplaceRoundWithReciprocal()},p.prototype.setCapExpressionSize=function(r){this.capExpressionSize=r},p.prototype.getCapExpressionSize=function(){return this.capExpressionSize},p.prototype.setDecimalToFraction=function(r){this.decimalToFraction=r},p.prototype.getDecimalToFraction=function(){return this.decimalToFraction},p.prototype.isScientificCalc=function(){var r=this.options.evaluationMode;return r==="scientific"||r==="singleExpressionScientific"},p.prototype.isFourFunctionCalc=function(){return this.options.evaluationMode==="fourFunction"||this.options.evaluationMode==="singleExpressionFourFunction"},p.prototype.getAllowLinks=function(){return this.options.links},p.prototype.canUndo=function(){return this.stateStack.canUndo()},p.prototype.canRedo=function(){return this.stateStack.canRedo()},p.prototype.undo=function(r){if(this.canUndo()){this.stateStack.undo();var o=this.stateStack.getState();if(!r.restoreFocus){var m={focus:void 0};o=x.__assign(x.__assign({},o),{ui:m})}this.model.setState(o),this.enqueueEvent("change")}},p.prototype.redo=function(r){if(this.canRedo()){this.stateStack.redo();var o=this.stateStack.getState();if(!r.restoreFocus){var m={focus:void 0};o=x.__assign(x.__assign({},o),{ui:m})}this.model.setState(o),this.enqueueEvent("change")}},p.prototype.clearHistory=function(){this.stateStack.clear()},p.prototype.canBackspace=function(){var r=this.model.getFocusedExpression();return r&&(r.latex.length>0||this.model.getNumberOfExpressions()>1)},p.prototype.focusLastExpression=function(){this.model.focusLastExpression()},p.prototype.shouldRender=function(){return this.containerSize.width>0&&this.containerSize.height>0},p.prototype.canClear=function(){return this.model.canClear()},p.prototype.shouldShowClear=function(){return this.model.shouldShowClear()},p.prototype.enableSettingsMenu=function(){this.settingsMenu=!0},p.prototype.disableSettingsMenu=function(){this.closeSettingsMenu(),this.settingsMenu=!1},p.prototype.closeSettingsMenu=function(){this.settingsMenuOpen=!1},p.prototype.toggleSettingsMenu=function(){this.settingsMenuOpen=!this.settingsMenuOpen},p.prototype.isSettingsMenuOpen=function(){return this.settingsMenuOpen},p.prototype.isLastExpressionEmpty=function(){return this.model.isLastExpressionEmpty()},p.prototype.createAtEnd=function(){this.model.createAtEnd()},p.prototype.clearFocusedExpression=function(){this.model.clearFocusedExpression()},p.prototype.setLatexById=function(r,o){this.model.setLatexById(r,o)},p.prototype.setLatexAndBrailleById=function(r,o,m){this.model.setLatexAndBrailleById(r,o,m)},p.prototype.setLatexOfFocusedExpression=function(r){this.model.setLatexOfFocusedExpression(r)},p.prototype.toggleFractionEvaluationById=function(r){this.model.setFractionEvaluation(r,!this.model.getExpressionById(r).displayAsFraction)},p.prototype.conditionallyCopyPrevious=function(r){this.model.conditionallyCopyPrevious(r)},p.prototype.createBlankAfterId=function(r){this.model.createBlankAfterId(r)},p.prototype.backspaceAtFrontOfId=function(r){this.model.backspaceAtFrontOfId(r)},p.prototype.areStatesDifferentEnoughForUndoRedo=function(r,o){var m={focus:void 0};return l.isEqual(x.__assign(x.__assign({},r),{ui:m}),x.__assign(x.__assign({},o),{ui:m}))},p.prototype.commitUndoRedoDebounced=function(){var r=this.model.getState(),o=this.stateStack.getState();if(!this.areStatesDifferentEnoughForUndoRedo(r,o)){var m=new Date().getTime();m-this._lastDebouncedTime<1e3?this.stateStack.replaceState(r):this.stateStack.addState(r),this._lastDebouncedTime=m,this.enqueueEvent("change")}},p.prototype.commitUndoRedoSynchronously=function(){var r=this.model.getState(),o=this.stateStack.getState();this.areStatesDifferentEnoughForUndoRedo(r,o)||(this._lastDebouncedTime=0,this.stateStack.addState(r),this.enqueueEvent("change"))},p.prototype.updateKeyboardMode=function(r){this.keyboardMode=r},p.prototype.getFocusedMathquill=function(){if(this.model.getFocusedExpressionId())return d.default.getFocusedMathquill()},p.prototype.ensureMathquillIsFocusedAndReturnFocusedMathquill=function(){var r=this.getFocusedMathquill();return r||(this.isLastExpressionEmpty()&&!this.model.isSingleExpression()?this.createAtEnd():this.focusLastExpression(),this.onEventEmitted&&this.onEventEmitted("render"),this.getFocusedMathquill())},p.prototype.typeIntoFocusedMathquill=function(r){r=r.replace(/\r|\n/g,"");var o=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();o&&d.default.canAcceptText(o,this.getCapExpressionSize(),r)&&(o.typedText(r),this.setLatexOfFocusedExpression(o.latex()),this.model.markShouldDebounceUndoRedo())},p.prototype.pressKeyInFocusedMathquill=function(r,o){if(this.getBrailleMode()==="none"){var m=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();if(m)if(r==="Up"||r==="Down"||r==="Left"||r==="Right"){var b=d.default.applyArrowKeyAndReturnIfWasAtBounds(m,r,o);b&&this.moveFocusInDirection(r)}else r==="Enter"?(o&&(o.preventDefault(),o.stopPropagation()),this.handleEnter()):r==="Backspace"?this.attemptToMoveFocusWithBackspace()||(m.keystroke(r,o),this.setLatexOfFocusedExpression(m.latex())):(m.keystroke(r,o),this.setLatexOfFocusedExpression(m.latex()))}},p.prototype.moveFocusInDirection=function(r){var o=this.model.getFocusedExpressionId();o&&(r==="Up"?this.model.focusPrevById(o):r==="Down"&&this.model.focusNextById(o))},p.prototype.handleEnter=function(){if(!this.model.isSingleExpression()){var r=this.model.getFocusedExpressionId();r&&(this.conditionallyCopyPrevious(r),this.createBlankAfterId(r))}},p.prototype.attemptToMoveFocusWithBackspace=function(){var r=this.model.getFocusedExpression();if(!r)return!1;var o=r.latex,m=r.id;return o===""&&(this.backspaceAtFrontOfId(m),!0)},p.prototype.executeCommandInFocusedMathquill=function(r){var o=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();o&&(s.execute(o,r),this.setLatexOfFocusedExpression(o.latex()))},p.prototype.syncPublicSettings=function(){this.settingsProxy.setProperty("language",this.language),this.settingsProxy.setProperty("fontSize",this.fontSize),this.settingsProxy.setProperty("degreeMode",this.model.getDegreeMode()),this.settingsProxy.setProperty("invertedColors",this.invertedColors),this.settingsProxy.setProperty("backgroundColor",this.backgroundColor),this.settingsProxy.setProperty("textColor",this.textColor),this.settingsProxy.setProperty("brailleMode",this.brailleMode),this.settingsProxy.setProperty("sixKeyInput",this.sixKeyInput),this.settingsProxy.setProperty("brailleExpressionDownload",this.brailleExpressionDownload),this.settingsProxy.setProperty("projectorMode",this.projectorMode),this.settingsProxy.setProperty("capExpressionSize",this.capExpressionSize),this.settingsProxy.setProperty("decimalToFraction",this.decimalToFraction),this.settingsProxy.setProperty("qwertyKeyboard",this.options.qwertyKeyboard),this.settingsProxy.setProperty("links",this.options.links),this.settingsProxy.setProperty("settingsMenu",this.settingsMenu),this.settingsProxy.setProperty("functionDefinition",this.model.getFunctionDefinition()),this.settingsProxy.setProperty("replaceCommaWith10Exp",this.replaceCommaWith10Exp),this.settingsProxy.setProperty("replaceRoundWithReciprocal",this.model.getReplaceRoundWithReciprocal()),this.settingsProxy.setProperty("typingAsteriskWritesTimesSymbol",this.typingAsteriskWritesTimesSymbol)},p.prototype.hookUpDispatcher=function(){var r=this;this.dispatcher.register(function(o){r.enqueueEvent("render");var m=!1,b=r.getRestrictedEditing();switch(o.type){case"update-options":r.options=x.__assign(x.__assign({},r.options),o.options);break;case"keypad/shift":var E=void 0;switch(r.keyboardMode){case"qwerty":E="capitalQwerty";break;case"capitalQwerty":E="qwerty";break;case"letters":E="capitalLetters";break;case"capitalLetters":E="letters";break;default:E="qwerty"}r.updateKeyboardMode(E);break;case"undo":b||(r.undo({restoreFocus:o.source==="keyboard-shortcut"}),m=!0);break;case"redo":b||(r.redo({restoreFocus:o.source==="keyboard-shortcut"}),m=!0);break;case"clear-history":r.clearHistory();break;case"set-state-from-api":o.opts.allowUndo||r.clearHistory(),r.model.setStateFromAPI(o.state);break;case"main":r.updateKeyboardMode("main");break;case"ABC":r.options.qwertyKeyboard?r.updateKeyboardMode("qwerty"):r.updateKeyboardMode("letters");break;case"functions":r.updateKeyboardMode("functions");break;case"degrees":r.model.setDegreeMode(!r.model.getDegreeMode());break;case"update-degree-mode":r.model.setDegreeMode(!!o.mode);break;case"update-font-size":var M=o.size;if(typeof M!="number"&&(M=parseInt(M,10)),isNaN(M))return;r.fontSize=M;break;case"update-inverted-colors":r.invertedColors=!!o.mode;break;case"update-background-color":r.backgroundColor=o.color;break;case"update-text-color":r.textColor=o.color;break;case"update-projector-mode":r.setProjectorMode(!!o.mode);break;case"update-cap-expression-size":r.setCapExpressionSize(!!o.mode);break;case"update-decimal-to-fraction":r.setDecimalToFraction(!!o.mode);break;case"update-language":var D=o.language;D!=="en"&&G.supportedLanguages.indexOf(D)===-1?u.warn("Translation for '"+D+"' isn't currently available. Using '"+r.language+"' instead."):r.language=D;break;case"set-blank":o.opts.allowUndo||r.clearHistory(),r.model.clear(),r.focusLastExpression();break;case"clear":r.model.clearFocusedExpression();break;case"set-braille-mode":var A=o.mode;A!=="nemeth"&&A!=="ueb"&&A!=="none"?u.warn("Valid Braille modes are 'nemeth', 'none', and 'ueb'. You passed '"+A+"'."):(r.model.clearCachedBrailleValues(),r.setBrailleMode(o.mode));break;case"set-six-key-input":r.setSixKeyInput(!!o.mode);break;case"set-braille-expression-download":r.setBrailleExpressionDownload(!!o.mode);break;case"set-replace-comma-with-10-exp":r.setReplaceCommaWith10Exp(!!o.replace);break;case"set-replace-round-with-reciprocal":r.setReplaceRoundWithReciprocal(!!o.replace);break;case"set-typing-asterisk-writes-times-symbol":r.setTypingAsteriskWritesTimesSymbol(!!o.mode);break;case"update-latex":r.model.markShouldDebounceUndoRedo(),r.setLatexById(o.id,o.latex);break;case"update-latex-from-braille":r.model.markShouldDebounceUndoRedo(),r.setLatexAndBrailleById(o.id,o.latex,o.braille);break;case"focusin":r.model.setFocusedById(o.id,!0);break;case"focusout":r.model.setFocusedById(o.id,!1);break;case"focus-first-expression":r.model.focusFirstExpression();break;case"focus-prev-expression":r.moveFocusInDirection("Up");break;case"focus-next-expression":r.moveFocusInDirection("Down");break;case"focus-last-expression":r.model.focusLastExpression();break;case"insert-blank-expression":r.handleEnter();break;case"backspace-from-braille":r.attemptToMoveFocusWithBackspace();break;case"keypad/type-text":r.typeIntoFocusedMathquill(o.text);break;case"keypad/press-key":r.pressKeyInFocusedMathquill(o.key,o.evt);break;case"keypad/custom-command":r.executeCommandInFocusedMathquill(o.command);break;case"keypad/123":case"keypad/abc":break;case"enable-settings-menu":r.enableSettingsMenu();break;case"disable-settings-menu":r.disableSettingsMenu();break;case"toggle-settings-menu":r.toggleSettingsMenu();break;case"close-settings-menu":r.closeSettingsMenu();break;case"render":break;case"ui/container-resized":r.containerSize=o.size;break;case"toggle-fraction-evaluation":r.toggleFractionEvaluationById(o.id);break;default:return o}r.runAfterDispatch(function(){return r.syncPublicSettings()}),m||(r.model.getShouldDebounceUndoRedo()?(r.commitUndoRedoDebounced(),r.model.clearShouldDebounceUndoRedo()):r.commitUndoRedoSynchronously())})},p})();c.default=h}),P("basic/dcgview-basic",["require","exports","tslib","dcgview"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=(function(n){function i(){return n!==null&&n.apply(this,arguments)||this}return x.__extends(i,n),i.prototype.init=function(){this.controller=this.props.controller(),this.model=this.controller.model,this.dispatch=this.controller.dispatch,this.t=this.controller.t},i})(t.Class);c.DCGViewBasic=l}),P("loadcss!keypad/control-bar",function(){}),P("keypad/control-bar",["require","exports","tslib","dcgview","./dcgview-keypad","loadcss!./control-bar"],function(S,c,x,t,l){Object.defineProperty(c,"__esModule",{value:!0});var n=(function(i){function s(){return i!==null&&i.apply(this,arguments)||this}return x.__extends(s,i),s.prototype.template=function(){var g=this;return t.createElement("div",{class:t.const("dcg-keypad-control-bar dcg-do-not-blur"),role:t.const("group"),"aria-label":function(){return g.controller.t("Control Bar")}},t.createElement("div",{class:t.const("dcg-keypad-control-bar-contents")},this.children))},s})(l.default);c.default=n}),P("loadcss!keypad/control-btn",function(){}),P("keypad/control-btn",["require","exports","tslib","dcgview","loadcss!./control-btn"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=(function(n){function i(){return n!==null&&n.apply(this,arguments)||this}return x.__extends(i,n),i.prototype.template=function(){var s=this;return t.createElement("div",{class:function(){return{"dcg-keypad-control-btn":!0,"dcg-disabled":s.isDisabled(),"dcg-selected":!s.isDisabled()&&s.isSelected(),"dcg-selectable-btn":!s.isDisabled()&&s.isSelectable(),"dcg-narrow-control-btn":s.props.narrowButton&&s.props.narrowButton()}},didMount:this.bindFn(this.didMount),role:t.const("button"),"aria-disabled":function(){return s.isDisabled()||void 0},"aria-label":function(){return s.getAriaLabel()},"dcg-command":this.props.command,onTap:this.bindFn(this.handleTap),"aria-pressed":function(){return s.hasPopup()||s.isDisabled()||!s.isSelectable()?void 0:s.isSelected()},"aria-expanded":function(){return s.hasPopup()&&!s.isDisabled()?s.isSelected():void 0},tabindex:this.bindFn(this.getTabIndex)},this.children)},i.prototype.getTabIndex=function(){return this.isDisabled()?void 0:this.props.ignoreInTabOrder&&this.props.ignoreInTabOrder()?-1:0},i.prototype.handleTap=function(s){this.isDisabled()||this.props.onTap(s)},i.prototype.getAriaLabel=function(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()},i.prototype.hasPopup=function(){return!!this.props.ariaPopup&&this.props.ariaPopup()},i.prototype.isDisabled=function(){return!!this.props.disabled&&this.props.disabled()},i.prototype.isSelected=function(){return!!this.props.selected&&this.props.selected()},i.prototype.isSelectable=function(){return!!this.props.selectable&&this.props.selectable()},i.prototype.didMount=function(s){this.props.didMount&&this.props.didMount(s)},i})(t.Class);c.default=l}),P("loadcss!dcgview-helpers/download-button",function(){}),P("dcgview-helpers/download-button",["require","exports","tslib","dcgview","browser","loadcss!./download-button"],function(S,c,x,t,l){function n(){if(!l.IS_SAFARI)return!1;var d=navigator.userAgent.match(/Version\/(\d+)/);return!(!d||!d[1])&&parseFloat(d[1])<11}function i(){return!l.IS_IE&&!n()&&document.createElement("a").download!==void 0}function s(){return i()||navigator.msSaveBlob!==void 0}Object.defineProperty(c,"__esModule",{value:!0}),c.canDownload=s;var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.init=function(){this.supportsDirectDownload=i()},u.prototype.template=function(){var f=this;return t.createElement("a",{role:t.const("button"),tabindex:function(){return f.props.enabled()?0:-1},"aria-disabled":function(){return!f.props.enabled()},class:function(){return{"dcg-download-button":!0,"dcg-disabled":!f.props.enabled(),"dcg-braille-equations":f.props.isBraille,"dcg-svg-button":f.props.isSvg}},didMount:this.bindFn(this.didMountDownload),didUnmount:this.bindFn(this.didUnmountDownload),didUpdate:this.bindFn(this.didUpdate),download:function(){return f.supportsDirectDownload?f.props.filename():void 0},onTap:function(y){if(!f.supportsDirectDownload&&navigator.msSaveOrOpenBlob){var h=f.props.data();h&&(navigator.msSaveOrOpenBlob(h,f.props.filename()),y.preventDefault())}}},t.createElement("i",{class:t.const("dcg-icon-download")}),t.createElement("span",null,function(){return f.props.text()}))},u.prototype.didMountDownload=function(f){this.downloadLink=f,this.didUpdate()},u.prototype.didUnmountDownload=function(){this.revokeBlobURL()},u.prototype.didUpdate=function(){this.updateDownloadURL(),this.cachedObjectURL&&(this.downloadLink.href=this.cachedObjectURL)},u.prototype.updateDownloadURL=function(){if(this.revokeBlobURL(),this.supportsDirectDownload){var f=this.props.data();f&&(this.cachedObjectURL=URL.createObjectURL(f))}},u.prototype.revokeBlobURL=function(){this.cachedObjectURL&&URL.revokeObjectURL(this.cachedObjectURL)},u})(t.Class);c.default=g}),P("lib/export-braille-equations",["require","exports","abraham","graphing-calc/models/expression","expressions/regression_view","core/lib/number-to-latex"],function(S,c,x,t,l,n){function i(f,y,h){if(h===void 0&&(h=!1),h&&(f=f.replace(/ /g,"\\ ")),y==="none")return f;var p=y==="nemeth"?x.latexToNemeth(f):x.latexToUeb(f);return p.isError?"":x.UnicodeBraille.toBrailleAscii(p.value)}function s(f,y){if(y==="none")return"";var h=[];h.push(i("Expression List",y,!0)),h.push(""),h.push("");for(var p="",r=f.getItemCount(),o=0;o<r;o++){var m=f.getItemModelByIndex(o);if(m&&!m.secret){p!==""&&m.type!=="folder"&&p!==m.folderId&&(h.push(d(i("End Folder",y,!0))),p="");var b="";switch(m.type){case"expression":if(!m.hidden){var E=u(m.displayIndex,y);b=m.latex;var M=[],D=m.formula;if(D&&!t.isEmpty(m)){if(f.shouldShowEvaluationForItem(m.id)){var A=D.zero_values&&D.zero_values.length?D.zero_values[0].val:D.constant_value;Array.isArray(A)?b+="\\ "+A.length+"\\ element\\ list":b+="="+A}else if(t.shouldShowCDFFooter(m))M.push(i("Min="+t.getCDFMin(m),y,!1)),M.push(i("Max="+t.getCDFMax(m),y,!1)),t.isCDFMaxValid(m)&&t.isCDFMinValid(m)&&M.push(i("CDF="+t.getCDFEvaluation(m),y,!1));else if(t.isTTest(m)){var v=t.getTTestResults(m);v&&(M.push(i("<"+n.numberToStatsConfidenceLatex(v.lessThan,5),y,!1)),M.push(i(">"+n.numberToStatsConfidenceLatex(v.greaterThan,5),y,!1)),M.push(i("\\ne"+n.numberToStatsConfidenceLatex(v.notEqual,5),y,!1)))}else if(D.is_regression&&D.regression){var k=D.regression,J=k.statistics,X=k.parameters;J.hasOwnProperty("Rsquared")&&M.push(i("R^2="+l.getRoundedStat(k,"Rsquared"),y,!1)),J.hasOwnProperty("rsquared")&&M.push(i("r^2="+l.getRoundedStat(k,"rsquared"),y,!1)),J.hasOwnProperty("r")&&M.push(i("r="+l.getRoundedStat(k,"r"),y,!1)),J.hasOwnProperty("RMSE")&&M.push(i("\\operatorname{RMSE}="+l.getRoundedStat(k,"RMSE"),y,!1));for(var te in X)M.push(i(te+"="+l.getRoundedParam(k,te),y,!1))}}h.push(E+"  "+i(b,y,!1)),h.push.apply(h,M)}break;case"text":h.push(i(m.text,y,!0));break;case"folder":m.collapsed?b="Collapsed Folder "+m.title:(b="Start Folder "+m.title,p=m.id),h.push(d(i(b,y,!0)));break;case"image":h.push(i("Image",y,!1));break;case"table":h.push(d(i("Start Table",y,!0)));for(var H=0,z=m.rowModels;H<z.length;H++){for(var B=z[H],F=[],$=0,re=B.cells;$<re.length;$++){var K=re[$],ue="";if(K.type==="header")ue=K.latex||"";else if(K.type==="cell"){var ie=K.column.index,Q=K.row.index-1,pe=K.column.disabled;ue=pe?K.column.computedValues[Q]||"":m.columns[ie].values[Q]||""}F.push(i(ue,y))}var ee=F.join("	");/^\t/.test(ee)||h.push(ee)}h.push(d(i("End Table",y,!0)));break;default:return m}}}return p!==""&&h.push(d(i("End Folder",y,!0))),h.join(`
`)}function g(f,y){if(y==="none")return"";var h=[];h.push(i("Expression List",y,!0)),h.push(""),h.push("");for(var p=0,r=f.getExpressionOrder();p<r.length;p++){var o=r[p],m=u(f.getExpressionIndex(o)+1,y),b=f.getExpressionLatex(o),E=f.getExpressionValue(o);E!==void 0&&(b+="="+E),h.push(m+"  "+i(b,y,!1))}return h.join(`
`)}function d(f){var y="--------------------";return y+`
`+f+`
`+y}function u(f,y){var h=""+f;return y==="nemeth"?i(h,y,!1)+"_4":y==="ueb"?i(h+".",y,!1):""}Object.defineProperty(c,"__esModule",{value:!0}),c.getBrailleEquationsGraphing=s,c.getBrailleEquationsBasic=g}),P("loadcss!basic/settings-menu",function(){}),P("basic/settings-menu",["require","exports","tslib","keys","dcgview","./dcgview-basic","jquery","dcgview-helpers/download-button","lib/export-braille-equations","loadcss!./settings-menu"],function(S,c,x,t,l,n,i,s,g){Object.defineProperty(c,"__esModule",{value:!0});var d=l.Components.If,u=(function(f){function y(){return f!==null&&f.apply(this,arguments)||this}return x.__extends(y,f),y.prototype.template=function(){var h=this;return l.createElement("div",{class:function(){return{"dcg-settings-dropdown":!0,"dcg-popover":!0,"dcg-has-background-color":h.controller.hasBackgroundColor(),"dcg-point-left":h.controller.containerSize.height<=420}},role:l.const("complementary"),"aria-label":l.const("Settings Menu"),didMount:this.bindFn(this.didMountSettingsDropdown),didUnmount:this.bindFn(this.didUnmountSettingsDropdown)},l.createElement("div",{class:l.const("dcg-popover-interior"),style:function(){return{background:h.controller.getBackgroundColor()}}},l.createElement("div",{class:function(){return{"dcg-settings-menu-option":!0,"dcg-modern-btn":!0,"dcg-action-projectormode":!0,"dcg-active":h.controller.isProjectorMode()}},role:l.const("button"),onTap:this.bindFn(this.onToggleProjectorMode),tabindex:l.const(0),"aria-label":function(){return h.controller.t("Projector Mode")},"aria-pressed":function(){return h.controller.isProjectorMode()}},function(){return h.controller.t("Projector Mode")}),l.createElement("div",{class:function(){return{"dcg-settings-menu-option":!0,"dcg-braille-container":!0}}},l.createElement("div",{class:l.const("dcg-group-title")},function(){return h.controller.t("Braille Mode")}),l.createElement("div",{role:l.const("group"),"aria-label":function(){return h.controller.t("Braille Mode")},class:l.const("dcg-braille-options-buttons")},l.createElement("span",{class:function(){return{"dcg-braille-option":!0,"dcg-selected":h.isLatex()}},role:l.const("button"),onTap:function(){return h.setBrailleMode("none")},tabindex:l.const(0),"aria-label":function(){return h.controller.t("Off")},"aria-pressed":function(){return h.isLatex()}},function(){return h.controller.t("Off")}),l.createElement("span",{class:function(){return{"dcg-braille-option":!0,"dcg-selected":h.isNemeth()}},role:l.const("button"),onTap:function(){return h.setBrailleMode("nemeth")},tabindex:l.const(0),"aria-label":function(){return h.controller.t("Nemeth")},"aria-pressed":function(){return h.isNemeth()}},function(){return h.controller.t("Nemeth")}),l.createElement("span",{class:function(){return{"dcg-braille-option":!0,"dcg-selected":h.isUEB()}},role:l.const("button"),onTap:function(){return h.setBrailleMode("ueb")},tabindex:l.const(0),"aria-label":function(){return h.controller.t("UEB")},"aria-pressed":function(){return h.isUEB()}},function(){return h.controller.t("UEB")})),l.createElement(d,{predicate:function(){return h.controller.renderAsBraille()}},function(){return l.createElement("div",null,l.createElement("div",{role:l.const("checkbox"),tabindex:l.const(0),onTap:function(){return h.onToggleSixKeyInput()},"aria-checked":function(){return h.controller.getSixKeyInput()},"aria-label":function(){return h.controller.t("Six Key Braille Input")},class:function(){return{"dcg-settings-menu-option":!0,"dcg-do-not-blur":!0,"dcg-six-key-checkbox":!0,"dcg-checked":h.controller.getSixKeyInput(),"dcg-checkbox-container":!0}},handleEvent:l.const(!0)},l.createElement("span",{class:l.const("dcg-checkbox-box")},l.createElement("i",{class:l.const("dcg-icon-check")})),l.createElement("span",{class:l.const("dcg-checkbox-label")},function(){return h.controller.t("Six Key Braille Input")})),l.createElement("a",{href:l.const("https://www.desmos.com/accessibility#braille"),class:l.const("dcg-six-key-info"),target:l.const("_blank")},l.createElement("i",{class:l.const("dcg-icon-question-sign")})),l.createElement(d,{predicate:function(){return s.canDownload()&&h.controller.getBrailleExpressionDownload()}},function(){return l.createElement(s.default,{data:function(){var p=g.getBrailleEquationsBasic(h.model,h.controller.getBrailleMode());return new Blob([p],{type:"text/plain"})},enabled:h.const(!0),filename:h.const("desmos-equations.brl"),text:function(){return h.controller.t("Download Braille Equations")},isBraille:h.const(!0)})}))})),l.createElement("div",{role:l.const("checkbox"),tabindex:l.const(0),onTap:this.bindFn(this.onToggleInvertedColors),"aria-checked":function(){return h.controller.getInvertedColors()},"aria-label":function(){return h.controller.t("Reverse Contrast")},class:function(){return{"dcg-settings-menu-option":!0,"dcg-do-not-blur":!0,"dcg-checked":h.controller.getInvertedColors(),"dcg-checkbox-container":!0,"dcg-reverse-contrast":!0}},handleEvent:l.const(!0)},l.createElement("span",{class:l.const("dcg-checkbox-box")},l.createElement("i",{class:l.const("dcg-icon-check")})),l.createElement("span",{class:l.const("dcg-checkbox-label")},function(){return h.controller.t("Reverse Contrast")})),l.createElement(d,{predicate:function(){return!!h.getVersionNumber()}},function(){return l.createElement("div",{class:l.const("dcg-version-number")},l.const("Version: "),function(){return h.getVersionNumber()})})))},y.prototype.getVersionNumber=function(){var h=window;if(h&&h.AppBridge)return h.AppBridge.versionNumber},y.prototype.didUnmountSettingsDropdown=function(){i(document).off(".dcg-settings-view")},y.prototype.didMountSettingsDropdown=function(h){var p=this;this.settingsGroupNode=h,i(document).on("dcg-tapstart.dcg-settings-view",function(r){i(r.target).closest(".dcg-basic-settings-container").length===0&&p.controller.dispatch({type:"close-settings-menu"})}),i(document).on("keydown.dcg-settings-view",function(r){if(t.lookup(r)==="Esc"&&(p.controller.dispatch({type:"close-settings-menu"}),p.controller.dispatch({type:"focus-last-expression"})),t.lookup(r)==="Tab"&&!r.altKey&&!r.metaKey&&!r.ctrlKey){var o=document.activeElement,m=i(p.props.settingsButtonNode()),b=i(p.settingsGroupNode).find(".dcg-settings-menu-option:last");r.shiftKey||o!==b[0]?r.shiftKey&&o===m[0]&&(b.focus(),r.preventDefault(),r.stopPropagation()):(m.focus(),r.preventDefault(),r.stopPropagation())}})},y.prototype.setBrailleMode=function(h){this.controller.dispatch({type:"set-braille-mode",mode:h})},y.prototype.isNemeth=function(){return this.controller.getBrailleMode()==="nemeth"},y.prototype.isUEB=function(){return this.controller.getBrailleMode()==="ueb"},y.prototype.isLatex=function(){return this.controller.getBrailleMode()==="none"},y.prototype.onToggleSixKeyInput=function(){var h=!this.controller.getSixKeyInput();this.controller.dispatch({type:"set-six-key-input",mode:h})},y.prototype.onToggleInvertedColors=function(){var h=!this.controller.getInvertedColors();this.controller.dispatch({type:"update-inverted-colors",mode:h})},y.prototype.onToggleProjectorMode=function(){this.controller.dispatch({type:"update-projector-mode",mode:!this.controller.isProjectorMode()})},y})(n.DCGViewBasic);c.SettingsMenu=u}),P("loadcss!basic/keypad/settings-control-button",function(){}),P("basic/keypad/settings-control-button",["require","exports","tslib","dcgview","keypad/control-btn","basic/dcgview-basic","basic/settings-menu","loadcss!./settings-control-button"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=t.Components.If,g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){var f=this,y=this.props.controller();return t.createElement("div",{class:t.const("dcg-basic-settings-container")},t.createElement(l.default,{didMount:function(h){return f.settingsButtonNode=h},command:this.const("settings"),ariaLabel:function(){return y.t("settings")},onTap:this.bindFn(this.onToggleSettingsMenu),selected:function(){return f.controller.isSettingsMenuOpen()},ariaPopup:this.const(!0)},t.createElement("i",{class:t.const("dcg-icon-wrench")})),t.createElement(s,{predicate:function(){return f.controller.isSettingsMenuOpen()}},function(){return t.createElement(i.SettingsMenu,{controller:f.props.controller,settingsButtonNode:function(){return f.settingsButtonNode}})}))},u.prototype.onToggleSettingsMenu=function(){this.controller.dispatch({type:"toggle-settings-menu"})},u})(n.DCGViewBasic);c.default=g}),P("basic/keypad/fourfunction-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","./settings-control-button","basic/dcgview-basic"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=t.Components,d=g.If,u=g.IfElse,f=(function(y){function h(){return y!==null&&y.apply(this,arguments)||this}return x.__extends(h,y),h.prototype.template=function(){var p=this,r=this.props.controller();return t.createElement(l.default,{controller:this.props.controller},t.createElement(d,{predicate:function(){return!p.controller.getRestrictedEditing()}},function(){return t.createElement(n.default,{command:p.const("undo"),disabled:function(){return!r.canUndo()},ariaLabel:function(){return r.t("undo")},onTap:function(o){return r.dispatch({type:"undo",source:o.device==="keyboard"?"button-keyboard":"button-tap"})}},t.createElement("i",{class:t.const("dcg-icon-undo")}))}),t.createElement(d,{predicate:function(){return!p.controller.getRestrictedEditing()}},function(){return t.createElement(n.default,{command:p.const("redo"),disabled:function(){return!r.canRedo()},ariaLabel:function(){return r.t("redo")},onTap:function(o){return r.dispatch({type:"redo",source:o.device==="keyboard"?"button-keyboard":"button-tap"})}},t.createElement("i",{class:t.const("dcg-icon-redo")}))}),u(function(){return r.shouldShowClear()},{true:function(){return t.createElement(n.default,{command:p.const("clear"),ariaLabel:function(){return r.t("clear")},onTap:function(){return r.dispatch({type:"clear"})}},function(){return r.t("clear")})},false:function(){return t.createElement(n.default,{command:p.const("clearall"),disabled:function(){return!r.canClear()},ariaLabel:function(){return r.t("clear all")},onTap:function(){return r.dispatch({type:"set-blank",opts:{allowUndo:!0}})}},function(){return r.t("clear all")})}}),t.createElement(d,{predicate:function(){return p.controller.getRestrictedEditing()}},function(){return t.createElement("div",{class:t.const("dcg-spacer-2")})}),t.createElement(d,{predicate:function(){return r.getBrailleMode()==="none"}},function(){return t.createElement(n.default,{command:p.const("backspace"),ariaLabel:function(){return r.t("backspace")},disabled:function(){return!r.canBackspace()},onTap:function(){return r.dispatch({type:"keypad/press-key",key:"Backspace"})}},t.createElement("i",{class:t.const("dcg-icon-delete")}))}),t.createElement(d,{predicate:function(){return p.props.controller().getSettingsMenu()}},function(){return t.createElement(i.default,{controller:p.props.controller})}))},h.prototype.onToggleSettingsMenu=function(){this.controller.dispatch({type:"toggle-settings-menu"})},h})(s.DCGViewBasic);c.default=f}),P("basic/keypad/single-expression-fourfunction-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","basic/dcgview-basic"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=t.Components.If,g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){var f=this,y=this.props.controller();return t.createElement(l.default,{controller:this.props.controller},t.createElement(s,{predicate:function(){return!f.controller.getRestrictedEditing()}},function(){return t.createElement(n.default,{command:f.const("undo"),disabled:function(){return!y.canUndo()},ariaLabel:function(){return y.t("undo")},onTap:function(h){return y.dispatch({type:"undo",source:h.device==="keyboard"?"button-keyboard":"button-tap"})}},t.createElement("i",{class:t.const("dcg-icon-undo")}))}),t.createElement(s,{predicate:function(){return!f.controller.getRestrictedEditing()}},function(){return t.createElement(n.default,{command:f.const("redo"),disabled:function(){return!y.canRedo()},ariaLabel:function(){return y.t("redo")},onTap:function(h){return y.dispatch({type:"redo",source:h.device==="keyboard"?"button-keyboard":"button-tap"})}},t.createElement("i",{class:t.const("dcg-icon-redo")}))}),t.createElement(n.default,{command:this.const("clear"),ariaLabel:function(){return y.t("clear")},onTap:function(){return y.dispatch({type:"clear"})}},function(){return y.t("clear")}),t.createElement(s,{predicate:function(){return f.controller.getRestrictedEditing()}},function(){return t.createElement("div",{class:t.const("dcg-spacer-2")})}),t.createElement(s,{predicate:function(){return y.getBrailleMode()==="none"}},function(){return t.createElement(n.default,{command:f.const("backspace"),ariaLabel:function(){return y.t("backspace")},disabled:function(){return!y.canBackspace()},onTap:function(){return y.dispatch({type:"keypad/press-key",key:"Backspace"})}},t.createElement("i",{class:t.const("dcg-icon-delete")}))}))},u})(i.DCGViewBasic);c.default=g}),P("loadcss!keypad/control-toggle",function(){}),P("keypad/control-toggle",["require","exports","tslib","lib/aria","core/lib/color-helpers","dcgview","./dcgview-keypad","loadcss!./control-toggle"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=(function(g){function d(){return g!==null&&g.apply(this,arguments)||this}return x.__extends(d,g),d.prototype.template=function(){var u=this;return n.createElement("div",{class:function(){return{"dcg-keypad-control-toggle":!0,"dcg-toggled":u.props.toggled()}},role:n.const("button"),tabindex:n.const("0"),"aria-label":this.bindFn(this.getAriaLabel),onTap:this.bindFn(this.handleTap)},n.createElement("div",{class:n.const("dcg-ctrl-toggle-option")},this.props.defaultOption),n.createElement("div",{class:n.const("dcg-ctrl-toggle-option")},this.props.toggledOption),n.createElement("div",{class:n.const("dcg-ctrl-toggle-cover"),style:function(){return{background:l.shadeColor(u.controller.getBackgroundColor(),-.1)}}}))},d.prototype.getAriaLabel=function(){var u={toggled:this.props.toggledAriaLabel(),default:this.props.defaultAriaLabel()};return this.props.toggled()?this.controller.t("__toggled__ selected. Press Enter to switch to __default__.",u):this.controller.t("__default__ selected. Press Enter to switch to __toggled__.",u)},d.prototype.handleTap=function(){this.props.toggled()?t.alert(this.props.defaultAriaLabel()):t.alert(this.props.toggledAriaLabel()),this.props.onTap(this.props.command())},d})(i.default);c.default=s}),P("basic/keypad/scientific-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","basic/dcgview-basic","keypad/control-toggle","./settings-control-button"],function(S,c,x,t,l,n,i,s,g){Object.defineProperty(c,"__esModule",{value:!0});var d=t.Components,u=d.If,f=d.IfElse,y=(function(h){function p(){return h!==null&&h.apply(this,arguments)||this}return x.__extends(p,h),p.prototype.template=function(){var r=this,o=this.props.controller();return t.createElement(l.default,{controller:this.props.controller},t.createElement(n.default,{command:this.const("main"),selected:function(){return o.getKeyboardMode()==="main"},disabled:function(){return r.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return o.dispatch({type:"main"})},ariaLabel:function(){return o.t("main")}},function(){return o.t("main")}),t.createElement(n.default,{command:this.const("ABC"),selected:function(){return["qwerty","capitalQwerty","letters"].indexOf(o.getKeyboardMode())!==-1},disabled:function(){return r.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),ariaLabel:function(){return o.t("A B C")},onTap:function(){return o.dispatch({type:"ABC"})}},function(){return o.t("abc")}),t.createElement(n.default,{command:this.const("functions"),selected:function(){return["functions","restrictedFunctions"].indexOf(o.getKeyboardMode())!==-1},ariaLabel:function(){return o.t("Functions")},disabled:function(){return r.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return o.dispatch({type:"functions"})}},function(){return o.t("func")}),t.createElement(s.default,{command:this.const("degrees"),toggled:function(){return r.model.getDegreeMode()},defaultOption:function(){return o.t("rad")},toggledOption:function(){return o.t("deg")},defaultAriaLabel:function(){return o.t("Radians")},toggledAriaLabel:function(){return o.t("Degrees")},onTap:function(){return o.dispatch({type:"degrees"})},controller:this.props.controller}),t.createElement(u,{predicate:function(){return!r.controller.getRestrictedEditing()}},function(){return t.createElement(n.default,{command:r.const("undo"),disabled:function(){return!o.canUndo()},ariaLabel:function(){return o.t("Undo")},onTap:function(m){return o.dispatch({type:"undo",source:m.device==="keyboard"?"button-keyboard":"button-tap"})}},t.createElement("i",{class:t.const("dcg-icon-undo")}))}),t.createElement(u,{predicate:function(){return!r.controller.getRestrictedEditing()}},function(){return t.createElement(n.default,{command:r.const("redo"),disabled:function(){return!o.canRedo()},ariaLabel:function(){return o.t("Redo")},onTap:function(m){return o.dispatch({type:"redo",source:m.device==="keyboard"?"button-keyboard":"button-tap"})}},t.createElement("i",{class:t.const("dcg-icon-redo")}))}),f(function(){return o.shouldShowClear()},{true:function(){return t.createElement(n.default,{command:r.const("clear"),ariaLabel:function(){return o.t("clear")},onTap:function(){return o.dispatch({type:"clear"})}},function(){return o.t("clear")})},false:function(){return t.createElement(n.default,{command:r.const("clearall"),disabled:function(){return!o.canClear()},ariaLabel:function(){return o.t("clear all")},onTap:function(){return o.dispatch({type:"set-blank",opts:{allowUndo:!0}})}},function(){return o.t("clear all")})}}),t.createElement(u,{predicate:function(){return r.props.controller().getSettingsMenu()}},function(){return t.createElement(g.default,{controller:r.props.controller})}))},p})(i.DCGViewBasic);c.default=y}),P("basic/keypad/single-expression-scientific-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","basic/dcgview-basic","keypad/control-toggle"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=t.Components.If,d=(function(u){function f(){return u!==null&&u.apply(this,arguments)||this}return x.__extends(f,u),f.prototype.template=function(){var y=this,h=this.props.controller();return t.createElement(l.default,{controller:this.props.controller},t.createElement(s.default,{command:this.const("degrees"),toggled:function(){return y.model.getDegreeMode()},defaultOption:function(){return h.t("rad")},toggledOption:function(){return h.t("deg")},defaultAriaLabel:function(){return h.t("Radians")},toggledAriaLabel:function(){return h.t("Degrees")},onTap:function(){return h.dispatch({type:"degrees"})},controller:this.props.controller}),t.createElement("div",{class:t.const("dcg-spacer")}),t.createElement(g,{predicate:function(){return!y.controller.getRestrictedEditing()}},function(){return t.createElement(n.default,{command:y.const("undo"),disabled:function(){return!h.canUndo()},ariaLabel:function(){return h.t("Undo")},onTap:function(p){return h.dispatch({type:"undo",source:p.device==="keyboard"?"button-keyboard":"button-tap"})}},t.createElement("i",{class:t.const("dcg-icon-undo")}))}),t.createElement(g,{predicate:function(){return!y.controller.getRestrictedEditing()}},function(){return t.createElement(n.default,{command:y.const("redo"),disabled:function(){return!h.canRedo()},ariaLabel:function(){return h.t("Redo")},onTap:function(p){return h.dispatch({type:"redo",source:p.device==="keyboard"?"button-keyboard":"button-tap"})}},t.createElement("i",{class:t.const("dcg-icon-redo")}))}),t.createElement("div",{class:t.const("dcg-spacer")}),t.createElement(n.default,{narrowButton:this.const(!0),command:this.const("clear"),ariaLabel:function(){return h.t("clear")},onTap:function(){return h.dispatch({type:"clear"})}},function(){return h.t("clear")}),t.createElement(n.default,{narrowButton:this.const(!0),command:this.const("backspace"),ariaLabel:function(){return h.t("backspace")},onTap:function(){return h.dispatch({type:"keypad/press-key",key:"Backspace"})}},t.createElement("i",{class:t.const("dcg-icon-delete")})))},f})(i.DCGViewBasic);c.default=d}),P("basic/keypad/fourfunction-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){var f=this;return t.createElement("div",{role:t.const("group"),"aria-label":function(){return f.t("keypad")}},t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"(",{colspan:this.parenColspan()}),n.view(this,")",{colspan:this.parenColspan()}),this.makeAdditionalFunctionKey(0),this.makeAdditionalFunctionKey(1),n.view(this,"/")),t.createElement(s.default,null,n.view(this,"7",{style:"highlight"}),n.view(this,"8",{style:"highlight"}),n.view(this,"9",{style:"highlight"}),n.view(this,"*")),t.createElement(s.default,null,n.view(this,"4",{style:"highlight"}),n.view(this,"5",{style:"highlight"}),n.view(this,"6",{style:"highlight"}),n.view(this,"-")),t.createElement(s.default,null,n.view(this,"1",{style:"highlight"}),n.view(this,"2",{style:"highlight"}),n.view(this,"3",{style:"highlight"}),n.view(this,"+")),t.createElement(s.default,null,n.view(this,"0",{style:"highlight"}),n.view(this,".",{style:"highlight"}),n.view(this,"ans"),n.view(this,"enter",{style:"blue"}))))},u.prototype.parenColspan=function(){return this.controller.getAdditionalFunctions().length>1?.5:1},u.prototype.makeAdditionalFunctionKey=function(f){var y=this.controller.getAdditionalFunctions()[f];return y==="exponent"?n.view(this,"a^b"):y==="percent"?n.view(this,"%"):y==="sqrt"?n.view(this,"sqrt"):void 0},u})(l.DCGViewBasic);c.default=g}),P("basic/keypad/single-expression-fourfunction-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){var f=this;return t.createElement("div",{role:t.const("group"),"aria-label":function(){return f.t("keypad")}},t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"(",{colspan:this.parenColspan()}),n.view(this,")",{colspan:this.parenColspan()}),this.makeAdditionalFunctionKey(1)),t.createElement(s.default,null,n.view(this,"7",{style:"highlight"}),n.view(this,"8",{style:"highlight"}),n.view(this,"9",{style:"highlight"}),n.view(this,"/")),t.createElement(s.default,null,n.view(this,"4",{style:"highlight"}),n.view(this,"5",{style:"highlight"}),n.view(this,"6",{style:"highlight"}),n.view(this,"*")),t.createElement(s.default,null,n.view(this,"1",{style:"highlight"}),n.view(this,"2",{style:"highlight"}),n.view(this,"3",{style:"highlight"}),n.view(this,"-")),t.createElement(s.default,null,n.view(this,"0",{style:"highlight"}),n.view(this,".",{style:"highlight",colspan:this.dotColspan()}),this.makeAdditionalFunctionKey(0),n.view(this,"+"))))},u.prototype.parenColspan=function(){return this.controller.getAdditionalFunctions().length===2?1.5:2},u.prototype.dotColspan=function(){return this.controller.getAdditionalFunctions().length?1:2},u.prototype.makeAdditionalFunctionKey=function(f){var y=this.controller.getAdditionalFunctions()[f];return y==="exponent"?n.view(this,"a^b"):y==="percent"?n.view(this,"%"):y==="sqrt"?n.view(this,"sqrt"):void 0},u})(l.DCGViewBasic);c.default=g}),P("basic/keypad/single-expression-scientific-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){return t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"("),n.view(this,")"),n.view(this,"x^2"),n.view(this,"sqrt"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"x^3"),n.view(this,"x^y"),n.view(this,"ythroot")),t.createElement(s.default,null,n.view(this,"7",{style:"highlight"}),n.view(this,"8",{style:"highlight"}),n.view(this,"9",{style:"highlight"}),n.view(this,"/"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"pi"),n.view(this,"e^x"),n.view(this,"!")),t.createElement(s.default,null,n.view(this,"4",{style:"highlight"}),n.view(this,"5",{style:"highlight"}),n.view(this,"6",{style:"highlight"}),n.view(this,"*"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"log"),n.view(this,"ln"),n.view(this,"|x|")),t.createElement(s.default,null,n.view(this,"1",{style:"highlight"}),n.view(this,"2",{style:"highlight"}),n.view(this,"3",{style:"highlight"}),n.view(this,"-"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"sin"),n.view(this,"cos"),n.view(this,"tan")),t.createElement(s.default,null,n.view(this,"0",{style:"highlight"}),n.view(this,".",{style:"highlight"}),n.view(this,"x/y"),n.view(this,"+"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"arcsin"),n.view(this,"arccos"),n.view(this,"arctan")))},u})(l.DCGViewBasic);c.default=g}),P("basic/keypad/sci-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=t.Components.IfElse,d=(function(u){function f(){return u!==null&&u.apply(this,arguments)||this}return x.__extends(f,u),f.prototype.template=function(){var y=this;return t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"a^2"),n.view(this,"a^b"),n.view(this,"|a|"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"7",{style:"highlight"}),n.view(this,"8",{style:"highlight"}),n.view(this,"9",{style:"highlight"}),n.view(this,"/"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"%"),n.view(this,"a/b")),t.createElement(s.default,null,n.view(this,"sqrt"),n.view(this,"nthroot"),n.view(this,"pi"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"4",{style:"highlight"}),n.view(this,"5",{style:"highlight"}),n.view(this,"6",{style:"highlight"}),n.view(this,"*"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"left",{style:"highlight"}),n.view(this,"right",{style:"highlight"})),t.createElement(s.default,null,n.view(this,"sin"),n.view(this,"cos"),n.view(this,"tan"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"1",{style:"highlight"}),n.view(this,"2",{style:"highlight"}),n.view(this,"3",{style:"highlight"}),n.view(this,"-"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.spacer(.5),n.view(this,"backspace",{style:"highlight",colspan:1.5})),t.createElement(s.default,null,n.view(this,"("),n.view(this,")"),g(function(){return y.controller.getReplaceCommaWith10Exp()},{true:function(){return n.view(y,"10^n")},false:function(){return n.view(y,",")}}),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"0",{style:"highlight"}),n.view(this,".",{style:"highlight"}),n.view(this,"ans"),n.view(this,"+"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"enter",{style:"blue",colspan:2})))},f})(l.DCGViewBasic);c.default=d}),P("basic/keypad/sci-qwerty-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){return t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"q"),n.view(this,"w"),n.view(this,"e"),n.view(this,"r"),n.view(this,"t"),n.view(this,"y"),n.view(this,"u"),n.view(this,"i"),n.view(this,"o"),n.view(this,"p")),t.createElement(s.default,null,t.createElement("div",{class:t.const("dcg-half-width-placeholder")}),n.view(this,"a"),n.view(this,"s"),n.view(this,"d"),n.view(this,"f"),n.view(this,"g"),n.view(this,"h"),n.view(this,"j"),n.view(this,"k"),n.view(this,"l"),t.createElement("div",{class:t.const("dcg-half-width-placeholder")})),t.createElement(s.default,null,n.view(this,"=",{style:"highlight"}),n.view(this,"z"),n.view(this,"x"),n.view(this,"c"),n.view(this,"v"),n.view(this,"b"),n.view(this,"n"),n.view(this,"m"),n.view(this,","),n.view(this,"backspace",{style:"highlight"})),t.createElement(s.default,null,n.view(this,"shift",{style:"highlight",colspan:1.5}),n.view(this,"("),n.view(this,")"),n.view(this,"["),n.view(this,"]"),n.view(this,"!"),n.view(this,"'"),n.view(this,"pi"),n.view(this,"enter",{style:"blue",colspan:1.5})))},u})(l.DCGViewBasic);c.default=g}),P("basic/keypad/sci-letters-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){return t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"a"),n.view(this,"b"),n.view(this,"c"),n.view(this,"d"),n.view(this,"e"),n.view(this,"f"),n.view(this,"g"),n.view(this,"h"),n.view(this,"i"),n.view(this,"j")),t.createElement(s.default,null,n.view(this,"k"),n.view(this,"l"),n.view(this,"m"),n.view(this,"n"),n.view(this,"o"),n.view(this,"p"),n.view(this,"q"),n.view(this,"r"),n.view(this,"s"),n.view(this,"t")),t.createElement(s.default,null,n.view(this,"=",{style:"highlight"}),n.view(this,","),n.view(this,"u"),n.view(this,"v"),n.view(this,"w"),n.view(this,"x"),n.view(this,"y"),n.view(this,"z"),n.view(this,"pi"),n.view(this,"backspace",{style:"highlight"})),t.createElement(s.default,null,n.view(this,"shift",{style:"highlight",colspan:2}),n.view(this,"("),n.view(this,")"),n.view(this,"["),n.view(this,"]"),n.view(this,"!"),n.view(this,"'"),n.view(this,"enter",{style:"blue",colspan:2})))},u})(l.DCGViewBasic);c.default=g}),P("basic/keypad/sci-capital-qwerty-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){return t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"Q"),n.view(this,"W"),n.view(this,"E"),n.view(this,"R"),n.view(this,"T"),n.view(this,"Y"),n.view(this,"U"),n.view(this,"I"),n.view(this,"O"),n.view(this,"P")),t.createElement(s.default,null,t.createElement("div",{class:t.const("dcg-half-width-placeholder")}),n.view(this,"A"),n.view(this,"S"),n.view(this,"D"),n.view(this,"F"),n.view(this,"G"),n.view(this,"H"),n.view(this,"J"),n.view(this,"K"),n.view(this,"L"),t.createElement("div",{class:t.const("dcg-half-width-placeholder")})),t.createElement(s.default,null,n.view(this,"=",{style:"highlight"}),n.view(this,"Z"),n.view(this,"X"),n.view(this,"C"),n.view(this,"V"),n.view(this,"B"),n.view(this,"N"),n.view(this,"M"),n.view(this,","),n.view(this,"backspace",{style:"highlight"})),t.createElement(s.default,null,n.view(this,"shift",{style:"highlight",colspan:1.5}),n.view(this,"("),n.view(this,")"),n.view(this,"["),n.view(this,"]"),n.view(this,"!"),n.view(this,"'"),n.view(this,"pi"),n.view(this,"enter",{style:"blue",colspan:1.5})))},u})(l.DCGViewBasic);c.default=g}),P("basic/keypad/sci-capital-letters-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){return t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"A"),n.view(this,"B"),n.view(this,"C"),n.view(this,"D"),n.view(this,"E"),n.view(this,"F"),n.view(this,"G"),n.view(this,"H"),n.view(this,"I"),n.view(this,"J")),t.createElement(s.default,null,n.view(this,"K"),n.view(this,"L"),n.view(this,"M"),n.view(this,"N"),n.view(this,"O"),n.view(this,"P"),n.view(this,"Q"),n.view(this,"R"),n.view(this,"S"),n.view(this,"T")),t.createElement(s.default,null,n.view(this,"=",{style:"highlight"}),n.view(this,","),n.view(this,"U"),n.view(this,"V"),n.view(this,"W"),n.view(this,"X"),n.view(this,"Y"),n.view(this,"Z"),n.view(this,"pi"),n.view(this,"backspace",{style:"highlight"})),t.createElement(s.default,null,n.view(this,"shift",{style:"highlight",colspan:2}),n.view(this,"("),n.view(this,")"),n.view(this,"["),n.view(this,"]"),n.view(this,"!"),n.view(this,"'"),n.view(this,"enter",{style:"blue",colspan:2})))},u})(l.DCGViewBasic);c.default=g}),P("basic/keypad/sci-functions-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=t.Components.IfElse,d=(function(u){function f(){return u!==null&&u.apply(this,arguments)||this}return x.__extends(f,u),f.prototype.template=function(){var y=this;return t.createElement("div",{class:t.const("dcg-sci-func-keypad")},t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"sin"),n.view(this,"cos"),n.view(this,"tan"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"a^b"),n.view(this,"sqrt"),n.view(this,"nthroot")),t.createElement(s.default,null,n.view(this,"arcsin"),n.view(this,"arccos"),n.view(this,"arctan"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"e^x"),n.view(this,"abs"),g(function(){return y.controller.getReplaceRoundWithReciprocal()},{true:function(){return n.view(y,"a^{-1}")},false:function(){return n.view(y,"round")}})),t.createElement(s.default,null,n.view(this,"mean"),n.view(this,"stdev"),n.view(this,"stdevp"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"ln"),n.view(this,"log"),n.view(this,"backspace",{style:"highlight"})),t.createElement(s.default,null,n.view(this,"nPr"),n.view(this,"nCr"),n.view(this,"!"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),n.view(this,"e"),n.view(this,"pi"),n.view(this,"enter",{style:"blue"}))))},f})(l.DCGViewBasic);c.default=d}),P("basic/keypad/scientific-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","./sci-keypad","./sci-qwerty-keypad","./sci-letters-keypad","./sci-capital-qwerty-keypad","./sci-capital-letters-keypad","./sci-functions-keypad"],function(S,c,x,t,l,n,i,s,g,d,u){Object.defineProperty(c,"__esModule",{value:!0});var f=t.Components.SwitchUnion,y=(function(h){function p(){return h!==null&&h.apply(this,arguments)||this}return x.__extends(p,h),p.prototype.template=function(){var r=this;return t.createElement("div",{role:t.const("group"),"aria-label":function(){return r.t("keypad")}},f(function(){return r.controller.getKeyboardMode()},{qwerty:function(){return t.createElement(i.default,{controller:r.props.controller})},letters:function(){return t.createElement(s.default,{controller:r.props.controller})},capitalQwerty:function(){return t.createElement(g.default,{controller:r.props.controller})},capitalLetters:function(){return t.createElement(d.default,{controller:r.props.controller})},functions:function(){return t.createElement(u.default,{controller:r.props.controller})},main:function(){return t.createElement(n.default,{controller:r.props.controller})}}))},p})(l.DCGViewBasic);c.default=y}),P("loadcss!basic/keypad/braille-example-row",function(){}),P("basic/keypad/braille-example-row",["require","exports","tslib","dcgview","dcgview-helpers/static-mathquill-view","abraham","loadcss!./braille-example-row"],function(S,c,x,t,l,n){Object.defineProperty(c,"__esModule",{value:!0});var i=t.Components.For,s=(function(g){function d(){return g!==null&&g.apply(this,arguments)||this}return x.__extends(d,g),d.prototype.template=function(){var u=this;return t.createElement("tr",null,t.createElement(i,{each:function(){return u.getBrailleAscii(u.props.latex())},key:function(f){return f.key}},t.createElement("td",null,function(f){return t.createElement("span",{class:t.const("dcg-key-press")},function(){return f.char})})),t.createElement("td",{class:t.const("dcg-braille-font")},function(){return u.getBrailleUnicode(u.props.latex())}),t.createElement("td",null,t.createElement(l.default,{latex:function(){return u.props.latex()}})))},d.prototype.getBrailleAscii=function(u){for(var f=n.UnicodeBraille.toExpandedBrailleAscii(this.getBrailleUnicode(u)),y=[],h=0;h<f.length;h++)y.push({char:f[h],key:h+")"+f[h]});return y},d.prototype.getBrailleUnicode=function(u){var f;return this.props.brailleMode()==="nemeth"?f=n.latexToNemeth(u):this.props.brailleMode()==="ueb"&&(f=n.latexToUeb(u)),f&&f.value?f.value:""},d})(t.Class);c.BrailleExampleRow=s}),P("loadcss!basic/keypad/braille-keypad",function(){}),P("basic/keypad/braille-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","./braille-example-row","loadcss!./braille-keypad"],function(S,c,x,t,l,n){Object.defineProperty(c,"__esModule",{value:!0});var i=(function(s){function g(){return s!==null&&s.apply(this,arguments)||this}return x.__extends(g,s),g.prototype.template=function(){var d=this;return t.createElement("div",{class:function(){return{"dcg-braille-io-keypad-container":!0,"dcg-has-background-color":d.controller.hasBackgroundColor()}}},t.createElement("div",{class:t.const("dcg-braille-io-keypad")},t.createElement("div",{class:t.const("dcg-braille-description")},t.createElement("div",{class:t.const("dcg-braille-title")},function(){return d.controller.t("__mode__ is on!",{mode:d.brailleType()})}),t.createElement("div",{class:t.const("dcg-braille-info-text")},function(){return d.controller.t("Use a Refreshable Braille display, or just type Braille with a keyboard.")}),t.createElement("div",{class:t.const("dcg-blue-btn"),role:t.const("button"),tabindex:t.const(0),onTap:function(){return d.controller.dispatch({type:"set-braille-mode",mode:"none"})}},function(){return d.controller.t("Turn __mode__ off",{mode:d.brailleType()})})),t.createElement("div",{class:t.const("dcg-braille-examples-table-container")},t.createElement("table",{class:t.const("dcg-braille-examples-table")},t.createElement("tr",null,t.createElement("th",null,function(){return d.controller.t("Type this")}),t.createElement("th",null,function(){return d.brailleType()}),t.createElement("th",null,function(){return d.controller.t("Typeset")})),t.createElement(n.BrailleExampleRow,{brailleMode:function(){return d.controller.getBrailleMode()},latex:this.const("2+2")}),t.createElement(n.BrailleExampleRow,{brailleMode:function(){return d.controller.getBrailleMode()},latex:this.const("\\frac{1}{2}")}),t.createElement(n.BrailleExampleRow,{brailleMode:function(){return d.controller.getBrailleMode()},latex:this.const("\\sqrt{4}")})),t.createElement("div",{class:t.const("dcg-more-examples-link")},t.createElement("a",{href:function(){return"https://www.desmos.com/braille-examples?"+d.controller.getBrailleMode()},target:t.const("_blank")},function(){return d.controller.t("View more examples")})))))},g.prototype.brailleType=function(){return this.controller.getBrailleMode()==="nemeth"?"Nemeth":this.controller.getBrailleMode()==="ueb"?"UEB":""},g})(l.DCGViewBasic);c.default=i}),P("loadcss!basic/expression-view",function(){}),P("basic/expression-view",["require","exports","tslib","keys","core/lib/label","dcgview","lib/i18n","jquery","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","./dcgview-basic","abraham","expressions/braille-input","../lib/tooltip","../lib/abraham-helpers","loadcss!Abraham","loadcss!./expression-view"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p){Object.defineProperty(c,"__esModule",{value:!0});var r=n.Components,o=r.If,m=r.Input,b=r.Textarea,E=(function(M){function D(){return M!==null&&M.apply(this,arguments)||this}return x.__extends(D,M),D.prototype.getAriaLabel=function(){var A=this.getIndex()+1+"";return this.t("Expression __index__",{index:A})},D.prototype.didUpdate=function(){this.renderAnsValue()},D.prototype.didMountMQ=function(A){this.$mq=s(A)},D.prototype.getExp=function(){return this.model.getExpressionById(this.props.id())},D.prototype.getAns=function(){return this.model.getExpressionAns(this.props.id())},D.prototype.getAnsId=function(){return this.model.getExpressionAnsId(this.props.id())},D.prototype.getLatex=function(){return this.getExp().latex},D.prototype.getValue=function(){return this.model.getExpressionValue(this.props.id())},D.prototype.getBraille=function(){var A=this.getExp().braille;if(A!=="")return A;var v=p.latexToBraille(this.getLatex(),this.controller.getBrailleMode());return v.isError?"":f.UnicodeBraille.toExpandedBrailleAscii(v.value)},D.prototype.getIndex=function(){return this.model.getExpressionIndex(this.props.id())},D.prototype.getShowEvaluation=function(){return this.model.shouldShowEvaluationForExpression(this.props.id())},D.prototype.isFractionEvaluation=function(){return this.getExp().displayAsFraction},D.prototype.canDisplayEvaluationAsFraction=function(){return this.controller.getDecimalToFraction()&&this.model.canDisplayEvaluationAsFraction(this.props.id())},D.prototype.shouldDisplayEvaluationAsFraction=function(){return this.canDisplayEvaluationAsFraction()&&this.getExp().displayAsFraction},D.prototype.toggleFractionEvaluation=function(){this.dispatch({type:"toggle-fraction-evaluation",id:this.props.id()})},D.prototype.getFractionDisplayAriaLabel=function(){return this.shouldDisplayEvaluationAsFraction()?this.controller.t("Displaying as fraction. Press Enter to display as Decimal"):this.controller.t("Displaying as decimal. Press Enter to display as Fraction")},D.prototype.getError=function(){var A=this.model.getExpressionError(this.props.id());return A&&this.getLatex().length>0?this.t(i.unpack(A)):""},D.prototype.showError=function(){return!!this.getError()},D.prototype.getFractionMessage=function(){return this.shouldDisplayEvaluationAsFraction()?this.t("Convert to decimal."):this.t("Convert to fraction.")},D.prototype.getIsFocused=function(){return!this.controller.isSettingsMenuOpen()&&this.model.isExpressionFocused(this.props.id())},D.prototype.onFocusedChanged=function(A){this.getExp()&&(A?this.dispatch({type:"focusin",id:this.props.id()}):this.dispatch({type:"focusout",id:this.props.id()}))},D.prototype.onMQReflow=function(){this.renderedAnsData=void 0,this.renderAnsValue()},D.prototype.renderAnsValue=function(){var A=this;if(this.$mq){var v=this.getAns(),k=!1,J=this.getAnsId();if(J){var X=this.model.getExpressionById(J);k=X&&X.displayAsFraction}this.renderedAnsData&&this.renderedAnsData.value==v&&this.renderedAnsData.displayAsFraction===k||(this.renderedAnsData={value:v,displayAsFraction:k},this.$mq.find(".dcg-mq-ans").each(function(te,H){var z,B=s(H);typeof v=="number"?z=l.truncatedHTMLLabel(v,{digits:A.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:k}):typeof v=="string"&&(z=v),z?B.removeClass("dcg-invalid").html(z):B.addClass("dcg-invalid").html('<i class="dcg-icon-error"></i>')}))}},D.prototype.getEvaluationLatex=function(){var A=this.getValue();if(A===void 0&&(A=NaN),this.model.isRationalizableConstant(this.props.id())&&!this.shouldDisplayEvaluationAsFraction())return"";if(!Array.isArray(A)){var v=l.truncatedLatexLabel(A,{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:this.shouldDisplayEvaluationAsFraction()});return v==="undefined"?"=\\mathrm{undefined}":"="+v}return"\\mathrm{"+A.length+"\\ element\\ list}"},D.prototype.getEvaluationBraille=function(){var A=this.getEvaluationLatex(),v=p.latexToBraille(A,this.controller.getBrailleMode());return v.isError?"":f.UnicodeBraille.toExpandedBrailleAscii(v.value)},D.prototype.didMountBrailleInput=function(A){this.brailleInputNode=A},D.prototype.didUnmountBrailleInput=function(){this.brailleInputNode=void 0},D.prototype.handleBrailleFocus=function(A){var v=A.target;v&&setTimeout(function(){v.setSelectionRange(0,0)})},D.prototype.handleBrailleKeydown=function(A){A.altKey||A.ctrlKey||A.metaKey||A.shiftKey||(t.lookup(A)===t.UP?(this.forceModelFocus(),this.dispatch({type:"focus-prev-expression"}),A.preventDefault()):t.lookup(A)===t.DOWN?(this.forceModelFocus(),this.dispatch({type:"focus-next-expression"}),A.preventDefault()):t.lookup(A)===t.ENTER?(this.forceModelFocus(),this.dispatch({type:"insert-blank-expression"}),A.preventDefault()):t.lookup(A)===t.BACKSPACE&&document.activeElement===this.brailleInputNode&&this.getBraille()===""&&(this.dispatch({type:"backspace-from-braille"}),A.preventDefault()))},D.prototype.forceModelFocus=function(){document.activeElement!==this.brailleInputNode&&this.onFocusedChanged(!0)},D.prototype.focusBrailleInput=function(){this.brailleInputNode&&document.activeElement!==this.brailleInputNode&&this.brailleInputNode.focus()},D.prototype.getPostLabel=function(){if(this.showError())return this.getError();if(this.getShowEvaluation()){var A=this.getValue();return A===void 0&&(A=NaN),Array.isArray(A)?A.length+" element list":"equals "+l.truncatedAriaLabel(A,{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:this.shouldDisplayEvaluationAsFraction()})}return""},D.prototype.onBrailleInput=function(A){this.controller.isSettingsMenuOpen()&&this.controller.dispatch({type:"close-settings-menu"});var v=p.brailleToLatex(f.UnicodeBraille.coerceToSixDotCells(A),this.controller.getBrailleMode());this.dispatch({type:"update-latex-from-braille",latex:v.isError?"":v.value,braille:A,id:this.props.id()})},D.prototype.getIndexSubscript=function(){return"_{"+(this.getIndex()+1)+"}"},D.prototype.getEvaluationDigits=function(){return this.controller.isScientificCalc()?10:7},D.prototype.onMountContainer=function(A){this.containerNode=A},D.prototype.onTapContainer=function(A){A.target!==this.containerNode||this.getShowEvaluation()||this.showError()||this.forceModelFocus()},D.prototype.template=function(){var A=this;return n.createElement("div",{class:function(){return{"dcg-basic-expression":!0,"dcg-focused":A.getIsFocused(),"dcg-braille-io":A.controller.renderAsBraille()}},onTap:this.bindFn(this.onTapContainer),onMount:this.bindFn(this.onMountContainer)},n.createElement(o,{predicate:function(){return A.controller.renderAsBraille()}},function(){return n.createElement("div",{class:n.const("dcg-braille-input")},n.createElement(y.default,{ariaLabel:function(){var v=p.latexToBraille("eq"+A.getIndexSubscript(),A.controller.getBrailleMode());return v.isError?"":f.UnicodeBraille.toExpandedBrailleAscii(v.value)},didMount:A.bindFn(A.didMountBrailleInput),didUnmount:A.bindFn(A.didUnmountBrailleInput),onFocusedChanged:A.bindFn(A.onFocusedChanged),shouldFocus:A.bindFn(A.getIsFocused),onKeydown:A.bindFn(A.handleBrailleKeydown),onInput:A.bindFn(A.onBrailleInput),sixKeyInput:function(){return A.controller.getSixKeyInput()},value:function(){return A.getBraille()},isStatic:A.const(!1)}))}),n.createElement(o,{predicate:function(){return A.controller.renderAsBraille()}},function(){return n.createElement("div",{class:n.const("dcg-braille-evaluation-container")},n.createElement(o,{predicate:function(){return A.getShowEvaluation()}},function(){return n.createElement("div",{class:n.const("dcg-braille-evaluation")},n.createElement(m,{readonly:A.const("true"),class:A.const("dcg-braille-evaluation-inner"),value:function(){return A.getEvaluationBraille()},onFocus:A.bindFn(A.handleBrailleFocus),onKeydown:A.bindFn(A.handleBrailleKeydown),onInput:function(){}}))}),n.createElement(o,{predicate:function(){return A.showError()}},function(){return n.createElement("div",{class:n.const("dcg-braille-error")},n.createElement("div",{class:n.const("dcg-basic-expression-error")},n.createElement("i",{class:n.const("dcg-icon-error")})),n.createElement(b,{readonly:A.const("true"),class:A.const("dcg-braille-error-inner"),value:function(){return A.getError()},onFocus:A.bindFn(A.handleBrailleFocus),onKeydown:A.bindFn(A.handleBrailleKeydown),onInput:function(){}}))}))}),n.createElement(o,{predicate:function(){return A.controller.renderAsBraille()}},function(){return n.createElement("div",{class:n.const("dcg-exp-mathquill-container"),didMount:A.bindFn(A.didMountMQ),onTap:A.bindFn(A.forceModelFocus)},n.createElement(g.default,{latex:function(){return A.getLatex()},onReflow:A.bindFn(A.onMQReflow)}))}),n.createElement(o,{predicate:function(){return!A.controller.renderAsBraille()}},function(){return n.createElement("div",{class:n.const("dcg-exp-mathquill-container"),didMount:A.bindFn(A.didMountMQ)},n.createElement(d.default,{latex:function(){return A.getLatex()},onReflow:A.bindFn(A.onMQReflow),isFocused:A.bindFn(A.getIsFocused),capExpressionSize:function(){return A.controller.getCapExpressionSize()},config:A.const({typingAsteriskWritesTimesSymbol:A.controller.getTypingAsteriskWritesTimesSymbol(),typingSlashWritesDivisionSymbol:A.controller.getTypingSlashWritesDivisionSymbol(),disableCopyPaste:A.controller.getRestrictedEditing()}),getAriaLabel:function(){return A.getAriaLabel()},getAriaPostLabel:function(){return A.getPostLabel()},hasError:function(){return!1},onUserPressedKey:function(v,k){A.controller.isSettingsMenuOpen()&&A.controller.dispatch({type:"close-settings-menu"}),A.dispatch({type:"keypad/press-key",key:v,evt:k})},onUserTypedText:function(v){return A.dispatch({type:"keypad/type-text",text:v})},onUserChangedLatex:function(v){A.dispatch({type:"update-latex",id:A.props.id(),latex:v})},onFocusedChanged:A.bindFn(A.onFocusedChanged),disableSpace:function(){return A.controller.getRestrictedEditing()}}))}),n.createElement("div",{class:n.const("dcg-exp-output-container")},n.createElement(o,{predicate:function(){return A.showError()&&!A.controller.renderAsBraille()}},function(){return n.createElement(h.Tooltip,{tooltip:A.bindFn(A.getError),gravity:A.const("w"),targetClickBehavior:A.const("stick")},n.createElement("div",{class:n.const("dcg-basic-expression-error")},n.createElement("i",{class:n.const("dcg-icon-error")})))}),n.createElement(o,{predicate:function(){return A.getShowEvaluation()}},function(){return n.createElement("div",{class:function(){return{"dcg-basic-expression-value":!0,"dcg-basic-evaluation-gray":Array.isArray(A.getValue())}}},n.createElement(g.default,{latex:function(){return A.getEvaluationLatex()}}),n.createElement(o,{predicate:A.bindFn(A.canDisplayEvaluationAsFraction)},function(){return n.createElement(h.Tooltip,{tooltip:A.bindFn(A.getFractionMessage),gravity:A.const("s")},n.createElement("span",{role:n.const("button"),tabindex:n.const("0"),"aria-label":A.bindFn(A.getFractionDisplayAriaLabel),class:function(){return{"dcg-basic-fraction-toggle":!0,"dcg-selected":A.isFractionEvaluation()}},onTap:A.bindFn(A.toggleFractionEvaluation)},n.createElement("i",{class:n.const("dcg-icon-fraction")})))}))})))},D})(u.DCGViewBasic);c.default=E}),P("loadcss!basic/basic-list-view",function(){}),P("basic/basic-list-view",["require","exports","tslib","scroll_helpers","dcgview","./dcgview-basic","./expression-view","jquery","lib/conditional_blur","loadcss!./basic-list-view"],function(S,c,x,t,l,n,i,s,g){Object.defineProperty(c,"__esModule",{value:!0});var d=l.Components,u=d.For,f=d.If,y=(function(h){function p(){var r=h!==null&&h.apply(this,arguments)||this;return r.didShowAnswerHint=!1,r.didHideAnswerHint=!1,r}return x.__extends(p,h),p.prototype.template=function(){var r=this;return l.createElement("div",{class:l.const("dcg-basic-list-container"),role:l.const("complementary"),"aria-label":function(){return r.controller.t("Expression List")},didMount:this.bindFn(this.didMountContainer)},l.createElement("div",{class:l.const("dcg-basic-list-placeholder"),didMount:this.bindFn(this.didMountPlaceholder)},l.createElement(f,{predicate:this.bindFn(this.showAnswerHint)},function(){return l.createElement("div",{class:l.const("dcg-answer-hint")},function(){return r.controller.t("Your answers show up on this side.")})})),l.createElement(u,{each:function(){return r.model.getExpressionOrder()}},l.createElement("div",{class:function(){return{"dcg-basic-list":!0,"dcg-projector-mode":r.controller.isProjectorMode()}}},function(o){return l.createElement(i.default,{controller:r.props.controller,id:r.const(o)})})))},p.prototype.didMountPlaceholder=function(r){s(r).on("dcg-tap",g.default)},p.prototype.showAnswerHint=function(){if(this.didHideAnswerHint)return!1;var r=this.model.getExpressionOrder()[0];return!(!this.model.shouldShowEvaluationForExpression(r)&&!this.didShowAnswerHint)&&(this.didShowAnswerHint=!0,!(this.model.getNumberOfExpressions()>1||this.model.getExpressionLatex(r)==="")||(this.didHideAnswerHint=!0,!1))},p.prototype.didUpdate=function(){if(this.$container){var r=this.$container.find(".dcg-focused");r.length>0&&t.scrollVisible(r,this.$container,50)}},p.prototype.didMountContainer=function(r){this.$container=s(r)},p})(n.DCGViewBasic);c.default=y}),P("loadcss!basic/main",function(){}),P("basic/main",["require","exports","tslib","browser","keys","dcgview","./dcgview-basic","jquery","./keypad/fourfunction-control-bar","./keypad/single-expression-fourfunction-control-bar","./keypad/scientific-control-bar","./keypad/single-expression-scientific-control-bar","./keypad/fourfunction-keypad","./keypad/single-expression-fourfunction-keypad","./keypad/single-expression-scientific-keypad","./keypad/scientific-keypad","./keypad/braille-keypad","./basic-list-view","lib/aria","touchtracking","loadcss!desmos-icons","loadcss!./main","loadcss!dcg-normalize"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r,o,m,b,E){Object.defineProperty(c,"__esModule",{value:!0});var M=n.Components,D=M.If,A=M.IfElse,v=(function(k){function J(){return k!==null&&k.apply(this,arguments)||this}return x.__extends(J,k),J.prototype.template=function(){var X=this;return n.createElement(D,{predicate:function(){return X.controller.shouldRender()}},function(){return n.createElement("div",{class:n.const("dcg-calculator-api-container"),style:n.const("width: 100%; height: 100%; position: relative;")},n.createElement("div",{class:function(){return{"dcg-calc-basic-main-wrapper":!0,"dcg-narrow":X.controller.containerSize.width<570,"dcg-short":X.controller.containerSize.height<=540,"dcg-scientific-calculator":X.controller.isScientificCalc(),"dcg-four-function-calculator":X.controller.isFourFunctionCalc(),"dcg-container":!0}},onKeydown:X.bindFn(X.handleRootKeydown),didMount:X.bindFn(X.didMountRoot),"x-ms-format-detection":n.const("none")},n.createElement("div",{role:n.const("application"),"aria-label":function(){return X.controller.isScientificCalc()?X.controller.t("Desmos Scientific Calculator"):X.controller.isFourFunctionCalc()?X.controller.t("Desmos Four-Function Calculator"):""},class:function(){return{"dcg-calc-basic-main":!0,"dcg-inverted-colors":X.controller.getInvertedColors(),"dcg-projector-mode":X.controller.isProjectorMode(),"dcg-ipad":t.IS_IPAD,"dcg-has-background-color":X.controller.hasBackgroundColor(),"dcg-no-hyperlinks":!X.controller.getAllowLinks()}},style:function(){return{"font-size":X.controller.getFontSize()+"px",background:X.controller.getBackgroundColor(),color:X.controller.getTextColor(),filter:X.controller.getInvertedColors()?"invert(100%)":"none"}}},n.createElement(m.default,{controller:X.props.controller}),n.createElement(D,{predicate:function(){return X.controller.isScientificCalc()&&X.model.isSingleExpression()}},function(){return n.createElement("div",null,n.createElement(f.default,{controller:X.props.controller}),n.createElement("div",{class:n.const("dcg-basic-keypad-container")},A(function(){return X.controller.renderAsBraille()},{true:function(){return n.createElement(o.default,{controller:X.props.controller})},false:function(){return n.createElement(p.default,{controller:X.props.controller})}})))}),n.createElement(D,{predicate:function(){return X.controller.isScientificCalc()&&!X.model.isSingleExpression()}},function(){return n.createElement("div",null,n.createElement(u.default,{controller:X.props.controller}),n.createElement("div",{class:n.const("dcg-basic-keypad-container")},A(function(){return X.controller.renderAsBraille()},{true:function(){return n.createElement(o.default,{controller:X.props.controller})},false:function(){return n.createElement(r.default,{controller:X.props.controller})}})))}),n.createElement(D,{predicate:function(){return X.controller.isFourFunctionCalc()&&X.model.isSingleExpression()}},function(){return n.createElement("div",null,n.createElement(d.default,{controller:X.props.controller}),n.createElement("div",{class:n.const("dcg-basic-keypad-container")},A(function(){return X.controller.renderAsBraille()},{true:function(){return n.createElement(o.default,{controller:X.props.controller})},false:function(){return n.createElement(h.default,{controller:X.props.controller})}})))}),n.createElement(D,{predicate:function(){return X.controller.isFourFunctionCalc()&&!X.model.isSingleExpression()}},function(){return n.createElement("div",null,n.createElement(g.default,{controller:X.props.controller}),n.createElement("div",{class:n.const("dcg-basic-keypad-container")},A(function(){return X.controller.renderAsBraille()},{true:function(){return n.createElement(o.default,{controller:X.props.controller})},false:function(){return n.createElement(y.default,{controller:X.props.controller})}})))}))))})},J.prototype.didMountRoot=function(X){E.monitor(X)},J.prototype.handleRootKeydown=function(X){if(l.isUndo(X))return this.dispatch({type:"undo",source:"keyboard-shortcut"}),!1;if(l.isRedo(X))return this.dispatch({type:"redo",source:"keyboard-shortcut"}),!1;if(!X.metaKey&&!X.shiftKey){if(X.ctrlKey||X.altKey||l.lookup(X)!==l.BACKSPACE){if(X.ctrlKey===t.IS_APPLE&&X.altKey===!t.IS_APPLE){var te=l.lookupChar(X);if(te==="N")return this.dispatch({type:"set-braille-mode",mode:"nemeth"}),b.alert(this.controller.t("Braille mode Nemeth")),!1;if(te==="U")return this.dispatch({type:"set-braille-mode",mode:"ueb"}),b.alert(this.controller.t("Braille mode UEB")),!1;if(te==="Q"||te==="X")return this.dispatch({type:"set-braille-mode",mode:"none"}),b.alert(this.controller.t("Braille mode off")),!1;if(te==="6"){var H=!this.controller.getSixKeyInput();return this.dispatch({type:"set-six-key-input",mode:H}),b.alert(H?this.controller.t("Six Key Braille Input on"):this.controller.t("Six Key Braille Input off")),!1}}}else if(!document.activeElement||E.elIsFocusable(s(document.activeElement)))return!1}return!0},J})(i.DCGViewBasic);c.default=v}),P("api/basic",["require","exports","tslib","dcgview","./abstract","main/shared-worker-pool","basic/controller","basic/main","core/lib/color-helpers","underscore_model","core/lib/deepCopy","lib/console"],function(S,c,x,t,l,n,i,s,g,d,u,f){Object.defineProperty(c,"__esModule",{value:!0});var y=(function(h){function p(r){return h.call(this,r)||this}return x.__extends(p,h),p.prototype.init=function(r){var o=this;r=u.default(r),r.backgroundColor&&!g.isValidHexColor(r.backgroundColor)&&(f.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"),delete r.backgroundColor),r.textColor&&!g.isValidHexColor(r.textColor)&&(f.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete r.textColor);var m=x.__assign({qwertyKeyboard:!0,links:!0,degreeMode:!1,settingsMenu:!0,invertedColors:!1,backgroundColor:"#fff",textColor:"#000",brailleMode:"none",sixKeyInput:!1,brailleExpressionDownload:!0,projectorMode:!1,capExpressionSize:!1,functionDefinition:!0,autosize:!0,evaluationMode:"scientific",restrictedEditing:!1,additionalFunctions:["sqrt"],typingSlashWritesDivisionSymbol:!1,typingAsteriskWritesTimesSymbol:!1,decimalToFraction:!0,replaceCommaWith10Exp:!1,replaceRoundWithReciprocal:!1},r);this.settings=new d.UnderscoreModel;var b={workerPool:n.default,settingsProxy:this.settings};this.controller=new i.default(m,b),this.controller.onEventEmitted=function(E){E==="render"&&o.updateView(),o.triggerEvent(E,void 0)},this.setupDomChangeDetector(m.autosize)},p.prototype.onCreateView=function(){return t.mountToNode(s.default,this.rootElt,{controller:t.const(this.controller)})},p.prototype.setState=function(r,o){o||(o={}),this.controller.dispatch({type:"set-state-from-api",state:r,opts:{allowUndo:!!o.allowUndo}})},p.prototype.getState=function(){return u.default(this.controller.model.getPersistedState())},p.prototype.undo=function(){this.controller.dispatch({type:"undo",source:"api"})},p.prototype.redo=function(){this.controller.dispatch({type:"redo",source:"api"})},p.prototype.clearHistory=function(){this.controller.dispatch({type:"clear-history"})},p.prototype.setBlank=function(r){r||(r={}),this.controller.dispatch({type:"set-blank",opts:{allowUndo:!!r.allowUndo}})},p.prototype.updateSettings=function(r){if(r!=null)for(var o in r)switch(o){case"fontSize":var m=r[o];if(m===void 0)continue;this.controller.dispatch({type:"update-font-size",size:m});break;case"invertedColors":var b=r[o];if(b===void 0)continue;this.controller.dispatch({type:"update-inverted-colors",mode:b});break;case"backgroundColor":var E=r[o];if(E===void 0||!g.isValidHexColor(E)){f.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)");continue}this.controller.dispatch({type:"update-background-color",color:E});break;case"textColor":var M=r[o];if(M===void 0||!g.isValidHexColor(M)){f.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)");continue}this.controller.dispatch({type:"update-text-color",color:M});break;case"degreeMode":var D=r[o];if(D===void 0)continue;this.controller.dispatch({type:"update-degree-mode",mode:D});break;case"brailleMode":var A=r[o];this.controller.dispatch({type:"set-braille-mode",mode:A});break;case"sixKeyInput":var v=r[o];if(v===void 0)continue;this.controller.dispatch({type:"set-six-key-input",mode:v});break;case"brailleExpressionDownload":var k=r[o];if(k===void 0)continue;this.controller.dispatch({type:"set-braille-expression-download",mode:k});break;case"projectorMode":var J=r[o];if(J===void 0)continue;this.controller.dispatch({type:"update-projector-mode",mode:J});break;case"capExpressionSize":var X=r[o];if(X===void 0)continue;this.controller.dispatch({type:"update-cap-expression-size",mode:X});break;case"language":var te=r[o];if(te===void 0)continue;this.controller.dispatch({type:"update-language",language:te});break;case"settingsMenu":r.settingsMenu?this.controller.dispatch({type:"enable-settings-menu"}):this.controller.dispatch({type:"disable-settings-menu"});break;case"qwertyKeyboard":this.controller.dispatch({type:"update-options",options:{qwertyKeyboard:!!r.qwertyKeyboard}});var H=this.controller.getKeyboardMode();H!=="qwerty"&&H!=="letters"||this.controller.dispatch({type:"ABC"});break;case"functionDefinition":r.functionDefinition?this.controller.model.enableFunctionDefinition():this.controller.model.disableFunctionDefinition();break;case"links":this.controller.dispatch({type:"update-options",options:{links:!!r.links}});break;case"decimalToFraction":var z=r[o];if(z===void 0)continue;this.controller.dispatch({type:"update-decimal-to-fraction",mode:z});break;case"replaceCommaWith10Exp":var B=r[o];if(B===void 0)continue;this.controller.dispatch({type:"set-replace-comma-with-10-exp",replace:B});break;case"replaceRoundWithReciprocal":var F=r[o];if(F===void 0)continue;this.controller.dispatch({type:"set-replace-round-with-reciprocal",replace:F});break;case"restrictedEditing":this.controller.dispatch({type:"update-options",options:{restrictedEditing:!!r.restrictedEditing}});break;case"typingAsteriskWritesTimesSymbol":var $=r[o];if($===void 0)continue;this.controller.dispatch({type:"set-typing-asterisk-writes-times-symbol",mode:$})}},p.prototype.focusFirstExpression=function(){this.controller.dispatch({type:"focus-first-expression"})},p.prototype.onResizeView=function(r){this.controller.dispatch({type:"ui/container-resized",size:r})},p.prototype.onDestroyView=function(){t.unmountFromNode(this.rootElt)},p.prototype.destroy=function(){this.controller.model.destroy(),h.prototype.destroy.call(this)},p})(l.default);c.BasicCalculator=y}),P("api/fourfunction",["require","exports","tslib","./basic","core/lib/deepCopy","lib/console"],function(S,c,x,t,l,n){function i(g){if(g=l.default(g),g.hasOwnProperty("typingSlashWritesDivisionSymbol")||(g.typingSlashWritesDivisionSymbol=!0),g.hasOwnProperty("typingAsteriskWritesTimesSymbol")||(g.typingAsteriskWritesTimesSymbol=!0),g.exponentButtonForSquareRoot&&(n.warn(`As of API version 1.0, the 'exponentButtonForSquareRoot' option is deprecated.Use 'additionalFunctions: "exponent"' instead.`),g.additionalFunctions=["exponent"]),g.additionalFunctions){var d=g.additionalFunctions;typeof d=="string"&&(d=[d]),d.length>2&&(n.warn("additionalFunctions can only take up to 2 new functions. Using the first two."),d=d.slice(0,2));for(var u=!0,f=0;f<d.length;f++)["sqrt","exponent","percent"].indexOf(d[f])===-1&&(n.warn("Unrecognized value: '"+d[f]+`' for 'additionalFunction'. Valid values are 'sqrt', 'percent', or 'exponent'. Using default ("sqrt")`),u=!1);g.additionalFunctions=u?d:["sqrt"]}return g.additionalFunctions&&g.additionalFunctions.length||(g.additionalFunctions=["sqrt"]),g.singleExpression?g.evaluationMode="singleExpressionFourFunction":g.evaluationMode="fourFunction",delete g.singleExpression,g.hasOwnProperty("decimalToFraction")||(g.decimalToFraction=!1),g}Object.defineProperty(c,"__esModule",{value:!0});var s=(function(g){function d(u,f){var y=g.call(this,u)||this;return y instanceof d?(y.init(i(f||{})),y):new d(u,f)}return x.__extends(d,g),d})(t.BasicCalculator);c.default=s}),P("api/scientific",["require","exports","tslib","./basic","core/lib/deepCopy"],function(S,c,x,t,l){function n(s){return s=l.default(s),s.singleExpression?s.evaluationMode="singleExpressionScientific":s.evaluationMode="scientific",delete s.singleExpression,s}Object.defineProperty(c,"__esModule",{value:!0});var i=(function(s){function g(d,u){var f=s.call(this,d)||this;return f instanceof g?(f.init(n(u||{})),f):new g(d,u)}return x.__extends(g,s),g})(t.BasicCalculator);c.default=i}),P("pillow-keypad/controller",["require","exports","flux","keypad/mq-commands","lib/i18n"],function(S,c,x,t,l){Object.defineProperty(c,"__esModule",{value:!0});var n=(function(){function i(){var s=this;this.keyboardMode="main",this.dispatcher=new x.Dispatcher,this.t=function(g,d){return l.t(g,d)},this.dispatch=function(g){s.dispatcher.dispatch(g);for(var d;d=s._queuedCallbacks.shift();)d()},this._queuedCallbacks=[],this.dispatcher=new x.Dispatcher,this.hookUpDispatcher()}return i.prototype.getBackgroundColor=function(){return"does-not-matter"},i.prototype.runAfterDispatch=function(s){this._queuedCallbacks.push(s)},i.prototype.enqueueEvent=function(s){var g=this;this.runAfterDispatch(function(){g.onEventEmitted&&g.onEventEmitted(s)})},i.prototype.getKeyboardMode=function(){return this.keyboardMode},i.prototype.updateKeyboardMode=function(s){this.keyboardMode=s},i.prototype.typeIntoFocusedMathquill=function(s){s=s.replace(/\r|\n/g,"");var g=this.activeMQ;g&&g.typedText(s)},i.prototype.pressKeyInFocusedMathquill=function(s,g){var d=this.activeMQ;if(d)return s==="Enter"?(g&&(g.preventDefault(),g.stopPropagation()),void this.enqueueEvent("enter")):void d.keystroke(s,g)},i.prototype.executeCommandInFocusedMathquill=function(s){var g=this.activeMQ;g&&t.execute(g,s)},i.prototype.hookUpDispatcher=function(){var s=this;this.dispatcher.register(function(g){switch(s.enqueueEvent("render"),g.type){case"hide-keypad":s.enqueueEvent("hide-keypad");break;case"set-active-mq":s.activeMQ=g.mq;break;case"keypad/shift":s.updateKeyboardMode(s.keyboardMode==="capitalQwerty"?"qwerty":"capitalQwerty");break;case"main":s.updateKeyboardMode("main");break;case"ABC":s.updateKeyboardMode("qwerty");break;case"functions":s.updateKeyboardMode("functions");break;case"keypad/type-text":s.typeIntoFocusedMathquill(g.text);break;case"keypad/press-key":s.pressKeyInFocusedMathquill(g.key,g.evt);break;case"keypad/custom-command":s.executeCommandInFocusedMathquill(g.command);break;case"keypad/123":case"keypad/abc":break;default:return g}})},i})();c.default=n}),P("pillow-keypad/dcgview-pillow-keypad",["require","exports","tslib","dcgview"],function(S,c,x,t){Object.defineProperty(c,"__esModule",{value:!0});var l=(function(n){function i(){return n!==null&&n.apply(this,arguments)||this}return x.__extends(i,n),i.prototype.init=function(){this.controller=this.props.controller(),this.dispatch=this.controller.dispatch,this.t=this.controller.t},i})(t.Class);c.DCGViewPillowKeypad=l}),P("pillow-keypad/main-keypad",["require","exports","tslib","dcgview","keypad/keys","keypad/keypad","keypad/row","./dcgview-pillow-keypad"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){return t.createElement(n.default,{controller:this.props.controller},t.createElement(i.default,null,l.view(this,"left",{style:"highlight"}),l.view(this,"right",{style:"highlight"}),l.view(this,"x"),l.view(this,"y"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),l.view(this,"7",{style:"highlight"}),l.view(this,"8",{style:"highlight"}),l.view(this,"9",{style:"highlight"}),l.view(this,"/"),l.view(this,"backspace",{style:"highlight"})),t.createElement(i.default,null,l.view(this,"("),l.view(this,")"),l.view(this,"<"),l.view(this,">"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),l.view(this,"4",{style:"highlight"}),l.view(this,"5",{style:"highlight"}),l.view(this,"6",{style:"highlight"}),l.view(this,"*"),l.view(this,"pi")),t.createElement(i.default,null,l.view(this,"sqrt"),l.view(this,","),l.view(this,"<="),l.view(this,">="),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),l.view(this,"1",{style:"highlight"}),l.view(this,"2",{style:"highlight"}),l.view(this,"3",{style:"highlight"}),l.view(this,"-"),l.view(this,"enter",{style:"tall-blue"})),t.createElement(i.default,null,l.view(this,"a^2"),l.view(this,"a^b"),l.view(this,"|a|"),l.view(this,"a/b"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),l.view(this,"0",{style:"highlight"}),l.view(this,".",{style:"highlight"}),l.view(this,"="),l.view(this,"+"),l.spacer(1)))},u})(s.DCGViewPillowKeypad);c.default=g}),P("pillow-keypad/qwerty-keypad",["require","exports","tslib","dcgview","keypad/keys","keypad/keypad","keypad/row","./dcgview-pillow-keypad"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){return t.createElement(n.default,{controller:this.props.controller},t.createElement(i.default,null,l.view(this,"q"),l.view(this,"w"),l.view(this,"e"),l.view(this,"r"),l.view(this,"t"),l.view(this,"y"),l.view(this,"u"),l.view(this,"i"),l.view(this,"o"),l.view(this,"p")),t.createElement(i.default,null,t.createElement("div",{class:t.const("dcg-half-width-placeholder")}),l.view(this,"a"),l.view(this,"s"),l.view(this,"d"),l.view(this,"f"),l.view(this,"g"),l.view(this,"h"),l.view(this,"j"),l.view(this,"k"),l.view(this,"l"),t.createElement("div",{class:t.const("dcg-half-width-placeholder")})),t.createElement(i.default,null,l.view(this,"shift",{style:"highlight"}),l.view(this,"z"),l.view(this,"x"),l.view(this,"c"),l.view(this,"v"),l.view(this,"b"),l.view(this,"n"),l.view(this,"m"),l.view(this,","),l.view(this,"backspace",{style:"highlight"})),t.createElement(i.default,null,l.view(this,"="),l.view(this,"{"),l.view(this,"}"),l.view(this,"["),l.view(this,"]"),l.view(this,"!"),l.view(this,"'"),l.view(this,"pi"),l.view(this,"enter",{style:"blue"})))},u})(s.DCGViewPillowKeypad);c.default=g}),P("pillow-keypad/capital-qwerty-keypad",["require","exports","tslib","dcgview","./dcgview-pillow-keypad","keypad/keys","keypad/keypad","keypad/row"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){return t.createElement(i.default,{controller:this.props.controller},t.createElement(s.default,null,n.view(this,"Q"),n.view(this,"W"),n.view(this,"E"),n.view(this,"R"),n.view(this,"T"),n.view(this,"Y"),n.view(this,"U"),n.view(this,"I"),n.view(this,"O"),n.view(this,"P")),t.createElement(s.default,null,t.createElement("div",{class:t.const("dcg-half-width-placeholder")}),n.view(this,"A"),n.view(this,"S"),n.view(this,"D"),n.view(this,"F"),n.view(this,"G"),n.view(this,"H"),n.view(this,"J"),n.view(this,"K"),n.view(this,"L"),t.createElement("div",{class:t.const("dcg-half-width-placeholder")})),t.createElement(s.default,null,n.view(this,"shift",{style:"highlight"}),n.view(this,"Z"),n.view(this,"X"),n.view(this,"C"),n.view(this,"V"),n.view(this,"B"),n.view(this,"N"),n.view(this,"M"),n.view(this,","),n.view(this,"backspace",{style:"highlight"})),t.createElement(s.default,null,n.view(this,"="),n.view(this,"("),n.view(this,")"),n.view(this,"["),n.view(this,"]"),n.view(this,"!"),n.view(this,"'"),n.view(this,"pi"),n.view(this,"enter",{style:"blue"})))},u})(l.DCGViewPillowKeypad);c.default=g}),P("pillow-keypad/functions-keypad",["require","exports","tslib","dcgview","keypad/keys","keypad/keypad","keypad/row","./dcgview-pillow-keypad"],function(S,c,x,t,l,n,i,s){Object.defineProperty(c,"__esModule",{value:!0});var g=(function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return x.__extends(u,d),u.prototype.template=function(){return t.createElement(n.default,{controller:this.props.controller},t.createElement(i.default,null,l.view(this,"sin"),l.view(this,"cos"),l.view(this,"tan"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),l.view(this,"ln"),l.view(this,"log"),l.view(this,"backspace",{style:"highlight"})),t.createElement(i.default,null,l.view(this,"arcsin"),l.view(this,"arccos"),l.view(this,"arctan"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),l.view(this,"e^x"),l.view(this,"abs"),l.view(this,"round")),t.createElement(i.default,null,l.view(this,"mean"),l.view(this,"stdev"),l.view(this,"stdevp"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),l.view(this,"a^b"),l.view(this,"sqrt"),l.view(this,"nthroot")),t.createElement(i.default,null,l.view(this,"nPr"),l.view(this,"nCr"),l.view(this,"!"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),l.view(this,"e"),l.view(this,"%"),l.view(this,"enter",{style:"blue"})))},u})(s.DCGViewPillowKeypad);c.default=g}),P("pillow-keypad/control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","./dcgview-pillow-keypad"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=(function(g){function d(){return g!==null&&g.apply(this,arguments)||this}return x.__extends(d,g),d.prototype.template=function(){var u=this.props.controller();return t.createElement(l.default,{controller:this.props.controller},t.createElement(n.default,{command:this.const("main"),selected:function(){return u.getKeyboardMode()==="main"},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return u.dispatch({type:"main"})}},function(){return u.t("main")}),t.createElement(n.default,{command:this.const("ABC"),selected:function(){return["qwerty","capitalQwerty"].indexOf(u.getKeyboardMode())!==-1},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),ariaLabel:function(){return u.t("A B C")},onTap:function(){return u.dispatch({type:"ABC"})}},function(){return u.t("abc")}),t.createElement(n.default,{command:this.const("functions"),selected:function(){return["functions","restrictedFunctions"].indexOf(u.getKeyboardMode())!==-1},ariaLabel:function(){return u.t("Functions")},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return u.dispatch({type:"functions"})}},function(){return u.t("func")}),t.createElement("div",{class:t.const("dcg-hide-keypad-button"),"dcg-command":t.const("hide-keypad"),onTap:function(){return u.dispatch({type:"hide-keypad"})}},t.createElement("i",{class:t.const("dcg-icon-hide")})))},d})(i.DCGViewPillowKeypad);c.default=s}),P("loadcss!pillow-keypad/main",function(){}),P("pillow-keypad/main",["require","exports","tslib","dcgview","./dcgview-pillow-keypad","./main-keypad","./qwerty-keypad","./capital-qwerty-keypad","./functions-keypad","./control-bar","touchtracking","loadcss!./main"],function(S,c,x,t,l,n,i,s,g,d,u){Object.defineProperty(c,"__esModule",{value:!0});var f=t.Components.Switch,y=(function(h){function p(){return h!==null&&h.apply(this,arguments)||this}return x.__extends(p,h),p.prototype.template=function(){var r=this;return t.createElement("div",{class:t.const("dcg-calculator-api-container"),style:t.const("width: 100%; height: 100%; position: relative;")},t.createElement("div",{class:t.const("dcg-do-not-blur dcg-container dcg-api-shared-keypad-root"),didMount:this.bindFn(this.didMountRoot)},t.createElement(d.default,{controller:this.props.controller}),t.createElement("div",{role:t.const("group"),"aria-label":function(){return r.t("keypad")}},t.createElement(f,{key:function(){return r.controller.getKeyboardMode()}},function(o){switch(o){case"qwerty":return t.createElement(i.default,{controller:r.props.controller});case"capitalQwerty":return t.createElement(s.default,{controller:r.props.controller});case"functions":return t.createElement(g.default,{controller:r.props.controller});default:return t.createElement(n.default,{controller:r.props.controller})}}))))},p.prototype.didMountRoot=function(r){u.monitor(r)},p})(l.DCGViewPillowKeypad);c.default=y}),P("api/pillow-keypad",["require","exports","tslib","dcgview","./abstract","pillow-keypad/controller","pillow-keypad/main"],function(S,c,x,t,l,n,i){Object.defineProperty(c,"__esModule",{value:!0});var s=(function(g){function d(u){var f=g.call(this,u)||this;return f instanceof d?(f.init(),f):new d(u)}return x.__extends(d,g),d.prototype.init=function(){var u=this;this.controller=new n.default,this.controller.onEventEmitted=function(f){f==="render"&&u.updateView(),u.triggerEvent(f,void 0)},this.setupDomChangeDetector(!0)},d.prototype.setActiveMathquill=function(u){this.controller.dispatch({type:"set-active-mq",mq:u})},d.prototype.onCreateView=function(){return t.mountToNode(i.default,this.rootElt,{controller:t.const(this.controller)})},d.prototype.onResizeView=function(u){},d.prototype.onDestroyView=function(){t.unmountFromNode(this.rootElt)},d.prototype.destroy=function(){g.prototype.destroy.call(this)},d})(l.default);c.default=s}),P("core/cl-calculator",["require","exports","core/graphing-calc/migrate-state","core/graphing-calc/json/expression","core/graphing-calc/json/table"],function(S,c,x,t,l){function n(i){function s(p){switch(p.type){case void 0:case"expression":var r=t.computeParsableState(t.inflateDefaults(p));d[r.id]=r;break;case"table":var r=l.computeParsableState(l.inflateDefaults(p));d[r.id]=r;break;case"folder":case"text":case"image":break;default:return p}}for(var g=x.migrateToLatest(i),d={},u=g.graph.degreeMode,f=g.randomSeed,y=0,h=g.expressions.list;y<h.length;y++)s(h[y]);return{setExpression:function(p){s(p)},getChangeSet:function(){return{statements:d,isCompleteState:!0,degreeMode:u,globalRandomSeed:f}}}}Object.defineProperty(c,"__esModule",{value:!0}),c.CLCalculator=n}),P("core/math/tree-queries/count-numbers",["require","exports"],function(S,c){function x(t,l){switch(t.type){case"Mul":case"Div":case"Prime":case"Call":case"ImplicitCall":case"Dot":case"Pipes":case"Sqrt":case"Nthroot":case"Frac":case"Derivative":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Piecewise":case"Paren":case"Juxt":case"Superscript":case"Bang":case"Index":case"Equals":case"Inequality":case"Tilde":case"Pos":case"Neg":case"Add":case"Sub":case"List":case"Seq":case"Colon":case"Ellipsis":case"PercentOf":for(var s=0,n=0,i=t.args;n<i.length;n++)s+=x(i[n],l);return s;case"Decimal":return l===void 0||parseFloat(t.val)===l?1:0;case"MixedNumber":if(l===void 0)return 3;var s=0;return parseFloat(t.whole)===l&&(s+=1),parseFloat(t.num)===l&&(s+=1),parseFloat(t.den)===l&&(s+=1),s;case"Letter":case"EmptyPiecewise":case"Cmd":return 0;case"Subscript":return x(t.args[0],l);case"InequalityChain":var s=0;s+=x(t.first,l);for(var g=0,d=t.chain;g<d.length;g++)s+=x(d[g].args[0],l);return s;default:throw"Unexpected surface node "+t.type+"."}}Object.defineProperty(c,"__esModule",{value:!0}),c.countNumbers=x}),P("core/mathtools",["require","exports","parser","core/math/context","core/math/builtinframe","core/math/types","parsenodes","core/cl-calculator","core/math/parser/latex-parser","core/math/parser/expression-parser","core/math/tree-queries/count-numbers","core/lib/color-helpers","core/math/policyGraphing","core/math/policyScientific","core/math/policyFourFunction","core/lib/label"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r){function o(b,E){return b!=null||(b=""),x.parse(b,E)}function m(b){if(b!=null)return d.parse(g.parse(b))}Object.defineProperty(c,"__esModule",{value:!0}),c.CLCalculator=s.CLCalculator,c.colorHelpers=f,c.Label=r,c.parser={parse:o},c.expressionParser={parse:m},c.treeQueries={countNumbers:u.countNumbers},c.context=t,c.builtInFrame=l,c.types=n,c.parseNodes=i,c.policies={graphing:y.PolicyGraphing,scientific:h.PolicyScientific,fourFunction:p.PolicyFourFunction}}),P("api/calculator",["require","exports","mathquill","tslib","graphing/clipping","expressions/colors","graphing-calc/api/sanitize-expression","core/graphing-calc/json/graph-settings","main/font_sizes","expressions/image_file_to_data_url","./graphing","./headless","./fourfunction","./scientific","./pillow-keypad","core/mathtools"],function(S,c,x,t,l,n,i,s,g,d,u,f,y,h,p,r){function o(M){var D=b.enabledFeatures;return!D||D[M]}function m(M){c.DesmosAPI[M]=function(){throw new Error("The Desmos "+M+" is not enabled for this API key.")}}Object.defineProperty(c,"__esModule",{value:!0});var b;typeof G<"u"?b=G:(b={},window.Desmos=b),c.GraphingCalculator=u.default,c.HeadlessGraphingCalculator=f.default,c.FourFunctionCalculator=y.default,c.ScientificCalculator=h.default,c.PillowKeypad=p.default,c.DesmosAPI={Colors:{RED:n.RED,BLUE:n.BLUE,GREEN:n.GREEN,ORANGE:n.ORANGE,PURPLE:n.PURPLE,BLACK:n.BLACK},imageFileToDataURL:d.imageFileToDataURL,supportedLanguages:b.locales?Object.keys(b.locales):[],Styles:t.__assign(t.__assign({},i.SanitizedLineStyle),i.SanitizedPointStyle),ColumnModes:i.SanitizedColumnMode,DragModes:i.SanitizedDragMode,AxisArrowModes:s.AxisArrowModes,FontSizes:g,LabelSizes:i.SanitizedLabelSize,LabelOrientations:i.SanitizedLabelOrientation,GraphingCalculator:u.default,Calculator:u.default,FourFunctionCalculator:y.default,ScientificCalculator:h.default,Private:{Mathtools:r,Graphtools:{getClippingGraphType:l.getClippingGraphType,mapSegmentToCanvas:l.mapSegmentToCanvas}},MathQuill:x,PillowKeypad:p.default,HeadlessGraphingCalculator:f.default},o("GraphingCalculator")||(m("GraphingCalculator"),m("Calculator")),o("FourFunctionCalculator")||m("FourFunctionCalculator"),o("ScientificCalculator")||m("ScientificCalculator");for(var E in c.DesmosAPI)c.DesmosAPI.hasOwnProperty(E)&&(b[E]=c.DesmosAPI[E]);c.Calculator=u.default}),P("main/noconflict",["require","jquery","underscore"],function(S){var c=S("jquery"),x=S("underscore");return typeof G>"u"&&(G={}),function(){G.$=c,G._=x,G.$.noConflict(!0),G._.noConflict()}}),typeof G>"u"&&(G={}),G.require=ce,G.requirejs=Y,ce.isBrowser||(function(){var S=ce("worker_src"),c={define:P,require:ce,requirejs:Y};new Function("ALMOND_OVERRIDES",S)(c)})(),P("toplevel/api",["require","api/calculator","main/noconflict"],function(S){S("api/calculator"),S("main/noconflict")()})})(),G.require("toplevel/api")})()})(typeof window!==void 0?window:this||{})})()})(Ys)),Ys.exports}var Hy=jy();const hi=Qy(Hy),wd={type:"change"},ol={type:"start"},au={type:"end"},Pa=new $c,Ad=new Xr,Yy=Math.cos(70*bp.DEG2RAD),Cn=new Je,Hn=2*Math.PI,hn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Ws=1e-6;class Wy extends oh{constructor(e,a=null){super(e,a),this.state=hn.NONE,this.target=new Je,this.cursor=new Je,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Vi.ROTATE,MIDDLE:Vi.DOLLY,RIGHT:Vi.PAN},this.touches={ONE:qi.ROTATE,TWO:qi.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Je,this._lastQuaternion=new xi,this._lastTargetPosition=new Je,this._quat=new xi().setFromUnitVectors(e.up,new Je(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Wl,this._sphericalDelta=new Wl,this._scale=1,this._panOffset=new Je,this._rotateStart=new Yt,this._rotateEnd=new Yt,this._rotateDelta=new Yt,this._panStart=new Yt,this._panEnd=new Yt,this._panDelta=new Yt,this._dollyStart=new Yt,this._dollyEnd=new Yt,this._dollyDelta=new Yt,this._dollyDirection=new Je,this._mouse=new Yt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=Ky.bind(this),this._onPointerDown=Xy.bind(this),this._onPointerUp=Jy.bind(this),this._onContextMenu=iv.bind(this),this._onMouseWheel=ev.bind(this),this._onKeyDown=tv.bind(this),this._onTouchStart=nv.bind(this),this._onTouchMove=rv.bind(this),this._onMouseDown=Zy.bind(this),this._onMouseMove=$y.bind(this),this._interceptControlDown=ov.bind(this),this._interceptControlUp=av.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(wd),this.update(),this.state=hn.NONE}update(e=null){const a=this.object.position;Cn.copy(a).sub(this.target),Cn.applyQuaternion(this._quat),this._spherical.setFromVector3(Cn),this.autoRotate&&this.state===hn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let w=this.minAzimuthAngle,T=this.maxAzimuthAngle;isFinite(w)&&isFinite(T)&&(w<-Math.PI?w+=Hn:w>Math.PI&&(w-=Hn),T<-Math.PI?T+=Hn:T>Math.PI&&(T-=Hn),w<=T?this._spherical.theta=Math.max(w,Math.min(T,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(w+T)/2?Math.max(w,this._spherical.theta):Math.min(T,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let L=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const G=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),L=G!=this._spherical.radius}if(Cn.setFromSpherical(this._spherical),Cn.applyQuaternion(this._quatInverse),a.copy(this.target).add(Cn),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let G=null;if(this.object.isPerspectiveCamera){const Y=Cn.length();G=this._clampDistance(Y*this._scale);const ce=Y-G;this.object.position.addScaledVector(this._dollyDirection,ce),this.object.updateMatrixWorld(),L=!!ce}else if(this.object.isOrthographicCamera){const Y=new Je(this._mouse.x,this._mouse.y,0);Y.unproject(this.object);const ce=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),L=ce!==this.object.zoom;const P=new Je(this._mouse.x,this._mouse.y,0);P.unproject(this.object),this.object.position.sub(P).add(Y),this.object.updateMatrixWorld(),G=Cn.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;G!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(G).add(this.object.position):(Pa.origin.copy(this.object.position),Pa.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Pa.direction))<Yy?this.object.lookAt(this.target):(Ad.setFromNormalAndCoplanarPoint(this.object.up,this.target),Pa.intersectPlane(Ad,this.target))))}else if(this.object.isOrthographicCamera){const G=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),G!==this.object.zoom&&(this.object.updateProjectionMatrix(),L=!0)}return this._scale=1,this._performCursorZoom=!1,L||this._lastPosition.distanceToSquared(this.object.position)>Ws||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Ws||this._lastTargetPosition.distanceToSquared(this.target)>Ws?(this.dispatchEvent(wd),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Hn/60*this.autoRotateSpeed*e:Hn/60/60*this.autoRotateSpeed}_getZoomScale(e){const a=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*a)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,a){Cn.setFromMatrixColumn(a,0),Cn.multiplyScalar(-e),this._panOffset.add(Cn)}_panUp(e,a){this.screenSpacePanning===!0?Cn.setFromMatrixColumn(a,1):(Cn.setFromMatrixColumn(a,0),Cn.crossVectors(this.object.up,Cn)),Cn.multiplyScalar(e),this._panOffset.add(Cn)}_pan(e,a){const w=this.domElement;if(this.object.isPerspectiveCamera){const T=this.object.position;Cn.copy(T).sub(this.target);let L=Cn.length();L*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*L/w.clientHeight,this.object.matrix),this._panUp(2*a*L/w.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/w.clientWidth,this.object.matrix),this._panUp(a*(this.object.top-this.object.bottom)/this.object.zoom/w.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,a){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const w=this.domElement.getBoundingClientRect(),T=e-w.left,L=a-w.top,G=w.width,Y=w.height;this._mouse.x=T/G*2-1,this._mouse.y=-(L/Y)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const a=this.domElement;this._rotateLeft(Hn*this._rotateDelta.x/a.clientHeight),this._rotateUp(Hn*this._rotateDelta.y/a.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let a=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Hn*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),a=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Hn*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),a=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Hn*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),a=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Hn*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),a=!0;break}a&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const a=this._getSecondPointerPosition(e),w=.5*(e.pageX+a.x),T=.5*(e.pageY+a.y);this._rotateStart.set(w,T)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const a=this._getSecondPointerPosition(e),w=.5*(e.pageX+a.x),T=.5*(e.pageY+a.y);this._panStart.set(w,T)}}_handleTouchStartDolly(e){const a=this._getSecondPointerPosition(e),w=e.pageX-a.x,T=e.pageY-a.y,L=Math.sqrt(w*w+T*T);this._dollyStart.set(0,L)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const w=this._getSecondPointerPosition(e),T=.5*(e.pageX+w.x),L=.5*(e.pageY+w.y);this._rotateEnd.set(T,L)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const a=this.domElement;this._rotateLeft(Hn*this._rotateDelta.x/a.clientHeight),this._rotateUp(Hn*this._rotateDelta.y/a.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const a=this._getSecondPointerPosition(e),w=.5*(e.pageX+a.x),T=.5*(e.pageY+a.y);this._panEnd.set(w,T)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const a=this._getSecondPointerPosition(e),w=e.pageX-a.x,T=e.pageY-a.y,L=Math.sqrt(w*w+T*T);this._dollyEnd.set(0,L),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const G=(e.pageX+a.x)*.5,Y=(e.pageY+a.y)*.5;this._updateZoomParameters(G,Y)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let a=0;a<this._pointers.length;a++)if(this._pointers[a]==e.pointerId){this._pointers.splice(a,1);return}}_isTrackingPointer(e){for(let a=0;a<this._pointers.length;a++)if(this._pointers[a]==e.pointerId)return!0;return!1}_trackPointer(e){let a=this._pointerPositions[e.pointerId];a===void 0&&(a=new Yt,this._pointerPositions[e.pointerId]=a),a.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const a=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[a]}_customWheelEvent(e){const a=e.deltaMode,w={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(a){case 1:w.deltaY*=16;break;case 2:w.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(w.deltaY*=10),w}}function Xy(_){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(_.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(_)&&(this._addPointer(_),_.pointerType==="touch"?this._onTouchStart(_):this._onMouseDown(_)))}function Ky(_){this.enabled!==!1&&(_.pointerType==="touch"?this._onTouchMove(_):this._onMouseMove(_))}function Jy(_){switch(this._removePointer(_),this._pointers.length){case 0:this.domElement.releasePointerCapture(_.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(au),this.state=hn.NONE;break;case 1:const e=this._pointers[0],a=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:a.x,pageY:a.y});break}}function Zy(_){let e;switch(_.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Vi.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(_),this.state=hn.DOLLY;break;case Vi.ROTATE:if(_.ctrlKey||_.metaKey||_.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(_),this.state=hn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(_),this.state=hn.ROTATE}break;case Vi.PAN:if(_.ctrlKey||_.metaKey||_.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(_),this.state=hn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(_),this.state=hn.PAN}break;default:this.state=hn.NONE}this.state!==hn.NONE&&this.dispatchEvent(ol)}function $y(_){switch(this.state){case hn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(_);break;case hn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(_);break;case hn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(_);break}}function ev(_){this.enabled===!1||this.enableZoom===!1||this.state!==hn.NONE||(_.preventDefault(),this.dispatchEvent(ol),this._handleMouseWheel(this._customWheelEvent(_)),this.dispatchEvent(au))}function tv(_){this.enabled!==!1&&this._handleKeyDown(_)}function nv(_){switch(this._trackPointer(_),this._pointers.length){case 1:switch(this.touches.ONE){case qi.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(_),this.state=hn.TOUCH_ROTATE;break;case qi.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(_),this.state=hn.TOUCH_PAN;break;default:this.state=hn.NONE}break;case 2:switch(this.touches.TWO){case qi.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(_),this.state=hn.TOUCH_DOLLY_PAN;break;case qi.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(_),this.state=hn.TOUCH_DOLLY_ROTATE;break;default:this.state=hn.NONE}break;default:this.state=hn.NONE}this.state!==hn.NONE&&this.dispatchEvent(ol)}function rv(_){switch(this._trackPointer(_),this.state){case hn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(_),this.update();break;case hn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(_),this.update();break;case hn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(_),this.update();break;case hn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(_),this.update();break;default:this.state=hn.NONE}}function iv(_){this.enabled!==!1&&_.preventDefault()}function ov(_){_.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function av(_){_.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const So=document.getElementById("theme-toggle"),qa=document.documentElement,Xs=document.getElementById("volume-formula"),Ks=document.getElementById("volume-rate-formula"),su=`
<svg xmlns="http://www.w3.org/2000/svg"
     width="24" height="24"
     viewBox="0 0 24 24"
     fill="currentColor"
     stroke="currentColor"
     stroke-width="2"
     stroke-linecap="round"
     stroke-linejoin="round"
     class="feather feather-moon">
  <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
</svg>`,sv=`
<svg xmlns="http://www.w3.org/2000/svg"
     width="24" height="24"
     viewBox="0 0 24 24"
     fill="currentColor"
     stroke="currentColor"
     stroke-width="2"
     stroke-linecap="round"
     stroke-linejoin="round">
  <circle cx="12" cy="12" r="5" />
  <line x1="12" y1="1" x2="12" y2="3" />
  <line x1="12" y1="21" x2="12" y2="23" />
  <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
  <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
  <line x1="1" y1="12" x2="3" y2="12" />
  <line x1="21" y1="12" x2="23" y2="12" />
  <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
  <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
</svg>`;qa.setAttribute("data-theme","dark");So.innerHTML=su;So.addEventListener("click",()=>{So.querySelector("svg"),qa.getAttribute("data-theme")==="light"?(qa.setAttribute("data-theme","dark"),So.innerHTML=su,Ur.background=new rn(1907997),mn.updateSettings({invertedColors:!0}),Xs.textContent="$$ {\\color{#9bb458}{V}} = \\frac{1}{3} \\pi {\\color{#c0874b}{r}}^2 {\\color{#59afb5}{h}}$$",Ks.textContent=`$$ {\\color{#9bb458}{\\frac{dV}{dt}}} = \\frac{1}{3} \\pi \\Big(2 r h {\\color{#805b34}{\\frac{dr}{dt}}} +
r^2 {\\color{#3c7478}{\\frac{dh}{dt}}}
\\Big)
$$`):(qa.setAttribute("data-theme","light"),So.innerHTML=sv,Ur.background=new rn(16053492),mn.invertedColors=!1,mn.updateSettings({invertedColors:!1}),Xs.textContent=`$$
{\\color{#5b429f}{V}} = \\frac{1}{3} \\pi {\\color{#3e6eac}{r}}^2 {\\color{#b84d46}{h}}
$$`,Ks.textContent=`$$
{\\color{#5b429f}{\\frac{dV}{dt}}} = \\frac{1}{3} \\pi \\Big(
2 r h {\\color{#7a9ac6}{\\frac{dr}{dt}}} +
r^2 {\\color{#ce837e}{\\frac{dh}{dt}}}
\\Big)
$$`),MathJax.typesetPromise([Xs,Ks])});const cv=document.getElementById("desmos-graph"),mn=hi.GraphingCalculator(cv,{keypad:!1,expressions:!0,expressionsCollapsed:!0,settingsMenu:!0,zoomButtons:!1,border:!1,invertedColors:!0});fu();const Ur=new Hp;Ur.background=new rn(1907997);const Ai=new Zn(75,window.innerWidth/window.innerHeight,.1,1e3);Ai.position.z=5;Ai.position.y=3;const Xo=new Vy({canvas:document.getElementById("threejs-canvas"),antialias:!0});Xo.setPixelRatio(Math.min(window.devicePixelRatio,2));hu();const io=document.createElement("video");io.loop=!0;io.muted=!0;io.src="water2.mp4";io.playbackRate=.5;io.play();let _n=parseFloat(document.getElementById("heightInput").value),zn=parseFloat(document.getElementById("radiusInput").value),Ya=64,cu=30,qc,zc,Gc,Io,Co,To,al,sl,cl;const lu=new $i(zn,_n,Ya),lv=new Za({color:8900331,transparent:!0,opacity:.1}),Po=new mr(lu,lv);Po.rotation.x=Math.PI;const dv=new Ha(lu,cu),Lo=new Xd(dv,new tl({color:0}));Lo.rotation.x=Math.PI;const oo=new zi;oo.add(Po);oo.add(Lo);oo.position.y=_n/2;Ur.add(oo);const du=new $i(zn,_n,Ya),uv=new Kd(io),pv=new Za({map:uv}),$r=new mr(du,pv);$r.rotation.x=Math.PI;$r.position.z=.001;const hv=new Ha(du,cu),Bo=new Xd(hv,new tl({color:16777215}));Bo.rotation.x=Math.PI;const $n=new zi;$n.add($r);$n.add(Bo);Ur.add($n);$n.scale.set(.01,.01,.01);$n.position.y=_n*$n.scale.y/2;const fv=new rh(16777215,1);Ur.add(fv);const uu=new eh(16777215,1,10);uu.position.set(2,2,2);Ur.add(uu);const pu=new nh(16777215,1);pu.position.set(-2,2,2);Ur.add(pu);const _i=new Wy(Ai,Xo.domElement);_i.target.set(0,0,0);_i.enableDamping=!0;_i.enableRotate=!0;_i.enableZoom=!0;_i.enablePan=!0;ll();function Uo(){mn.removeExpression({id:"a"}),mn.removeExpression({id:"r"}),mn.removeExpression({id:"h"}),mn.removeExpression({id:"v"}),mn.removeExpression({id:"Volume"}),mn.removeExpression({id:"Radius"}),mn.removeExpression({id:"Height"}),Yi?(mn.setExpression({id:"Volume",latex:"(t, v \\cdot t)",parametricDomain:{min:"0",max:"a"},color:hi.Colors.PURPLE,label:"Volume"}),mn.setExpression({id:"Radius",latex:"(t, \\left(\\frac{3\\cdot v\\cdot t}{\\pi\\cdot\\frac{h}{r}}\\right)^{\\frac{1}{3}})",parametricDomain:{min:"0",max:"a"},color:hi.Colors.BLUE,label:"Radius"}),mn.setExpression({id:"Height",latex:"(t, \\left(\\frac{3\\cdot v\\cdot t}{\\pi\\cdot\\frac{r}{h}\\cdot\\frac{r}{h}}\\right)^{\\frac{1}{3}})",parametricDomain:{min:"0",max:"a"},color:hi.Colors.RED,label:"Height"}),mn.setExpression({id:"a",latex:`a=${to.toFixed(2)}`}),mn.setExpression({id:"r",latex:`r=${zn.toFixed(2)}`,hidden:!0}),mn.setExpression({id:"h",latex:`h=${_n.toFixed(2)}`}),mn.setExpression({id:"v",latex:`v=${Vc().toFixed(2)}`})):(mn.setExpression({id:"Volume",latex:"(t, \\frac{1}{3}\\pi (t\\cdot r)^2(t \\cdot h))",parametricDomain:{min:"0",max:"a"},color:hi.Colors.PURPLE,label:"Volume"}),mn.setExpression({id:"Radius",latex:"(t, t\\cdot r)",parametricDomain:{min:"0",max:"a"},color:hi.Colors.BLUE,label:"Radius"}),mn.setExpression({id:"Height",latex:"(t, t\\cdot h)",parametricDomain:{min:"0",max:"a"},color:hi.Colors.RED,label:"Height"}),mn.setExpression({id:"a",latex:`a=${xn.toFixed(2)}`}),mn.setExpression({id:"r",latex:`r=${zn.toFixed(2)}`,hidden:!0}),mn.setExpression({id:"h",latex:`h=${_n.toFixed(2)}`})),mn.setMathBounds({left:-.2*Qc,right:Qc*1.2,bottom:-.2*Md(),top:Math.max(Md()*1.5,.1)})}function ll(){const _=new no().setFromObject(oo),e=new Je;_.getCenter(e),_i.target.copy(e),Ai.lookAt(e)}function hu(){const _=Math.min(window.innerWidth*.9,window.innerHeight*.9,700);Ai.aspect=1,Ai.updateProjectionMatrix(),Xo.setSize(_,_)}function fu(){const _=Math.min(window.innerWidth*.9,window.innerHeight*.9,700),e=document.getElementById("desmos-graph");e.style.width=`${_}px`,e.style.height=`${_}px`,mn.resize()}function gu(){Po.geometry.dispose(),Lo.geometry.dispose(),$r.geometry.dispose(),Bo.geometry.dispose(),Po.geometry=new $i(zn,_n,Ya),Lo.geometry=new Ha(Po.geometry,45),Lo.rotation.x=Math.PI,$r.geometry=new $i(zn,_n,Ya),Bo.geometry=new Ha($r.geometry,45),Bo.rotation.x=Math.PI,oo.position.y=_n/2,$n.position.y=_n*$n.scale.y/2}function Ed(){mv.style.width=`${Zs*(vi()/Js())}px`,yv.style.width=`${Zs*(qo()/Js())}px`,vv.style.width=`${Zs*(zo()/Js())}px`}function _d(){bv.style.width=`${Math.min(Math.abs(cl*1e3),200)}px`,xv.style.width=`${Math.min(Math.abs(al*1e3),200)}px`,wv.style.width=`${Math.min(Math.abs(sl*1e3),200)}px`}function vi(){return 1/3*Math.PI*zn*zn*_n*xn*xn*xn}function Vc(){return 1/3*Math.PI*zn*zn*_n}function qo(){return zn*xn}function zo(){return _n*xn}function Md(){return Math.max(vi(),qo(),zo())}function Js(){return Math.max(_n,zn,1/3*Math.PI*_n*zn*zn)}let Yi=!1;const Sd=document.getElementById("mode-toggle");function gv(_){const e=zn/_n;return Math.cbrt(3*_/(Math.PI*e*e))}let Rr=.001;const mv=document.getElementById("volume-bar"),yv=document.getElementById("radius-bar"),vv=document.getElementById("height-bar"),Zs=200,bv=document.getElementById("volume-rate-bar"),xv=document.getElementById("radius-rate-bar"),wv=document.getElementById("height-rate-bar");function Id(){cl=Co-Gc,sl=Io-zc,al=To-qc}const Av=document.getElementById("volume-display"),Ev=document.getElementById("radius-display"),_v=document.getElementById("height-display");function Wa(){Av.textContent=vi().toFixed(2),Ev.textContent=qo().toFixed(2),_v.textContent=zo().toFixed(2)}const Mv=document.getElementById("volume-rate-display"),Sv=document.getElementById("radius-rate-display"),Iv=document.getElementById("height-rate-display");function Xa(){Mv.textContent=(cl*1e3).toFixed(2),Sv.textContent=(al*1e3).toFixed(2),Iv.textContent=(sl*1e3).toFixed(2)}document.getElementById("heightInput").addEventListener("input",_=>{_n=parseFloat(_.target.value),gu(),Wa(),Xa(),Uo(),ll()});document.getElementById("radiusInput").addEventListener("input",_=>{zn=parseFloat(_.target.value),gu(),Wa(),Xa(),Uo(),ll()});const Go=document.getElementById("play-pause-button");Go.addEventListener("click",()=>{Ln||(xn=0,to=0),Ln=!Ln,Go.textContent=Ln?"":"",Vo.textContent=Ln?"":""});const Vo=document.getElementById("graph-play-pause-button");Vo.addEventListener("click",()=>{Ln||(xn=0,to=0),Ln=!Ln,Vo.textContent=Ln?"":"",Go.textContent=Ln?"":""});const Cv=document.getElementById("forward-button-one");Cv.addEventListener("click",()=>{Rr+=.001,Rr>.01&&(Rr=.001)});const Tv=document.getElementById("forward-button-two");Tv.addEventListener("click",()=>{Rr+=.001,Rr>.01&&(Rr=.001)});const eo=document.getElementById("animation-slider");eo.addEventListener("click",()=>{Ln=!1,Go.textContent=Ln?"":"",Vo.textContent=Ln?"":"",Qo.value=eo.value,Uo()});Sd.addEventListener("click",()=>{xn=0,to=0,Do=1,Yi=!Yi,Sd.textContent=Yi?"Mode: Constant Volume":"Mode: Linear Scale",eo.value=0,Qo.value=0,Rr=.001});Xo.domElement.addEventListener("click",_=>{if(_.detail===3){const e=document.createElement("video");e.loop=!0,e.muted=!0,e.src="mac.m4v",e.playbackRate=1,e.play();const a=new Kd(e);$r.material.map=a,$r.material.needsUpdate=!0,console.log("You found the easter egg!")}});const Qo=document.getElementById("graph-animation-slider");Qo.addEventListener("input",()=>{Ln=!1,eo.value=Qo.value,Go.textContent=Ln?"":"",Vo.textContent=Ln?"":""});window.addEventListener("resize",()=>{hu(),fu()});document.querySelectorAll(".collapsible-header").forEach(_=>{_.addEventListener("click",()=>{_.nextElementSibling.classList.toggle("collapsed")?_.classList.remove("active"):_.classList.add("active")})});let Ln=!0,Do=1;const Dv=.01,Qc=1;let xn=.01,La=0,to=0;function mu(){requestAnimationFrame(mu),Ln&&(Yi&&(La+=Do*Rr,to=La/Vc(),xn=gv(La)/_n),Yi||(xn+=Do*Rr),Io=zo(),To=qo(),Co=vi(),eo.value=xn*1e3,Qo.value=xn*1e3,xn>Qc&&(Do=-1),xn<Dv&&(Do=1),$n.scale.set(xn,xn,xn),$n.position.y=_n*xn/2,Id(),Ed(),_d(),Wa(),Xa(),Uo(),zc=Io,qc=To,Gc=Co),Ln||(xn=eo.value/1e3,to=vi()/Vc(),La=vi(),Io=zo(),To=qo(),Co=vi(),$n.scale.set(xn,xn,xn),$n.position.y=_n*$n.scale.y/2,Id(),Ed(),_d(),Wa(),Xa(),Uo(),zc=Io,qc=To,Gc=Co),_i.update(),Xo.render(Ur,Ai)}mu();
